{"ver":"0.1","info":{"id":"XltBzB","date":"1543264078","viewed":157,"name":"another 2d house","username":"lovelyH","description":"Recently there is a lot of 2d houses on shadertoy. So I decide to also make one.","likes":13,"published":1,"flags":0,"usePreview":0,"tags":["2d","house"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec2 rot(vec2 p, float l){\n\tfloat s= sin(l), c= cos(l);\n\treturn vec2(\n\t\tc*p.x - s*p.y,\n\t\ts*p.x + c*p.y\n\t\t);\n}\n\n\n\n/// hold color result of helper drawing function\nvec3 rc;\n\n\n/// draw window\nbool getWindow(vec2 uv){\n\tuv= abs(uv);\n\tif( max( uv.x, uv.y ) < 0.1 ){\n\t\tif( min( uv.x,uv.y) < 0.01 || 0.08 < max(uv.x,uv.y) )\n\t\t\trc= vec3(.4,.3,.3);\n\t\telse\n\t\t\trc= vec3(.3,.5,.9);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n\nvec3 getFaceColor(vec2 uv){\n\tuv.x= abs(uv.x);\n\t// /// eyes\n\t// if( length(uv - vec2(0.015,0.015)) < 0.007 )\n\t// \treturn vec3(.1);\n\t// /// lips\n\t// if( abs(length(uv)-0.02) < 0.005 && uv.y < -0.01 )\n\t// \treturn vec3(.1);\n\n\t/// eyes\n\tif( length(uv - vec2(0.011,0.005)) < 0.005 )\n\t\treturn vec3(.1);\n\t/// lips\n\tif( abs(length(uv-vec2(0,-.01))-0.02) < 0.003 && uv.y < -0.02 )\n\t\treturn vec3(.1);\n\treturn vec3(.9,.9,.8);\n}\n\n\n\nbool getWhite(vec2 uv, bool female, float generationAndAge){\n\tint generation= int(floor(generationAndAge));\n\tfloat age= fract( generationAndAge );\n\tif( age < 0.05 ){\n\t\t// uv.x += 0.15;\n\t\t// uv.y += 0.13;\n\t\t// uv= rot(uv,0.5);\n\t\t// if( length(uv) < 0.05 || length(uv-vec2(0.0,0.04)) < 0.05 ){\n\t\t// \trc= vec3(1);\n\t\t// \treturn true;\n\t\t// }\n\t\treturn false;\n\t}\n\tif( age < 0.25 ){\n\t\tuv =  (uv-vec2(0.0,-0.5)) / (clamp(age,0.2,0.25)/0.25) + vec2(0.0,-0.5);\n\t}\n\t\n\tvec3 hairColor= vec3(.1);\n\tif( female ){\n\t\tswitch(int(mod(float(generation),3.))){\n\t\t\tcase 0: hairColor= vec3(.9,.9,.1); break;\n\t\t\tcase 1: hairColor= vec3(.9,.2,.1); break;\n\t\t}\n\t}\n\thairColor= mix( hairColor, vec3(.7), 2.5*(age-0.6) );\n\n\tfalse;///@todo something is probably wrong with compiler. that line need to be here\n\tif( female ){\n\t\t/// config\n\t\tfloat dressLenght= clamp( -0.3+0.01*float(generation), -0.3, -0.2 );\n\t\tfloat hairLenght= clamp( mod( float(generation)*0.07, 0.1 )  , 0.0, 0.1);\n\t\tvec3 dressColor= vec3(.9);\n\t\tswitch(int(mod(float(generation),5.))){\n\t\t\tcase 0: dressColor= vec3(.7,.7,.7); break;\n\t\t\tcase 1: dressColor= vec3(.9,.5,.9); break;\n\t\t\tcase 2: dressColor= vec3(.1,.5,.9); break;\n\t\t\tcase 3: dressColor= vec3(.4,.8,.5); break;\n\t\t}\n\n\t\tuv.x= abs(uv.x);\n\t\t/// hair\n\t\tif( \n\t\t\t(0.03 < uv.x || 0.02 < uv.y  )\n\t\t\t&&\n\t\t\t(\n\t\t\t\tlength(uv) < 0.05 && 0.0 < uv.y\n\t\t\t\t||\n\t\t\t\tuv.x < 0.05 && uv.y <= 0.0 && -hairLenght < uv.y\n\t\t\t)\n\t\t ){\n\t\t\trc= hairColor;\n\t\t\treturn true;\n\t\t}\n\t\t/// head\n\t\tif( length(uv) < 0.04 ){\n\t\t\trc= getFaceColor(uv);\n\t\t\treturn true;\n\t\t}\n\t\t/// dress bottom\n\t\tif( dressLenght < uv.y && 3.0*uv.x + uv.y < -0.05 )\n\t\t{\n\t\t\trc= dressColor;\n\t\t\treturn true;\n\t\t}\n\t\t/// dress top\n\t\tif( -0.2 < uv.y && uv.x - 0.1 * uv.y < 0.05 && uv.y < -0.04 && -0.29 < uv.y )\n\t\t{\n\t\t\trc= dressColor;\n\t\t\treturn true;\n\t\t}\n\t\t/// hands\n\t\tvec2 u= rot(uv-vec2(0.0,-0.00),-0.5);\n\t\tu.x= abs(u.x);\n\t\tif( u.x < 0.01 && -0.2 < u.y ){\n\t\t\tif( u.y < -0.17 ){\n\t\t\t\trc= vec3(1);\n\t\t\t}else{\n\t\t\t\trc= dressColor;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\t/// legs\n\t\tu= uv;\n\t\tu.x= abs(u.x-0.025);\n\t\tif( u.x < 0.012 && u.y < -0.18 && -0.34 < u.y ){\n\t\t\trc= -0.31 < u.y ? vec3(.9,.9,.8) : vec3(.3,.0,.0);\n\t\t\treturn true;\n\t\t}\n\t}else{\n\t\tvec3 clothColor= vec3(.1,.2,.1);\n\t\tswitch(int(mod(float(generation),7.))){\n\t\t\tcase 0:clothColor= vec3(.5,.1,.1); break;\n\t\t\tcase 1:clothColor= vec3(.2,.1,.6); break;\n\t\t\tcase 2:clothColor= vec3(.4,.1,.8); break;\n\t\t\tcase 3:clothColor= vec3(.6,.6,.99); break;\n\t\t\tcase 4:clothColor= vec3(.85); break;\n\t\t\tcase 5:clothColor= vec3(.7); break;\n\t\t}\n\t\t\n\t\tvec3 clothColor2= vec3(.12,.15,.5);\n\t\tswitch(int(mod(float(generation),3.))){\n\t\t\tcase 0: clothColor2= vec3(.3,.2,.2); break;\n\t\t\tcase 1: clothColor2= vec3(.5,.4,.4); break;\n\t\t}\n\t\t\n\t\tvec2 u;\n\t\tuv.x= abs(uv.x);\n\t\t/// hair\n\t\tif( \n\t\t\t(0.03 < uv.x || 0.02 < uv.y  )\n\t\t\t&&\n\t\t\t(\n\t\t\t\tlength(uv) < 0.05 && 0.0 < uv.y\n\t\t\t\t||\n\t\t\t\tuv.x < 0.05 && uv.y <= 0.0 && 0.0 < uv.y\n\t\t\t)\n\t\t ){\n\t\t\trc= hairColor;\n\t\t\treturn true;\n\t\t}\n\t\t/// head\n\t\tif( length(uv) < 0.04 ){\n\t\t\trc= getFaceColor(uv);\n\t\t\treturn true;\n\t\t}\n\t\t/// legs\n\t\tu= uv;\n\t\tif( u.y < -0.16 )\n\t\tif( -0.34 < u.y && u.x < 0.012+0.025 && (  0.01 < u.x || -0.2 < u.y )  )\n\t\t{\n\t\t\trc= -0.31 < u.y ? clothColor2 : vec3(.1,.0,.0);\n\t\t\treturn true;\n\t\t}\n\t\t/// t-shirt top\n\t\tif( -0.2 < uv.y && uv.x - 0.1 * uv.y < 0.05 && uv.y < -0.04 && -0.29 < uv.y )\n\t\t{\n\t\t\trc= uv.y < -0.15 ? vec3(0) : clothColor;\n\t\t\treturn true;\n\t\t}\n\t\t/// hands\n\t\tu= rot(uv-vec2(0.0,-0.00),-0.5);\n\t\tu.x= abs(u.x);\n\t\tif( u.x < 0.01 && -0.2 < u.y ){\n\t\t\tif( u.y < -0.17 ){\n\t\t\t\trc= vec3(1);\n\t\t\t}else{\n\t\t\t\trc= clothColor;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n\t/// not us\n\treturn false;\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv= 2.0 * fragCoord / iResolution.xy - vec2(1.0,1.0);\n\tuv.x *= iResolution.x / iResolution.y;\n\n\tvec3 r;\n\tfloat generation= 0.2 * iTime;\n\tgeneration= floor(generation) + 0.5 * fract(generation);\n\tbool isChildFemale= mod(generation,2.0) < 1.0;\n\tfloat parentMove1= clamp( 20.0 * (mod(generation,1.0) - 0.26 ) , 0.0, 1.0 );\n\tfloat pairMove=    clamp( 15.0 * (mod(generation,1.0) - 0.30 ) , 0.0, 100.0 );\n\tfloat parentMove2= clamp( 15.0 * (mod(generation,1.0) - 0.35 ) , 0.0, 100.0 );\n\n\tif( false ){\n\t}else if(mod(generation,1.0) < 0.05 && ( length(rot(uv+vec2(0.15+0.6,0.13+0.2),0.5)) < 0.05 || length(rot(uv+vec2(0.15+0.6,0.13+0.2),0.5)-vec2(0,0.04)) < 0.05 ) ){\n\t\t/// infrant\n\t\tr= vec3(1);\n\t}else if( getWhite(uv-vec2(-0.8-parentMove2,-0.2) + parentMove1 * vec2(0.2,0.2), true, generation - 0.5 ) ){\n\t\t/// mum\n\t\tr= rc;\n\t}else if( getWhite(uv-vec2(-0.4-parentMove2,-0.2) + parentMove1 * vec2(-0.2,0.2), false, generation - 0.5 ) ){\n\t\t/// dad\n\t\tr= rc;\n\t}else if( getWhite(uv-vec2(-0.6 + clamp( 15.0 * (mod(generation,1.0) - 0.42 ) , 0.0, 1.0 )*(isChildFemale?-0.2:0.2),-0.2), isChildFemale, generation ) ){\n\t\t/// child\n\t\tr= rc;\n\t}else if( getWhite(uv-vec2(-0.6 + (isChildFemale?0.2:-0.2) - 10.0*clamp(0.4-mod(generation,1.0), 0.0, 1.0) , -0.2), !isChildFemale, generation ) ){\n\t\t/// pair\n\t\tr= rc;\n\t}else if( true && uv.x + uv.y < 1.8 && - uv.x + uv.y < 0.4 && 0.4 < uv.y && uv.y < 0.7  ){\n\t\t/// house roof\n\t\tr = vec3(.9,.1,.1);\n\t}else if( getWindow(uv-vec2(0.4,0.2)) ){\n\t\t/// window 1\n\t\tr = rc;\n\t}else if( getWindow(uv-vec2(1.0,0.2)) ){\n\t\t/// window 2\n\t\tr = rc;\n\t}else if( getWindow(uv-vec2(0.4,-0.25)) ){\n\t\t/// window 3\n\t\tr = rc;\n\t}else if( abs(uv.x-0.9) < 0.1 && abs(uv.y+0.3) < 0.2 ){\n\t\t/// door\n\t\tr = vec3(.5,.3,.1);\n\t}else if( abs(uv.x-0.7) < 0.6 && abs(uv.y) <= 0.5 ){\n\t\t/// house wall\n\t\tr = vec3(.7);\n\t}else if( + uv.x * uv.x * 0.04 +uv.y < -0.3 ){\n\t\t/// grass\n\t\tr = vec3(.3,.7,.2);\n\t}else{\n\t\t/// sky\n\t\tr = vec3(.5,.5,.9);\n\t}\n\n\tfragColor = vec4(r,0);\n}\n\n","name":"Image","description":"","type":"image"}]}