{"ver":"0.1","info":{"id":"stlSzM","date":"1625389945","viewed":311,"name":"framecounter","username":"schobbejack","description":"display hh:mm:ss:ff based on system clock","likes":2,"published":3,"flags":0,"usePreview":0,"tags":["counter","framecounter"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"int bcd(int i) // 0 - 99\n{\n    return (i/10*6+i);\n}\n\nfloat digit(vec2 uv, int i)\n{\n    const float doff=12./16.;\n    \n    return texture(iChannel0,uv/16.+vec2(float(i)/16.,doff)).x;\n}\n\nvoid draw_digit(inout float c, vec2 uv, int i)\n{\n    if(abs(uv.x)<.5 && abs(uv.y) < .5)\n    {\n        c = max(c,digit(uv+.5,i));\n    }\n}\n\nvoid draw_bcd(inout float c, vec2 uv, int i)\n{\n    draw_digit(c, uv,(i&0xf0)>>4);\n    draw_digit(c, uv-vec2(.5,0),(i&0xf));\n}\n\n#define FRAME_RATE 50.\n\n\nfloat draw_time(vec2 uv, vec2 o, float size)\n{\n    float c = 0.;\n    uv=(uv-o)/size - vec2(.25,-.5);\n    \n    int hour = bcd(int(iDate.w/3600.));\n    int minute = bcd(int(mod(iDate.w,3600.)/60.));\n    int second = bcd(int(mod(iDate.w,60.)));\n    \n    int pal_frame = bcd(int(fract(iDate.w)*FRAME_RATE));\n\n    draw_bcd(c,uv,hour);\n    uv.x-=.85;\n    draw_digit(c,uv,10);\n    uv.x-=.35;\n    draw_bcd(c,uv,minute);\n    uv.x-=.85;\n    draw_digit(c,uv,10);\n    uv.x-=.35;\n    draw_bcd(c,uv,second);\n    uv.x-=.85;\n    draw_digit(c,uv,10);\n    uv.x-=.35;\n    draw_bcd(c,uv,pal_frame);\n    return c;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n\n    vec3 col=mix(vec3(0),vec3(1),draw_time(uv,vec2(-.65,0.125),.3+sin(iTime)*.01));\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}