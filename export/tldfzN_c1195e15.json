{"ver":"0.1","info":{"id":"tldfzN","date":"1612382560","viewed":190,"name":"Neural Choco House","username":"sawass","description":"WIP Neural SDF Tests\nBased on: https://www.shadertoy.com/view/wtVyWK","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["house","siren","ml","reconstruct"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3zn","filepath":"/media/a/0681c014f6c88c356cf9c0394ffe015acc94ec1474924855f45d22c3e70b5785.png","previewfilepath":"/media/ap/0681c014f6c88c356cf9c0394ffe015acc94ec1474924855f45d22c3e70b5785.png","type":"cubemap","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Uncomment for higher quality NN\n//#define HQ\n\nvec3 erot(vec3 p, vec3 ax, float ro) {\n    return mix(dot(p,ax)*ax,p,cos(ro))+sin(ro)*cross(ax,p);\n}\n\nfloat sdBox( vec3 p, vec3 b ) {\n  vec3 q = abs(p) - b;\n  return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0);\n}\n\nfloat opNoisyBox( in vec3 p, vec3 b )\n{\n    float d1 = sdBox(p, b);\n    float d2 = sin(0.4*p.x)*sin(sin(iTime+p.y*8.2)*1.9*p.y)*sin(cos(iTime+p.z*6.8)*0.3*p.z-0.1);\n    return d1+d2;\n}\n\nfloat opUnion( float d1, float d2 ) { return min(d1,d2); }\n\nfloat opSubtraction( float d1, float d2 ) { return max(-d1,d2); }\n\nfloat opIntersection( float d1, float d2 ) { return max(d1,d2); }\n\nfloat scene(vec3 p) {\n#ifdef HQ\n    vec4 f0_0=sin(p.y*vec4(-.457,-1.677,4.049,-.637)+p.z*vec4(-4.147,3.464,-.490,-3.429)+p.x*vec4(.881,-2.806,-2.436,2.944)+vec4(-5.805,-5.301,2.820,4.142));\n    vec4 f0_1=sin(p.y*vec4(-3.478,-1.759,-.866,-1.437)+p.z*vec4(-2.949,.345,-2.974,3.582)+p.x*vec4(-2.618,-.577,-2.612,-1.013)+vec4(5.642,1.587,3.873,-6.802));\n    vec4 f0_2=sin(p.y*vec4(1.627,3.407,-2.026,4.314)+p.z*vec4(1.562,1.503,.845,-1.547)+p.x*vec4(1.282,-.772,.203,.748)+vec4(.520,-2.268,2.342,-7.744));\n    vec4 f0_3=sin(p.y*vec4(.163,-3.674,.545,1.558)+p.z*vec4(.160,-2.532,-4.114,-2.112)+p.x*vec4(-1.901,-.462,-1.025,-.160)+vec4(5.351,6.056,-3.355,-6.112));\n    vec4 f0_4=sin(p.y*vec4(3.969,2.343,1.534,-1.648)+p.z*vec4(-4.982,-3.768,3.133,-.045)+p.x*vec4(-1.942,.726,-2.290,-3.270)+vec4(-4.753,-4.248,-5.483,6.229));\n    vec4 f0_5=sin(p.y*vec4(2.772,-3.577,-4.241,-2.440)+p.z*vec4(1.451,4.102,.975,-1.648)+p.x*vec4(-.684,1.291,.855,-2.203)+vec4(-1.037,.725,-7.480,6.271));\n    vec4 f0_6=sin(p.y*vec4(-1.958,-2.650,-.485,3.993)+p.z*vec4(-3.058,4.974,1.612,2.065)+p.x*vec4(3.693,-2.088,-.722,.334)+vec4(-7.137,1.341,-4.161,7.088));\n    vec4 f0_7=sin(p.y*vec4(3.846,.969,1.813,3.714)+p.z*vec4(.027,-.803,-.495,.809)+p.x*vec4(-2.879,-2.035,1.320,1.097)+vec4(-2.257,.642,1.640,4.828));\n    vec4 f1_0=sin(mat4(.272,.286,-.836,.225,-.528,.223,-.070,.105,-.109,-.375,-.132,-.487,-.034,-.162,-.318,-.176)*f0_0+\n        mat4(.473,.155,-.052,-.322,.021,.586,.169,-.252,.674,-.426,.083,.371,.049,.015,-.064,-.241)*f0_1+\n        mat4(-.159,-.157,-.191,-.698,-.125,-.270,-.172,-.397,.549,.006,.055,-.315,-.525,-.206,-.234,-.058)*f0_2+\n        mat4(.551,.135,.127,-.437,-.890,-.146,.135,.445,.223,.580,.463,-.107,.414,-.400,-.480,.162)*f0_3+\n        mat4(.078,-.424,-.198,.078,.561,-.354,.128,-.158,-.498,.302,.244,.851,.153,.558,-.804,.269)*f0_4+\n        mat4(-.471,.063,.534,-.515,-.569,.494,-.136,-.581,-.501,-.035,.157,.054,.054,-.170,-.261,.202)*f0_5+\n        mat4(.053,-.073,.461,.571,-.062,.687,.291,.507,.100,.062,-.050,-.151,.684,-.173,-.243,.036)*f0_6+\n        mat4(.549,-.623,.132,-.026,-.503,.302,-.312,-.204,-.243,.438,.336,.438,-.562,-.806,.267,.176)*f0_7+\n        vec4(-1.535,2.191,-2.234,-.635))/1.0+f0_0;\n    vec4 f1_1=sin(mat4(.242,.283,-.005,.154,.514,-.006,.523,.253,.288,-.543,-.118,-.213,.687,.918,-.159,-.013)*f0_0+\n        mat4(-.208,.486,.262,-.969,.033,-.113,.474,.020,1.202,.170,-.124,-.182,-.633,.313,-.120,.138)*f0_1+\n        mat4(-.089,.145,.023,.115,-.377,.066,-.401,-.015,.392,.242,.347,-.383,-.062,-.295,.350,.809)*f0_2+\n        mat4(.345,.274,-.057,-.216,.236,-.091,-.144,.281,-.443,-.226,-.178,.287,.483,.228,.258,-.414)*f0_3+\n        mat4(.332,.281,-.011,.299,.083,-.233,.073,-.503,.704,.399,.427,.829,-.261,-.084,.432,-.561)*f0_4+\n        mat4(.354,.152,.086,.116,.334,.246,-.054,.338,-.485,-.043,-.305,-.327,-.437,-.259,-.377,-.536)*f0_5+\n        mat4(.533,-.096,.047,-.237,-.036,-.130,-.218,-.243,-.404,-.176,.145,.033,-.497,.144,.376,-.603)*f0_6+\n        mat4(.140,-.270,-.010,-.044,-.418,.086,.438,.151,-.144,-.439,-.084,.292,.537,-.275,.415,.305)*f0_7+\n        vec4(.589,1.519,1.533,.737))/1.0+f0_1;\n    vec4 f1_2=sin(mat4(.335,.386,.288,-.402,.296,.581,.423,-.606,-.348,-.128,.067,-.344,-.412,.200,-.016,-.103)*f0_0+\n        mat4(-.394,.031,.435,.375,-.003,-.154,-.112,-.120,.502,.197,.338,.268,.096,-.744,.030,-.054)*f0_1+\n        mat4(.183,.030,.540,.219,-.239,.188,.393,-.232,-.021,.051,.316,.219,.060,-.020,-.233,.104)*f0_2+\n        mat4(-.348,-.315,.937,.163,.284,.874,-.296,.040,.205,.485,.210,-.301,-.096,-.006,.205,.555)*f0_3+\n        mat4(.138,-.197,-.159,-.265,-.403,.191,-.202,.224,-.036,-.125,-.564,.112,-.349,.457,-.271,-.259)*f0_4+\n        mat4(-.159,-.443,.239,-.305,.316,.056,.302,-.265,-.787,.187,.214,-.355,-.283,-.092,-.342,.247)*f0_5+\n        mat4(.221,-.370,-.430,.049,-.087,-.340,-.852,-.121,-.091,.064,.196,-.146,-.223,-.228,.137,-.153)*f0_6+\n        mat4(.432,-.247,-.005,-.058,-.497,.125,-.722,-.155,.179,.488,-.221,-.049,.375,.150,-.487,.608)*f0_7+\n        vec4(.509,-.969,-.495,.896))/1.0+f0_2;\n    vec4 f1_3=sin(mat4(-.400,-.322,-.558,-.307,-.172,.343,.052,.273,-.137,-.248,-.475,-.202,.222,.350,.979,.003)*f0_0+\n        mat4(.212,-.570,.204,-.076,-.064,.045,.158,-.103,.392,.565,-.070,.592,.306,.408,-.147,.456)*f0_1+\n        mat4(-.328,-.629,.515,-.176,.060,-.023,-.092,-.163,-.070,-.440,.195,-.380,.460,.351,-.636,-.562)*f0_2+\n        mat4(.510,.024,-.290,.423,-.084,.674,.159,-.035,-.051,-.707,-.331,-.590,.170,-.364,.265,-.111)*f0_3+\n        mat4(.414,-.357,-.371,-.120,-.312,.793,.267,.229,-.189,.507,-.178,-.342,-.616,-.032,-.135,-.347)*f0_4+\n        mat4(.114,.032,.026,.117,-.164,.321,.104,-.001,-.071,-.323,-.031,-.962,.379,-.604,-.504,-.076)*f0_5+\n        mat4(-.331,.287,-.035,-.203,-.309,-.323,-.246,-.585,.144,.379,-.087,-.656,.141,-.721,.152,-.073)*f0_6+\n        mat4(.683,.433,.333,.450,.056,-.617,.235,-.154,-.082,-.076,.061,-.010,-.484,.444,-.164,-.190)*f0_7+\n        vec4(2.154,.240,-1.468,-1.893))/1.0+f0_3;\n    vec4 f1_4=sin(mat4(-.013,.184,-.221,-.351,-.018,.070,.735,.139,.048,-.423,.417,.003,-.538,.037,-.375,.381)*f0_0+\n        mat4(-.654,.875,-.088,-.596,-.292,-.093,-.073,.218,-.145,.181,-.523,-.184,.215,-.531,.401,.237)*f0_1+\n        mat4(-.220,-.154,-.293,-.390,-.390,.211,-.597,.367,.120,.143,.122,-.247,.108,-.562,.508,-.464)*f0_2+\n        mat4(-.359,.615,-.190,-.075,.232,-.690,-.244,.942,.096,-.178,.090,-.414,.039,.319,.213,-.002)*f0_3+\n        mat4(-.348,-.457,1.317,1.026,-.368,.738,-.711,-.446,-.070,.162,.005,-.073,-.004,.327,-.388,.077)*f0_4+\n        mat4(-.730,.051,.042,.687,-.053,.004,-.713,.266,.229,.638,-.633,-.049,-.042,-.265,.594,.067)*f0_5+\n        mat4(.083,-.019,.167,-.500,.181,-.291,.302,-.031,-.013,-.220,.255,-.312,.192,.497,.673,-.563)*f0_6+\n        mat4(-.178,.234,.419,-.157,.087,.173,.022,.158,.088,-.022,-.188,-.321,-.268,-.261,.407,-.227)*f0_7+\n        vec4(-.231,-.374,-1.509,.954))/1.0+f0_4;\n    vec4 f1_5=sin(mat4(-.279,.033,-.611,.412,-.710,.354,.298,-.313,-.315,.078,-.012,-.329,-.096,.364,-.016,.461)*f0_0+\n        mat4(-.273,-.669,-.247,-.054,.160,-.010,.038,-.090,-.435,.030,.626,.198,.573,.219,-.087,-.392)*f0_1+\n        mat4(-.471,-.365,-.128,.135,-.219,.203,-.225,-.299,-.410,-.036,.342,.063,-.511,-.751,-.093,-.150)*f0_2+\n        mat4(.631,-.279,-.420,.127,.069,.495,.091,-.232,.064,-.382,-.178,.259,-.601,-.272,.362,-.077)*f0_3+\n        mat4(.024,.098,.620,-.544,.382,.127,.184,.104,-.666,.293,.023,.341,-.838,-.227,-.023,.069)*f0_4+\n        mat4(.066,.700,.022,.063,.578,.289,-.350,-.239,.408,.512,-.306,-.100,.275,.535,.160,-.117)*f0_5+\n        mat4(.057,.237,.140,.648,-.503,.144,-.241,.203,.499,.099,.519,-.151,-.082,-.356,-.007,.190)*f0_6+\n        mat4(-.062,-.293,.211,.004,.313,.322,.020,-.182,-.160,.095,.122,-.196,.657,-.471,.298,.104)*f0_7+\n        vec4(3.035,-2.163,1.582,1.699))/1.0+f0_5;\n    vec4 f1_6=sin(mat4(-.408,.708,-.781,.115,-.177,.531,-.359,-.084,-.262,.014,.192,-.106,.035,.267,.404,.637)*f0_0+\n        mat4(-.323,.011,.451,-.791,-.202,-.186,-.570,.289,.519,.228,-.447,.377,-.247,-.443,-.498,.114)*f0_1+\n        mat4(.114,-.212,-.475,-.144,-.426,.240,-.050,.218,.541,.311,-.498,.091,-.497,.137,.666,-.750)*f0_2+\n        mat4(.163,.189,.319,.358,-.117,.318,-.630,.540,-.137,.243,-.013,.303,.494,.200,-.293,-.536)*f0_3+\n        mat4(.263,-.132,.625,-.562,.914,-.425,.055,.628,.375,.883,-.755,.401,-.181,.348,.485,.157)*f0_4+\n        mat4(.040,.297,-.796,-.255,-.692,.385,.012,-.198,-.046,.112,-1.163,.509,.280,-.017,.603,-.080)*f0_5+\n        mat4(.250,.092,-.056,-.032,.676,.168,.274,-.355,-.038,-.106,.286,-.058,-.396,-.402,1.009,-.907)*f0_6+\n        mat4(.035,-.263,.757,-.595,-.119,.009,-.866,.246,-.037,.167,-.362,.392,.770,.093,.336,-.486)*f0_7+\n        vec4(1.168,.861,1.560,.918))/1.0+f0_6;\n    vec4 f1_7=sin(mat4(-.026,-.091,.321,-.773,.214,-.743,-.167,-.224,.746,.248,.389,-.127,.545,-.229,-.397,.345)*f0_0+\n        mat4(.071,1.185,.260,-.667,.078,.163,.180,.178,.347,.012,.045,.070,.480,-.135,-.229,.131)*f0_1+\n        mat4(-.303,-.360,-.544,.297,.205,.440,.132,-.199,.219,.036,-.003,.456,.354,-.556,.023,-.743)*f0_2+\n        mat4(.172,.213,-.410,-.465,.056,-1.045,.101,.936,-.360,-.140,-.000,-.077,-.369,-.288,-.320,-.204)*f0_3+\n        mat4(.319,-.863,-.065,.007,-.272,.556,.432,.044,.125,-.283,-.151,-.793,-.035,.380,-.334,-.043)*f0_4+\n        mat4(-.118,.134,.009,-.127,-.149,-.318,.295,.623,-.584,.471,-.095,.146,-.060,.658,.004,-.327)*f0_5+\n        mat4(-.210,.115,.590,-.576,-.309,.424,.079,-.160,-.360,.530,-.046,.077,-.168,.769,-.023,-1.103)*f0_6+\n        mat4(-.104,-.547,-.269,-.229,.126,-.060,-.350,-.194,-.481,.164,.027,-.018,.539,-.552,-.317,-.366)*f0_7+\n        vec4(.960,1.256,-1.505,-.841))/1.0+f0_7;\n    vec4 f2_0=sin(mat4(.299,.197,-.114,.072,-.261,-.166,.014,-.014,.160,-.302,-.154,.519,.253,.282,-1.154,.915)*f1_0+\n        mat4(-.744,-.657,-.126,.279,-.366,.085,-.190,-.109,.057,-.342,-.175,.355,.770,-.598,.121,-.640)*f1_1+\n        mat4(-.661,.214,-.181,-.225,.223,-.003,-.189,-.068,.829,-.589,.366,-.377,-.343,.501,-.289,-.281)*f1_2+\n        mat4(.176,.375,-1.081,.032,-.440,-.033,.137,-.135,-.391,.316,.308,-.238,.441,-.169,.923,.506)*f1_3+\n        mat4(.663,.035,-.172,-.018,-1.014,.468,.423,.674,-.547,-.079,-.356,.093,-.434,-.254,.460,-.088)*f1_4+\n        mat4(.376,-.092,-.383,-.428,.384,.305,-.774,.564,-.642,.419,-.173,-.682,.167,.768,-.486,.025)*f1_5+\n        mat4(-.558,-.242,.279,-.868,.106,.060,-.841,-.169,-.030,.096,-.383,-.043,-.470,.279,-.540,.393)*f1_6+\n        mat4(.691,.693,-.358,-.148,-.401,.879,-.906,.199,.173,.010,.012,-.827,.281,-.194,-.184,.465)*f1_7+\n        vec4(-1.556,1.019,.309,.194))/1.4+f1_0;\n    vec4 f2_1=sin(mat4(-.350,1.253,-.136,.360,-.151,.287,.303,.636,-.190,-.407,.144,.133,.682,.108,.595,.651)*f1_0+\n        mat4(1.090,-.303,-.131,.257,.414,.270,-.092,.182,-.586,-.066,-.007,-.192,-.283,-.343,-.021,-.207)*f1_1+\n        mat4(.850,-.334,.258,-.541,.268,-.773,-.379,-.052,-1.140,.108,.663,.099,-.236,-.965,.050,.167)*f1_2+\n        mat4(1.038,-1.131,.305,-.132,.252,.466,.091,.062,.577,-.275,-.413,.241,-.050,.649,-.233,.101)*f1_3+\n        mat4(-.547,.388,-.076,.553,1.209,.185,-.598,.535,.813,-.861,-.438,.301,-.362,.400,.224,-.422)*f1_4+\n        mat4(-.039,-.375,.262,.041,.084,-.871,-.063,-.123,-.176,-.273,-.163,-.268,.033,-.261,.348,.352)*f1_5+\n        mat4(-.228,.200,.085,.175,-.526,-.240,.450,-.046,.089,.064,.479,-.116,.342,-1.206,.017,-.205)*f1_6+\n        mat4(-.683,.193,.444,.123,.331,.074,.620,.299,-.363,-.504,.452,-.183,.148,-.785,.394,-.224)*f1_7+\n        vec4(.049,.855,-1.814,-.238))/1.4+f1_1;\n    vec4 f2_2=sin(mat4(.536,.587,-.097,-.073,-.461,-.462,.285,.355,-.481,.145,-.242,.201,.232,.053,-.097,.442)*f1_0+\n        mat4(.246,.133,.043,.246,-.293,-.307,.282,-.069,-.527,.074,.293,.224,-.400,-.359,-.029,.116)*f1_1+\n        mat4(.536,-.369,-.728,.503,.249,-.114,.017,-.208,-.182,-.038,-.379,-.804,.083,.077,-.193,-.072)*f1_2+\n        mat4(.361,.018,.014,-.384,.052,-.111,.606,.460,.557,-.227,-.003,.153,-.484,-.425,.701,-.008)*f1_3+\n        mat4(.332,.310,.223,-.169,.147,-.611,.033,-.013,.564,.026,-.064,-.113,.485,.242,.228,-.432)*f1_4+\n        mat4(.526,.244,-.486,.161,-.131,.882,-.092,-.120,-.272,-.345,.129,.361,-.454,.029,.030,-.006)*f1_5+\n        mat4(-.347,.603,-.217,.217,.140,.069,-.451,-.504,.004,.004,-.283,.222,-.203,.631,-.352,.497)*f1_6+\n        mat4(-.361,-.067,.147,.377,.428,-.161,-.357,.579,-.133,-.353,-.049,-.114,.069,.345,-.334,.241)*f1_7+\n        vec4(.367,-.439,1.643,1.025))/1.4+f1_2;\n    vec4 f2_3=sin(mat4(.804,-.782,1.165,-.725,-.246,-.050,-.387,-.677,-.080,.163,.340,-.153,-.504,-1.181,-.071,-2.046)*f1_0+\n        mat4(.056,-.803,-.467,-.484,-.354,-.409,-.063,-.321,.286,-.048,.030,-.573,-.490,.237,.369,.547)*f1_1+\n        mat4(.736,-.310,.142,-.051,.099,.763,-.173,.290,.274,-.381,.479,.893,-.432,.697,-.186,.545)*f1_2+\n        mat4(.449,-.748,-.427,-1.234,.076,-.726,-.290,-.536,.935,-.422,.370,.090,.963,.227,-.629,-.399)*f1_3+\n        mat4(-.588,-.173,-.103,-.136,.213,.229,-.820,.001,.287,-.081,-.612,-.411,-.453,.359,-.027,.655)*f1_4+\n        mat4(-.542,-.857,.472,-.284,.565,.032,.298,-.703,-.639,.093,-.225,.041,.083,.820,.435,.162)*f1_5+\n        mat4(-.073,-.436,.859,.351,.027,.096,-.315,-.121,-.391,-.645,.142,-.356,.552,.014,.059,-.174)*f1_6+\n        mat4(.632,.549,.812,-.643,-.488,-.868,-.006,-.593,.327,-.322,.318,-.182,.304,.260,-.068,-.198)*f1_7+\n        vec4(2.130,.814,1.575,2.609))/1.4+f1_3;\n    vec4 f2_4=sin(mat4(-.001,.073,.684,-.693,.002,.011,.196,-.631,.005,.334,-.356,.081,.171,1.462,-.621,-.698)*f1_0+\n        mat4(.597,-.142,-.720,-.838,.392,.514,-.243,.169,.426,-.465,-.041,-.908,-.496,.006,-.077,-.717)*f1_1+\n        mat4(.603,-.489,.699,.043,.147,-.162,-.344,.798,-.925,-.949,-.116,.870,-.540,-.603,-.372,1.535)*f1_2+\n        mat4(-.390,-.557,-1.003,-.516,-.027,.255,.956,-1.219,.087,-.234,.349,.039,.739,-.072,.450,-.208)*f1_3+\n        mat4(-.886,.053,-.312,-.202,1.676,.710,-.314,.089,.586,.168,-.030,.084,.219,.032,1.016,.464)*f1_4+\n        mat4(-.988,-.553,-.405,.394,.241,.164,.320,-.855,.155,.128,-.029,.270,-.218,-.315,.125,.260)*f1_5+\n        mat4(-.087,.110,.485,.222,-.535,.133,-1.001,-.169,-.129,.527,-.324,-.302,.427,-.473,-.028,.093)*f1_6+\n        mat4(-.676,.245,.690,-.193,.124,.161,-.337,-.787,.010,-.405,.105,.347,.428,.255,-.124,.699)*f1_7+\n        vec4(-1.122,.262,.466,1.380))/1.4+f1_4;\n    vec4 f2_5=sin(mat4(-.664,-.178,-.275,.334,.255,.214,.065,.301,.261,.771,.568,.161,-.526,-.892,.362,-.735)*f1_0+\n        mat4(-.175,.120,-.537,.393,-.273,-.115,-.090,.054,.162,-.027,-.438,.091,.515,-.169,-.028,-.399)*f1_1+\n        mat4(.221,.013,.059,-1.299,.550,.544,.436,.270,-.003,.714,.234,.340,.212,-.201,.043,.665)*f1_2+\n        mat4(-.398,-.187,.003,-.817,-.911,-.343,.110,-.710,.320,.582,.298,.208,.822,.264,-.014,-.690)*f1_3+\n        mat4(-.542,-.239,-.037,.288,.709,.105,-.129,-.607,.346,.161,-.026,.381,-.559,.358,-.673,.899)*f1_4+\n        mat4(-.099,-.434,-.388,.205,-.230,.037,-.521,.185,.043,-.234,-.476,.332,-.109,.314,-.184,.143)*f1_5+\n        mat4(-.302,.023,-.690,.509,-.154,-.280,-.144,.066,-.070,-.505,.164,-.923,.072,.478,.178,.171)*f1_6+\n        mat4(-.492,-.066,-.484,-.307,-.356,-.418,-.409,-.728,.471,-.443,.003,-.794,.355,-.408,-.083,-.593)*f1_7+\n        vec4(1.293,1.476,-2.465,.779))/1.4+f1_5;\n    vec4 f2_6=sin(mat4(-.235,.889,-.728,-.325,-.532,.258,-.088,-.392,-.696,-.318,1.081,1.004,-.267,-.221,.330,-.316)*f1_0+\n        mat4(.737,.054,.000,-.891,-.578,.201,-.382,.242,-.377,-.044,.031,.012,-.308,-.086,.670,.124)*f1_1+\n        mat4(-.168,.163,-.561,.416,.244,-1.041,.689,.524,.531,.073,.167,-.668,-.661,-.734,.120,.241)*f1_2+\n        mat4(.466,-.402,.426,.047,-.662,.218,-.735,.225,.545,-.381,-.024,.399,1.030,.988,.162,.292)*f1_3+\n        mat4(-.004,-.031,-.265,-.089,.608,.023,-.302,.429,.168,-.371,.518,.374,-.196,-.098,-.479,.022)*f1_4+\n        mat4(-.524,-.341,-.394,-.454,-.282,-.330,.164,.371,-.722,.041,-.416,-.178,-.632,-.159,.363,.592)*f1_5+\n        mat4(.097,.637,-.176,-.115,.535,-.266,.485,-.081,.063,.192,-.003,-.294,-.014,-.226,.478,.656)*f1_6+\n        mat4(-.433,-.025,-.610,-.057,-.236,-.479,-.216,-.344,.350,.329,.640,-.125,-1.277,-.214,-.256,.684)*f1_7+\n        vec4(.047,.826,1.232,-.647))/1.4+f1_6;\n    vec4 f2_7=sin(mat4(-.592,.476,.646,.073,.401,.763,-.417,-.220,-.266,-.521,.007,-.320,-.093,1.370,-.854,-.191)*f1_0+\n        mat4(-.067,.686,-.709,.596,.245,.750,-.824,.137,-.351,1.162,-.595,-.158,.378,-.911,-.090,-.439)*f1_1+\n        mat4(.214,.735,.276,.425,-.039,.270,.401,-.275,.021,-.779,.261,-.429,-.173,-.523,-.019,-.426)*f1_2+\n        mat4(.195,.802,-.621,.203,-.266,.406,.020,-.050,.109,.370,.238,.285,.557,-.493,-.283,.040)*f1_3+\n        mat4(.280,-.403,.118,-.014,.037,.410,-.385,.277,.241,.520,-.053,.248,-.228,-.679,.162,.541)*f1_4+\n        mat4(-.285,.387,.095,-.062,-.145,.205,.422,-.047,.635,.684,-.314,.196,.294,-.696,.454,-1.002)*f1_5+\n        mat4(-.114,-.569,.238,.278,.289,.399,-.316,.140,.558,-.069,-.633,-.154,.245,.477,.403,-.053)*f1_6+\n        mat4(.093,.122,.565,-.336,-.524,.994,.256,-.195,.195,.036,.060,.670,-.100,.306,.507,-.624)*f1_7+\n        vec4(1.502,-.102,1.739,.664))/1.4+f1_7;\n    float d = dot(f2_0,vec4(.038,.038,-.079,-.057))+\n        dot(f2_1,vec4(-.031,.051,.064,-.045))+\n        dot(f2_2,vec4(-.022,-.045,.060,.053))+\n        dot(f2_3,vec4(-.028,.019,.018,-.049))+\n        dot(f2_4,vec4(-.062,-.043,.032,.021))+\n        dot(f2_5,vec4(-.050,-.055,.049,.021))+\n        dot(f2_6,vec4(.022,.054,-.031,-.042))+\n        dot(f2_7,vec4(.051,-.036,-.060,-.046))+\n        -0.103;\n#else\n    vec4 f0_0=sin(p.y*vec4(1.026,-2.818,2.722,-2.015)+p.z*vec4(1.985,2.198,4.116,-3.089)+p.x*vec4(2.305,-.184,3.339,2.463)+vec4(4.824,1.642,3.488,-6.207));\n    vec4 f0_1=sin(p.y*vec4(2.085,-3.256,3.989,-4.321)+p.z*vec4(1.083,-1.116,.834,1.472)+p.x*vec4(1.097,.431,.002,-1.445)+vec4(-7.593,-5.675,3.609,-2.978));\n    vec4 f0_2=sin(p.y*vec4(-1.512,2.104,2.273,.393)+p.z*vec4(.030,-3.560,-3.902,.731)+p.x*vec4(1.316,2.017,2.993,2.127)+vec4(-1.902,2.607,2.783,-.490));\n    vec4 f0_3=sin(p.y*vec4(.162,-2.536,2.728,2.398)+p.z*vec4(-3.005,-3.234,-3.560,2.654)+p.x*vec4(-1.294,3.243,-3.988,-.656)+vec4(4.229,-6.442,7.018,-5.828));\n    vec4 f1_0=sin(mat4(.616,-.018,-.204,.151,-.099,-.635,.015,-.793,.480,.259,.240,-.168,-.071,.215,-.506,-.184)*f0_0+\n        mat4(.064,-1.173,-.104,-.888,.150,.052,-.679,-.248,-.210,.068,-.192,.268,-.881,-.059,.598,-.022)*f0_1+\n        mat4(-.428,-.407,-.281,-.472,-.329,-.161,-.357,.287,.285,-.011,.237,-.434,.106,.432,-.213,.337)*f0_2+\n        mat4(-.214,.098,.375,.196,-.033,-.213,.526,-.107,.247,-.041,-.026,-.211,.305,.305,.749,.222)*f0_3+\n        vec4(.459,.442,1.555,-1.978))/1.0+f0_0;\n    vec4 f1_1=sin(mat4(-.038,-.015,-.495,.157,.151,-.210,-.086,.274,.382,.288,.502,-.218,.567,-.231,.127,-1.170)*f0_0+\n        mat4(.862,-.545,.178,-.047,.456,-.801,.236,.256,-.023,.358,-.374,.124,.051,-.286,.606,-.488)*f0_1+\n        mat4(-.252,-.881,-.475,.868,-.648,.635,-.147,.039,.310,-.457,.103,.783,.088,.296,-.366,.405)*f0_2+\n        mat4(.216,.305,.590,-.476,.251,.003,-.012,.567,.143,.152,.118,-.105,.225,.482,.325,-.498)*f0_3+\n        vec4(-2.439,1.759,.413,1.178))/1.0+f0_1;\n    vec4 f1_2=sin(mat4(.083,-.238,.418,.866,-.041,.134,-.293,.162,.195,-.172,.479,.279,.030,-.798,-.055,-.385)*f0_0+\n        mat4(-.337,.513,-.348,-.341,-.425,-.392,-.152,-.053,.337,.339,-.236,.446,.520,-.311,.171,.036)*f0_1+\n        mat4(.169,.524,-.446,.185,.435,-.320,.014,-.431,-.110,.057,.114,.104,.151,-.326,-.341,.057)*f0_2+\n        mat4(.258,.520,-.360,-.507,-.565,.777,.771,.207,.266,.175,-.007,.155,.066,-.256,.674,-.278)*f0_3+\n        vec4(.692,-2.006,.605,1.886))/1.0+f0_2;\n    vec4 f1_3=sin(mat4(-.601,.328,-1.203,.443,-.012,.628,-.319,.496,.066,.149,-.024,.185,.697,-.084,-.340,.309)*f0_0+\n        mat4(.444,-.295,.203,-.300,-.599,-.065,.357,.421,-.316,.290,.338,-.974,-.263,.476,-.601,.114)*f0_1+\n        mat4(-.396,.260,-1.048,1.051,-.002,-.618,1.178,.220,.179,.363,-1.779,-.275,-.597,.621,-.148,1.264)*f0_2+\n        mat4(.505,.473,-.267,-.893,-.015,-.089,.292,.108,-.115,.455,.048,-.370,.153,-.052,-.105,-.156)*f0_3+\n        vec4(-.362,-2.135,1.362,2.107))/1.0+f0_3;\n    vec4 f2_0=sin(mat4(-.108,.046,-.876,.200,2.003,-.929,-.812,.061,-.205,-.162,-.062,-.424,-.671,.053,-.027,-1.169)*f1_0+\n        mat4(.401,-.491,-.433,.024,.391,-.602,.027,.141,.084,.231,.164,1.687,-.328,-.392,-.405,-.448)*f1_1+\n        mat4(1.366,.072,.815,-.238,-.353,.059,.081,.289,-.381,-.143,.063,-.482,.331,-.262,-.042,-.536)*f1_2+\n        mat4(.742,.013,-.090,.214,.965,-.328,-.486,.832,.749,-.389,-.380,.463,.142,-.509,.058,.458)*f1_3+\n        vec4(.319,-1.797,-3.946,2.354))/1.4+f1_0;\n    vec4 f2_1=sin(mat4(-.901,.045,.626,.022,-.919,-.736,-.311,-.523,-.043,-.148,-.009,.042,-.210,.139,.402,.049)*f1_0+\n        mat4(-.403,1.005,.366,-.348,-.658,1.176,.076,1.622,.158,.074,-.305,.360,.176,-.165,-.427,.322)*f1_1+\n        mat4(-.368,-.052,.547,-.593,.239,-.710,.058,-.071,-.304,.963,.942,-.396,.959,.642,.588,.158)*f1_2+\n        mat4(.027,.425,-.506,.673,.074,-.433,.305,-.094,-.097,-.140,-.414,.164,-.718,.336,-.072,1.248)*f1_3+\n        vec4(3.302,-.626,2.399,.960))/1.4+f1_1;\n    vec4 f2_2=sin(mat4(.067,-.710,.566,-.350,.474,-1.658,.394,-.228,-.193,-.529,.162,.136,-.248,.514,.461,.200)*f1_0+\n        mat4(.521,-.247,.418,.516,-.259,-.562,-.762,.694,-.466,-.995,-.117,-.104,.218,-.690,-.188,-.066)*f1_1+\n        mat4(-.086,-.711,.870,-.246,-.903,.023,-.924,-.999,.381,1.356,.560,.486,-.266,-.545,.013,.485)*f1_2+\n        mat4(-.555,-1.032,-.846,.147,.632,-.639,.865,-.375,.206,-.524,.470,.167,-.058,.389,-.726,-.333)*f1_3+\n        vec4(.737,1.081,2.460,-1.769))/1.4+f1_2;\n    vec4 f2_3=sin(mat4(.152,-.170,.169,.230,-.444,-1.104,-.129,-.434,-.412,.056,.384,-.214,-.392,.214,1.083,-.908)*f1_0+\n        mat4(.155,-.554,-1.008,1.282,.338,.242,.692,1.308,-.946,.613,-.613,-.233,.346,.860,2.130,-.937)*f1_1+\n        mat4(.029,-.879,-.821,.021,-.339,.004,.055,.335,.599,.089,-.547,.900,.612,-.163,-.296,.752)*f1_2+\n        mat4(.499,-.043,.340,.503,-.017,-.651,-.788,-.276,-.218,-.556,-.330,.034,-.467,.793,1.013,.173)*f1_3+\n        vec4(-.810,-3.040,.184,.585))/1.4+f1_3;\n    vec4 f3_0=sin(mat4(.302,-.619,.520,-.605,.214,.232,-.186,.454,-.676,-.339,-.069,-.085,-.486,-.602,.372,-.331)*f2_0+\n        mat4(.211,-.752,-.692,-.366,-.303,-.612,-.320,-.228,-1.159,-.052,.401,.247,.531,.646,.195,-1.163)*f2_1+\n        mat4(-.668,.193,-.316,.997,.111,-.358,.760,.531,-.562,.260,-.041,-.048,.004,-.248,-.617,.203)*f2_2+\n        mat4(-.943,.378,.159,.378,.786,-.450,-.501,-.590,-.367,-.410,-.656,-.765,.286,.007,-.440,-.555)*f2_3+\n        vec4(-2.357,.938,1.189,-.314))/1.7+f2_0;\n    vec4 f3_1=sin(mat4(-.968,.162,-1.253,1.270,.314,-.026,.246,.121,.136,.430,-.015,-.607,-.104,-.088,-.274,.019)*f2_0+\n        mat4(-.458,.505,.188,.318,.301,.162,-.076,.257,-1.302,.169,-.836,1.470,-.596,-.013,-.261,-.647)*f2_1+\n        mat4(-.305,.344,-.272,.446,-.615,.294,-1.140,1.128,.523,-.677,.353,-1.127,.107,.248,.458,1.042)*f2_2+\n        mat4(.419,.286,.121,-.344,-.690,.129,-.593,.176,.467,-.050,.539,-.254,-.178,-.974,.621,-.574)*f2_3+\n        vec4(-1.771,1.195,.419,1.457))/1.7+f2_1;\n    vec4 f3_2=sin(mat4(-.196,.018,.568,-.655,.013,-.197,.565,.914,.404,.044,-1.165,-.376,.766,-.706,-.128,-.291)*f2_0+\n        mat4(1.325,-1.039,-.815,-1.138,-.174,.074,-.990,-.069,-.086,.533,-.902,-.889,.371,-.644,.623,-.444)*f2_1+\n        mat4(.372,.684,.173,-.727,.254,-.428,-.049,-.924,-.313,.344,.449,.288,.150,-.065,-1.214,-1.119)*f2_2+\n        mat4(-.392,1.185,-.040,.143,.823,-.633,-1.146,-1.212,-.073,-.010,-.326,.492,-.005,.036,-.390,.613)*f2_3+\n        vec4(-.080,2.674,-.934,.651))/1.7+f2_2;\n    vec4 f3_3=sin(mat4(1.316,.176,.887,.394,.340,.618,-1.671,.148,-.470,.053,-.182,-.230,-.273,-.333,-.121,-.675)*f2_0+\n        mat4(-.899,.030,.442,-.344,-.015,.480,.096,.543,.064,1.055,.764,.164,.936,-.616,-.225,.126)*f2_1+\n        mat4(-.853,1.663,2.048,.541,-.280,-.060,.020,.789,.305,.032,1.448,.540,-.808,.123,-.170,.651)*f2_2+\n        mat4(-.544,.315,-.462,.542,.764,-.397,.292,-.199,.298,-.669,-.331,-.787,.623,-.746,-1.273,-.949)*f2_3+\n        vec4(1.684,-.713,1.876,.277))/1.7+f2_3;\n    float d = dot(f3_0,vec4(-.039,-.078,.084,-.086))+\n        dot(f3_1,vec4(-.066,.090,-.092,.029))+\n        dot(f3_2,vec4(.103,-.073,-.042,.095))+\n        dot(f3_3,vec4(.067,.050,.027,.034))+\n        0.033;\n#endif\n    d = opSubtraction(d, d-0.02);\n    d = opIntersection(d, sdBox(p, vec3(0.75)));\n    d = opIntersection(d, opNoisyBox(p+vec3(0.,0.,sin(iTime)+0.5), vec3(1.)));\n    return d;\n}\n\nvec3 norm(vec3 p) {\n    mat3 k = mat3(p,p,p)-mat3(0.001);\n    return normalize(scene(p) - vec3(scene(k[0]),scene(k[1]),scene(k[2])));\n}\n\nvec3 background(in vec3 rd)\n{\n    vec3 col = texture( iChannel0, rd ).xyz;\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-0.5*iResolution.xy)/iResolution.y;\n    vec2 mouse = (iMouse.xy-0.5*iResolution.xy)/iResolution.y;\n\n    vec3 cam = normalize(vec3(1.5,uv));\n    vec3 init = vec3(-3.5,0,0);\n    \n    float yrot = 0.5;\n    float zrot = iTime*.2;\n    if (iMouse.z > 0.) {\n        yrot += -4.*mouse.y;\n        zrot = 4.*mouse.x;\n    }\n    cam = erot(cam, vec3(0,1,0), yrot);\n    init = erot(init, vec3(0,1,0), yrot);\n    cam = erot(cam, vec3(0,0,1), zrot);\n    init = erot(init, vec3(0,0,1), zrot);\n    \n    vec3 p = init;\n    bool hit = false;\n    for (int i = 0; i < 150 && !hit; i++) {\n        float dist = scene(p);\n        hit = dist*dist < 1e-6;\n        p+=dist*cam;\n        if (distance(p,init)>5.) break;\n    }\n    vec3 n = norm(p);\n    vec3 r = reflect(cam,n);\n    vec3 nz = p - erot(p, vec3(1), 1.) + erot(p, vec3(1), 2.);\n    float spec = length(sin(r*3.5+sin(nz*0.7*120.)*.15)*.4+.6)/sqrt(3.);\n    spec *= smoothstep(-.3,.2,scene(p+r*.2));\n    vec3 col = vec3(0.48235294117,0.14705882352,.0)*spec + pow(spec,8.);\n    float bgdot = length(sin(cam*8.)*.4+.6)/2.;\n    cam = erot(cam, vec3(1,0,0), -1.5);\n    vec3 bg = background(cam);\n    //vec3 bg = vec3(.1,.1,.11) * bgdot + pow(bgdot, 10.);\n    fragColor.xyz = hit ? col : bg;\n    fragColor = smoothstep(-.02,1.05,sqrt(fragColor)) * (1.- dot(uv,uv)*.5);\n}","name":"Image","description":"","type":"image"}]}