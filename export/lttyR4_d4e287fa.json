{"ver":"0.1","info":{"id":"lttyR4","date":"1532042483","viewed":81,"name":"Line Shader map","username":"Khorvo","description":"Line shadow","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["shadow"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float thickness = 3.0;\nconst float length = 10.0;\nconst float frequency = 6.0; //the higher number, the further they are apart\nconst float borderAlphaThreshold = 0.1;\nconst vec4 shadowColor = vec4(0.3, 0.3, 0.4, 1.0);\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 pic = texture(iChannel0,uv);\n    bool lineShadow = false;\n    float alphaMod = 0.0;\n    if (pic.a == 0.0) {\n        \n        for (float i = 0.0; i < length; i += 1.0) {\n            vec2 incXincY = vec2(i, i) / iResolution.xy;\n            \n            vec4 upRightOfFrag = texture(iChannel0,uv + incXincY );\n\n            if (\n            \tupRightOfFrag.a > borderAlphaThreshold\n            ) {\n                vec2 foundImgLocation = floor((uv + incXincY) * iResolution.xy);\n                float fragCheck = foundImgLocation.y - foundImgLocation.x;\n                float loc = mod(fragCheck, frequency);\n                \n                if (loc < thickness) {\n                    lineShadow = true;\n                    \n                    float thicknessResult = loc / thickness;\n                    \n                    if (thicknessResult <= 0.33 || thicknessResult >= 0.66) {\n                        //supposed to antialias the lines, but doesnt work on shadertoy\n                     \talphaMod = -0.8;\n                    }\n                }\n            }\n        }\n    }\n    \n    if (lineShadow) {\n     \tfragColor = shadowColor + vec4(0.0,0.0,0.0, alphaMod);\n    } else {\n    \tfragColor = pic; \n    }\n}","name":"Image","description":"","type":"image"}]}