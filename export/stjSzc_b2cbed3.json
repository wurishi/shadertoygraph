{"ver":"0.1","info":{"id":"stjSzc","date":"1628427200","viewed":394,"name":"Pattern 3D process","username":"louis_C","description":"Move the slider to interact with the scheme.\n\nAs past as this website :     https://www.cosamentale.fr/frages-flux-of-generative-researches/ \n\n","likes":20,"published":1,"flags":0,"usePreview":0,"tags":["interactive"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define C(c) U.x-=.5; tt+= char(U,64+c).x\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\nvec4 char(vec2 p, int c) \n{\n    if (p.x<.0|| p.x>1. || p.y<0.|| p.y>1.) return vec4(0,0,0,1e5);\n\treturn textureGrad( iChannel0, p/16. + fract( vec2(c, 15-c/16) / 16. ), dFdx(p/16.),dFdy(p/16.) );\n}\nconst float threshold[16] = float[16](\n    1./16., 9./16., 3./16., 11./16., \n    13./16., 5./16., 15./16., 7./16., \n    4./16., 12./16., 2./16., 10./16.,\n    16./16., 8./16., 14./16., 6./16.);\n\nfloat dit2(int x, int y, float v)\n{\n    return step(threshold[4*y+x],v);\n}\nfloat cross2d( vec2 a, vec2 b ) { return a.x*b.y - a.y*b.x; }\n\nvec2 ca(  vec2 p,  vec2 a,  vec2 b,  vec2 c,  vec2 d ){\nvec2 res = vec2(-1.0,-1.0);\nvec2 e = b-a;\nvec2 f = d-a;\nvec2 g = a-b+c-d;\nvec2 h = p-a;        \nfloat k2 = cross2d( g, f );\nfloat k1 = cross2d( e, f ) + cross2d( h, g );\nfloat k0 = cross2d( h, e );       \nfloat w = k1*k1 - 4.0*k0*k2;\nif( w<0.0 ) return vec2(-1.0,-1.0);\nw = sqrt( w );       \nfloat ik2 = 0.5/k2;\nfloat v = (-k1 - w)*ik2; if( v<0.0 || v>1.0 ) v = (-k1 + w)*ik2;\nfloat u = (h.x - f.x*v)/(e.x + g.x*v);\nif( u<0.0 || u>1.0 || v<0.0 || v>1.0 ) return vec2(-1.0,-1.0);\nres = vec2( u, v );          \nreturn res;}\nfloat smin(float a, float b, float f){float h = clamp(0.5+0.5*(b-a)/f,0.,1.);\nreturn mix(b,a,h)-f*h*(1.-h);}\nfloat smax(float a, float b, float f){float h = clamp(0.5-0.5*(b-a)/f,0.,1.);\nreturn mix(b,a,h)+f*h*(1.-h);}\nmat2 rot(float t){float c = cos(t); float s = sin(t); return mat2(c,-s,s,c);}\nfloat box (vec2 p, vec2 b){ vec2 q = abs(p)-b;\nreturn length(max(q,vec2(0.)))+min(0.,max(q.x,q.y));}\n\nfloat fo (vec2 uv, float t){\nfloat f1 = map(iMouse.x/iResolution.x,0.3,0.7,0.,1.)*0.6;\nfloat e1 = step(0.1,f1);\nfloat e2 = clamp(f1*10.-2.,0.,1.);\nfloat e3 = step(0.3,f1);\nfloat e4 = clamp(f1*10.-3.5,0.,1.);\nfloat e5 = clamp(f1*10.-5.,0.,1.);\nvec3 p = vec3 (uv.x,t,uv.y);\nvec3 p1 = p;vec3 p2 = p;vec3 p3 = p;\np1.xz *= rot(-p.y*0.5*e1);\nvec2 t1 = vec2(0.1,0.2)*1.5;\nvec3 rp = vec3 (t1.x*2.,0.,t1.y*2.);\np1 = mix(p1,mod(p1,rp)-0.5*rp,e2);\np1.xz *= rot(p.y*e1);\nfloat d1 = box(p1.xz,t1);\np2.xz *= rot(-p.y*0.25);\nfloat d2 = box(p2.xz,vec2(1.));\np3.xz *= rot(-p.y*0.5);\nfloat d4 = box(p3.xz,vec2(0.3,0.4));\nfloat d3 = smax(d1,d2,0.7);\nfloat d5 = smin(d3,d4,0.2);\nfloat df = mix(mix(mix(d1,d2,e3),d3,e4),d5,e5);\nreturn df;}\n\nfloat map(vec3 p){\nfloat d1 = fo(vec2(p.x,p.z),p.y*1.8+iTime);\nfloat d2 = max(d1,p.y-1.);\nreturn d2;}\nvec3 nor(vec3 p){ vec2 e =vec2(0.001,0.); return normalize(map(p)-vec3(map(p-e.xyy),map(p-e.yxy),map(p-e.yyx)));}\n\nvoid mainImage( out vec4 O, vec2 uu )\n{\n     vec2 uv = -1. + 2. *uu/iResolution.xy;\n    uv.x *= iResolution.x/iResolution.y;\n    vec2 uv1 = uv*2.8+vec2(3.,1.);float tv1 = 0.1*0.048;float tt1 = 1.07;\n    float f0 = smoothstep(0.,0.002,fo(uv1,iTime));\n    float f1 =max(f0 *step(tv1,distance(uv1.x,tt1))*step(tv1,distance(uv1.y,tt1))*step(tv1,distance(uv1.y,-tt1))*step(tv1,distance(uv1.x,-tt1)),\n    max(max(step(uv1.x,-tt1-tv1),step(uv1.y,-tt1-tv1)),max(step(tt1+tv1,uv1.x),step(tt1+tv1,uv1.y))));\n    float f2 = f1;\n    for(int  i = 0 ; i < 6 ; i++){\n    float br = float (i);\n    float r = br*0.13;\n    float t1 =-0.836;\n    float t2 = -0.423;\n    float tf = 0.9;\n    vec2 uv2 = ca (uv,vec2(t2,t1+r)*tf,vec2(t2+0.2,t1+.2+r)*tf,vec2(t2+0.8,t1+0.2+r)*tf,vec2(t2+0.6,t1+0.001+r)*tf);\n     f2 = mix(smoothstep(0.,0.002,fo((uv2-0.5)*2.5,iTime+br*0.5))*max(step(0.08-0.018,uv2.x)*step(0.01-0.018,uv2.y)*step(uv2.x,0.97+0.018)*step(uv2.y,0.96+0.018),0.),f2,step(uv2.x,0.));\n    }\n    vec2 uv3 = uv+vec2(-1.269,0.192);\n    vec3 r = normalize(vec3(uv3,1.));\n    vec3 p = vec3(0.,-0.8,-5.);\n    float tr = -.8;\n    r.zy *= rot(tr);\n    p.zy *= rot(tr);\n    float dd = 0.;float dm = 14.;\n    for(int  i = 0 ; i < 200 ; i++){\n    if(length(uv3.x)>0.30){break;}\n    if(length(uv3.y)>0.567){break;}\n    float d =map(p);\n    if(dd >dm){dd = dm;break;}\n    if(d<0.001){break;}\n    p += r*d;\n    dd += d;\n    }\n    float s = smoothstep(dm,5.,dd);\n    vec3 n = nor(p);\n    float dao = 5.;float dao2 = 0.1;\n    float ao = pow(clamp(map(p+n*dao)/dao,0.,1.),0.3)*mix(0.25,1.,pow(clamp(map(p+n*dao2)/dao2,0.,1.),0.2))*s;\n     vec2 co = uu/2.;\n     float tm = 4.;\n    int cox = int(mod(co.x,tm));\n    int coy = int(mod(co.y,tm));\n    float r2 = mix(dit2(cox,coy,pow(ao,1.8)),ao,0.5);\n    //float fra = texture(frages,vec2(uv.x+frap.x,1.-uv.y+frap.y)*frap.z).x;\n    //float cod = texture(code,vec2(uv.x+cop.x,1.-uv.y+cop.y)*cop.z).x;\n    float tt = 0.;\n    vec2 ut = uu;\n    ut /= iResolution.y;\n    vec2 position = vec2(.11,0.85);\n    float FontSize = 1.5;\n    vec2 U = ( ut - position)*64.0/FontSize;\n    C(16);C(-15);C(119);C(24);C(26);C(-22);C(-3);C(18);C(15);C(20);C(-24);C(-19);C(16);C(119);\n    C(25);C(-22);C(-16);C(119);C(-11);C(-23);C(-5);\n    U.x += 10.5;\n    U.y += 1.;\n    C(22);C(5);C(3);C(-14);U.x -= 0.25;C(20);C(-15);C(-3);C(22);C(5);C(3);C(-14);C(-24);C(-16);\n    C(119);C(-15);C(-11);C(-20);C(-16);C(119);C(-13);C(-23);C(-5);\n    U.x += 11.25;\n    U.y += 1.;\n    C(22);C(5);C(3);C(-13);U.x -= 0.25;C(18);C(16);C(-3);C(22);C(5);C(3);C(-13);\n    C(-24);C(20);C(-15);C(119);C(24);C(-20);C(-16);C(119);C(-20);C(20);C(-15);C(119);C(25);\n    C(-23);C(-22);C(-14);C(-5);\n    U.x += 14.25;\n    U.y += 1.;\n    C(16);C(-15);C(-3);C(13);C(15);C(4);C(-24);C(16);C(-15);C(-20);C(18);C(16);C(-23);\n    C(-19);C(-16);C(119);C(-11);C(-22);C(18);C(16);C(-5);\n    U.x += 10.5;\n    U.y += 1.;\n    C(6);C(12);C(15);C(1);C(20);U.x -= 0.25;C(4);C(-15);C(-3);C(2);C(15);C(24);C(-24);\n    C(16);C(-15);C(119);C(24);C(26);C(-20);C(20);C(-15);C(-23);C(-5);\n    U.x += 11.25;\n    U.y += 1.;\n    C(16);C(-14);C(119);C(24);C(26);C(-22);C(-3);C(18);C(15);C(20);C(-24);C(-19);C(16);C(119);\n    C(25);C(-22);C(-16);C(119);C(-11);C(-23);C(-5);\n    U.x += 10.5;\n    U.y += 1.;\n    C(6);C(12);C(15);C(1);C(20);U.x -= 0.25;C(4);C(-14);C(-3);C(2);C(15);C(24);C(-24);\n    C(16);C(-14);C(119);C(24);C(26);C(-20);C(22);C(5);C(3);C(-14);\n    C(-24);C(-15);C(119);C(-23);C(-23);C(-5);\n    U.x += 14.25;\n    U.y += 1.;\n    C(6);C(12);C(15);C(1);C(20);U.x -= 0.25;C(4);C(-13);C(-3);C(19);C(13);C(1);C(24);\n    C(-24);C(4);C(-15);C(-20);C(4);C(-14);C(-20);C(-16);C(119);C(-9);C(-23);C(-5);\n    U.x += 12.25;\n    U.y += 1.;\n    C(6);C(12);C(15);C(1);C(20);U.x -= 0.25;C(4);C(-12);C(-3);C(2);C(15);C(24);C(-24);\n    C(16);C(-13);C(119);C(24);C(26);C(-20);C(22);C(5);C(3);C(-14);\n    C(-24);C(-16);C(119);C(-9);C(-20);C(-16);C(119);C(-13);C(-23);C(-23);C(-5);\n    U.x += 16.75;\n    U.y += 1.;\n    C(6);C(12);C(15);C(1);C(20);U.x -= 0.25;C(4);C(-11);C(-3);C(19);C(13);C(9);C(14);\n    C(-24);C(4);C(-13);C(-20);C(4);C(-12);C(-20);C(-16);C(119);C(-14);C(-23);C(-5);\n    \n    float se = map(iMouse.x/iResolution.x,0.2,0.8,0.,1.);\n    float se2 = map(iMouse.x/iResolution.x,0.3,0.7,0.,1.);\n    float fm =se2*0.6;\nfloat e1 = step(fm,0.1);\nfloat e2 = 1.-clamp(fm*10.-2.,0.,1.);\nfloat e3 = step(fm,0.3);\nfloat e4 = 1.-clamp(fm*10.-3.5,0.,1.);\nfloat e5 = 1.-clamp(fm*10.-5.,0.,1.);\nfloat e6 = step(fm,0.35);\n    float rc1 = max(max(max(max(max(1.-tt,\n    max(step(distance(uv.y,0.7),0.05)*e1,step(distance(uv.y,0.629),0.066*e2))),\n    step(distance(uv.y,0.47),0.05)*e3),\n    step(0.51,uv.y)*(1.-e3)*e6),\n    step(distance(uv.y,0.4),0.03)*e4),\n    step(distance(uv.y,0.31),0.06)*e5);\n    float boa = max(step(0.,distance(uv.y,-0.06)),step(0.955,uv.x));\n    float bm = clamp((se-0.5)*2.,-0.6,0.8);\n    float f8 = step(0.,box(uv+vec2(-0.1,-0.375),vec2(0.7,0.003)))*step(0.001,box(uv+vec2(-0.8,-0.375),vec2(0.002,0.03)))*step(0.001,box(uv+vec2(0.6,-0.375),vec2(0.002,0.03)));\n    float f9 = mix(1.-f8,f8,smoothstep(0.025,0.028,distance(uv,vec2(bm,0.375))));\n    \n    O = vec4 (f2*rc1*boa*r2*f9*vec3(0.905882,0.,0.22745),0.);\n   // O = vec4(rc1);\n}\n\n","name":"Image","description":"","type":"image"}]}