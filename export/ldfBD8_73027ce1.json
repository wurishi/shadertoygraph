{"ver":"0.1","info":{"id":"ldfBD8","date":"1495890577","viewed":891,"name":"VideoFeedback","username":"albertelwin","description":"A psychedelic video feedback effect.","likes":21,"published":1,"flags":34,"usePreview":0,"tags":["video","psychedelic","feedback"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat smooth_step(float t) {\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec4 tex = texture(iChannel0, uv);\n    float gray = (tex.r + tex.g + tex.b) * 0.333;\n\n    vec3 color = vec3(1.0);\n\n    float x = gray * 6.0;\n    if(x < 1.0) {\n        float t = smooth_step(x - 0.0);\n        color = vec3(1.0, 0.0, t);\n    }\n    else if(x < 2.0) {\n        float t = smooth_step(x - 1.0);\n        color = vec3(1.0 - t, 0.0, 1.0);\n    }\n    else if(x < 3.0) {\n        float t = smooth_step(x - 2.0);\n        color = vec3(0.0, t, 1.0);\n        \n    }\n    else if(x < 4.0) {\n        float t = smooth_step(x - 3.0);\n        color = vec3(0.0, 1.0, 1.0 - t);\n    }\n    else if(x < 5.0) {\n        float t = smooth_step(x - 4.0);\n        color = vec3(t, 1.0, 0.0);\n    }\n    else {\n        float t = smooth_step(x - 5.0);\n        color = vec3(1.0, 1.0 - t, 0.0);\n    }\n    \n    color = color * 0.75 + 0.25;\n\n    fragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n   \tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    vec4 tex = texture(iChannel0, uv);\n    \n    vec3 color = tex.rgb;\n    if(tex.a < 1.0) {\n        color = texture(iChannel1, uv).rgb;\n    }\n    else {\n        vec2 offset = (tex.xy * 2.0 - 1.0);\n        float d = 20.0;\n        offset.x = cos(offset.x * d);\n        offset.y = sin(offset.y * d);\n        vec2 tex_coord = fract(uv + offset * 0.01);\n        \n       \tcolor = texture(iChannel0, tex_coord).rgb;\n        \n        float gray = (color.r + color.g + color.b) * 0.333;\n        float v = sin(iTime * 2.0 + gray * 20.0) * 0.5 + 0.5;\n        if(v < 0.3) {\n       \t\tcolor = texture(iChannel1, uv).rgb;\n        }\n    }\n    \n    fragColor = vec4(color, 1.0);\n}","name":"Buf A","description":"","type":"buffer"}]}