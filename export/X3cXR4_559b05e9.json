{"ver":"0.1","info":{"id":"X3cXR4","date":"1718654918","viewed":56,"name":"Cell Lab flagellocyteshader code","username":"labyrinth","description":"The shader code for a flagellocyte cell in the mobile game Cell Lab","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["celllab","flagellocyte"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const vec4 bgcol = vec4(217./255., 217./255., 253./255., 1.);\nconst vec4 col = vec4(0.439, 1., 0.086, 1.);\n\nconst float radius = 150.;\nfloat speed = 1.;\n\nconst float scale = 50.*radius;\n\nconst float NR = 0.005*scale;\nconst float EW = 0.002*scale;\n\nconst float END=0.7;\nconst float R=0.1;\nconst float TAIL_R=4.*radius;\n\nvec4 tail(vec2 p){\n    vec4 fragColor = bgcol;\n\n    float d = length(p);\n    if(d < radius-EW*.5) return fragColor;\n\n    // evil trigonometry\n    float ww = (TAIL_R-p.x)*0.1*(d-radius)/radius;\n    float my = sin(-iTime*speed+p.x*4./radius)*ww;\n    float k = 4.*cos(-iTime*speed+p.x*4./radius)*ww;\n    float w = (1.-p.x/(TAIL_R*END))*0.3*(1.+.5*k*k/radius/radius)*radius;\n    if(d-radius < R*radius  &&  1. > (1.-(d-radius)/radius/R)*(1.-(d-radius)/radius/R))\n        w += radius*(R-R*sqrt(1.-(1.-(d-radius)/radius/R)*(1.-(d-radius)/radius/R)));\n\n    if(abs(p.y-my) < w){\n        fragColor = vec4(0.5*col.rgb, 1.);\n    }\n    \n    return fragColor;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    fragColor = bgcol;\n\n    vec2 p = fragCoord-iResolution.xy/2.;\n    float ds = dot(p,p);\n    float angle = atan(p.y, p.x);\n    \n    if(ds > radius*radius && abs(angle) < 1.){\n        fragColor = tail(p);\n        return;\n    }\n    \n    float srr = ds/((radius-EW)*(radius-EW));\n\n    if(ds > radius*radius){\n        fragColor = bgcol;\n        return;\n    }\n\n    if(ds > NR*NR && srr < 1.){\n        // Used the mix function because transparency won't work\n        fragColor = mix(bgcol, col, .5);\n    }else{\n        fragColor = vec4(0.5*col.rgb, 1.);\n    }\n}","name":"Image","description":"","type":"image"}]}