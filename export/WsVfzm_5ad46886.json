{"ver":"0.1","info":{"id":"WsVfzm","date":"1615389304","viewed":91,"name":"Sky_hard_tp","username":"TFoucour","description":"Juste une journ√©e normale","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["skyhard"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdXGzr","filepath":"/media/a/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg","previewfilepath":"/media/ap/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 sunPosition;\nfloat sunPosY;\n\nvec3 computeClouds(vec2 uv) {\n    if (uv.y < 0.5) { // if we are under the half part of the screen return black\n        return vec3(0.0, 0.0, 0.0);\n    }\n    else {\n        // compute ray direction\n        vec3 rd = normalize(vec3(uv*2.-1.,1.));\n        // add two layers of cloud\n        vec3 color = texture(iChannel0, rd.xz*.1/rd.y+iTime*.02).rrr;\n        color += texture(iChannel0, rd.xz*.05/rd.y-iTime*.03).rrr;\n        return color*.5;\n    }\n}\n\n//Element 0 = ciel ; element 1 = mer.\nvec3 sky(vec2 uv){\n    vec3 colorW = vec3(1.,1.,1.);\n    vec3 colorB = vec3(.0, .4, 1.);\n    vec3 colorO = vec3(1., .3, .0);\n    vec3 colorR = vec3(1., .1, .0);\n    \n    vec3 clouds = computeClouds(uv)*.4-.2;\n    vec3 sun = colorO/ (distance(uv, sunPosition)*30.);\n    \n    vec3 sky = mix(colorW, colorB, uv.y);\n    \n    vec3 starColor = smoothstep(0.89, 0.94, texture(iChannel1, uv).rrr);\n    float star = starColor.x;\n    if(star < 0.8){\n    \tstar = 0.;   \n    }\n    \n    star *= (1.-sunPosY);\n    \n    vec3 result = sky + sun + mix(colorO, colorW, sunPosY*2.-1.)*clouds + star;\n    \n    return result;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    sunPosY =  .5 + sin(iTime)*0.5;\n    sunPosition = vec2(1. + cos(iTime)*0.5-0.5, sunPosY);\n    \n    \n    \n    vec3 color;\n    if(uv.y > 0.5){\n        color = sky(uv);\n    }else{\n        vec2 uvInv = uv;\n        float deformation = uv.x + cos(uv.y*60. + iTime*3.)*0.02;\n        uvInv.y = 1.0 - uv.y;\n        uvInv.x = deformation;\n        vec3 mer = sky(uvInv);\n        color = (mer + vec3(0., 0., 0.3)) * 0.7;\n        \n    }\n    \n  \tvec3 col;\n    vec3 blanc = vec3(1.,1.,1.);\n    col = mix(blanc, color, smoothstep(0., 0.15,abs(uv.y*2.-1.))) * sunPosY;\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}