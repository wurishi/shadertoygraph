{"ver":"0.1","info":{"id":"DljBD1","date":"1710662845","viewed":69,"name":"rain test for me","username":"lewdoo","description":"rain test","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["rain"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float rainSpeed = 3.1;\nfloat viewRotX = 1.;\nfloat viewRotY = 1.;\nvec3 mistCol = vec3(.1, .78, .3);\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n                         vec2(12.9898,78.233)))*\n        43758.5453123);\n}\n\nfloat droplet(vec2 uv)\n{\n    uv.y *= 1.;\n    vec2 centre = vec2(0.5, 0.5);\n    return floor(1.03 - distance(uv, centre));\n}\n\nfloat GetRain(vec2 uv, float density){\n    \n    vec2 st = uv * vec2(density, 1.);\n    vec2 ipos = floor(st);\n    float offset = random(ipos); \n    \n    st.y += (iTime + 2.) * (rainSpeed + offset) * viewRotY;\n    vec2 fpos = fract(st);\n    \n    return droplet(fpos) * offset;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    viewRotX += iMouse.x;\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    uv.y *= viewRotY;\n    uv.x += uv.y * 0.4 * sin(viewRotX / iResolution.x * 3.141592 * 2.);\n\n    float rainMask = 0.;\n    \n    float baseDensity = 25.;\n    \n    for(float i = 0.; i < 3.; i++){\n        vec2 offset = vec2(i * 0.3523 + 1., 1.);\n        float inverseO = (2. - offset.x);\n        rainMask += GetRain(uv + offset, baseDensity + inverseO);\n    }\n\n    vec3 col = mistCol * (1. - rainMask) * 0.2 + vec3(rainMask);\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}