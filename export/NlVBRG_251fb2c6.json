{"ver":"0.1","info":{"id":"NlVBRG","date":"1664737045","viewed":103,"name":"Street Lamp Shading","username":"sysrpl","description":"A street light scene","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["light"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/* Load these textures\n\ngShaderToy.SetTexture(0, {mSrc: 'https://cache.getlazarus.org/shaders/light-diffuse.png',\n  mType:'texture', mID:1, mSampler:{ filter: 'linear', wrap: 'repeat',\n  vflip:'true', srgb:'false', internal:'byte' }});\n\ngShaderToy.SetTexture(1, {mSrc: 'https://cache.getlazarus.org/shaders/light-map.png',\n  mType:'texture', mID:1, mSampler:{ filter: 'linear', wrap: 'repeat',\n  vflip:'true', srgb:'false', internal:'byte' }});\n  \n*/\n\n#define width 470.\n#define height 360.\n#define lampx 135.\n#define lampy 250.\n#define full 120.\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv;\n    fragCoord.x = fragCoord.x + mod(iTime, 20.) * 15.;\n    uv.x = fragCoord.x / width;\n    uv.y = fragCoord.y / height;\n    if (fragCoord.y > height) {\n        fragColor = vec4(0.);\n        return;\n    }\n    vec2 bulb = vec2(lampx, lampy);\n    float light1 = distance(bulb, fragCoord) / (full + sin(iTime * 4.) * 20.);\n    light1 = 1. / (light1 * light1);\n    light1 = clamp(light1, 0.0, 1.8);\n    bulb = vec2(lampx + width, lampy);\n    float light2 = distance(bulb, fragCoord) / (full + sin((iTime + 1.2) * 4.) * 20.);\n    light2 = 1. / (light2 * light2);\n    light2 = clamp(light2, 0.0, 1.8);\n    vec4 diffuse = texture(iChannel0, uv);\n    vec4 map = texture(iChannel1, uv);\n    float bright = light1 * map.r + light2 * map.r;\n    if (bright < 0.2)\n        bright = 0.2;\n    \n    fragColor = diffuse * bright;\n}","name":"Image","description":"","type":"image"}]}