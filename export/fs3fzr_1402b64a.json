{"ver":"0.1","info":{"id":"fs3fzr","date":"1655893988","viewed":87,"name":"Wsh - Voronoi dist","username":"Wonshtrum","description":"Voronoi noise, simple cheap distance to edges (works in most cases)","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["voronoi","noise"],"hasliked":0,"parentid":"NdGyDd","parentname":"Wsh - Voronoi noise"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 rand3( vec2 p )\n{\n    vec3 q = vec3( dot(p,vec2(127.1,311.7)), \n\t\t\t\t   dot(p,vec2(269.5,183.3)), \n\t\t\t\t   dot(p,vec2(419.2,371.9)) );\n\treturn fract(sin(q)*43758.5453);\n}\n\nvec4 voronoi( vec2 x )\n{\n    vec2 n = floor(x);\n\tvec2 id;\n\tvec2 id2;\n\n    float md = 10.0;\n    float md2 = 10.0;\n    \n    for( int j=-1; j<=1; j++ )\n    for( int i=-1; i<=1; i++ )\n    {\n        vec2 g = n + vec2(i,j);\n        vec3 rr = rand3(g);\n\t\tvec2 o = g + rr.xy;\n        vec2 r = x - o;\n        float d = dot(r,r);\n        \n        if( d<md )\n        {\n            md2 = md;\n            md = d;\n            id2 = id;\n            id = o;\n        } else if ( d<md2 ) {\n            md2 = d;\n            id2 = o;\n        }\n    }\n    float l = distance(id, id2)*0.5;\n    float d = l-dot(normalize(id-id2), id-x);\n\n    return vec4( id, d, md );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = fragCoord.xy/iResolution.x;\n    p += 0.5*cos( 0.1*iTime + vec2(0.0,1.57) );\n    \n    const float scale = 16.0;\n    vec4 c = voronoi( scale*p );\n    \n    fragColor = vec4( c.zzz, 1.0 );\n}\n","name":"Image","description":"","type":"image"}]}