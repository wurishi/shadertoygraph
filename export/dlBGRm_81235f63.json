{"ver":"0.1","info":{"id":"dlBGRm","date":"1685183707","viewed":54,"name":"Simple RGB light disk","username":"Fuergu","description":"a rgb light disk","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["circle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define S(a,b,t) smoothstep(a,b,t)\nstruct ray \n{\n    vec3 origin,direction;\n}    \n     GetRay(vec2 uv,vec3 camPos, vec3 lookat,float zoom){\n     ray a;\n     a.origin=camPos;\n     vec3 fore=normalize(lookat-camPos);\n     vec3 right=cross(vec3(0,1,0),fore);\n     vec3 up=cross(fore,right);\n     vec3 centre=a.origin+fore*zoom;\n     vec3 i=centre+ uv.x*right+uv.y*up;\n\n     a.direction=normalize(i-a.origin);\n\n     return a;\n    }\n\nvec3 ClosestPoint(ray r,vec3 position)\n{\n    return r.origin+max(0.,dot(position-r.origin,r.direction))*r.direction;\n}\n\nfloat DistRay(ray r, vec3 position)\n{\n    return length(position-ClosestPoint(r,position));\n}\n\nfloat Bokeh(ray r,vec3 position,float size,float blur){\n    float d=DistRay(r,position);\n    \n    float circle= S(size,size*(1.-blur),d);\n    circle*=mix(.6,1.,S(size*.8,size,d));//使得圆中间淡一些\n    return circle;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    uv-=.5;\n    uv.x*=iResolution.x/iResolution.y;\n    \n    vec3 camPos=vec3(0.,0.,0.);\n    vec3 lookat=vec3(0.,0.,1.);\n    \n    ray r= GetRay(uv,camPos,lookat,.2);\n    \n    vec3 position=vec3(0,0,.5);\n    \n    \n    float circle= Bokeh(r,position,.35,.1*iMouse.x/iResolution.x);\n    vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));\n    col*=circle;\n    \n    fragColor = vec4(col,circle);\n}","name":"Image","description":"","type":"image"}]}