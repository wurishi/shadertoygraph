{"ver":"0.1","info":{"id":"WlSyWt","date":"1595618460","viewed":305,"name":"PsyTrance","username":"arminkz","description":"i dont do lsd! i just got bored :D","likes":8,"published":1,"flags":64,"usePreview":0,"tags":["music","psy","trance"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xl2Gzt","filepath":"https://soundcloud.com/monstercat/tristam-braken-flight","previewfilepath":"https://soundcloud.com/monstercat/tristam-braken-flight","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 path(float t) {\n    float a = 1.,b=sin(t*.2);\n    return vec2(a*2., a*b);\n}\n\nfloat getSound(float i) {\n    return texture( iChannel0, vec2( 0.05 + 0.5*i/16.0, 0.25 ) ).x;\n}\n\nmat2 r2d(float a) {\n    float c=cos(a+7.*getSound(3.)+4.*getSound(1.)),s=sin(a+2.*getSound(3.)+4.*getSound(1.));\n    return mat2(c, s, -s, c);\n}\n\nvoid mo(inout vec2 p, vec2 d) {\n    p.x = abs(p.x) - d.x;\n    p.y = abs(p.y) - d.y;\n    if(p.y>p.x)p=p.yx;\n}\n\nfloat g=0.;\nfloat de(vec3 p) {\n   \n    vec3 q = p;\n    q.x += q.z*.1;\n    q.z += iTime*.1;\n    q = mod(q-1., 2.)-1.;\n    float s = length(q) - .001 + sin(iTime*40.)*.005;\n    \n    p.xy -= path(p.z);\n    \n    p.xy *= r2d(p.z*.9);\n    mo(p.xy, vec2(.6, .12));\n    mo(p.xy, vec2(.9, .2));\n    \n    p.xy *= r2d(p.z*.5);\n    \n    mo(p.zy, vec2(.1, .2));\n    p.x = abs(p.x) - .4;\n    float d = length(p.xy) - .02 - (.5+.5*sin(p.z))*.05;\n    \n    d = min(d, s);\n    \n    \n    g+=.01/(.01+d*d);\n    return d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy -.5;\n    uv.x*=iResolution.x/iResolution.y;\n    \n    float dt = iTime * 6. + .5*sin(getSound(10.));\n    vec3 ro = vec3(0,0, -3. + dt);\n    vec3 ta = vec3(0, 0, dt);\n    \n    ro.xy += path(ro.z);\n    ta.xy += path(ta.z);\n    \n    vec3 fwd = normalize(ta -ro);\n    vec3 left = cross(vec3(0,1.0,0),fwd);\n    vec3 up = cross(fwd, left);\n    \n    vec3 rd = normalize(fwd + left*uv.x+up*uv.y);\n\n    vec3 p;\n    float ri,t=0.;\n    for(float i=0.;i<1.;i+=.01) {\n    \tri = i;\n        p=ro+rd*t;\n        float d = de(p);\n        if(d<.001) break;\n        t+=d*.2;\n    }\n\tvec3 bg =  vec3(sin(0.5*dt), cos(dt+getSound(9.)), sin(getSound(6.)))*.3; \n    vec3 col = mix(vec3(.1, sin(dt), cos(dt)), bg,ri);\n    col += g*(.02);\n    \n    col = mix(col, bg, 1.-exp(-.01*t*t));\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}