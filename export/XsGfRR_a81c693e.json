{"ver":"0.1","info":{"id":"XsGfRR","date":"1527337015","viewed":327,"name":"Marbles golfed","username":"akhgary","description":"This is the golfed version of https://www.shadertoy.com/view/XstBzf\n\nNow the 2nd layer coordinates are calculated exactly using law of sines and cosines.\n\nat layer 3 things become really complicated for my primitive brain that i cant even approximate...","likes":15,"published":1,"flags":0,"usePreview":0,"tags":["circle","animation","rotation","golf","circlepacking"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// =================================================================\n// Can you figure out the formula for 3rd layer? \n// this is what i achieved so far\n//\n// https://www.desmos.com/calculator/c2esjlj2qp\n// Thanks to https://www.shadertoy.com/user/FabriceNeyret2\n// I copied golfing pattern from him :p\n\n// =================================================================\n// 298 chars by https://www.shadertoy.com/user/ABizard\n\n#define C(k)  T +P*floor((atan(U.y,U.x)+T-h)/P-(k-.5))+k+h\n\n#define L(r,a) smoothstep( 5./R.y,0.,abs(length(U-.8*sin(r+P)*cos(-C(a)-vec2(0,33)))-.2) )\n\nvoid mainImage(out vec4 O, vec2 u) {\nfloat T = iTime, h = -T, P=1.047;\nvec2 R = iResolution.xy,\n     U = (u+u-R)/R.y;\n     O += L(-P   , )\n         +L(P*1.5, );\n     h = sin(T);\n     O += L(mod(C(P/2.),P),     )\n         +L(mod(C()    ,P), P/2.); }\n         \n// =================================================================\n// 629 chars\n\n//#define PI 3.14159265359\n//#define P3 (PI/3.)\n//#define Rad .2\n\n//#define rt(t) mat2(cos(t),-sin(t),sin(t),cos(t))\n//#define RT(t,b) (rt(t+P3/2.*(b-1.))*U)\n//#define M(a,b) (mod(a-b,2.*b)-b)\n\n////#define f(a,b,t) (a*cos(t)+sqrt(b*b-a*a*sin(t)*sin(t)))\n////#define f2(k) (f(f1,f1,M(B(k)-t1,P3/2.)))\n\n//#define i(U)\tfloor(atan(U.y,U.x)/P3)\n//#define j(k)\t(k+2.*i(RT(t2,k)))\n\n//#define A\t\t(P3*i(RT(t1,0.))+t1)\n//#define B(k)\t(P3*j(k)/2.  \t+t2)\n\n//#define f1 2.*Rad\n//#define f2(k) 2.*f1*cos( M(B(k)-t1,P3/2.) )\n\n//#define D(c, r) smoothstep( 5./R.y,0.,abs(length(U-c)-r) )\n//#define c(r,a) r*vec2(cos(a),sin(a))\n//#define L(r,a) D(c(r,a),Rad)\n\n//#define mainImage(O,u)\t\t\t\t\t\\ \n//float T = iTime, t1 = -T, t2 = sin(T);\t\\ \n//vec2 R = iResolution.xy,\t\t\t\t\\ \n//    U = rt(-T)*((u+u-R)/R.y);\t\t\t\\ \n//\tO += (L(0.,0.)\t\t\t\t\t\t\\ \n//         +L(f1, A)\t\t\t\t\t\t\\ \n//         +L(f2(0.), B(0.))\t\t\t\t\\ \n//         +L(f2(1.), B(1.)))\t\t\t\t\\ ","name":"Image","description":"","type":"image"}]}