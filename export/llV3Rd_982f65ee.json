{"ver":"0.1","info":{"id":"llV3Rd","date":"1476305457","viewed":304,"name":"trippy","username":"kunibert","description":"just a trippy doodle .","likes":11,"published":1,"flags":96,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4s23Rw","filepath":"https://soundcloud.com/rustylaundryroom/testify-xaphoon-jones-remix-radiohead-vs-kanye-west","previewfilepath":"https://soundcloud.com/rustylaundryroom/testify-xaphoon-jones-remix-radiohead-vs-kanye-west","type":"musicstream","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0, fragCoord/iResolution.xy); \n\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\n\n\n#define num_pts 25\n#define PI 3.14159265359\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\nfloat seed =18.;\n\n\nfloat periodic_distance(vec2 a,vec2 b)\n{\n    float ret =min(distance(a,b),distance(a,b+vec2(2,0)));\n\tret = min(ret,distance(a,b+vec2(-2,0)));  \n    ret = min(ret,distance(a,b+vec2(0,2)));  \n    ret = min(ret,distance(a,b+vec2(0,-2)));  \n    ret = min(ret,distance(a,b+vec2(2,-2)));  \n    ret = min(ret,distance(a,b+vec2(-2,-2)));  \n    ret = min(ret,distance(a,b+vec2(2,2)));  \n    ret = min(ret,distance(a,b+vec2(-2,2)));  \n    return ret;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 _uv_ = fragCoord.xy / (min(iResolution.x,iResolution.y));\n    _uv_ = 1.*((_uv_)-vec2(iResolution.x/iResolution.y*.5,.5));\n    //_uv_ = vec2(atan(_uv_.x,_uv_.y)+iTime*0.2334,-iTime+20.0*pow(length(_uv_),0.1));\n    //_uv_=vec2(cos(_uv_.x)*_uv_.y,sin(_uv_.x)*_uv_.y);\n    vec2 uv_= vec2(fract(2./PI*_uv_.x),fract(2./PI*_uv_.y));\n    vec2 uv = 2.*((uv_)-vec2(.5,.5));\n    \n    \n    vec2 p[num_pts];\n    \n    float dist[2];\n    for(float j=0.;j<2.;j++){   \n    dist[int(j)]=0.;\n    \n\t\n    // second texture row is the sound wave\n\t\n   for(int i=0;i<num_pts;i++)\n   {\n       float dir1=2.*(rand(vec2(i,j+seed*87.)))-1.;\n       float dir2=2.*(rand(vec2(i,j+seed*897.)))-1.;\n      \n       p[i]=vec2((rand(vec2(i,j+seed*87.))),(rand(vec2(i,j+seed*457.))));\n       \n       //p[i]=4.*vec2(dir1*0.1*iTime*rand(vec2(i,2.*seed))-0.5,dir2*0.1*iTime*rand(vec2(i,2.*seed+1.))-0.5);\n       vec2 pt_ = vec2(fract(p[i].x+dir1*1.*1. *rand(vec2(i,seed*54567.))*iTime+rand(vec2(i,57457.))),fract(p[i].y+dir2*1.*rand(vec2(i,5437.))*iTime+rand(vec2(i,5747.))));\n       vec2 pt = 2.*(pt_-.5);\n       \n       dist[int(j)]+=exp(-20.*pow(periodic_distance(uv,pt),2.));\n   }\n  \n    }\n    float thresh =smoothstep(0.9,0.91,dist[0]);\n    thresh=thresh*dist[0];\n    float thresh_ =smoothstep(0.96,0.97,dist[1]);\n     thresh_=thresh_*dist[1];\n    float threshmix =smoothstep(0.0,0.1,dist[0]-dist[1]);\n\tfragColor = .05*vec4(thresh_,thresh,0.5+0.5*threshmix,texture( iChannel1,fragCoord/iResolution.x,0.75))+(1.-.05)*texture(iChannel0, fragCoord/iResolution.xy); \n}","name":"Buf A","description":"","type":"buffer"}]}