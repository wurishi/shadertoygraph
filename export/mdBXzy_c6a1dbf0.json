{"ver":"0.1","info":{"id":"mdBXzy","date":"1670450618","viewed":45,"name":"Voronoi Minkowski","username":"OstrichDog","description":"This is a Voronoi tessellation rendered using various distance formulas.\nThrough the animations I hope to give an intuition about how these distances work.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["2d","voronoi","minkowski","tessellation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2[5] points;\nvec3[6] cols;\n\nfloat interval = 5.;\n\nvoid initPoints() {\n    points[0] = vec2(2., 1.);\n    points[1] = vec2(-5., 0.);\n    points[2] = vec2(-3., 3.);\n    points[3] = vec2(-1.5, -4.);\n    points[4] = vec2(5., -3.);\n    cols[0] = vec3(.3, .1, .5);\n    cols[1] = vec3(.3, .4, .4);\n    cols[2] = vec3(.1, .1, .5);\n    cols[3] = vec3(.6, .2, .1);\n    cols[4] = vec3(.2, .9, .8);\n    cols[5] = vec3(.0);\n}\n\nfloat minkowski(vec2 vector) {\n    float p=2.;\n    if (iTime>interval && iTime<=2.*interval) p=1.;\n    if (iTime>2.*interval && iTime<=3.*interval) p=10.;\n    if (iTime>3.*interval) p=iTime-5.*interval;\n    return pow(pow(abs(vector.x), p) + pow(abs(vector.y), p), 1./p);\n}\n\nint closestPoint(vec2 pos) {\n    float maxDist = 100.;\n    if (iTime<=4.*interval) maxDist = mod(iTime, interval);\n    float closestDistance = minkowski(vec2(maxDist));\n    int closestIndex = -1;\n    \n    for (int i=0; i<5; i++) {\n        float newDistance = minkowski(pos-points[i]);\n        if (newDistance < closestDistance) {\n            closestDistance = newDistance;\n            closestIndex = i;\n        }\n    }\n    \n    return closestIndex;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord - 0.5*iResolution.xy)/iResolution.y;\n    uv*=10.;\n\n    initPoints();\n\n    vec3 col = cols[closestPoint(uv)];\n    for (int i=0; i<5; i++)\n        col *= smoothstep(.15, .16, length(uv-points[i]));\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}