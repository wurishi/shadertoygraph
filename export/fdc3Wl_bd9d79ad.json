{"ver":"0.1","info":{"id":"fdc3Wl","date":"1630811155","viewed":82,"name":"Voronoi Crystals","username":"rmccampbell7","description":"Looks pretty cool","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec4 voronoi(vec2 p) {\n    vec2 n = floor(p);\n    vec2 f = fract(p);\n    vec2 d = vec2(1.5);\n    vec2 id;\n    for (int j=-1; j<=1; j++) {\n\t    for (int i=-1; i<=1; i++) {\n            vec2 g = n + vec2(i, j);\n            vec2 r = hash2(g) + vec2(i, j) - f;\n            float d2 = dot(r, r);\n            if (d2 < d.x) {\n                d.y = d.x;\n                d.x = d2;\n                id = g;\n            } else if (d2 < d.y) {\n                d.y = d2;\n            }\n        }\n    }\n    return vec4(sqrt(d), id);\n}\n\n// https://stackoverflow.com/a/17897228/2924383\nvec3 hsv2rgb(vec3 hsv)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(hsv.xxx + K.xyz) * 6.0 - K.www);\n    return hsv.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), hsv.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 v = voronoi(fragCoord * 8. / iResolution.y + iTime*.5);\n    //vec3 c = pow(hash3(v.zw), vec3(.9));\n    vec3 c = hsv2rgb(vec3(hash1(v.zw), 1, 1));\n    float brightness = pow(1.-(sin(tau*(iTime/8.+hash1(v.zw+137.)))+1.)*.48, .4);\n    vec3 col = c * pow((v.y - v.x)*brightness, .8);\n\n    // Output to screen\n    fragColor = vec4(col, 1.0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"const float tau = 6.28318530718;\n\nfloat hash1(vec2 p) {\n    vec3 p3  = fract(vec3(p.xyx) * .1031);\n    p3 += dot(p3, p3.yzx + 33.33);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nvec2 hash2(vec2 p) {\n    vec3 p3 = fract(vec3(p.xyx) * vec3(.1031, .1030, .0973));\n    p3 += dot(p3, p3.yzx+33.33);\n    return fract((p3.xx+p3.yz)*p3.zy);\n}\n\nvec3 hash3(vec2 p) {\n    vec3 p3 = fract(vec3(p.xyx) * vec3(.1031, .1030, .0973));\n    p3 += dot(p3, p3.yxz+33.33);\n    return fract((p3.xxy+p3.yzz)*p3.zyx);\n}\n","name":"Common","description":"","type":"common"}]}