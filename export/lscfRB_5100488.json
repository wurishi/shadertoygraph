{"ver":"0.1","info":{"id":"lscfRB","date":"1525702083","viewed":186,"name":"Sierpinski triangle transitions","username":"akhgary","description":"like before but with 3-7 destination points. move mouse to change radius between 2-4\n\nhttps://www.shadertoy.com/view/XscfRB","likes":8,"published":1,"flags":32,"usePreview":0,"tags":["fractal","triangle","buffer","fbo"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Sierpinski triangle\n// https://en.wikipedia.org/wiki/Sierpinski_triangle\n\n// Numberphile video - Chaos game\n// https://www.youtube.com/watch?v=kbKtFN71Lfs\n\n// random number generator\n// https://stackoverflow.com/a/4275343/4767498\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 color = texelFetch(iChannel1, ivec2(0,1), 0);\n    \n    fragColor = 1.- texelFetch(iChannel0, ivec2(fragCoord), 0)*color;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n    vec3 fb = texelFetch(iChannel0, ivec2(fragCoord), 0).xyz;\n    \n    float points = 0.;\n    \n    for(int i=0; i<int(iResolution.x/4.); i++){\n        vec4 m = texelFetch(iChannel1, ivec2(i,0), 0); // fetch points from first row\n        \n        points += 1.-smoothstep(.0,3./iResolution.y, length(uv-m.xy)-1e-3);\n        points += 1.-smoothstep(.0,3./iResolution.y, length(uv-m.zw)-1e-3);\n    }\n    \n    fragColor = vec4(clamp(fb*.95+points,0.,1.),1.);\n}","name":"Buf A","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"vec3 hue(float n) {\n    return 0.6+0.6*cos(6.3*n+vec3(0,23,21));\n}\n\nfloat rand(vec2 co, float seed){\n    return fract(sin(dot(co.xy*seed,vec2(12.9898,78.233)))*43758.5453);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    \n    float sides = floor(mod(iTime,(maxPoints-3.)*duration)/duration+3.);\n    \n    if(fragCoord.y<1.){\n        vec2 uv = fragCoord/iResolution.xy;\n\n        vec4 p = texelFetch(iChannel0, ivec2(fragCoord), 0); \n\n        float dice1 = rand(uv,iTime);\n        float dice2 = rand(uv,dice1);\n        float th1 = floor(dice1*sides)*tau/sides;\n        float th2 = floor(dice2*sides)*tau/sides;\n\n        vec4 d = vec4(vec2(cos(th1), sin(th1)),\n                      vec2(cos(th2), sin(th2)));\n\n        fragColor = (p+d)/(iMouse.x/iResolution.x*2.+2.);\n    }\n    else if(fragCoord.y<2.){\n        fragColor = vec4(hue((sides-3.)/4.)*2.,0.);\n    }\n}","name":"Buf B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define tau 6.28318\n#define duration 3. \n#define maxPoints 7.","name":"Common","description":"","type":"common"}]}