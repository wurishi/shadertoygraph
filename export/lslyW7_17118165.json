{"ver":"0.1","info":{"id":"lslyW7","date":"1488534499","viewed":134,"name":"rast_rot_test","username":"valeskas","description":"Rotation test","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"int bitmap_w = 32;\nint bitmap_h = 32;\n\nvec3 getBitmapColor(int x, int y)\n{\n    if (x >= 0 && y >= 0 && x < bitmap_w && y < bitmap_h)\n    {\n        if (x < bitmap_w/2 && y < bitmap_h/2)\n            return vec3(1.0/2.0, 0.0, 0.0);\n        else\n            return vec3(0.0, 1.0/2.0, 0.0);        \n    } else\n        return vec3(0.0, 0.0, 1.0);\n    \n}\nint pixelsize = 5;\n#define M_PI 3.1415926535897932384626433832795\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tif (int(fragCoord.x) % pixelsize == 0 || int(fragCoord.y) % pixelsize == 0)\n        fragColor = vec4(0.0, 0.0, 0.0, 1.0);\n   \telse\n    {\n        int x = int(fragCoord.x) / pixelsize;\n        int y = int(fragCoord.y) / pixelsize;\n        {\n          \tint bitmap_x = 20;\n        \tint bitmap_y = 30;\n        \tif (x >= bitmap_x && y >= bitmap_y && x < bitmap_x+bitmap_w && y < bitmap_y+bitmap_h)            \n            {\n\t\t\t\tfragColor = vec4(getBitmapColor(x-bitmap_x, y-bitmap_y), 1.0);\n                return;\n            }\n        }\n        {\n        \tfloat rot = mod(iTime, 2.0*M_PI);        \n        \tmat3 mt1 = mat3(1.0, 0.0, 0.0, 0.0, 1.0, 0.0, bitmap_w/2, bitmap_h/2, 1.0);\n        \tmat3 mt2 = mat3(1.0, 0.0, 0.0, 0.0, 1.0, 0.0, -bitmap_w/2, -bitmap_h/2, 1.0);\n        \tmat3 mr = mat3(cos(rot), -sin(rot), 0.0, sin(rot), cos(rot), 0.0, 0.0, 0.0, 1.0);\n        \tmat3 tm = (mt1*mr*mt2);\n        \tvec3 xy = tm*vec3(x-100, y-30, 1.0);\n        \tint x1 = int(xy.x+0.5);\n        \tint y1 = int(xy.y+0.5);\n        \tif (x1 >= 0 && y1 >= 0 && x1 < bitmap_w && y1 < bitmap_h)\n            {\n        \t\tfragColor = vec4(getBitmapColor(x1, y1), 1.0);\n                return;\n            }\n        }        \n    }\n}","name":"Image","description":"","type":"image"}]}