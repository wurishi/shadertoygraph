{"ver":"0.1","info":{"id":"MlB3Dt","date":"1433529908","viewed":383,"name":"yuv rotation","username":"LukasPukenis","description":"yuv rotation testing","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["rgb","yuv"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"const mat3 rgb2yuv_mat = mat3(\n  0.2126,    0.7152,   0.0722,\n -0.09991,  -0.33609,  0.436,\n  0.615,    -0.55861, -0.05639\n);\n\nconst mat3 yuv2rgb_mat = mat3(\n  1.0,  0.0,      1.28033,\n  1.0, -0.21482, -0.38059,\n  1.0,  2.12798,  0.0\n);\n\nvec3 rgb2yuv(vec3 rgb) {\n  return rgb * rgb2yuv_mat;\n}\n\nvec3 yuv2rgb(vec3 rgb) {\n  return rgb * yuv2rgb_mat;\n}\n\nvec2 cartesian2polar(vec2 uv) {\n    float r = sqrt(pow(uv.x, 2.0) + pow(uv.y, 2.0));\n    float fi = atan(uv.y, uv.x);\n    return vec2(r, fi);\n}\n\nvec2 polar2cartesian(vec2 uv) {  \n  return vec2(uv.x*cos(uv.y), uv.x*sin(uv.y));   \n}\n\nvec2 rotate2(vec2 v, float fi) {\n  return v*mat2(cos(fi), -sin(fi), sin(fi), cos(fi));\n}\n\n// rgb->yuv yuv->polar -> rotate yuv->right\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tvec4 color = texture(iChannel0, uv); \n    \n    vec3 yuv = rgb2yuv(color.rgb);\n    //vec2 polar = cartesian2polar(yuv.yz);\n    //polar.y += iTime*2.0;\n    //vec2 cartesian = polar2cartesian(polar);    \n    //vec3 rgb = yuv2rgb(vec3(yuv.x, cartesian));\n    \n    vec3 rgb = yuv2rgb(vec3(yuv.x, rotate2(yuv.yz, iTime)));\n    color = vec4(rgb, 1.0);\n\tfragColor = color;\n}","name":"","description":"","type":"image"}]}