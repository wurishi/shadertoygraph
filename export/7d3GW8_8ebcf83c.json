{"ver":"0.1","info":{"id":"7d3GW8","date":"1629656522","viewed":288,"name":"Shard Laundry","username":"104","description":"sunday afternoon shader fun","likes":23,"published":1,"flags":0,"usePreview":0,"tags":["simple"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float SceneDurationSeconds = 3.;\nconst float Complexity = 10.;\nconst float ResolutionDivisor = 1.;\n\nvec4 hash42(vec2 p)\n{\n\tvec4 p4 = fract(vec4(p.xyxy) * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}\n\nmat2 rot2D(float r){\n    return mat2(cos(r), sin(r), -sin(r), cos(r));\n}\n\nfloat bayer8x8(vec2 uvScreenSpace) {\n  return texture(iChannel0, uvScreenSpace / (ResolutionDivisor * 8.)).r;\n}\n\n\nvoid mainImage(out vec4 o, vec2 C) {\n  vec2 uv = C / iResolution.xx;\n  //uv += iMouse.xy/iResolution.xy*.1 - .5;\n  uv += 100.; // seed @ 0 is just black because of rng\n  float q = 1.;\n  vec4 h;\n  float sh = 1.0;\n\n  float scene = floor((iTime + 100.) / SceneDurationSeconds);\n  vec4 hscene = hash42(uv - uv + scene);\n  uv.x += scene;\n  float escape = 1. - hscene.x * .12;\n  float Speed = hscene.z * .01;\n\n  for (float i = 0.0; i < Complexity; ++i) {\n    vec2 cell = floor(uv / q) * q;\n    vec2 sq = abs(fract(uv / q));\n    sh *= 1. - pow(max(sq.y, max(max(1. - sq.y, sq.x), 1. - sq.x)), 3.5);\n    h = hash42(cell);\n    if (i > 3. && h.w > escape)\n      break;\n    uv.x += iTime * sin(h.z * 6.28) * Speed * (i + 1.);\n    uv *= rot2D(h.w * 6.28 * hscene.z);\n    uv *= 1.2 +\n          hscene.y *\n              h.y; // scale; there's a small chance of under layer being bigger.\n  }\n  o = h * pow(sh, .25);\n  //o = pow(o, vec4(.6));\n  vec2 uvn = C / iResolution.xy - .5;\n  float v = 1. - dot(uvn, uvn * 1.6);\n  o *= Complexity / 12.; // it's just really dark otherwise\n\n  vec4 rotated = o;\n  rotated.xy *= rot2D(iTime * .4);\n  rotated.yz *= rot2D(iTime * .4 * .618);\n  rotated = abs(rotated);\n  rotated = clamp(rotated, 0., 1.);\n  o = mix(o, rotated, .3);\n  o = abs(o);\n  o = clamp(o, 0., 1.);\n  o = mix(o, o - o + (max(o.x, max(o.y, o.z))), .4);\n\n  o += (bayer8x8(C) - .5) * .15;\n  o = step(o - o + .12, o);\n  o *= v;\n}\n","name":"Image","description":"","type":"image"}]}