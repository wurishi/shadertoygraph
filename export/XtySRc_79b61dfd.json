{"ver":"0.1","info":{"id":"XtySRc","date":"1485182338","viewed":224,"name":"voronoi solid with borders","username":"Darksecond","description":"Solid voronoi colors based on sample point","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 hash2( vec2 p )\n{\n    // procedural white noise\t\n\treturn fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\n}\n\nvec2 voronoi(in vec2 p, in float scale)\n{\n    p = scale*p;\n    vec2 n = floor(p);\n    vec2 f = fract(p);\n    \n    vec2 mg,mr,mo;\n    float md = 8.;\n    \n    for( int j=-1; j<=1; j++ )\n    for( int i=-1; i<=1; i++ )\n    {\n        vec2 g = vec2(float(i),float(j));\n\t\tvec2 o = hash2( n + g );\n        vec2 r = g + o - f;\n        float d = dot(r,r);\n        if(d<md)\n        {\n            mr = r;\n            md = d;\n            mg = g;\n            mo = (n+o+g)/scale;\n        }\n    }\n    \n    md = 8.0;\n    for( int j=-2; j<=2; j++ )\n    for( int i=-2; i<=2; i++ )\n    {\n        vec2 g = mg + vec2(float(i),float(j));\n        vec2 o = hash2( n + g );\n        vec2 r = g + o - f;\n        if( dot(mr-r,mr-r)>0.00001 )\n        {\n        \tmd = min( md, dot( 0.5*(mr+r), normalize(r-mr) ) );\n        }\n    }\n    \n    if(md<0.05)\n        mo = vec2(0., 0.);\n    \n    \n    return mo;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tfragColor = vec4(voronoi(uv, 6.),0.,1.);\n    vec2 vor = voronoi(uv, 32.);\n    if(vor.x == 0. && vor.y == 0.)\n        fragColor = vec4(0., 0., 0., 1.);\n    else\n    \tfragColor = texture(iChannel0, vor);\n}","name":"Image","description":"","type":"image"}]}