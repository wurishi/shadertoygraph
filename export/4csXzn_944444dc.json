{"ver":"0.1","info":{"id":"4csXzn","date":"1704856611","viewed":93,"name":"durs.co CMYK halftone","username":"durs","description":"A shader that emulates CMYK halftone printing​​.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["halftone","cmyk"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define S 4.0\n\n#define ST 0.9\n#define SQ 0.3\n\nvec4 r2c(in vec3 c) { float k = max(max(c.r, c.g), c.b); return min(vec4(c.rgb / k, k), 1.0); }\nvec3 c2r(in vec4 c) { return c.rgb * c.a; }\nvec2 p2u(in vec2 p) { return p / iResolution.xy; }\n\nvec2 g(in vec2 p) { return p - mod(p, S); }\nvec4 s(in vec4 v) { return smoothstep(ST-SQ, ST+SQ, v); }\n\nvec4 ht(in vec2 f, in mat2 m) {\n    vec2 s = (g(m * f) + 0.5 * S) * m;\n    float d = min(length(f - s) / S, 1.0);\n    vec3 t = texture(iChannel0, p2u(s + (0.5 * iResolution.xy))).rgb;\n    t = pow(t, vec3(2.2));\n    return r2c(t) + d;\n}\n\nmat2 ro(in float r) { float c = cos(r), s = sin(r); return mat2(c, -s, s, c); }\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 f = fragCoord.xy - (0.5 * iResolution.xy);\n    \n    mat2 mc = ro(radians(15.0)), mm = ro(radians(75.0)), my = ro(0.0), mk = ro(radians(45.0));\n    \n    float k = ht(f, mk).a;\n    vec3 c = c2r(s(vec4(ht(f, mc).r, ht(f, mm).g, ht(f, my).b, ht(f, mk).a)));\n    \n    c = pow(c, vec3(1.0/2.2));\n    \n    fragColor = vec4(c, 1.0);\n}","name":"Image","description":"","type":"image"}]}