{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"webcam","id":"4sf3zn","filepath":"/presets/webcam.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"texture","id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec3 col = texture(iChannel2, uv).rgb;\n    \n    /////////////////\n    // Color shift //\n    /////////////////\n    float shift = 5.;\n    col = vec3(\n        texture(iChannel2, vec2(fragCoord.x, fragCoord.y)/iResolution.xy).r,\n        texture(iChannel2, vec2(fragCoord.x+shift, fragCoord.y)/iResolution.xy).g,\n        texture(iChannel2, vec2(fragCoord.x+2.*shift, fragCoord.y)/iResolution.xy).b\n    );\n    fragColor = vec4(col,1.0);\n     return;\n\n    \n    //////////\n    // Blur //\n    //////////\n    \n    float blur_side = 2.;\n    \n    vec3 sum_col = vec3(0.);\n    for (float x=fragCoord.x-blur_side; x<fragCoord.x+blur_side; ++x) {\n        for (float y=fragCoord.y-blur_side; y<fragCoord.y+blur_side; ++y) {\n            sum_col += texture(iChannel2, vec2(x,y)/iResolution.xy).rgb;\n        }\n    }\n\tcol = sum_col / (4.*blur_side*blur_side);\n    \n    fragColor = vec4(col,1.0);\n}\n\n\n\n","name":"Image","description":"","type":"image"},{"outputs":[{"channel":0,"id":"4dXGR8"}],"inputs":[{"channel":0,"type":"webcam","id":"4sf3zn","filepath":"/presets/webcam.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"texture","id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"#define pi 3.14159265359\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n\nvec3 rgb2hsv(vec3 c) {\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\n\nvec3 hsv2rgb(vec3 c) {\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\n\nvec3 wave1(vec2 uv, float wave_width, float wave_height, \n           float speed, float shift, vec3 col) {\n    \n    float wave_y = mod(iTime*0.5*speed+shift, 1.);\n    float x, y;\n    if (uv.y > wave_y-wave_width && uv.y < wave_y+wave_width) {\n        x = 0.5 * pi * (uv.y - wave_y) / wave_width;\n        y = pow(cos(x)*wave_height, 2.) / wave_height;\n        col = texture(iChannel0, vec2(uv.x, uv.y+y*wave_width)).rgb;\n    }\n    return col;\n}\n\nvec3 wave2(vec2 uv, float wave_width, float wave_height, \n           float speed, float shift, vec3 col) {\n    \n    float wave_y = mod(iTime*0.5*speed+shift, 1.);\n    float x, y;\n    if (uv.y > wave_y-wave_width && uv.y < wave_y+wave_width) {\n        \n        x = (uv.y - wave_y)/wave_width;\n        y = pow(abs(x)-1., 2.);\n        \n        col = texture(iChannel0, vec2(uv.x+y*wave_height, uv.y)).rgb;\n    }\n    return col;\n}\n\nvec3 wave3(vec2 uv, float wave_width, float wave_height, \n           float speed, float shift, vec3 col) {\n    \n    float wave_y = mod(iTime*0.5*speed+shift, 1.);\n    float x, y;\n    \n    float _speed = 50.;\n    \n    if (uv.y > wave_y-wave_width && uv.y < wave_y+wave_width) {\n        \n        x = pi*(uv.y - wave_y)/wave_width;\n        y = sin(x) * pow(sin(0.5*_speed*iTime)*sin(0.1*_speed*iTime)*sin((1./9.)*_speed*iTime), 2.);\n        col = texture(iChannel0, vec2(uv.x+y*wave_height, uv.y)).rgb;\n    }\n    return col;\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec3 col = texture(iChannel0, uv).rgb;\n    \n    \n    ////////////////\n    // Parameters //\n    ////////////////\n    \n    float speed = 0.7;\n    float wave_width = 0.05;\n    float wave_height = 0.3;\n    \n    float saturation_ratio = 0.55;\n    \n    float noise_ratio = 0.15;\n    \n    float distortion_ratio = 0.4;\n    float distortion_y = 0.08;\n    \n    \n    ///////////\n    // Waves //\n    ///////////\n    col = wave1(uv, wave_width, wave_height, speed, 0., col);\n    col = wave3(uv, wave_width, 0.04, speed, 0.5, col);\n    \n    \n    ////////////////\n    // Saturation //\n    ////////////////\n    vec3 hsv = rgb2hsv(col);\n    hsv = vec3(hsv.r, hsv.g*saturation_ratio, hsv.b);\n    col = hsv2rgb(hsv);\n    \n    \n    /////////////////\n    // Noise No. 1 //\n    /////////////////\n    col += noise_ratio * rand(iTime*uv);\n    \n    \n    ////////////////////\n    // Top distortion //\n    ////////////////////\n    if (uv.y < distortion_y || uv.y > (1.-distortion_y)) {\n        \n        vec2 dist_coord = vec2(uv.x, mod(uv.y+iTime*10., 1.));\n        vec3 dist_col = vec3(texture(iChannel1, dist_coord).r);\n        \n        if (uv.y < distortion_y)\n            distortion_ratio *= abs(uv.y-(distortion_y))/distortion_y;\n        else\n            distortion_ratio *= abs(uv.y-(1.-distortion_y))/distortion_y;\n        \n        col = (1.-distortion_ratio)*col + distortion_ratio*dist_col;\n    }\n    \n    fragColor = vec4(col,1.0);\n    \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","name":"Buffer A","description":"","type":"buffer"}],"flags":{"mFlagVR":false,"mFlagWebcam":true,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":true,"mFlagMusicStream":false},"info":{"id":"WdtcDH","date":"1734268527","viewed":121,"name":"Retro.No.1","username":"avartation","description":"retro","likes":2,"published":1,"flags":34,"usePreview":0,"tags":["retrolook"],"hasliked":0,"parentid":"","parentname":""}}