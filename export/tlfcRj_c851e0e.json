{"ver":"0.1","info":{"id":"tlfcRj","date":"1592467039","viewed":111,"name":"gt_progress","username":"caogtaa","description":"简单的转菊花","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["progress"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.14159265358979323846264338327950288;\n\nconst vec3 colors[3] = vec3[3](\n    vec3(1.0, 0.341, 0.2),\n    vec3(0.517647, 1.0, 0.2),\n    vec3(0.2, 0.8235, 1.));\n\n/*const vec3 colors[3] = vec3[3](\n    vec3(1.0, 0., 0.),\n    vec3(0., 1.0, 0.),\n    vec3(0., 0., 1.));\n*/\n\nfloat Remap01(float a, float b, float t) {\n \treturn (t-a) / (b-a);\n}\n\nfloat Remap(float a, float b, float c, float d, float t) {\n    return Remap01(a, b, t) * (d-c) + c;\n}\n\nfloat Circle(vec2 uv, vec2 o, float r, float blur) {\n    return smoothstep(r, r-blur, distance(uv, o));\n}\n\nfloat Band(float v, float a, float b, float blur) {\n    float mask = smoothstep(a-blur, a, v);\n    mask *= smoothstep(b+blur, b, v);\n    return mask;    \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    uv = uv * 2. - 1.;\n    uv.x *= iResolution.x / iResolution.y;\n\n    float mask = Circle(uv, vec2(0.,0.), 0.5, 0.01);\n    mask -= Circle(uv, vec2(0.,0.), 0.35, 0.01);\n    \n    // 2 seconds per loop\n    float t = iTime * 0.5;\n    \n    float angle = atan(uv.y, uv.x);\n    angle = Remap(-PI, PI, 1.0, .0, angle);\n    \n    // -0.25 to offset angle=0 to top\n    // -t * 0.5 to make entire animation rotate in constant speed\n    angle = fract(angle-0.25 - t * 0.5);\n    \n    // g as fraction part of t for loop control\n    float g = fract(t);\n    float g1 = clamp(g, 0.0, 0.5);\n    float g2 = clamp(g, 0.5, 1.0) - 0.5;\n    float sa = 4.0*g2 - 4.0*g2*g2;\n    float ea = 4.0*g1 - 4.0*g1*g1;\n\n    mask *= Band(angle, sa, ea, 0.01);\n    \n    int id = int(mod(floor(t), 3.0));\n    int nid = (id+1) % 3;\n    \n    vec3 col = mix(colors[id], colors[nid], angle);\n    col *= mask;\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}