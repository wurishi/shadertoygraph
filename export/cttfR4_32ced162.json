{"ver":"0.1","info":{"id":"cttfR4","date":"1701023695","viewed":157,"name":"Does not fit","username":"Elsio","description":"tentando...","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["gears","glass","refract","object","vidro"],"hasliked":0,"parentid":"mtdBRH","parentname":"Tubos Poliedro"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define rot(a) mat2(cos(a + vec4(0, 11, 33, 0)))\n#define cor(a) (cos(a * 6.3 + vec4(0, 23, 21, 0)) * .5 + .5)\n#define S(a) smoothstep(2./R.y, .0, a)\n#define t iTime\n#define torus(q)                                 \\\n    length(vec2(length(q.xy)                     \\\n        - 1. - cos(atan(q.x, q.y) * 9.) * .1,    \\\n        q.z)) - .09\n\n#define mark(a, b)                                                     \\\n    o = mix(                                                           \\\n            o, vec4(0,0,1,0),                                          \\\n            S(abs(length(u - vec2(a, b)) - .014)));               \n\n\nfloat map(vec3 p, float mx, float my) {\n    p.yz *= rot(cos(t * .5) * .9);\n    p.xy *= rot(cos(t * .7) * .8);\n    //p.yz *= rot( .6);\n    \n    vec3 q;\n    float s, j, d;\n    \n    s = torus(p);\n    //s = 1.;\n    \n    while(j++ < 6.){\n        q = p;\n        \n        if(j < 4.){\n            q.xy *= rot((j * 2. + 1.) * 6.28/6. + my * 6.3);\n            q.xz *= rot(1.22 + mx * 6.3);\n        }\n        \n        else{\n            q.xy *= rot((j * 2. + 1.) * 6.28/6.);\n            q.xz *= rot(1.47);\n        }\n        d = torus(q);\n        if(mod(j, 3.) < 2.) d = abs(d);\n        s = min(s, d);\n    }\n    return s;\n}\n\n\nvoid mainImage(out vec4 o, vec2 u) {\n    float d, layers, s, i, b,\n          t = iTime;\n          \n    vec2 R = iResolution.xy, m;\n         //u = vec2(-.0, .2) + .6 * (u.xy - R * .5) / R.y;\n         u = (u.xy - R * .5) / R.y;\n         \n    vec3 rd = normalize(vec3(u, 1. - dot(u, u) * .4)), p;\n    o *= 0.;\n    \n    m = (iMouse.xy - R * .5) / R.y;\n    \n    while(i++ < 24.) {\n        s = map(p, m.x, m.y);\n        \n        d += max(s, 2e-3);\n        \n        p = d * rd;\n        p.z += -2.5; \n        \n        s < .004 \n            ? o += .004 / d * i \n                + cor(i / 20.) / 160.\n            : o;\n    }\n    \n    mark(.036, .0);\n    mark(.17, .0);\n    mark(.17, .1);\n    mark(.536, -.34);\n    \n    o.r += (1. - o.r) * S(length(u - m) - .01);\n}","name":"Image","description":"","type":"image"}]}