{"ver":"0.1","info":{"id":"4ctSDf","date":"1714550590","viewed":101,"name":"Space Tunnel in Space!","username":"steinklo","description":"A tunnel in space from texture!","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["tunnel"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3Rr","filepath":"/media/a/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","previewfilepath":"/media/ap/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.1415927;\nfloat hash(float n) {\n    return fract(sin(n) * 43758.5453123);\n}\nfloat starIntensity(vec2 st) {\n    float intensity = 0.0;\n    float pixelSize = 1920.0; \n    vec2 uv = floor(st * pixelSize) / pixelSize;\n    float seed = hash(uv.x * 4321.0 + uv.y * 6789.0);\n\n    if (seed > 0.998) {\n        intensity = smoothstep(0.0, 1.0, hash(seed));\n    }\n    return intensity;\n}\nconst vec3 tunnelColor = vec3(0.5, 0.7, 1.0);\nconst float velocity = 1.2;\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float vel = iTime * velocity;\n\n    vec2 p = (2.0*fragCoord-iResolution.xy)/iResolution.y;\n    p.x += cos(iTime) * 0.15;\n    p.y += sin(iTime) * 0.15;\n\n    float a = atan(p.y,p.x);\n\n\n    float r = length(p);\n    vec2 uv = vec2( 0.1/r + vel, a/PI - vel * 0.1 ); \n    vec2 starUv = fragCoord/iResolution.xy;\n    float starValue = starIntensity(starUv);\n    vec3 starCol = vec3(starValue * r);\n    vec3 tunnelCol = tunnelColor;\n    \n    float maxRadius = iResolution.x/iResolution.y;\n    vec3 noiceTex = texture(iChannel0, uv).xyz;\n    float noiceValue = smoothstep(0.0, 1.0, (noiceTex.x + noiceTex.y + noiceTex.z)/3.0);\n    tunnelCol = mix(tunnelCol, starCol, smoothstep(maxRadius * 0.6, maxRadius * 1.4, r));\n    tunnelCol += smoothstep(0.7, 1.0, noiceValue);\n    tunnelCol += smoothstep(maxRadius * 0.3, maxRadius * 0.0, r) * 2.0;\n\n\n    vec3 col = mix(starCol, tunnelCol, noiceValue);\n    col += smoothstep(maxRadius * 0.05, maxRadius * 0.02, r) * 0.5;\n\n    fragColor = vec4( col, 1.0 );\n}\n","name":"Image","description":"","type":"image"}]}