{"ver":"0.1","info":{"id":"4csfDB","date":"1724303990","viewed":22,"name":"Mini march p += s * D, 1/exp(d)","username":"Elsio","description":"test","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["fractal","test","raymarch","rotation","estudy"],"hasliked":0,"parentid":"MfXBRj","parentname":"Mini march p += s * D, 1/exp(i)"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define rot(r) mat2(cos(r + vec4(0, 33, 11, 0)))\n#define t  iTime * .5\n\nfloat cyl(vec3 q, float j, float th) {\n    q *= pow(.85, j);\n    float d = max(length(q.zx) - th, abs(q.y) - .5) * .85;\n    return d;\n}\n\nfloat tree(vec3 q){\n    float e, j, s = 1.;\n    \n    while(j++ < 7.)\n        e = cyl(q, j, .1),\n        s = min(s, e),\n        q.xz *= rot(cos(t * j * .8) * 3.14),\n        q.x = abs(q.x) - .3,\n        q.y -= 1., \n        q.xy *= rot(3.14/6.),\n        q *= 1.3;\n     \n    return s;\n}\n\nvoid mainImage(out vec4 o, vec2 u) {\n    vec2 r = iResolution.xy,\n         m = (iMouse.xy - r / 2.) / r.y; \n         u = (u         - r / 2.) / r.y;\n         \n    vec3 p = vec3(0, 1.8, -5), q, \n         D = normalize(vec3(u, 1)); \n        \n    float s = 1., d, i,  \n          steps = 8., \n          ss = step(u.x + smoothstep(-.5, .5, cos(3. * t)) * .4, .2);\n    \n    o *= 0.; \n    while(i++ < steps + 20. * ss) \n        s = tree(p),\n        d += s,\n        p += s * D;\n    \n    \n    o *= 0.;\n    o.rg += 10. / exp(d / 1.3);\n    \n    \n    vec4 O = o;\n    \n    \n    if(false){\n        o = mix(o, vec4(.7, 0, 0, 0), smoothstep(.001, .0, abs(u.x - m.x + .001) - .001));\n        o = mix(o, vec4(.3, 0, 0, 0), smoothstep(.001, .0, abs(u.x - m.x - .001) - .001));\n        o = mix(o, vec4(0, .7, 0, 0), smoothstep(.001, .0, abs(u.y - m.y + .001) - .001));\n        o = mix(o, vec4(0, .3, 0, 0), smoothstep(.001, .0, abs(u.y - m.y - .001) - .001));\n\n        for(i = -10.; i < 11.; i++)\n            o = mix(o, vec4(.6), smoothstep(.001, .0, abs(u.x + i/10. + .001) - .001)),\n            o = mix(o, vec4(.4), smoothstep(.001, .0, abs(u.x + i/10. - .001) - .001)),\n            o = mix(o, vec4(.6), smoothstep(.001, .0, abs(u.y + i/10. + .001) - .001)),\n            o = mix(o, vec4(.4), smoothstep(.001, .0, abs(u.y + i/10. - .001) - .001));\n        \n        o = mix(o, vec4(.7, .7, 0, 0), smoothstep(.002, .0, abs(u.x + .002) - .002));\n        o = mix(o, vec4(.3, .3, 0, 0), smoothstep(.002, .0, abs(u.x - .002) - .002));\n        o = mix(o, vec4(.7, .7, 0, 0), smoothstep(.002, .0, abs(u.y + .002) - .002));\n        o = mix(o, vec4(.3, .3, 0, 0), smoothstep(.002, .0, abs(u.y - .002) - .002));\n    }\n    \n    o = (o + O * 4.) / 5.;\n}","name":"Image","description":"","type":"image"}]}