{"ver":"0.1","info":{"id":"wsyBWW","date":"1607263203","viewed":70,"name":"Iso-surface of a 2D function","username":"Atchafalaya","description":"Applying iq's excellent article about computing the distance to the iso-surface of a 2D function https://iquilezles.org/articles/distance/distance.htm","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["sdf","function"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define R iResolution.xy\n\nconst float radius = 0.1;\nconst float amp = 0.02;\nconst int nbLobes = 5;\n\nfloat f1(vec2 uv){\n    uv = fract(uv + 0.5) - 0.5;\n    float r = length(uv);\n    float a = atan(uv.x, uv.y) + 2. * iTime;\n    return r - radius + amp * cos(float(nbLobes) * a);\n}\n\nvec2 df1(vec2 uv){\n\tuv = fract(uv + 0.5) - 0.5;\n    float r = length(uv);\n    float a = atan(uv.x, uv.y) + iTime;\n    float datan = (1. / (1. + pow(uv.x / uv.y, 2.)));\n    vec2 da = vec2(1. / uv.y,\n                   - uv.x / (uv.y * uv.y)) * datan;\n    return uv / r\n        - amp * float(nbLobes) * da * sin(float(nbLobes) * a);\n}\n\nfloat f2(vec2 uv){\n    float a = 5.;\n    uv *= a;\n    return length(vec2(cos(uv.x), sin(uv.y))) - 2. * abs(sin(iTime));\n}\n\nvec2 df2(vec2 uv){\n    float a = 5.;\n    return vec2(- a * sin(a * uv.x) * cos(a * uv.x), a * sin(a * uv.y) * cos(a * uv.y)) / f2(uv);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2. * fragCoord - R) / R.y;\n\n    float de1 = abs(f1(uv)) / length(df1(uv));\n    float de2 = abs(f2(uv)) / length(df2(uv));\n    \n    float de = mix(de2, de1, smoothstep(-1., 1., pow(cos(0.5 * iTime), 3.)));\n    \n    vec3 col = vec3(smoothstep(0.005, 0.01, de));\n    col = mix(col, vec3(0.8, 0.3, 0.5), smoothstep(0., 0.1, de));\n    col = mix(col, vec3(0.2, 0.8, 0.5), smoothstep(0.1, 0.2, de));\n    col = mix(col, vec3(0.3, 0.2, 0.9), smoothstep(0.2, 0.4, de));\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}