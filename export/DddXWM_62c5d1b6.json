{"ver":"0.1","info":{"id":"DddXWM","date":"1680609329","viewed":90,"name":"VJ sync - Truchet - Pattern 2_1","username":"foxzasoby","description":"Truchet pattern synchronized with folk music.\nOptions:\n- uv moves smoothly with time\n- one color scheme\n- one stitch kind\n- tiles flipping\n- \"walking pixel\" - tile version dependent on music intensity\n- three layers\n- ladybug turned off","likes":8,"published":1,"flags":64,"usePreview":0,"tags":["truchet","vj","musicsynchronization"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"lsc3Rr","filepath":"https://soundcloud.com/warsaw-village-band/01-wvbmp-fly-my-voice?in=pawe-py/sets/polish-folk&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing#t=0%3A36","previewfilepath":"https://soundcloud.com/warsaw-village-band/01-wvbmp-fly-my-voice?in=pawe-py/sets/polish-folk&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing#t=0%3A36","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// a.lis - truchet pattern, ver 2_1\n\nconst vec4 L1[14]=vec4[14](\n    vec4(229./255.,   189./255.,   178./255.,   1.0),\n    vec4(209./255.,  51./255.,  64./255.,  1.0),\n    vec4(56./255.,  34./255.,  48./255.,  1.0),\n    vec4(102./255., 102./255., 102./255., 1.0),\n    vec4(153./255., 153./255., 153./255., 1.0),\n    vec4(230./255., 230./255., 230./255., 1.0),\n    vec4(255./255., 255./255., 255./255., 1.0),\n    vec4(128./255., 128./255., 0./255.,   1.0),\n    vec4(255./255., 255./255., 0./255.,   1.0),\n    vec4(0./255.,   255./255., 0./255.,   1.0),\n    vec4(0./255.,   128./255., 0./255.,   1.0),\n    vec4(0./255.,   77./255.,  0./255.,   1.0),\n    vec4(0./255.,   51./255.,  0./255.,   1.0),\n    vec4(0./255.,   128./255., 128./255., 1.0)\n\n); \n\nconst vec4 L2[14]=vec4[14](\n    vec4(0./255.,   0./255.,   0./255.,     1.0),\n    vec4(25./255.,  25./255.,  25./255.,    1.0),\n    vec4(102./255., 102./255., 102./255.,   1.0),\n    vec4(153./255., 153./255., 153./255.,   1.0),\n    vec4(204./255., 204./255., 204./255.,   1.0),\n    vec4(229./255., 229./255., 229./255.,   1.0),\n    vec4(255./255., 255./255., 255./255.,   1.0),\n\n    \n    vec4(127./255., 127./255., 255./255.,   1.0),\n    vec4(0./255.,   0./255.,   255./255.,   1.0),\n    \n    vec4(102./255.,   0./255.,   0./255.,   1.0),\n    vec4(102./255.,   127./255., 255./255., 1.0),\n    vec4(102./255.,   178./255., 255./255., 1.0),\n    vec4(102./255.,   204./255., 255./255., 1.0),\n    vec4(102./255.,   127./255., 127./255., 1.0)\n\n); \n\nconst vec4 L3[14]=vec4[14](\n    vec4(0./255., 0./255., 0./255., 1.0),\n    vec4(51./255., 51./255., 51./255., 1.0),\n    vec4(255./255., 255./255., 255./255., 1.0),\n    \n    vec4(255./255., 0./255., 0./255., 1.0),\n    vec4(192./255.,  0./255.,   0./255., 1.0),\n    vec4(128./255.,  0./255.,  0./255.,  1.0),\n    vec4(0./255.,   0./255.,   0./255.,     1.0),\n    vec4(0./255.,   0./255.,   0./255.,     1.0),\n    vec4(0./255.,   0./255.,   0./255.,     1.0),\n    vec4(0./255.,   0./255.,   0./255.,     1.0),\n    vec4(0./255.,   0./255.,   0./255.,     1.0),\n    vec4(0./255.,   0./255.,   0./255.,     1.0),\n    vec4(0./255.,   0./255.,   0./255.,     1.0),\n    vec4(0./255.,   0./255.,   0./255.,     1.0)\n); \n\nconst int bug_0[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x0000, 0x00000000, 0x00000000, 0x0000, 0x00000000, 0x00000000, 0x0000, 0x00000001, 0x01100000, 0x0000, 0x00000000, 0x33440100, 0x0000, 0x00000005, 0x33444000, 0x0000, 0x00000003, 0x33433000, 0x0000, 0x00000004, 0x23423000, 0x00000000, 0x00000004, 0x43444000, 0x00000000, 0x00000003, 0x33433000, 0x00000000, 0x00000003, 0x23424000, 0x00000000, 0x00000004, 0x43433000, 0x00000000, 0x00000000, 0x44340000, 0x00000000, 0x00000001, 0x00010000, 0x00000000, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int bug_1[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x0000, 0x00000000, 0x00000000, 0x0000, 0x00000000, 0x00000000, 0x0000, 0x00000000, 0x00000000, 0x0000, 0x00000001, 0x01100100, 0x0000, 0x00000001, 0x31341000, 0x0000, 0x00000003, 0x33433000, 0x0000, 0x00000004, 0x23423000, 0x00000000, 0x00000004, 0x43444000, 0x00000000, 0x00000003, 0x33433000, 0x00000000, 0x00000003, 0x23424000, 0x00000000, 0x00000004, 0x43433000, 0x00000000, 0x00000000, 0x44340000, 0x00000000, 0x00000000, 0x10100000, 0x00000000, 0x00000001, 0x00100000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\n\nconst int tile1_0[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int tile1_1[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000111, 0x10011110, 0x00000000, 0x00000111, 0x10011110, 0x00000000, 0x00000111, 0x11111110, 0x00000000, 0x00111001, 0x11111001, 0x11000000, 0x00111001, 0x11111001, 0x11000000, 0x00111111, 0x11111111, 0x11000000, 0x00111111, 0x11111111, 0x11000000, 0x00000111, 0x10011110, 0x00000000, 0x00000111, 0x10011110, 0x00000000, 0x00111111, 0x11111111, 0x11000000, 0x00111111, 0x11111111, 0x11000000, 0x00111001, 0x11111001, 0x11000000, 0x00111001, 0x11111001, 0x11000000, 0x00000111, 0x11111110, 0x00000000, 0x00000111, 0x10011110, 0x00000000, 0x00000111, 0x10011110, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int tile1_2[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000110, 0x00000110, 0x00000000, 0x00000110, 0x00000110, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000110, 0x00000110, 0x00000000, 0x00000110, 0x00000110, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int tile1_3[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x11111000, 0x00000000, 0x00000001, 0x11111000, 0x00000000, 0x00000001, 0x11111000, 0x00000000, 0x00111111, 0x11111111, 0x11000000, 0x00111111, 0x11111111, 0x11000000, 0x00000111, 0x10011110, 0x00000000, 0x00000111, 0x10011110, 0x00000000, 0x00111111, 0x11111111, 0x11000000, 0x00111111, 0x11111111, 0x11000000, 0x00000001, 0x11111000, 0x00000000, 0x00000001, 0x11111000, 0x00000000, 0x00000001, 0x11111000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int tile1_4[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00000111, 0x10011110, 0x00000000, 0x00000111, 0x10011110, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\n\nconst int tile2_0[60] = tile1_0;\nconst int tile2_1[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000222, 0x20022220, 0x00000000, 0x00000222, 0x20022220, 0x00000000, 0x00022002, 0x22222002, 0x20000000, 0x00022002, 0x22222002, 0x20000000, 0x00022222, 0x20022222, 0x20000000, 0x00022222, 0x20022222, 0x20000000, 0x02200220, 0x00000220, 0x02200000, 0x02200220, 0x00000220, 0x02200000, 0x00022222, 0x20022222, 0x20000000, 0x00022222, 0x20022222, 0x20000000, 0x00022002, 0x22222002, 0x20000000, 0x00022002, 0x22222002, 0x20000000, 0x00000222, 0x20022220, 0x00000000, 0x00000222, 0x20022220, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int tile2_2[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000220, 0x00000220, 0x00000000, 0x00000220, 0x00000220, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00022002, 0x22222002, 0x20000000, 0x00022002, 0x22222002, 0x20000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000220, 0x00000220, 0x00000000, 0x00000220, 0x00000220, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int tile2_3[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000002, 0x20022000, 0x00000000, 0x00000002, 0x20022000, 0x00000000, 0x00000002, 0x22222000, 0x00000000, 0x00000002, 0x22222000, 0x00000000, 0x00022222, 0x20022222, 0x20000000, 0x00022222, 0x20022222, 0x20000000, 0x02200220, 0x00000220, 0x02200000, 0x02200220, 0x00000220, 0x02200000, 0x00022222, 0x20022222, 0x20000000, 0x00022222, 0x20022222, 0x20000000, 0x00000002, 0x22222000, 0x00000000, 0x00000002, 0x22222000, 0x00000000, 0x00000002, 0x20022000, 0x00000000, 0x00000002, 0x20022000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int tile2_4[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x02200220, 0x00000220, 0x02200000, 0x02200220, 0x00000220, 0x02200000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x02200000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\n\nconst int tile3_0[60] = tile1_0;\nconst int tile3_1[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00111101, 0x10011011, 0x11000000, 0x00000001, 0x10011000, 0x00000000, 0x00111111, 0x10011111, 0x11000000, 0x00111111, 0x10011111, 0x11000000, 0x11000000, 0x01100000, 0x00110000, 0x11000000, 0x01100000, 0x00110000, 0x00111111, 0x10011111, 0x11000000, 0x00111111, 0x10011111, 0x11000000, 0x00000001, 0x10011000, 0x00000000, 0x00111101, 0x10011011, 0x11000000, 0x00000101, 0x10011010, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int tile3_2[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000010, 0x01100100, 0x00000000, 0x00000010, 0x01100100, 0x00000000, 0x00000010, 0x01100100, 0x00000000, 0x00000010, 0x01100100, 0x00000000, 0x00000010, 0x01100100, 0x00000000, 0x00111110, 0x01100111, 0x11000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00111111, 0x10011111, 0x11000000, 0x00111111, 0x10011111, 0x11000000, 0x00000000, 0x01100000, 0x00000000, 0x00000000, 0x01100000, 0x00000000, 0x00111110, 0x01100111, 0x11000000, 0x00000010, 0x01100100, 0x00000000, 0x00000010, 0x01100100, 0x00000000, 0x00000010, 0x01100100, 0x00000000, 0x00000010, 0x01100100, 0x00000000, 0x00000010, 0x01100100, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int tile3_3[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00111111, 0x10011111, 0x11000000, 0x00111111, 0x10011111, 0x11000000, 0x11000000, 0x01100000, 0x00110000, 0x11000000, 0x01100000, 0x00110000, 0x00111111, 0x10011111, 0x11000000, 0x00111111, 0x10011111, 0x11000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000001, 0x10011000, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\nconst int tile3_4[60] = int[60](0x00000000, 0x00000000, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00110000, 0x00000000, 0x11000000, 0x00000000, 0x00000000, 0x00000000, 0x00110000, 0x00000000, 0x11000000, 0x00110000, 0x00000000, 0x11000000, 0x11000000, 0x01100000, 0x00110000, 0x11000000, 0x01100000, 0x00110000, 0x00110000, 0x00000000, 0x11000000, 0x00110000, 0x00000000, 0x11000000, 0x00000000, 0x00000000, 0x00000000, 0x00110000, 0x00000000, 0x11000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00000101, 0x10011010, 0x00000000, 0x00000000, 0x00000000, 0x00000000);\n\nstruct setup\n{\n float t;\n vec3 eye;\n vec3 dir;\n vec4 sfft;\n};\n\nfloat Hash21(vec2 p) {\n    p = fract(p*vec2(234.34, 435.345));\n    p += dot(p, p+34.23);\n    return fract(p.x*p.y);\n}\n\n\nvec3 getColor(vec4 L[14], int tab[60], int x, int y) {\n    int element = (tab[ y * 3 + (x >> 3) ] >> ((~x & 7) << 2 )  ) & 0xf;\n    vec4 color = L[element];\n    return color.xyz;\n}\n\nint getStitch(float t){\n    float time = t - floor(t/15.)*15.;\n    return int(floor(t/5.))%3; \n}\n\nvec4 getBackground(float tile_num, setup s)\n{\n    vec3 col;\n    float SRadius_1 =1.52;\n    \n    //od Tomka\n    float proj = dot(-s.eye,s.dir);\n    vec3 srd = s.eye+s.dir*proj;//+vec3(5., 0., -10.);\n    proj = length(srd);\n    proj = sqrt(SRadius_1*SRadius_1-proj*proj);\n    srd += s.dir*(-proj-0.1*tile_num);\n    vec3 np = normalize(srd);\n    vec2 sph = acos(np.xy)/3.14159;\n\n    // MIR\n    vec4 musicIntensity = s.sfft; // 0-1\n    \n    // GRID\n    vec2 uv = sph; \n    //uv *= 30. * sin(iTime*0.1 + 20.) - cos(iTime*0.05) + log(iTime*0.02); //*** EFFECT - CHANGING SCALE\n    uv *= 12.; // constant scale \n    uv += iTime*0.2; // *** EFFECT - MOVES WITH TIME\n    //uv += (musicIntensity.x*0.2) + iTime * 0.3; // *** EFFECT - MOVES WITH MUSIC\n    vec2 gv = fract(uv)-.5; // origin in the middle and -.5 to .5 in each direction\n    vec2 id = floor(uv);\n    \n    const int W = 20; // col width\n    vec2 hv = fract(gv*float(W))-.5;\n    vec2 hv_id = floor(vec2(-gv.x, gv.y)*20. + 10.);\n   \n    //col +=n; //*** show noise value\n    if (gv.x>.48 || gv.y>.48) col = vec3(1, 0, 0); // ***show grid\n    if ((gv.x>0.0 && gv.x<.01)|| (gv.y>0.01 && gv.y<.02)) col = vec3(1, 0, 0); // ***show grid\n    //if (hv.x>.4 || hv.y>.4) col = vec3(0, 0, 1);   // ***show grid\n\n    \n    // NOISE\n    float n1 = Hash21(id); // random number between 0 and 1 for flipping x\n    float n2 = Hash21(Hash21(id)+id); // for flipping y\n    float n3 = Hash21(Hash21(1./id)+id/3.); // for choosing tile\n\n    //n1 = 1.;\n    //n2 = 1.;\n    if (n1<.5) gv.x *= -1.; // random flipping\n    if (n2<.5) gv.y *= -1.; // random flipping\n\n    \n   // STICH VERSIONS:\n    float stitch[3];\n    bool changeCondition = false;\n    float m;\n    \n    // --- circle\n    if (hv.x*hv.x + hv.y*hv.y <.2) stitch[0] = 1.;\n    \n    // --- cross stitch\n    float d = 0.08; // width\n    if ((hv.x+0.)*(hv.x+0.) + (hv.y+0.5)*(hv.y+0.5) >d) stitch[1] = 1.;\n    if ((hv.x+0.)*(hv.x+0.) + (hv.y-0.5)*(hv.y-0.5) <d) stitch[1] -= 1.;\n    if ((hv.x+0.5)*(hv.x+0.5) + (hv.y+0.)*(hv.y+0.) <d) stitch[1] -= 1.;\n    if ((hv.x-0.5)*(hv.x-0.5) + (hv.y+0.)*(hv.y+0.) <d) stitch[1] -= 1.;\n    \n    // --- glow\n    stitch[2] = 1. - abs(hv.x * hv.y);\n    \n    //------ EFFECT - CHANGING STITCHES AND COLOR SCHEME ----\n    //bool changeCondition = (mod(floor(iTime)/2., 2.0) < 0.1);\n    //bool changeCondition = musicIntensity.x > 0.9;\n\n    //if (changeCondition) m = stitch[0];\n    //else m = stitch[1];\n    \n    m = stitch[getStitch(iTime)];\n    \n    // COLOR SCHEME\n    vec4 L[14];\n    if (changeCondition) L = L2;\n    else L = L1;\n    // ------------------------------------------------------\n    \n    \n    // TILE 1\n    if (n3*musicIntensity.x < 0.4 && tile_num == 1.) {\n    //if (n3 < 0.4) {\n        //float md = mod(floor(iTime), 1.0*musicIntensity.x);\n        //if (md< 0.1) col+=L[tile2[index]].xyz * m;\n    \n        if (musicIntensity.x < .1) col += getColor(L, tile1_4, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.x < .3) col += getColor(L, tile1_3, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.x < .4) col += getColor(L, tile1_1, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.x < .6) col += getColor(L, tile1_2, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.x < .8) col += getColor(L, tile1_3, int(hv_id.x), int(hv_id.y)) *m;\n        else col += getColor(L, tile1_4, int(hv_id.x), int(hv_id.y)) *m;\n    }\n   \n        \n    // TILE 2\n\n    else if (n3*musicIntensity.x> 0.4 && n3*musicIntensity.x < 0.8 && tile_num == 2.) {\n    //else if (n3 < 0.8) {\n    \n        if (musicIntensity.y < .1) col += getColor(L, tile2_4, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.y < .3) col += getColor(L, tile2_3, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.y < .4) col += getColor(L, tile2_1, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.y < .6) col += getColor(L, tile2_2, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.y < .8) col += getColor(L, tile2_3, int(hv_id.x), int(hv_id.y)) *m;\n        else col += getColor(L, tile2_4, int(hv_id.x), int(hv_id.y)) *m;\n\n    }\n        \n    \n    // TILE 3\n    else if (n3*musicIntensity.x > 0.8 && tile_num == 1.) {\n\n        if (musicIntensity.z < .1) col += getColor(L, tile3_4, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.z < .3) col += getColor(L, tile3_3, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.z < .4) col += getColor(L, tile3_1, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.z < .6) col += getColor(L, tile3_2, int(hv_id.x), int(hv_id.y)) *m;\n        else if (musicIntensity.z < .8) col += getColor(L, tile3_1, int(hv_id.x), int(hv_id.y)) *m;\n        else col += getColor(L, tile1_3, int(hv_id.x), int(hv_id.y)) *m;\n\n    }\n     \n   \n   //------ EFFECT - ADD LADYBUG ---------------------------\n   //int tile[60] = bug_0;\n   //if (mod(floor(iTime), 2.)<0.1) tile = bug_1;\n   //if ((mod(id.x, 4.)<0.1) && (mod(id.y, 3.)<0.1)) col = getColor(L3, tile, int(hv_id.x), int(hv_id.y)) *m; //*** add here a bug \n   // ------------------------------------------------------ \n   if (col.x > 0.8 && col.y >.77 && col.z > .45) col = vec3(0.2);\n   return vec4(col, 1);\n}\n\n\n\n\n#define STEREO true\n\n#define EYESPAN -0.2f\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n\n{\n\n// -=-=-=-=-=-=-=-=-=-=- SETUP renderera\n\n#ifdef STEREO\nvec3 eye =vec3(0,0,0);\nvec3 dir = vec3(0,0,0);\n\nvec2 mouse = vec2(iMouse)/vec2(iResolution);\nfloat eyes_app = EYESPAN * mouse.x;\n\n\nif (fragCoord.x <0.5*iResolution.x)\n{\neye = vec3(eyes_app,0.0f,-5.0f);\ndir = vec3(eyes_app + ( 2.0*(2.0*fragCoord.x-0.5*iResolution.x)/iResolution.y   ) ,fragCoord.y/iResolution.y*2.0-1.0 ,0.0  )*0.75f;\n}\n\nelse\n{\n eye = vec3(-eyes_app,0.0f,-5.0f);\n dir = vec3(-eyes_app + ( 2.0*(2.0*(fragCoord.x-0.5*iResolution.x)-0.5*iResolution.x)/iResolution.y   ) ,fragCoord.y/iResolution.y*2.0-1.0 ,0.0  )*0.75f;\n}\n\n#else\nvec3 eye = vec3(0.0f,0.0f,-5.0f);\nvec3 dir = vec3(vec2(2.0*(fragCoord-0.5*iResolution.xy)/iResolution.yy),0.0f)*0.75f;\n\n#endif\ndir = normalize(dir -eye);\nsetup wsad = setup(iTime,eye,dir,\n                   vec4(texelFetch(iChannel0, ivec2(1, 0), 0).r,texelFetch(iChannel0, ivec2(5, 0), 0).r,texelFetch(iChannel0, ivec2(10, 0), 0).r,texelFetch(iChannel0, ivec2(15, 0), 0).r     )\n                  );\n\n// ---- SECOND LAYER ----------------------\nvec3 eye2 = vec3(0.0f, 0.0f, -3.0f);\nvec3 dir2 = vec3(vec2(2.0*(fragCoord-0.5*iResolution.xy)/iResolution.xx),0.0f)*1.;\ndir = normalize(dir -eye2);\nsetup wsad2 = setup(iTime,eye,dir, \n                    vec4(texelFetch(iChannel0, ivec2(1, 0), 0).r,texelFetch(iChannel0, ivec2(5, 0), 0).r,\n                    texelFetch(iChannel0, ivec2(10, 0), 0).r,texelFetch(iChannel0, ivec2(15, 0), 0).r));\n// ----------------------------------------\n// =-=-=-=-=-=-=-=-=-=-\n\n    // Output to screen\n    fragColor = getBackground(1.,wsad);\n    fragColor += getBackground(2.,wsad);\n    fragColor += getBackground(3.,wsad);\n    //fragColor += getBackground(wsad2); // *** second layer\n    \n    \n}","name":"Image","description":"","type":"image"}]}