{"ver":"0.1","info":{"id":"MlsXWr","date":"1436095409","viewed":190,"name":"rotateplane","username":"gyabo","description":"rotate plane.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["raycast"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"#define REP 512\nvec2 rot(vec2 p, float a) {\n\treturn vec2(\n\t\tp.x * cos(a) - p.y * sin(a),\n\t\tp.x * sin(a) + p.y * cos(a));\n}\n\n\nfloat map(vec3 p) {\n\tfloat a = floor(p.z * 1.7);\n\treturn 10.0 + dot((p), vec3(cos(a),sin(a),0)); //thx!\n}\n\n\nvec3 normal( vec3 p ) {\n\tconst vec3 eps = vec3(0.0001, 0.0, 0.0);\n\tvec3 norm;\n\tnorm.x = map( p + eps.xyz) - map( p - eps.xyz);\n\tnorm.y = map( p + eps.zxy) - map( p - eps.zxy);\n\tnorm.z = map( p + eps.yzx) - map( p - eps.yzx);\n\treturn normalize(norm);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    float time = iTime;\n\tvec2 uv = -1.0 + 2.0 * ( fragCoord.xy / iResolution.xy );\n\tuv.x *= iResolution.x / iResolution.y;\n\tvec3 dir = normalize(vec3(uv, -1.0));\n\tdir.xz = rot(dir.xz, time * 0.2);\n\tdir.zy = rot(dir.zy, time * 0.3);\n\tvec3 pos = vec3(cos(time * 0.1) * 3.0, sin(time * 0.1) * 3.0, time * 5.0);\n\tfloat t  = 0.0;\n\tvec3 col  = vec3(0,1,1);\n    float md  = 0.01;\n\tfor(int i = 0 ; i < REP; i++) {\n        float temp = map(pos + dir * t) * md;\n        if(temp < 0.005) break;\n        t += temp;\n\t}\n    vec3 ip = (pos + dir * t);\n    vec3 tip = ip;\n    vec3 N  = normal(ip);\n\tcol = vec3(t) * 0.002;\n    col += max(vec3(1,2,3) * 0.2, N);\n    col *= texture(iChannel0, tip.xy * 0.1).xyz;\n    col += vec3(t * 0.025);\n\tfragColor = vec4(col, 1.0);\n\n}\n\n\n","name":"","description":"","type":"image"}]}