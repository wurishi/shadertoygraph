{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"//\nconst float range = 1.0;\nconst int max_iter=256;\nconst int sampling=4;\nconst float avg=1.0/float(sampling)/float(sampling);\n//\nvec4 palette_BWYRB(float v)\n{\n\tv=(1.0-v)*4.0;\n\tif(v<1.0)\n\t\treturn vec4(v,0.0,0.0,1.0);\n\telse if(v<2.0)\n\t\treturn vec4(1.0,v-1.0,0.0,1.0);\n\telse if(v<3.0)\n\t\treturn vec4(1.0,1.0,v-2.0,1.0);\n\telse\n\t\treturn vec4(4.0-v,4.0-v,1.0,1.0);\n}\n//\nfloat Mand(vec2 uv)\n{\n\tfloat zx=0.0;float zy=0.0;\n\tfloat tzy;\n\tfor(int i=0;i<max_iter;i++)\n\t{\n\t\ttzy=zy;\n\t\tzy*=(2.0*zx);\n\t\tzy+=uv.y;\n\t\tzx=zx*zx-tzy*tzy;\n\t\tzx+=uv.x;\n\t\tif(length(vec2(zx,zy))>2.0) return float(i)/float(max_iter);\t\n\t}\n\treturn 1.0;\n}\n//\nfloat Julia(vec2 uv,vec2 c)\n{\n\tfloat ty;\n\tfor(int i=0;i<max_iter;i++)\n\t{\n\t\tty=uv.y;\n\t\tuv.y*=(2.0*uv.x);\n\t\tuv.y+=c.y;\n\t\tuv.x=uv.x*uv.x-ty*ty;\n\t\tuv.x+=c.x;\n\t\tif(length(uv)>2.0) return float(i)/float(max_iter);\t\n\t}\n\treturn 1.0;\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float scale = 2.0*range/min(iResolution.x,iResolution.y);\n    float small_scale=scale/float(sampling);\n\tvec2 uv = (fragCoord.xy - iResolution.xy*0.5)*scale;\n\tif(iMouse.z<0.5)\n\t{\n\t\tfragColor = palette_BWYRB(Mand(uv));\n\t}\n\telse\n\t{\n\t\tvec2 c = (iMouse.xy - iResolution.xy*0.5)*scale;\n\t\tfloat v=0.0;\n\t\tfor(int i=0;i<sampling;i++)\n\t\t\tfor(int j=0;j<sampling;j++)\n\t\t\t\tv+=Julia(uv+vec2(i,j)*small_scale,c);\n\t\tfragColor = palette_BWYRB(v*avg);\n\t}\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"Xsj3Wz","date":"1386230149","viewed":166,"name":"cnbjw's Julia Fractal","username":"cnbjw","description":"Click and drag to see different Julia sets. If fps is low, let sampling be 2 or 1 (in line 4).","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["fractal"],"hasliked":0,"parentid":"","parentname":""}}