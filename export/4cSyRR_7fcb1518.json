{"ver":"0.1","info":{"id":"4cSyRR","date":"1721816971","viewed":71,"name":"Colorful Smoke","username":"AndyCamelopardalis","description":"My friend called it \"Atomic bombing of nightclubs\"","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["simulateshort"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    fragColor = texture(iChannel0, uv);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define n .05\n\nfloat hash(vec3 p)\n{\n\tp = fract(p * .2024);\n    p += dot(p, p.zyx + 51.2);\n    return fract((p.x + p.y) * p.z);\n}\n#define T(uv) texture(iChannel0,uv).a\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float noise = hash(vec3(fragCoord,sin(iTime)));\n    vec2 uv = fragCoord/iResolution.xy;\n    float height = clamp(1e-3/noise,0.,1.);\n    vec2 e = vec2(n*noise,0);\n    vec2 normal = normalize(vec2(T(uv+e)-T(uv-e),T(uv+e.yx)-T(uv-e.yx)));\n    uv += 5.*normal*noise/iResolution.xy;\n    height = max(height, texture(iChannel0, uv).a - .005*noise);\n    float light = dot(normal, vec2(0,-1))*.5+.5;\n    fragColor = vec4(light*height*vec3(sin(uv.x),sin(uv.y),cos(uv.x)), height);\n}","name":"Buffer A","description":"","type":"buffer"}]}