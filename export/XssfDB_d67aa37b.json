{"ver":"0.1","info":{"id":"XssfDB","date":"1497935919","viewed":210,"name":"LIC flow field","username":"uber5001","description":".","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["lic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float stepLength = 0.002f;\nconst int stepCount = 30;\nconst vec2 center = vec2(0.5f, 0.5f);\nconst float r = 0.2f;\n\n\nvec2 flow(vec2 pos) {\n    //vec2 centerFacing = normalize(pos - center);\n    //vec2 angled = vec2(centerFacing.y, -centerFacing.x);\n    //return distance(pos, center) > r ? vec2(0.0f, 0.0f) : centerFacing;\n    return vec2(sin(pos.x*15.0f),sin(pos.y*15.0f));\n}\n\nconst float totalWeight = 1.0f;\nfloat weight(int index) {\n    float x = float(index)*3.1415f/float(stepCount);\n    float result = sin(x-iTime*5.0f);\n    return (result+1.0f)/2.0f/float(stepCount);\n    \n    //float x = float(index)/float(stepCount)*2.0f-1.0f;\n    //float t = iTime+x;\n    //t = t - floor(t);\n    //return t > 0.5f ? 0.2f : 0.0f;\n    //return totalWeight / (float(stepCount) * 2.0f + 1.0f);\n}\n\nfloat lic(vec2 pos) {\n    vec2 current = pos;\n    float sum = texture( iChannel0, current ).x*weight(0);\n    for (int i = 0; i < stepCount; i++) {\n        current = flow(current) * stepLength + current;\n        sum += texture( iChannel0, current ).x*weight(i+1);\n    }\n    \n    current = pos;\n    for (int i = 0; i > -stepCount; i--) {\n        current = -flow(current) * stepLength + current;\n        sum += texture( iChannel0, current ).x*weight(i-1);\n    }\n    sum /= totalWeight;\n    return sum;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    float x = lic(uv);\n\tfragColor = vec4(x,x,x, 1.0f);\n    \n}","name":"Image","description":"","type":"image"}]}