{"ver":"0.1","info":{"id":"tst3R4","date":"1567978038","viewed":134,"name":"Truchet denim","username":"kmill","description":"Denim with zippers","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["truchet"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float snoise(vec2 co) {\n\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec4 over(vec4 s, vec4 d) {\n    float a = s.a + d.a*(1.-s.a);\n    return vec4((s.rgb*s.a + d.rgb*d.a*(1.-s.a))/a, a);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-iResolution.xy/2.)/iResolution.y;\n    uv *= 7.0;\n    uv += 0.4*vec2(0.1,0.22) * iTime;\n    \n    uv += vec2(0.03*sin(0.9*uv.x+iTime)+0.03*sin(0.83*(uv.x+uv.y)), 0.03*cos(0.91*uv.y+iTime) +0.05*sin(0.81*(uv.x-uv.y)));\n\n    vec2 tuv = uv / 3.5 * 3.5;\n    vec4 tex = texture(iChannel0, tuv) + texture(iChannel0, 1.1*tuv.yx+vec2(0.2,0.3)) + texture(iChannel0, 1.013*tuv+vec2(0.3,0.11));\n    float c = (tex.x+tex.y+tex.z)/3.0;\n    vec3 tcol = vec3(0.08,0.37,0.71)*pow(c, 1.6);\n    \n    vec2 cuv = fract(uv)-0.5;\n    vec2 cid = floor(uv);\n    float typ = snoise(cid);\n    float checker = mod(cid.x+cid.y, 2.);\n    float checker2 = 2.*checker-1.;\n    float checker3 = checker2;\n    \n    typ = mod(typ + iTime / 50.0, 1.0);\n    \n    if (typ < 0.5) {\n        cuv.x *= -1.;\n        checker2 *= -1.;\n    }\n    \n    float width = 0.07;\n    \n    vec2 rot = (vec2(cuv.x-cuv.y,abs(cuv.x+cuv.y))-vec2(0.,1))/sqrt(2.);\n    float a = length(rot)-0.5;\n    float d = checker2*(smoothstep(-0.02,0.02,a)-0.5)+0.5;\n    float mask = smoothstep(0.01,-0.01,abs(a)-width);\n    float theta = atan(rot.y,rot.x);\n\n    float s = sign(cuv.x+cuv.y);\n    float zip = (0.5+0.5*sin(8.*checker3*s*4.*theta + 5.*iTime))*mask;\n    float amount = zip*smoothstep(0.2,-0.2,0.08-abs(a));\n    \n    vec4 col = over(vec4(tcol, d), vec4(0.0,0.0,0.0,1.0));\n    col = over(vec4(vec3(0.91,0.76,0.32)*0.999,smoothstep(0.1,0.25,amount)), col);\n    col = over(vec4(vec3(0.91,0.76,0.32)*0.85,0.5*smoothstep(0.3,0.39,amount)), col);\n    \n    // Output to screen\n    fragColor = vec4(col.rgb*col.a, 1.0);\n}","name":"Image","description":"","type":"image"}]}