{"ver":"0.1","info":{"id":"ms2fzd","date":"1690302542","viewed":43,"name":"Warp zone","username":"Sheldier","description":"...","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["abstract"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float LAYERS_AMOUNT = 6.0;\nconst float GRID_MULTIPLIER = 4.0;\n\nfloat LineSD(vec2 p, vec2 a, in vec2 b)\n{\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\nfloat RandomF(vec2 p)\n{\n    return fract(sin(dot(p, vec2(233.34, 851.73)) * 4197.0));\n}\n\nvec2 RandomV(vec2 p)\n{\n    float n = RandomF(p);\n    return vec2(n, RandomF(n + p));\n}\n\nvec2 GetPos(vec2 id, vec2 offset)\n{\n    vec2 r = RandomV(id + offset) * iTime * 3.0;\n    return sin(r) * 0.4 + offset;\n}\n\nfloat DrawLineAt(vec2 fromId, vec2 toId, vec2 uv)\n{\n    vec2 offset = toId - fromId;\n    \n    vec2 dotPos = GetPos(fromId, vec2(0.0));\n    vec2 toDotPos = GetPos(fromId, offset);\n    \n    float linesd = LineSD(uv, dotPos, toDotPos);\n    float line = smoothstep(0.02, 0.00, linesd);\n    \n    return line;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uvx = (fragCoord - 0.5 * iResolution.xy)/iResolution.y;\n    \n    vec3 col = vec3(0.0);\n    \n    for(float i = 0.0; i < LAYERS_AMOUNT; ++i)\n    {\n        float v = sin(length(uvx) * i + iTime) * 0.5 + 0.5;\n        vec2 uv = uvx + v;\n    \n        vec2 uv0 = uv;\n    \n        uv = fract(uv * GRID_MULTIPLIER) - 0.5;\n        vec2 id = floor(uv0 * GRID_MULTIPLIER);\n        \n        vec3 col0 = vec3(0.0);\n        col0 += DrawLineAt(id, vec2(id.x + 1.0, id.y), uv);\n        col0 += DrawLineAt(id, vec2(id.x - 1.0, id.y), uv);\n        col0 += DrawLineAt(id, vec2(id.x, id.y + 1.0), uv);\n        col0 += DrawLineAt(id, vec2(id.x, id.y - 1.0), uv);\n        col0 *= (v * i / LAYERS_AMOUNT) * 0.5;\n        col += col0;\n    }\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}