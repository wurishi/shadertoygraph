{"ver":"0.1","info":{"id":"dsBXzK","date":"1670533278","viewed":70,"name":"color field","username":"garabatospr","description":"vector field","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["vectorfield"],"hasliked":0,"parentid":"WlBfD3","parentname":"field_plus_field"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define field(U) 10.* vec2( f1(U),f2(U))\n#define S(a,b,c) smoothstep(a,b,c)\n#define PI 3.141592\n\n\nconst vec3 COLORS[]=vec3[](\n    vec3(1.0,0.0,0.0),       //red\n\tvec3(0.996,0.70,0.0),    //yellow\n    vec3(0.39,0.64,0.97),    //blue\n    vec3(1.0),               //white\n    vec3(0.0)                //black\n);\n\nvec2 distort(vec2 uv,float tfreq)\n{\n  float f1 = 5.;\n  float f2 = 5.;\n  return vec2(uv.x + cos(f1*uv.y + tfreq*iTime)*0.1,uv.y + cos(f2*uv.x + tfreq*iTime)*0.1);\n}\n\nmat2 rotate2d(float angle)\n{\n    return mat2(cos(angle),-sin(angle),sin(angle),cos(angle));\n}\n\nfloat f1(vec2 U)\n{    \n    U = U.y * ( vec2(5,3) + .01*sin(iTime*.05) );\n    return sin(U.x) + cos(U.y);\n}\n\nfloat f2(vec2 U)\n{\n    U = U.x * ( vec2(5,3) + .01*sin(iTime*.05) );\n    return sin(U.y) - cos(U.x);\n    \n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    vec3 col = vec3(0.0);\n\n\tvec2 uv = fragCoord.xy / iResolution.xy-0.5;\n    \n\tuv.x *= iResolution.x/iResolution.y;\n\n    uv *= 1.5;\n\n    uv = distort(uv,0.5);  \n    \n    //uv *= rotate2d(iTime*0.1);\n   \n\n    vec2 fld = field(uv);\n    \n    float fplus  = 0.5*sin(fld.x + fld.y) + 0.5;\n    float fminus = 0.5*sin(fld.x - fld.y) + 0.5;\n\n    float rad  = 1.0;\n    float blur = 0.05;\n    \n    for(int i=0;i <= COLORS.length();i++)\n    {\n      if ((i % 2) == 0)\n      {\n        col = mix(COLORS[i],col,S(rad-blur,rad,fplus));\n      }else\n      {\n        col = mix(COLORS[i],col,S(rad-blur,rad,fminus));\n      }\n      rad -= 0.2;\n    }\n \n\tfragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}