{"ver":"0.1","info":{"id":"ws2fzh","date":"1590143762","viewed":131,"name":"Smiley_the_art_of_code_from_YT","username":"Birat_Kafle","description":"Followed the tutorial form the art of code on YOUTUBE\n\nUse your mouse !!","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["eye","animation","smiley","art","emoji"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define S(a,b,t) smoothstep (a,b,t)\n#define sat(x)  clamp(x,0.,1.)\n\nfloat remap01 (float a, float b, float t)\n{\n\nreturn sat((t-a)/(b-a));\n\n}\n\n\nfloat remap (float a, float b, float c, float d, float t)\n{\n\nreturn sat(((t-a)/(b-a))*(d-c)+c);\n}\n\nvec2 within (vec2 uv, vec4 rect)\n{\n \nreturn (uv.xy-rect.xy)/(rect.zw-rect.xy);\n}\n\nvec4 Brow(vec2 uv,float smile)\n{\n   \n uv = within(uv,vec4(.03, .2, .4, .45));\n    \n     float offs = mix(.2,0.,smile);\n    uv.y += offs;\n    \n    \n float y = uv.y;\n    uv.y+= uv.x*mix(.5,.8,smile)-mix(.1,.3,smile);\n    uv.x -=mix(0.,.1,smile);\n    uv-=.5;\n    \n    vec4 col = vec4(0.);\n             \nfloat blur = .1;\n    \n    float d1 = length(uv);\n    float s1 = S(.45,.45-blur,d1);\n    float d2 = length(uv-vec2(.1,-.2)*.7);\n    float s2 = S(.5,.5-blur,d2);\n\n    float browmask = sat(s1-s2);\n    \n    float colMask = remap01(.7,.8,y)*.75;\n    colMask *= S(.6,.9,browmask);\n    colMask *=smile;\n    vec4 browcol = mix(vec4(.5, .2, .2, 1.), vec4(1., .75, .5, 1.), colMask);\n    \n    \n    \n    uv.y += .15 - offs*.5;\n   \n    blur += .1*smile;\n    d1 = length(uv);\n    s1 = S(.45, .45-blur, d1);\n    d2 = length(uv-vec2(.1, -.2)*.7);\n    s2 = S(.5, .5-blur, d2);\n    float shadowMask = sat(s1-s2);\n    \n    col = mix(col, vec4(0.,0.,0.,1.), S(.0, 1., shadowMask)*.5);\n    \n   col = mix(col,browcol,S(.2,.4,browmask));\nreturn col;\n}\n\n\nvec4 Eye(vec2 uv,float side,vec2 m,float smile)\n{\n\n    uv = within(uv,vec4(.03,-0.1,.37,.25));\n    uv-=.5;\n    uv.x *=side;\n    float d = length(uv);\n\n   \n     \n    vec4 irisColor = vec4(.3,.5,1.,1.);\n    \n    \n    \n    vec4 col = mix(vec4(1.),irisColor,S(.1,.7,d)*0.5);\n    col.a = S(.5,.48,d);\n    \n    col.rgb *= 1.-S(.4,.5,d)*0.5*sat(-uv.y-uv.x*side)*0.5;\n    \n    \n    \n    //uv.x += sin(iTime*10.)*0.2;\n    //uv.y += cos(iTime*10.)*0.2;\n    \n    d = length(uv-m*0.5);\n    col.rgb = mix(col.rgb,vec3(0.),S(.3,.28,d));\n    \n    irisColor.rgb *= 1.+S(0.3,.05,d);\n    float irisMask = S(.27,.26,d);\n    col.rgb = mix(col.rgb,irisColor.rgb,irisMask);\n    \n    d = length(uv-m*0.6);\n    float pupilsize = mix(0.4,.16,smile);\n    float pupilMask = S(pupilsize,pupilsize*0.8,d);\n    pupilMask *= irisMask;\n    col.rgb = mix(col.rgb,vec3(0.),pupilMask);\n    \n    float t = iTime*3.0;\n    vec2 offs = vec2(sin(t+uv.y*25.),sin(t+uv.x*25.));\n    offs *= 0.01*(1.-smile); \n    uv+= offs;\n    \n    float highlight = S(0.1,0.09,length(uv-vec2(-0.15,0.15)));\n    highlight += S(0.07,0.05,length(uv+vec2(-0.08,0.08)));\n    col.rgb = mix(col.rgb,vec3(1.0),highlight);\n    \n    \n \n    return col;\n}\n\n\nvec4 Mouth(vec2 uv,float smile)\n{\n    uv = within(uv,vec4(-.3,-0.4,.3,-.1));\n    uv-=.5;\n    uv.y*=1.5;\n    vec4 col = vec4(.5,.18,.05,1.);\n    uv.y-=uv.x*uv.x*2.0*smile;\n    uv.x *= mix(2.,1.,smile);\n    \n    vec2 tuv = uv;\n    float d = length(uv);\n    col.a = S(0.5,0.48,d);\n    \n    uv.y += abs(uv.x)*(1.-smile)*.7;\n    float td = length(uv-vec2(0.,.6));\n    \n   \n    \n    \n     vec3 toothcol = vec3(1.)*S(.6,.35,d);\n    col.rgb= mix(col.rgb,toothcol,S(.4,.37,td));\n    \n    td = length(tuv+vec2(0.,.5));\n    col.rgb = mix(col.rgb,vec3(1.,.5,.5),S(.5,.2,td));\n    \n    return col;\n}\n\nvec4 Head(vec2 uv)\n{\n    \n    vec4 col = vec4(0.9,.65,.1,1.0);\n    float d = length(uv);\n    \n    col.a = S(.5,0.49,d);\n    \n    \n    float edgeshade = remap01(0.35,0.5,d);\n    edgeshade = pow(edgeshade,2.);\n    \n    col.rgb *= 1.-edgeshade*0.5;\n    float DO = S(.47,.48,d);\n    col.rgb = mix(col.rgb, vec3(.6,.3,.1),DO);\n    \n    float highlight = S(.41,.405,d);\n    highlight *= remap(.41,-0.1,.75,0.,uv.y);\n    highlight *= S(.18,.19,length(uv-vec2(.21,.08)));\n    col.rgb = mix(col.rgb,vec3(1),highlight);\n    \n    d = length(uv-vec2(.25,-.2));\n    float cheek = S(.2,.1,d)*.4;\n               \n    col.rgb = mix(col.rgb,vec3(1.,.1,.1),cheek);\n   \n\n    return col;\n}\n\n\nvec4 Smiley(vec2 uv,vec2 m,float smile)\n{\n    float side = sign(uv.x);\n    \n    uv.x = abs(uv.x);\n    \n\n    vec4 col = vec4(0.);\n    vec4 head = Head(uv);\n    vec4 eye = Eye(uv,side,m,smile);\n    vec4 mouth = Mouth(uv,smile);\n    vec4 brow = Brow(uv,smile);\n    \n    col = mix(col, head,head.a);\n    col = mix(col, eye,eye.a);\n    col = mix(col, mouth,mouth.a);\n    col = mix(col, brow,brow.a);\n    \n    \n    \n    return col;\n}\n\n\nvoid mainImage(out vec4 FragColor,in vec2 FragCoord)\n{\n    vec2 uv = FragCoord/iResolution.xy;\n    uv -= vec2(0.5,0.5);\n\n    uv.x *= iResolution.x/iResolution.y;\n    \n    vec2 m = iMouse.xy/iResolution.xy;\n    m-=.5;\n    \n    float smile = cos(iTime)*.5+.5;\n    //uv -=m*(.25-dot(uv,uv));\n    uv -=m*(.25-length(uv)*length(uv));\n    uv.y*=(sin(iTime*3.)*0.03)+1.;\n    uv.x*=(cos(iTime*3.)*0.03)+1.;\n \n    \n    \n    \n    FragColor = Smiley(uv,m,smile);\n   \n}\n","name":"Image","description":"","type":"image"}]}