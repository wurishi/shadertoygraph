{"ver":"0.1","info":{"id":"MXlcD2","date":"1726688764","viewed":82,"name":"sketch of sea tunnel","username":"chenxianming","description":" not any other one to check it on.\n","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["tunnel","sketch"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define I iResolution\n#define PI 3.1415\n#define T iTime + 5.\n#define rot( a ) mat2( cos( a + vec4( 0, 11, 33, 0 ) ) )\n#define twi( r ) vec2( cos( r ) * 1.2, cos( r * .8 ) * 1.1 ) * .3\n#define v( a ) clamp( a, 0., 1. )\n\n\n\nmat2 m = mat2(.1, .05, -.5, .6);\n\nfloat noi(in vec2 x) {\n  x *= m;\n  return (cos(x.x + .12356) * sin(x.y + .987654) + .123456);\n}\n\nfloat fbm2(in vec2 x, in float H) {\n  float t, i, f, a;\n\n  for (; i < 10.; i++)\n    f = pow(2.0, i), a = pow(f, -H), t += a * noi(f * vec2(x.x * .5, x.y));\n\n  return t;\n}\n\nfloat fbm( vec3 p ){\n\nreturn length(vec2( fbm2(p.xz, .2), fbm2(p.xz, .3) ) * .05 );\n\n\n}\n\n\nfloat f( vec3 p ){\n    vec2 q = p.xy - twi( p.z );\n    \n    return 1. - length( q );\n}\n\nfloat df( vec3 p ){\n    \n    vec3 po = p;\n    \n    po.z -= T;\n\n    \n    p += fbm( p * 10. ) / 10.;\n    return f( p )*.3+fbm(p* 1.5 - T );\n}\n\n\nvoid mainImage( out vec4 U, in vec2 V )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 u = ( V * 2. - I.xy ) / I.y;\n\n\n    vec3 c, p, cp = vec3( 0., 0., -1. ), lk, r;\n\n    \n    float t, d, i;\n\n    cp.z += T;\n    cp.xy += twi( cp.z );\n    lk = cp + vec3(0, 0, 1);\n    \n    lk.xy += twi( lk.z );\n   \n    \n    \n    r = normalize( lk - cp + vec3(u, 0) );\n    \n    float it = 15., g, l;\n\n    for( ; i < it; i++ )\n        p = cp + r * t,  \n        p.xy *= rot( i / it * .6 * ( 1. - (p.z / 2. + .5) ) ),\n        d = df( p ) * .5556,\n        g = v(d-0.1)*1.5,\n        l = v( d*0.55 )*1.5,\n        c *= pow( g, 3. ),\n        c += ( i / it ) * (1.-d) * l * 5.,\n        c += pow( l, 4. ) * ( i / it ),\n        t += d;\n\n\n\n    // Output to screen\n    U = vec4(c,1.0);\n}","name":"Image","description":"","type":"image"}]}