{"ver":"0.1","info":{"id":"4ldXRB","date":"1480412542","viewed":167,"name":"SC clock","username":"c2okie","description":"simple clock","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["clock","realtime"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 MaterialAmbient = vec3(1.0);\nvec3 ClockAmbient = vec3(0.0);\nvec3 ClockInAmbient = vec3(1.0);\nfloat MaterialAlpha = 1.0;\nfloat ClockAlpha =1.0;\nfloat Thickness = 1.2; // hodnoty > 0; \n\n// pba\n// uniform float ResolutionU;\n// uniform float ResolutionV;\n\nint UTCYear; \nint UTCMonth; \nint UTCDay; \nint UTCHour; \nint UTCMinute; \nint UTCSecond; \n\n#define PI 3.14159265358979323846\n\nvoid setTime(out int UTCYear,out int UTCMonth,out int UTCDay,out int UTCHour,out int UTCMinute, out int UTCSecond)\n{\n    UTCYear = int(iDate.x); \n\tUTCMonth = int(iDate.y); \n\tUTCDay = int(iDate.z); \n\tUTCHour = int(mod(iDate.w / 3600., 24.));\n\tUTCMinute = int(mod(iDate.w / 60., 60.)); \n\tUTCSecond = int(mod(iDate.w, 60.));\n}\n\nvoid circle(in vec2 uv, vec2 c, float r, in vec3 inc, in float ina, out vec3 outc, out float outa) // uv souradnice, center, radius\n{\n    float x = 1. - smoothstep(r, r+0.01, length(uv-c));\n\toutc = mix(outc, inc,  vec3(x));\n    outa = mix(outa, ina, x);\n}\n\nvoid line(in vec2 uv, vec2 a, vec2 b, float th, in vec3 inc, in float ina, out vec3 outc, out float outa)\n{\n    vec2 uva = uv - a;\n    vec2 ba = b - a;\n    float l = clamp(dot(uva,ba) / dot(ba,ba), 0., 1.);\n\tfloat x = 1.0 - smoothstep(th, th + 0.01, length(uva-ba * l));\n\toutc = mix(outc, inc,  vec3(x));\n    outa = mix(outa, ina, x);\n}\n\nvoid mainImage(  out vec4 Color, in vec2 UV )\n{ \n\tvec2 uv = (2.0 * UV.xy - iResolution.xy)/ iResolution.y;\n    \n    // pba\n    // vec2 uv = TextureUV(UV, TextureMapping, MinBoundingVertex, MaxBoundingVertex, VertexPosition);\n    // uv.x *= ResolutionU / ResolutionV;\n    \n \tsetTime(UTCYear, UTCMonth, UTCDay, UTCHour, UTCMinute, UTCSecond);\n    \n\tvec2 center = vec2(0.0); \n\tfloat radius = 0.8; \n\tfloat thick = Thickness * 0.01;\n    if(Thickness < 0.0) thick = 0.015;\n\t\n\tvec3 pixCol = MaterialAmbient;\n\tfloat pixAlpha = MaterialAlpha;\n\t\n\tcircle(uv, center, radius+thick, ClockAmbient, ClockAlpha, pixCol, pixAlpha);\n\tcircle(uv, center, radius-thick, ClockInAmbient, ClockAlpha, pixCol, pixAlpha);\n    mix(pixCol, vec3(0.0), 1.-smoothstep(0.2, radius, length(center-uv)));\n    circle(uv, center, thick+0.02, ClockAmbient, ClockAlpha, pixCol, pixAlpha);\n    \n\tvec2 sec = vec2(sin(2.*PI*float(UTCSecond)/60.), cos(2.*PI*float(UTCSecond)/60.));\n\tline(uv, center, center + (radius - 0.15) * sec, thick-0.01, ClockAmbient, ClockAlpha, pixCol, pixAlpha);\n    \n\tvec2 min = vec2(sin(2.*PI*float(UTCMinute)/60.), cos(2.*PI*float(UTCMinute)/60.));\n    line(uv, center, center + (radius - 0.15) * min, thick, ClockAmbient, ClockAlpha, pixCol, pixAlpha);\n    \n\tvec2 hour = vec2(sin(2.*PI*float(UTCHour)/12.), cos(2.*PI*float(UTCHour)/12.));\n    line(uv, center, center + (radius - 0.3) * hour, thick, ClockAmbient, ClockAlpha, pixCol, pixAlpha);\n\t\n\tfloat lc;\n\tfor(int i = 0; i < 12; i++){\n\t\tvec2 a, b;\n\t\ta.x = center.x + radius * cos(float(i) * 2.*PI/12.);\n\t\ta.y = center.y + radius * sin(float(i) * 2.*PI/12.);\n\t\tb.x = center.x + (radius-0.07) * cos(float(i) * 2.*PI/12.);\n\t\tb.y = center.y + (radius-0.07) * sin(float(i) * 2.*PI/12.);\n        line(uv, a, b, thick/3.0, ClockAmbient, ClockAlpha, pixCol, pixAlpha);\n    }\n\n    Color = vec4(pixCol, pixAlpha);\n}\n","name":"Image","description":"","type":"image"}]}