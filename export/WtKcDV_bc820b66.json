{"ver":"0.1","info":{"id":"WtKcDV","date":"1611803841","viewed":96,"name":"Fractal 02_gaz","username":"gaz","description":"3d","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["fractal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define sabs(p) sqrt((p)*(p)+.8)\nvoid sfold90(inout vec2 p)\n{\n    p=(p.x+p.y+vec2(1,-1)*sabs(p.x-p.y))*.5;\n}\n\nfloat Scale;\n\nfloat map(vec3 p)\n{\n\tp=mod(p-1.5,3.)-1.5;\n\tp=abs(p)-1.3;\n\tsfold90(p.xz);\n\tsfold90(p.xz);\n\tsfold90(p.xz);\n\t\n\tfloat s=1.;\n\tp-=vec3(.5,-.3,1.5);\n\tfor(float i=0.;i++<7.;)\n    {\n\t\tfloat r2=2.1/clamp(dot(p,p),.0,1.);\n\t\tp=abs(p)*r2;\n\t\tp-=vec3(.1,.5,7.);\n\t\ts*=r2;\n\t}\n\tScale=log2(s);\n    float a=3.;\n    p-=clamp(p,-a,a);\n    return length(p)/s-.005;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv=(2.*fragCoord-iResolution.xy)/iResolution.y;\n\tvec3 p,\n  \t\tro=vec3(0,0,iTime),\n  \t\tw=normalize(vec3(.3*sin(iTime*.5),.5,1)),\n  \t\tu=normalize(cross(w,vec3(cos(iTime*.1),sin(iTime*.1),0))),\n  \t\trd=mat3(u,cross(u,w),w)*normalize(vec3(uv,2));\n\tfloat h=0.,d,i;\n\tfor(i=1.;i<80.;i++)\n    {\n    \tp=ro+rd*h;\n\t\td=map(p);\n    \tif(d<.001)break;\n    \th+=d;\n\t}\n\tfragColor.xyz=15.*vec3(sin(Scale*.7+p.xyx*.28)*.5+.5)/i;\n}\n","name":"Image","description":"","type":"image"}]}