{"ver":"0.1","info":{"id":"4tBSz1","date":"1441358638","viewed":449,"name":"Research: Raytracing Cubemap","username":"2Light","description":"I start some research about raytracing and its possibilities. I want to figure out how i can create a free cam for Raytracing.\nIf you have some advise for me feel free to write i am thankful for any trick or information! \nThanks, have a beautiful day <3","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["raytracer","camera","cubemap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGzn","filepath":"/media/a/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","previewfilepath":"/media/ap/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","type":"cubemap","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"struct Ray\n{\n    vec3 ro;\n    vec3 rd;\n};\n    \nstruct Camera\n{\n    vec3 Pos;\n    vec3 LookAt;\n    \n    vec3 Forward;\n\tvec3 Up;\n    vec3 Left;\n};\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy - 0.5;\n\tuv.x *= iResolution.x/iResolution.y; //fix aspect ratio\n    vec2 cuv = normalize(uv);\n    \n    vec2 mo = (iMouse.xy/iResolution.xy)+0.0001;\n\tfloat rotX = mo.x*6.28; // Pi * 2 for 360 deg rotation around Y axis (left and right)\n\tfloat rotY = mo.y*3.14; // Pi for 180 deg rotation around the X axis (up and down)\n    \n    \n    Camera cam;\n    cam.Pos = vec3(sin(rotY)*cos(rotX), cos(rotY), sin(rotX)*sin(rotY));\n    cam.LookAt = vec3(0.0,0.0,0.0);\n    \n    \n    cam.Forward = normalize(cam.LookAt - cam.Pos);\n    cam.Up = vec3(0.0,1.0,0.0);\n    cam.Left = normalize(cross(cam.Up,cam.Forward));\n    cam.Up = normalize(cross(cam.Forward,cam.Left));\n\n    \n    Ray viewRay;\n    viewRay.ro = cam.Pos;\n    viewRay.rd = normalize(cam.Forward + cam.Left*uv.x+cam.Up*uv.y);\n   \n    vec3 fColor = texture(iChannel0, viewRay.rd).rgb;\n    \n\tfragColor = vec4(fColor,1.0);\n}","name":"","description":"","type":"image"}]}