{"ver":"0.1","info":{"id":"Dl2GDG","date":"1675593838","viewed":117,"name":"sky study","username":"pdcxs","description":"how to draw a sky background","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["3d","sun","sky"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 fixUV(in vec2 uv) {\n    return 2. * (uv - .5 * iResolution.xy) / iResolution.y;\n}\n\nmat3 setCamera(in vec3 ro, in vec3 target, float cr) {\n    vec3 cw = normalize(target - ro);\n    vec3 cp = vec3(sin(cr), cos(cr), 0.0);\n    vec3 cu = normalize(cross(cw, cp));\n    vec3 cv = normalize(cross(cu, cw));\n    return mat3(cu, cv, cw);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fixUV(fragCoord);\n    vec3 target = vec3(0, 4, 0);\n    float r = 10.;\n    float an = iTime * 0.5;\n    vec3 ro = vec3(r * sin(an), 2., r * cos(an));\n    mat3 cam = setCamera(ro, target, 0.);\n\n    float fl = 2.;\n    vec3 rd = normalize(cam * vec3(uv, fl));\n    vec3 col = vec3(0.3, 0.5, 0.85) - rd.y * rd.y * 0.5;\n    col = mix(col, 0.85 * vec3(0.7, 0.75, 0.85), pow(1.0 - max(rd.y, 0.0), 4.0));\n\n    // sun\n    vec3 sunLight = normalize(vec3(0., 0.4, -1.0));\n    float sundot = clamp(dot(rd, sunLight), 0.0, 1.0);\n\n    col += 0.25 * vec3(1.0, 0.7, 0.4) * pow(sundot, 5.0);\n    col += 0.25 * vec3(1.0, 0.8, 0.6) * pow(sundot, 64.0);\n    col += 0.25 * vec3(1.0, 0.8, 0.6) * pow(sundot, 512.0);\n\n    col = mix(col, 0.68 * vec3(0.4, 0.65, 1.0), pow(1.0 - max(rd.y, 0.0), 16.0));\n\n    fragColor = vec4(sqrt(col), 1.);\n}","name":"Image","description":"","type":"image"}]}