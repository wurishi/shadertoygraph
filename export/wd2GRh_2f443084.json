{"ver":"0.1","info":{"id":"wd2GRh","date":"1548188693","viewed":530,"name":"cheap image extrema","username":"FabriceNeyret2","description":"Linfinity norm sqrt_n(sum |v|^n) tends toward the extrema.\nUse MIPmap to compute.  Trying serveral values for n -> red:100 green:50 blue:25 yellow:12\nBut n too high rise precision issues.\n\nNot very good :-(  (not only because of buggy MIPmap for non-pow2)","likes":1,"published":3,"flags":32,"usePreview":0,"tags":["norm","gpmipmap","extrema","linfinity"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 O, vec2 U )\n{\n    O = T(U);\n    vec2 R = iResolution.xy;\n    vec4 M = pow( R.x*R.y*textureLod( iChannel1, vec2(.5), 99.),vec4(1./N)),\n         E = abs(O.x-M);\n\n    //if ( U.x/R.x > .5) \n    {\n        if (O.x>M.z) O *= vec4(0,1,1,0);\n        // draw isovalues around extrema detected by N[i]\n        O =   E.x < .01 ? vec4(1,0,0,0)\n            : E.y < .01 ? vec4(0,1,0,0)\n            : E.z < .01 ? vec4(0,0,1,0)\n            : E.w < .01 ? vec4(1,1,0,0)\n            : O;\n    }\n    \n    //if ( floor(U.x)==R.x/2. ) O = vec4(0,0,1,0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4df3zn","filepath":"/media/a/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","previewfilepath":"/media/ap/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// --- source image\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O = texture(iChannel0, U/iResolution.xy);\n    \n    // large flat same-intensity areas is bad for the metrics : add rand\n    //O +=  .01*fract(sin(dot(U, vec2(12.9898, 78.233))) * 43758.5453);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define N vec4(100,50,25,12)   // degree for power approaching L infinity\n\n#define T(U) texelFetch( iChannel0, ivec2(U), 0 )","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"// --- computes approx L_infinity for various values N[i]\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O = abs(T(U));\n    O = pow(vec4(O.x),vec4(N));\n}","name":"Buffer B","description":"","type":"buffer"}]}