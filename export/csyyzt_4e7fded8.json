{"ver":"0.1","info":{"id":"csyyzt","date":"1696431425","viewed":41,"name":"Spider Web - Parameters","username":"davidmachadosf","description":"CONTROLS:\n  ARROWS : move image\n  * /    : zoom in/out  \n  + -    : increase/decrease zoom velocity\n  HOME:  : reset initial status\n  .      : cicles pallete\n\nThere are 15 different functions to generate images.\nPgUp and PgDown cicles different functions ","likes":1,"published":1,"flags":48,"usePreview":0,"tags":["math"],"hasliked":0,"parentid":"msKyzc","parentname":"Spider Web"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float n = 5.;\nfloat pi = 3.141592;\nfloat thetax = 0.;\nfloat thetay = .5*3.141592;\n\n\n\n\nfloat processFunction(int func, float x, float y){\n\n    switch(func){\n        case  0: return log(abs(x)) + log(abs(y));\n        case  1: return log(abs(x)) +         y  ;\n        case  2: return         x   + log(abs(y));\n        case  3: return         x   +         y  ;\n        case  4: return         x   +       y*y  ;\n        case  5: return       x*x   +       y*y  ;\n        case  6: return       x*x   +     y*y*y  ;\n        case  7: return     x*x*x   +       y*y  ;\n        case  8: return     x*x*x   +     y*y*y  ;\n        case  9: return   x*x*x*x   +   y*y*y*y  ;\n        case 10: return x*x*x*x*x   + y*y*y*y*y  ;\n        case 11: return      1./x   +      1./y  ;\n        case 12: return  1./(x*x)   +  1./(y*y)  ;\n        case 13: return 1./(x*x*x)  + 1./(y*y*y) ;\n        case 14: return  sin (log(abs(x*y))) + \n                         cos (log(abs(y/x)))     ;\n    }\n\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\n    \n    float[5] colors;\n    \n    //\n    \n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    \n    // get parameters\n    float xi   = get(paramXi );\n    float xf   = get(paramXf );\n    float yi   = get(paramYi );\n    float yf   = get(paramYf );\n    float vel  = get(paramVel);\n    \n    int func = int(get(paramFunc));\n    bool cicle  = get(paramCicle)<0.;\n    \n    float x = (xi+(xf-xi)*uv.x);\n    float y = (yi+(yf-yi)*uv.y);\n    \n    float d, newx, newy;\n    \n    \n////      \n    for(int i=0;i<5;i++){\n\n        d = processFunction(func,x,y);\n\n        if(cicle){\n           newx=sin(y/d+x/sqrt(n)+thetax);\n           newy=sin(x/d+y/sqrt(n)+thetay);\n        }\n        else {\n           newx=sin(y/d+x/sqrt(n)+thetax-2.*iTime);\n           newy=sin(x/d+y/sqrt(n)+thetay+.5*iTime);\n\t\t}\t\t\n\t\t\n        // bellow some different recurrence steps if anyone wants to test ;-)\n        \n        //newx=sin(y/d+x/d+thetax);\n        //newy=sin(x/d+y/d+thetay);\n\t\t\t\t\n\t\t//newx=sin(y/sqrt(n)+x/sqrt(n)+thetax);\n        //newy=sin(x/sqrt(n)+y/sqrt(n)+thetay);\n\t\t\t\t\n\t\t//newx=sin(log(y)/d+log(x)/sqrt(n)+thetax);\n        //newy=sin(log(x)/d+log(y)/sqrt(n)+thetay);\n\t\t\t\t\n        x = newx;\n\t\ty = newy;\n        \n        colors[i]=abs(280.-pow(x+y,2.)*128.);\n      }\n\t\t\t\n\n    // Output to screen\n    //vec3 col = vec3();\n    \n    fragColor = vec4(colors[2]/256.,colors[3]/256.,colors[4]/256.,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"// parameters\nconst ivec2 paramXi = ivec2(0,0);\nconst ivec2 paramXf = ivec2(0,1);\nconst ivec2 paramYi = ivec2(0,2);\nconst ivec2 paramYf = ivec2(0,3);\n\nconst ivec2 paramVel   = ivec2(1,0);\nconst ivec2 paramFunc  = ivec2(2,0);\nconst ivec2 paramCicle = ivec2(3,0);\n\n#define get(var) texelFetch(iChannel0, var, 0).x\n#define set(var, value, fragColor, fragCoord) fragColor=(ivec2(fragCoord)==var?vec4(value,0.,0.,1.):fragColor)\n\n\n\n// change position\nconst int keyNorth = 38;\nconst int keySouth = 40;\nconst int keyEast  = 37;\nconst int keyWest  = 39;\n\n\n// change scale\nconst int keyZoomOut = 111; // /\nconst int keyZoomIn  = 106; // *\n\n\n// change scale velocity\nconst int keySlow = 109; // -\nconst int keyFast = 107; // +\n\n// change image functions\nconst int keyPrev = 33; // PgUp\nconst int keyNext = 34; // PgDown\n\n// reset to initial parameters\nconst int keyReset = 36; // Home\n\n\n// cicle palete over time\nconst int keyCicle = 110; // .\n\n\n\n#define keyToggle(ascii)  ( texelFetch(iChannel1,ivec2(ascii,2),0).x > 0.)\n#define keyClick(ascii)   ( texelFetch(iChannel1,ivec2(ascii,1),0).x > 0.)\n#define keyDown(ascii)    ( texelFetch(iChannel1,ivec2(ascii,0),0).x > 0.)\n\n#define shift             ( texelFetch(iChannel1,ivec2(16,0),0).x  > 0.)\n#define ctrl              ( texelFetch(iChannel1,ivec2(17,0),0).x  > 0.)\n#define alt               ( texelFetch(iChannel1,ivec2(18,0),0).x  > 0.)\n#define modifier          ( int(shift) +2*int(ctrl) + 4*int(alt) )\n\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float iniXi    = -.1;\nfloat iniXf    =  .1;\nfloat iniYi    = -.1;\nfloat iniYf    =  .1;\nfloat iniVel   = .01;\nfloat iniFunc  =  5.;\nfloat iniCicle = -1.;\n\n\n\nvoid initParameters(inout vec4 fragColor, in vec2 fragCoord){\n    set(paramXi,    iniXi,    fragColor, fragCoord);   \n    set(paramXf,    iniXf,    fragColor, fragCoord);   \n    set(paramYi,    iniYi,    fragColor, fragCoord);   \n    set(paramYf,    iniYf,    fragColor, fragCoord);   \n    set(paramVel,   iniVel,   fragColor, fragCoord);   \n    set(paramFunc,  iniFunc,  fragColor, fragCoord);   \n    set(paramCicle, iniCicle, fragColor, fragCoord);   \n}\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    \n    if (iFrame==0) {\n        initParameters(fragColor, fragCoord);    \n    }\n\n    else { \n    \n        float xi    = get(paramXi);   \n        float xf    = get(paramXf);   \n        float yi    = get(paramYi);   \n        float yf    = get(paramYf);   \n        float vel   = get(paramVel);   \n        float func  = get(paramFunc);  \n        float cicle = get(paramCicle);  \n        \n        \n        float dx = xf-xi;\n        float dy = yf-yi;\n        \n        if(keyDown(keyNorth)){\n            yi+=dy/100.;\n            yf+=dy/100.;\n        }\n        if(keyDown(keySouth)){\n            yi-=dy/100.;\n            yf-=dy/100.;\n        }\n        if(keyDown(keyEast)){\n            xi-=dx/100.;\n            xf-=dx/100.;\n        }\n        if(keyDown(keyWest)){\n            xi+=dx/100.;\n            xf+=dx/100.;\n        }\n        \n        if(keyDown(keyZoomOut)){\n            xi-=dx*vel;\n            xf+=dx*vel;\n            yi-=dy*vel;\n            yf+=dy*vel;\n        }        \n        if(keyDown(keyZoomIn)){\n            xi+=dx*vel;\n            xf-=dx*vel;\n            yi+=dy*vel;\n            yf-=dy*vel;\n        }\n        \n        if(keyClick(keySlow)){\n            vel/=2.;\n        }        \n        if(keyClick(keyFast)){\n            vel*=2.;\n        }\n        \n        if(keyClick(keyReset)){\n            \n            xi    = iniXi;\n            xf    = iniXf;\n            yi    = iniYi;\n            yf    = iniYf;\n            vel   = iniVel;\n            func  = iniFunc;\n            cicle = iniCicle;\n        }\n        \n        if(keyClick(keyPrev)){\n            func = func-1.;\n            if(func<0.) func = 14.;\n        }        \n        if(keyClick(keyNext)){\n            func = func+1.;\n            if(func>=15.) func = 0.;\n        }\n        \n        if(keyClick(keyCicle)){\n            cicle*=-1.;\n        }\n        \n        \n        \n    \n    \n        set(paramXi,    xi,    fragColor, fragCoord);   \n        set(paramXf,    xf,    fragColor, fragCoord);   \n        set(paramYi,    yi,    fragColor, fragCoord);   \n        set(paramYf,    yf,    fragColor, fragCoord);   \n        set(paramVel,   vel,   fragColor, fragCoord);   \n        set(paramFunc,  func,  fragColor, fragCoord);   \n        set(paramCicle, cicle, fragColor, fragCoord);   \n    }\n}\n","name":"Buffer A","description":"","type":"buffer"}]}