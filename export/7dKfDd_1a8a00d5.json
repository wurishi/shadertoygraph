{"ver":"0.1","info":{"id":"7dKfDd","date":"1659091355","viewed":157,"name":"The ukrainian flag","username":"maze_maze","description":"Слава Україні","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["flag","ukraine","ukrainian"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// A simple wavy flag\n\nfloat smootherstep(float t) {\n    return (t * (t * 6.0 - 15.0) + 10.0) * t * t * t;\n}\n\nfloat gradNoise2D(ivec2 pos, vec2 offset) {\n    // Handmade formula from my other post https://www.shadertoy.com/view/fdKBDV\n    float value = float((pos.x * 676769 ^ pos.y * 53769) * 676769) * 0.001;\n    return dot(vec2(cos(value), sin(value)), offset);\n}\n\n// My implementation of Perlin noise from here https://www.shadertoy.com/view/sdyfWV\nfloat height(vec2 pos) {\n    vec2 offset = fract(pos);\n    vec2 offset1 = offset - 1.0;\n    ivec2 posf = ivec2(pos - offset);\n    ivec2 posc = posf + 1;\n\n    float sox = smootherstep(offset.x);\n\n    return mix(\n        mix(gradNoise2D(posf, offset), gradNoise2D(ivec2(posc.x, posf.y), vec2(offset1.x, offset.y)), sox),\n        mix(gradNoise2D(ivec2(posf.x, posc.y), vec2(offset.x, offset1.y)), gradNoise2D(posc, offset1), sox),\n        smootherstep(offset.y)\n    ) * 1.41421356237 * .5;\n}\n\nconst vec3 sunDir = normalize(vec3(-4, -4, 2));\n\nvoid mainImage(out vec4 fragColor, in vec2 uv) {\n    uv /= iResolution.xy;\n    vec2 uv0 = uv * 2.5;\n    uv0.y *= .2;\n    uv0.x -= iTime * 1.0;\n    uv0.x += uv0.y * 2.;\n    vec3 p0 = vec3(uv0.x, height(uv0) * uv.x, uv0.y);\n    vec3 p1 = vec3(uv0.x + 0.05, 0., uv0.y);\n    p1.y = height(p1.xz) * uv.x;\n    vec3 p2 = vec3(uv0.x, 0., uv0.y + 0.05);\n    p2.y = height(p2.xz) * uv.x;\n    \n    float height = uv.y + p0.y * .2;\n    if (height > 0. && height < 1.) {\n        fragColor = vec4(mix(vec3(1, 1, 0), vec3(0, 0, 1), float(height > .5)), 1.);\n        \n        vec3 n = cross(normalize(p1 - p0), normalize(p2 - p0));\n        vec3 r = reflect(vec3(0, -1, 0), n);\n        fragColor.rgb *= max(dot(n, sunDir), 0.0) * .5 + .5;\n        fragColor.rgb = mix(fragColor.rgb, vec3(1), clamp(pow(dot(r, -sunDir) * 0.5 + 0.5, 64.), 0., 1.));\n    } else {\n        fragColor = vec4(.2, .15, .1, 1.);\n    }\n}","name":"Image","description":"","type":"image"}]}