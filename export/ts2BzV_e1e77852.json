{"ver":"0.1","info":{"id":"ts2BzV","date":"1590451828","viewed":289,"name":"[4k] Yet Another Trippy Tunnel","username":"LIA","description":"4k intro released at Outline Online 2020 \nCode: Kali / Bitnenfer - Music: Uctumi\nDOF was designed to be run in full screen 1920x1080","likes":14,"published":1,"flags":96,"usePreview":0,"tags":["intro","4k","demoscene"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//                                        L.I.A.\n//\n//                        (Latitude Independent Association)\n//\n//                                       presents\n//\n//                               a 4KB PC (Windows) intro\n//\n//                                       called\n//\n//                             \"Yet Another Trippy Tunnel\"\n//\n//\n//                                   code by: Kali and Bitnenfer\n//                                  music by: Uctumi\n//\n//\n//   This intro has been presented at Outline 2020 demoparty on may 23.\n//\n//   Kali wishes to specially thank Fabrice Neyret for code optimizations.\n//\n//\n//--------------------------------------- NEWS --------------------------------------------\n//\n//\n//\n//   L.I.A. is a new demoscene group. We're happy to announce the incorporation of\n//   a new member: Bitnenfer! Great coder you might know from demos 'Sacrificio'\n//   nominated for the New Talent category of Meteoriks Awards 2020, and\n//   'Merken', 2nd place in the oldschool demo category at Revision 2020.\n//   You can check his website with blogs and comments about his creations\n//   http://voidptr.io\n//\n//\n//-------------------------------------- MEMBERS ------------------------------------------\n//\n//\n//                           Bitnenfer - Kali - Riq - Uctumi\n\n//-------------------------------------- CONTACT ------------------------------------------\n\n\n//                            http://liagroup.is-great.org\n\n//------------------------------------- GREETINGS -----------------------------------------\n\n\n//                       To all fellow demosceners of the world!\n//                Specially: PVM - Hokuto Force - Azop - Christian Kleinhus\n//                           Dipswitch - QOP - JPupper\n\n//-----------------------------------------------------------------------------------------\n\n\n//                            Signing off... The LIA crusaders\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   vec2 uv=fragCoord/iResolution.xy;\n   fragColor=texture(iChannel0,uv);\n   for(float r=.0,d=texture(iChannel0,uv).w*.6;r<6.3;r+=.1)fragColor+=texture(iChannel0,clamp(uv+vec2(cos(r),sin(r))*(.4/iResolution.xy)*(clamp((1./.4-1./(d))*.2,-1.,1.)*16.),.001,.999));\n   fragColor/=63.;\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"Xt23zK","filepath":"https://soundcloud.com/uctumi/uctumi-yet-another-trippy-tunnel","previewfilepath":"https://soundcloud.com/uctumi/uctumi-yet-another-trippy-tunnel","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"//                                        L.I.A.\n//\n//                        (Latitude Independent Association)\n//\n//                                       presents\n//\n//                               a 4KB PC (Windows) intro\n//\n//                                       called\n//\n//                             \"Yet Another Trippy Tunnel\"\n//\n//\n//                                   code by: Kali and Bitnenfer\n//                                  music by: Uctumi\n//\n//\n//   This intro has been presented at Outline 2020 demoparty on may 23.\n//\n//   Kali wishes to specially thank Fabrice Neyret for code optimizations.\n//\n//\n//--------------------------------------- NEWS --------------------------------------------\n//\n//\n//\n//   L.I.A. is a new demoscene group. We're happy to announce the incorporation of\n//   a new member: Bitnenfer! Great coder you might know from demos 'Sacrificio'\n//   nominated for the New Talent category of Meteoriks Awards 2020, and\n//   'Merken', 2nd place in the oldschool demo category at Revision 2020.\n//   You can check his website with blogs and comments about his creations\n//   http://voidptr.io\n//\n//\n//-------------------------------------- MEMBERS ------------------------------------------\n//\n//\n//                           Bitnenfer - Kali - Riq - Uctumi\n\n//-------------------------------------- CONTACT ------------------------------------------\n\n\n//                            http://liagroup.is-great.org\n\n//------------------------------------- GREETINGS -----------------------------------------\n\n\n//                       To all fellow demosceners of the world!\n//                Specially: PVM - Hokuto Force - Azop - Christian Kleinhus\n//                           Dipswitch - QOP - JPupper\n\n//-----------------------------------------------------------------------------------------\n\n\n//                            Signing off... The LIA crusaders\n\n\n// to port from Leviathan\nvec4 o;\n#define iT iChannelTime[0]-.1\n#define res iResolution\n\nfloat scene;\n#define ha(n) fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453)\n#define ro(a) mat2(cos(a),sin(a),-sin(a),cos(a))\n#define no(v) normalize(v)\n#define sm(a,b,c) smoothstep(a,b,c)\n\nfloat det=.001,gt,maxdist=11.,pi=3.1459,z=0.,tube=0.,ap=0.,tubedist=0.;\nvec3 glow1=vec3(0),glow2=vec3(0),fcol,tbc=vec3(1.3,.3,0),mdc=vec3(0,.3,2.);\n\nfloat is(float s) \n{\n\treturn step(float(abs(s-scene)),.1);\n}\n\nfloat tubes(vec3 p) {\n    p.x+=sin(p.z)*.5*(1.-is(4.));\n    p.xy*=ro(p.z*1.5-gt*3.5);\n    p.xy=abs(p.xy)-.1+(.2*is(4.));\n    p.xy-=.3-abs(p.z-z)*.05;\n    float d=(length(p.xy)-.1+abs(.5-fract(p.z*10.))*.01)*.8+.05*is(4.);\n    return max(d,-abs(p.z-z)+tubedist*10.+5.);\n}\n\nvec3 path(float t) {\n    float s = step(95.,iT);\n    return vec3( vec2( sin(t*.5)*1.5 + sin(t*.25)*3.*is(0.)*s,\n                       cos(t*.3)*1.5 )\n                  * ( s+is(0.) < 1.5 ? sin(t*.1) : 1. )\n                , t );\n}\n\n\n\nfloat de(vec3 p) {\n    p.xy -= path(p.z).xy;\n    float pz = p.z, fz=floor(pz), t = tubes(p), m=1e2, a,h;\n    p.xy *= ro(  gt * mix(1.+sin(fz), -1., is(3.) ) + fz );\n    a = atan(p.y,p.x)*2.55;\n    vec2 id = floor( vec2( a, pz*2.+floor(gt*(5.+is(3.)/.1))) );\n    h = step (.85, ha(id*.156) );\n\n\tvec3 p3=fract(id.xyx * vec3(.1031, .1030, .0973));\n    p3+=dot(p3, p3.yxz+33.33);\n\n    fcol = ( scene==3. ? max(.2,sin(id.y+id.x)) * vec3(0,.3,2) : .2+h*no(fract((p3.xxy+p3.yzz)*p3.zyx))*.9 )\n           + fract(id.y*.5+id.x*.5) *step(96.,iT);\n    p = vec3( fract(pz*2.)-.5 , length(p.xy)-ap , fract(a)-.5 );\n    p.yz *= ro( (is(0.)+is(1.))*3.*sm(.5,1.,-sin(gt*1.1+pz*.07)) + z*is(4.));\n\n    float b = length(max(abs(p)-vec3(.34,0,.43),0.))*.5-.01;\n    tube = step(t,b);\n    p += p;\n    for (int i=0; ++i<9; m = (i>0?min(m,min(abs(p.x),abs(p.y))):0.))\n        p = abs(p)/dot(p,p)-.5 ;\n  \n    fcol = mix( fcol+m*(1.-tube), tbc*max(.5,sin(pz*1.5+gt*3.)) , tube);\n    glow1 += max(0.,.5-b) *fcol *h;\n    glow2 += max(0.,.5-t) *fcol;\n    return min(b,t);\n}\n\nvoid main2()\n{\n    vec2 uv = (gl_FragCoord.xy-res.xy*.5)/res.y;\n\n    gt=iT;\n\n\tfloat dp0=1.,dp1=.8,dp2=.9,dp=1.0;\n    gt=iT;\n    if (iT > 25.) scene = 1., dp0 = 1.65, dp1 = -0.6, dp2 = 1.0;\n\tif (iT > 35.) scene = 0., dp0 = 1.0,dp1=0.8,dp2=0.9;\n\tif (iT > 45.5) scene = 2., dp0 = 1.1, dp1 = 8.0, dp2 = 0.8;\n\tif (iT > 55.5) scene = 0., dp0 = 1.0,dp1=0.8,dp2=0.9;\n\tif (iT > 65.5) scene = 3., dp0 = 0.7, dp1 = 1.1, dp2 = 0.7;\n\tif (iT > 96.) scene = 0., dp0 = 1.0,dp1=0.8,dp2=0.9;\n\tif (iT > 116.) scene = 4., dp0 = 0.4, dp1 = -1.0, dp2 = -0.4;\n\tif (iT > 126.5) scene = 1., dp0 = 1.65, dp1 = -0.6, dp2 = 1.0;\n\tif (iT > 131.5) scene = 2., dp0 = 1.1, dp1 = 8.0, dp2 = 0.8;\n\tif (iT > 135.) scene = 4., dp0 = 1.0, dp1 = 1.0, dp2 = 1.0, gt*=-2.;\n\n    gt += sm(94.5,96.,gt) *2. -step(96.,gt);\n   \n    tubedist = sin(gt*.3+1.);\n    ap = 1.5-tubedist*.5 + max(0.,10.-gt*2.);\n   \n    if (scene == 2.) gt *= .7;\n    if (scene == 3.) ap = cos(gt)*.3+1.+sin(uv.y*2.)*.7, maxdist=7., gt*=.3, tubedist=1.;\n\n    float tpath = gt*3.4,totdist = 0., d;\n\n    vec3 from = path(tpath),\n          adv = path(tpath+2.),\n           fw = no(adv-from),\n           rt = no(vec3(-fw.z,0,fw)),\n          col = vec3(0), back=col, p,\n          dir = mat3(rt,cross(rt,fw),fw) *no(vec3(uv,.7));\n\n    from.y -= sm(1.,0.,tubedist) *is(0.);\n    if (scene == 1.) from = vec3(0.,-2.4,tpath), uv *= ro(-1.), dir = no(vec3(uv,.4)).xzy;\n    if (scene == 2.) from.y += 1.5, ap = 1. , dir = no(vec3(uv,.35)).xzy, dir.yz *= ro(2.7);\n    if (scene == 4.) from.x +=  .8, ap = 1.5, tubedist = -1., dir.xz *= ro(gt);\n\n    z=from.z;\n  \n    for ( int i=0; ++i<151; totdist += d) {\n        p = from+totdist*dir;\n        d = de(p) * (1.+ha(dir.xy)*.1);\n        if ( d<det || totdist>maxdist ) break;   \n    }\n    if (d<.1) {\n        p -= det*dir;\n        vec3 c=fcol, d=vec3(0,.01,0), n=no(vec3(de(p-d.yxx),de(p-d.xyx), de(p-d.xxy))-de(p));\n        p.xy -= path(p.z).xy;\n        c += tbc * sm(tubedist*10.+3., tubedist*10.+5., p.z-z)\n                 *.7 *max(0.,dot(no(p.xy),n.xy)) *(1.-tube);\n        col = c * ( max(tube,max(0.,dot(dir,n))) + .3 )\n              + pow(max(0.,reflect(dir,n).z),10.+tube*5.)\n                * (.6-.2*is(3.));\n    } else {\n        totdist = maxdist;\n        p = abs(fract(p*.02+.1)-.5);\n        for (int i=0;++i<8;) p = abs(p)/dot(p,p)-.8;\n        back += dot(p,p)*.001;\n    }\n\n    dp=totdist/maxdist;\n    col=col*(1.-sqrt(dp))+glow1*.03+glow2*.05+back;\n    col*=clamp(137.-iT,0.,1.);\n    o = vec4(col,dp0-(dp2-dp*dp1));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    main2();\n    fragColor = o;\n}","name":"Buffer A","description":"","type":"buffer"}]}