{"ver":"0.1","info":{"id":"msfBzB","date":"1688880030","viewed":109,"name":"Satisfying Rainbow Loop","username":"tristanantonsen","description":"Satisfying Rainbow Loop\nReference:\nhttps://iquilezles.org/articles/distfunctions/","likes":0,"published":3,"flags":0,"usePreview":0,"tags":["sdf","gyroid","satisfying"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float opSmoothUnion( float d1, float d2, float k ) {\n    float h = clamp( 0.5 + 0.5*(d2-d1)/k, 0.0, 1.0 );\n    return mix( d2, d1, h ) - k*h*(1.0-h); }\n    \nfloat opSubtraction( float d1, float d2 ) { return max(-d1,d2); }\n\nmat2 Rot(float a) {\n    float s=sin(a), c=cos(a);\n    return mat2(c, -s, s, c);\n}\n\nfloat sdGyroid(vec2 p, float f, float z) {\n    return sin(f*p.x)*cos(f*p.y) + sin(f*p.y)*cos(f*z) + sin(f*z)*cos(f*p.x);\n} \n\nfloat SceneDist(vec2 p) {\n    float d = sdGyroid(p, 20.0, 0.025*iTime);\n    float t = sin(0.5 * iTime) * 0.02;\n    \n    return d + t;\n\n}\n\nvec2 GetNormal(vec2 p) {\n\n    float epsilon = 0.0001;\n    vec2 dx = vec2(epsilon, 0.);\n    vec2 dy = vec2(0., epsilon);\n\n    float ddx = SceneDist(p + dx) - SceneDist(p - dx);\n    float ddy = SceneDist(p + dy) - SceneDist(p - dy);\n    \n    return normalize(vec2(ddx, ddy));\n\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord - 0.5*iResolution .xy)/iResolution.y;\n    vec2 m = (2.*iMouse.xy-iResolution.xy)/iResolution.y / 2.0;\n    \n    if (iMouse.z == 0.0) { m.x = 0.0; };\n    \n    float f = 0.1;\n    float d = SceneDist(uv) * 255.;\n    \n    float t = d * 0.5;\n    float fac = 0.5 * cos(f * d) + 0.5; // creating ripples & shifting from 0 to 1\n    \n    vec4 solidColor = vec4(0.1, 0.1, 0.1, 1.0);\n    \n    vec4 col1 = vec4(1.0);\n    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);\n    vec2 n = GetNormal(uv);\n    vec4 col3 = vec4(n, 1.0, 1.0);\n    \n    vec4 prettyColor = mix(col1, col3, fac); \n\n    fragColor = mix(solidColor, prettyColor, smoothstep(0.0,1.0,d) );\n    \n}\n","name":"Image","description":"","type":"image"}]}