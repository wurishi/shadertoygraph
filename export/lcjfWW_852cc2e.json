{"ver":"0.1","info":{"id":"lcjfWW","date":"1725039702","viewed":68,"name":"Night Spirals","username":"incre_ment","description":"Just more daily practice.","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["domainrepetition","spirals","neighborchecking"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float PI = 3.14159;\nfloat TAU = 2.*3.14159;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   vec2 uv = ( fragCoord - .5* iResolution.xy ) /iResolution.y;\n   vec3 col = vec3(0.);\n   float tt = fract(.2*iTime);\n \n   // Stars. Added neighbor checking so that they can have greater offsets in their\n   // respective cells.  This results in a less \"grid-like\" star field.\n   vec2 uvStars = uv * 30.;\n   vec2 starCell = floor(uvStars);\n   uvStars = fract(uvStars) - .5;   \n   float minStar = 1E20;\n   for(float i=-1.;i<=1.;i++)\n   for(float j=-1.;j<=1.;j++){\n     float r1 = fract(sin(dot(starCell + vec2(i,j), vec2(3.0,12.0)))*15745.7342) * 2. - 1.;\n     float r2 = fract(sin(dot(starCell + vec2(i,j), vec2(7.0,43.0)))*13131.8234) * 2. - 1.;\n     float spark = 0.;\n     if (r2 > .3) spark = .1 * sin(TAU*(tt + r1));     \n     float ssize = r2 * .1;  \n     float star = length((uvStars - vec2(i,j)) - 1.*vec2(r1,r2)) - ssize+spark;\n     minStar = min(minStar, star);\n   }\n   float w = 54./iResolution.y;\n   col += smoothstep(w,-w,minStar);\n \n   uv *= 2.2;\n   vec2 cellID = floor(uv);\n   uv = fract(uv) - .5;\n \n   // Spirals as a function of cellID.\n   float numCirc =4. + (cellID.x - 4.*cellID.y);\n   for(float i=0.; i<numCirc; i++){\n     float ang = i*TAU/numCirc;\n     vec2 del = vec2(.15*sin(ang), .15*cos(ang));\n     float circ = length(uv + del) - .2;\n     circ = abs(circ);   \n     float a = PI + atan((uv+del).y,(uv+del).x);\n     float glowFac = .39;\n     float glow = clamp(glowFac*sin(TAU*tt +  a + ang),0.,glowFac);\n         \n     col += pow(glow,5.0)/circ; \n   }\n   \n   fragColor = vec4(col,1.0); \n}","name":"Image","description":"","type":"image"}]}