{"ver":"0.1","info":{"id":"McV3Dm","date":"1712889759","viewed":244,"name":"Cyclotron","username":"ChunderFPV","description":".","likes":24,"published":1,"flags":32,"usePreview":0,"tags":["3d","raymarch","blur","spiral"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 C, in vec2 U )\n{\n    C = texture(iChannel0, U/R) + texture(iChannel1, U/R)*.02;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define A(a) mat2(cos((a)*6.2832 + vec4(0, -1.5708, 1.5708, 0)))\n#define H(a) (cos(radians(vec3(0, 60, 120))+(a)*6.2832)*.5+.5)\n\nfloat cube(vec3 p, mat2 h, mat2 v)\n{\n    float a, b;\n    p.yz *= h;\n    p.xz *= v;\n    p = abs(p);\n    a = max(p.x, max(p.y, p.z))-2.414;\n    p = abs(p-round(p));\n    b = max(p.x, max(p.y, p.z))-.3;\n    return max(a, b);\n}\n\nvoid mainImage( out vec4 C, vec2 U )\n{\n    float t = iTime/60.,\n          d = 0., i = d, s, r, r2;\n    \n    vec2 m = (iMouse.z > 0.) ? \n        (iMouse.xy-.5*R)/R.y:\n        vec2(t*3., cos(t*12.5664 + 3.1416)*.5);\n    \n    vec3 o = vec3(0, -6, -40./(m.y+1.)),\n         u = normalize(vec3(U-.5*R, R.y*.7)),\n         c = vec3(.1), p;\n    \n    mat2 h = A(m.x),\n         v = A(m.y/30.),\n         ch = A(cos(iTime/2.)*.1),\n         cv = A(sin(-iTime/2.)*.5);\n    \n    for (; i++<90.;)\n    {\n        p = o+u*d;\n        p.yz *= v;\n        p.xz *= h;\n        r = length(p.xz);\n        r2 = length(p);\n        s = cube(p, ch, cv);\n        s = min(s, max(length(p)-5.5, 5.4-length(p.xy)));\n        p.xz = vec2( atan(p.x, p.z)/6.2832, r );\n        p.x -= round(p.z)*t*sign(p.y);\n        p.xz = abs(p.xz-round(p.xz));\n        p.y = abs(p.y)-15.;\n        s = min(s, max(abs(p.y) - min(8., 20./r), max(p.x, p.z) - .5/r) );\n        \n        if (s < .001 || d > 1e3) break;\n        d += s*.5;\n        c += min(vec3(s), .003/s * (H(s + 5./r2 - .1)*.6+.1));\n    }\n    \n    C = vec4(c*c, 1);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"#define T(s) texture(iChannel1, mix(U/R, vec2(.5), s))*.95 + texture(iChannel0, U/R)\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    C = max(T(.005), T(-.005));\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define R iResolution.xy","name":"Common","description":"","type":"common"}]}