{"ver":"0.1","info":{"id":"WlScWy","date":"1595195545","viewed":473,"name":" Solskogen 2020 Quarterfinal","username":"Alkama","description":"My quarterfinal Shader Showdown result @ Solskogen 2020 demoparty.\n15 minutes round.\n(I won that round :D)","likes":10,"published":3,"flags":0,"usePreview":0,"tags":["raymarching","distancefield","demoscene","liveshading"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float pi=acos(-1.0), t, g, d;\nmat2 rot(float a) { float c=cos(a),s=sin(a); return mat2(c,s,-s,c); }\nfloat tr(vec3 p, float l, float s) { return length(vec2(length(p.xy)-l,p.z))-s; }\nfloat scene(vec3 p) {\n    float dd,d=1000.,s=3.;\n    for(float i=0.;i<s;i+=1./s) {\n        vec3 pp = p;\n        float ii=s+1./s-i;\n        float w=ii*abs(sin(t+i));\n        int alt=int(i*s)%2;\n        pp.yx*=rot(ii*(sin(t)+pi*3.));\n        pp.yz*=rot(ii*(cos(t)+pi*5.));\n        if(alt==1) {\n            pp+=.08*(texture(iChannel0, t+pp.xz*.02).r*2.-1.);\n            dd=tr(pp,i, .01*w);\n            g+=1./(1.+abs(dd));\n            dd=max(.005,dd);\n        } else {\n            dd=tr(pp,i, .08*w);\n        }\n        d=min(d,dd);\n    }\n    return d;\n}\nvec3 norm(vec3 p) { vec2 e=vec2(.001,0); return normalize(scene(p)-vec3(scene(p-e.xyy),scene(p-e.yxy),scene(p-e.yyx))); }\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord/iResolution.xy-.5)*vec2(iResolution.x / iResolution.y, 1);\n    t = mod(iTime,10.*pi);\n    vec3 col,p,dir=normalize(vec3(uv+.2*vec2(sin(t),cos(t)),.7+.1*sin(t*2.)));\n    p.z=-4.;\n    for(int i=0;i<50;i++) {\n        float h=scene(p)*.8;\n        if(abs(h)<.001) {\n            col+=dir*abs(dot(norm(p),-vec3(1)));\n            break;\n        }\n        if(d>10.) {\n            col+=.05*acos(dir);\n            break;\n        }\n        d+=h;\n        p+=dir*h;\n    }\n    col+=pow(g*.018+(.1*sin(t*100.)),5.)*vec3(.1,.2,1.5);\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}