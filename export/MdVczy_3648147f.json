{"ver":"0.1","info":{"id":"MdVczy","date":"1522514069","viewed":902,"name":"flip screen / electronic ink","username":"FabriceNeyret2","description":"imitate electronic ink or magic screen, made of grid of turning balls with 2 side color.\nFlip delay in Common.\n\nHere this is cheating since the 2 colors change at every frame.\nWould be ok with Black or White -> change comment in BufA. \n","likes":14,"published":3,"flags":32,"usePreview":0,"tags":["2d","screen","short","magicmirror"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define S(t) smoothstep(4.*p, 0., length(V/vec2(1,t)) - .7 ) // ellipse\n#define T(p) texture(iChannel0, p )\n#define rnd(U) fract( sin(dot(U,vec2(127.1,311.7))) * 4e3 )\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    vec2 R = iResolution.xy;\n    float p = 20./R.y;\n    U *= p;\n\tvec2 V = fract(U)*2.-1.,                    // tile coordinate\n         W = floor(U)/20.*R.y/R;                // tile id in texture\n    \n    float y = -cos( 3.1415*float(iFrame%TOP)/float(TOP) ), // roll phase\n       // d = sign(mod(float(iFrame/TOP),2.)-.5),          // roll direction\n          d = sign(mod(float(iFrame/TOP)+float(rnd(floor(U))>.5),2.)-.5);\n    \n\n    O = mix( vec4(.5),                          // background color\n             mix( texture(iChannel1, W ),       // previous still frame\n                  texture(iChannel0, W ),       // new still frame\n                  V.y*y*d > 0. ? y>0.? S(y): 1.-S(y) : float(y>0.) ),\n             S(1) );                            // disk\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// --- new still frame\n\nvoid mainImage( out vec4 O, vec2 U )\n{   O = iFrame%TOP==1 \n        ? texture(iChannel1,U/iResolution.xy)\n     // ? vec4( texture(iChannel1,U/iResolution.xy).x > .5 )\n        : texelFetch(iChannel0,ivec2(U),0);\n}","name":"Buf A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define TOP 30  // nb frame between 2 flips","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"// --- previous still frame\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O = iFrame%TOP==0 ? texelFetch(iChannel1,ivec2(U),0)\n                      : texelFetch(iChannel0,ivec2(U),0);\n}","name":"Buf B","description":"","type":"buffer"}]}