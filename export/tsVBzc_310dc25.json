{"ver":"0.1","info":{"id":"tsVBzc","date":"1607666970","viewed":585,"name":"Happy Holidays!","username":"ChutneyPot","description":"Just my version of a holiday greeting while having fun learning how to do a bunch of stuff in shaders!","likes":10,"published":1,"flags":8,"usePreview":0,"tags":["christmas","holidays"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Happy Holidays, December 2020\n// by Tito Morab - ChutneyPot\n// https://www.shadertoy.com/view/tsVBzc\n//--------------------------------------------------------------------------\n#define BG_COLOR vec4(0.91, 0.28, 0.29, 1.0)\n#define BG_FADE_COLOR vec4(0.76, 0.20, 0.21, 1.0)\n#define SNOW_COLOR vec4(1.0, 1.0, 1.0, 1.0)\n#define SNOW_SHADE_COLOR vec4(0.9, 0.9, 0.9, 1.0)\n#define SNOWMAN_COLOR vec4(1.0, 1.0, 1.0, 1.0)\n#define SNOWMAN_HAT_COLOR vec4(0.3, 0.3, 0.3, 1.0)\n#define SNOWMAN_NOSE_COLOR vec4(0.93, 0.35, 0.17, 1.0)\n#define SNOWMAN_BUTTON_COLOR vec4(0.3, 0.6, 0.3, 1.0)\n#define TREE_COLOR vec4(0.3, 0.6, 0.3, 1.0)\n#define TREE_TRUNK_COLOR vec4(0.51, 0.28, 0.05, 1.0)\n#define TREE_DECO_COLOR1 vec4(0.31, 0.38, 0.72, 1.0)\n#define TREE_DECO_COLOR2 vec4(0.71, 0.38, 0.82, 1.0)\n#define TREE_DECO_COLOR3 vec4(0.97, 0.80, 0.18, 1.0)\n#define BOX_COLOR1 vec4(0.31, 0.38, 0.72, 1.0)\n#define BOX_COLOR2 vec4(0.91, 0.55, 0.18, 1.0)\n#define RIBBON_COLOR1 vec4(0.3, 0.6, 0.3, 1.0)\n#define RIBBON_COLOR2 vec4(0.71, 0.38, 0.82, 1.0)\n#define LIGHT_WIRE_COLOR vec4(0.31, 0.38, 0.72, 1.0)\n#define LIGHT_ON_COLOR vec4(0.98, 1.0, 0.24, 1.0)\n#define LIGHT_OFF_COLOR vec4(0.65, 0.65, 0.45, 0.9)\n\n#define BLUR 4.0 / iResolution.y\n\nfloat Hash21(vec2 uv)\n{                   \n    return fract(sin(dot(uv, vec2(825.123, 9475.832))) * 244.19);\n}\n\nvec2 Rotate(vec2 uv, float deg)\n{\n    float angle = radians(deg);\n    vec2 rot = uv * mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n    return rot;\n}\n\nfloat Circle(vec2 uv, vec2 centre, float radius)\n{\n    float d = length(uv - centre);\n    float c = smoothstep(radius, radius - BLUR, d);\n    return c;\n}\n\nfloat Rect(vec2 uv, vec2 leftBot, vec2 rightTop)\n{\n    vec2 lb = smoothstep(leftBot, leftBot - BLUR, uv);\n    vec2 rt = smoothstep(rightTop, rightTop - BLUR, uv);\n    vec2 dim = rt - lb;\n    \n    return (min(dim.x, dim.y));\n}\n\nfloat TriangleIsosceles(vec2 uv, vec2 tip, vec2 size)\n{\n    tip = uv - tip;\n    tip.x = abs(tip.x);\n    \n    vec2 a = tip - (size * clamp(dot(tip, size) / dot(size, size), 0.0, 1.0));\n    vec2 b = tip - (size * vec2(clamp(tip.x / size.x, 0.0, 1.0), 1.0));\n    float s = -sign(size.y);\n    vec2 d = min(vec2(dot(a, a), s * ((tip.x * size.y) - (tip.y * size.x))), vec2(dot(b, b), s * (tip.y - size.y)));\n    float t = -sqrt(d.x) * sign(d.y);\n    \n    return smoothstep(0.0, 0.0 - BLUR, t);\n}\n\nfloat Quad(vec2 uv, vec2 p1, vec2 p2, vec2 p3, vec2 p4)\n{  \n    float top = uv.y + (uv.x * (p1.y - p2.y));\n    float bot = uv.y + (uv.x * (p3.y - p4.y));    \n    top = smoothstep(p1.y, p1.y - BLUR, top);\n    bot = smoothstep(p3.y, p3.y + BLUR, bot);\n    \n    float right = uv.x + (uv.y * (p4.x - p2.x));\n    float left = uv.x + (uv.y * (p3.x - p1.x));    \n    right = smoothstep(p2.x, p2.x - BLUR, right);\n    left = smoothstep(p1.x, p1.x + BLUR, left);\n    \n    float h = min(top, bot);\n    float w = min(left, right);\n    \n    float r = min(w, h);\n    return r;\n}\n\nvec4 DecorateBase(vec2 uv, vec2 centre, float radius, float thickness, vec4 color, float base)\n{\n    float deco1 = Circle(uv, centre, radius);\n    float deco2 = Circle(uv, centre - vec2(0.03, 0.02), radius - thickness);\n    \n    vec4 col = vec4(0.0);\n    col = mix(col, TREE_COLOR, base);\n    col = mix(col, color, min(base, deco1 - deco2));\n    \n    return col;\n}\n\nvec4 Snowfall(vec2 uv, float time, float speed, float radius)\n{\n    float ar = iResolution.x / iResolution.y;\n    uv.x += ar - mod(time * speed, ar * 2.0);\n    uv.y -= 1.0 - mod(time * speed, 2.0);\n    \n    uv += sin(time) * 0.1;\n    \n    float l = length(uv);\n    \n    return vec4(smoothstep(radius, radius - 3.0 / iResolution.y, l));   \n}\n\nvec4 Env(vec2 uv)\n{    \n    float snowLeft = Circle(uv, vec2(-0.9, -3.3), 2.8);\n  \tfloat snowRight = Circle(uv, vec2(1.0, -3.3), 2.5);\n    \n    float snowBall1 = Circle(uv, vec2(-1.4, -0.52), 0.07);\n    float snowBall2 = Circle(uv, vec2(-1.6, -0.52), 0.1);\n    \n    float snowLeftShade = Circle(uv, vec2(-0.9, -3.3), 2.75);\n    float snowRightShade = Circle(uv, vec2(1.0, -3.3), 2.45);\n    \n    float present11 = Rect(Rotate(uv, -20.0), vec2(0.3, -0.64), vec2(0.6, -0.44));\n    float present12 = Rect(Rotate(uv, -20.0), vec2(0.3, -0.59), vec2(0.6, -0.54));\n    float present13 = Rect(Rotate(uv, -20.0), vec2(0.45, -0.64), vec2(0.5, -0.44));\n    float present21 = Rect(Rotate(uv, 10.0), vec2(0.3, -0.95), vec2(0.48, -0.65));\n    float present22 = Rect(Rotate(uv, 10.0), vec2(0.37, -0.95), vec2(0.415, -0.65));\n    float present23 = Rect(Rotate(uv, 10.0), vec2(0.3, -0.9), vec2(0.48, -0.85));\n       \n    vec4 col = vec4(0.0);    \n    col = mix(col, SNOW_SHADE_COLOR, max(snowLeft, snowRight));\n    col = mix(col, SNOW_COLOR, max(snowBall1, snowBall2));\n    col = mix(col, SNOW_COLOR, max(snowLeftShade, snowRightShade));    \n    col = mix(col, BOX_COLOR1, present11);\n    col = mix(col, RIBBON_COLOR1, max(present12, present13));\n    col = mix(col, BOX_COLOR2, present21);\n    col = mix(col, RIBBON_COLOR2, max(present22, present23));\n              \n    return col;\n}\n\nvec4 Snowman(vec2 uv)\n{\n   \tuv -= vec2(-0.8, -0.4);\n    uv = Rotate(uv, sin(iTime) * 12.0);\n    uv += vec2(-0.8, -0.4);\n    \n    float head = Circle(uv, vec2(-0.8, 0.0), 0.2);\n    float body = Circle(uv, vec2(-0.8, -0.4), 0.3);\n    \n    float eyes = Circle(vec2(abs(uv.x + 0.8), uv.y), vec2(0.05, 0.06), 0.03);\n    float nose = TriangleIsosceles(uv, vec2(-0.8, -0.15), vec2(0.04, 0.15));\n    float buttons = Circle(vec2(uv.x, abs(uv.y + 0.35)), vec2(-0.8, 0.07), 0.04);\n    \n    float arms = Rect(Rotate(vec2(abs(uv.x + 0.8), uv.y), 30.0), vec2(0.05, -0.35), vec2(0.3, -0.32));\n    float finger1 = Rect(Rotate(vec2(abs(uv.x + 0.8) - 0.62, uv.y + 0.5), 160.0), vec2(0.3, -0.35), vec2(0.33, -0.25));\n    float finger2 = Rect(Rotate(vec2(abs(uv.x + 0.8) - 0.03, uv.y + 0.29), 60.0), vec2(0.3, -0.35), vec2(0.33, -0.25));\n    \n    float hatBase = Rect(uv, vec2(-1.0, 0.15), vec2(-0.6, 0.22));\n    float hatTop = Rect(uv, vec2(-0.95, 0.2), vec2(-0.65, 0.48));    \n    \n  \tvec4 col = vec4(0.0);    \n    col = mix(col, SNOWMAN_COLOR, max(head, body));\n    col = mix(col, SNOWMAN_HAT_COLOR, eyes);\n    col = mix(col, SNOWMAN_NOSE_COLOR, nose);\n    col = mix(col, SNOWMAN_BUTTON_COLOR, buttons);\n    col = mix(col, SNOWMAN_HAT_COLOR, max(hatBase, hatTop));\n    col = mix(col, SNOWMAN_HAT_COLOR, max(arms, max(finger1, finger2)));\n    \n    return col;\n}\n\nvec4 Tree(vec2 uv)\n{\n\tuv+= vec2(-0.2, 0.0);\n    \n    float trunk = Quad(uv, vec2(0.9, -0.6), vec2(0.9, -0.6), vec2(0.8, -0.9), vec2(1.0, -0.9));\n    float base1 = Quad(uv, vec2(0.8, -0.2), vec2(1.2, -0.35), vec2(0.3, -0.57), vec2(1.4, -0.6));\n    float base2 = Quad(uv, vec2(0.7, -0.1), vec2(1.2, -0.09), vec2(0.0, -0.2), vec2(1.75, -0.35));\n    float base3 = Quad(uv, vec2(0.55, 0.25), vec2(1.3, 0.15), vec2(0.1, -0.1), vec2(2.0, -0.09));\n    float base4 = Quad(uv, vec2(0.35, 0.32), vec2(1.45, 0.35), vec2(-0.5, 0.25), vec2(2.4, 0.15));\n    float base5 = Quad(uv, vec2(0.45, 0.55), vec2(1.3, 0.55), vec2(-0.1, 0.32), vec2(1.85, 0.35));\n    float base6 = TriangleIsosceles(uv, vec2(0.87, 0.9), vec2(0.1, -0.35));\n    \n    vec4 decoBase1 = DecorateBase(uv, vec2(1.0, 0.2), 0.7, 0.07, TREE_DECO_COLOR1, base1);\n    vec4 decoBase2 = DecorateBase(uv, vec2(0.9, 0.37), 0.63, 0.06, TREE_DECO_COLOR3, base2);\n    vec4 decoBase3 = DecorateBase(uv, vec2(0.95, 0.47), 0.5, 0.06, TREE_DECO_COLOR2, base3);\n    vec4 decoBase4 = DecorateBase(uv, vec2(0.95, 0.6), 0.4, 0.05, TREE_DECO_COLOR1, base4);\n    vec4 decoBase5 = DecorateBase(uv, vec2(0.9, 0.7), 0.25, 0.05, TREE_DECO_COLOR2, base5);\n    vec4 decoBase6 = DecorateBase(uv, vec2(0.95, 0.4), 0.33, 0.07, TREE_DECO_COLOR3, base6);\n    \n    vec4 col = vec4(0.0);\n    col = mix(col, TREE_TRUNK_COLOR, trunk);\n    col = mix(col, decoBase1, decoBase1.w);\n    col = mix(col, decoBase2, decoBase2.w);\n    col = mix(col, decoBase3, decoBase3.w);\n    col = mix(col, decoBase4, decoBase4.w);\n    col = mix(col, decoBase5, decoBase5.w);\n    col = mix(col, decoBase6, decoBase6.w);\n    \n    return col;\n}\n\nvec4 Lights(vec2 uv)\n{\n    float wire1 = Circle(uv, vec2(-0.5, 4.25), 3.5);\n    float wire2 = Circle(uv, vec2(-0.5, 4.25), 3.49);\n    \n    float bulb1 = Circle(uv, vec2(-1.5, 0.86), 0.05);\n    float bulb2 = Circle(uv, vec2(-1.1, 0.765), 0.05);\n    float bulb3 = Circle(uv, vec2(-0.7, 0.72), 0.05);\n    float bulb4 = Circle(uv, vec2(-0.3, 0.72), 0.05);\n    float bulb5 = Circle(uv, vec2(0.1, 0.765), 0.05);\n    float bulb6 = Circle(uv, vec2(0.5, 0.86), 0.05);\n    \n    vec4 lightSwitch1 = mix(LIGHT_OFF_COLOR, LIGHT_ON_COLOR, round((sin(iTime * 2.0) + 1.0) / 2.0));\n    vec4 lightSwitch2 = mix(LIGHT_ON_COLOR, LIGHT_OFF_COLOR, round((sin(iTime * 2.0) + 1.0) / 2.0));\n    \n    vec4 col = vec4(0.0);\n    col = mix(col, LIGHT_WIRE_COLOR, wire1 - wire2);\n    col = mix(col, lightSwitch1, max(max(bulb1, bulb3), bulb5));\n    col = mix(col, lightSwitch2, max(max(bulb2, bulb4), bulb6));\n    return col;\n}\n\nvec4 Snow(vec2 uv)\n{\n    vec4 col = vec4(0.0);\n    \n    col += Snowfall(uv, iTime + 0.0, 0.4, 0.02);\n    col += Snowfall(uv, iTime + 1.0, 0.3, 0.035);\n    col += Snowfall(uv, iTime + 2.0, 0.2, 0.02);\n    col += Snowfall(uv, iTime + 3.0, 0.2, 0.025);\n    col += Snowfall(uv, iTime + 4.0, 0.4, 0.03);\n    col += Snowfall(uv, iTime + 5.0, 0.2, 0.03);\n    col += Snowfall(uv, iTime + 6.0, 0.3, 0.02);\n    col += Snowfall(uv, iTime + 7.0, 0.2, 0.02);\n    col += Snowfall(uv, iTime + 8.0, 0.2, 0.035);\n    col += Snowfall(uv, iTime + 9.0, 0.4, 0.03);    \n    \n    return col;\n}\n\nvec4 Scene(vec2 uv)\n{\n    vec4 col = vec4(0.0);\n    \n    vec4 env = Env(uv);\n    vec4 snowman = Snowman(uv);\n    vec4 tree = Tree(uv);\n    vec4 lights = Lights(uv);\n    vec4 snow = Snow(uv);\n    \n    col = mix(col, env, env.w);\n    col = mix(col, snowman, snowman.w);\n    col = mix(col, tree, tree.w);\n    col = mix(col, lights, lights.w);\n    col = mix(col, snow, snow.w);\n    \n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2.0 * fragCoord - iResolution.xy) / iResolution.y;\n\n    vec4 scene = Scene(uv);\n\n    vec4 col = mix(BG_COLOR, BG_FADE_COLOR, uv.y); \n    col = mix(col, scene, scene.w);\n    \n    fragColor = col;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define PI 3.1415\n#define TEMPO 2.0\n\nstruct Note\n{\n    float frequency;\n    float offset;\n    float duration;\n};\nconst float C4 = 261.63;\nconst float D4 = 293.66;\nconst float E4 = 329.63;\nconst float G4 = 392.0;\nconst float A4 = 440.00;\nconst float B4 = 493.88;\nconst float C5 = 523.25;\nconst float D5 = 587.33;\nconst float E5 = 659.25;\nconst float A5 = 880.00;\nconst float B5 = 987.77;\n\nconst float WHOLE_NOTE = 1.0;\nconst float HALF_NOTE = 1.0 / 2.0;\nconst float QUARTER_NOTE = 1.0 / 4.0;\nconst float EIGHTH_NOTE = 1.0 / 8.0;\n\nconst Note[] jingleBells = Note[](\nNote(D4, 0.0 / TEMPO, QUARTER_NOTE), \nNote(B4, 1.0 / TEMPO, QUARTER_NOTE), \nNote(A4, 2.0 / TEMPO, QUARTER_NOTE), \nNote(G4, 3.0 / TEMPO, QUARTER_NOTE),\nNote(D4, 4.0 / TEMPO, HALF_NOTE + QUARTER_NOTE), \nNote(D4, 7.0 / TEMPO, EIGHTH_NOTE),  \nNote(D4, 7.5 / TEMPO, EIGHTH_NOTE),\nNote(D4, 8.0 / TEMPO, QUARTER_NOTE), \nNote(B4, 9.0 / TEMPO, QUARTER_NOTE), \nNote(A4, 10.0 / TEMPO, QUARTER_NOTE), \nNote(G4, 11.0 / TEMPO, QUARTER_NOTE),\nNote(E4, 12.0 / TEMPO, WHOLE_NOTE),\nNote(E4, 16.0 / TEMPO, QUARTER_NOTE),\nNote(C5, 17.0 / TEMPO, QUARTER_NOTE), \nNote(B4, 18.0 / TEMPO, QUARTER_NOTE),\nNote(A4, 19.0 / TEMPO, QUARTER_NOTE),\nNote(D5, 20.0 / TEMPO, QUARTER_NOTE),\nNote(D5, 21.0 / TEMPO, QUARTER_NOTE), \nNote(D5, 22.0 / TEMPO, QUARTER_NOTE),\nNote(D5, 23.0 / TEMPO, QUARTER_NOTE),\nNote(E5, 24.0 / TEMPO, QUARTER_NOTE),\nNote(D5, 25.0 / TEMPO, QUARTER_NOTE), \nNote(C5, 26.0 / TEMPO, QUARTER_NOTE),\nNote(A4, 27.0 / TEMPO, QUARTER_NOTE),\nNote(G4, 28.0 / TEMPO, HALF_NOTE),\nNote(B4, 32.0 / TEMPO, QUARTER_NOTE), \nNote(B4, 33.0 / TEMPO, QUARTER_NOTE),\nNote(B4, 34.0 / TEMPO, HALF_NOTE),\nNote(B4, 36.0 / TEMPO, QUARTER_NOTE), \nNote(B4, 37.0 / TEMPO, QUARTER_NOTE),\nNote(B4, 38.0 / TEMPO, HALF_NOTE),\nNote(B4, 40.0 / TEMPO, QUARTER_NOTE),\nNote(D5, 41.0 / TEMPO, QUARTER_NOTE),\nNote(G4, 42.0 / TEMPO, QUARTER_NOTE + EIGHTH_NOTE), \nNote(A4, 43.5 / TEMPO, EIGHTH_NOTE),\nNote(B4, 44.0 / TEMPO, WHOLE_NOTE),\nNote(C5, 48.0 / TEMPO, QUARTER_NOTE),\nNote(C5, 49.0 / TEMPO, QUARTER_NOTE), \nNote(C5, 50.0 / TEMPO, QUARTER_NOTE + EIGHTH_NOTE),\nNote(C5, 51.5 / TEMPO, EIGHTH_NOTE),\nNote(C5, 52.0 / TEMPO, QUARTER_NOTE),\nNote(B4, 53.0 / TEMPO, QUARTER_NOTE),\nNote(B4, 54.0 / TEMPO, QUARTER_NOTE), \nNote(B4, 55.0 / TEMPO, EIGHTH_NOTE),\nNote(B4, 55.5 / TEMPO, EIGHTH_NOTE),\nNote(B4, 56.0 / TEMPO, QUARTER_NOTE),\nNote(A4, 57.0 / TEMPO, QUARTER_NOTE), \nNote(A4, 58.0 / TEMPO, QUARTER_NOTE),\nNote(B4, 59.0 / TEMPO, QUARTER_NOTE),\nNote(A4, 60.0 / TEMPO, HALF_NOTE),\nNote(D5, 62.0 / TEMPO, HALF_NOTE),\nNote(B4, 64.0 / TEMPO, QUARTER_NOTE), \nNote(B4, 65.0 / TEMPO, QUARTER_NOTE),\nNote(B4, 66.0 / TEMPO, HALF_NOTE),\nNote(B4, 68.0 / TEMPO, QUARTER_NOTE), \nNote(B4, 69.0 / TEMPO, QUARTER_NOTE),\nNote(B4, 70.0 / TEMPO, HALF_NOTE),\nNote(B4, 72.0 / TEMPO, QUARTER_NOTE),\nNote(D5, 73.0 / TEMPO, QUARTER_NOTE),\nNote(G4, 74.0 / TEMPO, QUARTER_NOTE + EIGHTH_NOTE), \nNote(A4, 75.5 / TEMPO, EIGHTH_NOTE),\nNote(B4, 76.0 / TEMPO, WHOLE_NOTE),\nNote(C5, 80.0 / TEMPO, QUARTER_NOTE),\nNote(C5, 81.0 / TEMPO, QUARTER_NOTE), \nNote(C5, 82.0 / TEMPO, QUARTER_NOTE + EIGHTH_NOTE),\nNote(C5, 83.5 / TEMPO, EIGHTH_NOTE),\nNote(C5, 84.0 / TEMPO, QUARTER_NOTE),\nNote(B4, 85.0 / TEMPO, QUARTER_NOTE),\nNote(B4, 86.0 / TEMPO, QUARTER_NOTE), \nNote(B4, 87.0 / TEMPO, EIGHTH_NOTE),\nNote(B4, 87.5 / TEMPO, EIGHTH_NOTE),\nNote(D5, 88.0 / TEMPO, QUARTER_NOTE),\nNote(D5, 89.0 / TEMPO, QUARTER_NOTE),\nNote(C5, 90.0 / TEMPO, QUARTER_NOTE), \nNote(A4, 91.0 / TEMPO, QUARTER_NOTE),\nNote(G4, 92.0 / TEMPO, WHOLE_NOTE));\n\nvec2 Instrument(Note note, float time)\n{\n    vec2 ins = 0.4 * vec2(sin(2.0 * PI * note.frequency * time) * exp(-0.3 / note.duration * (time - note.offset)));\n    ins += 0.4 * vec2(sin(2.0 * PI * note.frequency * time) * exp(-0.3 / note.duration * (time - note.offset)));\n    ins = ins * ins * ins;\n\n    return ins;\n}\n\nvec2 mainSound(int samp, float time)\n{\n    vec2 sound = vec2(0.0);\n    float t = mod(time, 52.0); \n    int i;\n    for(i = 0; i < jingleBells.length(); i++)\n    {        \n        Note note = jingleBells[i];\n        \n        if(t > note.offset)\n        {\n        \tsound += Instrument(note, t);\n        }\n    }\n    i = 0;\n    \n    return sound;\n}","name":"Sound","description":"","type":"sound"}]}