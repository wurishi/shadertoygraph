{"ver":"0.1","info":{"id":"llscDN","date":"1504931635","viewed":666,"name":"my_starfft","username":"xdaimon","description":"Star shaped visualization.\nSilly code.","likes":2,"published":3,"flags":32,"usePreview":0,"tags":["fft"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0, fragCoord/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sXGzn","filepath":"/media/a/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","previewfilepath":"/media/ap/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","type":"music","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float f(float x) {\n    //x = exp(pow(x,1.2)*log(2.))-1.;\n\treturn texture(iChannel0, vec2(x,.25)).r;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat time = iTime/50.;\n\n\tvec2 R = iResolution.xy;\n\tvec2 p = fragCoord/R*2.-1.;\n\t\n    float aspect = R.x/R.y;\n\tp.y /= aspect;\n\tp *= 1. + fract(max(aspect, .7))/2.;\n\n\tfloat theta = atan(p.y,p.x);\n\tfloat len = length(p);\n\n\t// Make star fish\n\n\t// Set the fishies parameters\n\tfloat fish_number_legs = 10.;\n\n\t// Make the fish twirl around\n\tfloat fish_spin = time/2.;\n\n\t// Make the fish get bigger\n\tfloat fish_leg_len = .1*(.7+.7*.5);\n\n\t// Make the fish move its legs, if mouse.x==0 star fish dead\n\tfloat fish_leg_move = 0.1*sin(4.*time+len)*(2.*3.141592653589793);\n\n\t// Put the fish togeter\n\tfloat fish = fish_leg_len*sin(fish_leg_move + fish_spin + fish_number_legs*theta);\n\n\t// Make the fish jump a little\n\tfloat fish_jump = .08*.5 + f(0.001); // just a soft bump\n\n\t// Pixel distance to fish\n\tfloat fish_dist = 1.-len*(.8+fish_jump+fish);\n\n\t// Fishes swim away\n\tfloat fish_swim = time;\n\n\t// Fishes are packed fin to fin and gill to gill\n\tfloat fish_school = 2.0*abs(fract(.5*fish_dist + fish_swim)-.5);\n\n\t// Eat the fish\n\tfloat v = f(fish_school);\n    \n    vec3 color1 = vec3(0);\n\tvec3 color2 = vec3(1);\n    \n\tfragColor.rgb = mix(color2, color1, v);\n    \n    p = fragCoord/iResolution.xy;\n    vec4 Color = texture(iChannel1, p);\n    fragColor = fragColor * .3 + .7 * Color;\n}\n","name":"Buf A","description":"","type":"buffer"}]}