{"ver":"0.1","info":{"id":"DsfSR8","date":"1668466517","viewed":67,"name":"Paint pendulum (fast)","username":"vegardno","description":"asdf","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["asdf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texelFetch(iChannel0, ivec2(fragCoord), 0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// https://iquilezles.org/articles/distfunctions2d/\nfloat sdSegment( in vec2 p, in vec2 a, in vec2 b )\n{\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\nvec3 hsv2rgb2(vec3 c, float k) {\n    return smoothstep(0. + k, 1. - k,\n                      .5 + .5 * cos((vec3(c.x) + vec3(3., 2., 1.) / 3.) * radians(360.)));\n}\n\nvec2 pos(int f)\n{\n    float t = float(f) / 10.;\n    vec2 pos = vec2(cos(t) + .3 * sin(t), sin(t)) * 2. / exp(.0003 * float(f));\n    \n    float t2 = float(f) / 709. * 2.;\n    pos = mat2(cos(t2), sin(t2), -sin(t2), cos(t2)) * pos;\n    \n    return pos;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 bg = vec3(0.);\n    if (iFrame > 1)\n        bg = texelFetch(iChannel0, ivec2(fragCoord), 0).rgb;\n\n    vec2 uv = (2. * fragCoord - iResolution.xy) / iResolution.y;\n\n    float d = 1e10;\n    for (int i = 0; i < 10; ++i) {\n        vec2 pos0 = pos(10 * iFrame + i);\n        vec2 pos1 = pos(10 * iFrame + i + 1);\n\n        d = min(d, sdSegment(uv, pos0, pos1) - .005 / exp(.0001 * float(iFrame)));\n    }\n\n    float a = smoothstep(-1.5, 1.5, d * iResolution.y);\n\n    fragColor = vec4(mix(bg, hsv2rgb2(vec3(float(10 * iFrame) / 10000., 0, 0), .07), 1. - a), 1.);\n}","name":"Buffer A","description":"","type":"buffer"}]}