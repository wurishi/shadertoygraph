{"ver":"0.1","info":{"id":"ctV3Ww","date":"1684122778","viewed":81,"name":"GoldenWarpingOfPnoise","username":"CycloneFox","description":"small rest","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["ch5"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.14159265359;\n\n// hash\nuvec3 k = uvec3(0x456789abu, 0x6789ab45u, 0x89ab4567u);\nuvec3 u = uvec3(1, 2, 3);\nconst uint UINT_MAX = 0xffffffffu;\nuvec3 uhash33(uvec3 n)\n{\n    n ^= (n.yzx << u);\n    n ^= (n.yzx >> u);\n    n *= k;\n    n ^= (n.yzx << u);\n    return n * k;\n}\n\nfloat GTable3(vec3 Lattice, vec3 p)\n{\n    uvec3 n = floatBitsToUint(Lattice);\n    uint idx = uhash33(n).x >> 28;\n    float u = idx < 8u ? p.x : p.y;\n    float v = idx < 4u ? p.y : idx == 12u || idx == 14u ? p.x : p.z;\n    return ((idx & 1u) == 0u ? u : -u) + ((idx & 2u) == 0u ? v : -v);\n}\n\nfloat PNoise31(vec3 p)\n{\n    vec3 n = floor(p);\n    vec3 f = fract(p);\n    float[8] v;\n    for(int i = 0; i < 2; ++i)\n    {\n        for(int j = 0; j < 2; ++j)\n        {\n            for(int k = 0; k < 2; ++k)\n            {\n                v[i + 2 * j + 4 * k] = GTable3(n + vec3(i, j, k), f - vec3(i, j, k)) * 0.70710678;\n            }\n        }\n    }\n\n    f = f * f * f * (10.0 - 15.0 * f + 6.0 * f * f);\n    float[2] w;\n    for(int i = 0; i < 2; ++i)\n    {\n        w[i] = mix(mix(v[4 * i], v[4 * i + 1], f[0]), mix(v[4 * i + 2], v[4 * i + 3], f[0]), f[1]);\n    }\n\n    return 0.5 * mix(w[0], w[1], f[2]) + 0.5;\n}\n\nfloat Warp31(vec3 p, float g)\n{\n    float val = 0.f;\n    for(int i = 0; i < 4; ++i)\n    {\n        val = PNoise31(p + g * vec3(cos(2.0 * PI * val), sin(2.0 * PI * val), cos(2.0 * PI * val)));\n    }\n\n    return val;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 Pos = 8.f * fragCoord / min(iResolution.x, iResolution.y);\n\n    float WarpedVal = Warp31(vec3(Pos, 8.f * sin(0.25f * iTime)), 1.25f);\n    fragColor.rgb = vec3(\n        smoothstep(0.3f, 0.7f, WarpedVal), \n        smoothstep(0.32f, 0.7f, WarpedVal), \n        smoothstep(0.45f, 0.8f, WarpedVal));\n    fragColor.a = 1.f;\n}","name":"Image","description":"","type":"image"}]}