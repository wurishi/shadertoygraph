{"ver":"0.1","info":{"id":"WsGfRG","date":"1607344404","viewed":628,"name":"Inside the Neural Network","username":"Kamoshika","description":"This is my first post to Shadertoy.\nI layered multiple voronoi borders to create a three-dimensional look.","likes":32,"published":1,"flags":0,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// I made this while streaming.\n// Watch YouTube video!!\n// https://www.youtube.com/watch?v=wI4UBRH6ibM\n\n#define rand(z) fract(sin(z)*1352.2342)\n\nconst float pi2 = acos(-1.)*2.;\n\nmat2 rotate(float a) {\n\treturn mat2(cos(a), -sin(a), sin(a), cos(a));\n}\n\nvec2 rand2f(vec2 co) {\n\tvec2 z = vec2(dot(co, vec2(1.1521, 1.4322)), dot(co, vec2(1.2341, 1.3251)));\n\treturn rand(z);\n}\n\n// Reference:\n// https://iquilezles.org/articles/voronoilines\nfloat voronoiBorder(vec2 x, float seed, float phase) {\n\tvec2 xi = floor(x);\n\tvec2 xf = fract(x);\n\t\n\tvec2 res = vec2(10.);\n\tfor(int i=-1; i<=1; i++) {\n\t\tfor(int j=-1; j<=1; j++) {\n\t\t\tvec2 b = vec2(i,j);\n\t\t\tvec2 rv = rand2f(xi+b+seed*1.3412);\n\t\t\trv = sin(rv*pi2 + phase)*.5+.5;\n\t\t\trv *= .75;\n\t\t\tvec2 r = b+rv - xf;\n\t\t\tfloat d = dot(r,r);\n\t\t\t\n\t\t\tif(d<res.x) {\n\t\t\t\tres.y = res.x;\n\t\t\t\tres.x = d;\n\t\t\t} else if(d<res.y) {\n\t\t\t\tres.y = d;\n\t\t\t}\n\t\t}\n\t}\n    \n\tres = sqrt(res);\n\treturn 1.-smoothstep(-.1, .1, res.y-res.x);\n}\n\nfloat smoothFloor(float x, float s) {\n\treturn floor(x-.5)+smoothstep(.5-s, .5+s, fract(x-.5));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 p = (fragCoord*2.-iResolution.xy) / min(iResolution.x, iResolution.y);\n\tvec3 color = vec3(0);\n\t\n\tp *= rotate(iTime*.2);\n\tfloat cPos = iTime;\n\tfloat id = ceil(cPos);\n\t\n\tfor(float i=0.; i<20.; i++) {\n\t\tfloat L = 1.-fract(cPos)+i;\n\t\tfloat a = atan(.003, L)*500.;\n\t\tfloat r = rand(id)*pi2;\n\t\tfloat phase = iTime + r;\n\t\tphase = smoothFloor(phase, .2);\n\t\tvec2 rv = rand2f(vec2(id, id*1.31223)) * 10.;\n        \n        // Reference:\n        // https://www.shadertoy.com/view/4sl3Dr\n\t\tfloat v1 = voronoiBorder(p/a+rv, id, phase);\n\t\tfloat v2 = voronoiBorder(p/a*.5+iTime*vec2(cos(r),sin(r)), id, phase);\n\t\tfloat v = pow(v1*v2, 3.) * 200.;\n        \n        color += (v1*vec3(.9, .4, 0.) + v) * exp(-L*L*0.001);\n\t\tid++;\n\t}\n    \n\tfragColor = vec4(color, 1.);\n}","name":"Image","description":"","type":"image"}]}