{"ver":"0.1","info":{"id":"dscGD7","date":"1677353670","viewed":162,"name":"gaussian sobel","username":"lalaoopybee","description":"gaussian weights, 0 in middle cols and rows, flipped sign bit based on position in kernel.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["sobel","edgedetection","gaussian"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415927\n#define SQRT2PI 2.5066283\n\n#define K 3\n#define SIGMA 1.2\n\n#define GRAY(a) dot(a, vec3(.299, .587, .114))\n\n//adapted from IÃ±igo Quiles\n//https://www.shadertoy.com/view/MsS3Wc\nvec3 hue2rgb(float h){\n    vec3 rgb = clamp(abs(mod(h*6.+vec3(0.,4.,2.),6.)-3.)-1.,0.,1.);\n    return rgb*rgb*(3.-2.*rgb);\n}\n\nfloat gaussian(float x){\n    return (1./(SQRT2PI*SIGMA))*exp(-(x*x)/(2.*SIGMA*SIGMA));\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec2 uv=fragCoord/iResolution.xy;\n    \n    vec2 sum=vec2(0.);\n    for(int i=0;i<2*K+1;i++){\n        for(int j=0;j<2*K+1;j++){\n            if(i==K||j==K) continue;\n            bool xSign=i>K, ySign=j>K;\n            \n            vec2 offset=vec2(i-K, j-K);\n            float weight=gaussian(length(offset));\n            \n            vec2 offsetUV=offset/iResolution.xy;\n            float val=GRAY(texture(iChannel0, uv+offsetUV).rgb);\n            sum+=vec2(xSign?1.:-1., ySign?1.:-1.)*weight*val;\n        }\n    }\n    float angle=atan(sum.y, sum.x)+PI;\n    float diff=length(sum)*5.;\n    \n    fragColor=vec4(hue2rgb(angle/(2.*PI))*diff, 1.);\n}","name":"Image","description":"","type":"image"}]}