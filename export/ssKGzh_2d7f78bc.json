{"ver":"0.1","info":{"id":"ssKGzh","date":"1631138623","viewed":361,"name":"VOXELTRACER","username":"ENDESGA","description":"(control camera with mouse!)","likes":7,"published":3,"flags":0,"usePreview":0,"tags":["voxel"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define R iResolution\n#define T ( iTime * .5 )\n#define M iMouse\n\n#define dmax 300.\n#define loop_n 4\n\n#define cube_h sqrt( 3. )\n#define cube_h2 cube_h * 2.\n\nfloat smin( float a, float b )\n{\n\tfloat r = 10.;\n\tfloat h = max( r - abs( a - b ), 0. ) / 2.;\n\tvec2 u = max( r - vec2( a, b ), vec2( 0. ) );\n\treturn ( ( max( r, min( a, b ) ) - length( u ) ) + ( min( a, b ) - h * h / r ) ) * .5;\n}\n\nfloat sub( float d1, float d2 )\n{\n\treturn max( -d1, d2 );\n}\n\nvec3 op_rep_lim( vec3 p, float s, vec3 lima, vec3 limb )\n{\n\treturn p - s * clamp( round( p / s ), lima, limb );\n}\n\nfloat map( vec3 p )\n{\n\tvec3 q = op_rep_lim( p, sin( T ) * 5. + 20., vec3( -4. ), vec3( 4. ) );\n\treturn sub( length( q ) - ( 8. - cos( T * 3. ) * 3. ), min(\n\t\tmin(\n\t\t\tmin( length( p + vec3( 20. ) ) - 40., length( p + vec3( -20., 20., 20. ) ) - 40. ),\n\t\t\tmin( length( p + vec3( 20., -20., 20. ) ) - 40., length( p + vec3( 20., 20., -20. ) ) - 40. ) ),\n\t\tmin(\n\t\t\tmin( length( p + vec3( -20., -20., 20. ) ) - 40., length( p + vec3( 20., -20., -20. ) ) - 40. ),\n\t\t\tmin( length( p + vec3( -20., 20., -20. ) ) - 40., length( p + vec3( -20., -20., -20. ) ) - 40. ) ) ) );\n}\n\nvoid mainImage( out vec4 o, in vec2 i )\n{\n\tvec2 uv = ( i / R.xy - .5 );\n\tuv.x /= R.y / R.x;\n\n\tvec3 ro = vec3( 100. * sin( M.x * .00777 ), 100. * cos( M.x * .00777 ), ( M.y / R.y - .5 ) * -100. );\n\tvec3 rs = ro;\n\tvec3 rl = vec3( 0., 0., ( M.y / R.y - .5 ) * 50. );\n\tvec3 n, trs, ww = normalize( rl - ro ), uu = normalize( cross( ww, vec3( 0., 0., 1. ) ) );\n\tvec3 rd = normalize( uv.x * uu + uv.y * cross( uu, ww ) + ww );\n\n\tbool b;\n\tfloat t, d;\n\n\tfor( int j = 0; j <= loop_n; j++ )\n\t{\n\t\tb = false;\n\t\ttrs = rs;\n\t\tt = 0.;\n\n\t\tfor( int i = 0; i <= loop_n * loop_n; i++ )\n\t\t{\n\t\t\trs = trs + rd * t;\n\t\t\td = map( rs );\n\t\t\tif( d <= -cube_h2 || d > dmax ) break;\n\t\t\tt += d;\n\t\t}\n\t\tif( d > dmax ) break;\n\n\t\ttrs = rs;\n\t\tvec3 c = floor( rs );\n\t\tvec3 ts = ( c + max( vec3( 0. ), sign( rd ) ) - rs ) / rd;\n\n\t\tfor( int i = 0; i <= loop_n * loop_n * loop_n; i++ )\n\t\t{\n\t\t\tn = step( ts, ts.yzx ) * step( ts, ts.zxy );\n\t\t\tc += sign( rd ) * n;\n\t\t\td = map( c );\n\t\t\tif( d <= -cube_h )\n\t\t\t{\n\t\t\t\trs = trs + rd * min( ts.x, min( ts.y, ts.z ) );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tts += sign( rd ) / rd * n;\n\t\t}\n\t\trs = trs + rd * min( ts.x, min( ts.y, ts.z ) );\n\t}\n\n\tif( d > dmax )\n\t{\n\t\to = vec4( 0. );\n\t}\n\telse\n\t{\n\t\tvec3 c = vec3( 5. + dot( n * -sign( rd ), vec3( .5, 1., .5 ) ) ) / ( distance( rs, ro ) * .5 );\n\t\tc = mix( 12.92 * c, 1.055 * pow( c, vec3( 1. / 2.4 ) ) - .055, step( vec3( 0.0031308 ), c ) );\n\t\to = vec4( clamp( c, vec3( 0. ), vec3( 1. ) ), 1. );\n\t}\n}\n","name":"Image","description":"","type":"image"}]}