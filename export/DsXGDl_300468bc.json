{"ver":"0.1","info":{"id":"DsXGDl","date":"1666964854","viewed":288,"name":"Melty LOD Matcap shenanigans","username":"Trixelized","description":"aaaaaaaaaaaa","likes":14,"published":3,"flags":96,"usePreview":0,"tags":["aaaaa"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    vec4 c = texture(iChannel0, uv);\n    \n    vec3 off = vec3(1.0 / iResolution.x, 1.0 / iResolution.y, 0.0);\n    vec3 normal = normalize(vec3(\n        texture(iChannel0, uv + off.xz).r - texture(iChannel0, uv - off.xz).r,\n        texture(iChannel0, uv + off.zy).r - texture(iChannel0, uv - off.zy).r,\n        pow(c.r, 5.0)) + 0.005);\n    \n    vec3 w = texture(iChannel1, 0.5 + (0.5 * normal.xy)).rgb;\n    \n    // highlighting\n    w += pow(abs(dot(normal, normalize(vec3(0.0, -0.45, 1.0)))), 30.0);\n   \n    \n    fragColor = vec4(mix(vec3(w), vec3(0.0), c.b), 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"ltSSWh","filepath":"https://soundcloud.com/wharfwhit/elbows-evidently-mix","previewfilepath":"https://soundcloud.com/wharfwhit/elbows-evidently-mix","type":"musicstream","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"const float spread = 32.0;\nconst float gravity = 0.1;\n\nconst float SMOKELOD1 = 1.25;\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    vec2 pixel_uv = fragCoord;\n    \n    vec3 buffer = texture(iChannel0, uv).rgb;\n    \n    vec3 off = vec3(1.0 / iResolution.x, 1.0 / iResolution.y, 0.0);\n    \n    vec3 normal = normalize(vec3(\n        texture(iChannel0, uv + off.xz, SMOKELOD1).r - texture(iChannel0, uv - off.xz, SMOKELOD1).r,\n        texture(iChannel0, uv + off.zy, SMOKELOD1).r - texture(iChannel0, uv - off.zy, SMOKELOD1).r,\n        1.0));\n    \n    \n    normal = normalize(normal + vec3(0.0, gravity, 0.0));\n    \n    float turbulence = texture(iChannel1, iTime * vec2(0.001, 0.002) + uv * 0.05, SMOKELOD1).r;\n    \n    float val = texture(iChannel0, uv + ((off.xy * normal.xy) * spread * turbulence), SMOKELOD1).r;\n    \n    val = val * 0.98;\n    \n    // input\n    vec4 winput = texture(iChannel2, uv, SMOKELOD1);\n    float src = (winput.r + winput.g + winput.b);\n    src = step(0.3, distance(winput.rgb, vec3(0.25, 0.65, 0.15)));\n    val = max(val, src);\n    \n    fragColor = vec4(vec3(clamp(val, 0.0, 1.0), src, mix(buffer.b, buffer.g, 0.25)), 1.0);\n    \n}\n","name":"Buffer A","description":"","type":"buffer"}]}