{"ver":"0.1","info":{"id":"mlBczd","date":"1692174198","viewed":139,"name":"Hex coord transform 2","username":"ChunderFPV","description":"A fancier version with point flow.","likes":14,"published":1,"flags":0,"usePreview":0,"tags":["grid","flow","points","transform","hexagonal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define H(a) (cos(radians(vec3(-30, 60, 120))+(a)*6.2832)*.5+.5)  // hue\n#define HC(u) vec3(u.x/.5, u.x + u.y/.577, u.x - u.y/.577)/2.  // hex coords\n#define QP(v) P(h.v, 2., t, R.y/9e2)*.5  // quick points\n\n// points: xy, overlap, value, size\nfloat P(vec2 u, float l, float t, float r)\n{\n    float i = 0., f = i, c = i;\n    vec2 w = fwidth(u), p;\n    for (; i++<l;)\n    {\n        p.x = round((u.x-i)/l)*l+i; // skip i rows\n        f = mod(trunc(p.x)*t, 1.);  // multiply ints with value\n        p.y = round(u.y-f)+f;       // set as y\n        c = max(c, r/length((u-p)/w));\n    }\n    c = clamp(c, 0., 1.); // limit brightness\n    c /= max(1., abs(u.x)); // darken\n    return c;\n}\n\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    float t = iTime/30.,\n          s = 5.+sin(t*3.1416)*2.; // scale\n    vec2 R = iResolution.xy,\n         m = (iMouse.xy - R/2.)/R.y,\n         u = (U - R/2.)/R.y*s;\n    if (iMouse.z < 1.) m = cos(t*3.1416 - vec2(0, 1.5708)); // circle with time\n    vec3 h = abs(HC(u)),\n         c = vec3(.15);\n    h = (h*h + h.yzx*h.yzx + h.zxy*h.zxy - 1.)/h; // transform 1\n    h += HC(m)*5.; // add mouse\n    h /= abs(h.yzx); // transform 2\n    c += QP(xy) + QP(yx) + QP(yz) + QP(zy) + QP(zx) + QP(xz); // points\n    c += H(c/length(h)+t)*c;\n    C = vec4(c*c, 1);\n}","name":"Image","description":"","type":"image"}]}