{"ver":"0.1","info":{"id":"lsGcRD","date":"1521185484","viewed":259,"name":"gravity_field_3","username":"tholzer","description":"Simplified 'gravity field 2'.\nUse mouse.x to change coloring. ","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["field","gravity"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//----------- gravity_field_3 ---------------\n\n// simplified https://www.shadertoy.com/view/4slSWN\n\n#define POINTS 20  \t\t // number of stars\n\n#define t iTime\n\nfloat hash (float i) { return 2.*fract(sin(i*7467.25)*1e5) - 1.; }\n//vec2  hash2(float i) { return vec2(hash(i),hash(i-.1)); }\nvec4  hash4(float i) { return vec4(hash(i),hash(i-.1),hash(i-.3),hash(i+.1)); }\n\t\n\nvec2 P (int i)  // position of point[i]\n{\n  vec4 c = hash4(float(i));\n  return vec2( cos(t*c.x-c.z) +0.5*cos(2.765*t*c.y+c.w),\n\t\t\t ( sin(t*c.y-c.w) +0.5*sin(1.893*t*c.x+c.z)) / 1.5);\n}\n\nvoid mainImage (out vec4 fragColor, in vec2 fragCoord)\n{\n  vec2 R = iResolution.xy;\n  vec2 uv = (2.*fragCoord - R) / R.y;\n  vec2 mp = iMouse.xy / R;\n    \n  float my = 0.5*pow(.5*(1.-cos(0.1*t)),3.0);\n  float fMODE = (1.0-cos(3.1415*mp.x))/2.;\n\n  vec2 V = vec2(0.);\n  for (int i=1; i<POINTS; i++)\n  {\t\n    vec2 d = P(i) - uv;  // distance point->pixel\n\tV +=  d / dot(d,d);  // gravity force field\n  }\n  float c = (length(V)* 1./(9.*float(POINTS)))*(2.+210.*fMODE);\n  int MODE = int(3.*mp.x);\n  if (MODE==0) fragColor = vec4(.2*c)+smoothstep(.05,.0,abs(c-5.*my))*vec4(1,0,0,0);\n  if (MODE==1) fragColor = vec4(.5+.5*sin(2.*c));\n  if (MODE==2) fragColor = vec4(sin(c),sin(c/2.),sin(c/4.),1.);\n}","name":"Image","description":"","type":"image"}]}