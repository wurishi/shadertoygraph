{"ver":"0.1","info":{"id":"4lcfR2","date":"1540209727","viewed":129,"name":"Well at least it looks cool","username":"wazoowazoo","description":"First i wanted to make some wave-like shader but it ended looking like this, it is my firts shader !","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["lense"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define REFRACTION 1.5 //refraction coefficient\n#define L_HEIGHT 1 //lense height\n#define CENTER vec2(0.5) //refraction center\n\nfloat func(float x, float coef) {\n  return coef * pow(x, 2.0);\n}\n\nfloat deriv(float x, float coef) {\n  return coef * 2.0 * x;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n  vec2 texCoords = fragCoord / iResolution.xy;\n  float coefficient = mod(iTime, 10.0);\n    \n  float dist = distance(CENTER, texCoords);\n\n  float derivative = deriv(dist, coefficient);\n\n  float refSize = derivative * func(dist, coefficient);\n\n  vec2 cDist;\n  cDist.x = abs(CENTER.x - texCoords.x);\n  cDist.y = abs(CENTER.y - texCoords.y);\n\n  vec2 refOffset;\n  refOffset.x = (cDist.x * (dist + refSize)) / dist - cDist.x;\n  refOffset.y = (cDist.y * (dist + refSize)) / dist - cDist.y;\n\n  if (texCoords.x < CENTER.x) {\n    refOffset.x *= -1.0;\n  }\n  if (texCoords.y < CENTER.y) {\n    refOffset.y *= -1.0;\n  }\n\n  vec4 finalPixel;\n  if (texCoords.x + refOffset.x < 0.0 || texCoords.x + refOffset.x > 1.0 || texCoords.y + refOffset.y < 0.0 || texCoords.y + refOffset.y > 1.0) {\n    finalPixel = vec4(0);\n  } else {\n    finalPixel = texture(iChannel0, texCoords + refOffset);\n  }\n\n  fragColor = finalPixel;\n}","name":"Image","description":"","type":"image"}]}