{"ver":"0.1","info":{"id":"XfdyWM","date":"1731164018","viewed":26,"name":"sponge - XfdyWM","username":"Pangolecimal","description":"sponge","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["sponge"],"hasliked":0,"parentid":"4ftyz7","parentname":"quadtree - 4ftyz7"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\nhttps://www.shadertoy.com/view/4ttSWf\n*/\n\n#define SEED 0\n#define PI 3.141592653589\n#define ITER_BASE 2.1\n//#define ITER_MAX 10\n#define ITER_MAX (floor(log(iResolution.y) / log(ITER_BASE)) - 3.0)\n\n#define rand(p)     fract(sin(dot(p, vec3(12.9898, 78.233, 3.1415))) * 43758.5453)\n#define floorv(v,m) (floor(v * m) / m)\n#define  ceilv(v,m)  (ceil(v * m) / m)\n#define roundv(v,m) (round(v * m) / m)\n\n/*\n  x1 x2\n 6  7  8\n        y2\n 3  4  5\n        y1\n 0  1  2\n \n c d e f\n 8 9 a b\n 4 5 6 7\n 0 1 2 3\n*/\n\n#define lerp(a,b,t) ((1.0-t)*a + t*b)\n#define norm(t,a,b) ((t-a)/(b-a))\n\n\n// (p.x, p.y) IN (b.x1, b.y1, b.x2, b.y2)\nvec3 render(vec2 point) {\n    vec2 p = point / 2.0 + 0.5;\n    float i = 0.0;\n    for (; i < ITER_MAX; i += 1.0) {\n        vec2 p0 = floorv(p, pow(3.0, i));\n        vec2 p1 = floorv(vec2(p.x,1.0-p.y), pow(3.0, i));\n        vec2 q0 = floorv(p, pow(3.0, i+1.0));\n        vec2 q1 = floorv(vec2(p.x,1.0-p.y), pow(3.0, i+1.0));\n        vec2 d0 = q0 - p0;\n        vec2 d1 = q1 - p1;\n        if (abs(d0.x-d0.y) < pow(0.1, i+1.0) && abs(d1.x-d1.y) < pow(0.1, i+1.0)) {\n            break;\n        }\n        //vec2 dp = (p1 - p0) * 3.0;\n        //if (dp.x > 0.9 && dp.x < 1.1 && dp.y > 0.9 && dp.y < 1.1) break;\n        //p *= 3.0;\n    }\n    \n    return vec3(i/ITER_MAX);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = (fragCoord.xy*2. - iResolution.xy) / iResolution.y;\n    if (max(abs(uv.x), abs(uv.y)) > 1.0) { fragColor.rgb=vec3(.01); return; }\n    vec3 color = render(uv);\n    fragColor.rgb = vec3(color);\n}\n\n\n\n\n\n\n\n","name":"Image","description":"","type":"image"}]}