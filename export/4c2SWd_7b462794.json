{"ver":"0.1","info":{"id":"4c2SWd","date":"1707317759","viewed":84,"name":"Collatz Dynamics","username":"Boogaloo","description":"Visualization of the escape times for various generalized Collatz functions extended to the complex plane. Most of the code is by iq, I just animated it.","likes":6,"published":1,"flags":32,"usePreview":0,"tags":["fractal","julia","collatz"],"hasliked":0,"parentid":"lssfDs","parentname":"Generalize Collatz: an+b"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"go{O=tex(C0,ivec2(I));}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec2 cadd(vec2 a,float s){return vec2(a.x+s,a.y);}\nvec2 cmul(vec2 a,vec2 b){return vec2(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x);}\nvec3 cexpj(vec2 z){return vec3(exp(-z.y),vec2(cos(z.x),sin(z.x)));}\n\nvec3 render(in vec2 I,float time)\n{\n    float a=4.*abs(sin(T*.05*abs(cos(T*.05))));\n    float b=4.*sin(T/26.*abs(cos(T/26.)));\n    vec2 ce=vec2(0.,0.);    \n    vec2 p=ce+(-R.xy+2.0*I)/R.x;\n    float e=2.0/R.x;\n    vec2 z=p;\n    bool d=false;\n    float f=0.;\n    vec2 dz=vec2(1.,0.);\n    for(int i=0;i<64;i++)\n    {\n        vec3 k=cexpj( pi*z );\n        z=(cadd((2.*a+1.)*z,2.*b)-k.x*cmul(k.yz,cadd((2.*a-1.0)*z,2.*b)))*.25;        \n        float r=length(z);\n        if(r>1e4){d=true; break;}\n        f+=1.;\n    }    \n    vec3 col=vec3(.5);\n    if(d){\n    f-=clamp((1.05+exp(-(a-3.)/(1.+a/2.)))*log(length(z)*1e-4)/log(a),0.,1.);\n    col=.5+.5*cos(f*pow(a,.9)*.1+2.5+vec3(.0,.8,1.));\n    col=clamp(col,0.,1.);}else{col=tex(C0,ivec2(I-.5)).xyz;}\n    return col;\n}\n\ngo{\n    vec3 col=vec3(0.0);\n    for(int m=0;m<2;m++)\n    for(int n=0;n<2;n++)\n    {\n        vec2 px=I+vec2(float(m),float(n))*.5;\n    \tcol+=render(px,T);    \n    }\n    col*=.25;        \n\tO=vec4(col,1.);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"go{\nif(iFrame<1){O = vec4(1.); return;}\n    O=tex(C1,ivec2(I))*.75+tex(C0,ivec2(I))*.25;\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define go void mainImage( out vec4 O, in vec2 I )\n#define pi 3.1415926\n#define R iResolution\n#define T iTime\n#define C0 iChannel0\n#define C1 iChannel1\n#define tex(x,y) texelFetch(x,y,0)","name":"Common","description":"","type":"common"}]}