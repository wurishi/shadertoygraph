{"ver":"0.1","info":{"id":"NsjcR3","date":"1643904088","viewed":66,"name":"2-3-22 3d engine","username":"JoeyTheGreat","description":"line test","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["test"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat t1 = 0.;\nfloat t2 = 0.;\nfloat camDist = 3.;\nfloat nearClip = 0.03;\nvec2 po(vec3 pos)\n{\n    float r = t1+atan(pos.y,pos.x);\n    return length(pos.xy)*vec2(cos(r),sin(r)*sin(t2))+vec2(0,pos.z*cos(t2));\n}\nfloat z(vec3 pos)\n{\n    return camDist-length(pos.xy)*cos(t2)*sin(t1+atan(pos.y,pos.x))+pos.z*sin(t2);\n}\nvec2 pp(vec3 pos)\n{\n    return po(pos)/z(pos);\n}\nfloat lineDist(vec2 a, vec2 b, vec2 c)\n{\n    float x, y;\n    if(a.x==b.x)\n    {\n        x = a.x;\n        y = clamp(a.y,b.y,c.y);\n    }\n    else\n    {\n        float m = (a.y-b.y)/(a.x-b.x);\n        x = clamp((c.x+m*(c.y-a.y+m*a.x))/(m*m+1.),min(a.x,b.x),max(a.x,b.x));\n        y = m*(x-a.x)+a.y;\n    }\n    return length(c-vec2(x,y));\n}\nfloat line(vec2 a, vec2 b, vec2 c, float inner, float outer)\n{\n    if(inner==outer)\n    {\n        if(lineDist(a,b,c)>outer) return 0.;\n        else return 1.;\n    }\n    float res = (lineDist(a,b,c)-outer)/(inner-outer);\n    if(res > 1.) return 1.;\n    if(res < 0.) return 0.;\n    return res;\n}\n\nvec3 v[8] = vec3[8](vec3(1,1,1),vec3(1,1,-1),vec3(1,-1,1),vec3(1,-1,-1),vec3(-1,1,1),vec3(-1,1,-1),vec3(-1,-1,1),vec3(-1,-1,-1));\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    t1 = iTime;\n    t2=sin(iTime)/2.;\n    vec2 pos = fragCoord/min(iResolution.x,iResolution.y)*2.-vec2(iResolution.x/iResolution.y,1);\n    \n    float col = 0.;\n    for(int i = 0; i<7; i++)\n    {\n        for(int j = i+1; j<8; j++)\n        {\n            col += line(pp(v[i]),pp(v[j]),pos,.01,.04);\n        }\n    }\n    fragColor = vec4(vec3(col),1.);\n}","name":"Image","description":"","type":"image"}]}