{"ver":"0.1","info":{"id":"4lj3Dm","date":"1429622280","viewed":465,"name":"Trixels","username":"strega","description":"Screen space trixels!","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["trixels"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 inFragCoord = fragCoord;\n    //inFragCoord.y = iResolution.y - inFragCoord.y;\n\tvec2 inUV = inFragCoord / iResolution.xy;\n    \n    float divider = cos(iTime/1.5)/2.0 + 0.5;\n    //float divider = 0.5;\n    \n    if(inUV.x > divider + 0.001)\n    {\n        float height = iResolution.x/60.0; // <---------- CHANGE ME TO CHANGE HOW BIG THE TRIXELS ARE\n        //float height = iResolution.x/(40.0+(divider*40.0));\n        float halfHeight = height*0.5;\n        float halfBase = height/sqrt(3.0);\n        float base = halfBase*2.0;\n\n        float screenX = inFragCoord.x;\n        float screenY = inFragCoord.y;    \n\n        float upSlope = height/halfBase;\n        float downSlope = -height/halfBase;\n\n        float oddRow = mod(floor(screenY/height),2.0);\n        screenX -= halfBase*oddRow;\n        \n        float oddCollumn = mod(floor(screenX/halfBase), 2.0);\n\n        float localX = mod(screenX, halfBase);\n        float localY = mod(screenY, height);\n\n        if(oddCollumn == 0.0 )\n        {\n            if(localY >= localX*upSlope)\n            {\n                screenX -= halfBase;\n            }\n        }\n        else\n        {\n            if(localY <= height+localX*downSlope)\n            {\n                screenX -= halfBase;\n            }\n        }\n        \n        \n        float startX = floor(screenX/halfBase)*halfBase;\n        float startY = floor(screenY/height)*height;\n        vec4 blend = vec4(0.0,0.0,0.0,0.0);\n        for(float x = 0.0; x < 3.0; x += 1.0)\n        {\n            for(float y = 0.0; y < 3.0; y += 1.0)\n            {\n                vec2 screenPos = vec2(startX+x*halfBase,startY+y*halfHeight);\n                vec2 uv = screenPos / iResolution.xy;\n                //uv.x -= 0.5;\n                //blend += vec4(uv,0.5+0.5*sin(iTime),1.0);\n                blend += texture(iChannel0, uv);\n            }\n        }\n        fragColor = (blend / 9.0);\n\t\t\n        /*\n        float startX = floor(screenX/base)*base + halfBase;\n        float startY = floor(screenY/height)*height + halfHeight;\n        vec2 screenPos = vec2(startX,startY);\n        vec2 uv = screenPos / iResolution.xy;\n        uv.x -= 0.5;\n        //fragColor = vec4(uv,0.5+0.5*sin(iTime),1.0);\n        fragColor = texture(iChannel0, uv);\n\t\t*/\n    }\n    else if(inUV.x < divider)\n    {\n        //fragColor = vec4(inUV,0.5+0.5*sin(iTime),1.0);\n        fragColor = texture(iChannel0, inUV);\n    }\n}","name":"","description":"","type":"image"}]}