{"ver":"0.1","info":{"id":"4l2fDy","date":"1517062071","viewed":169,"name":"EYE","username":"Hoyong","description":"A simple eye","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d","beginner","eye"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.141592653\n\nvec4 rect(vec2 uv, vec2 leftBottom, vec2 rightTop, vec3 col)\n{\n    if(uv.x <= rightTop.x && uv.y <= rightTop.y)\n    {\n    \tif(uv.x >= leftBottom.x && uv.y >= leftBottom.y)\n    \t{\n        \treturn vec4(col,1.0);\n        }\n    }else{return vec4(.0);}\n}\n\nvec4 Circle( vec2 uv, vec2 pos, float radius, vec3 col)\n{\n    return vec4(col,step(length(uv - pos), radius)); // 1~0\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.y;\n    float xMax = iResolution.x / iResolution.y;\n\n    vec4 final;\n    final = vec4(uv,0.5+0.5*sin(iTime),1.0);\n\n    float eyelid_spd = 4.5;\n    float eyeballDir = PI * 2.0 * sin(iTime*0.25);\n    vec2 eye_center = vec2(xMax*0.5,0.5);\n    vec2 eyeballPos = vec2(cos(eyeballDir), sin(eyeballDir)) * 0.1;\n    \n    float LightRad = 0.8;\n    vec4 Light = Circle( uv, eye_center, LightRad, vec3(1.0));\n    Light.a *= 1.0 - length( uv - eye_center )/LightRad;\n    \n    final.xyz = mix(final.xyz, Light.xyz, Light.a);\n    \n    float detail = xMax/30.0;\n    for ( float i = 0.0; i <= xMax; i += detail )\n    {\n        float WIDTH = detail;\n        float HEIGHT = sin( iTime*eyelid_spd + abs(eye_center.x-i))* 0.25*(eye_center.x-abs((eye_center.x)-i));\n        \n        vec2 Pos = vec2(i,0.5);\n        vec2 LB = Pos - vec2(WIDTH,HEIGHT);\n        vec2 RT = Pos + vec2(WIDTH,HEIGHT);\n        \n        vec4 rectangle = rect(uv,LB,RT,vec3(1.0));\n        vec4 circle = Circle(uv,eye_center+eyeballPos,0.25,vec3(0.5));\n\t\tvec4 inner_circle = Circle(uv,eye_center+eyeballPos*1.25,0.08+clamp( (1.0 + cos(iTime*0.75)) * 0.5, 0.0, 1.0 )*0.1,vec3(0.3));\n        \n        circle.xyz = mix(circle.xyz,inner_circle.xyz,inner_circle.a);\n       \trectangle.xyz = mix(rectangle.xyz,circle.xyz,circle.a);\n        final.xyz = mix(final.xyz,rectangle.xyz,rectangle.a);\n    }\n    \n\tfragColor = final;\n}","name":"Image","description":"","type":"image"}]}