{"ver":"0.1","info":{"id":"DtS3zc","date":"1673597982","viewed":141,"name":"copysignf impl","username":"shaofun","description":"I don't want 0 because I'm always unsure what happens when I divide by 0","likes":2,"published":3,"flags":0,"usePreview":0,"tags":["sign","copysignf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float copysignf(float x, float s) {\n    uint uabs = floatBitsToUint(x) & 0x7fffffffU;\n    uint usig = floatBitsToUint(s) & 0x80000000U;\n    return uintBitsToFloat(uabs | usig);\n}\n\n// given by https://www.shadertoy.com/user/mla\nfloat mulsignf(float x, float s) {\n    uint u = floatBitsToUint(s) & 0x80000000U;\n    u ^= floatBitsToUint(x);\n    return uintBitsToFloat(u);\n}\n\nfloat signed1(float x) {\n    return copysignf(1.0, x);\n}\n\nfloat signed2(float x) {\n    return x >= 0.0 ? 1.0 : -1.0;\n}\n\nfloat signed3(float x) {\n    return sign(sign(x) + 0.5);\n}\n\nfloat signed4(float x) {\n    return float(x >= 0.0) - float(x < 0.0);\n}\n\nfloat signed5(float x) {\n    float t = float(x >= 0.0);\n    return float(t + t - 1.0);\n}\n\nfloat signed6(float x) {\n    uint ix = (floatBitsToUint(x) & 0x80000000U);\n    ix |= 0x3f800000U;\n    return uintBitsToFloat(ix);\n}\n\nfloat signed7(float x) {\n    return mulsignf(1.0, x);\n}\n\nfloat run(float x) {\n    return float(signed7(x - 0.5) == sign(sin(iTime * 5.0)));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = fragCoord / iResolution.xy;\n    \n    vec3 col;\n    \n    uv -= 0.5;\n    uv *= 5.0;\n    col = vec3(run(max(floor(abs(uv.x)), floor(abs(uv.y)))));\n\n    fragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}