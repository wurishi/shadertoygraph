{"ver":"0.1","info":{"id":"MdlyDH","date":"1488119683","viewed":991,"name":"CGA Palette Swapper","username":"Heavybrush","description":"A CGA palette swapper + gameboy bonus + grayscale bonus","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["gameboy","cga","4colors","2bit","gamemakerstudio","gamemaker","paletteswapper","theeternalcastle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//   ▄████████    ▄██████▄     ▄████████ \n//  ███    ███   ███    ███   ███    ███ \n//  ███    █▀    ███    █▀    ███    ███ \n//  ███         ▄███          ███    ███ \n//  ███        ▀▀███ ████▄  ▀███████████ \n//  ███    █▄    ███    ███   ███    ███ \n//  ███    ███   ███    ███   ███    ███ \n//  ████████▀    ████████▀    ███    █▀  \n// \n\n/*\n\n////only for game maker studio////\n\nvarying vec2 v_vTexcoord;\nvarying vec4 v_vColour;\n\nvarying vec2 fragCoord;\n//you have to put varying vec2 fragCoord also in the vertex shader\n//after write in the last row of the local scope of the vertex shader: fragCoord = in_Position.xy\n\nuniform vec2 iResolution;\nuniform float iTime;\n\n//palette 0 is not cga but gameboy, I put it as bonus\nuniform int palette;\nuniform float gamma;\n\n*/\n\n// rgb to float\n// rgb to float = rgb / 255\n\n// 0 = 0.0\n// 85 = 0.333\n// 170 = 0.666\n// 255 = 1.0\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    \n    vec3 c = vec3(0.0);\n    float alpha = 1.0;\n    \n    //only for shadertoy\n    int palette = 2; //the number between 0 and 6 change palette\n    float gamma = 1.5; //the gamma change the threshold of the palette swapper\n    \n    //c = texture2D(gm_BaseTexture,uv).rgb;\n    c = texture(iChannel0,uv).rgb;\n    \n    c.r = pow(abs(c.r),gamma);\n    c.g = pow(abs(c.g),gamma);\n    c.b = pow(abs(c.b),gamma);\n    \n    vec3 col1 = vec3(0.0);\n    vec3 col2 = vec3(0.0);\n    vec3 col3 = vec3(0.0);\n    vec3 col4 = vec3(0.0);\n    \n    if(palette == 0) {\n        col1 = vec3(0.612,0.725,0.086);\n        col2 = vec3(0.549,0.667,0.078);\n        col3 = vec3(0.188,0.392,0.188);\n        col4 = vec3(0.063,0.247,0.063);\n    }\n    if(palette == 1) {\n        col1 = vec3(0.0);\n        col2 = vec3(0.0,0.666,0.666);\n        col3 = vec3(0.666,0.0,0.666);\n        col4 = vec3(0.666,0.666,0.666);\n    }\n    if(palette == 2) {\n        col1 = vec3(0.0);\n        col2 = vec3(0.333,1.0,1.0);\n        col3 = vec3(1.0,0.333,1.0);\n        col4 = vec3(1.0);\n    }\n    if(palette == 3) {\n        col1 = vec3(0.0);\n        col2 = vec3(0.0,0.666,0.0);\n        col3 = vec3(0.666,0.0,0.0);\n        col4 = vec3(0.666,0.333,0.0);\n    }\n    if(palette == 4) {\n        col1 = vec3(0.0);\n        col2 = vec3(0.333,1.0,0.333);\n        col3 = vec3(1.0,0.333,0.333);\n        col4 = vec3(1.0,1.0,0.333);\n    }\n    if(palette == 5) {\n        col1 = vec3(0.0);\n        col2 = vec3(0.0,0.666,0.666);\n        col3 = vec3(0.666,0.0,0.0);\n        col4 = vec3(0.666,0.666,0.666);\n    }\n    if(palette == 6) {\n        col1 = vec3(0.0);\n        col2 = vec3(0.333,0.666,0.666);\n        col3 = vec3(1.0,0.333,0.333);\n        col4 = vec3(1.0);\n    }\n    if(palette == 7) {\n        col1 = vec3(0.0);\n        col2 = vec3(0.333,0.333,0.333);\n        col3 = vec3(0.666,0.666,0.666);\n        col4 = vec3(1.0);\n    }\n\n    float dist1 = length(c - col1);\n    float dist2 = length(c - col2);\n    float dist3 = length(c - col3);\n    float dist4 = length(c - col4);\n\n    float d = min(dist1,dist2);\n    d = min(d,dist3);\n    d = min(d,dist4);\n\n    if(d == dist1) {\n        c = col1;\n    }\n    else if(d == dist2) {\n        c = col2;\n    }\n    else if(d == dist3) {\n        c = col3;\n    }\n    else {\n        c = col4;\n    }\n    \n    //gl_FragColor = vec4(c,alpha).rgba;\n    fragColor = vec4(c,alpha).rgba;\n}","name":"Image","description":"","type":"image"}]}