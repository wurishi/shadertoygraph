{"ver":"0.1","info":{"id":"dlcGWn","date":"1682196664","viewed":70,"name":"rgb vs cmyk halftoning","username":"lalaoopybee","description":"cmyk seems to shade better, rgb seems to keep color better.","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["dither","rgb","halftone","cmyk","npr"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec2 uv=fragCoord/iResolution.xy;\n    \n    float line=iMouse.x/iResolution.x;\n    if(iMouse.xy==vec2(0.)) line=sin(iTime*.8)*.5+.5;\n    if(uv.x<line) fragColor=texture(iChannel0, uv);\n    else fragColor=texture(iChannel1, uv);\n    fragColor*=smoothstep(0., .005, abs(uv.x-line));\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec2 uv=fragCoord/iResolution.xy;\n    fragColor=texture(iChannel0, uv);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"//cmyk halftoning\nvec4 rgb2cmyk(vec3 rgb){\n    float k=1.-max(rgb.r, max(rgb.g, rgb.b));\n    vec3 cmy=vec3(1.-rgb.r-k, 1.-rgb.g-k, 1.-rgb.b-k)/(1.-k);\n    return vec4(cmy, k);\n}\n\nvec3 cmyk2rgb(vec4 cmyk){\n    return (1.-cmyk.xyz)*(1.-cmyk.w);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    float randSeed=round(iTime/ANIM_SPEED)*ANIM_SPEED;\n    float angleC=PI*hash11(randSeed);\n    float angleM=angleC+PI*mix(.2, .25, hash11(randSeed+10.));\n    float angleY=angleM+PI*mix(.2, .25, hash11(randSeed+20.));\n    float angleK=angleY+PI*mix(.2, .25, hash11(randSeed+30.));\n    \n    vec2 coord=iResolution.xy*.5-fragCoord;\n    float dC=length(.5-fract(rotVec(coord, angleC)/HT_SIZE));\n    float dM=length(.5-fract(rotVec(coord, angleM)/HT_SIZE));\n    float dY=length(.5-fract(rotVec(coord, angleY)/HT_SIZE));\n    float dK=length(.5-fract(rotVec(coord, angleK)/HT_SIZE));\n    \n    vec2 uv=fragCoord/iResolution.xy;\n    vec4 col=texture(iChannel0, uv);\n    vec4 val=rgb2cmyk(col.rgb);\n    vec4 stepped=smoothstep(val+BLUR, val-BLUR, vec4(dC, dM, dY, dK));\n    fragColor=vec4(cmyk2rgb(stepped), 1.);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define PI 3.1415927\n\n#define ANIM_SPEED .1\n\n#define HT_SIZE (iMouse.z>0.?iMouse.y/iResolution.y*12.+7.:9.)\n\n#define BLUR .1\n\n//https://www.shadertoy.com/view/4djSRW\nfloat hash11(float p)\n{\n    p = fract(p * .1031);\n    p *= p + 33.33;\n    p *= p + p;\n    return fract(p);\n}\n\nvec2 rotVec(vec2 v, float f){\n    float c=cos(f), s=sin(f);\n    return v*mat2(c, -s, s, c);\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"//rgb halftoning\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    float randSeed=round(iTime/ANIM_SPEED)*ANIM_SPEED;\n    float angleR=PI*hash11(randSeed);\n    float angleG=angleR+PI*mix(.25, .33, hash11(randSeed+10.));\n    float angleB=angleG+PI*mix(.25, .33, hash11(randSeed+20.));\n    \n    vec2 coord=iResolution.xy*.5-fragCoord;\n    float dR=length(.5-fract(rotVec(coord, angleR)/HT_SIZE));\n    float dG=length(.5-fract(rotVec(coord, angleG)/HT_SIZE));\n    float dB=length(.5-fract(rotVec(coord, angleB)/HT_SIZE));\n    \n    vec2 uv=fragCoord/iResolution.xy;\n    vec3 col=texture(iChannel0, uv).rgb*.7;\n    fragColor=vec4(smoothstep(col+BLUR, col-BLUR, vec3(dR, dG, dB)), 1.);\n}","name":"Buffer C","description":"","type":"buffer"}]}