{"ver":"0.1","info":{"id":"MdSfWK","date":"1502182623","viewed":2559,"name":"circle dithering","username":"FabriceNeyret2","description":"work in progress. uncomment line 32 for color version.\n\nref image: [url]http://www.boredpanda.com/single-line-plotter-scribbles-sergej-stoppel/[/url]","likes":67,"published":3,"flags":0,"usePreview":0,"tags":["halftone","dithering","reproduction"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// ref image: http://www.boredpanda.com/single-line-plotter-scribbles-sergej-stoppel/\n// ( doing it simpler: circles instead of scribbles ;-) )\n\nfloat L = 8.,                   // L*T = neightborhood size\n      T = 4.,                   // grid step for circle centers\n      d = 1.;                   // density\n\n#define T(U) texture(iChannel0, (U)/R).r // * 1.4\n//#define T(U) sqrt( texture(iChannel0, (U)/R).r * 1.4 )\n//#define T(U) length(texture(iChannel0, (U)/R).rgb)\n    \n#define rnd(P)  fract( sin( dot(P,vec2(12.1,31.7)) + 0.*iTime )*43758.5453123)\n#define rnd2(P) fract( sin( (P) * mat2(12.1,-37.4,-17.3,31.7) )*43758.5453123)\n\n#define C(U,P,r) smoothstep(1.5,0.,abs(length(P-U)-r))                       // ring\n//#define C(U,P,r) exp(-.5*dot(P-U,P-U)/(r*r)) * sin(1.5*6.28*length(P-U)/r) // Gabor\n\nvoid mainImage( out vec4 O,  vec2 U )\n{\n    vec2 R = iResolution.xy;\n//  O += T(U)-O; return;\n    O += 1.-O; \n\n    for (float j = -L; j <=L; j++)    // test potential circle centers in a window around U\n        for (float i = -L; i <=L; i++) {\n         // vec2 P = U+vec2(i,j);\n            vec2 P = floor( U/T + vec2(i,j) ) *T;          // potential circle center\n            P += T*(rnd2(P)-.5);\n            float v = T(P),                                // target grey value\n                  r = mix(2., L*T ,v);                     // target radius\n            if ( rnd(P) < (1.-v)/ r*4.*d /L*T*T )          // draw circle with probability\n                O -= C(U,P,r)*.2 ; // * (1.-texture(iChannel0, (U)/R)); // colored variant\n        }\n // O = sqrt(O);\n}","name":"Image","description":"","type":"image"}]}