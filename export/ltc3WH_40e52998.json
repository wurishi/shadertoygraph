{"ver":"0.1","info":{"id":"ltc3WH","date":"1469027952","viewed":800,"name":"ambilight visualization 2.0","username":"MillhausVKodi","description":"added a led shape from &amp;amp;quot;uNiversal&amp;amp;quot;\n\n","likes":16,"published":1,"flags":64,"usePreview":0,"tags":["visualizer","ambilight","hyperion"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"lsB3Rz","filepath":"https://soundcloud.com/dubstep/elements-by-lindsey-stirling","previewfilepath":"https://soundcloud.com/dubstep/elements-by-lindsey-stirling","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float bands = 20.0;\nconst float leds = 25.0;\nconst float colorRange = 0.3; // >0. (=1. full color range, >1. repeat colors)\n\n\n//convert HSV to RGB\nvec3 hsv2rgb(vec3 c){\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // middle = (0/0)\n    vec2 k=(fragCoord.xy-.5*iResolution.xy)/(max(iResolution.x,iResolution.y));\n        \n    \n    \n    //distance from the middle\n    float dis = distance(k , vec2(0)); \n    \n    //and approximated by \"leds\"\n    float disA = floor(dis*leds)/leds;\n    //disA = dis;\n    \n    \n    //degree from bottom 0 and top 1.0.  /left right symetric \n    float deg = acos(k.y/dis)/3.14;\n    \n    //and approximated by \"bands\"\n    float degA = floor(deg*bands)/bands;\n    \n    \n    \n   //colorwheel, dark in the middle, changing colors over time\n    vec3 color = hsv2rgb(  vec3( degA*colorRange + iTime*0.07 , 1.0 , smoothstep(0.0, 0.6, disA) )  );\n    \n    \n    \n\t//brightness of a band by fourier (degree to frequency / magnitude to brightness)\n    float bandBrightness = texture( iChannel0, vec2(degA,0.25)).x;\n    \n    \n    //more blinky blinky x^2\n    color*=bandBrightness*bandBrightness;\n    \n    //brighter\n    color*=4.;\n    \n\n    \n    float deltaDeg = fract((deg-degA)*bands) - 0.5;\n    float deltaDis = fract((dis-disA)*leds) - 0.5;\n    \n    float shape = smoothstep(0.5, 0.35, abs(deltaDeg)) *\n                smoothstep(0.5, 0.35, abs(deltaDis));\n    \n    \n    color*=shape;\n    \n\t//return\n    fragColor = vec4(color, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}