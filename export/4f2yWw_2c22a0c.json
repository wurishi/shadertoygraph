{"ver":"0.1","info":{"id":"4f2yWw","date":"1722423590","viewed":52,"name":"Voronoi Image_","username":"Huihui_","description":"Learning from: Voronoi Explained!  -- Youtube\nAuthorï¼šThe Art of Code","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["noise","random","imageprocess"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Parameter Setting\n#define FRAG_NUM 100.\n\n#define IMG_WIDTH 512.\n#define IMG_HEIGHT 512.\n////////////////////\nvec2 noise22(vec2 uv) {\n    vec3 a = fract(uv.xyx * vec3(435.24,342.45,856.05));\n    a += dot(a, a+15.43);\n    return fract(vec2(a.x*a.y, a.y*a.z));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = (fragCoord - .5*iResolution.xy) / iResolution.y;\n    uv += 0.5;\n    float m = 0.;\n    float t = iTime * 2.;\n    float minDist = 100.;\n    float cellIndex = 0.;\n    \n    vec3 col = vec3(0.);\n   \n    \n    uv *= FRAG_NUM;\n    vec2 gv = fract(uv)-.5;\n    vec2 id = floor(uv);\n    \n    for(float y=-1.; y<=1.; y++) {\n        for(float x=-1.; x<=1.; x++) {\n            vec2 offs = vec2(x,y);\n            vec2 loc = id+offs;\n            vec2 n = noise22(loc);\n            vec2 p = offs + sin(n*t)*.5;\n            float d = length(gv-p);\n            \n            if(d<minDist) {\n                minDist = d;\n                //col = vec3(n.x);\n                col = texelFetch(iChannel0,ivec2(loc.x*IMG_WIDTH,loc.y*IMG_HEIGHT)/int(FRAG_NUM), 0).xyz;\n            }\n        }   \n    }\n    \n    //col = vec3(minDist);\n    \n    \n    fragColor = vec4(col,1.0);\n} ","name":"Image","description":"","type":"image"}]}