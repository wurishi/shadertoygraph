{"ver":"0.1","info":{"id":"Xt2GDm","date":"1429610936","viewed":248,"name":"Palindrome years","username":"sleep","description":"Prints out years whose binary representation is a palindrome","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["puzzle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"const int YEAR_MIN=1900;\nint year, yearDigitNumber, yearDigitWord, yearDigitBit, yearDigit;\n\nint digitData(int i) {\n    if (i==0) return 706878464;\n    if (i==1) return 1843754;\n    if (i==2) return 135137280;\n    if (i==3) return 4065288;\n    if (i==4) return 270670848;\n    if (i==5) return 4064264;\n    if (i==6) return 403717632;\n    if (i==7) return 1843744;\n    if (i==8) return 606613504;\n    if (i==9) return 2105406;\n    if (i==10) return 503463424;\n    if (i==11) return 1843744;\n    if (i==12) return 503454720;\n    if (i==13) return 1843746;\n    if (i==14) return 270548480;\n    if (i==15) return 526344;\n    if (i==16) return 471997440;\n    if (i==17) return 1843746;\n    if (i==18) return 572660736;\n    else return 1843260;\n}\n\nint getDigit(int n, int k, int base) {\n    for (int i = 0; i < 32; i++) {\n        if (k != 0) {\n            k--;\n            n = n/base;\n        }\n    }\n    return (n - base*(n/base));\n}\n\nvoid parsePosition(vec2 fragCoord) {\n    ivec2 xy = ivec2(fragCoord.xy);\n    xy.y = 360 - xy.y;\n    int row = xy.y / 8;\n    int col = xy.x / 32;\n    year = YEAR_MIN + 20*row + col;\n\n    int x = xy.x - 32*col;\n    int y = xy.y - 8*row;\n    yearDigitNumber = x / 8;\n    x = x - 8*yearDigitNumber;\n    yearDigitWord = (y > 3) ? 1 : 0;\n    yearDigitBit = (y > 3) ? ((y - 4)*8 + x) : (y*8 + x);\n    yearDigit = getDigit(year, 3-yearDigitNumber, 10);\n}\n\nvec4 drawDigit() {\n    int w = digitData(yearDigit*2 + yearDigitWord);\n    int b = getDigit(w, yearDigitBit, 2);\n    if (b == 0) return vec4(0.0, 0.0, 0.0, 1.0);\n    else return vec4(1.0, 1.0, 1.0, 1.0);\n}\n\nbool getBit(int n, int b) {\n    float h = pow(2.0, float(b)+1.0);\n    float l = pow(2.0, float(b));\n    return mod(float(n), h) >= l;\n}\n\nbool goodYear11() {\n    int matches = 0;\n    for (int b = 0; b < 11/2; b++) {\n        if (!(getBit(year, b) == getBit(year, 10-b))) return false;\n    }\n    return true;\n}\n\nbool goodYear12() {\n    int matches = 0;\n    for (int b = 0; b < 12/2; b++) {\n        if (!(getBit(year, b) == getBit(year, 11-b))) return false;\n    }\n    return true;\n}\n\nbool goodYear() {\n    if (year < 2048) return goodYear11();\n    else return goodYear12();\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tparsePosition(fragCoord);    \n    if (goodYear()) {\n\t\tfragColor = drawDigit();\n    }\n    else {\n        fragColor = vec4(0.0, 0.0, 0.0, 1.0);\n    }\n}","name":"","description":"","type":"image"}]}