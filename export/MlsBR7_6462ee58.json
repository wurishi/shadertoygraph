{"ver":"0.1","info":{"id":"MlsBR7","date":"1511491870","viewed":284,"name":"Victorian Tech","username":"zackpudil","description":"Use mouse to zoom out.","likes":18,"published":1,"flags":0,"usePreview":0,"tags":["2d","fractal","emission"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRn","filepath":"/media/a/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","previewfilepath":"/media/ap/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 mouse() { return (-iResolution.xy + 4.0*iMouse.xy)/iResolution.y; }\n\nfloat hash(float x) {\n    return fract(sin(x*343.54)*4783.39);\n}\n\nvec3 de(vec2 p) {\n    p *= 0.6 + 0.1*mouse().y;\n\tp.x += 0.5*iTime + mouse().x;\n\tp.x = mod(p.x + 1.0, 2.0) - 1.0;\n\tfor(int i = 0; i < 6; i++) {\n\t\tp = abs(p)/clamp(dot(p, p), 0.6, 1.0);\n        p -= vec2(0.75);\n\t}\n\t\n\treturn vec3(p, abs(p.x));\n}\n\nvec4 bump(vec2 p) {\n\tvec2 h = vec2(0.01, 0.0);\n\tvec3 n = normalize(vec3(\n\t\tde(p + h.xy).z - de(p - h.xy).z,\n\t\tde(p + h.yx).z - de(p - h.yx).z,\n\t\t-0.2));\n \n    return vec4(n, de(p).z);\n}\n\nvec3 render(vec2 p) {\n\tvec3 col = vec3(0);\n    vec4 env = bump(p);\n\t\n\tvec3 rd = normalize(vec3(p, 1.0));\n\tvec3 sn = env.xyz;\n\t\n\tcol += 0.4*vec3(1, 0.8, 0.8)*pow(clamp(dot(rd, -sn), 0.0, 1.0), 8.0);\n\n    float tim = 0.6 + 0.4*sin(0.3*iTime);\n\tcol += 0.4*vec3(0.3, 1.0, 1.3)*smoothstep(0.0, 3.0, env.w)*tim;\n\tcol += 9.0*vec3(0, 1, 1)*smoothstep(0.6 + 0.1*smoothstep(-1.0, 1.0, sin(4.0*iTime)), 1.0, env.w)*tim;\n\t\n\treturn col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 p = (-iResolution.xy + 2.0*fragCoord)/iResolution.y;\n\t\n\tvec3 col = 2.0*texture(iChannel0, de(p).xy).xyz*render(p);\n\tcol = 1.0 - exp(-0.4*col);\n\tcol = pow(abs(col), vec3(1.0/2.2));\n\tfragColor = vec4(col, 1);\n}","name":"Image","description":"","type":"image"}]}