{"ver":"0.1","info":{"id":"tltcRn","date":"1608397049","viewed":45,"name":"Punnett square","username":"user3000","description":"Visualisation of the Punnett square with an infinite number of alleles","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["visualisation","biology"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// This is the visualisation of the Punnett square with an infinite number of alleles\n// New alleles are added over time\n// Each color represents a different resulting genotype (the colors are shifted to make room for more genotypes)\n\nprecision highp float;\n\n// Use HSB colors to make it more visually appealing\n// Function from IÃ±igo Quiles\n// https://www.shadertoy.com/view/MsS3Wc\nvec3 hsb2rgb( in vec3 c ){\n    vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),\n                             6.0)-3.0)-1.0,\n                     0.0,\n                     1.0 );\n    rgb = rgb*rgb*(3.0-2.0*rgb);\n    return c.z * mix(vec3(1.0), rgb, c.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 pos = fragCoord/iResolution.xy;\n    pos.x= 1.-pos.x;\n    \n    // Time\n    float overflow = 34.;   //DO NOT CHANGE (dependant on the float precision)\n                            //Overflow error exactly at 2^5 sec , +2 sec fo visual effect\n    \n        //Preferences\n    float repeat = 7.5; //Loop time\n    \n    //Float to int\n    float gridStep = pow(2., floor(fract((iTime*overflow/repeat)/overflow)*overflow));   //PLAY AROUND WITH THIS\n                                                                                 //The number of alleles\n    ivec2 gridCoord = ivec2(floor(pos*gridStep));\n    \n    \n    //Bitwise operations\n    //WARNING: magic happens here (the bitewise or operator)\n    float comb = float(gridCoord.x | gridCoord.y)/gridStep;\n    \n    vec3 color = hsb2rgb(vec3(comb));\n    \n    // Output\n    fragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}