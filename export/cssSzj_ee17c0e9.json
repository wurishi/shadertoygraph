{"ver":"0.1","info":{"id":"cssSzj","date":"1669215986","viewed":99,"name":"Wave with chromatic aberration. ","username":"artyom","description":"Use the mouse Left btn to move the wave's center. ","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["wave","chromatic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsX3Rn","filepath":"/media/a/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","previewfilepath":"/media/ap/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float radius = 0.5;\nfloat dispForce = 0.05;\nfloat aberrationAmount = 0.5;\n\nvec4 chromaticAberration(vec2 st, vec2 centerOffset, float mask) {\n\n    vec2 aberrated = aberrationAmount * pow(centerOffset, vec2(3.0, 3.0)) * mask ;\n\treturn vec4\n    (\n        texture(iChannel0, st - aberrated).r,\n        texture(iChannel0, st).g,\n        texture(iChannel0, st + aberrated).b,\n    \t1.0\n    );\n}\n\nfloat waveMask(vec2 centerOffset) {\n    float mask = (1. - smoothstep(\n                            radius-0.1, \n                            radius,\n                            length(centerOffset)));\n\n    mask *= smoothstep(radius-0.15, radius-0.05, length(centerOffset)); \n    return mask;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float ratio = iResolution.x/iResolution.y;\n    vec2 uv = (fragCoord/iResolution.xy - 0.5) * vec2(ratio, 1.0);\n    vec2 waveCenter = (iMouse.xy / iResolution.xy - 0.5) * vec2(ratio, 1.0);\n\n    radius *= (sin(iTime) * 0.5 + 0.5);\n\n    vec2 WC_UV = uv - waveCenter;\n    float mask = waveMask(WC_UV);\n    vec2 displacement = normalize(WC_UV) * dispForce * mask;\n    vec2 D_UV = uv-displacement;\n\n    fragColor = chromaticAberration(D_UV, WC_UV, mask);\n}","name":"Image","description":"","type":"image"}]}