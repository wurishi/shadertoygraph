{"ver":"0.1","info":{"id":"tdy3W3","date":"1571636880","viewed":220,"name":"Chrono Trigger - Intro","username":"rmmcal","description":"Chrono Trigger - Intro - Dedicated to my favorite game... Pure Nostalgia....\n","likes":8,"published":1,"flags":64,"usePreview":0,"tags":["chrono"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"MtX3DX","filepath":"https://soundcloud.com/chrono-trigger-remastered/001-premonition","previewfilepath":"https://soundcloud.com/chrono-trigger-remastered/001-premonition","type":"musicstream","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/////////////////////////////////////////////////////////////\n/////      ... Trigger => The curve of time ...     ///////// \n/////      ........ My favorite game ..........     ///////// \n/////////////////////////////////////////////////////////////\n/////////////////////////////////////////////////////////////\n// Brasil/Amazonas/Manaus                                       \n// Chrono Trigger - Intro                                    \n// Created by Rodrigo Cal (twitter: @rmmcal) - 2019/10\n// - https://www.shadertoy.com/view/tdy3W3\n/////////////////////////////////////////////////////////////\n// -------------------------------------------------------\n//\n//  [Queen Zeal]: \"Destiny, in its most brutal form.\"\n//\n//   ........................................................\n//   - Life is a choice, you can run away and live or follow \n//     and die, and that's fate in its purest form....\n//   ........................................................\n//\n// Wiki:\n// => https://en.wikipedia.org/wiki/Chrono_Trigger\n// \n// Inspiration:\n// => https://www.youtube.com/watch?v=x1gq-4UOsus\n//\n// Sounds:\n// => https://soundcloud.com/chrono-trigger-remastered/001-premonition\n//\n// -------------------------------------------------------\n/////////////////////////////////////////////////////////////\n/******\n            My Raking\n            - Chrono Trigger / Chrono Cross / Final Fantasy \n            - Minecraft\n            - Zelda (All)\n            - Simcity (All)\n            - The sims (All)\n            - Starcraft (All)\n            - World of Warcraft  \n            - Pokemon (All)\n            - Spore\n            - Need for speed (All)\n            - Grand Theft Auto / Watch Dogs\n            - Super MÃ¡rio Bros / Sonic / Alex Kids\n            - Portal (All)\n            - Wolfenstein 3D / Doom / Quake / Counter-Strike / Battle Field / Titanfall\n\n            Honorable Mention:\n            - The Stanley Parable\n            - Jounrey \n            - Antichamber\n            - Perspective\n            - GOROGOA\n            - GRIS\n            - Superhot \n            - Shadowmatic \n            - The Unfinished Swan \n            - Parallax\n            - FRACT OSC\n            - Quadrilateral Cowboy\n            - Bioshock Infinite / The Last of Us / Tomb Raider\n            - The Elder Scrolls V: Skyrim\n            - I Wanna Be The Guy / Cat Mario / Kaizo Mario\n\n            Historical mention:\n            - Mortal Kombat / Street Fighter\n            - Guitar Hero / Just Dance\n            - Tetris / Pac Man / Space Invaders / Adventure / etc \n            - Fifa\n            - Fear / Slender / DayZ\n\n/*******/\n\n\nconst float PI =3.14159265359;\nconst float PI2 = 2.*PI;\nconst float PI3 = 3.*PI;\nconst float PIH =.5*PI;\nconst float PIHh = PIH+PIH*.5;\n\nfloat c(float m1)\n{\n\treturn clamp(m1,0.,1.);\n}\n\nfloat inv(float v){\n\treturn 1.-v;\n}\n\nfloat invc(float v){\n\treturn inv(clamp(v,0.,1.));\n}\n\nfloat stepin(float a, float b, float x){\n    return a < x && x < b ? 1. : 0.;\n}\n\nfloat stepins(float a, float b, float x){\n    return stepin(min(a,b),max(a,b),x);\n}\n\nfloat stepinsd(float a, float b, float x){\n    return max(abs(min(a,b)-x),abs(max(a,b)-x));\n}\n\nfloat clp(float f)\n{\n\treturn clamp(f,0.,1.);\n}\n\nmat2 rotate(float a){\n    return mat2(cos(a), sin(a), -sin(a),cos(a));\n}\n\nvec2 ani(vec2 a, vec2 b, float t){\n    t = (t*=t);\n    t = t<.5 ? 2.*t*t : -1.+(4.-2.*t)*t;\n    vec2 tp = vec2(clamp(t*2.,0.,1.), clamp(t*2.-1.,0.,1.));\n\ttp = vec2(t);\n\treturn mix(a, b, a.y>b.y ? tp : tp.yx);\n}\n\nuint textHex[] = uint[](0x4348524fu, 0x4e4f2054u, 0x52494747u, 0x45522031u,\n\t\t\t\t\t\t0x39393520u, 0x53515541u, 0x52452020u,  \n\t\t\t\t\t\t0x40726d6du, 0x63616c20u, 0x32303139u, 0x2f313020u);\nuint st(uint i){\n    return textHex[i];\n}  \n\nvec4 char(vec2 p, uint v, float d){                                      \n    vec2 v2 = clamp(p / 16., 0.0, 1./16.) -vec2(0.,1./16.) + vec2(float(v%16u)/16., -float(v/16u)/16.);\n    return vec4(texture(iChannel1,v2,-100.));                     \n}                                                              \n                                                          \nfloat str( vec2 p,  vec2 tp, float s, float sp, int is, int ie, float board) { \n    float chr = 0.;                                             \n    for ( uint i = uint(is); i < uint(ie); i++){\n       uint v = uint(((st(i/4u)>>(8u*(3u-(i % 4u)))) % 256u));  \n       vec2 translateCh = tp+vec2(float(i-uint(is))*sp, 0.); \n       float fade =  (1.);\n       chr = max(chr, smoothstep(0.,1.0,char(p/s-translateCh, v, board).x) * fade );  \n    }  \n    return chr;                   \n}   \n\n\nvoid drawCGold(inout vec4 canvas, vec2 p, float t, float d, vec2 rt)\n{\n    p.x = (1./cos(rt.x))*p.x;\n    p.y = (1./cos(rt.y))*p.y;\n \n    p = rotate(-.7)*p;\n    vec2 pa = p;\n    float t1 = clamp( t/d, 0. , 1.)*2.;\n    float a = atan( p.y , p.x ) ;    \n    float a1 = (t1*1.)*3.14-3.14/2.  +3. ;\n    float a2 = (t1)*3.14-3.14; \n    float f = 0.;\n    float fa = stepin(-3.14, min(1.5, a2), atan(p.x,p.y))*invc(abs(2.-length(p-vec2(0.,0.))));\n\tfloat fs = ((1.-length(p-vec2(cos(-a1),sin(-a1))*2. )));\n    f = max(f, smoothstep(0.,.01,fa-.5));\n    float a3 = -1.7;\n\tfloat fsb1 = ((1.2-length(p-vec2(cos(a3),sin(a3))*2. )));\n\ta3 = -0.0;\n\tfsb1 = max(fsb1, ((1.2-length(p-vec2(cos(a3),sin(a3))*2. ))));\n    vec2 p2 = p+0.4;\n    float fa2 = stepin(-3.14, min(1.5, a2), atan(p2.x,p2.y))*invc(abs(2.-length(p2-vec2(0.,0.))));\n    fa2 = f*fa2;\n    fa2 = min(fa2, -fsb1);\n    canvas = mix(canvas, vec4(.5),  t1*( fa2*fa2*fa2));    \n    float c = cos(fa*40.)*.1+0.2+ abs((1.-cos(a*3.))*.5)*fa;    \n    canvas = mix(canvas, vec4(1.4*c,c,0.,1.)*t1,  f*fa*fa*fa);\n\tcanvas = mix(canvas, vec4(1.,1.,1.,1.)*2.,  max(0.,(t1)*fs * max(0.,0.9-.001*pow(t1,16.) )) );\n}\n\nvoid drawArcs(inout vec4 canvas, vec2 p , float t, float d)\n{\n    vec2 pa = p;\n    float t1 = clamp( t/d, 0. , 1.);\n    \n    float at = atan( p.x , p.y) ;\n\tfloat a1 = (t1*1.)*PI-PIH  +PI ;\n    float a2 = (t1)*PI;\n    float f = 0.;\n    \n    // 2 arcs   \n    float arcIn = stepin(-a2, 0., at );\n    float arc1 = invc(abs(3.-length(p-vec2(0.,0.)))); \n    float arc2 = invc(abs(3.5-length(p-vec2(0.,0.)))); \n    float fa = 0.;\n    fa = max(fa, arcIn*arc1);\n\tfa = max(fa, arcIn*arc2);\n \tf = max(f, smoothstep(0.,.11,fa-.9));\n    f = max(f, smoothstep(-0.5,2.2,fa-.6));\n    canvas = mix(canvas, vec4(1.),  (f) );\n}\n\nvoid drawArcBalls(inout vec4 canvas, vec2 p , float t, float d)\n{\n    float t1 = clamp( t/d, 0. , 1.);\n    float at = atan( p.x , p.y) ;\n    float a2 = (t1)*PI;\n    float arcIn = stepin(-a2, 0., at );\n\n    // mini balls\n    float n = 4.;\n    float rt = (1.-t1)-.8;\n    float ata = mod(at+rt, PI2);\n    float ab = ((floor(((PI-ata)/(PI2))*n)*2.)/1.);\n    ab = mod(ab*PI/n+PIH+PI/n+rt,PI2);   \n    vec2 tb = -4.*vec2(cos(ab),sin(ab))*(2.-t1);\n    //float f = ( smoothstep(-0.0,2.2, pow(1.5*(t1)-length(p-tb),5. )));\n    float f = ( smoothstep(-0.0, 2.2, pow(max(0., 1.5*(t1)-length(p-tb)),5.)));\n    arcIn = stepin(-10., 1.5, p.x );\n    canvas = mix(canvas, vec4(1.),  arcIn*(f) );\n}\n\nvoid drawArcArrow(inout vec4 canvas, vec2 p , float t, float d)\n{\n    vec2 pr = p;\n    float t1 = clamp( t/d, 0. , 1.);\n    pr = rotate(-.1+(1.-t1))*pr;\n   \n    float at = atan( pr.x , pr.y) ;\n    // mini arrow\n    float aa = clamp((t1)*2., 0.25, 2.);\n    float ft = 0.5/aa;\n\n    float ab = mod(floor(at*aa)/aa+ft,PI2);   \n   \tfloat f = 0.;\n\n    pr = rotate(ab)*pr;\n    pr += vec2(0.,-2.8)*t1;\n    f = ( smoothstep(-0.0,.3, .2-max(length(pr)-.1, abs(abs(pr.x)+(pr.y)))));\n    \n   \tfloat arcIn = stepin(-10., 10.2, p.x );\n    canvas = mix(canvas, vec4(1.),  t1*arcIn*(f) );\n}\n\nvoid drawPointer(inout vec4 canvas, vec2 p, vec4 color, float s, float t, float d){\n    float t1 = c( t/d);\n \n   \tfloat f = 0.;\n \n    vec2 pr = (p-vec2(0.,s+0.95))*vec2(1.,.2);\n    float sgx = sign(p.x);\n    \n    f = max (f, stepins(sgx*.12, sgx*0.03, p.x )*stepins(-.0, s, p.y ) );\n    f = max (f, stepins(-.2, 0.2, p.x )*stepins(s, s+.05, p.y ) );\n    f = max(f,  step(-0.0, .05-max(length(pr)-.2, abs(abs(pr.x)+(pr.y)))));\n \n    canvas = mix(canvas, color,  t1*f );\n}\n\nvoid drawPointerWithShadow(inout vec4 canvas, vec2 p, float s, float t, float d){\n    drawPointer( canvas, p+0.1, vec4(0.1), s, t, d);\n    drawPointer( canvas, p, 0.8+.2*cos(vec4((p.yyyx +p.xxxx)*10.)),s,  t, d);\n}\n\nvoid drawPointers(inout vec4 canvas, vec2 p, float t, float d){\n    float t1 = c( t/(d*6.));\n    float t2 = c( (t)/(d*10.));\n    float t3 = c( (t-1.0)/(d*10.));\n    vec2 p1 = p*t1;\n    t2 = 1.- t2;\n    t2 = (t2*=t2)*(t2*=t2);\n    float v = 2.;\n    vec4 canvasPointers;\n    drawPointerWithShadow( canvasPointers, rotate(((t2)*v*12.-PIH))*p1, 2., t, d);\n    drawPointerWithShadow( canvasPointers, rotate(((t2)*v*1.-PI3))*p1, 1.5, t, d);\n\n    t3 = 1.-t3;\n    t3 = (t3*=t3)*(t3*=t3);\n    t3 = 1.-t3;\n\n    canvasPointers = mix(canvasPointers, vec4(cos(p*1.5)*.9,0.,0.),  t3*smoothstep(0.,.1, .5-length(p)) );\n    canvasPointers = mix(canvasPointers, vec4(0.,0.,1.,0.),  t3*pow(smoothstep(0.,.2, .4-length(p)),5. ) );\n    canvasPointers = mix(canvasPointers, vec4(1),  t3*pow(smoothstep(0.,.5, .5-length(p)),5. ) );\n    \n    float hide = 1.-(1.-t3)*smoothstep(-5.,5.0, 5.-length(p));\n    canvas= mix(canvas,canvasPointers, hide*step(0.1, canvasPointers.r));\n}\n\nvoid drawC(inout vec4 canvas, vec2 p , float t, float d, vec2 rt)\n{\n    drawCGold(canvas, p*1.,t, d*4., rt);\n    drawArcs(canvas, p, t-3.5, d*4.5);\n    drawArcBalls(canvas, p, t-5.8, d*2.0);\n    drawArcArrow(canvas, p, t-7., d*2.);    \n\tdrawPointers( canvas, p, t-8., d);\n}\n\nvoid drawText(inout vec4 canvas, vec2 p,vec4 color, float space, int st, int et,float alpha)\n{\n    canvas = mix(canvas, vec4(.2), \talpha*clamp(str( p+.01, vec2(-2.,+.0), 0.21, space, st, et, 2.),.0,1.));\n    canvas = mix(canvas, color,     alpha*clamp(str( p   , vec2(-2.,+.0), 0.21, space, st, et, 2.),.0,1.));\n}\n\nvoid drawTextChrono(inout vec4 canvas, vec2 p , float t, float d)\n{\n    float t1 = clamp( t/d, 0. , 1.);\n    float t2 = clamp( (t-1.)/(d*2.5), 0. , 1.);\n    vec2 pt = p/10.;\n    \n    float sCr = .5*t1;\n    float te = 1.;\n    \n    vec2 pWave = vec2(t2+.1,0.1)+(vec2(0.,1.)*cos((pt*vec2(6., 0.))+iTime*3.).yx)*.03+pt+vec2(pt.y*.9 - te,.1);\n    float fc = (p/14.).x; \n    drawText(canvas, pt, vec4(1.,0.8-fc,0.,1.), sCr, 1, 6, t1);\n    drawText(canvas, pWave, vec4(1.,0.5-fc,0.,1.), .6,  6, 14, t1);\n    canvas = mix(canvas, vec4(1.,1.,1.,1.),  t1*clamp(str( pt, vec2(-1.,-8.4), 0.05, .5,  15,26, 2.),.0,1.));\n}\n\nvoid drawText(inout vec4 canvas, vec2 p , float t){\n    float t1 = clamp( t, 0. , 1.);\n\tvec2 pt = p;\n    p *= 14.;\n    vec2 tp =  ani(vec2(6.8,-2.2), vec2(-5.,0.5), clamp( (t-2.2)*.5, 0. , 1.));\n    float tl = c((t-3.)*.5)*PI2;\n    drawC(canvas, p*.8-tp ,t-.0,1., vec2( tl, 0.));\n\tdrawTextChrono(canvas, p*.8-vec2(0.,0.) ,t-5.0,2.);\n}\n\nvoid drawPendulumCircle(inout vec4 canvas, vec2 p)\n{\n    float f = 0.;\n    float fd = step(0.01, invc(length(p)-1.));\n    f = max(f, length(p)-1.);\n    f = max(f, 1.-(length(p)-0.8));\n    f = min(f, pow((length(p)-0.3), 3.));\n    \n    float s = 5.;\n    float tx = .1*cos(p.x*s+p.y*s+cos(p.y*s));\n    float fi =  inv(f*f*f);\n    vec4 textColor = vec4(0.);\n    textColor = mix(textColor, vec4(0.8+tx,0.7+tx*1.,0.,0.),  c(fi) );\n\n    float t = abs(fract(iTime*.5)*2.-1.);\n \ttextColor = mix(textColor, vec4(1.), c((t*.8+.2)*(pow(c(fi),15.))) );\n\t \n    canvas = mix(canvas, textColor, fd );\n}\n\nvoid drawPendulum(inout vec4 canvas, inout vec4 canvas2, vec2 p , float t, float d)\n{\n    float t1 = clamp( t/d, 0. , 1.);\n    p *= 1./(2.-t1*1.);\n    vec2 tp = vec2(0.,-11.);\n    \n    float tnp = abs(fract(t1*4.)*2.-1.);\n    float ba = tnp;\n    ba = (tnp*2.-1.);\n    ba =  (sin(sin(sin(sin(ba)))));\n    \n    float po = 3.;\n    float v1 = pow((tnp-.5),1./po)+.5;\n    float v2 = 1.- pow((1.-tnp+.5),1./po)-.5;\n    \n    p = rotate(ba*((1.-t1)*2.))*(p-vec2(0.,9.));\n    canvas = (p.x < 0. && t1 > 2.5/d || t1>=1.) ? canvas : mix(canvas2, vec4(0.), t1);\n    canvas = mix(canvas, vec4(.5,.4,0.,1.), smoothstep(0.,0.2, c(.2-abs(p.x))) );\n    canvas = mix(canvas, vec4(.8,.7,0.,1.), smoothstep(0.,0.2, c(.15-abs(p.x+.1))) );\n    \n    drawPendulumCircle(canvas, p-tp);\n}\n\nvoid drawGear(inout vec4 canvas, vec2 p, vec2 tp , float t, float s){\n    float t1 = clamp( t, 0. , 1.);\n    p-=tp;\n    p *= s;\n    float a = atan( p.y , p.x ) +t1*10.;\n    float gear = clamp(-cos(a*10.),.0,1.);\n    float f = 0.;\n    f = max(f, 1. -c(abs(length(p)-2.)) );\n    f = min(f, 1.-c(abs(length(p)-2.2+gear*.5)) );\n    f = max(f, 1. -c(abs(length(p)-2.+clamp(-cos(a*10.),.0,1.))) );\n    f -=  .2;\n    canvas = mix(canvas, vec4(0.,1.,0.,0.), smoothstep(0.,001.,f));\n    canvas = mix(canvas, vec4(0.2), step(0.5,f));\n}\n\n\nvoid drawGear(inout vec4 canvas, vec2 p , float t){\n    float t1 = clamp( t*.1, 0. , 1.);\n    drawGear(canvas, p, vec2(0.), t1, 50.-t1*50.);\n}\n\nvoid drawTimeWarp(inout vec4 canvasTxWave, vec2 p, float fog,  float rd, float r01, float phi01,float t){\n   \tfloat wc = fract(length(p))*100.;\n    canvasTxWave.b += cos(wc+cos((phi01-rd)*200.*(1.))-t*10.)*.2;\n \tcanvasTxWave = mix(canvasTxWave, vec4(0.), c(.4-fog*fog*fog));\n    t = t*.05;\n    float w = smoothstep(0.,.5,c((abs(p.y)+.0)*cos((p.x+sign(p.y)*(.5/(abs(p.y)+.2))*cos(p.y*5.-t*30.))*10.)))*.5;\n\tcanvasTxWave.r += c(pow(w,5.)*15.);\n    canvasTxWave.b += c(w);\n}\n\nvoid drawTimeGear(inout vec4 canvas, vec2 p , float t){\n    float t1 = clamp( t*.1, 0. , 1.);\n    \n\tvec2 ac = p ;\n\tfloat rd = t1;\n\tfloat phi01 = mod(atan(ac.y, ac.x) / PI2 + rd, 1.0);\n\tfloat r01 = mod(0.01 / dot(ac, ac) + rd, 1.0);\n\t\n\tvec2 pos = vec2(phi01, r01)*4.;\n\n    vec4 canvasTx;\n    drawGear(canvasTx, pos, floor(pos*5.)/5.+.1, t1, 50.-t1*50.);\n\tfloat fog = smoothstep(0.,1.0, pow(1.-length(p),3.));\n    canvasTx = mix(canvasTx, vec4(0.), fog);\n    \n    vec4 canvasTxWave ;\n    drawTimeWarp(canvasTxWave, p, fog,  rd, r01, phi01, t);\n    \n    float cirOpen = (+10.*(c((t*1.-3.5)*.15))-length(p));\n    vec4 canvasTx2;\n    canvasTx2.rb += (abs(+c(.51*cos(20.*( cirOpen)))) )*.3;\n    \n    canvasTx = mix(canvasTx, canvasTxWave, c(t-1.));\n    canvasTx = mix(canvasTx, canvasTx2, step(0.1, cirOpen));\n   \n    canvas = canvasTx;\n}\n\n\nfloat hex(vec2 p) {\n\tp.x *= 0.57735*2.0;\n\tp.y += mod(floor(p.x), 2.0)*0.5;\n\tp = abs((mod(p, 1.0) - 0.5));\n\treturn abs(max(p.x*1.5 + p.y, p.y*2.0) - 1.0);\n}\n\nvoid drawBgHex(inout vec4 canvas, vec2 p , float t){\n    float hexBFog = (1.-length(p)) ;\n\tcanvas.b += hexBFog * smoothstep(-0.2,.2, -hex(p*10.))*.5;    \n    canvas.rb += hexBFog * c(cos(t+10.*smoothstep(-2.2,2.0, -hex(p*10.))*(1.-length(p))) +.1)*.1;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 aspectRatio  = vec2( iResolution.x/iResolution.y,1.);\n    vec2 p = (uv-.5)*aspectRatio;\n\tvec2 pt = (uv-.5)*aspectRatio;\n\n  \tfloat t = fract(iTime/32.)*32.;\n    \n    vec4 canvas = vec4(0.);\n    drawBgHex(canvas, p, t );\n    \n\tvec4 canvas2 = vec4(.5,0.,0.,1);\n  \tdrawTimeGear(canvas2, p, t);\n    drawPendulum(canvas, canvas2, p*10.-vec2(6.,.0), t-0., 10.);\n    drawText(canvas, p, t-10.);\n   \n    canvas *= clamp(31.-t,0.,1.);\n        \n    fragColor = vec4(canvas.rgb,1.0);\n}","name":"Image","description":"","type":"image"}]}