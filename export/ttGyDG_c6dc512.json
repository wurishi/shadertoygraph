{"ver":"0.1","info":{"id":"ttGyDG","date":"1611709861","viewed":124,"name":"2D shadow ","username":"Hoyong","description":"yup. a simple and messy 2D shadow effect","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//quality??\n#define samp 100.\n\n//also try buffer A\n//#define CH iChannel2 \n#define CH iChannel0\n\nfloat removeGreen(vec4 col){\n    return step(col.g,col.r+col.b);\n} \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy-.5;\n    vec2 mousePos = iMouse.xy/iResolution.xy-.5;\n    \n    uv *= iResolution.xy/iResolution.y;\n    mousePos *= iResolution.xy/iResolution.y;\n    uv += .5;\n    mousePos += .5;\n    \n    float light_r = 0.5; //(`v`)\n    vec2 lightPos = mousePos;\n    vec4 lightCol = vec4(0.1,0.2,0.3,1.0); \n    vec4 shadowCol = vec4(0.1,0.1,0.1,0.8); // you can control alpha of shadow\n    vec4 backCol = vec4(abs(step(0.,cos(uv.x*20.)*0.5) - step(0.,sin(uv.y*20.)*0.5) ));\n    \n    vec4 tex = texture(CH,uv); \n    float t = texture(iChannel1, fragCoord/8.0).r;\n    float final_a = 1.0;\n    for ( float i = 0.; i < 1.0; i += 1./samp ) {\n        float f = i-.02;\n        vec4 dt = texture(CH, (uv-lightPos)*f+lightPos);\n        dt *= removeGreen(dt);\n        dt.a = step(dt.a, t); //dither..?\n        //dt.a = smoothstep(0.0,dt.a,0.75); //soft\n        //dt.a = (step(dt.a,0.)); //hard\n        final_a *= dt.a;\n    }\n    final_a *= smoothstep(light_r,0.,length(uv-lightPos));\n    \n    fragColor = mix(backCol, tex*removeGreen(tex), removeGreen(tex));\n    fragColor = mix(shadowCol,fragColor + lightCol,(final_a+1.-shadowCol.a)); \n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"//// try this buffer A\n//// lot of circles\n\n/// you can play here `v`\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy/iResolution.xy - .5;\n    fragColor = vec4(step( length(fract((uv-.5)*20.)-.5), abs((cos(uv.x*10.+iTime))+sin(uv.y*2.+iTime))*0.5*0.4 ));\n}","name":"Buffer A","description":"","type":"buffer"}]}