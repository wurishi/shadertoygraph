{"ver":"0.1","info":{"id":"7tBGRz","date":"1623210987","viewed":144,"name":"Sin explode","username":"jaredly","description":"Playing around with raymarching SDFs and sin waves ðŸŽ‰","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","sdf","sin"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n\nprecision mediump float;\n\n\nconst float PI = 3.14159;\n\nuniform float u_time;\n\nuniform vec2 u_mouse;\n\nuniform vec3 u_camera;\n\nuniform vec2 u_resolution;\n\nstruct GLSLEnv_451d5252{\n    float time;\n    vec2 resolution;\n    vec3 camera;\n    vec2 mouse;\n};\n\n// skipping Div_5ac12902, contains type variables\n\n// skipping Neg_3c2a4898, contains type variables\n\n// skipping AddSub_b99b22d8, contains type variables\n\n// skipping Mul_1de4e4c0, contains type variables\n\nmat4 rotate_d804569c(float tx_0, float ty_1, float tz_2) {\n    float cg_3 = cos(tx_0);\n    float sg_4 = sin(tx_0);\n    float cb_5 = cos(ty_1);\n    float sb_6 = sin(ty_1);\n    float ca_7 = cos(tz_2);\n    float sa_8 = sin(tz_2);\n    return mat4(\n        vec4(\n            (ca_7 * cb_5),\n            (((ca_7 * sb_6) * sg_4) - (sa_8 * cg_3)),\n            (((ca_7 * sb_6) * cg_3) + (sa_8 * sg_4)),\n            0.0\n        ),\n        vec4(\n            (sa_8 * cb_5),\n            (((sa_8 * sb_6) * sg_4) + (ca_7 * cg_3)),\n            (((sa_8 * sb_6) * cg_3) - (ca_7 * sg_4)),\n            0.0\n        ),\n        vec4(-sb_6, (cb_5 * sg_4), (cb_5 * cg_3), 0.0),\n        vec4(0.0, 0.0, 0.0, 1.0)\n    );\n}\n\nvec4 V16557d10_1de4e4c0_0(mat4 mat_0, vec4 vec_1) {\n    return vec4(\n        dot(mat_0[0], vec_1),\n        dot(mat_0[1], vec_1),\n        dot(mat_0[2], vec_1),\n        dot(mat_0[3], vec_1)\n    );\n}\n\nvec3 xyz_1aedf216(vec4 v_0) {\n    return vec3(v_0.x, v_0.y, v_0.z);\n}\n\nvec3 rotate_6734d670(vec3 v_0, float x_1, float y_2, float z_3) {\n    return xyz_1aedf216(V16557d10_1de4e4c0_0(rotate_d804569c(x_1, y_2, z_3), vec4(v_0, 1.0)));\n}\n\nvec3 cross_54f2119c(vec3 one_0, vec3 two_1) {\n    return vec3(\n        ((one_0.y * two_1.z) - (two_1.y * one_0.z)),\n        ((one_0.z * two_1.x) - (two_1.z * one_0.x)),\n        ((one_0.x * two_1.y) - (two_1.x * one_0.y))\n    );\n}\n\nconst float EPSILON_17261aaa = 0.00010;\n\nfloat V59e3c5cf(GLSLEnv_451d5252 env_0, vec3 pos_1) {\n    vec3 pos_2 = rotate_6734d670(pos_1, 0.0, (env_0.time / 2.0), env_0.time);\n    float period_4 = (30.0 * (sin(env_0.time) + 1.0));\n    return ((length(pos_2) - 0.50) - (((sin((pos_2.x * period_4)) + sin((pos_2.z * period_4))) + sin(\n        (pos_2.y * period_4)\n    )) / (((sin((env_0.time / 2.0)) + 1.0) * 60.0) + 1.0)));\n}\n\nmat4 viewMatrix_c336d78c(vec3 eye_0, vec3 center_1, vec3 up_2) {\n    vec3 f_3 = normalize((center_1 - eye_0));\n    vec3 s_4 = normalize(cross_54f2119c(f_3, up_2));\n    vec3 u_5 = cross_54f2119c(s_4, f_3);\n    vec4 lambdaBlockResult_7;\n    vec3 spread_6 = -f_3;\n    lambdaBlockResult_7 = vec4(spread_6.x, spread_6.y, spread_6.z, 0.0);\n    return mat4(\n        vec4(s_4.x, s_4.y, s_4.z, 0.0),\n        vec4(u_5.x, u_5.y, u_5.z, 0.0),\n        lambdaBlockResult_7,\n        vec4(0.0, 0.0, 0.0, 1.0)\n    );\n}\n\nvec3 rayDirection_6258178a(float fieldOfView_0, vec2 size_1, vec2 fragCoord_2) {\n    return normalize(\n        vec3((fragCoord_2 - (size_1 / 2.0)), -(size_1.y / tan((radians(fieldOfView_0) / 2.0))))\n    );\n}\n\nvec3 estimateNormal_1fd17220(GLSLEnv_451d5252 env_1, vec3 p_2) {\n    return normalize(\n        vec3(\n            (V59e3c5cf(env_1, vec3((p_2.x + EPSILON_17261aaa), p_2.y, p_2.z)) - V59e3c5cf(\n                env_1,\n                vec3((p_2.x - EPSILON_17261aaa), p_2.y, p_2.z)\n            )),\n            (V59e3c5cf(env_1, vec3(p_2.x, (p_2.y + EPSILON_17261aaa), p_2.z)) - V59e3c5cf(\n                env_1,\n                vec3(p_2.x, (p_2.y - EPSILON_17261aaa), p_2.z)\n            )),\n            (V59e3c5cf(env_1, vec3(p_2.x, p_2.y, (p_2.z + EPSILON_17261aaa))) - V59e3c5cf(\n                env_1,\n                vec3(p_2.x, p_2.y, (p_2.z - EPSILON_17261aaa))\n            ))\n        )\n    );\n}\n\nfloat shortestDistanceToSurface_94f41dfc(\n    GLSLEnv_451d5252 env_1,\n    vec3 eye_2,\n    vec3 marchingDirection_3,\n    float start_4,\n    float end_5,\n    int stepsLeft_6\n) {\n    for (int i=0; i<10000; i++) {\n        float dist_7 = V59e3c5cf(env_1, (eye_2 + (start_4 * marchingDirection_3)));\n        if ((dist_7 < EPSILON_17261aaa)) {\n            return start_4;\n        } else {\n            float depth_8 = (start_4 + dist_7);\n            if (((depth_8 >= end_5) || (stepsLeft_6 <= 0))) {\n                return end_5;\n            } else {\n                start_4 = depth_8;\n                stepsLeft_6 = (stepsLeft_6 - 1);\n                continue;\n            };\n        };\n    };\n}\n\nvec3 getWorldDir_92052fca(vec2 resolution_0, vec2 coord_1, vec3 eye_2, float fieldOfView_3) {\n    vec3 viewDir_4 = rayDirection_6258178a(fieldOfView_3, resolution_0, coord_1);\n    return xyz_1aedf216(\n        V16557d10_1de4e4c0_0(\n            viewMatrix_c336d78c(vec3(0.0, 0.0, 5.0), vec3(0.0, 0.0, 0.0), vec3(0.0, 1.0, 0.0)),\n            vec4(viewDir_4.x, viewDir_4.y, viewDir_4.z, 0.0)\n        )\n    );\n}\n\nvec4 Vdb8cedd2(GLSLEnv_451d5252 env_9, vec2 coord_10) {\n    vec3 eye_11 = vec3(0.0, 0.0, 5.0);\n    vec3 worldDir_12 = getWorldDir_92052fca(env_9.resolution, coord_10, eye_11, 45.0);\n    float dist_13 = shortestDistanceToSurface_94f41dfc(env_9, eye_11, worldDir_12, 0.0, 100.0, 255);\n    if ((dist_13 > (100.0 - EPSILON_17261aaa))) {\n        return vec4(0.0);\n    } else {\n        return vec4(estimateNormal_1fd17220(env_9, (eye_11 + (worldDir_12 * dist_13))), 1.0);\n    };\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n\n    fragColor = Vdb8cedd2(\n        GLSLEnv_451d5252(iTime, iResolution.xy, vec3(0.0), iMouse.xy),\n        fragCoord.xy\n    );\n\n}","name":"Image","description":"","type":"image"}]}