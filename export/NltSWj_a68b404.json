{"ver":"0.1","info":{"id":"NltSWj","date":"1639793173","viewed":228,"name":"spider's web","username":"4eckme","description":"//mode 1 (if light):\nif(web.w>_space)rgba=(_uno-(web+txtr1))*txtr2*sqrt(_double);\n//mode 2 (for all):\nif(web.w>_space)rgba=_uno-clamp((_uno-(web+txtr1))/txtr2/pow(_double,2.0),_space,_uno);}\n\n>mode 1 more pleasing but it less suitable for dark bg","likes":3,"published":1,"flags":34,"usePreview":0,"tags":["rgb","polar","spider","cartesian","web"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 rgba, in vec2 spider)\n{\n    // base vars.\n    float _bufferA,          _bufferB,\n    _space   = 0.0,    _cube  =   8.0,\n    _uno     = 1.0,    _angle =  45.0,\n    _double  = 2.0,    _byte  = 256.0;\n    \n    // helpers.\n    vec2 R=iResolution.xy;vec4 M=iMouse;\n    float T1=iTime/_double,T2=iTime*_double,T3=T2*_double;\n    \n    // web morph.\n    vec2 safe  = spider;\n    float wave = T1/_double+length(spider)/(_angle);\n    spider.x = float(spider.x)+_cube*sin(wave);\n    spider.y = float(spider.y)+_cube*cos(wave);\n    \n    // get cartesian mouse coord.\n    M=vec4(M.xy-R/_double,_space,_space);\n    M.z=float(M.x>=_space);\n    M.w=float(M.x>=_space);\n    M.xy+=M.zw;//drop 0\n    if(M.x*M.y!=_space){\n        _bufferA=(\n            sin(ceil(length(M.xy))/_double)+\n            _uno+_uno/(_double+_double+_double)\n        )*_byte;\n        _bufferB=ceil(mod((M.x/_cube),_cube-_uno)+_double*_double);\n        int step=int(mod(_bufferB,radians(_angle*_cube)));\n        _bufferB+=float(step==0||step==6);\n    }else{//stereotypes\n        _bufferA=_byte;\n        _bufferB=_cube;\n    }\n    \n    // get cartesian and polar coord.\n    vec4 spy=vec4(\n        (spider.xy-R.xy/_double)-(M.xy),\n        spider.x>=_space,\n        spider.y>=_space\n    );spy.xy+=spy.zw;//drop 0\n    spy.zw=vec2(\n        length(spy.xy),\n        degrees(atan(spy.y,spy.x))\n    );\n    \n    // make web.\n    bool framework=(\n        int(mod(spy.w,_angle))/int(_double)\n        !=int(_angle/_double)/int(_double)\n    );float webroot=pow(max(\n        max(abs(spy.x),abs(spy.y))*sqrt(_double),\n        max(abs(spy.x-spy.y),abs(spy.x+spy.y))\n    ),_double)/spy.z;\n    vec4 web=vec4(_space);\n    if(webroot<_bufferA&&!framework){web=vec4(\n        sin(spy.w/_angle+T3),\n        sin(spy.w/_angle+T3+_uno),\n        sin(spy.w/_angle+T3+_double),\n        _bufferA)+vec4(vec3(_uno/_double),_space);}\n    for(float node=_space;node<_bufferA;node+=_bufferB){\n        if(webroot>node&&webroot<node+_bufferB&&framework){web=vec4(\n           sin(node*_angle+T2),\n           sin(node*_angle+T2+_uno),\n           sin(node*_angle+T2+_double),\n           _bufferA)+vec4(vec3(_uno/_double),_space);}\n    }\n    \n    // web to texture.\n    rgba=vec4(_uno);\n    web=clamp(web,_space,_uno);\n    vec4 txtr1=texture(iChannel0,safe/R.xy);\n    vec4 txtr2=texture(iChannel1,safe/R.xy);\n    txtr2=clamp(txtr2,_space,_uno);\n    //mode 1 (if light):\n    if(web.w>_space)rgba=(_uno-(web+txtr1))*txtr2*sqrt(_double);\n    //mode 2 (for all):\n    //if(web.w>_space)rgba=_uno-clamp((_uno-(web+txtr1))/txtr2/pow(_double,2.0),_space,_uno);\n    else rgba=vec4(txtr2);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage(out vec4 rgba, in vec2 o){\n    vec2 uv=o/iResolution.xy;\n    float r=o.x*o.x+o.y*o.y;\n    vec3 rgb=.5+.5*cos(iTime*4.0+uv.xyx+vec3(0,2,4));\n    rgba=vec4(rgb*floor(mod(r/2.,2.)),1);\n}","name":"Buffer A","description":"","type":"buffer"}]}