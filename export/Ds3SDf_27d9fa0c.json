{"ver":"0.1","info":{"id":"Ds3SDf","date":"1680485681","viewed":118,"name":"A walk in the modular group","username":"zenzicubic","description":"The fundamental domain of the modular group in the Poincare disk, rendered using the IIS algorithm","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["group","hyperbolic","poincare"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define NUMITERS 50\n\nvec3 colors[2] = vec3[](vec3(0.196,0.263,0.463), vec3(0.969,0.424,0.369));\n\nvec2 cinv(vec2 z) { return vec2(z.x, -z.y) / dot(z, z); }\nvec2 cmul(vec2 a, vec2 b) { return vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x); }\nvec2 cdiv(vec2 a, vec2 b) { return cmul(a, cinv(b)); }\n\nvec3 IIS(vec2 p)\n{\n    int c = 0;\n    bool inOutside;\n    \n    for (int i = 0; i < NUMITERS; i++) \n    {\n        inOutside = true;\n        if (length(p) < 1.) {\n            p = cinv(p);\n            c ++;\n            inOutside = false;\n        }\n        if (p.x > 0.) {\n            p.x *= -1.;\n            c ++;\n            inOutside = false;\n        }\n        if (p.x < -.5)\n        {\n            p.x = -1. - p.x;\n            c ++;\n            inOutside = false;\n        }\n        if (p.x > .5)\n        {\n            p.x = 1. - p.x;\n            c ++;\n            inOutside = false;\n        }\n        \n        if (inOutside) break;\n    }\n    \n    return colors[c % 2];\n}\n\nvoid mainImage(out vec4 k, in vec2 c)\n{\n    vec2 z = (2. * c - iResolution.xy) / iResolution.y;\n    \n    if (length(z) > 1.0) {\n        k = vec4(0.);\n    } else {\n        z = cdiv(vec2(0., 1.) - vec2(z.y, -z.x), z - vec2(1., 0.));\n        z.x += 0.2 * iTime;\n        k = vec4(IIS(z), 0.);\n    }\n}","name":"Image","description":"","type":"image"}]}