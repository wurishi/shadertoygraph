{"ver":"0.1","info":{"id":"wdyyDR","date":"1603707073","viewed":166,"name":"Classical Waves Accident","username":"t42","description":"An attempt at a water ripple simulation. Use the mouse to make ripples.","likes":5,"published":1,"flags":32,"usePreview":0,"tags":["waves","simulation","water"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    ivec2 coord = ivec2(fragCoord);\n    \n    \n    //fragColor = texelFetch(iChannel3, coord, 0).rrra;\n    //fragColor += vec4(vec3(texelFetch(iChannel0, coord, 0).r), 1.);\n    \n    //float center = texelFetch(iChannel0, coord, 0).r;\n    \n    vec3 normal = vec3(- texelFetchOffset(iChannel0, coord, 0, ivec2( 1,  0)).r,\n                       - texelFetchOffset(iChannel0, coord, 0, ivec2( 0,  1)).r, 1.)\n        \t\t  + texelFetch(iChannel0, coord, 0).r;\n    \n    //normal.b=1.; //you can uncomment this to fix it\n    \n    normal = -normalize(normal) + .5;\n    \n    fragColor = vec4(normal, 1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define damping 0.99//5\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    ivec2 coord = ivec2(fragCoord);\n    \n    \n    fragColor.r = .5 * ( texelFetchOffset(iChannel0, coord, 0, ivec2( 1,  0)).r\n    \t\t\t\t   + texelFetchOffset(iChannel0, coord, 0, ivec2(-1,  0)).r\n    \t\t\t\t   + texelFetchOffset(iChannel0, coord, 0, ivec2( 0,  1)).r\n    \t\t\t\t   + texelFetchOffset(iChannel0, coord, 0, ivec2( 0, -1)).r);\n    \n    fragColor.r = damping * ( fragColor.r - texelFetch(iChannel0, coord, 0).g );\n    \n    fragColor.r += iMouse.z > 0.0 ? smoothstep(.05, 0., distance(fragCoord, iMouse.xy)/iResolution.x) : 0.;\n    \n    fragColor.g = texelFetch(iChannel0, coord, 0).r;\n}","name":"Buffer A","description":"","type":"buffer"}]}