{"ver":"0.1","info":{"id":"7t2yzR","date":"1649090955","viewed":125,"name":"Mobius Truchet","username":"sinvec","description":"Based on [url=https://www.shadertoy.com/view/XsGXDV]this shader[/url].","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["mobius","truchet"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159\n#define s(v,l) smoothstep(l/R.y,0.,v) // AA\n#define r(a) (mat2(cos(a),sin(a),-sin(a),cos(a))) // 2d rotation matrix\n#define R iResolution.xy\n\nvec2 Mobius(vec2 p, vec2 z1, vec2 z2){\n\n\tz1 = p - z1; p -= z2;\n\treturn vec2(dot(z1, p), z1.y*p.x - z1.x*p.y)/dot(p, p);\n}\n\nvec2 spiralZoom(vec2 p, vec2 offs, float n, float spiral, float zoom, vec2 phase){\n\t\n\tp -= offs;\n\tfloat a = atan(p.y, p.x)/6.283 - iTime*.1;\n\tfloat d = log(length(p));\n\treturn vec2(a*n + d*spiral, a - d*zoom) + phase;\n}\n\nfloat circle (vec2 p, vec2 c, float r, float w){\n    return abs(length(p-c)-r)-w;\n}\n\nvec3 pattern(vec2 u, vec3 col) {\n    u*=30.;\n    vec2 grid = floor(u);\n    float id = grid.x;\n    vec2 cent = u-grid-.5;\n\tcent = r(PI/2. * floor(id * 7.)) * cent;\n\n    vec3 col1 = col;\n    vec3 col2 = col;\n    \n    col = mix(col, vec3(1.,1.,.1), s(circle(cent, vec2(.5,-.5), .95, .09),3.));\n    col = mix(col, vec3(1.,1.,.1), s(circle(cent, vec2(-.5,-.5), .95, .09),3.));\n    col = mix(col, vec3(1.,1.,.1), s(circle(cent, vec2(-.5,.5), .95, .09),3.));\n    col = mix(col, vec3(1.,1.,.1), s(circle(cent, vec2(.5,.5), .95, .09),3.));\n  \n    col = mix(col, col1, s(circle(cent, vec2(.5,-.5), .95, .06),3.));\n    col = mix(col, col1, s(circle(cent, vec2(-.5,-.5), .95, .06),3.));\n    col = mix(col, col1, s(circle(cent, vec2(-.5,.5), .95, .06),3.));\n    col = mix(col, col1, s(circle(cent, vec2(.5,.5), .95, .06),3.));\n    \n    col1 = col;\n    \n    col = mix(col, col1, s(circle(cent, vec2(.5,-.5), 1., .01),3.));\n    col = mix(col, col1, s(circle(cent, vec2(-.5,-.5), 1., .01),3.));\n    col = mix(col, col1, s(circle(cent, vec2(-.5,.5), 1., .01),3.));\n    col = mix(col, col1, s(circle(cent, vec2(.5,.5), 1., .01),3.));\n    \n    col = mix(col, vec3(1.), s(circle(cent, vec2(.5,-.5), .21, .06),3.));\n    col = mix(col, vec3(1.), s(circle(cent, vec2(-.5,-.5), .21, .06),3.));\n    col = mix(col, vec3(1.), s(circle(cent, vec2(-.5,.5), .21, .06),3.));\n    col = mix(col, vec3(1.), s(circle(cent, vec2(.5,.5), .21, .06),3.));\n    \n    col = mix(col, col1, s(circle(cent, vec2(.5,-.5), .21, .03),3.));\n    col = mix(col, col1, s(circle(cent, vec2(-.5,-.5), .21, .03),3.));\n    col = mix(col, col1, s(circle(cent, vec2(-.5,.5), .21, .03),3.));\n    col = mix(col, col1, s(circle(cent, vec2(.5,.5), .21, .03),3.));\n    \n    col = mix(col, vec3(1.), s(circle(cent, vec2(-.5,.5), .5, .08),3.));\n\tcol = mix(col, vec3(1.), s(circle(cent, vec2(.5,-.5), .5, .08),3.));\n    \n    col = mix(col, col2, s(circle(cent, vec2(-.5,.5), .5, .06),3.));\n\tcol = mix(col, col2, s(circle(cent, vec2(.5,-.5), .5, .06),3.));\n    \n    col = mix(col, vec3(1.), s(circle(cent, vec2(.5,-.5), .06, .01),3.));\n    col = mix(col, vec3(1.), s(circle(cent, vec2(-.5,-.5), .06, .01),3.));\n    col = mix(col, vec3(1.), s(circle(cent, vec2(-.5,.5), .06, .01),3.));\n    col = mix(col, vec3(1.), s(circle(cent, vec2(.5,.5), .06, .01),3.));\n    \n    return col;\n}\n\nvec3 final_image(vec2 uv)\n{\n\n    vec3 col = vec3(max(1. - length(uv), 0.)*.025); \n    uv = Mobius(uv, vec2(-.75, cos(iTime)*.25), vec2(.5, sin(iTime)*.1));\n    uv = spiralZoom(uv, vec2(0.), 2., 0., .4, vec2(-1, 1)*iTime*.1);\n    col = pattern(uv.yx*.2, col);\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord - R*.5)/iResolution.y;\n    vec3 col = final_image(uv);\n    fragColor = vec4(sqrt(col),1.0);\n}","name":"Image","description":"","type":"image"}]}