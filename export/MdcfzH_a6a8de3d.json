{"ver":"0.1","info":{"id":"MdcfzH","date":"1524060595","viewed":656,"name":"CRT TV Effect","username":"pixartist","description":"CRT Effect","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["ray","effect","crt","tube","television","cathode"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define CRT_STRENGTH 0.8\n#define CA_MAX_PIXEL_DIST 5.0\n#define BORDER_SIZE 0.2\n#define BORDER_STRENGTH 0.8\n#define SATURATION 1.4\n\n\nvec4 read(vec2 uv)\n{\n    //you might wanna do stuff here when using this in your shader\n    return texture(iChannel0, uv);\n}\nvec3 saturation(vec3 rgb, float amount)\n{\n    const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    vec3 intensity = vec3(dot(rgb, W));\n    return mix(intensity, rgb, amount);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2[3] ca;\n    ca[0] = vec2(-CA_MAX_PIXEL_DIST, -CA_MAX_PIXEL_DIST);\n    ca[1] = vec2(0.0);\n    ca[2] = vec2(CA_MAX_PIXEL_DIST, CA_MAX_PIXEL_DIST);\n    \n    vec2 pixel = 1.0 / iResolution.xy;\n    vec2 uv = fragCoord * pixel;\n\n\n    int row = int(fragCoord.y)%2;\n    int col = (int(fragCoord.x)+row)%3;\n    \n    vec2 nuv = 2. * abs(uv-vec2(0.5));\n    vec2 caShift = (length(nuv) / sqrt(2.0)) * pixel;\n    \n    vec3 src = vec3(0.0);\n    for(int i = 0; i < 3; i++)\n    {\n        src[i] = read(uv - ca[i] * caShift)[i] * ((i==col) ? 1.0 : 1.-CRT_STRENGTH);\n    }\n    float d = (1.-nuv.x) * (1.-nuv.y);\n    d = (1.-BORDER_STRENGTH) + BORDER_STRENGTH * smoothstep(0.0, BORDER_SIZE, sqrt(d));\n    src *= d;\n    src = saturation(src, SATURATION);\n    fragColor = vec4(src,1.0);\n}","name":"Image","description":"","type":"image"}]}