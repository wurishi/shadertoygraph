{"ver":"0.1","info":{"id":"3lBGDm","date":"1559732065","viewed":577,"name":"Circle truchet tiles bit viz","username":"avin","description":"simple truchet + soundviz","likes":6,"published":3,"flags":64,"usePreview":0,"tags":["truchet"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4tfGz2","filepath":"https://soundcloud.com/modernproducers/play-this-shit-hard-drum-kit-demo","previewfilepath":"https://soundcloud.com/modernproducers/play-this-shit-hard-drum-kit-demo","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define LAYERS 3.\n#define PI_4 0.78539815\n#define PI_2 1.5707963\n\n#define SIZE 30.\n\n#define rand1(p) fract(sin(p* 78.233)* 43758.5453) \n#define SF 1./min(iResolution.x,iResolution.y)\n\n#define sinp(v) (sin(v)*.5+.5)\n\nmat2 rot(float a){\n\tfloat ca = cos(a);\n    float sa = sin(a);\n    return mat2(ca,-sa,sa,ca);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{    \n    vec2 uv = (fragCoord - .5*iResolution.xy)/iResolution.y;\n    \n    float m = 0.;\n    for(float i=0.; i<LAYERS; i++){\n        \n        float size = SIZE + sin(iTime)*5.;\n        float sv = texelFetch(iChannel0, ivec2(10., 0.), 0).x-.5;               \n        vec2 guv = uv*size * (1.+i*(sv)*.2) + vec2(sin(iTime*.3), cos(iTime*.2))*10.;\n        vec2 gid = floor(guv);\n        guv = fract(guv) - .5;\n\n        float gidHash = floor((rand1(gid.x + gid.y*100.))*2.);    \n        guv *= rot(PI_2 * (gidHash));\n\n        float sf = SF*size*2.;\n        float l = length(guv - .5);    \n        m += smoothstep(sf,.0, abs(l-.5));\n\n        l = length(guv + .5);    \n        m += smoothstep(sf,.0, abs(l-.5));\n    }\n            \n    m/=LAYERS;\n    \n    fragColor = vec4(1.-m);\n}","name":"Image","description":"","type":"image"}]}