{"ver":"0.1","info":{"id":"WtG3Ww","date":"1579037429","viewed":152,"name":"Cycloid","username":"nurof3n","description":"A circle tracing its corresponding cycloid","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["parametric","cycloid"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float r = 0.5;\nconst float pi = 3.141592;\n\nvec2 cycloid(float t) {\n\treturn vec2( r*(t - sin(t)), r*(1.0 - cos(t)) );    \n}\n\nfloat disttoline(vec2 a, vec2 b, vec2 p) {\n \treturn abs( (b.y-a.y)*p.x - (b.x-a.x)*p.y + b.x*a.y-a.x*b.y ) / sqrt( dot(b-a, b-a) ) \n        * (length(a-p) + length(b-p) - length(a-b) < 0.001 ? 1.0 : 3000.0);   \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = 2.0*pi*r * (2.0 * fragCoord - iResolution.xy)/iResolution.x + vec2(pi*r, 0.7);\n\n    float dist = 10.0;\n    float x = iTime * 3.0;\n    float tpos = 4.0*pi*r*sin(x*0.25) + pi;// = mod( (x - 2.0*mod(x, 4.0*pi) * step(4.0*pi, mod(x, 8.0*pi))), 4.0*pi ) - pi;\n    for(float t = -pi; t < tpos; t += 0.01) {\n    \tvec2 point = cycloid(t);\n        dist = min(dist, length(point - uv));\n    }\n    \n    vec2 circle = vec2(r*tpos, r);\n    vec2 finalpoint = cycloid(tpos);\n    float linedist = disttoline( circle, finalpoint, uv );\n    vec3 color = mix(vec3(0.0), mix( vec3(1.0), vec3(0.95, 0.96, 0.73), smoothstep(0.0, -0.01, length(uv-circle)-r) ), smoothstep(0.0, 0.01, abs(length(uv-circle)-r)));\n    color = mix(color, vec3(1.0, 0.0, 0.0), smoothstep(0.01, 0.0, dist));\n    color = mix(color, vec3(0.0), step(length(uv - finalpoint), 0.02));\n    color = mix( color, mix( vec3(0.0), vec3(.8, .5, .51) + pow(0.5, 1.2+7.0*abs(circle.x-uv.x))*pow(0.5, 2.0*(-uv.y)), smoothstep(0.0, 0.01, abs(uv.y + 0.005)) ), step(uv.y, 0.00) );\n    color = mix(color, vec3(0.0), smoothstep(0.01, 0.0, linedist));\n    \n    \n    fragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}