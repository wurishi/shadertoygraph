{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"webcam","id":"4sf3zn","filepath":"/presets/webcam.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"#define pi 3.14159265359\n\nvec4 blend_with_center(vec2 center, vec2 uv, vec2 diff) {\n    vec2 centered_uv = uv - center;\n    float shift = 0.03;\n    vec3 col = vec3(\n        texture(iChannel0, centered_uv).r,\n        texture(iChannel0, vec2(centered_uv.x, \n                                centered_uv.y+shift)).g,\n        texture(iChannel0, vec2(centered_uv.x, \n                                centered_uv.y+2.*shift)).b\n    );\n    float alpha = 1.-smoothstep(0.,0.3,length(centered_uv-diff));\n    return vec4(col, alpha);\n}\n\n// Position of each reflection \n/*\nvec2 centers[8] = vec2[](\n    vec2(0.4, 0.0), vec2(-0.4, 0.0),\n    vec2(0.0, 0.5), vec2(0.0, -0.5),\n    vec2(0.25, 0.3), vec2(0.25, -0.3),\n    vec2(-0.25, 0.3), vec2(-0.25, -0.3)\n);\n*/\n\n// Center of each reflection \n// something around vec2(0.5, 0.5)\n\nvec2 diff[8] = vec2[](\n    vec2(0.55, 0.6), vec2(0.5, 0.4),\n    vec2(0.4, 0.55), vec2(0.6, 0.6),\n    vec2(0.5, 0.5), vec2(0.55, 0.45),\n    vec2(0.4, 0.6), vec2(0.5, 0.4)\n);\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    ///////////////////////////\n    \n    float speed = 1.;\n    float alpha = 2.*pi/8.;\n    float radius = 0.4;\n    \n    ///////////////////////////\n    \n    vec2 centers[8] = vec2[](\n        vec2(radius*cos(0. * alpha+speed*iTime), \n             radius*sin(0. * alpha+speed*iTime)),\n        vec2(radius*cos(1. * alpha+speed*iTime), \n             radius*sin(1. * alpha+speed*iTime)),\n        vec2(radius*cos(2. * alpha+speed*iTime), \n             radius*sin(2. * alpha+speed*iTime)),\n        vec2(radius*cos(3. * alpha+speed*iTime), \n             radius*sin(3. * alpha+speed*iTime)),\n        vec2(radius*cos(4. * alpha+speed*iTime), \n             radius*sin(4. * alpha+speed*iTime)),\n        vec2(radius*cos(5. * alpha+speed*iTime), \n             radius*sin(5. * alpha+speed*iTime)),\n        vec2(radius*cos(6. * alpha+speed*iTime), \n             radius*sin(6. * alpha+speed*iTime)),\n        vec2(radius*cos(7. * alpha+speed*iTime), \n             radius*sin(7. * alpha+speed*iTime))\n    );\n    \n    \n    ////////////////////\n    ///    Clones    ///\n    ////////////////////\n    \n    vec2 uv = fragCoord/iResolution.xy; \n    vec4 base = texture(iChannel0, uv);\n    \n    ////////////////\n    ////////////////\n    \n    float count = 8.;\n    \n    ////////////////\n    ////////////////\n    \n    vec4 final_col = vec4(0.);\n    float sum_alpha = 0.;\n    \n    for (float i=0.; i<count; ++i) {\n        vec4 col = blend_with_center(\n            centers[int(i)], uv, diff[int(i)]\n        );\n        final_col += col.a * col;\n        sum_alpha += col.a;\n    }\n    final_col /= sum_alpha;\n    if (sum_alpha == 0.)\n        final_col = vec4(0.5);\n    sum_alpha = (sum_alpha > 1.) ? 1.: sum_alpha;\n\n    fragColor = mix(base, final_col, sum_alpha);\n    // fragColor = max(base, final_col*sum_alpha);\n    \n    \n    ///////////////////////////////////////\n    ///    Overlaying with \"plyonka\"    ///\n    ///////////////////////////////////////\n    \n    vec2 new_pos;\n    vec2 shift = vec2(15./iResolution.x, 0.);\n    \n    if (uv.x < 0.5) {\n        new_pos = vec2(uv.x/2., uv.y);\n        // new_pos = vec2((uv.x+0.5+1.)/2., uv.y);\n    } else {\n        new_pos = vec2((uv.x+1.)/2., uv.y);        \n        shift *= -1.;\n    \t// new_pos = vec2((uv.x-0.5)/2., uv.y);\n    }\n    \n    vec4 overlay = vec4(\n        texture(iChannel0, new_pos).r,\n        texture(iChannel0, new_pos+shift).g,\n        texture(iChannel0, new_pos+2.*shift).b,\n        1.\n    );\n    \n    fragColor = mix(fragColor, overlay, pow(2.*abs(uv.x-0.5), 2.));\n}\n\n\n\n\n\n\n\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":true,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"WsKcz1","date":"1734267723","viewed":69,"name":"Dreamy.No.3","username":"avartation","description":"aha","likes":2,"published":1,"flags":2,"usePreview":0,"tags":["dreamy3"],"hasliked":0,"parentid":"","parentname":""}}