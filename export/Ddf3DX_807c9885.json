{"ver":"0.1","info":{"id":"Ddf3DX","date":"1668771658","viewed":105,"name":"Bayer Pattern with Bitwise Ops","username":"jiangyiheng","description":"Bayer matrix 4x4","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["bayer"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"uint ibayer4x4(uvec2 ip) {\n    uint x = ip.x, y = ip.y;\n    //x += uint(iFrame);\n    //y += uint(iFrame) >> 2;\n    uint t = x^y;\n    return ((t<<3)&8u)|((y<<2)&4u)|(t&2u)|((y>>1)&1u);\n}\n\nuint ibayer8x8(uvec2 ip) {\n    return (ibayer4x4(ip) << 4) | ibayer4x4(ip >> 2);\n}\n\nfloat bayer4x4(uvec2 ip) {\n    return float(ibayer4x4(ip)) / 16.0;\n}\n\nfloat bayer8x8(uvec2 ip){\n    return float(ibayer8x8(ip)) / 256.0;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    uvec2 ip = uvec2(fragCoord.xy);\n    \n    float vid = texture(iChannel0, fragCoord.xy/iResolution.xy).g;\n    vec3 col = vid - bayer8x8(ip) > 0.0 ? vec3(1.0,1.0,1.0) : vec3(0.0,0.0,0.0);\n    \n    if (ip.x < 256u && ip.y < 256u) fragColor = vec4(bayer8x8(ip>>5), 0.0, 0.0, 1.0);\n    else fragColor = vec4(col ,1.0);\n}","name":"Image","description":"","type":"image"}]}