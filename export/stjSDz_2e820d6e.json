{"ver":"0.1","info":{"id":"stjSDz","date":"1628002738","viewed":70,"name":"Calcifer - Holw moving castel","username":"KrankerApfel","description":"Calcifer ","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["noob"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRn","filepath":"/media/a/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","previewfilepath":"/media/ap/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SCLERA_R 0.05\n#define IRIS_R 0.012\n#define BTW_EYES_DIST 0.13\n#define MOUTH_TO_EYES_DIST 0.13\n#define TOON_AMOUNT 4.0\n#define BODY_R 0.23\n#define INNER_BODY_R 0.15\n#define HALO 0.1\n#define INNER_SMOOTH 0.1\n\n\n// fire texture to inject in browser console:\n// gShaderToy.SetTexture(0, {mSrc:'https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory2&fname=http%3A%2F%2Fcfile21.uf.tistory.com%2Fimage%2F99E3A1445BD6C600021ED7', mType:'texture', mID:1, mSampler:{ filter: 'mipmap', wrap: 'repeat', vflip:'true', srgb:'false', internal:'byte' }});\n\n\nfloat sclera(vec2 middle, vec2 uv){\n\n    vec2 leftEyePos = middle - vec2(BTW_EYES_DIST, 0.) ;\n    float leftSclera =  smoothstep(0.005, 0.,length(leftEyePos-uv)-SCLERA_R);\n    \n    vec2 rightEyePos = middle + vec2(BTW_EYES_DIST, 0.);\n    float rightSclera =  smoothstep(0.005, 0.,length(rightEyePos-uv)-SCLERA_R);\n\n    return (rightSclera+leftSclera);\n}\n\nfloat iris(vec2 middle, vec2 uv)\n{\n    vec2 leftEyePos = middle - vec2(BTW_EYES_DIST-0.01, 0.005) ;\n    vec2 rightEyePos = middle + vec2(BTW_EYES_DIST-0.01, -0.005);\n\n    float leftIris =  smoothstep(0.005, 0.,length(leftEyePos-uv)-IRIS_R);\n    float rightIris =  smoothstep(0.005, 0.,length(rightEyePos-uv)-IRIS_R);\n    \n   return (rightIris+leftIris);\n\n}\n\nfloat mouth(vec2 middleEyes,vec2 uv)\n{\n  vec2 pos = vec2(middleEyes.x, middleEyes.y + MOUTH_TO_EYES_DIST); \n  float shape = smoothstep(0.005, 0.,length(pos-uv)-0.03);\n  return shape;\n}\n\n// (c) inigo quilez\nfloat sdRoundedBox( in vec2 p, in vec2 b, in vec4 r )\n{\n    r.xy = (p.x>0.0)?r.xy : r.zw;\n    r.x  = (p.y>0.0)?r.x  : r.y;\n    vec2 q = abs(p)-b+r.x;\n    return min(max(q.x,q.y),0.0) + length(max(q,0.0)) - r.x;\n}\n\n\nfloat overlay(float a, float b)\n{\n    if(a<0.5) return 2.*a*b;\n    return (1.-2.)*(1.-a)*(1.-b);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = .5-(fragCoord/iResolution.xy);\n    uv.x *=iResolution.x/iResolution.y;\n    \n        \n    //flame (body)\n    float displace = texture(iChannel0,vec2(uv.x,-uv.y+iTime*0.5)).r;\n    vec2 pos = vec2(0.,0.);\n\n \n    float bodyMask  = smoothstep(HALO, 0.,length(uv-pos)-BODY_R);\n    float innerBodyMask  = smoothstep(INNER_SMOOTH, 0.,length(uv-pos-vec2(0.,0.06))-INNER_BODY_R);\n\n    float colorCoeff = floor((displace+length(pos))*TOON_AMOUNT)/TOON_AMOUNT;\n    vec3 flameColor = vec3(1.,0.5*(1.-colorCoeff),.25);\n    vec3 innerFlameColor = vec3(1.,0.5,0.2);\n\n    \n    vec3 body = flameColor*(bodyMask+ overlay(-1., displace)) + innerFlameColor*innerBodyMask;\n    body*=1.2;\n   // face\n    float s = sclera(vec2(0.),uv);   \n    float i = 1.-iris(vec2(0.),uv);   \n\n    float m = mouth(vec2(0.),uv);\n    body +=s;\n    \n    // Output to screen\n    fragColor = vec4( body*i + m,1.0);\n}","name":"Image","description":"","type":"image"}]}