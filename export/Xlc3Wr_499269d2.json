{"ver":"0.1","info":{"id":"Xlc3Wr","date":"1468605981","viewed":259,"name":"pointillism 1","username":"betsythemuffin","description":"experiments with texture","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["pointillism"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nint randomInt(int maxIndex, vec2 seed) {\n\treturn int(floor(rand(seed) * float(maxIndex)));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    const float CELL_SIZE = 150.0;\n    const float SUBCELL_SIZE = CELL_SIZE * 3.0;\n    \n    vec2 xy = fragCoord.xy / iResolution.xy;\n    \n    vec2 randomSeedForCell    = floor(xy * CELL_SIZE) / CELL_SIZE;\n    vec2 randomSeedForSubcell = floor(xy * SUBCELL_SIZE) / SUBCELL_SIZE;\n    float colorPickOffset = float(randomInt(10, randomSeedForCell)) * 0.1;\n    \n    vec4 textureColor = texture(iChannel0, (floor(xy * CELL_SIZE) + colorPickOffset) / CELL_SIZE );\n    \n    float colorOffsetBase = rand(randomSeedForSubcell);\n    \n    float colorOffset = (1.0 - (colorOffsetBase * colorOffsetBase * colorOffsetBase));\n    \n   \tfragColor = textureColor;\n    if( rand(randomSeedForSubcell) < (1.0 / 3.0) ) {\n    \tfragColor.r = fragColor.r * colorOffset;\n        fragColor.g = fragColor.g * (1.0 / colorOffset);\n    } else if(rand(randomSeedForCell) < (2.0 / 3.0)) {\n        fragColor.g = fragColor.g * colorOffset;\n        fragColor.b = fragColor.b * (1.0 / colorOffset);\n    } else {\n        fragColor.b = fragColor.b * colorOffset;\n        fragColor.r = fragColor.r * (1.0 / colorOffset);\n    }\n}\n","name":"Image","description":"","type":"image"}]}