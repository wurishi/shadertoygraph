{"ver":"0.1","info":{"id":"DldBzl","date":"1701477520","viewed":50,"name":"innercia jam 2023","username":"illus0r","description":"1 dec 2023","likes":6,"published":1,"flags":32,"usePreview":0,"tags":["livecoding"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n\tfragColor=texelFetch(iChannel0,ivec2(fragCoord),0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define time iTime\n#define tx iChannel0\n#define rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define B (noise(time))\n#define BB (noise(time*8))\n#define rnd(x) fract(1.1e4*sin(mod(111.1*(x),3.14)+.1))\n\n\nfloat noise(vec3 p) {\n  vec3 ip=floor(p),s=vec3(7,157,113); p-=ip; p=smoothstep(0.,1.,p);\n  vec4 h=vec4(0,s.yz,s.y+s.z)+dot(ip,s);\n  h=mix(fract(sin(h)*43758.5), fract(sin(h+s.x)*43758.5),p.x);\n  h.xy=mix(h.xz,h.yw,p.y);\n  return mix(h.x,h.y,p.z);\n}\n\nfloat noise(float x){\n\treturn noise(vec3(x));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n\n\n\tvec4 o=vec4(0);\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord*2.-iResolution.xy)/iResolution.y;\n\n\tvec2 uvI=uv;\n\n\tvec2 uvT = gl_FragCoord.xy/iResolution.xy;\n\tuvT-=.5;\n\tuvT*=.93;\n\tuvT.x+=(rnd(time*33.)-.5)*.01;\n\tuvT.y+=(noise(time*44.+99.)-.5)*.01;\n\tuvT*=rot((rnd(time*8.)*.1-.05)*.1);\n\tuvT+=.5;\n\to=texelFetch(tx,ivec2(uvT*iResolution.xy),0);\n\t\n\t\n\t\n\tuv*=rot(rnd(time*8.+length(uv)*8.)-.5);\n\tuv=abs(uv);\n\tif(rnd(time*88.)<.1){\n\t\tif(uv.x<.01&&uv.y<.1){\n\t\t\to=vec4(int(o.a)^1);\n\t\t}\n\t}\n\t\n\tfloat i=0.,d=0.,e=1.;\n\tuv = uvI;\n\tvec3 p,gl=vec3(0);\n\tfor(;i++<50.&&e>1e-3;){\n\t\tp=normalize(vec3(uv,1))*d;\n\t\tp.xz*=rot(time*sign(o.a-.5));\n\t\tp.z-=4.-time*2.*sign(o.a-.5);\n\t\tp = abs(fract(p*.5)*2.-1.)-.5;\n\t\tp.xz*=rot(B*8.);\n\t\tp.yz*=rot(B*8.*.618);\n\t\tif(o.a>.5){\n\t\t\tp=abs(p);\n\t\t\tp-=B*.3;\n\t\t\tp.zx=(p.z<p.x)?p.xz:p.zx;\n\t\t\tp.yx=(p.y>p.x)?p.xy:p.yx;\n\t\t\td+=e=length(p.xz)-B*.01;\n\t\t}\n\t\telse{\n\t\t\td+=e=length(p)-B*.4;\n\t\t}\n\t}\n\to.rgb=mix(o.rgb,vec3(9./i),.4)+gl;\n\to.rb=((o.rb)*rot(time+o.a*3.14))*.5+.5;\n\to.rb+=(9./i);\n\t//o.r=o.a;\n    // Output to screen\n    fragColor = o;\n}","name":"Buffer A","description":"","type":"buffer"}]}