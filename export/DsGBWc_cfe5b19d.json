{"ver":"0.1","info":{"id":"DsGBWc","date":"1698693016","viewed":46,"name":"30. Rush","username":"Ladus","description":"Inktober 2023 Day 30. Rush hour","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["rush","inktober"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define aa 2./iResolution.y/2.\n\n//https://iquilezles.org/articles/distfunctions2d/\nfloat sdBox( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nfloat hash(float i) {\n    return fract(fract(i*292.234*i*23.23)*312.21345+fract(((i+i)*23.234)*24.12));\n}\n\nfloat horizontalLine(vec2 p, float start, float width) {\n    return smoothstep(start-aa,start+aa,p.x) - smoothstep(start+width-aa,start+width+aa,p.x);\n}\n\nvec4 car(vec2 p, vec2 pos, float id) {\n    p += pos;\n    float carSd = sdBox(p, vec2(0.03+(0.01*hash(id)),0.08+(0.02*hash(id))));\n    return vec4(vec3(0.9*hash(id+0.1),0.9*hash(id+0.2),0.9*hash(id+0.3)), smoothstep(0.+aa, 0.-aa, carSd));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = (fragCoord - iResolution.xy*.5)/iResolution.y; // normalize space\n    vec2 xMp = vec2(abs(p.x), p.y);\n\n    // Road\n    float begin = 0.1;\n    float road = horizontalLine(xMp, 0.05,0.5);\n    \n    float yellowLines = horizontalLine(xMp, 0.06,0.01);\n    yellowLines += horizontalLine(xMp, 0.53,0.01);\n    \n    float whiteDashedLines = horizontalLine(xMp, 0.17,0.007);\n    whiteDashedLines += horizontalLine(xMp, 0.295,0.007);\n    whiteDashedLines += horizontalLine(xMp, 0.42,0.007);\n    whiteDashedLines *= clamp(mod(floor(fract(p.y+0.2)*8.),2.),0.,1.);\n    \n    vec3 col = mix(vec3(0.7)*clamp(xMp.x,0.2,0.9), vec3(0.2), road);\n    col = mix(col, vec3(1.,.9,0.), yellowLines);\n    col = mix(col, vec3(0.95),whiteDashedLines);\n    \n    // Cars\n    for(float i = 0.; i < 1.; i += 0.2){\n        for(float j = 0.; j < .8; j += 0.2){\n            vec4 car = car(p, vec2(-0.12-0.6*j,j*0.5+(fract(iTime+(i+0.1*hash(i+j)))*2.)-1.), i+j);\n            col = mix(col, car.rgb, car.a);\n        }\n    }\n    for(float i = 1.; i < 2.; i += 0.2){\n        for(float j = 0.; j < .8; j += 0.2){\n            vec4 car = car(p, vec2(0.12+0.6*j,j*0.5+(fract(-iTime+(i+0.1*hash(i+j)))*2.)-1.), i+j);\n            col = mix(col, car.rgb, car.a);\n        }\n    }\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}