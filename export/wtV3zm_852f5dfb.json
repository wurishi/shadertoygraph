{"ver":"0.1","info":{"id":"wtV3zm","date":"1578589052","viewed":155,"name":"BubblyShapes","username":"antoinefortin","description":"#Shapes","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["shapes"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 rotate(vec2 pos, float angle)\n{\n\tfloat c = cos(angle);\n    float s = sin(angle);\n    \n    return mat2(c,s,-s,c) * pos;\n\n}\n\nfloat plane(vec3 pos)\n{\t\n    \n    vec3 q = pos;\n    \n\treturn q.y;\n}\n\n\nfloat sphere(vec3  pos, float radius)\n{\t\n    pos.y -= 4.0;\n    vec3 q = pos; \n    float r = 3.;\n   // r += 1.0 + cos(iTime + (q.y * 5.));\n    return length(pos) - r;\n}\n\nfloat map(vec3 pos)\n{\n    float planeDist = plane(pos);   \n    //pos = mod(pos + 5.0, 10.0) - 5.0;\n\treturn min(planeDist, sphere(pos, 2.0));\n    \n}\n\nvec3 computeNormal(vec3 pos)\n{\n    vec2 eps = vec2(0.1, 0.0);\n    return normalize(vec3(\n        map(pos + eps.xyy) - map(pos - eps.xyy),\n        map(pos + eps.yxy) - map(pos - eps.yxy),\n        map(pos + eps.yyx) - map(pos - eps.yyx)\n    ));\n}\n\nvec3 material(vec3 pos)\n{\n    return vec3(smoothstep(0.4, 0.41, fract(pos.x + sin(pos.z * 0.4 + iTime))));\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord -.5 * iResolution.xy) / iResolution.y;\n    vec3 pos = vec3(0.0, 5.0, -15.0);\n    \n    // Rayon que l'on envoie dans l'espace pour chacuns des pixels\n    vec3 dir = normalize(vec3(uv.x, uv.y, 1));    \n    vec3 col = vec3(sin(iTime), (uv.y) * 0.85, uv.x);\n    \n    for(int i = 0; i < 1064; i++)\n    {\n       \tfloat d/*istance*/ = map(pos); \n       \t//  Point is near enough\n        if(d < 0.01)\n        {\t\n            col = computeNormal(pos);\n            col += fract(pos * 0.55);\n            col/= 2.0;\n           \n            \n        \tbreak;\n        }\n        pos += d * dir;\n        \n        \n\n    }\n    \n    \n    // Output to screen\n    fragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}