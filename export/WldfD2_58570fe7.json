{"ver":"0.1","info":{"id":"WldfD2","date":"1613498320","viewed":413,"name":"Retro Style Audio Visualizer","username":"ChutneyPot","description":"My attempt at a retro-inspired music visualizer.\n\nSoundcloud track: Modern Knight - Who Ha - Magenta Teal Desert Cruise\nlink: https://soundcloud.com/modernknightly/who-ha-magenta-teal-desert-cruise\n\nEdit: Replaced track with ShaderToy's track.","likes":3,"published":1,"flags":64,"usePreview":0,"tags":["retro","audio","visualizer","soundcloud"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"MtBSRW","filepath":"https://soundcloud.com/modernknightly/who-ha-magenta-teal-desert-cruise","previewfilepath":"https://soundcloud.com/modernknightly/who-ha-magenta-teal-desert-cruise","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Retro Style Audio Visualizer, February 2021\n// by Tito Morab - ChutneyPot\n// https://www.shadertoy.com/view/WldfD2\n// soundcloud track: Modern Knight - Who Ha - Magenta Teal Desert Cruise\n// link: https://soundcloud.com/modernknightly/who-ha-magenta-teal-desert-cruise\n//--------------------------------------------------------------------------\n#define col1 vec4(0.07, 0.02, 0.35, 1.0)\n#define col2 vec4(1.0, 0.46, 1.0, 1.0)\n#define col3 vec4(0.99, 0.0, 1.0, 1.0)\n#define col4 vec4(0.1, 0.7, 1.0, 1.0)\n#define col5 vec4(0.1, 0.6, 1.0, 1.0)\n#define col6 vec4(0.02, 0.85, 0.91, 1.0)\n\nfloat Remap(in float val, in vec2 old, in vec2 new)\n{\n    float t = clamp((val - old.x) / (old.y - old.x), 0.0, 1.0);\n    float result = t * (new.y - new.x) + new.x;\n    return result;\n}\n\nvoid Pixellize(inout vec2 uv, float value)\n{\n    uv *= value;\n    uv = floor(uv);\n    uv /= value;\n}\n\nvec4 Background(in vec2 uv)\n{\n    uv *= 0.56;\n    \n    Pixellize(uv, 30.0);\n    \n    float t = Remap(sin((iTime - 20.0) * 0.1), vec2(-1.0, 1.0), vec2(-0.1, 0.4));\n    vec4 col = mix(col1, col2, uv.y + t);\n    \n    return col;\n}\n\nvec4 Bars(in vec2 uv)\n{    \n    uv *= 0.566; \n    uv.x = abs(uv.x);\n    uv.y += 0.882;\n    \n    float bars = 1.0 - abs(mod(uv.x * 320.0, 2.0) - 1.0);\n    \n    Pixellize(uv, 80.0);\n     \n    float aud = step(uv.y, texture(iChannel0, vec2(uv.x, 0.0)).r);           \n    \n    vec4 col = mix(vec4(0.0), col1, bars * aud);\n    col = mix(col, col3, col.w);\n    \n    return col;\n}\n\nvec4 Bass(in vec2 uv)\n{\n    uv.y += 1.5;\n    \n    float aud = texture(iChannel0, vec2(0.0, 0.0)).r;\n    float b0 = smoothstep(1.2 + aud, 1.15 + aud, length(uv));\n    \n    Pixellize(uv, 40.0);\n    \n    float b1 = smoothstep(1.0 + aud, 0.4 + aud, length(uv));\n    float b2 = smoothstep(1.0, 0.8, length(uv));\n    float b = mix(mix(b0 + b1 + b2, b1 + b2, step(aud, 0.7)), b2, step(aud, 0.3));\n    \n    vec4 col = mix(vec4(0.0), col6, b0);\n    col = mix(col, col5, b1);\n    col = mix(col, col4, b2);\n\n    return col;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = (2.0 * fragCoord - iResolution.xy) / iResolution.y;\n        \n    vec4 bg = Background(uv);\n    vec4 bars = Bars(uv);\n    vec4 bass = Bass(uv);\n       \n    vec4 col = mix(vec4(0.0), bg, bg.w);\n    col = mix(col, bass, bass.w);\n    col = mix(col, bars, bars.w);\n    \n    fragColor = vec4(col);\n}","name":"Image","description":"","type":"image"}]}