{"ver":"0.1","info":{"id":"tlVGRz","date":"1578181157","viewed":137,"name":"sunset with clouds","username":"Cewein","description":"Finally a sunset with clouds","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["clouds","art","japan","sun2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 skyA = vec3(0.912,0.548,0.077);\nvec3 skyB = vec3(0.495,0.158,0.111);\n\nvec3 sunA = vec3(0.912,0.026,0.009);\nvec3 sunB = vec3(1.000,0.633,0.157);\n\nvec3 cloudA = vec3(0.840,0.614,0.596);\nvec3 cloudB = vec3(0.002,0.016,0.270);\n\n//blur = pixel width 1.5/res.y\n\nfloat circle(vec2 center, vec2 uv, float size)\n{\n    return step(distance(center, uv),size);\n}\n\nfloat cloud(vec2 p, float l, float L, vec2 uv, bool extrude)\n{\n    float l2 = l/2.;\n    float L2 = L/2.;\n    float low = step(p.x - L2,uv.x) * step(p.y - l2,uv.y);\n    float up = step(uv.x, p.x + L2) * step(uv.y,p.y+ l2);\n    float rec = low * up;\n    \n    \n    float lf = circle(vec2(p.x - L2, p.y), uv, l2);\n    float rg = circle(vec2(p.x + L2, p.y), uv, l2);\n    \n    if(extrude)\n        return rec - (lf + rg);\n    return max(lf,max(rg,rec));\n}\n\nfloat cloudMask(vec2 uv)\n{\n    //cloud 1\n    float col  = cloud(vec2(0.70,0.40)\t,0.05\t, 1.2\t,uv, false);\n    col += cloud(vec2(0.90,0.45)\t,0.05\t, 0.5\t,uv, true);\n    col += cloud(vec2(1.05,0.50)\t,0.05\t, 0.8\t,uv, false);\n    col += cloud(vec2(0.75,0.55)\t,0.05\t, 0.2\t,uv, true);\n    col += cloud(vec2(0.55,0.60)\t,0.05\t,0.7\t,uv, false);\n    \n    //cloud 2\n    col += cloud(vec2(1.26,0.60)\t\t,0.05\t, 0.5\t,uv, false);\n    col += cloud(vec2(1.3,0.65)\t\t,0.05\t, 0.3\t,uv, true);\n    col += cloud(vec2(1.40,0.70)\t\t,0.05\t, 0.5\t,uv, false);\n    \n    //cloud 3\n    col += cloud(vec2(1.0,0.30)\t\t,0.05\t, 0.7\t,uv, false);\n    col += cloud(vec2(1.1,0.25)\t\t,0.05\t, 0.3\t,uv, true);\n    col += cloud(vec2(1.2,0.20)\t\t,0.05\t, 0.5\t,uv, false);\n    \n    //cloud 4\n    col += cloud(vec2(0.5,0.75)\t\t,0.05\t, 0.5\t,uv, false);\n    col += cloud(vec2(0.4,0.80)\t\t,0.05\t, 0.3\t,uv, true);\n    col += cloud(vec2(0.6,0.85)\t\t,0.05\t, 0.7\t,uv, false);\n    return col;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord)/iResolution.y;\n    \n    //background\n    vec3 pct = vec3(uv.y/0.784) - -0.744;\n    vec3 col = mix(skyA, skyB, pct);\n    \n    //sun\n    float mask =\n        circle(\n            vec2(1.350,0.350),\n            uv,\n            0.15\n        );\n    \n    pct = vec3(uv.y/0.376) - 0.300;\n    vec3 sunCol = mix(sunA, sunB, pct);\n    \n    //cloud\n    pct = vec3(uv.y/0.824) - 0.236;\n    vec3 cloudsCol = mix(cloudA, cloudB, pct);\n    \n   \tfloat additiveMask;\n    \n    if(uv.y < 0.375)\n    \tadditiveMask = mask + max(cloudMask(uv), 0.) * 2. + 1.;\n    if(uv.y >= 0.375)\n    \tadditiveMask = mask * 2. + max(cloudMask(uv), 0.)+ 1.;\n    \n    if(uv.y >= 0.375)\n    {\n        if(additiveMask > 0.5)\n            fragColor = vec4(col,1.0);\n        if(additiveMask > 1.5)\n            fragColor = vec4(cloudsCol,1.0);\n        if(additiveMask > 2.5)\n            fragColor = vec4(sunCol,1.0);   \n    }\n    else\n    {\n        if(additiveMask > 0.5)\n            fragColor = vec4(col,1.0);\n        if(additiveMask > 1.5)\n            fragColor = vec4(sunCol,1.0);  \n        if(additiveMask > 2.5)\n            fragColor = vec4(cloudsCol,1.0);\n    }\n}\n\n","name":"Image","description":"","type":"image"}]}