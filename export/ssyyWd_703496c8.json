{"ver":"0.1","info":{"id":"ssyyWd","date":"1655842836","viewed":66,"name":"Wsh - Layered Voronoi","username":"Wonshtrum","description":"Layered Voronoi noise and clear borders\nBased on: https://www.shadertoy.com/view/Xll3zX","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["voronoi","noise","layers"],"hasliked":0,"parentid":"NdGyDd","parentname":"Wsh - Voronoi noise"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 rand3( vec2 p )\n{\n    vec3 q = vec3( dot(p,vec2(127.1,311.7)), \n\t\t\t\t   dot(p,vec2(269.5,183.3)), \n\t\t\t\t   dot(p,vec2(419.2,371.9)) );\n\treturn fract(sin(q)*43758.5453);\n}\n\n\nvec4 voronoi( vec2 x )\n{\n    vec2 n = floor(x);\n\tvec2 id;\n\tvec2 id2;\n\n    float md = 10.0;\n    float md2 = 10.0;\n    \n    for( int j=-1; j<=1; j++ )\n    for( int i=-1; i<=1; i++ )\n    {\n        vec2 g = n + vec2(i,j);\n        vec3 rr = rand3(g);\n\t\tvec2 o = g + rr.xy;\n        vec2 r = x - o;\n        float d = dot(r,r);\n        \n        if( d<md )\n        {\n            md2 = md;\n            md = d;\n            id2 = id;\n            id = o;\n        } else if ( d<md2 ) {\n            md2 = d;\n            id2 = o;\n        }\n    }\n    float l = distance(id, id2)*0.5;\n    float d = l-dot(normalize(id-id2), id-x);\n\n    return vec4( id, d, md );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = fragCoord.xy/iResolution.x;\n    p += 0.5*cos( 0.1*iTime + vec2(0.0,1.57) );\n        \n    vec4 c1 = voronoi( 128.0*p );\n    vec4 c2 = voronoi( c1.xy/8.0 );\n    vec4 c3 = voronoi( 16.0*p );\n\n    fragColor = vec4( c3.z>0.02 && c1.z>0.04 ? rand3(c2.xy) : vec3(0), 1.0 );\n}\n","name":"Image","description":"","type":"image"}]}