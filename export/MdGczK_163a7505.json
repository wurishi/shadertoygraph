{"ver":"0.1","info":{"id":"MdGczK","date":"1522594070","viewed":380,"name":"Doodling #6: eh!","username":"lsdlive","description":"Stuff I did at the Revision 2018 demoparty.\n\nVarious utilities code from iq, lj, mercury, shane, aiekick & balkhan.","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["raymarch","demoparty"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// @lsdlive\n\n\nfloat sc(vec3 p, float d){p=abs(p);p=max(p,p.yzx);return min(p.x,min(p.y,p.z))-d;}\nmat2 r2d(float a){float c=cos(a),s=sin(a);return mat2(c,s,-s,c);}\nfloat re(float p,float d){return mod(p-d*.5,d)-d*.5;}\nvoid amod(inout vec2 p, float m){float a=re(atan(p.x,p.y),m);p=vec2(cos(a),sin(a))*length(p);}\nvoid mo(inout vec2 p, vec2 d){p.x=abs(p.x)-d.x;p.y=abs(p.y)-d.y;if(p.y>p.x)p=p.yx;}\n\n\nfloat scc(vec3 p, float d){\n    float c1 = length(p.xy) - d;\n    float c2 = length(p.xz) - d;\n    float c3 = length(p.zy) - d;\n    return min(c1,min(c2,c3));\n}\n\nfloat g=0.;\nfloat de(vec3 p){\n    //p.y-=1.;\n    p.xy*=r2d(iTime*.3);    \n    \n  p.xy*=r2d(p.z*.3);  \n    \n    p.z=re(p.z,9.);\n    \n    amod(p.xy, 6.28/4.);\n    mo(p.xy, vec2(2., .3));\n    amod(p.xy, 6.28/8.3);\n    mo(p.zy, vec2(1., .3));\n       \n    p.x=abs(p.x)-3.;\n    \n    p.y=abs(p.y)-2.;\n    p.xy*=r2d(.5);\n    \n    float d = sc (p,.5);\n    \n    p.xy*=r2d(iTime*.3);\n    d = min(d, -scc(p,1.));\n    g+=.01/(.01+d*d);\n    return d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy -.5;\n    uv.x*=iResolution.x/iResolution.y;\n    \n    vec3 ro=vec3(0,0,-3.+iTime);\n    vec3 rd=normalize(vec3(uv,1));\n    \n    vec3 p;\n    float t=0.;\n    float ri;\n    for(float i=0.;i<1.;i+=.01){\n        ri=i;\n    \tp=ro+rd*t;\n        float d=de(p);\n        //if(d<.001)break;\n        d=max(abs(d), .005);\n        t+=d*.3;\n    }\n    \n    vec3 bg= vec3(.2, .1, .2);\n\tvec3 c=mix(vec3(.7, .1, .1), bg, uv.x*4.3+ri);\n    c.g+=sin(iTime);\n    c+=g*.02;\n    c=mix(c, bg,1.-exp(-.01*t*t));\n    fragColor = vec4(c,1.0);\n}","name":"Image","description":"","type":"image"}]}