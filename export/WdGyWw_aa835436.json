{"ver":"0.1","info":{"id":"WdGyWw","date":"1602907715","viewed":240,"name":"Conic reprojection","username":"danbgoldman","description":"Projects an image from the webcam such that it can be printed onto paper and folded into a cone shape to reproduce the original image when viewed from the cone's apex. Click the mouse and drag left and right to change the cone angle.","likes":5,"published":1,"flags":2,"usePreview":0,"tags":["webcam"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415926538\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Choose the smaller of x or y dimensions.\n    float minDim = min(iResolution.x, iResolution.y);\n    \n    // Normalize coordinates so that the smaller dimension goes from -0.5 to 0.5.\n    vec2 uv = (fragCoord - iResolution.xy/2.0)/minDim;\n\n    // Convert to polar coordinates\n    float r = sqrt(dot(uv, uv));\n    float theta = atan(uv.y, uv.x);\n    \n    // Scale theta inversely by a constant from 0 to 1.\n    // This reduces the range of angles that are used.\n    // Use the mouse x if it's available, or an animated wave otherwise.\n    float scale = iMouse.x/iResolution.x;\n    if (scale <= 0.0) {\n        scale = cos(iTime*3.0)*0.5+0.5;\n    }\n    theta /= scale;\n    \n    // Convert back to Cartesian coordinates\n    uv = r*vec2(cos(theta), sin(theta)) + vec2(0.5, 0.5);\n    \n    // Extract the color at that coordinate.\n    vec3 col = texture(iChannel0, uv).xyz;\n    \n    // Anything with radius > 0.5 is black.\n    col *= float(r<0.5);\n    \n    // Anything with theta outside the original circle is also black.\n    col *= float(theta>=-PI && theta<PI);\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}