{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":3,"type":"buffer","id":"XdfGR8","filepath":"/media/previz/buffer03.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"// Fork of \"3D AudioReactive Fluid\" by None. https://shadertoy.com/view/-1\n// 2024-12-27 13:04:03\n\n// Fork of \"3D AudioReactive Fluid\" by wyatt. https://shadertoy.com/view/43dyz7\n// 2024-12-27 12:59:46\n\n// Fork of \"3D Particle fluid\" by wyatt. https://shadertoy.com/view/4XcyRM\n// 2024-12-22 18:07:27\n\n// Fork of \"Slime 3D\" by wyatt. https://shadertoy.com/view/MXtyz8\n// 2024-12-22 00:16:36\n\n// Fork of \"Metal 3D\" by wyatt. https://shadertoy.com/view/4XtcRr\n// 2024-12-20 23:43:06\n\n// Fork of \"Metal 3D test\" by wyatt. https://shadertoy.com/view/X3dczn\n// 2024-12-20 00:33:41\n\nvoid mainImage(out vec4 Q, in vec2 U) {\n    R = iResolution.xy;\n    if (iFrame%4>0) {discard;return;}\n    //U.x = mod(U.x-.5*R.x,.333*R.x)+.3333*R.x;\n    vec3 p = vec3(.5*R3.xy,-.9*R3.x);\n    vec3 d = normalize(vec3(2.*(U-.5*R)/R.y,1.8));\n    p -= .5*R3;\n    p.xy *= ei(.5*3.149);\n    d.xy *= ei(.5*3.149);\n    if (iMouse.z>0.) {\n    p.yz *= ei(-iMouse.y/R.x*6.2);\n    d.yz *= ei(-iMouse.y/R.x*6.2);\n    p.xz *= ei(iMouse.x/R.x*6.2);\n    d.xz *= ei(iMouse.x/R.x*6.2);\n    } else {\n    }\n    p += .5*R3;\n    p += d*1.0000001*cube(p,d,vec3(0,-1.*R3.y,0),R3*vec3(1,2,1));\n    \n    vec3 no = vec3(0);\n    vec3 nd = vec3(0);\n    Q = vec4(0,0,0,0);\n    float e = 1.;\n    for (float i = 0.; i < N*N*2.; i++) {\n    \n        if (length(p-clamp(p,vec3(0,-2.*R3.y,0),R3*vec3(1,3,1)))>0.) break;\n        p += d;\n        vec4 x = LN(iChannel1,p);\n        Q += .1*x;\n    }\n    Q = vec4(1,1,.8,1)-Q;\n   \n}","name":"Image","description":"","type":"image"},{"outputs":[],"inputs":[],"code":"// 3D utilities \n#define N 4.\nvec2 R;\nvec3 vel (vec3 v) {return v*inversesqrt(1.+dot(v,v));}\n//  [ [0,R/N]; [0,N*N]  ] < -- > [0,R]\n#define Main void mainImage (out vec4 Q, in vec2 _U) {R = iResolution.xy;vec3 U = d3(floor(_U));\n#define A(U) s3d(iChannel0,U)\n#define B(U) s3d(iChannel1,U)\n#define C(U) s3d(iChannel2,U)\n#define D(U) s3d(iChannel3,U)\n#define R3 vec3(floor(R/N),N*N)\nvec4 hash(vec4 p4) {\n    p4 = fract(p4  * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}\n#define ei(a) mat2(cos(a),sin(a),-sin(a),cos(a))\nbool building (vec3 U) {\n    vec3 u = 1./vec3(10)*abs(U-vec3(.5,.5,.5)*R3);\n    return (max(u.x,max(u.y,u.z))<R3.z);\n}\nbool cell (vec3 u) {\n    return u.x>=0.&&u.y>=0.&&u.z>=0.&&u.x<1.&&u.y<1.&&u.z<1.;\n}\nfloat d1 (vec3 U) {\n    U = floor(U);\n    return U.x+U.y*R3.x+U.z*R3.x*R3.y;\n}\nvec3 d3 (float i) {\n    return vec3(mod(i,R3.x) , mod(floor(i/R3.x),R3.y), floor(i/R3.x/R3.y));\n}\nvec2 d2 (vec3 U) {\n    //U = clamp(U,vec3(0),R3);\n    U = mod(U,R3);\n    float i = d1(U);\n    return vec2(mod(i,R.x),floor(i/R.x));\n}\nvec3 d3 (vec2 u) {\n    u = floor(u);\n    float i = u.x+u.y*R.x;\n\treturn d3(i);\n}\n\nvec4 s3d (sampler2D T,vec3 U) {\n    return texelFetch(T,ivec2(d2(floor(U))),0);\n}\nfloat absmin(float a, float b) {\n    if (a<0.||(b>0.&&b<a)) return b;\n    else return a;\n}\nvec2 sphere (vec3 oc, vec3 direction, float sphereRadius) {\n    float a = dot(direction, direction);\n    float b = 2.0 * dot(oc, direction);\n    float c = dot(oc, oc) - sphereRadius * sphereRadius;\n    float discriminant = b * b - 4.0 * a * c;\n    if (discriminant <= 0.0) return vec2(-1); \n    float t1 = (-b - sqrt(discriminant)) / (2.0 * a);\n    float t2 = (-b + sqrt(discriminant)) / (2.0 * a);\n    return vec2(t1, t2); \n}\n\nfloat cube(vec3 p, vec3 d, vec3 lo, vec3 hi) {\n    vec3 tLo = (lo - p) / d;\n    vec3 tHi = (hi - p) / d;\n    vec3 tMin = min(tLo, tHi);\n    vec3 tMax = max(tLo, tHi);\n    float tEntry = max(tMin.x, max(tMin.y, tMin.z));\n    float tExit = min(tMax.x, min(tMax.y, tMax.z));\n    if (tEntry > tExit || tExit < 0.0) return -1.0; \n    return tEntry > 0.0 ? tEntry : tExit;\n}\nvec4 LN (sampler2D tx, vec3 u) {\n                    vec3 f = floor(u);\n                    vec3 c = ceil(u);\n                    #define G(_) texelFetch(tx,ivec2(d2(_)),0)\n                    vec4 _000 = G(vec3(f));\n                    vec4 _001 = G(vec3(f.xy,c.z));\n                    vec4 _010 = G(vec3(f.x,c.y,f.z));\n                    vec4 _011 = G(vec3(f.x,c.yz));\n                    vec4 _100 = G(vec3(c.x,f.yz));\n                    vec4 _101 = G(vec3(c.x,f.y,c.z));\n                    vec4 _110 = G(vec3(c.xy,f.z));\n                    vec4 _111 = G(vec3(c));\n                    vec4 _00 = mix(_000,_001,fract(u.z));\n                    vec4 _01 = mix(_010,_011,fract(u.z));\n                    vec4 _10 = mix(_100,_101,fract(u.z));\n                    vec4 _11 = mix(_110,_111,fract(u.z));\n                    vec4 _0 = mix(_00,_01,fract(u.y));\n                    vec4 _1 = mix(_10,_11,fract(u.y));\n                    return mix(_0,_1,fract(u.x));\n                }","name":"Common","description":"","type":"common"},{"outputs":[{"channel":0,"id":"4dXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":3,"type":"buffer","id":"XdfGR8","filepath":"/media/previz/buffer03.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"vec4 T(vec3 U) {\n    return D(U);\n}\nMain \n    Q = T(U);\n    vec4 px = T(U+vec3(1,0,0));\n    vec4 nx = T(U-vec3(1,0,0));\n    vec4 py = T(U+vec3(0,1,0));\n    vec4 ny = T(U-vec3(0,1,0));\n    vec4 pz = T(U+vec3(0,0,1));\n    vec4 nz = T(U-vec3(0,0,1));\n    \n    //Q.w = 1./6.*(px+nx+py+ny+pz+nz).w;\n    Q.w -= 1./2.*(px.x-nx.x+py.y-ny.y+pz.z-nz.z);\n    //Q.xyz -= 1./6.*vec3(px.w-nx.w,py.w-ny.w,pz.w-nz.w);\n   \n    if (iFrame < 1) {\n        Q = vec4(0);\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"XsXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"music","id":"4sXGzn","filepath":"/media/a/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":3,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"vec4 T(vec3 U) {\n    if (iFrame%4==0) {\n        U -= D(U).xyz;\n        U -= D(U).xyz;\n        U -= D(U).xyz;\n        U -= D(U).xyz;\n    }\n    return LN(iChannel1,U);\n}\nMain \n    Q = T(U);\n    float m = (.5+.5*(1.-abs(U.y-.5*R.y)/R.y))*texture(iChannel2,vec2(2.*abs(U.y/R3.y-.5),0)).x;\n    if (R3.x-U.x<5.&&abs(U.z-.5*R3.z)<4.) Q = 10.*max(m-.2,0.)*max(sin(20.*m+vec4(1,2,3,4)),0.);\n    \n}","name":"Buffer B","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"4sXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"Main\n}","name":"Buffer C","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"XdfGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":3,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"vec4 T(vec3 U) {\n    if (iFrame%3==0) {\n        U -= D(U).xyz;\n        U -= D(U).xyz;\n        U -= D(U).xyz;\n    }\n    return LN(iChannel0,U);\n}\nMain \n    Q = T(U);\n    vec4 px = T(U+vec3(1,0,0));\n    vec4 nx = T(U-vec3(1,0,0));\n    vec4 py = T(U+vec3(0,1,0));\n    vec4 ny = T(U-vec3(0,1,0));\n    vec4 pz = T(U+vec3(0,0,1));\n    vec4 nz = T(U-vec3(0,0,1));\n    \n    \n    float b = B(U).x;\n    Q.xyz -= 1./2.*vec3(px.w-nx.w,py.w-ny.w,pz.w-nz.w);\n    \n    Q.x -= .03*b*b;\n    if (U.x<1.) Q *= 0.;\n    \n    if (U.z<1.) Q.z *= 0.;\n    if (iFrame < 1) {\n        Q = vec4(0);\n    }\n}","name":"Buffer D","description":"","type":"buffer"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":true,"mFlagMusicStream":false},"info":{"id":"43dyz7","date":"1734890923","viewed":274,"name":"3D AudioReactive Fluid","username":"wyatt","description":"might have to hit play in buffer B","likes":22,"published":3,"flags":32,"usePreview":0,"tags":["3d","fluid","physics","vorticity"],"hasliked":0,"parentid":"","parentname":""}}