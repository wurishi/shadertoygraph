{"ver":"0.1","info":{"id":"tdKBWG","date":"1607893856","viewed":77,"name":"sand topple2","username":"Ya420","description":"https://www.youtube.com/watch?v=1MtEUErz7Gg\nI`d recommend you to watch this video to understand whats going on here","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["sand","sandpiles","topple"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{  \n    float k=1.2;\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec4 c = texture(iChannel0, uv);\n    int y=int(c.r*255.0*255.0+c.b*255.0+c.g)%8;\n    fragColor = vec4(float(y/4)/k, float((y/2)%2)/k, float(y%2)/k, 1.);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    int n=0;\n    if (iFrame==1)\n    {\n        n=((int(fragCoord.x)==int(iResolution.x/2.0))&&(int(fragCoord.y)==int(iResolution.y/2.0)))?1:0;\n        fragColor = vec4(n*4,n*255,n*255,1.0);\n    }\n    else\n    {\n        vec4 gs=texelFetch(iChannel0,ivec2(int(fragCoord.x+iResolution.x)%int(iResolution.x),int(fragCoord.y+iResolution.y)%int(iResolution.y)),0);\n        int sn=int(gs.r*255.0*255.0+gs.g*255.0+gs.b);\n        sn=sn%8;\n        vec4 g=texelFetch(iChannel0,ivec2(int(fragCoord.x+1.0+iResolution.x)%int(iResolution.x),int(fragCoord.y+iResolution.y)%int(iResolution.y)),0);\n        n=int(g.r*255.0*255.0+g.g*255.0+g.b);\n        sn+=n/8;\n        g=texelFetch(iChannel0,ivec2(int(fragCoord.x-1.0+iResolution.x)%int(iResolution.x),int(fragCoord.y+iResolution.y)%int(iResolution.y)),0);\n        n=int(g.r*255.0*255.0+g.g*255.0+g.b);\n        sn+=n/8;\n        g=texelFetch(iChannel0,ivec2(int(fragCoord.x+iResolution.x)%int(iResolution.x),int(fragCoord.y+1.0+iResolution.y)%int(iResolution.y)),0);\n        n=int(g.r*255.0*255.0+g.g*255.0+g.b);\n        sn+=n/8;\n        g=texelFetch(iChannel0,ivec2(int(fragCoord.x+iResolution.x)%int(iResolution.x),int(fragCoord.y-1.0+iResolution.y)%int(iResolution.y)),0);\n        n=int(g.r*255.0*255.0+g.g*255.0+g.b);\n        sn+=n/8;\n        //corners\n        g=texelFetch(iChannel0,ivec2(int(fragCoord.x-1.0+iResolution.x)%int(iResolution.x),int(fragCoord.y+1.0+iResolution.y)%int(iResolution.y)),0);\n        n=int(g.r*255.0*255.0+g.g*255.0+g.b);\n        sn+=n/8;\n        g=texelFetch(iChannel0,ivec2(int(fragCoord.x-1.0+iResolution.x)%int(iResolution.x),int(fragCoord.y-1.0+iResolution.y)%int(iResolution.y)),0);\n        n=int(g.r*255.0*255.0+g.g*255.0+g.b);\n        sn+=n/8;\n        g=texelFetch(iChannel0,ivec2(int(fragCoord.x+1.0+iResolution.x)%int(iResolution.x),int(fragCoord.y+1.0+iResolution.y)%int(iResolution.y)),0);\n        n=int(g.r*255.0*255.0+g.g*255.0+g.b);\n        sn+=n/8;\n        g=texelFetch(iChannel0,ivec2(int(fragCoord.x+1.0+iResolution.x)%int(iResolution.x),int(fragCoord.y-1.0+iResolution.y)%int(iResolution.y)),0);\n        n=int(g.r*255.0*255.0+g.g*255.0+g.b);\n        sn+=n/8;\n        fragColor = vec4(sn/255/255,sn/255%255,sn%255,1.0);\n    }\n}","name":"Buffer A","description":"","type":"buffer"}]}