{"ver":"0.1","info":{"id":"4XsXRS","date":"1709740064","viewed":65,"name":"Mandelbrot Diego","username":"dipwr","description":"Mandelbrot","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["mandelbrot"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const vec2 pos = vec2(-1.4844465, -0.000078);\n\nconst float saturation = float(1);\n\nconst float zoom = float(2.5);\n\nconst int subSteps = 4; //side of perfect square\n\nconst int iterationsPerSecond = 70;\n\nconst float zoomSpeed = float(1);\n\nvec2 CoordXY(vec2 fragCoord) {\n  vec2 uv = fragCoord.xy / iResolution.xy;\n  \n  float aspectRatio = iResolution.x / iResolution.y;\n\n  vec2 center = (uv - 0.5);\n  center.x *= aspectRatio;\n\n  return center;\n}\n\nfloat mandelbrot(vec2 fragCoord) {\n\nfloat resultAcc = 0.0;\n\n  for (int i = 0; i < subSteps*subSteps; i++){\n    \n    float subSize = 1.0/float(subSteps);\n    \n    float subXSize = subSize * float(i % subSteps);\n    float subYSize = subSize * floor(float(i) / float(subSteps));\n    \n    vec2 subCoord = vec2(fragCoord.x + subXSize, fragCoord.y + subYSize);\n    \n    vec2 coordinate = CoordXY(subCoord);\n\n    float time = iTime;\n    int iterations = int(floor(time * float(iterationsPerSecond)));\n    float timeZoom = exp2(time*zoomSpeed);\n  \n    vec2 z = vec2(0.0, 0.0);\n    vec2 c = coordinate * zoom * (1.0/timeZoom) + pos;\n\n    for (int iteration = 0; iteration < iterations; iteration++) {\n\n      // z <- z^2 + c\n      float real = z.x * z.x - z.y * z.y + c.x;\n      float imaginary = 2.0 * z.x * z.y + c.y;\n  \n      z.x = real;\n      z.y = imaginary;\n\n      if (z.x * z.x + z.y * z.y > 4.0) {\n        resultAcc += float(iteration)/float(iterations);\n        break;\n      }\n    }\n    resultAcc += 0.0;\n  }\n  return resultAcc / float(subSteps*subSteps);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n  \n  float mandelbrotValue = mandelbrot(fragCoord);\n    \n  float mandelbrotColor = saturation * mandelbrotValue;\n\n  fragColor = vec4(0, mandelbrotColor, 0, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}