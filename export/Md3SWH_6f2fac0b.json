{"ver":"0.1","info":{"id":"Md3SWH","date":"1509808141","viewed":974,"name":"Galaxy 2D Spiral Thing","username":"bjarkeck","description":"Not optmized","likes":29,"published":1,"flags":0,"usePreview":1,"tags":["spiral","galaxy"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float noise(in vec3 x)\n{\n    vec3 p = floor(x);\n    vec3 f = fract(x);\n\tf = f*f*(3.0-2.0*f);\n\tvec2 uv = (p.xy+vec2(37.0,17.0)*p.z) + f.xy;\n\tvec2 rg = texture( iChannel0, (uv+0.5)/256.0, -100.0 ).yx;\n\treturn mix( rg.x, rg.y, f.z );\n}\n\nfloat fbm(vec3 pos)\n{\n    mat3 m = mat3( 0.00,  0.80,  0.60, -0.80,  0.36, -0.48,  -0.60, -0.48,  0.64 );\n    vec3 q = 3.0*pos;\n    float f  = 0.5000*noise( q ); q = m*q*2.01;\n    f += 0.2500*noise( q ); q = m*q*2.02;\n    f += 0.1250*noise( q ); q = m*q*2.03;\n    f += 0.0625*noise( q ); q = m*q*2.01;\n    return f;\n}\n\nfloat galaxyNoise(vec2 uv, float radius, float angle, float speed)\n{\n    float dist = length(uv);    \n    float percent = max(0., (radius - dist) / radius);\n    float theta = iTime * speed + percent * percent * angle;\n    vec2 cs = vec2(cos(theta), sin(theta));\n\tuv *= mat2(cs.x, -cs.y, cs.y, cs.x);\n    \n    float n = abs(fbm(vec3(uv, 1. + iTime * 0.4) * 0.1) - 0.5) * 2.0;\n    float nSmall = smoothstep(0.2, 0.0, n);\n    \n    float result = 0.;\n    result += nSmall * 0.6;\n    result += n;\n    result += smoothstep(0.7, 1., percent);\n    result *= smoothstep(0.2, 0.7, percent);\n    return pow(result, 2.);\n}\n\nvec3 galaxy(vec2 uv)\n{\n    float radius = 20.;\n    float f = 0.;\n    f += galaxyNoise(uv * 1.0, radius, 9.0, 0.12) * 0.5;\n    f += galaxyNoise(uv * 1.3, radius, 11.0, -0.1) * 0.6;\n    f += galaxyNoise(uv * 1.6, radius, 8.0, 0.1) * 0.7;\n    f = max(0., f);\n    \n    vec3 color = mix(vec3(2.8, 1.2, 0.2), vec3(1.0, 0.20, 4.0), length(uv) / radius); \n    color += vec3(smoothstep(1.2, 5., f * 0.2));\n\tcolor *= f;\n    \n    return color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (fragCoord.xy / iResolution.xy - vec2(0.5)) * vec2(iResolution.x / iResolution.y, 1.);\n    uv *= 5. + 0. * cos(iTime * 0.3);\n    fragColor = vec4(galaxy(uv * 3.),1.0);\n}","name":"Image","description":"","type":"image"}]}