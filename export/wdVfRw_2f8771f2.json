{"ver":"0.1","info":{"id":"wdVfRw","date":"1680795245","viewed":24,"name":"Oc√©an","username":"Pesm","description":"programmation graphique","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["tp1"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdXGzr","filepath":"/media/a/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg","previewfilepath":"/media/ap/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 sunPosition;\n\nvec3 computeClouds(vec2 uv) {\n    if (uv.y < 0.5) { // if we are under the half part of the screen return black\n    \treturn vec3(0.0, 0.0, 0.0);\n    }\n    else {\n        // compute ray direction\n        vec3 rd = normalize(vec3(uv*2.-1.,1.));\n        // add two layers of cloud\n        vec3 color = texture(iChannel0, rd.xz*.1/rd.y+iTime*.02).rrr;\n        color += texture(iChannel0, rd.xz*.05/rd.y-iTime*.03).rrr;\n        return color*.5;\n    }\n}\n\nvec3 sky(vec2 uv){\n    vec3 white = vec3(1.0 * sunPosition.y, 1.0 * sunPosition.y, 1.0 * sunPosition.y);\n    vec3 blue = vec3(0.282 * sunPosition.y, 0.564 * sunPosition.y, 0.937 * sunPosition.y);\n    vec3 orange = vec3(1.0, 0.4, 0.1);\n    vec3 addColor = vec3(0.0, 0.0, 0.0);\n    \n    if(uv.y < 0.5){\n        uv = vec2(uv.x + (cos(uv.y*50.0 + iTime*2.0)/20.0), 1.0 - uv.y);\n        addColor = vec3(0.2, 0.1, 0.05);\n    }\n    \n    float stars = texture(iChannel1, uv*5.0).r;\n  \tif(stars < 0.8) stars = 0.0; \n    \n    vec3 sun = orange / (distance(uv, sunPosition) * 50.0);\n   \n    vec3 cloudColor = 1.0 - mix(vec3(1.0), orange, sin(sunPosition.y)) * 2.5;\n    vec3 clouds = (computeClouds(uv)*0.5-0.25) * cloudColor;\n    \n    vec3 sky = mix(white, blue, uv.y);\n    \n    vec3 fog = mix(vec3(0.4 * sunPosition.y,0.4 * sunPosition.y,0.4 * sunPosition.y), vec3(0.0,0.0,0.0), smoothstep(0.45, 0.55, sin(uv.y)));\n   \n    vec3 star = vec3(1.0, 1.0, 1.0) * stars * (1.0 - sunPosition.y) * 0.4;\n    \n    return vec3(sky + sun + clouds - addColor + fog + star);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{    \n\tvec2 uv = fragCoord / iResolution.xy;\n    vec3 color = vec3(0.0, 0.0, 0.0);\n    \n    sunPosition = vec2(cos(iTime/2.0) * 0.5 + 0.5, sin(iTime/2.0) * 0.5 + 0.5);\n    \n    fragColor = vec4(sky(uv), 1.0);\n}","name":"Image","description":"","type":"image"}]}