{"ver":"0.1","info":{"id":"ts3GRM","date":"1568047760","viewed":95,"name":"lullababy","username":"foran","description":"lullababy","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["lullababy"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define rep(p,r) (mod(p + r/2.,r) - r/2.)\n\nfloat sdSphere(vec3 p,float r)\n{\n  return length(p) -r;\n}\n\nmat2 rot(float a)\n{\nfloat c  = cos(a); float s = sin(a);\nreturn mat2(c,-s,s,c);\n}\n\n\n\n\nfloat map(vec3 p)\n{\n\n  p.xz *= rot(.003);\n\n  //float a = atan(p.z,p.y);\n\n  p.y += 1.5 + sin(iTime + length(p * 2.31) );\n\n  float plane = p.y + 1.;\n\n\n  float d = length(p.xy);\n\n\n\n\n  p.xy *= rot(sin(iTime *.912)+ d * .021);  \n  p.y += .5 * sin(d * 5. + iTime) * .1 +1.15;\n  p.xz = rep(p.xz, 4.);\n\n\n  float sp = sdSphere(p,1.);\n  \n\n  return min(plane,sp);\n}\n\nvec3 normal(vec3 p)\n{\n  vec2 e = vec2(.1,0.);\n  return(normalize(vec3(\n    map(p - e.xyy) - map(p + e.xyy),\n    map(p - e.yxy) - map(p + e.yxy),\n    map(p - e.yyx) - map(p + e.yyx)\n)));\n}\n\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord)\n{\n  vec2 uv=vec2(fragCoord.x/iResolution.x,fragCoord.y/iResolution.y);\n  uv-=.5;\n  uv/=vec2(iResolution.y/iResolution.x,1);\n\n  vec3 ro = vec3(0.,0.,-15.);\n  vec3 rd = normalize(vec3(uv, 1.));\n  vec3 cp = ro;\n\n  float id = 0.;\n  for(float st = 0.; st < 1.; st += 1. / 128.)\n  {\n    float cd = map(cp);\n    if(cd < .01)\n    {\n      id = 1. - st;\n      break;\n    }\n    cp += rd * cd * .5;\n  }\n\n\n  vec3 norm = normal(cp);\n  vec3 ld = normalize(cp - vec3(1. * sin(-iTime*2.),9.,50.*cos(-iTime*2.)));\n    \n  float light = clamp(dot(norm,ld),0.,1.);\n\n  float f = id;\n  //vec4 base = vec4(.2,.14,.7,1.);\n  vec4 base=vec4(0.0, 0.0, 0.0, 1.0);\n\n  float l = light * id;\n  vec4 out_color=vec4(1.);\n  //out_color = vec4(mix(vec4(1.),base,1. / l)) ;\n  out_color=vec4(mix(vec4(0.2549, 0.8314, 0.2235, 1.0),base,1.-l));\n  fragColor=vec4(out_color);\n}","name":"Image","description":"","type":"image"}]}