{"ver":"0.1","info":{"id":"NtX3WX","date":"1622970143","viewed":128,"name":"Dot spiral","username":"JennySchub","description":"Radial uv layers used to draw dots ","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["dotsspiral"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    fragColor=texture(iChannel0, fragCoord/iResolution.xy);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sXGRr","filepath":"/media/a/48e2d9ef22ca6673330b8c38a260c87694d2bbc94c19fec9dfa4a1222c364a99.mp3","previewfilepath":"/media/ap/48e2d9ef22ca6673330b8c38a260c87694d2bbc94c19fec9dfa4a1222c364a99.mp3","type":"music","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define AA 2.\n\n#define PI 3.14159265358\n//#define zoom 80.\n#define layers 250.\n#define skip 2.\n#define arms 3.\n//#define bend .78\n\n\n\nvec3 render(in vec2 fragCoord )\n{\n    \n\tvec2 uv = ( fragCoord -.5* iResolution.xy ) / iResolution.y;\n    \n    /*if(mod(iTime,4.)<1.)\n    uv.x = abs(uv.x);\n    if(mod(iTime+2.,4.)<1.)\n    uv.y = abs(uv.y);\n    if(mod(iTime+1.,4.)<1.)\n    uv = abs(uv);*/\n    \n    float musicInfluence=0., musicInfluence2;\n    for(float i=0.; i<.4;i+=.01){\n        musicInfluence+=texture(iChannel0,vec2(i)).r*.1;\n    }\n    for(float i=0.7; i<1.;i+=.01){\n        musicInfluence2+=texture(iChannel0,vec2(i)).r*.1;\n    }\n    \n    float bend=musicInfluence*.3+.5;\n    \n    float tim=iTime*1.4+musicInfluence;\n\tfloat zoom=musicInfluence*-2.+60.+(sin(tim*.5)+2.)*10.;\n\tvec3 col=vec3(0.);\n\tvec3 color=vec3(0.);\n\tfloat realangle=(atan(uv.x,uv.y)+PI)*.5/PI;\n\tfloat dc=length(uv);\n\tvec2 id=vec2(0.);\n\tid.y=floor(dc*zoom+.5)-1.;\n\tfloat count2=6.+floor(id.y*PI*2.);\n\tvec2 cuv;\n\tfor(float off=0.;off<.99;off+=1./arms){\n\t    col*=0.;\n        float angle=mod(realangle+off,1.);\n\t\tid.x=mod(floor(angle*count2)+(tim*count2*.2),count2);\n\t    id.x-=mod(pow(id.y,1.+bend)*.07,count2);\n\t\tcuv=vec2(\n\t\t\tmod(angle*count2,1.),\n\t\t\tmod(dc*zoom+.5,1.)\n\t\t);\n\t\tif(id.y<6.45||id.y>layers||id.x<0.||id.x>count2/3.){\n\t\t\tcuv=mod(uv*zoom-.5, 1.);\n\t\t\tcol=vec3(0.);\n\t\t}else{\n\t\t    col=mod(id.y,skip)<1.?\n\t\t    vec3(smoothstep(.7,.01,length(cuv-.5)*(3.*(sin(tim*1.+PI)*.5+.8)+1.))) :\n\t\t    vec3(smoothstep(.7,.01,length(cuv-.5)*(3.*(sin(tim*1.)*.5+.8)+1.)));\n            col.rgb-=smoothstep(1.,0.,id.x)+max(0.,id.x/count2*arms);\n            col=max(vec3(0.),col);\n            col.g/=id.x*.15;\n            col.r/=id.y*id.y*id.y*.0003/(musicInfluence*30.-26.);\n            col.b/=id.y*id.y*id.y*.003/(musicInfluence2*20.-26.);\n\t\t}\n\t\tcolor+=col;\n\t}\n    return color;\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec3 col = vec3(0.);\n    for(float x=-AA/2.; x<AA/2.; x++){\n        for(float y=-AA/2.; y<AA/2.; y++){\n            col+=render(fragCoord+vec2(x,y)/AA);\n        }\n    }\n    col/=(AA*AA);\n    col=mix(col, texture(iChannel1, fragCoord/iResolution.xy).rbg, .5);\n    fragColor=vec4(col,1.);\n}\n","name":"Buffer A","description":"","type":"buffer"}]}