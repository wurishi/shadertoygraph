{"ver":"0.1","info":{"id":"fstBzH","date":"1656874983","viewed":116,"name":"Heartbroken","username":"rmmcal","description":"Heartbroken","likes":3,"published":1,"flags":64,"usePreview":0,"tags":["heartbroken"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4tBXzW","filepath":"https://soundcloud.com/user-508537478/4-hours-relaxing-music-piano-violin-sleep-music-meditation-musica-para-relaxar-dormir-01","previewfilepath":"https://soundcloud.com/user-508537478/4-hours-relaxing-music-piano-violin-sleep-music-meditation-musica-para-relaxar-dormir-01","type":"musicstream","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/////////////////////////////////////////////////////////////\n////       ...  Heartbroken ...             ////\n/////////////////////////////////////////////////////////////\n// Brasil/Amazonas/Manaus\n// Created by Rodrigo Cal (twitter: @rmmcal)ðŸ§™ðŸ§ž\n// - Started: 2022/06 - Published: 2022/07\n// - https://www.shadertoy.com/view/fstBzH\n/////////////////////////////////////////////////////////////\n// -----------------------------------------------------------\n//\n//  Heartbroken\n//  \n//\tPass: Heartbroken \n//  \n//      ... @rmmcal 2022/06\n//  \n// -----------------------------------------------------------\n/////////////////////////////////////////////////////////////\n//\n// - https://www.shadertoy.com/view/3ddcD2\n// - https://www.shadertoy.com/view/Ws3yzS\n// - https://www.shadertoy.com/view/XtXGR8\n\n// http://mathworld.wolfram.com/HeartSurface.html\n\nfloat heart(vec3 p)\n{\n    p*=0.3;\n    float x=p.x;\n    float y=p.y;\n    float z=p.z;\n    float v=0.0;\n    v=sqrt(\n        pow(abs(x*2.5),2.0)\n        +z*z\n        +pow(\n            abs(y*1.1-0.8*sqrt(sqrt(z*z+pow(abs(x/2.0),2.0)/(pow(abs(y+1.4),4.0)+0.001)))),2.0))-1.0;\n    return v;\n}\n\nmat2 rotate(float x){\n    float c = cos(x);\n    float s = sin(x);\n    return mat2(c,s,-s,c);\n}\n\nfloat gyr(vec3 p)\n{\n    return (sin(p.x)*cos(p.y)+sin(p.y)*cos(p.z)+sin(p.z)*cos(p.x));\n}\n\nfloat dist(vec3 p){\n\tfloat d = 0.0;\n\tfloat g = 0.0;\n    float t = log(log(iTime*.2+1.0));\n    \n    p.y += 0.5;\n    p.xz*=rotate(iTime*.2+3.1415/2.0);\n    d = heart(p*2.0)/2.0;\n    p = p*7.0;\n    \n    vec3 pp = vec3( gyr(p.xyz), gyr(p.yzx), gyr(p.zxy));\n    g =  ( gyr(p+pp)/9.0 )+.05;\n    d = max(d, (g)*.5)*2.0;\n    float k =  (texture(iChannel3,vec2(g*1.5,0.)).r*.2-.1);\n    d+=k*1.5;   \n    g += 1.0;\n    d+=(cos(g*g*g*g*g*30.0))*0.05; \n    \n    return abs(d);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float t = (iTime);\n    vec2 aspectRatio = vec2(1., iResolution.y/iResolution.x);\n\tvec2 uv = fragCoord/iResolution.xy; \n    vec2 p = (uv-.5)*aspectRatio;\n    vec3 cpos = vec3(0.0,0.0,-5.0);\n    vec3 bpos = cpos;\n    vec3 ray = vec3(sin(p.xy),.5);\n    float k = 5.0;\n    vec3 g,b;\n    for (int i = 0; i < 30; i++) {\n        float d = dist(cpos);\n        if (d > .2)  \n            b += vec3(1.,1.4,-0.)/(d*100.);\n\t\td = max(d,.015);\n        cpos += ray*d;\n        if (d < 0.01) break;\n        if (d > 20.0) break;\n       \n        g += vec3(1.5,.5,0.7)*(min(1./1., d)/(9.+k))/ max(0.4, (cpos.z-bpos.z-(3.+k))*.2);\n    }\n    vec3 col = g;\n    col += b*smoothstep(-100.,0., -cpos.z)*.2;\n    col += max(0.,texture(iChannel3,vec2(uv.x/2.0,0.)).r/3.0-uv.y);\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}