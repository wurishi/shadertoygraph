{"ver":"0.1","info":{"id":"ttSSWy","date":"1566921883","viewed":138,"name":"Shifting Squares","username":"sfaer","description":"Is this white squares rotating on black foreground, or black squares rotating on white foreground ?","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["2d","illusion"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define PI 3.14159265\n\nvec2 rotate2D( in vec2 uv, in float alpha )\n{\n    float c = cos(alpha);\n    float s = sin(alpha);\n    uv =  mat2(c, -s, s, c) * (uv - 0.5) + 0.5;\n    return uv;\n}\n\nvec2 tile(in vec2 uv, in float zoom)\n{\n    return fract(uv * zoom);\n}\n\nfloat box( in vec2 uv, in vec2 size, in float smoothEdges )\n{\n  size = 0.5 - size * 0.5;\n  vec2 aa = vec2( smoothEdges*0.5 );\n  vec2 st = smoothstep( size, size+aa, uv)\n          * smoothstep( size, size+aa, 1.0 - uv);    \n  return st.x * st.y;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 invRes = 1.0 / iResolution.xy;\n    vec2 uv = fragCoord * invRes;\n         uv.y *= iResolution.y * invRes.x;\n    \n    float dx = iMouse.x * invRes.x;\n    float dy = iMouse.y * invRes.y;\n    \n    float shiftAngle = PI * 0.25;\n    float speed = mix( 1.0, 3.5, dy);\n    float angle = mod( speed * iTime, PI) + shiftAngle;\n    float doShift = step(angle, PI-shiftAngle);\n    float scale = mix(4.0, 32.0, dx);\n    vec2 shiftOffset = vec2(-0.5, 0.5) / scale;\n    \n    //angle *= sign(doShift-0.5);\n    \n    uv += doShift * shiftOffset;\n    uv = tile(uv, scale);\n    uv = rotate2D(uv, angle);\n\n    float ic = abs(box(uv, vec2(0.71), 0.012) - doShift);\n    fragColor = vec4(vec3(0.15+0.77*ic), 1.0);\n}","name":"Image","description":"","type":"image"}]}