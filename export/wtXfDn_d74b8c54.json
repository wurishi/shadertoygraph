{"ver":"0.1","info":{"id":"wtXfDn","date":"1596535062","viewed":54,"name":"Warp Polar Image","username":"sirotin","description":"Remaps polar image to cartesian","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["polar"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI\t\t3.1415\n#define PI_2\t(PI * 2.0)\n\nvec4 colormap(float x) {\n    \n    float r = x < 0.7 ? (4.0 * x - 1.5) : (4.0 * x + 4.5);\n    float g = x < 0.5 ? (4.0 * x - 0.5) : (-4.0 * x + 3.5);\n    float b = x < 0.3 ? (4.0 * x + 0.5) : (-4.0 * x + 2.5);\n    r = clamp(r, 0.0, 1.0);\n    g = clamp(g, 0.0, 1.0);\n    b = clamp(b, 0.0, 1.0);\n    return vec4(r, g, b, 1.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float ratio = iResolution.x / iResolution.y;\n    float cx = (fragCoord.x / iResolution.x - 0.5) * 2.0 * ratio;\n    float cy = (fragCoord.y / iResolution.y) * 2.0 - 1.0;\n    vec2 uv = vec2(cx, cy);\n    \n    ivec2 texSize = textureSize(iChannel0, 0);\n    \n    // float angleMul = float(texSize.y) / PI_2;\n    float r = sqrt(uv.x * uv.x + uv.y * uv.y);\n    float a = atan(uv.y, uv.x) / PI_2;\n    vec2 polar = vec2(r, a);\n    vec4 tex = texture(iChannel0, polar);\n        \n    fragColor = (r >= 1.0) ? vec4(0,0,0,1.0) : colormap(tex.r);\n    // fragColor = vec4(tex.r, tex.r, tex.r, 1.0);\n    \n    // uv = fragCoord.xy / iResolution.xy;\n    // tex = texture(iChannel0, uv.xy);\n    // fragColor = vec4(tex.r, tex.r, tex.r, 1.0);\n}","name":"Image","description":"","type":"image"}]}