{"ver":"0.1","info":{"id":"Mlc3DX","date":"1472026463","viewed":256,"name":"Book Turning","username":"gjy_1992","description":"rigid book turning","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat angleDeg=30.0;\n    float shadow=10.0;\n    \n    float angle=angleDeg/180.0*3.1415926;\n    float yzoom=sin(angle);\n    vec2 pos=fragCoord.xy/iResolution.xy;\n    float progress=fract(iTime/10.0);\n    if(progress<0.5)\n    {\n        if(pos.x<0.5)\n            fragColor=texture(iChannel0, pos);\n        else\n        {\n        \tfloat th=atan(sin(progress*3.1415926)/cos(progress*3.1415926));\n            vec2 normalPos=fragCoord.xy-vec2(iResolution.x/2.0,0);\n            normalPos.x/=cos(th);\n            normalPos.y-=normalPos.x*sin(th)*yzoom;\n            vec2 pos2=normalPos.xy/iResolution.xy;\n            pos2.x+=0.5;\n            if(pos2.x>=0.0 && pos2.x<1.0 && pos2.y>=0.0 && pos2.y<1.0)\n                fragColor=texture(iChannel0, pos2);\n            else\n            {\n                fragColor=texture(iChannel1, pos);\n                float sx=shadow/iResolution.x;\n                float sy=shadow/iResolution.y;\n                if(pos2.x>=-sx && pos2.x<1.0+sx && pos2.y>-sy && pos2.y<=1.0+sy)\n                {\n                    float deltaX=0.0;\n                    float deltaY=0.0;\n                    if(pos2.x<0.0)\n                        deltaX=-pos2.x;\n                    else if(pos2.x>=1.0)\n                        deltaX=pos2.x-1.0;\n                    if(pos2.y<0.0)\n                        deltaY=-pos2.y;\n                    else if(pos2.y>=1.0)\n                        deltaY=pos2.y-1.0;\n                    if(deltaX>deltaY)\n                        fragColor.rgb=fragColor.rgb*mix(0.0, 1.0, deltaX/sx);\n                    else\n                        fragColor.rgb=fragColor.rgb*mix(0.0, 1.0, deltaY/sy);\n                }\n            }\n        }\n    }\n    else\n    {\n        if(pos.x>0.5)\n            fragColor=texture(iChannel1, pos);\n        else\n        {\n        \tfloat th=atan(-sin(progress*3.1415926)/cos(progress*3.1415926));\n            vec2 normalPos=fragCoord.xy-vec2(iResolution.x/2.0,0);\n            normalPos.x/=cos(th);\n            normalPos.y+=normalPos.x*sin(th)*yzoom;\n            vec2 pos2=normalPos.xy/iResolution.xy;\n            pos2.x+=0.5;\n            if(pos2.x>=0.0 && pos2.x<1.0 && pos2.y>=0.0 && pos2.y<1.0)\n                fragColor=texture(iChannel1, pos2);\n            else\n            {\n                fragColor=texture(iChannel0, pos);\n                float sx=shadow/iResolution.x;\n                float sy=shadow/iResolution.y;\n                if(pos2.x>=-sx && pos2.x<1.0+sx && pos2.y>-sy && pos2.y<=1.0+sy)\n                {\n                    float deltaX=0.0;\n                    float deltaY=0.0;\n                    if(pos2.x<0.0)\n                        deltaX=-pos2.x;\n                    else if(pos2.x>=1.0)\n                        deltaX=pos2.x-1.0;\n                    if(pos2.y<0.0)\n                        deltaY=-pos2.y;\n                    else if(pos2.y>=1.0)\n                        deltaY=pos2.y-1.0;\n                    if(deltaX>deltaY)\n                        fragColor.rgb=fragColor.rgb*mix(0.0, 1.0, deltaX/sx);\n                    else\n                        fragColor.rgb=fragColor.rgb*mix(0.0, 1.0, deltaY/sy);\n                }            }\n        }\n    }\n}","name":"Image","description":"","type":"image"}]}