{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"#define NUM_EXPLOSIONS 20.\n#define NUM_HEART_PARTICLES 40.\n#define PI 3.14159265\n#define HEART_COLOR vec3(1., .015, .012)\n\nfloat smoothmax(float a, float b, float k){\n    float h = clamp((b-a)/k+.5, 0., 1.);\n    return mix(a,b,h)+h*(1.-h)*k*.5;\n}\n\nvec2 random12(float t){ \n    float x = fract(sin(t*674.556)*453.2); \n    float y = fract(sin((t+x)*714.3)*263.2); \n    \n    return vec2(x, y);\n}\n\nfloat random21(vec2 i){\n    return fract(sin(dot(i, vec2(321.590,221.630)))*12431.1235);\n}\n\nfloat random11(float t){\n    return fract(sin(t*451252.125)*123124.2525);\n}\n\nvec2 random_polar12(float t){ \n    // polar coordinate\n    float angle = fract(sin(t*674.3)*453.2)*2.*PI; // 0 ~ 2PI \n    float radius = fract(sin((t+angle)*714.3)*263.2);\n    \n    return vec2(sin(angle), cos(angle)) * radius;\n}\n\nfloat Heart(vec2 uv, float blur, float size){\n    float radius = 0.15;\n    blur *= radius;\n    \n    uv*=size*.35;\n    uv.x*=.7; \n    uv.y -= smoothmax(sqrt(abs(uv.x))*0.452, blur, 0.116); \n    float dist= length(uv);\n    \n    return smoothstep(radius+blur, radius-blur,dist);\n}\n\nmat2 rotated2d(float a){\n    return mat2(cos(a), -sin(a),\n               sin(a), cos(a));\n}\n\nfloat HeartExplosion(vec2 uv, float speed){\n    float heart_brightness = -1.05; // total heart brightness\n    vec2 dir = random_polar12(1.)*speed;\n    float dist = length(uv-dir*speed);\n    float brightness = mix(0.07,0.146,smoothstep(.05,0.,speed));\n    brightness *= sin(speed*20.)*.25+.75;  // 0~1\n    heart_brightness += brightness/dist;\n\n    for(float i=0.; i<NUM_HEART_PARTICLES; i++){\n        dir = random_polar12(i+1.)*speed;\n        vec2 qt_dir = floor(dir);\n        \n        dist = Heart(uv-dir*speed, 0.212, i);\n        brightness = smoothstep(1.512,1.120, smoothstep(.05,0.,dist));\n        dist *= brightness;\n        \n        heart_brightness += dist;\n    }\n    return heart_brightness*1.5;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy/iResolution.xy;\n    uv = uv*2.-1.;\n    uv.x *= iResolution.x/iResolution.y;\n    \n    vec3 col = vec3(0);\n    float colorbrightness = 0.344;\n    \n    for(float i=0.; i<NUM_EXPLOSIONS; i++){\n        float t = iTime+i/NUM_EXPLOSIONS; \n        float qt_t = floor(t);\n        \n        vec3 color = sin(10.*vec3(0.980,0.542,0.390)*qt_t)*.35+.65; // 0.3 ~ 1\n        // vec3 color = HEART_COLOR;\n        \n        vec2 offset = random12(i+1.+ qt_t)-0.5;\n        offset *= random21(vec2(0.230,0.35));\n        offset *= rotated2d(iTime*0.85+qt_t)*1.6;\n        \n        col += HeartExplosion(uv-offset, fract(t)) * color * colorbrightness;\n    }\n    \n    col *=.09;\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"3lVfW3","date":"1615191111","viewed":483,"name":"Heart star","username":"ddpms","description":"reference : https://www.youtube.com/watch?v=dXyPOLf2MbU","likes":17,"published":1,"flags":0,"usePreview":0,"tags":["star","galaxy","heart"],"hasliked":0,"parentid":"","parentname":""}}