{"ver":"0.1","info":{"id":"ctGBzm","date":"1701909856","viewed":56,"name":"Hexasticks test #24","username":"Elsio","description":"tentando...","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["gears","glass","refract","object","vidro"],"hasliked":0,"parentid":"cttfR4","parentname":"Does not fit"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define chanfro(q, a)  abs(dot(cos(a + vec2(0, -11.)), q)) - .12\n#define wmod(p, w) (mod(p, w) - w/2.)\n#define rot(a) mat2(cos(a + vec4(0, 11, 33, 0)))\n#define t      iTime\n#define PI     3.1415\n\n#define S(a) smoothstep(2./R.y, .0, a)\n#define mark(a, b)                                                     \\\n    o = mix(                                                           \\\n            o, vec4(1,1,1,0),                                          \\\n            S(abs(length(u - vec2(a, b)) - .025)));               \n\n\nvec4 cor;\nfloat tambor(vec3 p) {\n    float s1, s2, s = 0., d, l;\n    \n    vec2 div = vec2(sqrt(3.), 1) * .35,\n         q1 = mod(p.xy + div, div * 2.) - div,\n         q2 = mod(p.xy      , div * 2.) - div;\n    \n    s1 = \n        max(\n            max(length(q1) - .135, chanfro(q1, 2.)), \n            max(chanfro(q1, 4.), chanfro(q1, 6.)) \n        ); \n    \n    s2 = \n        max(\n            max(length(q2) - .135, chanfro(q2, 2.)), \n            max(chanfro(q2, 4.), chanfro(q2, 6.)) \n        ); \n    \n    \n    \n    s = min(s1, s2);\n    \n    s = max(s, abs(length(p.xy) - 1.3) - .35);\n        \n    return abs(max(abs(p.z) - 2.6, s)) - .005;\n}\n\nfloat map(vec3 p, float mx, float my) {\n    float s, s1, s2, s3, s4;\n    \n    s1 = tambor(p);\n    \n    p.zy *= rot(PI/3.);\n    p.x += .3;\n    s2 = tambor(p);\n    //s2 = 1.;\n    \n    p.zy *= rot(-PI/3.);\n    p.xy *= rot(2.*PI/3.);\n    p.x -= mx;\n    p.zy *= rot(PI/3.);\n    s3 = tambor(p);\n    //s3 = 1.;\n\n    \n    p.zy *= rot(-PI/3.);\n    p.xy *= rot(2.);\n    p.x -= my;\n    p.zy *= rot(PI/3.);\n    s4 = tambor(p);\n    //s4 = 1.;\n\n    s = min(s1, min(s2, min(s3, s4)));\n    \n    cor = vec4(0);\n    if(s == s1) cor = vec4(1,1,0,0);\n    if(s == s2) cor = vec4(0,1,1,0);\n    if(s == s3) cor = vec4(1,0,1,0);\n    \n    return s;\n}\n\n\n\n\n\nvoid mainImage(out vec4 o, vec2 I) {\n    vec3 R = iResolution, q;\n    vec2 u = (I - R.xy * .5) / R.y;\n         \n    float d, s, f, i, j,\n          e = 1e-2;          \n    \n    vec2 m = iMouse.z > 40.\n            ? (iMouse.xy - R.xy * .5) / R.y\n            : vec2(.12, .26);\n    \n    for(o *= 0.; i++ < 44. ; d += max(s, e / 5.)) {\n        q = d * (vec3(I, R.y) - R/2.) / R.y - vec3(0, 0, 5),  // p + d*D\n        \n        //q.yz *= rot(M.x);\n        //q.xy *= rot(M.y);\n\n        q.yz *= rot(cos(t * .7) * .4);\n        q.xy *= rot(cos(t * .8) * .3);\n\n        s = map(q, m.x, m.y);\n        \n        for(j = 4.; j < 32.; j += j) \n            s += .008 * abs(dot(sin(q.zx *= j * 2.), q.zy/q.zy)) / j;\n        \n        s = abs(s) - .002,\n        f = 1. - s / e, \n        j = f / d * i / 400.,\n        \n        f > -.5\n            ? o += j, j\n            : o.g += .00;\n            \n        f > -.5 \n                ? o -= j * cor/2. : o;\n    }\n    \n    mark(.12, .26);\n    mark(-.47, .033);\n    mark(.17, -.34);\n    \n    o.rg += (1. - o.r) * S(length(u - m) - .01);\n}","name":"Image","description":"","type":"image"}]}