{"ver":"0.1","info":{"id":"stX3RH","date":"1621514881","viewed":77,"name":"Pearl vortex phase","username":"chaddon","description":"Click to set vortex position.\n\nVisualises the isolines of the gauge-invariant phase (green) and stream function (blue) from https://doi.org/10.1103/PhysRevB.89.014516\n\nBlack represents a thin narrow superconducting strip with a JJ at left edge","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["visualization"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float pi = 3.14159;\n\nvec2 xy0() {\n    return 2.0*(iMouse.xy - 0.25*iResolution.xy*vec2(0.75, 1.0)) / iResolution.y;\n}\n\nvec2 uv(vec2 xy) {\n    return vec2(\n        sinh(pi*xy.x) * sin(pi*xy.y),\n        -cosh(pi*xy.x) * cos(pi*xy.y)\n    );\n}\n\nvec2 uv0() {\n    return uv(xy0());\n}\n\nvec2 F(vec2 uv) {\n    float r1 = length(uv - uv0());\n    float r2 = length(uv - uv0() * vec2(-1, 1));\n    float t1 = atan(uv.y - uv0().y, uv.x - uv0().x);\n    float t2 = atan(uv.y - uv0().y, uv.x + uv0().x);\n    \n    return 2.0*vec2(log(r1/r2), t1 - t2);\n}\n\nvec4 gradF(vec2 xy) {\n    float h = 0.001;\n    return vec4(\n        (F(uv(xy + vec2(h, 0.0))) - F(uv(xy - vec2(h, 0.0)))) / (h + h),\n        (F(uv(xy + vec2(0.0, h))) - F(uv(xy - vec2(0.0, h)))) / (h + h)\n    );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 xy = 2.0*(fragCoord - 0.25*iResolution.xy*vec2(0.75, 1.0)) / iResolution.y;\n\n    vec3 col = vec3(0.0);\n    \n    vec2 F = F(uv(xy));\n    vec4 gradF = gradF(xy);\n    \n    if(fract(8.0 * F.x / (2.0*pi)) < 0.015 * length(gradF.xz)) {\n        col = vec3(0.3, 0.3, 0.8);\n    }\n    if(fract(4.0 * F.y / (2.0*pi)) < 0.01 * length(gradF.yw)) {\n        col = vec3(0.3, 0.8, 0.3);\n    }\n    \n \n    if(xy.x < 0.0 || xy.y < 0.0 || xy.y > 1.0)\n        col = vec3(0.3);\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}