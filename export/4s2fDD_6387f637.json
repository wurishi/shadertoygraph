{"ver":"0.1","info":{"id":"4s2fDD","date":"1500487810","viewed":171,"name":"cool EQ","username":"Coolok","description":"cool EQ","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["cooleq"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define FFT_BASE_COLOR vec3(0.6, 1., 1.)\n#define FFT_AUX_COLOR vec3(0.25, 0.50, 0.75)\n#define FFT_DAMP 60.\n#define FFT_THRESHOLD 0.0\n#define FFT_FTCH 0.25\n#define FFT_NORM_SMOOTH 0.1\n\n#define DRAW_PARTICLES\n#define PARTICLE_THRESHOLD 1.2\n#define PARTICLE_DECAY 0.02\n\n#define GROUND_HEIGHT 0.3\n#define GROUND_MARGIN 0.98\n#define GROUND_SPLIT_COLOR vec4(0.1)\n\n#define FX_CHANNEL iChannel1\n#define SND_CHANNEL iChannel0\n\nstruct frag {\n    vec2 uv;\n    vec2 xy;\n    vec4 c;\n    vec4 pc;\n};\n\nfrag gFrag;\n\n// defines or not ?\nfloat GetSndVal(in float idx, in float damp)\n{\n    return texture(SND_CHANNEL, vec2(idx, damp)).x;\n}\t\n\nvoid drawFlames()\n{\n    float \n        x = abs(0.5 - gFrag.uv.x),\n        y = abs(GROUND_HEIGHT - gFrag.uv.y),\n        fft = GetSndVal(x, FFT_FTCH);\n    \n    fft -= y;\n    fft *= (exp((fft - FFT_THRESHOLD) * 10.) / FFT_DAMP) - (exp(0.) / FFT_DAMP);\n    fft *= 1. - x * 2.;\n   \n    gFrag.c.rgb = FFT_BASE_COLOR * fft;\n    y *= 2. * (gFrag.uv.y > GROUND_HEIGHT ? 1. : 0.05);\n    gFrag.c.rgb *= y / (1. - FFT_AUX_COLOR);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    gFrag.xy = fragCoord.xy;\n    gFrag.uv = fragCoord.xy / iResolution.xy;\n    float yCoef = 1.5;\n    gFrag.pc = vec4(0.0);\n    drawFlames();\n\n    \n    fragColor = gFrag.c;\n}\n","name":"Image","description":"","type":"image"}]}