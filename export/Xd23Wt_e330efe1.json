{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#define PI 3.14159265359\n#define FILTER 1\nfloat s;\nvoid srand(vec2 p){\n\ts=sin(dot(p,vec2(423.62431,321.54323)));\n}\nfloat rand(){\n\ts=fract(s*32322.65432+0.12333);\n\treturn abs(fract(s));\n}\nvec4 hash2d(vec2 p){\n\tsrand(p);\n\tvec4 c;\n\tc.r=rand();\n\tc.g=rand();\n\tc.b=rand();\n\treturn c;\n}\nmat2 rot2d(float a){\n\tfloat c=cos(a);\n\tfloat s=sin(a);\n\treturn mat2(\n\t\tc,-s,\n\t\ts, c);\n}\nmat3 rotx(float a){\n\tfloat c=cos(a);\n\tfloat s=sin(a);\n\treturn mat3(\n\t\t1.0,0.0,0.0,\n\t\t0.0,  c, -s,\n\t\t0.0,  s,  c);\n}\nmat3 roty(float a){\n\tfloat c=cos(a);\n\tfloat s=sin(a);\n\treturn mat3(\n\t\tc,  0.0,  s,\n\t\t0.0,1.0,0.0,\n\t\t-s, 0.0,  c);\n}\nmat3 rotz(float a){\n\tfloat c=cos(a);\n\tfloat s=sin(a);\n\treturn mat3(\n\t\t  c, -s,0.0,\n\t\t  s,  c,0.0,\n\t    0.0,0.0,1.0);\n}\nvec2 simplex(vec2 p){\n\tvec2 r;\n\tr.x=1.1547*p.x;\n\tr.y=p.y+0.5*r.x;\n\treturn r;\n}\nvec2 unsimplex(vec2 p){\n\tvec2 r;\n\tr.y=p.y-0.5*p.x;\n\tr.x=p.x/1.1547;\n\treturn r;\n}\nvec4 noise2d(vec2 p){\n\tp=simplex(p);\n\tvec2 p0=floor(p);\n\tvec2 p1=p0+vec2(1.0,0.0);\n\tvec2 p2=p0+vec2(1.0,1.0);\n\tvec2 p3=p0+vec2(0.0,1.0);\n\tvec2 i=fract(p);\n\tvec4 r0,r1,r2;\n\tfloat d0,d1,d2;\t\n\tif(i.x>i.y){\n\t\tr0=hash2d(p0);\n\t\tr1=hash2d(p1);\n\t\tr2=hash2d(p2);\n\t\td0=max(1.0-distance(unsimplex(p),unsimplex(p0)),0.0);\n\t\td1=max(1.0-distance(unsimplex(p),unsimplex(p1)),0.0);\n\t\td2=max(1.0-distance(unsimplex(p),unsimplex(p2)),0.0);\n\t\t/*\n\t\td0=max(1.0-distance(p,p0),0.0);\n\t\td1=max(1.0-distance(p,p1),0.0);\n\t\td2=max(1.0-distance(p,p2),0.0);\n\t\t*/\n\t}else{\n\t\tr0=hash2d(p0);\n\t\tr1=hash2d(p2);\n\t\tr2=hash2d(p3);\n\t\td0=max(1.0-distance(unsimplex(p),unsimplex(p0)),0.0);\n\t\td1=max(1.0-distance(unsimplex(p),unsimplex(p2)),0.0);\n\t\td2=max(1.0-distance(unsimplex(p),unsimplex(p3)),0.0);\n\t}\n\t/*\n\tfloat d=d0+d1+d2;\n\td0/=d;\n\td1/=d;\n\td2/=d;\n\t*/\n\treturn d0*r0+d1*r1+d2*r2;\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\tfloat r=iResolution.x/iResolution.y;\n\tvec2 p=vec2((fragCoord.x-iResolution.x/2.0)/iResolution.x*r,(fragCoord.y-iResolution.y/2.0)/iResolution.y);\n\tvec4 n=vec4(0.0);\n\tfloat t=iTime/PI;\n#if FILTER\n\tvec2 x=vec2(0.5/iResolution.y,0.0);\n\tx*=rot2d(PI/8.0);\n\tn+=0.25*noise2d((p+x)*10.0);\n\tx*=rot2d(PI/4.0);\n\tn+=0.25*noise2d((p+x)*10.0);\n\tx*=rot2d(PI/4.0);\n\tn+=0.25*noise2d((p+x)*10.0);\n\tx*=rot2d(PI/4.0);\n\tn+=0.25*noise2d((p+x)*10.0);\n#else\n\tn=noise2d(p*10.0);\n#endif\n\tn.rgb*=rotx(t);\n\tn.rgb*=roty(t);\n\tn.rgb*=rotz(t);\n\tfragColor=vec4(abs(n));\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"Xd23Wt","date":"1395250181","viewed":375,"name":"Simplex Mosiac","username":"Justaway","description":"A simplex mosiac.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["procedural","2d","mosiac"],"hasliked":0,"parentid":"","parentname":""}}