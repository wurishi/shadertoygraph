{"ver":"0.1","info":{"id":"lfdXR2","date":"1719249697","viewed":69,"name":" Hexagonal Weaving     芒星编织网","username":"shadertoyjiang","description":"wang","likes":17,"published":1,"flags":0,"usePreview":0,"tags":["hexagonal","wang","weaving"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n// 2024年04月27日 \n#define M(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define PI    3.14159265358979\n\nfloat mxb(vec3 p)\n{\n        vec2 u=p.xy,\n             k = vec2(sqrt(3.),1),\n             e,// = vec2(1,-1),\n             i = round(u*k)/k,\n             s = sign(u-i),\n             a = abs(u-i),            \n             cs = vec2(cos(4.*PI*a.y),sin(2.*PI*a.x*k.x))*s.x*s.y*.03;             \n        float md=1e8, d;        \n        md = length(vec2(a.y-.25,p.z - cs.y));        \n        \n        \n        for(int i;i<3;i++)\n        {\n              e = 1.-vec2(i%2,i/2)*2.;\n              md=min(md, length(vec2(  abs( dot(a*e-vec2(0,.5), k/2. ) )  , p.z - e.x*e.y* cs.x) ));              \n        } \n        \n        return md-.05;\n}\n\nfloat m(vec3 p)\n{\n        float t = iTime*1.+2.; p.xy *= M(t*.3); p.yz *= M(t); // p.zx *= M(t*2.);\n        return mxb(p);\n}\n\nvoid mainImage(out vec4 O, vec2 v)\n{\n        O = vec4(0);\n        vec2 R = iResolution.xy,\n             u = (v + v  + .1 - R) / R.y;\n        vec3 o, \n             r = normalize(vec3(u, 1)),\n             e,\n             n, s;\n        float d = e.y = 1e-3,t,i;\n        o.z = -2.;\n        for(;i < 100. && t < 10. && d >=e.y ;i++)\n                t += d = m(o += r * d * .8) ; \n        if(i >= 100. || t > 10.){O += .5; return;}\n        n = normalize(  vec3(m(o+e.yxx),m(o+e),m(o+e.xxy)) - d );\n        s = vec3(-1,2,-3) * .27;\n        O += .5 + .5 * dot(n, s);\n}\n","name":"Image","description":"","type":"image"}]}