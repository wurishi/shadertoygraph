{"ver":"0.1","info":{"id":"tdVyRK","date":"1603272845","viewed":106,"name":"Example 51 - game of thrones","username":"jt","description":"Play game of thrones theme in mediocre quality ;-)","likes":3,"published":1,"flags":8,"usePreview":0,"tags":["example","melody","theme","gameofthrones"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":3,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// \"sound-in\" message from https://www.shadertoy.com/view/MtyXRW by Fabrice Neyret\n// --- access to the image of ascii code c\n//#define C(c) U.x-=.5; T+= U.x<.0||U.x>1.||U.y<0.||U.y>1. ?vec4(0): texture( iChannel3, U/16. + fract( vec2(c, 15-c/16) / 16.))\n//#define C(c) U.x-=.5; T+= U.x<.0||U.x>1.||U.y<0.||U.y>1. ?vec4(0): textureLod( iChannel3, U/16. + fract( vec2(c, 15-c/16) / 16.), \\\n//                                                                               log2(length(fwidth(U/16.*iResolution.xy))) )\n  #define C(c) U.x-=.5; T+= U.x<.0||U.x>1.||U.y<0.||U.y>1. ?vec4(0): textureGrad(iChannel3, U/16. + fract( vec2(c, 15-c/16) / 16.), dFdx(U/16.),dFdy(U/16.) )\n#define initMsg vec4 T = vec4(0)\n#define endMsg  return length(T.yz)==0. ? 0. : T.x\n\nfloat message(vec2 U) { // to alter in the icon with the alter message\n    vec4 T = vec4(0);   // or: initMsg;\n    C(83);C(111);C(117);C(110);C(100);C(32);C(105);C(110); // message \"Sound in\"\n    return length(T.yz)==0. ? -1. : T.x; // or: endMsg;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    //  if (iResolution.y<200.) to display only in the icon \n    if (iResolution.y<2000.) {float c=message((fragCoord/iResolution.y-vec2(.1,.2))*8.);if(c>=0.){fragColor=vec4(c);return;}}\n\n    \n    vec2 uv = fragCoord.xy / iResolution.xy;\n\tfragColor = vec4(uv,0.5+0.5*sin(iTime),1.0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define pi 3.1415926\n\nfloat wave(float t)\n{\n    return sin(2.0 * pi * t);\n}\n\nfloat saw(float t)\n{\n    return 2.0 * fract(t) - 1.0;\n}\n\n#define S 8.0\n#define N 96\n\nconst int base[N] = int[N](\n    7, 7, 0, 0, 3, 5,\n    7, 7, 0, 0, 3, 5,\n    7, 7, 0, 0, 3, 5,\n    7, 7, 0, 0, 3, 5,\n    2, 2,-5,-5,-2, 0,\n    2, 2,-5,-5,-2, 0,\n    2, 2,-5,-5,-2, 0,\n    2, 2,-5,-5,-2, 0,\n    5, 5,-2,-2, 2, 3,\n    5, 5,-2,-2, 2, 3,\n    5, 5,-2,-2, 2, 3,\n    5, 5,-2,-2, 3, 2,\n    0, 0,-7,-7,-4,-2,\n    0, 0,-7,-7,-4,-2,\n    0, 0,-7,-7,-4,-2,\n    0, 0,-7,-7,-4,-2\n);\n\nconst int voice[N] = int[N](\n    7, 7, 7, 7, 7, 7,\n    0, 0, 0, 0, 0, 0,\n    3, 5, 7, 7, 7, 7,\n    0, 0, 0, 0, 3, 5,\n    2, 2, 2, 2, 2, 2,\n    2, 2, 2, 2, 2, 2,\n    2, 2, 2, 2, 2, 2,\n    2, 2, 2, 2, 2, 2,\n    5, 5, 5, 5, 5, 5,\n   -2,-2,-2,-2, 3, 2,\n    5, 5, 5, 5, 5, 5,\n   -2,-2,-2,-2, 3, 2,\n    0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 0\n    );\n\nivec2 note(float time)\n{\n    int n = int(floor(time * S)); // keep in sync with local\n    return ivec2(base[n % N] - 24, voice[n % N]);\n}\n\nfloat local(float time)\n{\n    return fract(time * S) / S; // keep in sync with note\n}\n\nfloat sound1(float freq, float time)\n{\n    float t = freq * time;\n    float h = clamp(1.0 - 4.0 * time, 0.0, 1.0); // linear\n    return mix(wave(t), saw(t), h) * h; // plucked string like sound\n}\n\nfloat sound2(float freq, float time)\n{\n    float t = freq * time;\n    float h = 0.5;\n    return mix(wave(t), saw(t), h);\n}\n\nfloat play(float time)\n{\n    ivec2 n = note(time);\n    float t = local(time);\n    vec2 f = 0.5 * 440.0 * exp2(vec2(n) / 12.0);\n    return sound1(f.x, t) + sound2(f.y, t);\n}\n\nvec2 mainSound( in int samp, float time )\n{\n    //return vec2(sound(0.25 * 440.0, time)); \n    return vec2(play(time));\n}\n","name":"Sound","description":"","type":"sound"}]}