{"ver":"0.1","info":{"id":"flKSzc","date":"1641162918","viewed":186,"name":"Numerical bug in mod()","username":"ShnitzelKiller","description":"This shader demonstrates that it is possible for the output of mod(x, y) to be outside the range (0, y). Each dot represents a seed for which the noise function results in a value below 0 or above maxval.","likes":2,"published":3,"flags":0,"usePreview":0,"tags":["mod","bug"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define maxval 3\n\n//This noise function should return values strictly in the range 0 <= x < maxval\nvec2 hash2D(vec2 uv) {\n    return mod(3e4*sin((uv)*mat2(1,13.51,73.37,-57.17)), float(maxval));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = floor(fragCoord/10.) + iTime;\n\n    vec2 noise = hash2D(uv);\n\n    // Highlight any values of the noise function that are >= maxval or < 0\n    fragColor = vec4(step(float(maxval),noise.xxy) + (1.-step(0., noise.xyy)),1.0);\n}","name":"Image","description":"","type":"image"}]}