{"ver":"0.1","info":{"id":"fsXXDS","date":"1619114872","viewed":91,"name":"Metaballs: Living on the edge","username":"longshot","description":"Basic metaballs with distance field.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["metaballs"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//--------------------------------------------------------\n// Basic metaballs with distance field\n// \n// v1.0 - 2021-03-28 - Initial version\n// Thanks to mrange for improvements\n//--------------------------------------------------------\n\n\nfloat circle(vec2 pos, float r) {\n  return length(pos) - r;\n}\n\n// Polynominal smooth min, https://iquilezles.org/articles/smin\nfloat pmin(float a, float b, float k) {\n  float h = clamp( 0.5+0.5*(b-a)/k, 0.0, 1.0 );\n  return mix( b, a, h ) - k*h*(1.0-h);\n}\n\nfloat df(vec2 p) {\n  float d = 1E6;\n  for (int i = 0; i < 6; ++i) {\n    float a = 1.2*(iTime + 2.0*float(i));\n    float d0 = circle(p - vec2(cos(a), sin(a*sqrt(0.2))), 0.63);\n    d = pmin(d, d0, 0.15);\n  }\n  for (int i = 0; i < 4; ++i) {\n    d = abs(d) - 0.0005/d;\n  }\n  return d;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n  vec2 q = fragCoord/iResolution.xy;\n  vec2 p = -1.0 + 2.0*q;\n  p.x *= iResolution.x/iResolution.y;\n  float aa = 2.0/iResolution.y;\n  vec3 col = vec3(0.2,0.2,0.2);\n  float d = df(p);\n  col = mix(col, vec3(1.0,0.2,0.0), smoothstep(-aa, aa, -d));\n  fragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}