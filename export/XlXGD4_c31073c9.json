{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"// http://stackoverflow.com/questions/5451376/how-to-implement-this-tunnel-like-animation-in-webgl\n// Converted to ShaderToy by Michael Pohoreski in 2015\n// https://www.shadertoy.com/view/XlXGD4\n// Minor cleanup\n// Remove unused vars: CENTER, x, y, PI\n\n// BUG: Why is precision being used from comments???\n// precision.BUG highp float;\n// #precision.BUG mediump float; // or lowp\n\nconst int   MAX_RINGS     = 30;\nconst float RING_DISTANCE = 0.05;\nconst float WAVE_COUNT    = 60.0;\nconst float WAVE_DEPTH    = 0.04;\n\n//uniform float uTime;\n//varying vec2 vPosition;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) \n{\n    vec2 vPosition = 2.*fragCoord.xy/iResolution.xy-1.;\n    float rot = mod(iTime*0.6, 6.28318530717959 ); // 2.*PI\n    \n    bool black = false;\n    float prevRingDist = RING_DISTANCE;\n    for (int i = 0; i < MAX_RINGS; i++) {\n        vec2  center = vec2(0.0, 0.7 - RING_DISTANCE * float(i)*1.2);\n        float radius = 0.5 + RING_DISTANCE / (pow(float(i+5), 1.1)*0.006);\n        float dist   = distance(center, vPosition);\n              dist   = pow(dist, 0.3);\n        float ringDist = abs(dist-radius);\n\n        if (ringDist < RING_DISTANCE*prevRingDist*7.0)\n        {\n            vec2  d           = vPosition - center;\n            float angle       = atan( d.y, d.x );\n            float thickness   = 1.1 * ringDist / prevRingDist;\n            float depthFactor = WAVE_DEPTH * sin((angle+rot*radius) * WAVE_COUNT);\n            if (dist > radius)\n                black = (thickness < RING_DISTANCE * 5.0 - depthFactor * 2.0);\n            else\n                black = (thickness < RING_DISTANCE * 5.0 + depthFactor);\n            break; // causes all white on GTX Titan !? // removes inner thin path\n        }\n        if (dist > radius)\n            break;\n        prevRingDist = ringDist;\n    }\n    \n    fragColor.rgb = black ? vec3(0) : vec3(1);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XlXGD4","date":"1421915458","viewed":477,"name":"WebGL Tunnel","username":"MichaelPohoreski","description":"Soulman's WebGL Tunnel converted to ShaderToy\n\nKnown bug(s): Doesn't work with Windows + GTX Titan or 980 Ti :-/","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["procedural","2d"],"hasliked":0,"parentid":"","parentname":""}}