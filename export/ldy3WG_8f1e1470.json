{"ver":"0.1","info":{"id":"ldy3WG","date":"1456111799","viewed":567,"name":"Inside a Prism","username":"piratehurrdurr","description":"Something more trippy. Enjoy!","likes":14,"published":1,"flags":0,"usePreview":0,"tags":["3d","colorful","trippy"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define IT 256\n#define ITF float(IT)\n#define STR 1.5/sqrt(ITF)\n#define A 1.0\n\n#define M_PI 3.14159254\n\nvec3 colorFilter(vec3 c) {\n    vec3 color;\n    \n    float g = (c.r+c.g+c.b)/3.0;\n    float s = abs(c.r-g)+abs(c.g-g)+abs(c.b-g);\n    \n    color = c*s+(1.0-s)*(c-s);\n    \n    return color*color;\n}\n\nvec3 value(vec3 pos) {\n    vec3 color;\n    \n    color.r = sin(pos.x);\n    color.g = sin(pos.y);\n    color.b = sin(pos.z);\n    \n    return color;\n}\n\nvec3 scan(vec3 pos, vec3 dir){\n    vec3 c = vec3(0.5);\n    for (int i=0; i<IT; i++) {\n        float f = (1.0- float(i)/ITF)*STR;\n        \n        vec3 posMod = value(pos);\n        vec3 newPos;\n        newPos.x = posMod.y*posMod.z;\n        newPos.y = posMod.x*posMod.z;\n        newPos.z = posMod.x*posMod.y;\n        \n        c+=value(pos+newPos*4.0)*f;\n        pos+=dir*2.0;\n    }\n    return colorFilter(c);\n}\n\nvoid mainImage(out vec4 fragColor,in vec2 uv){\n    uv = (uv-iResolution.xy/2.0)/iResolution.y;\n    float a = iTime*0.125;\n    \n    vec3 pos = vec3(cos(a/4.0+sin(a/2.0)),cos(a*0.2),sin(a*0.31)/4.5)*16.0;\n    vec3 on = vec3(1.0,uv.x,uv.y);\n    vec3 n;\n\n    n = normalize(pos + vec3(cos(a*2.3),cos(a*2.61),cos(a*1.62)));\n\tvec3 crossRight = normalize( cross(n,vec3(0.0,0.0,1.0)));\n\tvec3 crossUp = normalize(cross(n, crossRight));\n\tn = n*1.5 + crossRight*uv.x + crossUp*uv.y;\n    \n    fragColor.rgb = scan(pos,normalize(n)).rgb;\n}","name":"Image","description":"","type":"image"}]}