{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"/* The screen is divided into tiles.\n   Each tile is divided into areas painted with different colors.\n   Areas are determined by the polar angle inside the tile.\n*/\n\n#define PI 3.14159265358979323846\n\n// Choose a preset. (from 0 to 3, for now)\nint presetNo = 0;\n\n// PARAMETERS\nfloat numTile = 4.0; // number of tiles in vertical direction\nfloat maxCol = 1.0;\nfloat minCol = 0.25;\nconst float numFrames = 4.0; // number of frames to be used in motion blur\n// change these at presets\nfloat numDiv;\nfloat overallSpeed;\nbool constantSpeed; // if true rotates continuously w/o stopping\nfloat stopAngle; // if constantSpeed is false, stop every this angle\n\n// modulus function for integers\nint imode(int n, int m) {\n    return n-m*(n/m);\n}\n\n// returns the color of a division\nfloat colN(int n) {\n    return minCol + float(n+1)*(maxCol-minCol)/float(numDiv);\n}\n\n// anti-alias(?) between divisions\nfloat colorVal(float angle) {\n    float antiAlias = 0.03; // higher smoother \n\n    float divAngle = 2.0*PI / numDiv; // angle per division\n    int n = int(angle/divAngle); // the division number. 0 -> numDiv - 1\n    float smth = smoothstep( float(n)*divAngle-antiAlias, float(n)*divAngle+antiAlias, angle-0.5*divAngle );\n\t//return colN(n);\n    return colN(n) + ( colN(imode(n+1,int(numDiv)))-colN(n))*smth;\n}\n\n \nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = fragCoord.xy / iResolution.y;\n\tvec2 mo = iMouse.xy / iResolution.y;\n\t\n    float side = 1.0/numTile;\n\t\n    vec2 pos = mod(uv, vec2(side)) - vec2(0.5*side); // generate tiles\n\n\tfloat i = floor(numTile*uv.x);\n    float j = floor(numTile*uv.y);\n\t\n    float im = i-2.*(i/2.);\n    float jm = j-2.*(j/2.);\n    float im2 = im*2.-1.; // for alternating directions \n    float jm2 = jm*2.-1.;\n    float ijm = i+j-2.*((i+j)/2.);\n\n    float angle = atan(pos.x, pos.y);\n\tfloat t = iTime;\n\t\n\t// change the phase and speed of different tiles individually as function of their coordinates\t\n\tif(presetNo==0) { // \n\t\tangle += - i*PI + j*PI; // adjust phase as a function of tile coordinate\n\t\toverallSpeed = 1.5;\n\t\tt *= overallSpeed;\n\t\tnumDiv = 4.0;\n\t\tconstantSpeed = false;\n\t\tstopAngle = PI/4.0;\t\t\n\t} else if(presetNo == 1) { // simplest\n\t\tangle += 0.0;\n\t\toverallSpeed = 2.0;\n\t\tt *= overallSpeed;\n\t\tnumDiv = 2.0;\n\t\tconstantSpeed = true;\n\t\tstopAngle = PI/4.0;\n\t} else if(presetNo == 2) { // \n\t\tangle += mod(j,2.0)*PI;\n\t\toverallSpeed = mod(i,2.0)*6.0-3.0; // adjust the rotation speed of an individual tile\n\t\tt *= overallSpeed;\n\t\tnumDiv = 3.0;\n\t\tconstantSpeed = false;\n\t\tstopAngle = PI/6.0;\n\t} else if(presetNo == 3) { // \n\t\tangle += 0.0*PI;\n\t\toverallSpeed = (i-3.5)*(j-1.5)*2.0;\n\t\tt *= overallSpeed;\n\t\tnumDiv = 4.0;\n\t\tconstantSpeed = false;\n\t\tstopAngle = PI/2.0;\n\t}\t\n\t\n\t// motion blur\n\tfloat col = 0.0;\n\tfloat inNumFrames = 1.0/numFrames;\n\tfor(float m=0.0; m<numFrames; m+=1.0) {\n\t\tfloat t1;\n\t\tif(constantSpeed) {\n\t\t\tt1 = t;\n\t\t} else {\n\t\t\tt1 = (floor(t + 0.02*m) + smoothstep(0.1, 0.9, fract(t + 0.02*m\n)) )*stopAngle;\n\t\t}\n\t\tfloat an = mod(angle + t1, 2.0*PI);\n\t\t//col += inNumFrames*colorVal( an ); // each frame has the same weight in motion blur\n\t\tcol += colorVal( an )*(m+1.0)/(numFrames*(numFrames+1.0)*0.5); // frames have different weights\n\t}\n\t\n\t// vignette\n\tvec2 vig = (fragCoord.xy - 0.5*iResolution.xy) / iResolution.y;\n\tcol *= smoothstep( 1.8, 0.5, length(vig) );\n    fragColor = vec4( col, col, col, 1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lsjGWG","date":"1393029785","viewed":600,"name":"On Rotations and Tiles","username":"vug","description":"Rotating the textures on tiles. Please try different presets.\n\nIs it possible to generate animated GIFs from shaders? :-)","likes":22,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""}}