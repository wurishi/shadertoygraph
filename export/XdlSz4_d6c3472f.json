{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"const float eps=0.01;\nconst bool normalmode = true;\nconst float speed = 1.;\nconst float PI=3.14159;\n\nfloat sine(float x){\n\treturn (sin((x-0.5)*PI)+1.)/2.;\n}\n\nfloat rand(vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat interp(float v){\n\treturn sine(v);\n}\n\nfloat perlin(vec2 uv){\n\tuv*=10.;\n\tuv.x+=iTime*speed;\n\tuv.y+=sine((iTime*speed)/5.)*5.;\n\t\n\tfloat v[4];\n\tv[0] = rand(floor(uv+vec2(0.,0.)));\n\tv[1] = rand(floor(uv+vec2(1.,0.)));\n\tv[2] = rand(floor(uv+vec2(0.,1.)));\n\tv[3] = rand(floor(uv+vec2(1.,1.)));\n\t\n\tvec2 d = fract(uv);\n\t\n\td = vec2(interp(d.x),interp(d.y));\n\t\n\tfloat v1 = mix(v[0],v[1],d.x);\n\tfloat v2 = mix(v[2],v[3],d.x);\n\t\n\tfloat r = mix(v1,v2,d.y);\t\t\t\n\t\t\t\t\n\treturn r;\t\n}\n\nvec3 shade(vec2 uv){\n\t\n\tfloat ang = atan(uv.x,uv.y)/PI;\n\t\n\tang = mod(ang-(iTime*speed)/10.,2.)-1.;\n\t\n\tang = sine(ang);\n\t\n\tfloat v = length(uv);\n\t\n\tv = clamp(v,0.,1.);\n\t\n\tv = sine(v);\n\t\n\tv = sine(v*5.+sine(uv.x+(iTime*speed)/3.));\n\t\n\t//v += sine(uv.x*2.+time/3.)-0.5;\n\t\n\tv*=mix(v,sine(ang*12.),sine(length(uv)));\n\t\n\tvec3 color = vec3(v);\n\t\n\t\n\t\n\tcolor.g = sine(sine(color.g));\n\tcolor.b = sine(color.b);\n\t\n\treturn color;\n\t\t\n}\n\nfloat heightmap(vec2 uv){\n\t\n\treturn shade(uv).r;\n\t\n}\n\nvec3 normalmap(vec2 uv){\n\tfloat p[4];\n\t\n\tp[0]=heightmap(uv+vec2(-eps, eps));\n\tp[1]=heightmap(uv+vec2( eps, eps));\n\tp[2]=heightmap(uv+vec2(-eps,-eps));\n\tp[3]=heightmap(uv+vec2( eps,-eps));\n\t\n\tfloat slx=(p[1]+p[3])/2. - (p[0]+p[2])/2.;\n\tfloat sly=(p[0]+p[1])/2. - (p[2]+p[3])/2.;\n\t\n\treturn normalize(vec3(slx,sly,eps))/2.+0.5;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (2.*fragCoord.xy-iResolution.xy) / iResolution.y;\n\t\n\tvec3 lvec = vec3(0.5,0.3,1.);\n\tlvec = normalize(lvec);\n\t\n\t\n\tvec3 color;\n\t\n\tif(!normalmode){\n\t\tcolor = vec3(heightmap(uv));\n\t}else{\n\t\t\n\t\tvec3 nrm = normalmap(uv);\n\t\tvec3 shd = shade(uv);\n\t\tfloat light = length(dot(nrm,lvec));\n\t\t\n\t\tlight=pow(light,sine(uv.x*3.+(iTime*speed)/3.)*10.);\n\t\t\n\t\tcolor = shd*light;\n\t}\n\t\t\n\t\n\tfragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XdlSz4","date":"1397563344","viewed":186,"name":"TerribleContrastSquidBeak","username":"cafe","description":"simplenarmol","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["simplenormal"],"hasliked":0,"parentid":"","parentname":""}}