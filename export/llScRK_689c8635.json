{"ver":"0.1","info":{"id":"llScRK","date":"1509169384","viewed":97,"name":"Color blind simulation","username":"cyberkm","description":"Color blind simulation","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["protan","deuran","tritan"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Color blind simulation\n//a bit modified version of https://gist.github.com/jcdickinson/580b7fb5cc145cee8740\n\n   #define COLORBLIND_MODE 1 //Protan\n// #define COLORBLIND_MODE 2 //Deuran\n// #define COLORBLIND_MODE 3 //Tritan\n\nvec4 daltonize( vec4 color)\n{\n\t// RGB to LMS matrix conversion\n\tvec3 L = vec3((17.8824f * color.r) + (43.5161f * color.g) + (4.11935f * color.b));\n\tvec3 M = vec3((3.45565f * color.r) + (27.1554f * color.g) + (3.86714f * color.b));\n\tvec3 S = vec3((0.0299566f * color.r) + (0.184309f * color.g) + (1.46709f * color.b));\n    \t    \n\t#if (COLORBLIND_MODE == 1) // Protanope - reds are greatly reduced (1% men)\n\t\tfloat l =(0.0f * L + 2.02344f * M + -2.52581f * S).r;\n\t\tfloat m = (0.0f * L + 1.0f * M + 0.0f * S).r;\n\t\tfloat s = (0.0f * L + 0.0f * M + 1.0f * S).r;\n\t#endif\n    \n\t#if ( COLORBLIND_MODE == 2) // Deuteranope - greens are greatly reduced (1% men)\n\t\tfloat l =( 1.0f * L + 0.0f * M + 0.0f * S).r;\n\t\tfloat m = (0.494207f * L + 0.0f * M + 1.24827f * S).r;\n\t\tfloat s = (0.0f * L + 0.0f * M + 1.0f * S).r;\n\t#endif\n    \n\t#if ( COLORBLIND_MODE == 3) // Tritanope - blues are greatly reduced (0.003% population)\n\t\tfloat l = (1.0f * L + 0.0f * M + 0.0f * S).r;\n\t\tfloat m = (0.0f * L + 1.0f * M + 0.0f * S).r;\n\t\tfloat s = (-0.395913f * L + 0.801109f * M + 0.0f * S).r;\n\t#endif\n    \n\t// LMS to RGB matrix conversion\n\tvec4 error;\n\terror.r = (0.0809444479f * l) + (-0.130504409f * m) + (0.116721066f * s);\n\terror.g = (-0.0102485335f * l) + (0.0540193266f * m) + (-0.113614708f * s);\n\terror.b = (-0.000365296938f * l) + (-0.00412161469f * m) + (0.693511405f * s);\n\terror.a = 1.0;\n\n\treturn error.rgba;\t\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tfragColor = daltonize( texture(iChannel0, uv)) ;\n    \n}","name":"Image","description":"","type":"image"}]}