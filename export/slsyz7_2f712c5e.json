{"ver":"0.1","info":{"id":"slsyz7","date":"1647727166","viewed":144,"name":"Mandelbrot fractal zoom","username":"LogiczMaksimka","description":"42","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["mandelbrot","zoom"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float mandelbrot(vec2 c0, float iter_count){\n    \n    float i = 0.0;\n    vec2 z = vec2(0.0);\n    vec3 color = vec3(0.0);\n    for(; i < iter_count && dot(z, z) < 4.0; i++){\n        z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c0;\n    }\n    \n    return i;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    //     R   G   B\n    // 66  30  15 # brown 3\n    // 25   7  26 # dark violett\n    //  9   1  47 # darkest blue\n    //  4   4  73 # blue 5\n    //  0   7 100 # blue 4\n    // 12  44 138 # blue 3\n    // 24  82 177 # blue 2\n    // 57 125 209 # blue 1\n    // 134 181 229 # blue 0\n    // 211 236 248 # lightest blue\n    // 241 233 191 # lightest yellow\n    // 248 201  95 # light yellow\n    // 255 170   0 # dirty yellow\n    // 204 128   0 # brown 0\n    // 153  87   0 # brown 1\n    // 106  52   3 # brown 2\n\n    \n    // Хардкодим градиенты для красивой картинки\n    vec3 gradients[20];\n    gradients[0] = vec3(66.0, 30.0, 15.0);\n    gradients[1] = vec3(25.0, 7.0, 26.0);\n    gradients[3] = vec3(9.0, 1.0, 47.0);\n    gradients[4] = vec3(4.0, 4.0, 73.0);\n    gradients[5] = vec3(0.0, 7.0, 100.0);\n    gradients[6] = vec3(12.0, 44.0, 138.0);\n    gradients[7] = vec3(24.0, 82.0, 177.0);\n    gradients[8] = vec3(57.0, 125.0, 209.0);\n    gradients[9] = vec3(134.0, 181.0, 229.0);\n    gradients[10] = vec3(211.0, 236.0, 248.0);\n    gradients[11] = vec3(241.0, 233.0, 191.0);\n    gradients[12] = vec3(248.0, 201.0, 95.0);\n    gradients[13] = vec3(255.0, 170.0, 0.0);\n    gradients[14] = vec3(204.0, 128.0, 0.0);\n    gradients[15] = vec3(153.0, 87.0, 0.0);\n    gradients[16] = vec3(106.0, 52.0, 3.0);\n    \n    float iter_count = 1000.0;\n    \n    \n    // Нашёл периодическую функцию растущую почти экспоненциально на своём периоде\n    // чтобы зумиться сильнее и когда достигнут предел точности возвращаться обратно\n    float tz = 0.5 - 0.5*cos(0.225 * iTime);\n    float zoom = pow( 0.5, 20.0*tz );\n    vec2 start_point = vec2(-1.62917, -0.0203968);\n    \n    // Перенесём все точки в область [-zoom + start_point, zoom + start_point]\n    vec2 c0 = ( 2.0 * fragCoord - iResolution.xy ) / iResolution.y;\n    c0 = zoom * c0 + start_point;\n    \n\n   \n    // Ограничиваемся только z лежащими в круге радиуса 2\n    // Чем больше итераций потребовалось чтобы выйти за круг,\n    // тем вероятнее что точка лежит в множестве и тем она ярче\n    float result = mandelbrot(c0, iter_count);\n    \n    vec3 color = (result >= iter_count) ? vec3(0.0) :  gradients[int(result) % 16] / 255.0;\n    \n    fragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}