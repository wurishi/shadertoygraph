{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"music","id":"4sXGRr","filepath":"/media/a/48e2d9ef22ca6673330b8c38a260c87694d2bbc94c19fec9dfa4a1222c364a99.mp3","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"// Iain Melvin 2014\n\n// uncomment this to turn off peak offset adjustment\n//#define OFFSET_OFF\n\n// comment these to get the basic effect:\n#define RADIAL\n#define REFLECT\n\n\n\nfloat get_max(){\n  // find max offset (there is probably a better way)\n  float jmax = 0.0;\n  float jmaxf=0.0;\n  float jf=0.0;\n  float ja;\n  for (int j=0;j<200;j++){\n    jf = jf+0.005;\n    ja = texture( iChannel0, vec2(jf,0.75)).x;\n    if ( ja>jmaxf) {jmax = jf;jmaxf = ja;}\n  }\n  return jmax;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n\n#ifdef OFFSET_OFF\n    float jmax = 0.0;\n#else\n    float jmax = get_max();\n#endif\n    \n\n    \n    float a = 1.0;\n#ifdef REFLECT\n\tuv=abs(2.0*(uv-0.5));\n#endif\n\t\n#ifdef RADIAL\n    float theta = 1.0*(1.0/(3.14159/2.0))*atan(uv.x,uv.y);\n    float r = length(uv);\n\ta=1.0-r;//vignette\n    uv = vec2(theta,r);\t\n#endif\n\n    \n\tvec4 t1 = texture(iChannel0, vec2(uv[0],0.761)+jmax )-0.5;\n    vec4 t2 = texture(iChannel0, vec2(uv[1],0.761)+jmax )-0.5;\n   \tfloat y = t1[0]*t2[0]*a*10.5;\n\tfragColor = vec4( sin(y*3.141*2.5), sin(y*3.141*2.0),sin(y*3.141*1.0),1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4dfSRS","date":"1402852326","viewed":1152,"name":"wave matrix product","username":"pixelbeast","description":"Multiply wave by itself.","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["2daudioviz"],"hasliked":0,"parentid":"","parentname":""}}