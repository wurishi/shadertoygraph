{"ver":"0.1","info":{"id":"XtVyDc","date":"1537997815","viewed":183,"name":"Something For Your Imagination","username":"PrzemyslawZaworski","description":"Comments are welcome.","likes":3,"published":1,"flags":64,"usePreview":0,"tags":["fbm","cool"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"ldBXDd","filepath":"https://soundcloud.com/tjsaurusrex-james/scratches-ost-18-revealed","previewfilepath":"https://soundcloud.com/tjsaurusrex-james/scratches-ost-18-revealed","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/* \nAuthor: Przemyslaw Zaworski\n26.09.2018\nversion 1.0\n*/\n\nfloat hash(float h)\n{\n\treturn fract(sin(h) * 43758.5453123);\n}\n\nfloat noise(vec3 x)\n{\n\tvec3 p = floor(x);\n\tvec3 i = fract(x);\n\ti = i * i * (3.0 - 2.0 * i);\n\tfloat n = p.x + p.y * 157.0 + 113.0 * p.z;\n\tfloat a = hash(n + 0.0);\n\tfloat b = hash(n + 1.0);\n\tfloat c = hash(n + 157.0);\n\tfloat d = hash(n + 158.0);\n\tfloat e = hash(n + 113.0);\n\tfloat f = hash(n + 114.0);\n\tfloat g = hash(n + 270.0);\n\tfloat h = hash(n + 271.0);\n\treturn mix(mix(mix(a,b,i.x),mix(c,d,i.x),i.y),mix(mix(e,f,i.x),mix(g,h,i.x),i.y),i.z);\n}\n\nfloat fbm(vec3 p)   \n{\n\tfloat f = 0.0;\n\tf = 0.5000*noise(p);  p *= 2.01;\n\tf += 0.2500*noise(p);  p *= 2.02;\n\tf += 0.1250*noise(p);\n\treturn f;\n}\n\nvec4 surface (vec2 uv, float a, int k)\n{\n\tvec4 total = vec4(0.0);\n\tfor (int i=0;i<k;i++)\n\t{\n\t\tvec2 p = float(i*2+1) * uv + vec2(a,a);   \n\t\tfloat color = fbm(vec3(p,iTime*0.1));         \n\t\tif (color>0.5 && color<0.52)\n\t\t{\n\t\t\ttotal+=vec4(pow(max(smoothstep(0.52,0.5,color),smoothstep(0.5,0.52,color)),8.0));\n\t\t}\n\t\ta += 10.0;\n\t}\n\treturn total;\n}\n\nvec2 distortion (vec2 uv, float a, float b, float c, float d)\n{\n\tuv.x+=cos(uv.y*a+iTime)*b;\n\tuv.y+=sin(uv.x*c+iTime)*d; \n\treturn uv;\n}\n\nvec4 remap (vec2 p, bool t, vec3 o)\n{\n\tif (t) p = distortion(p,6.0,0.05,3.0,0.04);\n\tif (t) p.y+=0.15*fbm (vec3(10.0*o.xz,iTime*0.01));\n\tvec3 d = normalize(vec3(p,2.0));\n\tvec3 m = d*(-0.2/d.y);\n\tm.z+=iTime*0.1;\n\treturn vec4(m,d.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{    \n\tvec2 p = (2.0*fragCoord-iResolution.xy)/iResolution.y;\n\tvec4 s = remap(p,false,vec3(0.0));  \n\tvec4 k = remap(p,true,s.xyz);    \n\tfloat clouds = fbm (vec3(5.0*s.xz,iTime*0.1));\n\tvec4 a = (vec4(clouds)+vec4(.7,.7,0,1))*(max(0.05,min(iTime/40.,.25)))/length(p-vec2(0,min(iTime/40.,.7)))*(5.*s.w);\n\tvec4 b = (surface(vec2(k.xz),50.,12)+vec4(0,0,.7,1))*(pow(-(min(iTime/10.,1.5))*k.w,1.));\n\tfragColor = max(a,b);\n}","name":"Image","description":"","type":"image"}]}