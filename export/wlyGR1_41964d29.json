{"ver":"0.1","info":{"id":"wlyGR1","date":"1578260729","viewed":80,"name":"Sewer (Practice #7)","username":"Coda_","description":"Sewer (Practice #7)","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["sewer","subtraction"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define time  iTime\n\nfloat box (vec3 p, vec3 s)\n{\n \treturn length(max(abs(p)-s,0.0));   \n}\n\nfloat capsule (vec3 p, vec3 a,vec3 b,float r)\n{\n\tvec3 ab = b-a;\n    vec3 ap = p-a;\n    \n    float t = dot(ab,ap)/dot(ab,ab);\n    t = clamp(t,0.0,1.0);\n    vec3 c = a +t*ab;\n    \n  \treturn length(p-c) - r;   \n}\n\nfloat trace (vec3 o, vec3 r)\n{\n  \tfloat t = 0.0;\n  \tfor(int i = 0;i < 100;i++)\n  \t{\n      \tvec3 p = o+r*t;\n      \tvec3 q = fract(p)*2.0-1.0;\n\n      \tfloat d0 = box(q-vec3(0,0,0),vec3(1,1,0.5));\n      \tfloat d1 = capsule(q-vec3(0,0,0),vec3(0,0,0),vec3(0,0,1),0.85);\n\t  \tfloat d = max(-d1,d0);\n\n      \n      \tt += d*0.12;\n  \t}\n  \treturn t;\n}\n\nfloat water (vec3 o, vec3 r)\n{\n  \tfloat t = 0.0;\n  \tfor(int i = 0;i < 100;i++)\n  \t{\n      \tvec3 p = o+r*t;\n      \tvec3 q = fract(p)*2.0-1.0;\n\n        float d = box(q-vec3(0,-0.55,0),vec3(1,0.3,1.5))-(sin(q.z*2.0*q.x+time*1.05)*0.5+0.5)*0.05;\n        d-=(sin(q.x*5.0*q.z+time*1.05)*0.5+0.5)*0.05;\n         d-=(sin(q.y*1.5*q.z+time*1.05)*0.5+0.5)*0.05;\n\n\n      \n      \tt += d*0.15;\n  \t}\n  \treturn t;\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = vec2(fragCoord.x / iResolution.x, fragCoord.y / iResolution.y);\n  \tuv -= 0.5;\n  \tuv /= vec2(iResolution.y / iResolution.x, 1.0);\n\n  \tvec3 r = normalize(vec3(uv,1.0));\n\n  \tvec3 o = vec3(0.5,0.5,time*0.1);\n  \tfloat t = trace(o,r); \n    float w = water(o,r); \n  \n  \tfloat fog = 1.0/(1.0+t*t*1.0);\n    float fogw = 1.0/(1.0+w*w*6.0);\n\n    fragColor = max(vec4(vec3(fogw+vec3(0,0.05,0)),1.0),vec4(vec3(fog+vec3(0,0,0))+vec3(0.05,0,0),1.0))*0.5;\n}","name":"Image","description":"","type":"image"}]}