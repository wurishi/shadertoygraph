{"ver":"0.1","info":{"id":"4dVGzy","date":"1455162369","viewed":169,"name":"texflipy scale center","username":"rickiters","description":"test flip y in channel settings","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["test"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// generate a 2d rotation matrix\nmat2 rotate(float a) {\n\treturn mat2(cos(a),sin(a),-sin(a),cos(a));\t\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // aspect ratio\n    float asp = iResolution.x / iResolution.y;\n    \n\t// uv from 0,0 lower left to 1,1 upper right\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    \n    // scale 0 to 1 from mouse X\n    float scale = iMouse.x/iResolution.x;\n    \n    // rot from 0 to 1\n    float rot = iMouse.y/iResolution.y;\n    \n   \t// rot from 0 to 2*PI aspect ratio now handled\n    rot *= 3.14159*2.;\n    \n    // scale 1 to 5\n    scale = 1. + 4.*scale;\n    \n    // offset uvs forward so 0,0 is in the center\n    // -.5,-.5 to .5,.5\n    uv -= .5;    \n    \n    // aspect ratio correction to center\n    uv.x *= asp;\n    \n    // apply scale, it's inverse because the destination is driving things\n    uv /= scale;\n    \n    // build and apply rotation matrix in just these 2 lines of code, aspect ratio now handled\n    mat2 rotmat = rotate(rot); // generate the rotation matrix, (has a determinate of 1)\n    uv = rotmat * uv;\n    \n    // aspect ratio correction back from center for drawing\n    uv.x /= asp;\n\n    // offset uvs back for drawing\n    uv += .5;\n    \n    // draw\n    vec4 fc = texture(iChannel0,uv);\n    \n    // alter the colors here for debugging, comment out next line to ignore this\n    fc.rg *= fract(uv * 10.); // show off the uvs as 10 by 10 section\n    fragColor = fc;\n}\n","name":"Image","description":"","type":"image"}]}