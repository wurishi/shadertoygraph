{"ver":"0.1","info":{"id":"3sGyW3","date":"1603833514","viewed":74,"name":"Raycast experiment 5","username":"alexijohansen","description":"Raycast experiment, my math to rotate the camera angle is most likely off :D","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["raycast"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4df3zn","filepath":"/media/a/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","previewfilepath":"/media/ap/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define CAMERATILT 70.0\n#define CAMERAVIEW 0.8\n#define CAMERAHEIGHT 0.85\n#define STEPS 1200\n#define STEPSIZE 600.0\n\nvec3 rotX(vec3 v, float a)\n{\n    v.y = (v.y * cos(a)) - (v.z * sin(a));\n    v.z = (v.y * sin(a)) + (v.z * cos(a));\n\n    return v;\n} \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord/iResolution.xy - 0.5);\n\n\tfloat angle = (3.14/360.0)*CAMERATILT;\n    \n    vec3 p = vec3(fract(iTime*0.033),CAMERAHEIGHT,fract(iTime*0.1));\n    \n    vec3 ray = rotX(vec3(uv.x*CAMERAVIEW,uv.y*CAMERAVIEW,1.0), angle) / STEPSIZE;\n    \n    float c = 0.0;\n    \n\tfor( int i = 0; i < STEPS; i++ )\n    {\n        float height = texture( iChannel0, vec2(p.x,p.z)).x;\n\t\theight = min(height * 0.5 + 0.2,0.565); \n        \n        if (height > p.y)\n        {\n        \tc = height * 2.0 - 0.33;\n            break;\n        }\n        \n        p += ray;\n    }\n\n    fragColor = vec4(c,c,c,1.0);\n}","name":"Image","description":"","type":"image"}]}