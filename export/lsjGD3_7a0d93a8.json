{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#define MAX_SHAPE_COUNT 3\nuniform int uniform_shapeTypeList[MAX_SHAPE_COUNT];\nuniform vec2 uniform_posList[MAX_SHAPE_COUNT];\nuniform vec2 uniform_sizeList[MAX_SHAPE_COUNT];\nvec2 fragCoord;\n\n\nbool IsVisibleSize( const vec2 size )\n{\n\treturn size.x >= 0.0 && size.y >=  0.0;\n}\n\nbool InRectangle( vec2 pos, vec2 size )\n{\n\tif( fragCoord.x < pos.x - size.x\n\t\t|| fragCoord.x > pos.x + size.x )\n\treturn false;\n\t\t\n\tif( fragCoord.y < pos.y - size.y\n\t   || fragCoord.y > pos.y + size.y )\n\t\treturn false;\n\t\t\n\treturn true;\n}\n\nbool InCircle( vec2 pos, vec2 size )\n{\n\tfloat r = min( size.x, size.y);\t\n\tvec2 offset = fragCoord.xy - pos;\n\treturn sqrt( offset.x*offset.x + offset.y*offset.y ) <= abs(r);\n}\n\n\nbool TestShapeIntersection( int shapeType, vec2 pos, vec2 size  )\n{\t\n\t//Verify if the size can be intersected\n\tif( !IsVisibleSize( size ) )\n\t   return false;\n\t\t\n\t//Intersect with a rectangle\t\n\tif( 0 == shapeType )\n\t\treturn InRectangle( pos, size );\n\t\n\t//Intersect with a circle\n\tif( 1 == shapeType )\n\t\treturn InCircle( pos, size );\n\t\t\t\t\t\t\t\n\treturn false;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fC )\n{\n    fragCoord = fC;\n\tbool intersected = false;\t\n\tfor( int i=0; i< MAX_SHAPE_COUNT; ++i )\n\t{\n\t\tif( TestShapeIntersection( uniform_shapeTypeList[i], uniform_posList[i], uniform_sizeList[i] ))\n\t\t   intersected = true;\n\t}\n\t\t   \n\tif( intersected )\n\t\tfragColor = vec4( 0, 0, 0, 0 );\n\telse\n\t\tfragColor = vec4( 0, 0, 0, 0.5 );\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lsjGD3","date":"1394614064","viewed":276,"name":"Tutorial mask layer","username":"tatara","description":"Tutorial mask layer","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["tutorialmasklayer"],"hasliked":0,"parentid":"","parentname":""}}