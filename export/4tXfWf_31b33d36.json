{"ver":"0.1","info":{"id":"4tXfWf","date":"1513540789","viewed":140,"name":"pond","username":"unnick","description":"an implementation of the wave equation\n\npress the left mouse button to make waves","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["waves","pond","waveequation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    if(texture(iChannel1, uv).a <= 0.5){\n        fragColor = vec4(vec3(0.0), 1.0);\n    }else{\n        fragColor = vec4((texture(iChannel0, uv).rg*5.0*0.5+0.5), 0.0, 1.0);\n    }\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define dt 0.33\n#define c 150.0\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    vec3 d  = vec3(1.0 / iResolution.xy, 0.0);\n    if(length(fragCoord-iMouse.xy)<5.0&&iMouse.z>0.5){\n        fragColor = vec4(1.0, 0.0, 0.0, 0.0);\n    }else if(texture(iChannel1, uv).a <= 0.5){\n        fragColor = vec4(0.0);\n    }else{\n        //old code for 5-point laplacian stencil\n        /*vec4 dx =\n            (texture(iChannel0, uv-d.xz)\n            - texture(iChannel0, uv) * 2.0\n            + texture(iChannel0, uv+d.xz));\n        vec4 dy = \n            (texture(iChannel0, uv-d.zy)\n            - texture(iChannel0, uv) * 2.0\n            + texture(iChannel0, uv+d.zy));\n        vec4 lap = dx+dy;*/\n        \n        //newer code for 9-point stencil\n        vec4 lap =\n            texture(iChannel0, uv-d.xy)\n            +texture(iChannel0, uv-d.zy)*4.0\n            +texture(iChannel0, uv-d.zy+d.xz)\n            +texture(iChannel0, uv-d.xz)*4.0\n            -texture(iChannel0, uv)*20.0\n            +texture(iChannel0, uv+d.xz)*4.0\n            +texture(iChannel0, uv-d.xz+d.zy)\n            +texture(iChannel0, uv+d.zy)*4.0\n            +texture(iChannel0, uv+d.xy);\n        \n        lap /= iResolution.x;\n        fragColor = texture(iChannel0, uv);\n        fragColor.g += lap.r * (c) * dt;\n        fragColor.g -= fragColor.g * dt * 0.001;\n        fragColor.r += fragColor.g * dt;\n        fragColor = clamp(fragColor, -256.0, 256.0);\n    }\n}","name":"Buf A","description":"","type":"buffer"},{"inputs":[],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 pos = (fragCoord.xy - iResolution.xy / 2.0) / min(iResolution.x, iResolution.y) * 2.0;\n    if(\n        (length(pos)>0.5\n        && length(pos)<0.6\n        && pos.x > 0.0)\n        || (fragCoord.x <= 5.0\n        || fragCoord.y <= 5.0\n        || fragCoord.x >= iResolution.x - 5.0\n        || fragCoord.y >= iResolution.y - 5.0\n        )\n    ){\n        fragColor = vec4(vec3(0.0), 0.0);\n    }else{\n        fragColor = vec4(vec3(0.0), 1.0);\n    }\n}","name":"Buf B","description":"","type":"buffer"}]}