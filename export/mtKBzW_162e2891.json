{"ver":"0.1","info":{"id":"mtKBzW","date":"1701899756","viewed":21,"name":"britney bayer dithering","username":"ninofiliu","description":"dithering","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["dithering"],"hasliked":0,"parentid":"DlKfRW","parentname":"britney dither basic"},"renderpass":[{"inputs":[{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float lmin = 0.25;\nconst float lmax = 0.55;\nconst vec3 dark = vec3(0.,0.,0.);\nconst vec3 tint = vec3(1.,0.,0.);\nconst vec3 light = vec3(1.,1.,1.);\n\nconst mat4x4 tt = mat4x4(\n    0.,8.,2.,10.,\n    12.,4.,14.,6.,\n    3.,11.,1.,9.,\n    15.,7.,13.,5.\n) / 16.;\n\nfloat bayer(vec2 fragCoord, float l) {\n    float tx = mod(fragCoord.x, 4.);\n    float ty = mod(fragCoord.y, 4.);\n    float t = tt[int(tx)][int(ty)];   \n    return l <= t ? 0. : 1.;\n}\n\nvec3 bayer3(vec2 fragCoord, vec3 rgb) {\n    return vec3(\n        bayer(fragCoord, rgb.r),\n        bayer(fragCoord, rgb.g),\n        bayer(fragCoord, rgb.b)\n    );\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 color = texture(iChannel0, uv);\n    float l = (color.r+color.g+color.b)/3.;\n    l = (l-lmin)/(lmax-lmin);\n    vec3 mapped = l < 0.5 ? mix(dark, tint, 2.*(l-0.))\n                           : mix(tint, light, 2.*(l-0.5));\n    fragColor = vec4(\n        bayer3(fragCoord, mapped),\n        1.\n    );\n}","name":"Image","description":"","type":"image"}]}