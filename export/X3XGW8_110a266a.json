{"ver":"0.1","info":{"id":"X3XGW8","date":"1707375361","viewed":70,"name":"screen saver of magnet","username":"chenxianming","description":"screen saver of magnet","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["saver"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define I iResolution\n#define v( a ) clamp( a, 0., 1. )\n#define rot( r ) mat2(cos(r), sin(r), -sin(r), cos(r) )\n\n\nvec2 rep( inout vec2 p, vec2 size)\n{\n\n    vec2 h = size * .5;\n    \n    vec2 t = floor((p + h) / size);\n    \n    t.y-= mod( t.x, 2. ) * .02;\n    p.y -= mod( t.x, 2. ) * .02;\n\n    p = mod(p + h, size) - h;\n    \n    return t;\n}\n\n\nfloat calcSphere( vec3 p ){\n\n    p.y += .5;\n    \n    float d = length( p ) - 2.;\n    \n    return d;\n}\n\nfloat pins;\nvec2 xz;\n\nfloat calcPin(vec3 pos) {\n    \n    vec3 p = pos;\n    p.z -= iTime * .03;\n    p.xz *= rot( cos( iTime ) * .02 );\n    \n   \n    xz = rep( p.xz, vec2( .04, .032 ) );\n    \n    p.y -= 1.6;\n\n    p.y += length( p.y - calcSphere( pos ) ) - .014;\n    \n    p.xy *= rot( atan( xz.x, xz.y ) * .01 - iTime * 2. );\n\n    float d = length( vec3( p.x * .7, p.y * 2., p.z ) ) - .014;\n    \n    return d;\n}\n\n\nfloat df( vec3 p ){\n    return min(\n        pins = calcPin( p ),\n        calcSphere( p )\n    );\n}\n\nvec3 l(in vec3 b) {\n  vec2 a = vec2(1, -1) * .5773;\n  return normalize(a.xyy * df(b + a.xyy * 5e-4) + a.yyx * df(b + a.yyx * 5e-4) +\n                   a.yxy * df(b + a.yxy * 5e-4) + a.xxx * df(b + a.xxx * 5e-4));\n}\n\nfloat L( vec3 p, vec3 ca, vec3 r, float q ){\n    return v( pow( dot( l( p ), normalize( normalize( ca ) - r ) ), q ) );\n}\n\nvoid mainImage( out vec4 U, in vec2 V )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 u = ( V * 2. - I.xy ) / I.y;\n    \n    vec3 c, p, o = vec3( 0., 0.6, -2. ), r = vec3( u, 1. );\n    float t, d, i;\n    for( ; i < 64.; i++ ){\n        p = o + r * t,\n        d = df( p ),\n        t += d * .299;\n        \n        if( t < .04 || d < 1e-3 )\n            break ;\n        \n    }\n        \n    if( d < 1e-3 && df( p ) == pins ){\n        \n        c += cos( iTime * .5 ) * .06 * sign( mod( xz.x + xz.y, 2. ) );\n        vec3 lg = vec3( -.1, .5, -1. );\n        lg.x += cos( iTime ) * 1.2;\n        lg.y += sin( iTime ) * 1.5;\n        float dd = v( dot( l( p ), lg ) );\n        \n        dd = pow( dd, 3. );\n        \n        c += L( p, lg, r, 120. ) * dd * vec3(0.910,0.314,0.058) * .5;\n\n        lg = vec3( .2, .2, -1. );\n        lg.x += cos( iTime ) * 1.2;\n        lg.y += sin( iTime ) * 1.5;\n        dd = v( dot( l( p ), lg ) );\n        c += L( p, lg, r, 110. ) * dd * vec3(0.095,0.975,0.068) * .5;\n       \n        lg = vec3( -.2, -.5, -1. );\n        lg.x += cos( iTime ) * 1.2;\n        lg.y += sin( iTime ) * 1.5;\n        dd = v( dot( l( p ), lg ) );\n        c += L( p, lg, r, 100. ) * dd * vec3(0.056,0.790,0.990) * .5;\n        \n        \n        \n    }\n\n    // Output to screen\n    U = vec4(c,1.0);\n}","name":"Image","description":"","type":"image"}]}