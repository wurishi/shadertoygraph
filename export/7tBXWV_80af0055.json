{"ver":"0.1","info":{"id":"7tBXWV","date":"1628623298","viewed":76,"name":"Pixelizer+gauss","username":"SteelFlame","description":"Transform to pixelized image","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["jackals"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float blocksCount = 50.;\nfloat dispersion = 1.;\n\nvec2 getPixelizedUv(vec2 fragCoord, float blocksCount) {\n    return floor(fragCoord/blocksCount)*blocksCount/iResolution.xy;\n}\nfloat gauss(float x, float y, float a) {\n    return (1./a)*pow(2.718, -((x*x+y*y)/(2.*(a*a))));\n}\nvec4 gaussBlur(sampler2D tex, vec2 fragCoord, float size, vec2 direction) {\n    vec4 c1 = vec4(0.);\n    vec4 c2 = vec4(0.);\n    float cnt = 0.;\n    for (float i = -size; i < size; i++) {\n        vec2 offset = vec2(direction.x,direction.y)*i;\n        float coff = gauss(offset.x, offset.y, size*2.);\n        c1 += texture(tex,getPixelizedUv(fragCoord+offset,blocksCount))*coff;\n    }\n    //return c1;\n    direction = vec2(0.,1.);\n    for (float i = -size; i < size; i++) {\n        vec2 offset = vec2(direction.x,direction.y)*i;\n        float coff = gauss(offset.x, offset.y, size*2.);\n        c2 += texture(tex,getPixelizedUv(fragCoord+offset,blocksCount))*coff;\n    }\n    return (c1+c2)/2.;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 mouseUv = iMouse.xy/iResolution.xy;\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    blocksCount = floor(mouseUv.x*20.);\n    if (blocksCount == 0.) blocksCount = 1.;\n    \n    dispersion = mouseUv.y*50.;\n    if (dispersion < 1.) dispersion = 1.;\n    \n    vec2 flooredUv = getPixelizedUv(fragCoord, blocksCount);\n    \n    vec4 tex0 = texture(iChannel0,getPixelizedUv(fragCoord, blocksCount));\n    tex0 = gaussBlur(iChannel0, fragCoord,dispersion,normalize(vec2(1.,0.)));\n    fragColor = vec4(tex0);\n}","name":"Image","description":"","type":"image"}]}