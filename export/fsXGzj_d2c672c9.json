{"ver":"0.1","info":{"id":"fsXGzj","date":"1616198259","viewed":79,"name":"Nyan Cat animation","username":"reijisrc","description":"Nyan cat animation","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["nyancat"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3Rr","filepath":"/media/a/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","previewfilepath":"/media/ap/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 setPos(in vec2 uv, in vec2 offset,in float scale)\n{\n    vec2 scaleuv = (uv / scale);\n    vec2 centeroffset = vec2(offset.x - (offset.x / scale), offset.y - (offset.y / scale));\n    return scaleuv + centeroffset;\n}\n\nfloat rectSDF(vec2 p, vec2 size){\n    vec2 _size =  size;\n    _size = vec2(0.5) - _size * 0.5;\n    vec2 aa = vec2(.01 * 0.5);\n    vec2 uv = smoothstep( _size, _size + aa, p);\n    uv *= smoothstep(_size, _size + aa, vec2(1.0) - p);\n    return uv.x * uv.y;\n\t\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    // rect\n    //vec2 rectpos =  vec2(0.5, 0.25);\n    //vec2 rectuv = setPos(uv, rectpos, 0.25);   \n    //float rect = rectSDF(rectuv, vec2(1.0, 1.0));\n    //vec4 rectcolor =  texture(iChannel2, rectuv) * rect;\n    \n    // nyan\n    float scale = 0.25;\n    vec2 nyanpos =  vec2(0.5, 0.25);\n    vec2 nyanuv = setPos(uv, nyanpos, scale);\n    vec4 nyancolor = texture(iChannel0, nyanuv);\n    \n     // plane\n    vec3 d = vec3(2.0 * fragCoord/iResolution.xy - 1.0, 1.0);\n    vec3 p = vec3(-d.x/d.y, -1.0, -1.0/d.y); // shadertoy.com/view/3syczy\n    vec4 planecolor = texture(iChannel1, p.xz + vec2(iTime, 0.0));\n    \n    // bg \n    vec3 bgcolor = mix(vec3(0.8,0.4,0.1),vec3(0.6,0.6,1.0), pow(uv.y,2.0));\n    vec4 planebg = mix(vec4(bgcolor, 1.0), planecolor, vec4(step(0.0, p.z)));\n    \n    vec4 color = nyancolor; \n    // finalColor\n    fragColor = mix(planebg, color, 1.0 - step(color.w, 0.0)); \n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define pattern 6\n#define period 10\n\nvec4 nyan( in vec2 uv, in int index)\n{\n    ivec2 nyan = ivec2(40, 32);\n    ivec2 ruv = ivec2(nyan.x * index, 0.0) + ivec2(uv * vec2(nyan)); \n\treturn texelFetch(iChannel0, ruv, 0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    vec4 bgcolor = vec4(0.0, 0.0, 0.0, 0.0);\n    vec4 nyancolor = nyan(uv, (iFrame / period) % pattern); \n    \n    //fragColor = nyan(uv, (iFrame / period) % pattern);\n    fragColor = mix(bgcolor, nyancolor, 1.0 - step(nyancolor.w, 0.0));\n}","name":"Buffer A","description":"","type":"buffer"}]}