{"ver":"0.1","info":{"id":"ssXSzM","date":"1618389478","viewed":70,"name":"Scanlines + Curve warp","username":"EchoesForeAndAft","description":"Configurable post-processing shader with scanlines and a curve warp.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["scanlines","post","warp"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI_F = 3.141592653589793;\n\n// ..................\n\nconst vec3\tSCANLINE_COLOR\t\t\t= vec3(1.0f, 0.0f, 0.0f);\nconst float SCANLINE_DENSITY\t\t= 40.0f;\nconst float SCANLINE_INTENSITY_LOW\t= 0.1f;\nconst float SCANLINE_INTENSITY_HIGH = 0.4f;\n\nconst int\tWARP_LINES_NONE\t = 0,\n\t\t\tWARP_LINES_PLUS\t = 1,\n\t\t\tWARP_LINES_MINUS = 2,\n\t\t\tWARP_LINES_BOTH\t = 3;\nconst int\tWARP_LINES\t\t = WARP_LINES_BOTH;\nconst float WARP_LINES_CURVE = 0.35f;\n\n// ..................\n\nfloat HelmetWarp(float x)\n{\n\treturn 0.5f * cos(WARP_LINES_CURVE * (2.0f * PI_F * x - PI_F)) + 0.5f;\n}\n\nfloat Scanline(float y)\n{\t\n\treturn max(SCANLINE_INTENSITY_LOW, SCANLINE_INTENSITY_HIGH * cos((2.0f * PI_F * y - PI_F) * SCANLINE_DENSITY));\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n\t// NDC [0..1]\n\tvec2 coord = fragCoord / iResolution.xy;\n\t\n\t// ..................\n\t\n\tfloat y = coord.y;\n\tif (WARP_LINES != WARP_LINES_NONE)\n\t{\n\t\t// [0..1] -> [-1..1]\n\t\ty = y * 2.0f - 1.0f;\n\t\n\t\tfloat yWarped = HelmetWarp(coord.x);\n\t\n\t\tswitch (WARP_LINES)\n\t\t{\n\t\t\tcase WARP_LINES_PLUS:\n\t\t\t\ty += yWarped;\n\t\t\t\tbreak;\n\t\t\tcase WARP_LINES_MINUS:\n\t\t\t\ty -= yWarped;\n\t\t\t\tbreak;\n\t\t\tcase WARP_LINES_BOTH:\n\t\t\t\ty += y * yWarped;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n        // [-1..1] -> [0..1]\n        y = y * 0.5f + 0.5f;\n\t}\n\n\t// ..................\n\t\n\tfloat scanlineStrength = Scanline(y);\n\t\n\t// ..................\n\t\n\tvec3 color = vec3(0.0f, 0.0f, 0.0f);\n\tcolor = mix(color, SCANLINE_COLOR, scanlineStrength);\n\t\n\t// ..................\n\n\tfragColor = vec4(color, scanlineStrength);\n}","name":"Image","description":"","type":"image"}]}