{"ver":"0.1","info":{"id":"4t3XRN","date":"1478305747","viewed":241,"name":"Deformed object","username":"Swax97","description":"I'm going to start doing more interesting things on this site.\nFor now, I've got a blob.","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["fractal","raymarch","fog","sinusoidal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define MARCH_EPS 0.007\n#define MARCH_STEP 0.25\n#define FAR 8.0\n\n#define time iTime\n\nconst vec2 res = vec2(1024, 768);\n\nfloat map (vec3 p) {\n\tp += sin(p.yzx * 5.0  - time * 0.41) * 0.15;\n\tp += sin(p.zxy * 9.0  - time * 0.47) * 0.065;\n\tp += sin(p.xyz * 17.0 - time * 1.43) * 0.0275;\n\tp += sin(p.yzx * 33.0 - time * 0.11) * 0.01475;\n\tp += sin(p.zyx * 65.0 - time * 0.17) * 0.01075;\n\tp += sin(p.xzy * 129. - time * 0.13) * 0.00700;\n\tp += sin(p.yzx * 257. - time * 0.05) * 0.00400;\n\treturn length(p) - 1.0;\n}\n\nfloat trace(vec3 ro, vec3 rd, inout float close){\n\tfloat d, t = 1.2;\n\t\n\tfor (int i = 0; i < 100; i++){\n\t\td = map(ro + rd * t);\n\t\tif (abs(d) < MARCH_EPS || t > FAR) break;\n\t\tclose = min(close, d);\n\t\tt += d * MARCH_STEP;\n\t}\n\t\n\treturn (t+1.0) * step(d, MARCH_EPS) - 1.0;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\t\n\tvec2 uv = (2.0 * fragCoord - iResolution.xy) / iResolution.y;\n\t\n\tfloat cost = cos(time * 0.7);\n\tfloat sint = sin(time * 0.7);\n\n\tvec3 ro = 3.0 * vec3(sint, 0.0, cost);\n\tvec3 rd = normalize(vec3(uv, -1.5));\n\t\n\trd.xz *= mat2(cost, sint, -sint, cost);\n\t\n\tfloat close = 4.0;\n\tfloat t = trace(ro, rd, close);\n\tif (t > 0.0){\n\t\tvec3 end = ro + rd * t;\n\t\t\n\t\tconst vec2 eps = 0.01 * vec2(-1.0, 1.0);\n\t\tvec3 nml = normalize(eps.xxx * map(vec3(end + eps.xxx)) + \n\t\t\t\t     \t\t eps.yyx * map(vec3(end + eps.yyx)) + \n\t\t\t\t\t\t\t eps.xyy * map(vec3(end + eps.xyy)) + \n\t\t\t\t\t\t\t eps.yxy * map(vec3(end + eps.yxy)));\n\t\t\t\t\n\t\tfloat dp, ao = (map(end + nml * 0.05) - map(end)) * 20.0;\n\n\t\tvec3 lig = vec3(ao * 0.3);\n\t\tdp = max(0.0, dot(nml, vec3(0.57735, 0.57735, -0.57735)));\n\t\tlig += vec3(0.6, 0.4, 0.2) * (dp*0.7 + dp*dp*dp*0.3);\n\t\t\n\t\tdp = max(0.0, dot(nml, vec3(-0.57735, -0.57735, -0.57735)));\n\t\tlig += vec3(0.2, 0.4, 0.6) * (dp*0.7 + dp*dp*dp*0.3);\n\n\t\tdp = max(0.0, nml.z);\n\t\tlig += vec3(0.1, 0.4, 0.1) * (dp*0.7 + dp*dp*dp*0.3);\n\t\t\n\n\t\t//float l = 0.3 + 0.7 * dot(ro + rd * t, vec3(-0.57735));\n\t\t//l = max(0.0, l);\n\t\tfragColor = vec4(lig, 1.0);\n\t} else { \n\t\tvec3 aur = vec3(0.4, 0.5, 0.4) / (close + 1.0);\n\t\taur += vec3(0.5, 0.3, 0.4);\t\n\t\tfragColor = vec4(aur, 1.0);\n\t}\n}","name":"Image","description":"","type":"image"}]}