{"ver":"0.1","info":{"id":"wdyGWK","date":"1570942972","viewed":90,"name":"Wave 2.0","username":"Schlap0r","description":"huy","likes":2,"published":1,"flags":96,"usePreview":0,"tags":["sound","wave"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texelFetch( iChannel0,ivec2(fragCoord),0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XlSGzK","filepath":"https://soundcloud.com/emily5454/shanguy-king-of-the-jungle-amice-remix","previewfilepath":"https://soundcloud.com/emily5454/shanguy-king-of-the-jungle-amice-remix","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float bpm = 122.;\nfloat pi = 3.14159265359;\nfloat drawLine(vec2 p, vec2 p1, vec2 p2, float r)\n{\n    vec2 l = p2 - p1;\n    float L = length(l);\n    float L2 = L*L;\n    float d1 = length(p - p1);\n    float d2 = length(p - p2);\n    float d  = min(d1, d2);\n    float ds = dot(p - p1, l);\n    if (ds >= 0.0 && ds <= L2)\n    {\n        vec2 n = vec2(-l.y, l.x) / L;\n        d = min(d, abs(dot(p - p1, n)));\n    }\n    return 1.0 - smoothstep(0.0, 0.002, d - r);\n}\n\nfloat fouriersum(float x){\n    float freq = 0.0;\n    float wave = 0.0;\n    for(int i = 1; i < int(iResolution.x)/3; i++){\n    \tfreq = texelFetch( iChannel0, ivec2(i,0), 0 ).x;\n       \twave += pow(1./float(i),0.6) * sin(4. * freq * (355./113.) * pow(20.0, 3.305865 * float(i)/float(512)) * (x + 1.0) + \n                                          pi/32.*iTime*bpm);\n    }\n    wave /= 20.0;\n    wave += 0.5;\n    return wave;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n \tvec2 uv = fragCoord.xy / iResolution.xy;\n\tvec2 wave = vec2(uv.x, fouriersum(uv.x));\n    vec2 wavenext = vec2(uv.x + 1.0 / iResolution.x, fouriersum(uv.x + 1.0 / iResolution.x));\n\tfloat col = drawLine(uv,wave,wavenext,100.0/(iResolution.x*iResolution.y));    \n    fragColor = vec4(vec3(col),1.0) + 0.75 * texelFetch( iChannel1,ivec2(fragCoord),0);\n}","name":"Buffer A","description":"","type":"buffer"}]}