{"ver":"0.1","info":{"id":"lfcyDj","date":"1731163074","viewed":197,"name":"cheap Poisson/white point distri","username":"FabriceNeyret2","description":"from https://shadertoy.com/view/432BDR\nswap comment line 19,20 for still vs animated points.","likes":14,"published":3,"flags":0,"usePreview":0,"tags":["poisson","whitenoise"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// variant of \"true Worley noise\" https://shadertoy.com/view/432BDR\n\n#define poisson(n,h)     floor( normal( float(n), sqrt(float(n)), h ) ) // Poisson distribution (dual to white-noise )\n#define normal(m, s, h)  m + s * gauss(h)                               // Normal distribution\n#define  gauss(u)        sqrt(-2.*log(u.x)) * cos(6.283*u.y)            // takes u = vec2 uniform()\n#define H(v)             fract( 1e3* sin( (v) * mat2(R-7.,91.-R) ) )    // vec2 uniform\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n    vec2 R = iResolution.xy, D,\n         U = 15. * u/R.y + iTime; \n    int m = 4; // point distrib: > 0 : Poisson ( = white noise )\n               //                  0 : 1 per cell ( = ~ bluenoise, Poisson disc )\n\n    vec4 M = vec4(9);         // returns in M the 4 closest distances\n    for ( int n = 5, k ; k<n*n; k++ ) {               // check neighboors\n        D = floor(U) + vec2(k%n -n/2,k/n -n/2);       // neighboor ID\n        for (float i; i < clamp( poisson(m,H(D)),1.,9.); i++ ) { // amount of points in cell\n         // float d = length( U - D - H(D-.791*i) );  // distance to random point \n            float d = length( U - D - (H(D-.791*i)-.5)*mat2(cos(iTime+vec4(0,11,33,0))) );// distance to random point \n            if      (d<M.x) M.yzw = M.xyz, M.x = d;   // sort 1-4 closest neighbors\n            else if (d<M.y) M.zw  = M.yz , M.y = d;\n            else if (d<M.z) M.w   = M.z  , M.z = d;\n            else if (d<M.w)                M.w = d;\n        }\n     }\n\n    O =  1.5 - M.x*R.yyyy/15.;                        // draw points\n}","name":"Image","description":"","type":"image"}]}