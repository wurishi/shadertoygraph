{"ver":"0.1","info":{"id":"XfV3R3","date":"1713073133","viewed":33,"name":"Viz. of octagon metric hyperbola","username":"cwfenner","description":"This visualizes \"hyperbolas\" for an unusual metric, where the distance between two points are the shortest path made from following only one of the 8 equally spaced directions.\n\nThe shape of hyperbolas can be defined geometrically in terms of a metric.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["test","geometry","metric"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265359\n\n// 8.0 can be changed to any whole number for a different regular-polygon-inspired metric.\nfloat gap = 2.0 * PI / 8.0;\n\nfloat octDistance(vec2 a, vec2 b) {\n    float euc = distance(a, b);\n    \n    float ang = atan(b.y - a.y, b.x - a.x);\n    \n    int parity = mod(mod(ang, 2.0 * PI) + 2.0 * PI, 2.0 * gap) > gap\n        ? 1\n        : -1;\n    \n    float f = mod(abs(ang), gap);\n    \n    float eff = sin(f) / sin(gap) + cos(f) - sin(f) / tan(gap);\n    \n    return max(0.0, eff * euc) * float(parity);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.yy;\n    \n    \n    vec2 middle = vec2(0.5, 0.5);\n\n    vec2 c1 = vec2(0.5, 0.9) * 0.75 + 0.25 * middle;\n    \n    vec2 c2 = vec2(1.25, 0.35) * 0.75 + 0.25 * middle;\n    \n    float r1 = octDistance(uv, c1);\n    float r2 = octDistance(uv, c2);\n    \n    // 0.25 shows the chunky border\n    float offset = 0.25;\n    offset = (float(iMouse.x) / float(iResolution.x) - 0.5) * 2.0 * octDistance(c1, c2);\n    \n    float difference = abs(r1) - (abs(r2) + offset);\n\n    // Output to screen\n    fragColor = vec4(\n        mod(13.0 * r1 / 3.0, 1.0),\n        abs(difference) < 1e-2\n            ? 1.0\n            : (difference < 0.0) ? 0.75 : 0.25,\n        mod(17.0 * r2 / 3.0, 1.0),\n        1.0\n    );\n}\n","name":"Image","description":"","type":"image"}]}