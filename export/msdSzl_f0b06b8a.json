{"ver":"0.1","info":{"id":"msdSzl","date":"1680291523","viewed":32,"name":"ReactionDiffusion(Gray-Scott)","username":"pik","description":"Gray-Scott","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["cava"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    float w = texture(iChannel0,uv).x;\n    fragColor = vec4(vec3(w),1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4sXGR8","channel":0}],"code":"//initial image\n\nfloat P(vec2 uv)\n{\n    float x = uv.x;\n    float y = uv.y;\n    \n//function\n    \n    //return step(0.2,y-0.2*x*sin(x*20.));\n    //return step(0.3,abs(x+y))*step(0.3,abs(-x+y))*step(0.3,abs(x-y))*step(0.3,abs(-x-y));\n    //return step(0.4,abs(x)+y)*step(-x+y,0.3);\n    //return step(0.01,abs(x*y));\n    //return step(0.5,sin(1.*(0.5*x*x+1.5*y*y)));\n    return clamp(step(0.5,sin(fract(atan(x*x*x,y*y*y)*2.)*(x*x+y*y)*4.))+step(x*x+y*y,0.3)*step(0.05,x*x+y*y),0.0,1.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord.xy * 2.0 - iResolution.xy)/min(iResolution.x,iResolution.y);\n    vec3 col = vec3(P(uv));\n    fragColor = vec4(col,1.0);\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    if(iTime < ini )\n    {\n        float w = texture(iChannel1,uv).x;\n        fragColor = vec4(1.0, w, 0.0, 1.0);\n        return;\n    }\n    vec2 eps = vec2(pix) / iResolution.xy;\n    //vec2 eps = vec2(pix+5.*fract(iTime*2.)) / iResolution.xy;\n    vec2 U=texture(iChannel0,uv).xy;\n    U+=GrayScott(uv,eps,iChannel0)*dt;\n    fragColor = vec4(U.x,U.y,0.,1.0);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    if(iTime < ini )\n    {\n        float w = texture(iChannel1,uv).x;\n        fragColor = vec4(1.0, w, 0.0, 1.0);\n        return;\n    }\n    vec2 eps = vec2(pix) / iResolution.xy;\n    //vec2 eps = vec2(pix+5.*fract(iTime*2.)) / iResolution.xy;\n    vec2 U=texture(iChannel0,uv).xy;\n    U+=GrayScott(uv,eps,iChannel0)*dt;\n    fragColor = vec4(U.x,U.y,0.,1.0);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"//diffusion coefficients//->(recommend:Du/Dv=2.0),Dv(min->)sharp line\n#define Du 0.1\n#define Dv 0.05\n//feed rate/kill rate\n//#define F 0.03\n//#define K 0.063\n\n//dot\n//#define F 0.03\n//#define K 0.063\n\n//\n#define F 0.037\n#define K 0.06\n\n\n//#define F 0.046\n//#define K 0.0594\n\n//\n//#define F 0.082\n//#define K 0.06\n//chaos\n//#define F 0.03\n//#define K 0.06\n//\n//#define F 0.06\n//#define K 0.06\n//initial stay time\n#define ini 0.1\n//speed\n#define dt 0.5\n//differential delta//->blur effect\n#define pix 1.\n\n//Gray-Scott Model\nvec2 laplacian(vec2 uv, vec2 eps, sampler2D map)\n{\n    vec2 U=texture(map,uv).rg;\n    vec2 U1=texture(map,uv+vec2(eps.x,0.)).rg;\n    vec2 U2=texture(map,uv+vec2(-eps.x,0.)).rg;\n    vec2 U3=texture(map,uv+vec2(0.,eps.y)).rg;\n    vec2 U4=texture(map,uv+vec2(0.,-eps.y)).rg;\n    return U1+U2+U3+U4-4.*U;\n}\n\n\nvec2 GrayScott(vec2 uv, vec2 eps, sampler2D map)\n{\n    vec2 U=texture(map,uv).rg;\n    vec2 diff=vec2(Du,Dv)*laplacian(uv,eps,map);\n    vec2 rate=vec2(-1.,1.)*U.x*U.y*U.y;\n    vec2 mutation=vec2(F,-F-K)*vec2(1.-U.x,U.y);\n    return diff+rate+mutation;\n}","name":"Common","description":"","type":"common"}]}