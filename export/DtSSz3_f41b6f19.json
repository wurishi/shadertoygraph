{"ver":"0.1","info":{"id":"DtSSz3","date":"1676358696","viewed":87,"name":"镜头雨滴","username":"ming1100103","description":"rain","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["rain"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float N21(vec2 p)\n{\n\tp = fract(p * vec2(123.34, 345.45));\n\tp += dot(p, p + 34.345);\n\treturn fract(p.x + p.y);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 fianluv = fragCoord/iResolution.xy;\n    float t = iTime;\n    vec4 col = vec4(0, 0, 0, 1.0);\n    vec2 uv01 = fragCoord/iResolution.xy;\n    vec2 aspect = vec2(2, 1);\n    vec2 uv02 = uv01 * 5.0 * aspect;\n    uv02.y += t * 0.1;\n    \n    vec2 uv03 = fract(uv02) - 0.5;\n    col.rg = uv03;\n    \n    vec2 id = floor(uv02);\n\tfloat n = N21(id);\n\tt += n * 6.2831;\n    \n    float w = uv02.y * 10.0;\n    float x = (n - 0.5) * 0.8;\n    x += (0.4 - abs(x)) * sin(3.0 * w) * pow(sin(w), 6.0) * 0.45;\n\tfloat y = -sin(t + sin(t + sin(t) * 0.5)) * 0.2;//水珠是上下来回移动的\n    y -= (uv03.x - x) * (uv03.x - x);\n\tvec2 dropPos = (uv03 - vec2(x, y)) / aspect;\n    \n    \n    vec2 trailPos = (uv03 - vec2(x, t * 0.25)) / aspect; //- half2(x,y) 为了移动\n\ttrailPos.y = (fract(trailPos.y * 8.0) - 0.5) / 8.0; // -0.5是将半圆调整为完整圆\n    float trail = smoothstep(0.03, 0.01, length(trailPos));\n    trail *= smoothstep(-0.05, 0.05, dropPos.y);\n    trail *= smoothstep(0.5, y, uv03.y);\n    float drop = smoothstep(0.05, 0.03, length(dropPos));\n    float fogTrail = smoothstep(-0.05, 0.05, dropPos.y);\n\tfogTrail *= smoothstep(0.5, y, uv03.y);\n    fogTrail *= smoothstep(0.05, 0.04, abs(dropPos.x));\n    trail *= fogTrail;\n\tcol += fogTrail * 0.5;\n    \n    col += drop;\n    col += trail;\n    \n    if(uv03.x > 0.48 || uv03.y > 0.49)\n        col = vec4(1.0, 0, 0, 1.0);\n        \n    vec2 offset = drop * dropPos + trail * trailPos;\n    vec4 tex = texture( iChannel0 , fianluv + offset);\n    // Output to screen\n    fragColor = tex;\n}","name":"Image","description":"","type":"image"}]}