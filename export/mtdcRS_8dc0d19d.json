{"ver":"0.1","info":{"id":"mtdcRS","date":"1699376707","viewed":231,"name":"playing wth hardware derivatives","username":"FabriceNeyret2","description":".","likes":20,"published":3,"flags":0,"usePreview":0,"tags":["dfdx","dfdy","fwidth","gradients","hardwarederivatives"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdXGzn","filepath":"/media/a/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","previewfilepath":"/media/ap/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define T(ch)  O = texture(ch, u/R ), H = float(textureSize(ch,0).y)\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n    vec2  R = iResolution.xy, G,\n          U = ( u+u - R ) / R.y,\n          L = cos(3.*iTime+vec2(0,33));              // rotating light direction\n    float H,s,l,d, a=1.;                             // a = amplification\n    T(iChannel3);                                    // load texture in O, size in H\n    s = 10.*R.y/H;                                   // normalization for resolution invariance\n    l = length(O.rgb);                               // luminance\n    G = vec2( dFdx(l), dFdy(l) ) *s;                 // luminance gradient \n    d = fwidth(l) *s;                                // luminance gradient (approx)\n    vec4 D = fwidth(O)*s, Gx = dFdx(O)*s, Gy = dFdy(O)*s; // color gradients\n    \n    int i = int(iTime)%10;                           // cycles all modes\n    \n    O =  i==0 ? O/D/5.                               // force color gradients to 1 \n       : i==1 ? vec4(l/d/5.)                         // force luminance gradients to 1 \n       \n       : i==2 ? D                                    // show color gradient (approx)\n       : i==3 ? sqrt(Gx*Gx+Gy*Gy)                    // show color gradient\n       : i==4 ? vec4( d )                            // show luminance gradient amplitude (approx)\n       : i==5 ? vec4( length(G) )                    // show luminance gradient amplitude\n       \n       : i==6 ? vec4(.5+ a*G,0,0)                    // show luminance gradient vector\n       : i==7 ? vec4(.5+ a*dot( G, normalize(U) ) )  // radial light luminance gradient \n       : i==8 ? .5+ a* ( Gx * L.x + Gy * L.y )       // light color gradient\n       :        vec4( .5+ a* dot( G, L ) );          // light luminance gradient\n}","name":"Image","description":"","type":"image"}]}