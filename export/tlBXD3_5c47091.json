{"ver":"0.1","info":{"id":"tlBXD3","date":"1567276434","viewed":348,"name":"the clouds","username":"foran","description":"the clouds","likes":19,"published":1,"flags":0,"usePreview":0,"tags":["theclouds"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const int octaves=12;\nconst float seed=43758.5453123;\nconst float seed2=73156.8473192;\nconst vec3 color1=vec3(.101961,.619608,.666667);//color\nconst vec3 color2=vec3(.666667,.666667,.498039);//color\nconst vec3 color3=vec3(0,0,.164706);//color\nconst vec3 color4=vec3(.666667,1.,1.);//color\n\nfloat rand(vec2 co){\n\t// implementation found at: lumina.sourceforge.net/Tutorials/Noise.html\n\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat noise2f( in vec2 p )\n{\n\tvec2 ip = vec2(floor(p));\n\tvec2 u = fract(p);\n\t// https://iquilezles.org/articles/morenoise\n\tu = u*u*(3.0-2.0*u);\n\t//u = u*u*u*((6.0*u-15.0)*u+10.0);\n\t\n\tfloat res = mix(\n\t\tmix(rand(ip),  rand(ip+vec2(1.0,0.0)),u.x),\n\t\tmix(rand(ip+vec2(0.0,1.0)),   rand(ip+vec2(1.0,1.0)),u.x),u.y);\n\treturn res*res;\n\t//return 2.0* (res-0.5);\n}\n\n\nfloat fbm(vec2 c) {\n\tfloat f = 0.0;\n\tfloat w = 1.0;\n\tfor (int i = 0; i < 12; i++) {\n\t\tf+= w*noise2f(c);\n\t\tc*=2.0;\n\t\tw*=0.5;\n\t}\n\treturn f;\n}\n//--------------\nvec2 random2(vec2 st,float seed){\n\tst=vec2(dot(st,vec2(127.1,311.7)),\n\tdot(st,vec2(269.5,183.3)));\n\treturn-1.+2.*fract(sin(st)*seed);\n}\n\nfloat noise(vec2 st,float seed){\n\tvec2 i=floor(st);\n\tvec2 f=fract(st);\n\t\n\tvec2 u=f*f*(3.-2.*f);\n\t\n\treturn mix(mix(dot(random2(i+vec2(0.,0.),seed),f-vec2(0.,0.)),\n\tdot(random2(i+vec2(1.,0.),seed),f-vec2(1.,0.)),u.x),\n\tmix(dot(random2(i+vec2(0.,1.),seed),f-vec2(0.,1.)),\n\tdot(random2(i+vec2(1.,1.),seed),f-vec2(1.,1.)),u.x),u.y);\n}\nfloat fbm1(in vec2 _st){\n\tfloat v=0.;\n\tfloat a=.95;//                       резкость\n\tvec2 shift=vec2(100.);\n\t// Rotate to reduce axial bias\n\tmat2 rot=mat2(cos(.5),sin(.5),\n\t-sin(.5),cos(.50));\n\tfor(int i=0;i<octaves;++i){\n\t\tv+=a*noise(_st,seed);\n\t\t_st=rot*_st*2.+shift;\n\t\ta*=.45;\n\t}\n\treturn v+.5014;//                яркость\n}\n//-----------\nvec2 cMul(vec2 a, vec2 b) {\n\treturn vec2( a.x*b.x -  a.y*b.y,a.x*b.y + a.y * b.x);\n}\n\nfloat pattern(  vec2 p, out vec2 q, out vec2 r )//        туманные облака (не резко)\n{\n\t\n\tq.x = fbm1( p  +0.00*iTime*.5);\n\tq.y = fbm1( p + vec2(1.0));\n\t//r=cMul(q,q);\n\tr.x = fbm1( p +1.0*q + vec2(1.7,9.2)+0.15*iTime*.5 );\n\tr.y = fbm1( p+ 1.0*q + vec2(8.3,2.8)+0.126*iTime*.5);\n   //\tr = cMul(q,q);\n\treturn fbm1(p +1.0*r + 0.0* iTime*.5);\n}\n\n\nvec3 colour(vec2 c,vec2 q,vec2 r) {\n\tfloat f = pattern(c,q,r)*1.1;//                 яркость 1.1\n\tvec3 col = mix(color1,color2,clamp((f*f)*4.0,0.0,1.0));\n\tcol = color2;\n\tcol = mix(col,color3,clamp(length(q),0.0,1.0));\n\tcol = mix(col,color4,clamp(length(r.x),0.0,1.0));\n\treturn (f*f+0.452)*col;\n}\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord){\n  vec2 uv=(fragCoord.xy-.5*iResolution.xy)/iResolution.y;\n  vec2 q=vec2(0.,0.);\n  vec2 r=vec2(0.,0.);\n  vec3 col=colour(uv,q,r);\n  fragColor=vec4(col,1.);\n}\n","name":"Image","description":"","type":"image"}]}