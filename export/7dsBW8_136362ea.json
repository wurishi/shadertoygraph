{"ver":"0.1","info":{"id":"7dsBW8","date":"1644825383","viewed":147,"name":"Simplex Voronoi 3D","username":"VL","description":".","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["pattern"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define int2 vec2\n#define float2 vec2\n#define int3 vec3\n#define float3 vec3\n#define int4 vec4\n#define float4 vec4\n#define frac fract\n\nfloat3 hash(float3 p3)\n{\n    p3 = frac(p3 * float3(.1031, .1030, .0973));\n    p3 += dot(p3, p3.yxz + 33.33);\n    return frac((p3.xxy + p3.yxx) * p3.zyx)*2.-1.;\n}\n\nfloat min3(float a, float b, float c)\n{\n    return min(a, min(b, c));\n}\n\nfloat min4(float a, float b, float c, float d)\n{\n    return min(min3(a, b, c), d);\n}\n\nfloat simplexVoronoi(float3 p, float m)\n{\n    const float k1 = 0.333333f;\n    const float k2 = 0.166667f;\n    \n    int3 idx = floor(p + (p.x + p.y + p.z) * k1);\n    float3 a = p - (float3(idx) - float(idx.x + idx.y + idx.z) * k2);\n    \n    \n    int3 tb1Arr[8] = int3[8]( int3(0, 0, 1),int3(0, 1, 0),int3(0),int3(0, 1, 0),int3(0, 0, 1),int3(0), int3(1, 0, 0),int3(1, 0, 0));\n    int3 tb2Arr[8] = int3[8]( int3(0, 1, 1),int3(0, 1, 1),int3(0), int3(1, 1, 0),int3(1, 0, 1),int3(0),int3(1, 0, 1),int3(1, 1, 0));\n    \n    uint tbIdx = (uint(a.x > a.y) << 2) | (uint(a.x > a.z) << 1) | uint(a.y > a.z);\n    \n    int3 tb1 = tb1Arr[tbIdx], tb2 = tb2Arr[tbIdx];\n    \n    float g = 0.09f;\n    float3 offA = sin(hash(idx) *123425.55981f + m) * g+g;\n      offA -= (offA.x + offA.y + offA.z) * k2;\n    float3 offB = sin(hash(idx + tb1) * 123425.55981f + m) * g+g + tb1 ;    \n      offB -= (offB.x + offB.y + offB.z) * k2;\n    float3 offC = sin(hash(idx + tb2) * 123425.55981f + m) * g+g + tb2 ;\n      offC -= (offC.x + offC.y + offC.z) * k2;\n    float3 offD = sin(hash(idx + 1.) * 123425.55981f + m) * g+g + 1.;\n      offD -= (offD.x + offD.y + offD.z) * k2;\n    \n    float dist = min4(length(a -offA),length(a -offB),length(a -offC),length(a -offD));\n    \n    return smoothstep(0.f, 1.f, dist);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.y;\n    fragColor.rgb = vec3(simplexVoronoi(float3(uv*10., iTime*0.03f),iTime*2.));\n    fragColor.a = 1.f;\n}","name":"Image","description":"","type":"image"}]}