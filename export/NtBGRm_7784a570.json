{"ver":"0.1","info":{"id":"NtBGRm","date":"1623517859","viewed":78,"name":"Pulse wave osc","username":"Envy24","description":"pulse, wave, sound","likes":4,"published":1,"flags":8,"usePreview":0,"tags":["pulse","sound","wave"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// See define in common\n\nfloat plotSmoothLine(\n    float value, // in range [-1.0; 1.0]\n    float v,     // in range [0.0; 1.0]\n    float width) // > 0.0\n{\n    return \n        smoothstep(\n            0.0,\n            width / iResolution.y,\n            abs(v - (1.0 + value) * 0.5));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.y;\n    \n    uv.x *= 0.05;\n    \n    float gray = plotSmoothLine(\n        additiveWave(VOLUME, BASE_FREQUENCY, (uv.x + iTime)),\n        uv.y,\n        2.0);\n\n    // Output to screen\n    fragColor = vec4(vec3(gray),1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define TAU 6.2831853071795862 // 2*PI\n#define BASE_FREQUENCY 60.0    // in Hertz\n#define VOLUME 0.5             // in range [0.0; 1.0]\n#define PULSE_WIDTH 0.5        // (0.0; 1.0)\n\nfloat pulseOsc(\n    float amplitude,   // in range [0.0; 1.0]\n    float frequency,   // > 0.0\n    float time,        \n    float phase_shift,\n    float pulse_width)\n{\n    float phase = phase_shift + time * TAU * frequency;\n    \n    float sign_ = fract(phase / TAU) >= pulse_width ? 1.0 : -1.0;\n\n    return sign_ * amplitude;\n}\n\nfloat additiveWave(\n    float amplitude,\n    float baseFrequncy,\n    float time)\n{\n    float pulse_width = clamp((1.0 + sin(time)) * 0.5, 0.01, 0.99);\n    //float pulse_width = PULSE_WIDTH;\n\n    float level = \n             pulseOsc(1.0, baseFrequncy,       time, 0.0, pulse_width)  * 0.75;\n    level += pulseOsc(1.0, baseFrequncy * 2.0, time, 0.0, pulse_width)  * 0.25;\n    level += pulseOsc(1.0, baseFrequncy * 3.0, time, 0.0, pulse_width)  * 0.05;\n    level += pulseOsc(1.0, baseFrequncy * 8.0, time, 0.0, pulse_width)  * 0.02;\n    //                                                      sum = 1.07\n    \n    return (level / 1.07) * amplitude;\n}","name":"Common","description":"","type":"common"},{"inputs":[],"outputs":[],"code":"// See common\n\nvec2 mainSound( int samp, float time)\n{\n    //float level = pulseOsc(VOLUME, BASE_FREQUENCY, time, 0.0, PHASE_WIDTH);\n    float level = additiveWave(VOLUME, BASE_FREQUENCY, time);\n    \n    return vec2(level, level);\n}","name":"Sound","description":"","type":"sound"}]}