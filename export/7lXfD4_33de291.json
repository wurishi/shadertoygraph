{"ver":"0.1","info":{"id":"7lXfD4","date":"1650889191","viewed":56,"name":"Tile editor","username":"SamyHasRoot","description":"A tile editor thing.\n\nPlace and remove tiles by clicking.\n\nProbably written badly.","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["2d","interactive","tiles"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 tile_1(vec2 uv) {\n    return vec3(0, 0, 0);\n}\n\nvec3 tile_2(vec2 uv) {\n    return texture(iChannel1, uv).rgb;\n}\n\nint get_tile_id(ivec2 cords) {\n    return int(texelFetch(iChannel0,cords,0).r);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    vec2 n_tiles = get_n_tiles(iResolution.y/iResolution.x);\n    \n    vec2 tile_uv = fract(vec2(mix(0.0, n_tiles.x, uv.x), mix(0.0, n_tiles.y, uv.y)));\n    ivec2 tile_cords = ivec2(floor(vec2(mix(0.0, n_tiles.x, uv.x), mix(0.0, n_tiles.y, uv.y))));\n    \n    vec3 col = vec3(0.0, 1.0, 1.0);\n    if (get_tile_id(tile_cords) == 0) {\n        col = tile_1(tile_uv);\n    } else {\n        col = tile_2(tile_uv);\n    }\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"int get_tile_id(ivec2 cords) {\n    return int(texelFetch(iChannel0,cords,0).r);\n}\n\nint next_tile_id(int old) {\n    return (old + 1) % 2;\n}\n\nconst int INIT_DATA_SIZE = 12;\nconst ivec2 INIT_DATA[INIT_DATA_SIZE] = ivec2[](\n    ivec2(7,7),ivec2(12,7),ivec2(7,6),ivec2(12,6),\n    ivec2(6,3),ivec2(13,3),ivec2(7,2),ivec2(8,2),\n    ivec2(9,2),ivec2(10,2),ivec2(11,2),ivec2(12,2)\n);\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    if (iFrame == 0) {\n        for (int i = 0; i < INIT_DATA_SIZE; i++) {\n            if (ivec2(fragCoord) == INIT_DATA[i]) {\n                fragColor = vec4(1.0, 0.0, 0.0, 0.0);\n                return;\n            }\n        }\n    }\n    \n    fragColor = texelFetch(iChannel0,ivec2(fragCoord),0);\n    vec2 n_tiles = get_n_tiles(iResolution.y/iResolution.x);\n    \n    if (iMouse.w > .0) {\n        vec2 click_uv = iMouse.xy/iResolution.xy;\n        ivec2 click_cords = ivec2(floor(vec2(mix(0.0, n_tiles.x, click_uv.x), mix(0.0, n_tiles.y, click_uv.y))));\n        \n        if(ivec2(fragCoord) == click_cords) {\n            fragColor = vec4(next_tile_id(get_tile_id(click_cords)),0,0,0);\n        }\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"const float SIZE = 20.0;\n\nvec2 get_n_tiles(float aspect_ratio) {\n    return vec2(SIZE, SIZE*aspect_ratio);\n}","name":"Common","description":"","type":"common"}]}