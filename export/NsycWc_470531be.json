{"ver":"0.1","info":{"id":"NsycWc","date":"1669136046","viewed":82,"name":"Sphere testing","username":"calebxcaleb","description":"rendering this is very hardddddddddddddddddddddd","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["testing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const int SAMPLES = 100;\nfloat seed = 0.0;\nfloat aa = 0.01;\n\nstruct Sphere{\n    float radius;\n    vec3 center;\n    vec3 col;\n};\n\nstruct Ray{\n    vec3 origin;\n    vec3 dir;\n};\n\nfloat random() {\n    return fract(sin(seed++)*43758.5453123);\n}\n\nfloat hit(Sphere s, Ray r){\n    vec3 dist = r.origin - s.center;\n    float a = dot(r.dir, r.dir);\n    float b = 2.0 * dot(dist, r.dir);\n    float c = dot(dist, dist) - s.radius * s.radius;\n    float discriminant = b*b - 4.0*a*c;\n    \n    if(discriminant >= 0.0){\n        return (-b - sqrt(discriminant) ) / (2.0*a);\n    } else {    \n        return 1.0;\n    }\n}\n\nvec3 display(Sphere s, Ray r){\n    float t = hit(s, r);\n        \n    if(t < 0.0){\n        return vec3(-1.0 * r.dir.x * t + 0.25, -1.0 * r.dir.y * t + 0.25, r.dir.z * t - 0.75);\n        // return vec3(normalize(r.origin + r.dir * t - s.center));\n    }\n    \n    return vec3(0.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float aspect = iResolution.x / iResolution.y;\n\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = vec2((fragCoord.x/iResolution.x), (fragCoord.y/iResolution.y)/aspect);\n    uv = fragCoord - iResolution.xy*0.5;\n    uv /= iResolution.y;\n\n    \n    Sphere s = Sphere(0.25, vec3(0.0, 0.0, 1.0), vec3(1.0, 0.5, 0.25));\n    Ray r;\n\n\n    vec3 col = vec3(0.0);\n    \n    for(int i = 0; i < SAMPLES; i++){\n        r = Ray(vec3(0.0, 0.0, 0.0), vec3(uv.x + random() * aa, uv.y + random() * aa, -1.0));\n        col += display(s, r);\n    }\n    \n    col /= float(SAMPLES);\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}