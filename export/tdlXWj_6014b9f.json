{"ver":"0.1","info":{"id":"tdlXWj","date":"1552246572","viewed":481,"name":"Laser Beam Multi (Audio)","username":"drummertom999","description":"laser","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["laser"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGRn","filepath":"/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","previewfilepath":"/media/ap/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGRr","filepath":"/media/a/48e2d9ef22ca6673330b8c38a260c87694d2bbc94c19fec9dfa4a1222c364a99.mp3","previewfilepath":"/media/ap/48e2d9ef22ca6673330b8c38a260c87694d2bbc94c19fec9dfa4a1222c364a99.mp3","type":"music","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define BEAM_WIDTH 0.05\n#define LINE_WANDER_WIDTH_MIN 0.01\n#define LINE_WANDER_WIDTH_MAX 0.05\n#define LINE_WANDER_SPEED 0.06\n#define BEAM_COLOUR_INNER vec4(0.086, 0.611, 0.137, 0.0)\n#define BEAM_COLOUR_OUTER vec4(0.086, 0.611, 0.137, 0.0)\n#define JAGINESS 4.0\n#define ADD_SCANLINES true\n#define SHOW_BAKGROUND false\n\nvec4 beam(vec2 fragCoord, vec4 colourInner, vec4 colourOuter, float beamSize,  float wanderWidthMin, float wanderWidthMax, float offset, float jaginess)\n{\n    // Setup\n    float pixelX = fragCoord.x;\n    float pixelY = fragCoord.y;\n    float beamWidth = iResolution.y * beamSize;\n    \n    // Animate wander width\n    float wanderT = (iTime + offset) * 0.6;\n    float wanderWidthBlend = ADD_SCANLINES? (sin(pixelY + wanderT) + 1.0) * 0.5 : 1.0;\n    float wanderWidth = iResolution.x * mix(wanderWidthMin, wanderWidthMax, wanderWidthBlend);\n    \n    // Sample noise\n    float noiseT = (iTime + offset) * LINE_WANDER_SPEED;\n    float noise = texture(iChannel0, vec2(noiseT, (pixelX / iResolution.x) / jaginess)).r;\n    float wander = ((noise * 2.0f) - 1.0) * wanderWidth;\n    float centreX = (iResolution.x / 2.0) + wander;\n    float centreY = (iResolution.y / 2.0) + wander;\n\n    // Line colour\n    float distFromCentre = abs(centreY - pixelY);\n    float beamBlend = clamp(distFromCentre / beamWidth, 0.0, 1.0);\n    vec4 beamColour = mix(colourInner, colourOuter, beamBlend);\n    beamColour.a = (1.0 - beamBlend);\n    return beamColour;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 audioSample = texture(iChannel2, vec2(0.0, 0.0));\n    float volume = max(audioSample.x, audioSample.y); \n    vec4 beam1 = beam(fragCoord, BEAM_COLOUR_INNER, BEAM_COLOUR_OUTER, BEAM_WIDTH * volume, LINE_WANDER_WIDTH_MIN, LINE_WANDER_WIDTH_MAX * 0.3, 0.0, JAGINESS * 2.0);\n    vec4 beam2 = beam(fragCoord, vec4(0.305, 0.847, 0.172, 0.0), vec4(0.984, 0.960, 0.156, 0.0), BEAM_WIDTH * 0.5 * volume, LINE_WANDER_WIDTH_MIN * 0.5, LINE_WANDER_WIDTH_MAX * 0.4, 10.0, JAGINESS * 2.0);\n\tvec4 beamColour = mix(beam1, beam2, beam2.a);\n    \n    // Composite background? \n\tif(SHOW_BAKGROUND)\n    {\n        vec2 backgroundUV = fragCoord/iResolution.xy;\n    \tvec4 background = texture(iChannel1, backgroundUV) * 0.4;\n    \tfragColor = mix(background, beamColour, beamColour.a);\n    }\n\telse\n    {\n        fragColor = (beamColour * beamColour.a);\n    }\n}","name":"Image","description":"","type":"image"}]}