{"ver":"0.1","info":{"id":"ltKGRW","date":"1473587433","viewed":278,"name":"Psytrance 2","username":"ttoinou","description":"little fork from https://www.shadertoy.com/view/lltGDs","likes":3,"published":1,"flags":8,"usePreview":0,"tags":["music"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float message(vec2 uv) { // to alter in the icon\n    uv-=vec2(1.,10.); if ((uv.x<0.)||(uv.x>=32.)||(uv.y<0.)||(uv.y>=3.)) return -1.; \n    int i=1, bit=int(pow(2.,floor(32.-uv.x)));\n    if (int(uv.y)==2) i=  928473456/bit; // 00110111 01010111 01100001 01110000\n    if (int(uv.y)==1) i=  626348112/bit; // 00100101 01010101 01010000 01010000\n    if (int(uv.y)==0) i= 1735745872/bit; // 01100111 01110101 01100001 01010000\n \treturn float(i-2*(i/2));\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    //  if (iResolution.y<200.) to display only in the icon \n    if (iResolution.y<2000.) {float c=message(fragCoord.xy/8.);if(c>=0.){fragColor=vec4(c);return;}}\n\n    \n    vec2 uv = fragCoord.xy / iResolution.xy;\n\tfragColor = vec4(uv,0.5+0.5*sin(iTime),1.0);\n\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"XsfGRr","channel":0}],"code":"#define TAU 6.2831\n\n\n//psytrance lol\n\nfloat kick(float time, float mult)\n{\n    float length = 1.0;\n    float sampleTime = min(1.0, (time*mult) / length);\n    return sin(time*TAU*mix(50.0,200.0, exp(-16.0*sampleTime/2.0))) * exp(-1.0 * sampleTime*10.0);\n    //return sin(length*sampleTime*TAU*mix(500.0,50.0,sampleTime));// * exp(-4.0 * sampleTime);\n}\n\nfloat bass(float time, float mult)\n{\n    float length = 1.0;\n    float sampleTime = min(1.0, (time*mult) / length);\n    return (sin(time*TAU*110.0/2.0)) * exp(-1.0 * sampleTime*10.0);\n    //return sin(length*sampleTime*TAU*mix(500.0,50.0,sampleTime));// * exp(-4.0 * sampleTime);\n}\n\nfloat bass(float time, float mult, float freq)\n{\n    float length = 1.0;\n    float sampleTime = min(1.0, (time*mult) / length);\n    return (sin(time*TAU*freq)) * exp(-1.0 * sampleTime*10.0);\n    //return sin(length*sampleTime*TAU*mix(500.0,50.0,sampleTime));// * exp(-4.0 * sampleTime);\n}\n\n// TANH Function (Hyperbolic Tangent)\n/*\nfloat tanh(float val)\n{\n    float tmp = exp(val);\n    float tanH = (tmp - 1.0 / tmp) / (tmp + 1.0 / tmp);\n    return tanH;\n}\n*/\nfloat limiter(float x,float y)\n{\n    return tanh(x * y ) / tanh(y);\n}\n\nvec2 mainSound( in int samp, float time )\n{\n    float bpm = 158.0;\n  float bpmult = bpm/60.0;\n    \n    float bpm2 = bpm + ( sin(time*TAU/7.0 ) - 0.8)*4.0;\n  float bpmult2 = bpm2/60.0;\n    \n    float outp = 0.0;\n    \n    if(fract(time * bpmult/4.0)*4.0 > 3.0 && fract(time * bpmult/4.0)*4.0 < 4.0)\n    {\n           outp += ( kick(fract(time*bpmult)/bpmult, 2.0 ) * 1.0 \n                + bass(fract(time*bpmult + 0.25)/bpmult, 3.0) *0.5\n                + bass(fract(time*bpmult2 + 0.5)/bpmult2, 3.0, 110.0) *0.5\n                + bass(fract(time*bpmult + 0.75)/bpmult, 3.0)*0.5 )\n        ;\n    }else{\n      outp += ( kick(fract(time*bpmult)/bpmult, 2.0 ) * 1.0 \n                + bass(fract(time*bpmult + 0.25)/bpmult, 3.0) *0.5\n                + bass(fract(time*bpmult2 + 0.5)/bpmult2, 3.0) *0.5\n                + bass(fract(time*bpmult + 0.75)/bpmult, 3.0)*0.5 )\n        ;\n    }\n    \n    float t = mod(time*bpmult,16.0)/bpmult;\n    outp += 0.05*sin(800.0*t*TAU + 80.14 * (cos(t*TAU*20.0) ))*exp(-t*3.0);\n    //outp = 0.01*sin(6000.0*time*TAU);\n    \n    outp = limiter(outp,8.0);\n\n    return vec2(outp,outp);\n}\n","name":"Sound","description":"","type":"sound"}]}