{"ver":"0.1","info":{"id":"Mf3BRs","date":"1733369890","viewed":191,"name":"Relief","username":"wyatt","description":"Various Julia fractals","likes":28,"published":3,"flags":32,"usePreview":0,"tags":["fractal","julia"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"Main {\n\n    Q = A(U)/float(1+iFrame%M);\n\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define M 180\n#define Main void mainImage(out vec4 Q, in vec2 U)\n#define R iResolution.xy\n#define A(U) texture(iChannel0,(U)/R)\n#define B(U) texture(iChannel1,(U)/R)\n#define C(U) texture(iChannel2,(U)/R)\n#define ei(a) mat2(cos(a),sin(a),-sin(a),cos(a))\nvec4 hash(vec4 p4)\n{\n    p4 = fract(p4  * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}\n\nfloat ln (vec3 u, vec3 a, vec3 b) {\n\n    return length(u-a-(b-a)*clamp(dot(u-a,b-a)/dot(b-a,b-a),0.,1.));\n\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","previewfilepath":"/media/ap/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"Main {\n    if (iFrame%M>1){\n        Q = A(U);\n        return;\n    }\n    Q = vec4(0);\n    for (float x = -.5; x <= .5; x+=.125) \n    for (float y = -.5; y <= .5; y+=.125) {\n        \n        vec2 u = vec2(.8*cos(.5*iTime),.3*sin(.2*iTime))+(1.05-.7*cos(iTime))*(U+vec2(x,y)-.5*R)*ei(iTime)/R.y;\n        float l = 0.;\n        for (float i = 1.; i < 500.; i++) {\n            vec2 v = u;\n            u = vec2(u.x*u.x-u.y*u.y,2.*u.x*u.y)-vec2(.75+.05*sin(.14*iTime),-.15+.1*sin(3.14*iTime));\n            l += length(v-u);\n            Q -= sign(sin(iTime))*10.*smoothstep(0.,50.,i)*exp(-dot(u,u))/i/i;\n            if (length(u)>4.) break;\n        }\n    }\n    Q -= 5.*C(U*ei(sin(iTime*.777))).x;\n\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"Main {\n    Q.w = A(U).w;\n    float n = A(U+vec2(0,1)).w;\n    float e = A(U+vec2(1,0)).w;\n    float s = A(U-vec2(0,1)).w;\n    float w = A(U-vec2(1,0)).w;\n\n    Q.xyz = normalize(vec3(e-w,n-s,1));\n\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"Main {\n    Q = B(U);\n    if (iFrame%M==0) Q *= 0.;\n    vec4 h = hash(vec4(U,iFrame,iTime));\n    vec3 d = normalize(h.xyz*2.-1.);\n    vec4 a = A(U);\n    vec3 p = vec3(U,a.w);\n    vec3 p0 = p;\n    for (float i = 0.; i < 200.; i++) {\n        vec4 a = A(p.xy);\n        a.w = a.w-p.z;\n        p += d*max(-.5*a.w,1.);\n        if (a.w < 0.0) {\n            //d = normalize(d-.05*a.xyz);\n            return;\n        }\n    }\n    if (A(p.xy).w-p.z >0.)\n    Q += (1.5-.2*atan(.1*A(U).w))*vec4(1,.5,.2,1)*5000.*exp(-5.*length(d-normalize(vec3(0,.3,1))));\n\n}","name":"Buffer C","description":"","type":"buffer"}]}