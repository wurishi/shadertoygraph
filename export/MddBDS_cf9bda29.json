{"ver":"0.1","info":{"id":"MddBDS","date":"1526626980","viewed":639,"name":"Cloaking effect","username":"Otringal","description":"This is a light-distortion effect which mimicks the Predator's cloacking device as seen in the movies. It acts by bending the environment's light around the Predator's body. Click and move the mouse cursor over the screen in order to see it in action.","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["effect","masking","alien","predator","cloak","device","cloacking","costume"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    float aspect_ratio = iResolution.x / iResolution.y;\n    vec2 uv = fragCoord / iResolution.xy;\n    uv.x *= aspect_ratio;\n    vec2 predator_location = iMouse.xy / iResolution.xy;\n    predator_location.x *= aspect_ratio;\n    \n    //this line only forces the initial position to snap in the center for a nicer preview icon of the shader\n    predator_location = predator_location == vec2(0.0) ? vec2(0.5 * aspect_ratio, 0.5) : predator_location;    \n    \n    vec2 vector = uv - predator_location;\n    float radius = length(vector);\n    vec2 cloack = 1.0 - vec2(smoothstep(0.1, 0.3, radius));\n    float angle = atan(vector.y, vector.x);\n    cloack.x *= radius * cos(angle);\n    cloack.y *= radius * sin(angle);\n    \n    uv.x /= aspect_ratio;\n    vec4 background = texture(iChannel0, uv + cloack);\n    fragColor = background;\n}","name":"Image","description":"","type":"image"}]}