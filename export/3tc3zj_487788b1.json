{"ver":"0.1","info":{"id":"3tc3zj","date":"1576808004","viewed":139,"name":"Functional Ulam Spiral","username":"saidwho12","description":"Functional Ulam Spiral","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d","spiral","functional","ulam"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const int N = 50;\nconst int M = N + N;\n#define PI 3.14159\n\n// Get ring start number, from current ring width\nint K(int w) { return w > 1 ? 4+(w-2)*4 : 1; }\n\n// Get width of ring index\nint W(int i) { return i*2+1; }\n\n// Modified from https://www.shadertoy.com/view/Mtt3D2\nbool P(int x)\n{\n    if(x < 2 || x % 2 == 0) return false;\n    float l = sqrt(float(x))+1.;\n    \n    for (int i = 3; i < M; i += 2)\n    {\n        if (float(i) > l) return true;\n        if (x % i == 0) return false;\n    }\n    return false;\n}\n\nvoid mainImage( out vec4 O, in vec2 u )\n{\n    vec2 R = iResolution.xy, p = (u+u-R)/R.y;\n\n    float X = floor(p.x * float(N) + .5);\n    float Y = floor(p.y * float(N) + .5);\n   \tint x = int(X);\n   \tint y = int(Y);\n    int i = max(abs(x), abs(y)); // Ring index\n    int w0 = W(i-1); // Ring below width\n    int w1 = W(i); // Ring current width\n    int h = w1/2;\n    int A = w0*w0;\n    \n    int v = sign(y) == -1 && y == -h && x > -h ? 3 : (sign(x) == 1 && x == h ? 0 : (sign(y) == 1 && y == h ? 1 : 2));  \n\n    int j;\n    \n    switch (v)\n    {\n        case 0:\n        j = y + h+2;\n        break;\n        \n        case 1:\n        j = -x + (h+1);\n        break;\n        \n        case 2:\n        j = -y + (h);\n        break;\n        \n        case 3:\n        j = x + (h-1);\n        break;\n    }\n        \n    int n = A + v*w1 + j * int(i != 0);\n    \n    //float S = float(W(int(N)) * W(int(N)));\n    //float al = (float(n)) / S;\n    vec3 col = vec3( P(n) );\n    //vec3 col = vec3(n % 2);\n    \n    O = vec4(col, 1);\n}","name":"Image","description":"","type":"image"}]}