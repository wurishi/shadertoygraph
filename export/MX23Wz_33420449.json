{"ver":"0.1","info":{"id":"MX23Wz","date":"1708380719","viewed":97,"name":"Asahi illusion2","username":"altunenes","description":"The Asahi illusion shows that perceived brightness changes with the yellow's position, highlighting that pupil size reflects not just incoming light but also how the brain perceives it :)","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["illusion","perception","psychophysics"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//note: Petal shape based on the: https://www.shadertoy.com/view/ttySz3\n#define PI 3.14159265\n#define rot(a)   mat2(cos(a),-sin(a),sin(a),cos(a))\nvec4 DrawPetalPolar(vec2 uv, vec2 pos, float size, vec2 dir, float colorDirection){\n    // Distance\n    vec2 dist = uv - pos;\n    \n    // Rotate\n    float angle = -atan(dir.y, dir.x);\n    dist *= rot(angle) * 0.8;\n    \n    // Translate\n    dist.x -= size * 0.25f;\n    \n    // Polar coordinates\n    float r = length(dist) * 1.5;\n    float a = atan(dist.y, dist.x);\n    \n    // Shaping function\n    float f = -1.;\n    if(a > PI*0.5 || a < -PI*0.5){\n        f = size * cos(a*2.);\n    }\n    \n    // first version:\n    //float petalMask = 1.0 - smoothstep(0.0, 0.1, (r-f)/fwidth(r-f));\n    // TY FabriceNeyret2 for AA\nfloat petalMask =  smoothstep(0.,-1., (r-f)/fwidth(r-f) );\n\n    vec3 color = colorDirection > 0.0 \n                 ? mix(vec3(1.0, 1.0, 0.0), vec3(0.0, 0.0, 0.0), r / (size * 1.0))\n                 : mix(vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 0.0), r / (size * 1.0));\n    \n    return vec4(color, petalMask);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec2 uv = 1.3*( fragCoord -.5*iResolution.xy ) /iResolution.y;\n    vec3 bgColor = vec3(1.0, 1.0, 1.0); \n    fragColor = vec4(bgColor, 1.0);\n\n    float petalSize = 0.40;\n\n    float space = (2.5 * PI / 15.0) * (1.0 + 0.2);\n    // Animation \n    float phase = sin(iTime / 2.0) * PI;\n\n    // Position for the patterns\n    vec2 left = vec2(-0.5, 0), right = vec2(0.5, 0);\n\n    \n//left side\n    for(float i = 0.0; i < 2.0 * PI; i += space){\n        vec2 pos = left + vec2(cos(i), sin(i)) * 0.25;\n        float angle = i + phase;\n        vec2 dir = vec2(cos(angle), sin(angle));\n\n        vec4 leftcolor = DrawPetalPolar(uv, pos, petalSize, dir, 1.0);\n        fragColor = mix(fragColor, leftcolor, leftcolor.a);\n    }\n    \n//right side\n    for(float i = 0.0; i < 2.0 * PI; i += space){\n        vec2 pos = right + vec2(cos(i), sin(i)) * 0.25;\n        float angle = i - phase; \n        vec2 dir = vec2(cos(angle), sin(angle));\n\n        vec4 colors = DrawPetalPolar(uv, pos, petalSize, dir, -1.0);\n        fragColor = mix(fragColor, colors, colors.a);\n    }\n}","name":"Image","description":"","type":"image"}]}