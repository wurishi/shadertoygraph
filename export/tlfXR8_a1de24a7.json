{"ver":"0.1","info":{"id":"tlfXR8","date":"1634904312","viewed":132,"name":"Mandala Playground","username":"xx3000","description":"Having some fun with polar coordinates.\nClicking + moving the mouse causes some interesting changes to the patterns.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["polarcoordinates"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265\n\n#define REFLECTION_PLANES 6.0\n\n// cosine based palette, by iq\nvec3 palette( in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d )\n{\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\nvec3 smoothTransition(vec3 a, vec3 b, vec3 c, float t)\n{\n    float p = fract(t);\n    int id = int(mod(t, 3.0));\n    \n    vec3 outCol = vec3(0,0,0);\n    switch (id)\n    {\n        case 0:\n            outCol = mix(a,b,smoothstep(0.0,1.0,p));\n            break;\n        case 1:\n            outCol = mix(b,c,smoothstep(0.0,1.0,p));\n            break;\n        case 2:\n            outCol = mix(c,a,smoothstep(0.0,1.0,p));\n            break;\n    }\n    \n    return outCol;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float line = 0.5;\n    float yshift = 0.0;  //0.2\n    float xshift = 0.3; //0.5 //0.05\n    \n    vec3 white = vec3(1.0,1.0,1.0);\n    \n    vec2 uv = fragCoord/iResolution.y;\n\n    vec3 col = vec3(1.0,1.0,1.0);\n    \n    \n    {\n        uv -= vec2(0.5*iResolution.x/iResolution.y,0.5);\n\n\n        float centerrepeat = 2.0*PI/REFLECTION_PLANES;\n\n        float repeat = 2.0;\n\n        vec2 ipol = vec2(atan(uv.y,uv.x),length(uv));\n\n        ipol.x = abs(mod(ipol.x,centerrepeat)-centerrepeat*0.5);\n\n        uv = vec2(ipol.y*cos(ipol.x),ipol.y*sin(ipol.x));\n\n        vec4 bg1= vec4(palette((1.0-(ipol.y)+iTime*0.25),vec3(0.8, 0.5, 0.4),vec3(0.2, 0.4, 0.2),vec3(2.0, 1.0, 1.0),vec3(0.00, 0.25, 0.25)),1.0);\n\n        uv*=7.0;    \n\n        uv+=vec2(-iTime*xshift,iTime*yshift);\n\n        uv.x= abs(mod(uv.x,repeat)-repeat*0.5);\n\n        uv.y= abs(mod(uv.y,repeat)-repeat*0.5);\n\n        vec2 coord = vec2(uv.y,uv.x);\n        vec2 polar = vec2(atan(uv.y,uv.x),length(uv));\n\n        coord = mix(coord, polar,sin(iTime)*0.5+0.5);\n\n        vec3 pre1 = vec3(1.0,1.0,1.0)*polar.y*0.2;\n        vec3 pre2 = palette((1.0-(polar.y)+iTime*0.05),vec3(0.2, 0.2, 0.2),vec3(0.5),vec3(2.0, 1.0, 1.0),vec3(0.00, 0.33, 0.67));\n\n        float res = sin(6.0*coord.x+iTime*1.0) * (iMouse.x/iResolution.x) + (3.0 * iMouse.y/iResolution.y);\n            \n        vec3 col1 = mix(bg1.xyz,pre1,abs(abs(res-coord.y)-line));\n        vec3 col2 = mix(bg1.xyz,pre2,abs(abs(res-coord.y)-line));\n        vec3 col3  = texture( iChannel0, col1.x * 0.12 + coord*0.15 ).xyz;\n        col = smoothTransition(col1,col2, col3,iTime * 0.2);\n    }\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}