{"ver":"0.1","info":{"id":"lslBWl","date":"1498869629","viewed":350,"name":"Planckian locus blackbody","username":"Jodie","description":"Planckian locus blackbody","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["planckianlocusblackbody"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 linearToSrgb(const vec3 x){\n    return sqrt((-2.8450663e-1*x+1.2580714)*x-2.4727747e-3);\n}\n\nvec3 blackbody(float t){\n    // http://en.wikipedia.org/wiki/Planckian_locus\n\n    const vec4 vx = vec4( -0.2661239e9, -0.2343580e6, 0.8776956e3, 0.179910   );\n    const vec4 vy = vec4( -1.1063814,   -1.34811020,  2.18555832, -0.20219683 );\n    //vec4 vy = vec4(-0.9549476,-1.37418593,2.09137015,-0.16748867); //>2222K\n    float it = 1. / t;\n    float it2= it * it;\n    float x = dot( vx, vec4( it*it2, it2, it, 1. ) );\n    float x2 = x * x;\n    float y = dot( vy, vec4( x*x2, x2, x, 1. ) );\n    float iy = 1./y;\n    \n    // http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n    const mat3x2 xzTosrgb = mat3x2(\n         3.2404542,-0.4985314,\n        -0.9692660, 0.0415560,\n         0.0556434, 1.0572252\n    );\n    const vec3 yTosrgb = vec3(-1.5371385, 1.8760108, -0.2040259);\n    \n    vec3 srgb = vec2( x*iy, iy-(x*iy+1.) )* xzTosrgb + yTosrgb;\n\n    return max( srgb, 0. );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    fragColor.rgb = blackbody(1667.+uv.x*5000.)*0.3;\n    \n    fragColor.rgb=linearToSrgb(fragColor.rgb);\n}","name":"Image","description":"","type":"image"}]}