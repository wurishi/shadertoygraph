{"ver":"0.1","info":{"id":"4lK3RG","date":"1475306990","viewed":178,"name":"Hex Cycles","username":"rory618","description":"Shift around some hexagons","likes":6,"published":1,"flags":32,"usePreview":0,"tags":["2d","multipass"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0, fragCoord.xy/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define LEN 5.\n#define PI 3.14159\n#define sqr(x) (sin((x)*PI)/abs(sin((x)*PI)))\nvec2 toTri(vec2 z) {\n    return vec2(z.x/LEN-z.y/sqrt(3.)/LEN,z.y*2./sqrt(3.)/LEN);\n}\nvec2 fmTri(vec2 t) {\n    return LEN*vec2(t.x+t.y/2.,t.y*sqrt(3.)/2.);\n}\nfloat min4(vec4 m) {\n    return min(min(m.x,m.y),min(m.z,m.w));\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 px = fragCoord.xy-iResolution.xy/2.;\n    \n    vec2 t = toTri(px);\n    vec4 tftc = vec4(floor(t),ceil(t));\n    \n    vec2 a = fmTri(t-tftc.xy);\n    vec2 b = fmTri(t-tftc.zw);\n    vec2 c = fmTri(t-tftc.xw);\n    vec2 d = fmTri(t-tftc.zy);\n    if(length(a)>length(b)){a=b;}\n    if(length(a)>length(c)){a=c;}\n    if(length(a)>length(d)){a=d;}\n    \n    vec2 ct = t-toTri(a);\n        \n    \n    if(iFrame<1||iMouse.z>=.1){\n\t\tfragColor = vec4(vec3(1.-length(a)/LEN)*normalize(max(0.,.002*(500.-length(fmTri(ct))))*fragCoord.xyy/iResolution.xyy),1.);\n    } else {\n        vec2 os = vec2(0);\n        vec2 dir = vec2(0,1);\n        if(iFrame/3!=(iFrame+1)/3){\n            dir = vec2(1,0);\n        }\n        if((iFrame+1)/3!=(iFrame+2)/3){\n            dir = vec2(1,1);\n        }\n        float th = PI*2./3.*mod(float(iFrame),3.);\n        \n        os += LEN*sqr(dot(ct,dir)/10.+.501)*vec2(cos(th),sin(th))*exp2(mod(float(iFrame),2.));\n        \n        \n        \n        fragColor = vec4(1.-length(a)/LEN)*vec4(normalize(texture(iChannel0, fract((fmTri(ct)+iResolution.xy/2. + os)/iResolution.xy)).xyz),1.);\n    }\n}","name":"Buf A","description":"","type":"buffer"}]}