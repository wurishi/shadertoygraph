{"ver":"0.1","info":{"id":"slsfzX","date":"1651250293","viewed":88,"name":"WarpTexture","username":"AtomJon","description":"Warps the texture in a swirl around the cursor","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["texture"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec4 getBackground(vec2 uv)\n{\n    return texture(iChannel1, uv);\n    //return vec4(uv, 0., 1.);\n}\n\nbool isCoordInsideBrush( in vec2 fragCoord )\n{\n    float radius = getBrushRadius();\n    return fragCoord.x - radius < iMouse.x &&\n           fragCoord.x + radius > iMouse.x &&\n           fragCoord.y - radius < iMouse.y &&\n           fragCoord.y + radius > iMouse.y;\n}\n\nvec4 warpUVTexture(in vec2 uv )\n{\n    vec2 pos = (iMouse.xy/iChannelResolution[1].xy) * 0.8;\n\n    vec2 distortionUv = (uv - pos)*5.;\n    distortionUv = vec2(distortionUv.x, distortionUv.y - distortionUv.x * .8);\n    \n    vec4 distortion = texture(iChannel1, distortionUv);\n    \n    vec4 background = getBackground(uv);\n    \n    return distortion;\n    \n    /*return distortion * background / 2.;\n\n    vec2 distortedUv = uv * (distortion.r + distortion.g + distortion.b) / 3. ;\n    vec4 color = getBackground( distortedUv );\n    \n    return color;*/\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    bool isInsideBrush = isCoordInsideBrush(fragCoord);\n    \n    if (isInsideBrush)\n    {\n        fragColor = warpUVTexture(uv);\n    }\n    else\n    {\n        fragColor = getBackground(uv);\n    }\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec3 sdfCircle(vec2 uv, float r, vec2 pos)\n{\n    float x = uv.x - pos.x;\n    float y = uv.y - pos.y;\n    \n    float d = length(vec2(x, y)) - r;\n    \n    vec3 col = mix( vec3(0.), vec3(mix(1.,0.,pow(100., d))), step(d, 0.));\n    \n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n\n    fragColor = vec4( sdfCircle(uv, .5, vec2(.5, .5)), 1. );\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"float getBrushRadius(  )\n{\n    return 50.;\n}","name":"Common","description":"","type":"common"}]}