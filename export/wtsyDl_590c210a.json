{"ver":"0.1","info":{"id":"wtsyDl","date":"1593521693","viewed":380,"name":"Visible Spectrum with Blur","username":"izutionix","description":"using Desmos to fit the visible spectrum to a sinusoidal function raised to some power:\n[url]https://www.desmos.com/calculator/04nh8mqe9x[/url]\npress space to control the blur with your mouse","likes":16,"published":1,"flags":16,"usePreview":0,"tags":["spectrum","rainbow","wavelength","spectral"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 spectrum(float x, float blur)\n{\n    //x = .0025*x-.95; // uncomment to use wavelengths as input\n\tvec4 a = vec4(  1.,   .61,   .78,  .09),\n    \t o = vec4(-.57, -.404, -.176, -.14),\n    \t f = vec4(223.,  165.,  321., 764.) / blur,\n    \t c = a*pow(cos(x + o), f);\n    c.r += c.w;\n    return c.rgb;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 R = iResolution.xy;\n    vec2 uv = fragCoord/R;\n\n    vec3 col;\n    \n    float mouse = 2.;\n    if(iMouse.x!= 0.) mouse = R.y/iMouse.x;\n    \n    if(texelFetch( iChannel0, ivec2(32,2),0 ).x>.5) // space pressed\n    {\n        col = spectrum(1.*(uv.y - .5) + .42, mouse);\n    }\n\telse\n    {\n    \tuv = vec2(.5, .4) + ( (uv-.5)*.6 ); // zoom\n        \n        float g = (uv.x - .5)/(1. - uv.y) + .42;\n        col = spectrum(g, 2./uv.y - 1.);\n        \n        //col *= smoothstep(0., 1., 4.-abs(g-.5) ); // hide artifacts (not needed when zoomed in)\n        \n        float d = 1.-uv.y; col *= .2/(.1+d*d); // lighting\n    }\n    col = pow( col, vec3(.45) ); // gamma\n\n    fragColor = vec4(col, 1);\n}","name":"Image","description":"","type":"image"}]}