{"ver":"0.1","info":{"id":"3sdGzH","date":"1567792768","viewed":101,"name":"fishing","username":"foran","description":"fishing","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["fishing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsBSR3","filepath":"/media/a/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","previewfilepath":"/media/ap/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat map(vec3 p) \n{\n  float d = cos(p.x)+cos(p.y*.5)+cos(p.z)+cos(p.y*20.+iTime)*.1+texture(iChannel1,p.xy*.91).r*1.+texture(iChannel1,p.xy*.91).r*1.75;//    бочки\n  //float d = cos(p.x) + sin(p.y)  + 0.1 * sin(12.0 * p.z + 0.1)  + cos(p.z);//                        стены\n  return min (d, length(p.xy + 0.05 * vec2(0.2 + cos(p.z), - 8.0 + sin(p.z)) - 0.05)) ;//              рыба\n}\n\nvec3 rm(vec3 ro, vec3 rd)\n{\n  vec3 p = ro;\n  for (int i = 0 ; i < 25; ++i)\n   {\n      p += map(p) * rd * .8;\n    } \n  return p;\n}\n\nvec3 grad(vec3 p)\n{\n vec2 e = vec2(0.001, 0.0);\n  return normalize(vec3 \n (\n    map(p + e.xyy) - map(p - e.xyy),\nmap(p + e.yxy) - map(p - e.yxy),\nmap(p + e.yyx) - map(p - e.yyx)\n));\n}\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord)\n{\n  vec2 uv=vec2(fragCoord.x/iResolution.x,fragCoord.y/iResolution.y);\n  uv-=.5;\n  uv/=vec2(iResolution.y/iResolution.x,1);\n\n  vec3 ro = vec3(0.0, 1.0, 2.0 * iTime + 10.0);\n  vec3 rd = normalize(vec3(uv, 0.7 - length(uv)));\n\n  vec3 p = rm(ro, rd);\n\n  float s = exp(-distance(ro, p) * 0.1);\n  vec3 color = vec3(s);\n  vec3 n = grad(p);\n  color *= (n * .75 + 0.5).xzy;\n\n  vec3 p2 = rm(p + n * 0.1, reflect(rd, n));\n  vec3 n2 = grad(p2);\n   float s2 = exp(-distance(ro, p) * 0.1);\n  vec3 color2 = exp(-distance(ro, p) * 0.1) * (n2 * 0.5 + 0.5);\n  color = mix(color, color2, 0.1);\n  vec4 out_color=vec4(1.);\n  out_color = vec4(color, 1.0);\n  fragColor=vec4(out_color);\n}","name":"Image","description":"","type":"image"}]}