{"ver":"0.1","info":{"id":"WsfcRf","date":"1585212581","viewed":156,"name":"F4 Voronoi Edges","username":"elci","description":".","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 Hash2(vec2 p){\n    return fract(sin(vec2(\n\t\tdot(p,vec2(132.832, 242.391)),\n\t\tdot(p,vec2(269.552, 183.309))\n\t)) * 132.5473453);\n}\nfloat VoronoiEdgeF3( in vec2 p ){\n\tvec2 f = fract(p);\n    p = floor(p);\n\tvec3[4] c;\n\tc[0].z = 4.0;\n    vec2 o;\n\tfor( o.x = -1.0; o.x <= 1.0; o.x++ )\n\tfor( o.y = -1.0; o.y <= 1.0; o.y++ ){\n\t\tvec2 h = Hash2(p+o);\n\t\tvec2 v = f - (o+h);\n\t\tfloat d = length( v );\n\t\tif( d < c[0].z ){\n\t\t\tc[3] = c[2];\n\t\t\tc[2] = c[1];\n\t\t\tc[1] = c[0];\n\t\t\tc[0] = vec3( v, d );\n\t\t}\n\t\telse if( d < c[1].z ){\n\t\t\tc[3] = c[2];\n\t\t\tc[2] = c[1];\n\t\t\tc[1] = vec3( v, d );\n\t\t}\n\t\telse if( d < c[2].z ){\n\t\t\tc[3] = c[2];\n\t\t\tc[2] = vec3( v, d );\n\t\t}\n\t\telse if( d < c[3].z ){\n\t\t\tc[3] = vec3( v, d );\n\t\t}\n\t}\n    float e1 = dot((c[0].xy + c[1].xy)/2.0, normalize(c[1].xy-c[0].xy));\n    float e2 = dot((c[0].xy + c[2].xy)/2.0, normalize(c[2].xy-c[0].xy));\n    float e3 = dot((c[0].xy + c[3].xy)/2.0, normalize(c[3].xy-c[0].xy));\n\treturn min(e1,min(e2,e3));\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = fragCoord.xy/iResolution.y;\n\tuv.y += iTime*0.2;\n    uv *= 3.0;\n\n\tfloat d = VoronoiEdgeF3(uv);\n\tfloat edge = 1.0 - smoothstep(0.02,0.05,d);\n\n\tvec3 col = vec3(0.8,0.8,1.0) * edge;\n\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}