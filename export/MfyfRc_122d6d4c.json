{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"#define R iResolution.xy\n\n#define rot(a) mat2(cos(a),sin(a),-sin(a),cos(a))\nvec4 hash(vec4 p4)\n{\n\tp4 = fract(p4  * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33+cos(iTime));\n    return fract((p4.xxyz+p4.yzzw+cos(iTime))*p4.zywx);\n}\nfloat box( vec3 p, vec3 b )\n{\n  vec3 q = abs(p) - b;\n  return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0);\n}\n#define light vec3(.1,0,-.475)\n#define light2 vec3(-0.15,0,-.6)\n#define light3 vec3(0.0,.1,-.55)\n#define light4 vec3(0.0,-.1,-.6)\nfloat map (vec3 p) {\n    float d = length(p-light)-.05;\n    d = min(length(p-light2)-.01,d);\n    d = min(length(p-light3)-.02,d);\n    d = min(length(p-light4)-.02,d);\n    p.xy += .2;\n     \n    \n   \n    for (float i = 0.; i < 9.; i++) {\n    p.yx *= rot(iTime);\n        p = abs(p)-.15*exp2(-.5*i);\n \n      \n        d = min(d,box(p,vec3(.01,.01,.5)*exp(-.3*i))-.001);\n    }\n    return d;\n    \n}\nvec3 normal(vec3 p) {\n    vec2 e = vec2(1e-3,0);\n    float m = map(p);\n    return normalize(vec3(\n        map(p+e.xyy)-m,\n        map(p+e.yxy)-m,\n        map(p+e.yyx)-m\n    ));\n}\nvec3 palette( float t ) {\n    vec3 a = vec3(0.5, 0.5, 0.5);\n    vec3 b = vec3(0.5, 0.5, 0.5);\n    vec3 c = vec3(1.0, 1.0, 1.0);\n    vec3 d = vec3(0.263,0.416,0.557);\n\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\nvoid mainImage(out vec4 Q, in vec2 U){\n    vec4 h = hash(vec4(U,0,1));\n  vec2 uv = (U * 2.0 - iResolution.xy) / iResolution.y;\n    vec3 p = vec3(0,0,-1.2);\n    vec3 d = normalize(vec3(2.*(U+h.xy-.5*R)/R.y,4.));\n vec3 col = palette(length(uv) +.4 + iTime*.4);\n\n    for (float i = 0.; i < 50.; i++) {\n        float m = map(p);\n         \n        p += d*max(abs(m),.001);\n        if (m>10.)break;\n        if (length(p-light)<.06) {Q += 3.*vec4(3,2,1,4);break;}\n        if (length(p-light2)<.015) {Q += 10.*vec4(1,2,3,4);break;}\n        if (length(p-light3)<.025) {Q += 5.*vec4(3,1,2,4);break;}\n        if (length(p-light4)<.025) {Q += 7.*vec4(1);break;}\n        if (m < .001) {\n            vec3 n = normal(p);\n            vec3 h = hash(vec4(p.xy*100.,i,iFrame)).xyz*2.-1.;\n            \n            if (h.x<-.5) d = reflect(d,n);\n            else d = normalize(d-.2*n);\n            p += .002*d;\n             Q*=vec4(col*0.12005,1.);\n        }\n       \n\n    }\n\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MfyfRc","date":"1734273704","viewed":105,"name":"work process ","username":"nayk","description":"source https://www.shadertoy.com/view/mtyGWy https://www.shadertoy.com/view/lfyBRc","likes":3,"published":3,"flags":0,"usePreview":0,"tags":["color"],"hasliked":0,"parentid":"","parentname":""}}