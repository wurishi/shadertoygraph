{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"video","id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"#define FILTER_SIZE 3\n#define COLOR_LEVELS 7.0\n#define EDGE_FILTER_SIZE 3\n#define EDGE_THRESHOLD 0.05\n\nvec4 edgeFilter(in int px, in int py, in vec2 fragCoord)\n{\n\tvec4 color = vec4(0.0);\n\t\n\tfor (int y = -EDGE_FILTER_SIZE; y <= EDGE_FILTER_SIZE; ++y)\n\t{\n\t\tfor (int x = -EDGE_FILTER_SIZE; x <= EDGE_FILTER_SIZE; ++x)\n\t\t{\n\t\t\tcolor += texture(iChannel0, (fragCoord.xy + vec2(px + x, py + y)) / iResolution.xy);\n\t\t}\n\t}\n\n\tcolor /= float((2 * EDGE_FILTER_SIZE + 1) * (2 * EDGE_FILTER_SIZE + 1));\n\t\n\treturn color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\t\n\t// Shade\n\tvec4 color = vec4(0.0);\n\t\n\tfor (int y = -FILTER_SIZE; y <= FILTER_SIZE; ++y)\n\t{\n\t\tfor (int x = -FILTER_SIZE; x <= FILTER_SIZE; ++x)\n\t\t{\n\t\t\tcolor += texture(iChannel0, (fragCoord.xy + vec2(x, y)) / iResolution.xy);\n\t\t}\n\t}\n\n\tcolor /= float((2 * FILTER_SIZE + 1) * (2 * FILTER_SIZE + 1));\n\t\n\tfor (int c = 0; c < 3; ++c)\n\t{\n\t\tcolor[c] = floor(COLOR_LEVELS * color[c]) / COLOR_LEVELS;\n\t}\n\t\n\t// Highlight edges\n\tvec4 sum = abs(edgeFilter(0, 1, fragCoord) - edgeFilter(0, -1, fragCoord));\n\tsum += abs(edgeFilter(1, 0, fragCoord) - edgeFilter(-1, 0,fragCoord));\n\tsum /= 2.0;\t\n\n\tif (length(sum) > EDGE_THRESHOLD)\n\t{\n\t\tcolor.rgb = vec3(0.0);\t\n\t}\n\t\n\tfragColor = color;\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lss3R8","date":"1362796033","viewed":823,"name":"Cel Shading","username":"Glass","description":"Attempt at cel shading without knowing the light position nor normals.","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["celshading"],"hasliked":0,"parentid":"","parentname":""}}