{"ver":"0.1","info":{"id":"ttcSWN","date":"1596551910","viewed":137,"name":"asciiviisiion","username":"ufffd","description":"ascii vision","likes":0,"published":3,"flags":0,"usePreview":0,"tags":["ascii"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 charsheet_res = vec2(16.,16.);\n    float charsheet_num = charsheet_res.x * charsheet_res.y;\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    // downsample\n    vec2 sample_uv = uv;\n    sample_uv *= charsheet_res;\n    sample_uv = floor(sample_uv);\n    sample_uv /= charsheet_res;\n\tvec3 col = texture(iChannel1,sample_uv).rbb;\n    // map color to character\n    float brightness = (col.r + col.g + col.b) / 3.;\n    float ascii = floor(brightness * charsheet_num);\n    vec2 ascii_pos = vec2(\n\t\tfloor(ascii / charsheet_res.x),\n        mod(ascii, charsheet_res.x)\n    );\n    // map screen uv to ascii uv\n    vec2 sub_uv = mod(uv * charsheet_res, 1.);\n    vec2 ascii_uv = sub_uv + ascii_pos;\n    ascii_uv /= charsheet_res;\n    vec3 ascii_col = texture(iChannel0,ascii_uv).rgb;\n    ascii_col = vec3(1.-step(ascii_col.r,0.5));\n    // fragColor = vec4(ascii_col,1.);return;\n    // pixel color\n    ascii_col *= texture(iChannel1,sample_uv).rgb;\n    col = ascii_col;\n    \n    \n    // mix original video back in\n    vec3 input_col = texture(iChannel1,uv).rgb;\n    input_col.g = clamp(input_col.g,0.,input_col.r+input_col.b);\n    col = mix(input_col,col,0.8);\n    // Output to screen\n    \n    // col = vec3(ascii / 256.); // show character code per square\n    // col = texture(iChannel0,uv).rgb; // show character sheet\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}