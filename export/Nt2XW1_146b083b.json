{"ver":"0.1","info":{"id":"Nt2XW1","date":"1627579810","viewed":117,"name":"Spiral ,log, arch, ~hyperbolic","username":"TLC123","description":"single spiral SDF\nLogarithmic exponent >0\nArchimedes exponent =0\nhyperbolic exponent <0    Bad distance field in center\n \n","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["2d","sdf","spiral","archimedes","hyperbolic","log"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float  smin( float a, float b,float k )\n{\n    float h =  clamp( 0.5+0.5*(b-a)/k, 0.0, 1.0 ) ;\n    return mix( b, a, h ) - k*h*(1.0-h);\n}\n\n// handle exponatiated radius\nfloat spiradius(float a,float xpnt)\n{\n float fx = xpnt<0.?\n pow(max(0.,1.-a),1./abs(min(-1.,xpnt-1.) )): pow(max(0.,1.-a),max(1.,xpnt+1.))   ;\n return fx;\n}\n\n//SDF for many types of spiral\nfloat spiral (vec2 p,float radius ,float heigth,float turns ,float xpnt, float start_angle)\n{\n// angle of p \nfloat a0 =mod(1.+atan(p.y,p.x)/6.28318 -start_angle/6.28318 ,1.);\nfloat d=1./0.;\n\n// step trough turns passing angle a0 \n//calculate spiral radius \n//find distande to each crossing\nfor (float i=0.;i<=turns;i++)\n{\n d=min(d , abs(length(p)- spiradius(a0/turns+(i/turns),xpnt)*radius)); \n}\n// spiral outer termination\nd=min(d ,  length(p-vec2(cos(start_angle),sin(start_angle))*radius) ); \n\n// clean center termination in case hyperbolic problems\nd=min(d,length( p));\n// the litte knob at centers\n  d=smin(d,length( p)-radius*0.025,radius*0.1);\nreturn d;\n}\n\n\n\n// sine bob\nfloat sb(float t){\nreturn 1.+sin(iTime*t);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // normalized pixel coordinates\n    vec2 p =   (fragCoord*2.0-iResolution.xy)/iResolution.y;\n     \n     \n \n    float d=spiral(p, .1+.5*sb(.1),0.,1.+2.*sb(1./3.),-1.+2.682*sb(.378) ,iTime);\n\n    // coloring\n    vec3 col = vec3(1.0) - sign(d)*vec3(0.1,0.4,0.7);\n\tcol *= 1.0 - exp(-2.0*abs(d));\n\tcol *= 0.8 + 0.2*cos(128.0*abs(d));\n\tcol = mix( col, vec3(1.0), 1.0-smoothstep(0.0,0.015,abs(d)) );\n \n\n\tfragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}