{"ver":"0.1","info":{"id":"NljGRV","date":"1639025689","viewed":127,"name":"MathLab","username":"yunhai","description":"my mathmap visualization template\nnow dragable (try to change dragVec in Common tab)\n\n","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["lab"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n//-------------------experiment-----------------\nfloat map(float x)\n{\n\n    return 1./(1.+exp(-x));//sigmoid\n}\n//---------------------DrawElements-------------------\nfloat spot(vec2 p,vec2 o){return SL(length(p-o)*.5);}\nfloat lineSeg(vec2 p,vec2 s,vec2 e){vec2 sp=p-s,se=e-s;\n      return SL(length(p-clamp(dot(sp,se)/dot(se,se),0.,1.)*se-s));}\nfloat lineRay(vec2 p,vec2 o,vec2 d){return SL(length(p-max(dot(p-o,d),0.)*d+o));}\nfloat line(vec2 p,vec2 o,vec2 d){return SL(length(p-(dot(p-o,d)*d+o)));}\n//----------------------------------------------\nvec4 cartesian(vec2 uv)\n{\n    vec3 col=vec3(0.);\n    float a=0.;\n    float msp=MSI,lhlw=HLW/2.;\n    a=SS(lhlw+2.*PIXW,lhlw-PIXW,abs(uv.x-round(uv.x/msp)*msp))+\n      SS(lhlw+2.*PIXW,lhlw-PIXW,abs(uv.y-round(uv.y/msp)*msp));\n    col+=vec3(a)*.5;\n    col=mix(col,vec3(0.,1.,0.),line(uv,vec2(0.),vec2(1.,0.)));\n    col=mix(col,vec3(0.,1.,0.),line(uv,vec2(0.),vec2(0.,1.)));\n    return vec4(col,a);\n}\n\nvoid mainImage( out vec4 O, in vec2 C )\n{\n    vec2 uv=((C-.5*iR)-dragVec*(iM.xy-.5*iR))*PIXW;\n    float x=uv.x,y=uv.y,t=iTime*.5;\n    O=cartesian(uv); \n    \n    float f=map(x);\n    O=mix(O,vec4(.4,.7,1.,1.),\n         SL(abs(f-y)*LWF(f)));\n   \n    //this center point is used to find origin when dragVec is enable.\n    O.rgb=mix(O.rgb,vec3(3.,8.,8.),spot(C*PIXW,iR*.5*PIXW));\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"//Complex version:https://www.shadertoy.com/view/NttXW8\n#define iR iResolution.xy\n#define iM iMouse\n#define iT iTime\n#define PIXW (CANVAS_WIDTH/iR.x)\n#define SS(a,b,t) smoothstep(a,b,t)\n#define LW (3.*PIXW)\n#define HLW (LW*.5)\n#define SL(d) smoothstep(HLW+PIXW,HLW-PIXW,d)\nconst float PI=3.14159265;\n/*-----------DrawingSettings-----------*/\nconst float CANVAS_WIDTH=20.;\nconst float MSI=1.;//mesh space interval\n/*-----------input-----------*/\n//zero means lock\nconst vec2 dragVec=-100.*vec2(0.,0.);\n/*-----------draw utilities-----------*/\n//Line Width Fixer\n//reference to https://www.shadertoy.com/view/7l33D4\n#define LWF(y) (normalize(vec2(PIXW,dFdx(y))).x)\n\n//Color Palette from iq\nvec3 palette(float t)\n{\n    t*=1.732;\n    return vec3(.5)+vec3(.5)*cos(2.*PI*(vec3(.71,.31,.21)*t+vec3(.2,.4,.6)));\n}\n/*-----------2x2mats-----------*/\nmat2 mrot(float a)\n{float c=cos(a),s=sin(a);\nreturn mat2(c,s,-s,c);}\nmat2 mscl(float r)\n{return mat2(r,0,0,r);}\nmat2 minv(mat2 m)\n{return inverse(m);}","name":"Common","description":"","type":"common"}]}