{"ver":"0.1","info":{"id":"XlKyRV","date":"1536948668","viewed":238,"name":"EDO KIRIKO WORLD","username":"tatsunoru","description":"Edo Kiriko is a glass craft that has been handed down in Tokyo.","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["world","edo","kiriko"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec2 supershapes(vec4 n, float phi){\n\tfloat delta = 1.0;\n\tfloat m = n.x * phi * 0.25;\n\tfloat t1 = pow(abs(cos(m)), n.z);\n\tfloat t2 = pow(abs(sin(m)), n.w);\n\tfloat radius = 1.0 / pow(t1 + t2, 1.0 / n.y);\n\treturn vec2(cos(phi), sin(phi)) * radius * delta;\n}\n\nvec2 supershapes(vec4 n, vec2 coord){\n\treturn supershapes(n, atan(coord.y, coord.x));\n}\n\nfloat supershapesDistance(vec4 n, vec2 coord){\n\treturn distance(coord, supershapes(n, coord));\n}\n\nvec2 toOrigin(vec2 uv){\n\treturn (uv - 0.5) * 2.0;\n}\n\nvec2 fromOrigin(vec2 uv){\n\treturn uv * vec2(0.5, -0.5) + 0.5;\n}\n\nfloat hexLength(vec2 pos){\n\tvec2 q = abs(pos);\n\treturn max(q.x, max(q.x+q.y*0.57735, q.y*1.1547));\n}\n\nvec2 modEx(vec2 pos, vec2 b){\n    return toOrigin(mod(pos, b) / b);\n}\n\nfloat modNormalize(float pos, float b){\n    return mod(pos, b) / b;\n}\n    \nfloat noise(vec3 p){\n\tvec3 i = floor(p);\n\tvec4 a = dot(i, vec3(1.0, 57.0, 21.0)) + vec4(0.0, 57.0, 21.0, 78.0);\n\tvec3 f = cos((p-i) * acos(-1.0))*(-0.5) + 0.5;\n\ta = mix(sin(cos(a) * a),sin(cos(1.0 + a)*(1.0 + a)), f.x);\n\ta.xy = mix(a.xz, a.yw, f.y);\n\treturn mix(a.x, a.y, f.z);\n}\n\nfloat rengaHex(vec2 pos, float gridScale){\n    vec2 grid = vec2(gridScale, gridScale);\n    vec2 halfgrid = grid * 0.5;\n    \n\tvec2 p1 = modEx(pos, grid);\n\tvec2 p2 = modEx(pos + halfgrid, grid);\n    \n    float d1 = supershapesDistance(vec4(8.0, 0.6, 0.2, 0.2), p1);\n    float d2 = supershapesDistance(vec4(4.0, 0.3, 0.2, 0.2), p2);\n    \n    return min(d1, d2);\n}\n    \nvec2 sphereUV(vec2 pos){\n  \tfloat r = dot(pos, pos);\n\tfloat f = (1.0 - sqrt(abs(1.0 - r))) / r;\n\treturn pos * f;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec4 ret = vec4(0.0);\n    \n    vec2 uv = (fragCoord.xy - iResolution.xy * 0.5) / iResolution.yy * mix(0.5, 8.0, (1.0 + sin(iTime * 0.3)) * 0.5);   \n    \n    float nz = noise(vec3(0.0, 0.0, iTime * 0.2));\n    float nz2 = noise(vec3(1.0, 1.0, iTime * 0.2));\n    \n    float hexField = rengaHex(sphereUV(uv * 0.94)+vec2(nz, nz2), 0.15);\n    float hexFIeldRepat = modNormalize(hexField, 0.4);\n    \n    ret -= vec4(0.9, 0.5, 0.0, 1.0) * hexFIeldRepat;\n    ret += smoothstep(0.4, 0.6, texture(iChannel0, sphereUV(uv  + vec2(hexFIeldRepat-0.5, hexFIeldRepat-0.5)))).xxxx * 0.75 + 0.25;\n    \n \tfragColor = ret;   \n}\n\n","name":"Image","description":"","type":"image"}]}