{"ver":"0.1","info":{"id":"XfKSWW","date":"1720413874","viewed":86,"name":"gecko","username":"shadertoyjiang","description":"b","likes":18,"published":1,"flags":0,"usePreview":0,"tags":["escher","gecko"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// 2024年5月8日\n// 壁虎\n// http://wxyhly.github.io/archives/polyhedral4ds/\n\n#define rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define PI 3.14159265358979\n\nvec2 cent6(vec2 p)\n{\n        vec2 c = vec2(.866,1),  v = p / c, i = round(v), f;\n        i.y += mod(i.x,2.)*(step(0., v.y-i.y)-.5);\n        f = abs(v-i);\n        i += step(1., f.y + 1.5*f.x)*sign(v-i)*vec2(1,.5);\n        return i*c;\n}\n\nvec2 frcRotHex(vec2 u)\n{\n        vec2 c = cent6(u), f = u -c;\n        c.x /= .866;\n        c.x = mod(abs(round(c.x)),2.);\n        //if(abs(c.x-1.)<1e-5)c.y-=1.5;\n        if(c.x==1.)c.y-=1.5;\n        \n        \n        float a = mod(floor(c.y), 3.)*2./3.*PI;\n        return rot(a)*f;\n}\n\n//float dln(in vec2 a, in vec2 b, in vec2 p){b-=a; p-=a;float h = clamp(dot(p,b)/dot(b,b), 0., 1.);return length(p - b * h);}\n\nvoid mainImage(out vec4 O, vec2 U)\n{\n        float v[] = float[]( // 2024年5月8日22时19分12秒\n               -.289,       .5,    -.158,     .236,    -.217,     .143, \n                -.49,     .154,    -.577,       .0,     -.56,    -.036, \n               -.335,    -.026,     -.18,    -.048,    -.077,    -.192, \n               -.206,    -.155,    -.365,    -.152,    -.449,    -.222, \n               -.289,      -.5,    -.306,     -.31,    -.206,    -.328, \n               -.151,     -.38,    -.007,    -.432,     .026,      -.5, \n                .289,      -.5,     .251,      -.5,     .273,    -.317, \n                .417,    -.233,     .458,    -.192,     .577,       .0, \n                  .4,       .0,     .295,    -.107,     .218,    -.118, \n                .188,     .059,     .472,     .202,     .289,       .5, \n                .225,     .409,     .281,      .35,     .281,     .276, \n                .089,     .243,     .026,     .339,     .118,       .5, \n               -.114,    -.579,     .458,      .25,     .443,     .413  );\n        vec2 z[39];\n        for(int i;i<39;i++)z[i]=vec2(v[i*2],v[i*2+1]);    \n        vec2 R = iResolution.xy,\n             u = 1.5 *(U+U +.1- R) / R.y-iTime/2.,\n             f = frcRotHex(u);\n        \n        float d = 1e8;\n        #define F(a,b) for(int i=a;i<b;i++)d=min(d, dln(z[i],z[i+1], f));\n        F(0,3) F(4,11) F(12,17)\n        F(18, 22)   F(23, 28)  F(29, 35)\n        d=min(d, dln(z[12],z[36], f));\n        d=min(d, dln(z[37],z[28], f));\n        d=min(d, dln(z[37],z[38], f));\n        d = 25.*exp(-190.*d);\n        //O = .5-vec4(d,d,.5,1);\n        O = vec4(d);O =clamp(O,0.,1.);\n        if(U.x<R.x*2./3.)drawbk(O, f);\n        \n}\n\n\n\n\n\n\n\n\n\n\n\n\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"\n\n// 2024年5月9日01时22分23秒\n// common \n\nfloat dt[] = float[](\n                .577,       .0,     .433,      .25,     .289,       .5, \n                  .0,       .5,    -.289,       .5,    -.433,      .25, \n               -.577,       .0,    -.433,     -.25,    -.289,      -.5, \n                  .0,      -.5,     .289,      -.5,     .433,     -.25 );\nvec2 v[20];\n\n// 2024年5月9日02时03分46秒\nfloat dln(in vec2 a, in vec2 b, in vec2 p){b-=a; p-=a;float h = clamp(dot(p,b)/dot(b,b), 0., 1.);return length(p - b * h);}\n\n\nfloat distx(vec2 w)\n{\n        vec2 u = abs(w), n=vec2(.5, -.866);\n        if(dot(u,n)<0.)u=reflect(u,n);\n        u.y = abs(u.y);\n\n\n\n        float d = 1e8;\n        for(int i;i<20;i++)\n                if(i<12)v[i]=vec2(dt[i*2],dt[i*2+1]);\n                else    v[i]=v[i-12];\n        \n        // 愉2024年5月9日01时48分38秒\n        for(int j=1;j<7;j++)\n        for(int i=j+6;i<j+12;i++)\n                d = min(d, dln(v[i],v[j], u));\n        for(int j=7;j<13;j++)\n        for(int i=j+1;i<7;i++)\n                d = min(d, dln(v[i],v[j], u));\n        return d;\n}\n\n\nfloat dist6(vec2 u)\n{\n        u = abs(u);\n        vec2 n = vec2(-.866, .5);\n        if(dot(u, n)<0.)u = reflect(u, n);\n        u = abs(u);\n        u.y -= .5;\n        u.y = min(u.y,0.);\n        return abs(u.y);\n}\n\nvoid drawbk(inout vec4 O, vec2 v)\n{\n        if(O.x>.1)return;//2:24\n        float d1 = dist6(v);\n        if(O.x<.1)O+=clamp(.8-2.*exp(-1e2*abs(d1-.03)),0.,1.);O =clamp(O,0.,1.);\n        if(abs(d1)<.03)return;\n        \n        float d2 = distx(v);\n        O+= -.9 +clamp(3.*exp(-3e2*abs(d2-.01)), 0., 1.);O =clamp(O,0.,1.);\n        if(abs(d2)<.01)return;\n        O=vec4(.2);\n        \n}\n\n\n\n\n\n\n\n/*\n// 2024年5月9日01时13分17秒\n// 2024年5月9日01时22分23秒\n// common \n\nfloat dist6(vec2 u)\n{\n        u = abs(u);\n        vec2 n = vec2(-.866, .5);\n        if(dot(u, n)<0.)u = reflect(u, n);\n        u = abs(u);\n        u.y -= .5;\n        u.y = min(u.y,0.);\n        return abs(u.y);\n}\n\nvoid drawbk(inout vec4 O, vec2 v)\n{\n        float d1 = dist6(v);\n        if(O.x<.1)O += .5-2.*exp(-300.*abs(d1-.03));\n        if(abs(d1)<.03)return;\n}\n\n*/\n\n\n","name":"Common","description":"","type":"common"}]}