{"ver":"0.1","info":{"id":"csyXzd","date":"1681429661","viewed":71,"name":"Sad Schroedinger's","username":"graygoose","description":"A sad field system.\n\nTODO: \n-Everything\n-Obstacles.\n-FIX laplacian","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["field","physics","laplacian","complexfunction"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 Q, in vec2 U) {Q=B;}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define K 10.\n\nvoid evolveWave(inout vec4 wave, in vec2 U) {\n    vec4 L = lap(iChannel0, UV, R.xy) - wave;\n    wave -= K * vec4((wave.z + L.x),\n                     (wave.x + L.y),\n                     (wave.y + L.z),\n                     (wave.w + L.w));\n}\n\nvoid addDynamics(inout vec4 wave, in vec2 U) {\n    vec2 center = R.xy * 0.5;\n    float distFromCenter = length(U - center) / length(center);\n    wave *= 1.0 + 0.2 * sin(distFromCenter * 3.14159);\n\n    float shiftFactor = 0.5;\n    wave.x += shiftFactor * sin(wave.y * 2.0 * 3.14159);\n    wave.y += shiftFactor * cos(wave.x * 2.0 * 3.14159);\n    wave.z += shiftFactor * sin(wave.w * 2.0 * 3.14159);\n    wave.w += shiftFactor * cos(wave.z * 2.0 * 3.14159);\n}\n\n\nvoid mainImage(out vec4 Q, in vec2 U) {\n    vec4 wave = A;\n\n    if (iFrame < 1 || iMouse.z > 0.) {\n        wave = vec4(0.);\n        wave.zw = vec2(1.0);\n        wave.xy = vec2(-0.1 * cos(0.1 * length(U - 0.5 * R.xy)), \n                       0.1 * sin(0.1 * length(U - 0.5 * R.xy)));\n    }\n\n    evolveWave(wave, U);\n    //addDynamics(wave, U);\n    Q = normalize(wave);\n}\n","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"\nvec4 toColor(in vec4 wave) {\n    vec3 color = vec3(wave.x * 0.5 + 0.5, wave.y * 0.5 + 0.5, wave.z * 0.5 + 0.5);\n    float combinedColor = color.r + color.g + color.b;\n\n    if (combinedColor > 1.5) {\n        return vec4(color, 1.0); \n    } else {\n        return vec4(color.yzx, 1.0); \n    }\n}\n\nvoid mainImage(out vec4 Q, in vec2 U) {Q=(A);}\n","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"// shadertoy common\n#define R iResolution\n#define UV (U/R.xy)\n#define A texture(iChannel0, UV)\n#define B texture(iChannel1, UV)\n#define C texture(iChannel2, UV)\n#define D texture(iChannel3, UV)\n\n// math common\nvec2 wrap(in vec2 p, in vec2 res) {\n    vec2 wrapped = mod(p, res);\n    //vec2 stepWrap = step(wrapped, vec2(0.0));\n    //wrapped += stepWrap * res;\n    \n    // Smooth interpolation\n    //vec2 smoothed = mix(wrapped, p, smoothstep(0.0, 1.0, stepWrap));\n    return wrapped;\n}\n\nvec4 lap(in sampler2D tex, in vec2 p, in vec2 res) {\n    vec2 dt = 1. / res.xy;\n    vec4 sum = -4.0 * texture(tex, p);\n    sum += texture(tex, p + vec2(dt.x, 0.0));\n    sum += texture(tex, p - vec2(dt.x, 0.0));\n    sum += texture(tex, p + vec2(0.0, dt.y));\n    sum += texture(tex, p - vec2(0.0, dt.y));\n    return sum;\n}\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"\nvec4 toColor(in vec4 wave) {\n    vec3 color = vec3(wave.x * 0.5 + 0.5, wave.y * 0.5 + 0.5, wave.z * 0.5 + 0.5);\n    float combinedColor = color.r + color.g + color.b;\n\n    if (combinedColor > 1.5) {\n        return vec4(color, 1.0);\n    } else {\n        return vec4(color.yzx, 1.0); \n    }\n}\n\nvoid mainImage(out vec4 Q, in vec2 U) {Q=(A);}\n","name":"Buffer B","description":"","type":"buffer"}]}