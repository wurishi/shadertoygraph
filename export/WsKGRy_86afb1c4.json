{"ver":"0.1","info":{"id":"WsKGRy","date":"1571670752","viewed":410,"name":"Old School Fire Effect","username":"tylerbata","description":"Old school fire effect","likes":5,"published":1,"flags":32,"usePreview":0,"tags":["fire"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec3 fireGrad(float x)\n{\n    vec3 a = vec3(0.0,0.0,0.0);\n    vec3 b = vec3(1.0,0.0,0.0);\n    vec3 c = vec3(1.0,1.0,0.0);\n    vec3 d = vec3(1.0,1.0,1.0);\n    vec3 col;\n    col = mix(a,b,smoothstep(0.0,0.6,x));\n    col = mix(col,c,smoothstep(0.6,0.9,x));\n    col = mix(col,d,smoothstep(0.9,1.0,x));\n    \n    return col;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    float fire = texture(iChannel0, uv).r;\n    \n    \n    \n    \n    \n    vec3 col = fireGrad(fire*2.2);\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float random( uint n ) \n{\n    // integer hash copied from Hugo Elias\n\tn = (n << 13U) ^ n;\n    n = n * (n * n * 15731U + 789221U) + 1376312589U;\n    return float( n & uvec3(0x7fffffffU))/float(0x7fffffff);\n}\n\nfloat sdCircle(vec2 p, float r)\n{\n    return length(p) - r;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 mouse = iMouse.xy/iResolution.xy;\n    uvec2 p = uvec2(fragCoord);\n    vec2 pix = 1.0 / iResolution.xy;\n    \n    float lastVal = \n        \ttexture(iChannel0, uv - vec2(0.0, pix.y)).r + \n        \ttexture(iChannel0, uv - vec2(0.0, pix.y*2.0)).r +\n        \ttexture(iChannel0, uv - vec2(pix.x, pix.y)).r +\n        \ttexture(iChannel0, uv - vec2(-pix.x, pix.y)).r;\n    lastVal *= 0.249;\n        \n    \n    \n    \n    vec4 col = vec4(lastVal);\n    if(uv.y < pix.y || sdCircle(uv - mouse, 0.04) < 0.0)\n    {\n        float val = random( p.x + 1920U*p.y + (1920U*1080U)*uint(iFrame) );\n        col = vec4(val, val, val, 1.0);\n    }\n    \n    fragColor = col;\n}","name":"Buffer A","description":"","type":"buffer"}]}