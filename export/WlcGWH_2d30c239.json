{"ver":"0.1","info":{"id":"WlcGWH","date":"1576106850","viewed":218,"name":"Visualiseur de Spectre","username":"Hatokuro","description":"visualiseur de spectre à l'aide de barre.","likes":3,"published":1,"flags":64,"usePreview":0,"tags":["musicspectre"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4tBGzz","filepath":"https://soundcloud.com/skyriser/vision-of-misty-rain-deep","previewfilepath":"https://soundcloud.com/skyriser/vision-of-misty-rain-deep","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define NBR_BAR 100\n#define LARGEUR_SPECTRE 0.400\n\nvec4 bar(vec2 uv,vec2 pos,float width,float height)//hight valeur normalize, width valeur pixeliser\n{\n\tif(uv.x > pos.x/iResolution.x - (width/2.0) /iResolution.x  && uv.x < pos.x/iResolution.x + (width/2.0) /iResolution.x &&\n       uv.y > 0.0  && uv.y < pos.y/iResolution.y + (height))\n \t{\n        return vec4(uv.y,0.6+uv.y,0.6+uv.y,1.0);\n \t}\n    else\n    {\n     \treturn vec4(0.0,0.0,0.0,0.0);   \n    }\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    float largeur = iResolution.x / float(NBR_BAR);\n    \n    vec4 valeur[NBR_BAR];\n    for(int i=0;i<NBR_BAR;i++)\n    {\n        valeur[i]= texture(iChannel0,vec2((LARGEUR_SPECTRE/float(NBR_BAR))*float(i),0.25));\n    }\n\n    // Time varying pixel color\n    vec4 background = vec4(0.2,0.0,0.2,1.0);\n    \n    vec4 element = vec4(0.0,0.0,0.0,1.0);\n    for(int i=0;i<NBR_BAR;i++)\n    {\n        element += bar(uv,vec2(float(i)*(largeur)+largeur/2.0,0.0),largeur,pow(valeur[i].x,3.0)/1.1);\n    }\n    \n    vec4 final;\n    \n    // ne pas mélanger le fond avec les barres;\n    if(element.a == 0.0){\n     final = background;\n    }\n    else\n    {\n        final = background + element;\n    }\n\n    // Output to screen\n    fragColor = final;\n}","name":"Image","description":"","type":"image"}]}