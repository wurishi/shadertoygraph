{"ver":"0.1","info":{"id":"4fVyzt","date":"1732251019","viewed":214,"name":"Infinite maze 9","username":"jarble","description":"An infinite procedural maze or dungeon using [url=https://www.shadertoy.com/view/Mc23RW]this maze pattern[/url].","likes":7,"published":3,"flags":8,"usePreview":0,"tags":["maze","dungeon","bitwise","labyrinth","roguelike"],"hasliked":0,"parentid":"M32cDh","parentname":"Infinite maze 4"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"bool labyrinth(ivec2 I,int c) {\n\tivec2 J =\n        I & 1\n    ;\n    return\n        bool((J.x ^ J.y) & (I.x+c ^ I.y+c) % c ^ J.x)\n        //!bool((J.x-c ^ J.y-c) & (I.x+c ^ I.y+c) % c ^ J.x)\n\n        //!bool((J.x+c ^ J.y+c) & (I.x+2 ^ I.y+2) % c ^ J.x)\n        //bool((J.x ^ J.y) & (I.x ^ I.y-c) % c ^ J.x)\n        //bool((J.x ^ J.y) & (I.x>>2 ^ I.y>>2) % c ^ J.x)\n    ;\n}\n\nvoid mainImage(out vec4 O, vec2 U) {\n    O *= 0.;\n    ivec2 I = ivec2(U/4.+ iTime*2.*8.);\n    int c = 7;\n    if(\n        labyrinth(I^c&I/c,c)\n        //labyrinth(I^c|I/c&I/c/2,c)\n        //labyrinth(I^c&I/c|I/c/2,c)\n    ) O = 1.-O;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"//remix of https://www.shadertoy.com/view/lcS3zy\n\nfloat fmod(float a, float b, float tempo){\n    float\n    t1 = mod(floor(b/2.),2.),\n    a1 =\n        floor(a+t1),\n    a2 = mod(a1+1.,3.),\n    a3 =\n        mod(a1+mod(a1/8.,3.)*8.,4.)\n    ;\n    return\n        mod(a1-a2-a3,b)\n    ;\n}\n\nfloat fmod(float a, float b){\n    return fmod(a,b,1.);\n}\n\nfloat prime_rhythm(float time){\n    return (1.+fmod(time/2.,2.))/(1.+fmod(time/4.,2.));\n}\n\n#define fract1(a) (1.-pow(fract(-a),2.))\n\nvec2 sitar6(vec2 a, vec2 nb){\n    return a*a/16./2.*abs((.5*abs(1./8.-abs(.5-vec2(fract1(nb.x*4.*.998),fract1(nb.y*4.)))/2.))\n      -(a/4.*abs(1./4.-abs(.5-vec2(fract1(nb.x*2.*.998),fract1(nb.y*2.)))/2.))) \n    ;\n}\n\n#define overtone(instrument,a,b) (instrument(a,b) +instrument(a,b*2.)/2./4.)\n\nvec2 mainSound1(int samp, float time,float scale,float duration){\n  float s1 =\n      8.,\n  tempo1 =\n      prime_rhythm(time)*prime_rhythm(time/2.)*2.\n  ,t = s1*time/4./tempo1,\n  t7 =\n      (1.+fmod(t/8.,2.))\n  ,\n  t4 = t/prime_rhythm(time+11.)/t7,\n  t1 =\n       fmod(t4,2.)\n  ,\n  t5 = t*2./prime_rhythm(time+7.),\n  t3 =\n      (1.+fmod(t5,2.))\n      //(1.+fmod(min(t5,t4),2.))\n      //(1.+fmod(t4,2.))\n  ,\n  t6 = time*8./t3,\n  m3 =\n      floor(fmod(t6,s1/2.)/2.)\n  ,\n  m2 =\n      1. + fmod(t/t3/2.,s1/2.)\n  ,note = (\n      (m3+m2-t1*4.)\n  )/7.\n  ;\n  vec2 a=\n      duration/2.*(-vec2((log(1./64.+fract1(t/prime_rhythm(time+7.))/4.))))\n      //duration/2.*(-vec2((log(1./64.+fract1(t/prime_rhythm(time+7.))/2.))))\n  ,\n  nb =\n      t*vec2(pow(2.,note+scale),pow(2.,note+scale))*tempo1\n  ;\n  return\n      sitar6(a,nb)-sitar6(a*a/2./1.25,nb)\n      -sitar6(a/2.,nb)+sitar6(a*a/4./1.25,nb)\n      \n      //sitar6(a,nb)+sitar6(a*2.,nb)/4.-sitar6(a/2.,nb)-sitar6(a,nb)/4.\n\n      \n      //sitar6(a,nb)-sitar6(a*a/2.,nb)-sitar6(a*a/2.,nb*2.)+sitar6(a*a*a/4.,nb*2.)\n\n      \n      //sounds like violin\n      //abs(sitar6(a,nb)-sitar6(a*a/2.,nb))\n      \n      //(sitar6(a/2.,nb)+sitar6(a*a/2.,nb*2.)/2.)\n\n      \n      //sitar6(a,nb)-sitar6(a/2.,nb/2.)/2.-sitar6(a/4.,nb/4.)/4.\n  ;\n  \n}\n\nvec2 mainSound(int a,float b){\n    float scale = 5.;\n    return\n        mainSound1(a,b,scale,1.)*32.\n    ;\n}\n","name":"Sound","description":"","type":"sound"}]}