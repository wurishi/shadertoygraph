{"ver":"0.1","info":{"id":"wtcBR7","date":"1612421691","viewed":358,"name":"neural sdf human head (sloppy)","username":"ufffd","description":"based on work by Blackle Mori\n\nCurrently really sloppy but I'm just amazed that something like this is possible. I'm averaging 2 separate SDFs from 2 runs of the neural net. Compile time is a little absurd but it seems to still run really smooth.","likes":3,"published":1,"flags":0,"usePreview":1,"tags":["sdf","siren"],"hasliked":0,"parentid":"wtVyWK","parentname":"Neural Stanford Bunny (5 kb)"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//CC0 1.0 Universal https://creativecommons.org/publicdomain/zero/1.0/\n//To the extent possible under law, Blackle Mori has waived all copyright and related or neighboring rights to this work.\n\n//like the last few shaders I've published, this is a neural network experiment.\n//this time, the neural network reproduces an SDF given the x,y,z coordinates\n//using siren networks with skip connections: https://vsitzmann.github.io/siren/\n\nvec3 erot(vec3 p, vec3 ax, float ro) {\n    return mix(dot(p,ax)*ax,p,cos(ro))+sin(ro)*cross(ax,p);\n}\n\nfloat scene(vec3 p) {\n    //sdf is undefined outside the unit sphere, uncomment to witness the abominations\n    if (length(p) > 0.75) {\n        return length(p)-.65;\n    }\n    // p.y = -abs(p.y);\n    p.y = -(sqrt(p.y*p.y + 0.005) - sqrt(0.001));\n    \n    // take 2\n    vec4 f0_0=sin(p.y*vec4(1.48,-1.68,-3.32,2.95)+p.z*vec4(-.12,-.83,-1.70,-.47)+p.x*vec4(-.36,1.70,1.77,1.85)+vec4(1.67,-.03,2.51,-7.18));\nvec4 f0_1=sin(p.y*vec4(1.02,1.82,-3.30,-1.41)+p.z*vec4(-2.81,2.35,-3.88,-4.47)+p.x*vec4(-1.21,-.52,.19,-2.17)+vec4(-6.88,-5.92,-3.90,-4.66));\nvec4 f0_2=sin(p.y*vec4(3.00,-.87,4.30,-4.43)+p.z*vec4(2.27,2.32,-1.08,-2.96)+p.x*vec4(-3.65,-3.97,2.94,-1.32)+vec4(.40,-7.63,-5.64,1.98));\nvec4 f0_3=sin(p.y*vec4(-2.64,1.06,4.59,4.02)+p.z*vec4(1.99,2.35,1.39,-3.11)+p.x*vec4(3.32,-4.37,3.49,-1.95)+vec4(4.58,1.26,4.87,1.04));\nvec4 f0_4=sin(p.y*vec4(-.21,3.74,-2.31,-3.79)+p.z*vec4(3.30,.70,1.28,.20)+p.x*vec4(-1.55,-.11,3.81,3.74)+vec4(-7.32,4.56,8.31,5.06));\nvec4 f0_5=sin(p.y*vec4(-3.34,-4.36,-3.70,-1.42)+p.z*vec4(-.49,-.31,2.22,-2.62)+p.x*vec4(-1.34,-4.12,1.47,-2.72)+vec4(-5.52,3.75,-6.40,7.51));\nvec4 f0_6=sin(p.y*vec4(1.31,-.77,1.90,-1.95)+p.z*vec4(-3.67,.84,.56,-.37)+p.x*vec4(-.34,2.11,-3.65,-4.04)+vec4(4.30,-7.84,3.96,-7.10));\nvec4 f0_7=sin(p.y*vec4(-1.83,-1.40,.55,-.75)+p.z*vec4(-1.07,4.73,4.49,3.75)+p.x*vec4(1.69,2.75,.40,2.46)+vec4(8.26,-.92,.82,6.15));\nvec4 f1_0=sin(mat4(.21,-.60,.04,.14,-.09,.34,-.27,.49,.31,-.14,-.94,1.29,-.29,.12,.21,-.33)*f0_0+\n    mat4(-.17,.69,.04,-.10,.05,-.38,.25,-1.09,.02,.34,-.05,-.39,.22,-.36,-.86,-.02)*f0_1+\n    mat4(.27,-.18,-.44,-1.55,-.34,-.01,.40,-.67,-.06,.40,-.25,-.64,.53,.24,-.53,.10)*f0_2+\n    mat4(-.43,-.98,-.23,1.46,-.56,-.00,.35,-.70,.34,-.11,-1.15,-.50,.16,.66,-.04,-.48)*f0_3+\n    mat4(-.01,-.26,-.42,.81,-.06,-.01,-.62,-.31,.31,-1.00,-.58,.47,-.11,-.41,-.70,-.95)*f0_4+\n    mat4(-.14,-.10,-.04,.07,-.34,-.30,.74,.73,-.13,.24,.24,.08,-.23,-.07,.49,-.01)*f0_5+\n    mat4(-.22,.11,-.44,.44,-.33,.35,.39,-.00,-.01,-.44,.14,-.95,-.09,.09,-.14,.54)*f0_6+\n    mat4(-.05,-.10,.35,.54,.09,.34,-.68,.27,-.35,-.37,.78,-.21,-.29,-.15,.38,.67)*f0_7+\n    vec4(1.15,-1.90,-.09,-2.53))/1.0+f0_0;\nvec4 f1_1=sin(mat4(.17,.21,-.41,.16,.46,-.64,-.03,.11,-.75,-.66,.20,.28,-.21,.04,-.06,-.16)*f0_0+\n    mat4(-.19,.84,.09,.57,.20,.09,-.30,.36,-.01,-.24,.98,-.16,-.06,.64,-.20,-.63)*f0_1+\n    mat4(.21,.37,-.08,-.14,-.43,.38,-.02,-.11,-.04,.21,-.55,-.40,-.01,-1.00,-.50,.07)*f0_2+\n    mat4(-.27,.23,.74,.28,.15,.34,.08,-.30,.90,.09,-.14,.54,-.33,1.17,.18,-.21)*f0_3+\n    mat4(-.21,.26,.43,.35,.03,-.67,.50,.44,-.41,-1.00,.32,.12,-.54,.18,.27,-.56)*f0_4+\n    mat4(.47,.75,-.43,-.17,-.57,-.24,.29,-.25,-.50,.50,.50,.10,.11,.94,.42,-.04)*f0_5+\n    mat4(-.79,.41,.48,-.29,-.15,.94,.55,-.12,.22,-.21,-.27,.02,-.14,-1.06,-.27,-.05)*f0_6+\n    mat4(.06,-.33,.44,-.21,.06,.82,-.25,-.54,-.35,.35,-.18,.01,-.37,.34,.27,-.05)*f0_7+\n    vec4(-1.75,-.77,-2.09,.05))/1.0+f0_1;\nvec4 f1_2=sin(mat4(.82,-.08,.28,-.35,-.07,-.12,-.01,-.02,-.12,.20,.76,-.27,-.62,-.14,.02,.16)*f0_0+\n    mat4(-.17,.49,.03,.41,-.46,.01,-.22,-.17,.23,-.26,-.40,.40,.44,.35,-.14,.36)*f0_1+\n    mat4(-.31,-.55,-1.02,-.10,.04,.18,-.29,.51,.22,.21,.18,-.44,.32,-.25,.59,-.20)*f0_2+\n    mat4(.62,.09,.26,.76,.28,.13,-.18,.09,.95,-.07,-.76,-.67,-.14,.11,-.14,-.32)*f0_3+\n    mat4(-.02,-.36,.15,.34,.40,-.35,.19,-.33,.21,.41,.71,.84,-.29,-.33,-.23,.04)*f0_4+\n    mat4(.28,-.20,-.23,-.23,-1.22,-.14,.64,.94,.09,-.03,.17,.05,-.09,-.21,-.56,.38)*f0_5+\n    mat4(-.35,-.25,.90,-.04,-.26,-.13,-.00,.24,-.26,.19,-.03,.00,.06,.07,1.08,-1.05)*f0_6+\n    mat4(.47,-.31,.49,.71,.31,-.08,-.67,.93,-.27,-.11,.19,-.32,-.31,.43,.35,-.60)*f0_7+\n    vec4(-1.13,2.28,1.93,.90))/1.0+f0_2;\nvec4 f1_3=sin(mat4(.27,-.33,-.31,.28,-.38,.35,-.04,.16,-.12,.58,.14,.41,-.06,.43,-.53,-.28)*f0_0+\n    mat4(.47,.64,-.05,.63,-.10,.01,.43,.30,-.30,.54,.48,-.44,-.20,-.01,.22,.35)*f0_1+\n    mat4(.16,.02,-.41,-.01,.13,-.53,.19,.55,.52,.26,-.30,.19,-.10,-.18,-.67,-.32)*f0_2+\n    mat4(-.07,-.00,1.46,.33,-.44,-.06,.31,-.40,.26,-.33,-.42,1.85,-.58,.76,.27,.12)*f0_3+\n    mat4(.23,.08,.08,.48,-.01,.06,.13,-.03,1.00,-.33,.14,-.40,-.25,-.56,-.75,.28)*f0_4+\n    mat4(.55,-.04,.28,.97,-.51,-.17,.28,-1.60,-.39,.15,.21,-.06,-.08,-.46,.10,.96)*f0_5+\n    mat4(-.18,.07,.09,.01,-.15,-.29,-.62,.91,1.40,-.24,.42,-.39,.18,-.13,-.70,-.89)*f0_6+\n    mat4(.02,-.68,.34,.73,-.36,-.30,.21,.16,.34,.19,-.36,-.23,-.11,.34,.25,.51)*f0_7+\n    vec4(-.78,.66,1.45,1.27))/1.0+f0_3;\nvec4 f1_4=sin(mat4(-.28,-.23,.31,.75,-.75,-.12,-.09,.35,-1.00,.24,-.40,-.83,.13,-.21,.52,-.09)*f0_0+\n    mat4(.37,.01,.39,-.09,.06,.19,-.14,-.08,.58,-.01,.25,-.29,.56,.14,.84,-.57)*f0_1+\n    mat4(.20,.25,-.10,.84,-.79,.04,-.50,-.45,-.07,-.21,.37,-.60,-.20,-.04,-.21,-.28)*f0_2+\n    mat4(.28,-.15,-.17,.57,.11,.02,.22,-.45,-.34,.29,-.60,-.44,.83,-.60,-.08,-.09)*f0_3+\n    mat4(-.76,-.40,-.66,.50,-.51,-.22,-.45,.16,-.90,.02,-.44,-.22,.08,.50,-.35,-.27)*f0_4+\n    mat4(.01,.03,.62,-.21,.11,-.20,.08,.52,.86,-.27,-.43,.08,.43,.56,-.46,.15)*f0_5+\n    mat4(.48,-.01,-.14,.30,.33,.09,.15,-.81,-.62,.04,.36,.50,-.29,-.26,-.32,.04)*f0_6+\n    mat4(-.39,-.59,-.53,.97,.59,.46,.92,-.41,-.35,.12,-.15,.12,-.37,-.44,.18,.32)*f0_7+\n    vec4(.89,-.31,1.57,.07))/1.0+f0_4;\nvec4 f1_5=sin(mat4(.30,-.33,-.87,.29,.38,-.10,.31,-.71,.89,-.33,1.21,-.02,.01,.40,-.31,.10)*f0_0+\n    mat4(-.25,-.34,-.10,-.77,-.31,.35,-.35,.11,-.13,.34,.32,-.11,-.65,.09,.90,.26)*f0_1+\n    mat4(-.45,-.33,-1.09,-.11,-.29,-.40,.98,-.70,.13,-1.05,.28,-.71,.55,-.46,.86,-.10)*f0_2+\n    mat4(-.44,.73,.02,1.16,.11,-.46,.66,-.46,-.47,-.27,.55,-.71,-.77,-1.88,.37,.10)*f0_3+\n    mat4(-.14,-.27,-.52,-.29,.12,-1.05,1.55,.04,.68,.48,.85,.55,-.31,-1.20,.89,-.29)*f0_4+\n    mat4(-.76,-.69,-.35,-.57,.48,.51,-.58,1.12,-.43,-1.00,.98,.28,-.90,.03,.30,-.74)*f0_5+\n    mat4(-.34,-1.34,.49,.14,-.49,.11,-.34,-.28,.10,.69,-.44,.06,.97,.51,-.37,.61)*f0_6+\n    mat4(.74,.23,-.35,.23,-1.26,.32,.43,-.17,.18,-.58,.33,-.16,.42,.41,-.03,.34)*f0_7+\n    vec4(-1.93,1.05,-.88,-.25))/1.0+f0_5;\nvec4 f1_6=sin(mat4(-.69,.18,.20,-.18,.18,.41,-.04,.66,-.04,-.49,-.03,-.53,-.15,.83,-.62,-.28)*f0_0+\n    mat4(.97,-.35,.15,.10,-.08,.59,-.56,-.05,.03,-.47,.05,.42,1.17,-.41,.30,.22)*f0_1+\n    mat4(-.10,.25,-.07,.29,-.05,.22,.10,-.08,-.40,.27,-.05,.13,-.01,.35,.08,-.89)*f0_2+\n    mat4(1.06,.76,.36,-.66,.26,-.35,.04,.34,-.28,.54,-.03,-1.17,1.33,.96,-.06,-.04)*f0_3+\n    mat4(.21,-.36,-.15,.00,.15,-.09,-.46,-.77,-.39,-.39,-.30,.05,.61,-.70,-.00,.52)*f0_4+\n    mat4(-.02,-.50,-.04,.19,.33,-.73,.13,.74,1.55,.58,.16,-.61,-.27,.42,-.06,.07)*f0_5+\n    mat4(.46,-.14,-.61,.24,-.18,-.73,.34,.57,-1.09,.25,-.71,.06,-.23,-.81,-.58,.31)*f0_6+\n    mat4(-.11,-.17,.74,-.04,1.52,-.88,-.11,.05,.36,.02,.16,.45,-.84,.75,-.00,.12)*f0_7+\n    vec4(-1.72,-1.66,-2.78,-1.78))/1.0+f0_6;\nvec4 f1_7=sin(mat4(.16,.07,.11,-.03,-.23,.03,-.31,.27,.68,-.88,-.27,-.08,.04,-.45,.46,.49)*f0_0+\n    mat4(.17,.61,-.17,-.32,-.54,-.74,-.80,.22,.12,.62,-.03,-.13,-.34,.64,-.35,-.09)*f0_1+\n    mat4(.09,.17,.31,.21,-.21,-.89,-.31,-.08,.15,.72,.38,.04,-.19,-.21,.09,.17)*f0_2+\n    mat4(-.49,-.11,.41,-.80,.08,-.23,.22,.23,-.22,-.85,-.09,-.01,-.25,.03,.35,.44)*f0_3+\n    mat4(-.24,-.47,.38,-.27,-.12,.04,-.46,.28,-.45,.09,-.30,-1.25,-.42,.06,-.49,.06)*f0_4+\n    mat4(.15,-.56,-.24,-.02,-.18,.09,-.17,-.30,.08,.22,.39,-.01,.37,-.78,.58,.28)*f0_5+\n    mat4(.54,.37,.26,-.28,.13,.26,.36,.07,.29,-.17,-.23,-.13,.06,.56,-.14,-.12)*f0_6+\n    mat4(-.10,-.40,.27,-.28,-.51,.21,-.05,-.88,.39,-.30,-.47,-.14,.67,.59,.49,.58)*f0_7+\n    vec4(-1.78,-.23,.14,1.78))/1.0+f0_7;\nvec4 f2_0=sin(mat4(.39,.48,-.20,-1.13,-.28,.95,-.60,.50,-.32,.26,-.67,1.08,-.75,-.83,.25,-.39)*f1_0+\n    mat4(-.87,-.58,.45,.30,-2.46,-2.21,.64,.74,.65,.66,-.10,-.16,2.14,1.17,-.95,-1.10)*f1_1+\n    mat4(-.95,-1.01,.26,1.13,.48,.34,-.27,-.33,1.92,1.34,-.43,-.30,-.83,-.45,-.04,-.61)*f1_2+\n    mat4(-.83,-.86,-.04,-.42,.35,.55,-.20,-.59,-1.17,-.76,.07,.67,-2.14,-1.72,.02,.77)*f1_3+\n    mat4(1.09,1.20,-.54,.74,-.64,.10,-.67,.29,.52,-.13,-.06,.07,.97,.28,-.51,-.26)*f1_4+\n    mat4(1.38,.97,-.31,-1.08,-1.28,-1.05,.14,.56,-.17,-.29,.14,.03,2.82,1.79,-.23,-2.02)*f1_5+\n    mat4(.50,.89,-.21,.58,.62,.34,-.03,.41,.14,.32,.31,-.19,.26,.19,-.16,.24)*f1_6+\n    mat4(1.06,1.49,-.96,.59,.73,.71,-.18,.04,-1.03,-.83,-.17,.24,-.36,-.73,.75,.14)*f1_7+\n    vec4(-3.46,-1.50,-.87,-1.22))/1.4+f1_0;\nvec4 f2_1=sin(mat4(1.57,-1.40,-.23,-.01,-1.77,.17,.34,-.07,-1.71,-.11,.49,.57,1.20,-.81,-.85,-.71)*f1_0+\n    mat4(-1.00,.16,-.01,.41,-.47,-.35,-.67,-.78,-1.43,.53,1.21,.32,1.99,-.22,.24,.42)*f1_1+\n    mat4(-.20,.38,-.20,-.43,-.02,-.87,.01,.47,.41,-1.37,.86,1.00,1.15,-.37,-.68,-.76)*f1_2+\n    mat4(1.45,1.16,-1.21,-1.13,.36,-.27,.02,.22,-.69,.30,-.63,-.75,-1.17,.82,-.83,-.30)*f1_3+\n    mat4(-1.87,-.37,1.42,1.07,-1.17,.32,-.08,.94,1.32,-.65,.21,.03,.34,.82,-.05,-.10)*f1_4+\n    mat4(1.35,-.51,-.10,.08,-1.14,.56,.00,-.07,.60,.39,-.34,-.30,2.47,-.32,1.76,.75)*f1_5+\n    mat4(-1.72,.15,.36,.56,-.52,-.61,.95,.45,.52,-.20,-.27,-.02,-1.06,-.84,.05,.20)*f1_6+\n    mat4(-1.87,1.89,-.40,.85,.03,.05,.34,.34,-.28,.99,-1.26,-.34,.86,-.44,.20,-1.20)*f1_7+\n    vec4(.86,-.81,1.77,1.69))/1.4+f1_1;\nvec4 f2_2=sin(mat4(-.28,-.34,.01,.32,1.49,.11,.45,.44,1.58,-.14,-.12,.06,-1.09,.10,-.77,-.32)*f1_0+\n    mat4(-.02,.28,.36,.17,-.76,.77,.89,-.11,1.38,-.46,.62,-.11,-.81,-1.54,-.04,.26)*f1_1+\n    mat4(-.57,-.25,-.67,.25,-.49,.59,.15,-.24,1.24,-1.30,-.37,.40,-1.19,.02,-.34,-1.00)*f1_2+\n    mat4(-1.07,.60,-.94,-.66,-.05,-.18,.08,.18,-1.21,.60,-.35,-.57,-.30,1.21,-.66,-.07)*f1_3+\n    mat4(2.84,-.58,-.22,.53,.85,-.51,.48,-.41,-.18,-.27,-.36,.18,-.10,-.60,.16,.29)*f1_4+\n    mat4(-.51,-.16,-1.07,-.03,.79,.44,.12,.31,-.72,-.45,.25,.11,-.24,-.77,.33,.40)*f1_5+\n    mat4(1.82,-.39,-.34,.04,1.12,-.44,.12,.45,-1.53,-.48,-.10,-.14,2.21,.09,.94,.29)*f1_6+\n    mat4(1.78,-.43,.53,-.57,1.02,-.75,.22,.32,-1.30,-.05,1.03,-.44,-1.16,.09,-.88,.93)*f1_7+\n    vec4(.86,1.76,-.42,1.24))/1.4+f1_2;\nvec4 f2_3=sin(mat4(-.87,-.10,-.45,-.70,-.24,-.04,-.47,-.48,.32,.54,-.37,-.14,-.29,-.95,-.28,.21)*f1_0+\n    mat4(.79,.16,-.53,.37,.39,-2.00,-1.33,.23,1.11,1.15,.90,.31,-1.37,1.87,1.50,1.11)*f1_1+\n    mat4(-.45,-.42,-.48,.18,.79,.78,.07,-.48,-.57,1.94,1.07,.62,-.91,-1.12,-.57,-.28)*f1_2+\n    mat4(-.30,-1.76,-.12,.71,-.88,-.37,-.21,1.01,-.37,-1.43,-.83,.05,1.02,-1.42,-1.06,-.48)*f1_3+\n    mat4(.65,2.10,.28,-.19,1.52,.15,-.55,-.05,-.51,.30,.36,.04,-.61,1.44,.16,.44)*f1_4+\n    mat4(-.61,.59,.46,.23,.66,-.52,-.76,.15,.00,-.50,.36,.57,-.59,1.93,2.00,.25)*f1_5+\n    mat4(.46,.98,-.26,.04,.29,.75,.80,-.09,-.67,-.15,.58,.38,-.19,.76,-.48,.15)*f1_6+\n    mat4(.28,.03,.96,.17,-.59,.69,.13,.34,.28,-1.16,.56,.04,-.28,-.24,-.91,.76)*f1_7+\n    vec4(2.50,.81,-2.11,.01))/1.4+f1_3;\nvec4 f2_4=sin(mat4(-.12,-.89,-.14,1.15,-.28,.52,-1.04,-.68,.38,.28,-.76,-1.42,-.29,-.56,1.12,.92)*f1_0+\n    mat4(-.70,.63,-.26,.06,-.55,.79,.79,1.35,.64,1.12,-1.77,-1.03,-.03,-1.08,-.41,-.85)*f1_1+\n    mat4(.58,.35,.45,-.12,-.75,-.48,-.14,.17,.34,-.02,-1.08,-1.28,-.21,-.86,1.17,.74)*f1_2+\n    mat4(-.02,-.66,.76,.71,-.18,-.28,-.22,-.17,-.43,-.35,.99,.52,-.31,.28,.31,.65)*f1_3+\n    mat4(.38,1.84,-2.00,-2.09,.12,-.80,-.52,.29,.58,-.73,-.07,.35,-.15,.49,.23,-.46)*f1_4+\n    mat4(-.36,-.98,.50,.38,.30,.72,-.19,-.21,.28,-.15,.63,.57,.71,-.20,-.77,.15)*f1_5+\n    mat4(.29,1.28,-1.23,-1.45,.82,.71,-1.45,-.93,.13,-.94,1.03,.87,.08,1.07,-.34,-.72)*f1_6+\n    mat4(1.20,-.34,-.09,-.73,.12,-.31,-.90,-1.29,.00,-.30,1.83,1.25,-.33,.43,.57,.08)*f1_7+\n    vec4(.63,1.70,-.50,-1.32))/1.4+f1_4;\nvec4 f2_5=sin(mat4(.47,-.04,-.25,.75,-1.32,.86,1.02,-.20,-1.04,.98,.28,-.34,.13,-.27,-.55,.87)*f1_0+\n    mat4(-.14,-.06,-.34,-.30,.07,.45,-1.57,-.43,-.07,.72,-.40,-.45,-.26,.11,.30,1.17)*f1_1+\n    mat4(-.90,.25,-.56,-.18,.20,-.37,.75,.70,-.05,-.16,-.39,-.33,-.07,-.36,.80,.51)*f1_2+\n    mat4(.18,-.90,.75,.10,.95,-.71,1.25,.37,-.91,-.08,.47,-.18,-.41,-.04,-.25,-.19)*f1_3+\n    mat4(-.88,.77,-.35,.25,.00,-.27,-.23,-.34,-.76,-.65,-.21,-.33,-.63,.08,-.14,-.49)*f1_4+\n    mat4(-.24,-1.20,-.03,-.40,.07,-.09,-.87,-.18,.42,.44,-.61,-.18,.91,.01,.15,.31)*f1_5+\n    mat4(-.44,.50,.45,.05,-.34,.37,.04,-.05,-.09,.00,-.19,.09,-.09,-.27,.10,-.06)*f1_6+\n    mat4(.06,.09,1.09,-.62,-.70,-.35,.24,-.29,.22,.38,-.40,-.96,.27,-.13,-1.12,1.38)*f1_7+\n    vec4(-.37,-.49,-.70,-1.62))/1.4+f1_5;\nvec4 f2_6=sin(mat4(-.57,.07,.23,-1.00,2.18,.60,.37,.53,2.00,-.98,.05,.60,-1.13,.20,-.67,.06)*f1_0+\n    mat4(.89,.96,.65,.39,-1.10,.64,-.64,.89,1.64,-.05,1.12,.82,-.08,-.53,-.14,-.51)*f1_1+\n    mat4(-.46,-.92,-.02,.81,.52,-.45,.22,-.26,1.45,-.27,.27,-.08,-1.40,.57,-.07,-.21)*f1_2+\n    mat4(-1.52,.45,-.65,1.02,.09,-.01,.39,-.37,-.89,-.01,-.65,.22,-.11,-.20,-.70,1.37)*f1_3+\n    mat4(3.13,-1.49,.07,.43,1.51,-.24,.53,.95,-.37,-.61,-.37,.30,-.06,-.91,.95,.59)*f1_4+\n    mat4(-.59,.50,-.02,-.75,.69,-.11,.39,.92,-.84,.28,.40,-.24,-.85,.43,.70,-1.46)*f1_5+\n    mat4(2.18,-.88,.18,.66,1.29,-.39,.36,.22,-1.23,.06,.41,-.32,1.53,-.22,.57,-.20)*f1_6+\n    mat4(.96,-1.01,-1.02,-.47,1.37,-.74,.06,-.07,-1.48,.07,-.10,.10,-.64,.77,-.35,-.43)*f1_7+\n    vec4(-.34,.10,-3.62,-2.99))/1.4+f1_6;\nvec4 f2_7=sin(mat4(-.61,-.03,.47,.05,.87,-.54,.17,.01,.79,.29,-.48,.18,-.24,-.37,.66,-.50)*f1_0+\n    mat4(.19,-.19,.20,-.67,-.00,-.90,-.64,-.77,-.02,-.02,-.29,-.27,-.60,.47,.92,.98)*f1_1+\n    mat4(.76,.16,-.35,.12,-.35,.73,.54,.61,.01,.07,.73,.18,-.36,-.49,.38,.37)*f1_2+\n    mat4(-.49,-1.30,.07,-.14,-.15,.16,.38,.54,-.45,-.64,.24,.42,.69,-.38,-.76,-.65)*f1_3+\n    mat4(.34,-.02,.06,-.04,.97,.04,.22,-.52,.17,.03,.54,.44,-.46,-.68,.84,.56)*f1_4+\n    mat4(-.26,.06,.86,.25,.52,-.24,-.38,-.79,.36,-.28,-.19,-.35,-1.00,.36,.06,.65)*f1_5+\n    mat4(.30,.46,-.04,.15,.54,.32,-.51,-.21,.51,.45,-.02,-.09,.30,-.01,-.22,.14)*f1_6+\n    mat4(.43,.99,.09,.45,-.03,.79,.13,.51,.01,-.92,-.52,-.19,-.27,-.44,.27,-.31)*f1_7+\n    vec4(.42,1.68,-.10,.53))/1.4+f1_7;\nfloat output_val = dot(f2_0,vec4(.08,-.08,-.10,.07))+\n    dot(f2_1,vec4(-.05,.03,-.09,.11))+\n    dot(f2_2,vec4(-.06,.07,-.04,.08))+\n    dot(f2_3,vec4(.11,.08,.06,-.08))+\n    dot(f2_4,vec4(-.08,-.07,.08,.08))+\n    dot(f2_5,vec4(.06,-.06,.04,.06))+\n    dot(f2_6,vec4(-.07,-.05,.05,.05))+\n    dot(f2_7,vec4(-.10,.04,.07,.09))+\n    -0.160;\n    \n    //neural networks can be really compact... when they want to be\n      \n    vec4 f20_0=sin(p.y*vec4(1.55,-2.62,-1.94,-3.54)+p.z*vec4(-.91,3.15,-1.31,-1.34)+p.x*vec4(-2.16,4.16,-3.83,1.52)+vec4(-6.73,-1.64,-.68,3.42));\nvec4 f20_1=sin(p.y*vec4(-.09,-3.64,3.53,-.75)+p.z*vec4(-3.44,2.22,-1.07,1.22)+p.x*vec4(-.43,.19,.27,-4.54)+vec4(6.04,-8.30,1.75,-1.03));\nvec4 f20_2=sin(p.y*vec4(-2.15,2.54,1.52,-2.81)+p.z*vec4(.02,-.97,-.50,-1.22)+p.x*vec4(-4.46,1.49,1.88,2.51)+vec4(2.20,-5.10,-.40,-4.95));\nvec4 f20_3=sin(p.y*vec4(-3.55,-4.01,.08,-1.06)+p.z*vec4(-3.28,-2.77,.64,2.05)+p.x*vec4(2.48,2.23,-.30,3.93)+vec4(1.43,.91,-2.43,5.35));\nvec4 f21_0=sin(mat4(1.04,.89,-.26,-.81,.15,1.24,-.27,.02,-.22,-.76,-.03,-.09,.46,.00,.39,.32)*f20_0+\n    mat4(-.05,-.01,-.55,-1.16,.09,-.92,-.17,.52,.08,-.94,1.52,-.19,-.30,-.13,-.71,-.82)*f20_1+\n    mat4(-.27,-.55,.55,-1.60,.20,.10,-.48,.95,.09,.29,-.46,-.21,-.08,1.46,-.87,.29)*f20_2+\n    mat4(.60,-.82,-.12,-.17,-.29,.32,.30,.88,.07,.05,.87,-.73,-.38,-.82,.51,-.08)*f20_3+\n    vec4(-2.09,-2.36,3.49,4.24))/1.0+f20_0;\nvec4 f21_1=sin(mat4(-.22,.32,-.98,-.75,-.82,-.20,-.06,-.03,.55,-.61,-.98,.74,-.59,-.79,-.90,.91)*f20_0+\n    mat4(.01,.12,-.35,-.74,-.67,-.18,.60,.55,-.65,1.85,-.48,-.52,1.74,-.72,.34,-.92)*f20_1+\n    mat4(1.73,.56,.08,-1.16,.90,-.67,.51,.61,.09,.29,-.22,-.19,.51,-1.01,.39,.51)*f20_2+\n    mat4(-.27,.75,.01,-.89,.11,-1.62,-.68,1.31,.39,-.75,-.81,1.06,.30,.77,-.01,-.59)*f20_3+\n    vec4(.65,-3.36,.20,-.47))/1.0+f20_1;\nvec4 f21_2=sin(mat4(.45,-.86,-.29,-.49,-.72,.36,-1.00,-.43,-.70,-.47,.51,.11,-.10,.45,-.18,.25)*f20_0+\n    mat4(.23,.33,-.02,-.49,-.47,-.26,.61,.26,-.30,-.07,1.42,.30,.80,.09,1.12,-.08)*f20_1+\n    mat4(.25,-.62,1.58,.20,.99,-.46,.62,.28,.81,-.32,1.28,.93,.49,-.89,-.07,-.88)*f20_2+\n    mat4(-.56,-.36,-.61,-.82,-.08,.16,-.04,1.14,-1.20,-.66,-.02,-.24,.93,-1.20,1.47,.62)*f20_3+\n    vec4(.10,3.78,-2.18,-1.09))/1.0+f20_2;\nvec4 f21_3=sin(mat4(-.97,-.20,.97,1.10,.08,-.32,.64,.24,.18,-.45,-.25,-.16,.06,.63,-.79,-.16)*f20_0+\n    mat4(-.56,.09,-.09,-.08,.21,-.36,.25,.71,.58,-.29,.61,.27,-.13,-.26,-.02,.22)*f20_1+\n    mat4(.35,-.11,.22,.28,.16,.11,.03,-.19,-.17,-.34,-.91,-.13,-.97,.24,.35,.39)*f20_2+\n    mat4(-.14,-.45,.21,-.36,.14,.75,-.88,.16,-1.60,.07,.85,.07,-.09,-.67,.03,-.73)*f20_3+\n    vec4(-.83,2.40,.19,1.59))/1.0+f20_3;\nvec4 f22_0=sin(mat4(-1.28,-1.22,-.27,.75,-1.20,.20,.20,-.59,.12,.53,.31,.47,-.37,-1.36,1.32,.83)*f21_0+\n    mat4(-.86,-1.07,.48,.42,.02,-.47,-.34,-.43,.02,.92,-.01,-.20,.53,1.27,-1.13,-.27)*f21_1+\n    mat4(.06,1.44,-.80,.02,-.46,.54,-.46,-.69,-.22,1.37,-.79,-.55,-.65,-1.24,-.34,-.72)*f21_2+\n    mat4(.25,.28,-.63,-.70,.50,.24,.40,.77,.85,.48,.76,.49,-.03,.94,-1.60,-1.06)*f21_3+\n    vec4(-2.45,2.88,-2.05,-2.72))/1.4+f21_0;\nvec4 f22_1=sin(mat4(.07,-2.06,-.68,1.07,-.03,-.65,-.70,.19,-.02,.38,-.20,.85,-.65,-.50,.58,.49)*f21_0+\n    mat4(-.16,-.93,-.20,.47,.01,-.58,.01,-.84,.57,-.05,.35,.24,.68,.30,-.44,-1.06)*f21_1+\n    mat4(.49,1.23,-.60,-.13,.87,.71,-.79,-.04,.57,1.94,-.82,-.32,-.52,-1.75,-1.81,-1.27)*f21_2+\n    mat4(-.41,-.67,-1.89,.11,.12,.91,2.48,-.23,.72,-.35,-.83,-.61,-.09,.97,-.99,.12)*f21_3+\n    vec4(.46,2.66,-1.00,-.44))/1.4+f21_1;\nvec4 f22_2=sin(mat4(-1.26,1.91,1.20,-1.40,-.93,-.89,-.52,.57,-.12,.30,.56,.76,.11,1.12,-.30,-1.14)*f21_0+\n    mat4(-.11,.43,.04,-1.05,.20,.44,-.87,-.70,-.28,-.29,-.76,.50,-.05,-.73,.44,1.10)*f21_1+\n    mat4(.16,.57,.91,1.05,.53,.00,1.32,.14,.80,-.23,1.22,.43,-.64,-.25,-.46,-.29)*f21_2+\n    mat4(-.17,-.05,.04,.00,-.30,-.25,-.68,.18,.52,-1.40,.63,1.05,-.09,.78,-.03,.22)*f21_3+\n    vec4(-.37,2.59,3.01,-1.09))/1.4+f21_2;\nvec4 f22_3=sin(mat4(-1.46,1.19,-1.65,.51,.06,-.31,-.30,-.93,.35,1.23,-.82,1.49,-.19,.99,-1.18,.68)*f21_0+\n    mat4(-.71,.79,-.84,.38,-.28,-1.36,1.14,-1.27,.77,-.79,1.07,-.68,.50,-1.08,.92,-.64)*f21_1+\n    mat4(1.54,.24,-.13,.48,.04,.12,-.06,.16,.99,.20,.19,.61,.34,-1.44,.36,-2.20)*f21_2+\n    mat4(-.84,-.21,.83,.33,.26,-.05,.05,-.16,-.16,-.41,.45,.35,-.14,.05,.23,.43)*f21_3+\n    vec4(-2.07,-1.94,-2.34,1.26))/1.4+f21_3;\nfloat output_val2 = dot(f22_0,vec4(-.09,.18,.11,-.13))+\n    dot(f22_1,vec4(-.15,-.09,.08,.11))+\n    dot(f22_2,vec4(.18,-.06,.11,-.18))+\n    dot(f22_3,vec4(-.09,.20,-.14,.13))+\n    -0.052;\n    \n    return (output_val2 + output_val ) / 2.0;\n    \n}\n\nvec3 norm(vec3 p) {\n    mat3 k = mat3(p,p,p)-mat3(0.001);\n    return normalize(scene(p) - vec3(scene(k[0]),scene(k[1]),scene(k[2])));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-0.5*iResolution.xy)/iResolution.y;\n    vec2 mouse = (iMouse.xy-0.5*iResolution.xy)/iResolution.y;\n\n    vec3 cam = normalize(vec3(1.5,uv));\n    vec3 init = vec3(-3.,0,0);\n    \n    float yrot = 0.5;\n    float zrot = iTime*.2;\n    if (iMouse.z > 0.) {\n        yrot += -4.*mouse.y;\n        zrot = 4.*mouse.x;\n    }\n    cam = erot(cam, vec3(0,1,0), yrot);\n    init = erot(init, vec3(0,1,0), yrot);\n    cam = erot(cam, vec3(0,0,1), zrot);\n    init = erot(init, vec3(0,0,1), zrot);\n    \n    vec3 p = init;\n    bool hit = false;\n    for (int i = 0; i < 150 && !hit; i++) {\n        float dist = scene(p);\n        hit = dist*dist < 1e-6;\n        p+=dist*cam;\n        if (distance(p,init)>5.) break;\n    }\n    vec3 n = norm(p);\n    vec3 r = reflect(cam,n);\n    //don't ask how I stumbled on this texture\n    vec3 nz = p - erot(p, vec3(1), 2.) + erot(p, vec3(1), 4.);\n    float spec = length(sin(r*3.5+sin(nz*120.)*.15)*.4+.6)/sqrt(3.);\n    spec *= smoothstep(-.3,.2,scene(p+r*.2));\n    vec3 col = vec3(.1,.1,.12)*spec + pow(spec,8.);\n    float bgdot = length(sin(cam*8.)*.4+.6)/2.;\n    vec3 bg = vec3(.1,.1,.11) * bgdot + pow(bgdot, 10.);\n    fragColor.xyz = hit ? col : bg;\n    fragColor = smoothstep(-.02,1.05,sqrt(fragColor)) * (1.- dot(uv,uv)*.5);\n}","name":"Image","description":"","type":"image"}]}