{"ver":"0.1","info":{"id":"7tsXzN","date":"1626510791","viewed":74,"name":"mandelbrot 001 orbit trap","username":"RiceFields","description":"mandelbrot, orbit trap","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["mandelbrot","fractals","orbittrap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define B 256.0\n#define N 200\n#define PERIOD 1.0/10.0\n#define LINE vec2(1.0, 1.0)\n\nfloat line_segment(vec2 p, vec2 a, vec2 b) {\n\tvec2 ba = b - a;\n\tvec2 pa = p - a;\n    vec2 lvec = pa - clamp(dot(pa, ba) / dot(ba, ba), 0., 1.) * ba;\n\treturn dot(lvec, lvec); // length between pa and porject of pa on ba\n}\n\nfloat trap(vec2 z) {\n    vec2 l = 0.5 + 0.5*cos(iTime+LINE);\n    return line_segment(abs(sin(z)), abs(cos(z)), l);\n}\n\n\nfloat mandelbrot(vec2 c) {\n   vec2 z = vec2(.0);\n   float dist = 10e5;\n   for(int i = 0; i < N; ++i) {\n     z = vec2( z.x*z.x - z.y*z.y, 2.0*z.x*z.y ) + c; // z = z^2 + c\n     if( dot(z,z)>(B*B) ) break;\n     dist = min(dist, trap(z));\n   }\n   return sqrt(dist);\n}\n\nvec3 image(vec2 fragCoord) {\n    vec2 uv = (fragCoord / iResolution.xy) * 2.0 - 1.0; // remap uv to [-1, 1]\n    uv.x *= iResolution.x / iResolution.y;\n        \n    vec2 c = vec2(-.4,.1) + uv*.8;  \n    float f = mandelbrot(c);\n    f = .5*log(f)/14.0;\n    \n    // calculate color\n    vec3 col = vec3(f*f);\n\n    return (f*f*(100.0 - f))*col;\n \n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\t// anti-aliasing\n\tfragColor = vec4(image(fragCoord.xy + vec2(0,0)), 1.0f);\n\tfragColor.rgb += image(fragCoord.xy + vec2(.5,.0));\n\tfragColor.rgb += image(fragCoord.xy + vec2(.0,.5));\n\tfragColor.rgb += image(fragCoord.xy + vec2(.5,.5));\n    fragColor.rgb += image(fragCoord.xy + vec2(.25,.25));\n\tfragColor.rgb += image(fragCoord.xy + vec2(.75,.25));\n\tfragColor.rgb += image(fragCoord.xy + vec2(.25,.75));\n\tfragColor.rgb += image(fragCoord.xy + vec2(.75,.75));\n\tfragColor.rgb /= 8.0;\n}","name":"Image","description":"","type":"image"}]}