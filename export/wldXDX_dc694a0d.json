{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"texture","id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"}}],"code":"#define S(a,b,t) smoothstep(a,b,t)\nmat2 rot(float m){\n\treturn mat2(cos(m),-sin(m),sin(m),-cos(m));\n}\n\nfloat box(vec2 uv,vec2 r, float blur){\n\tfloat d=length(max(abs(uv)-r,0.));\n    d= S(blur,-blur,d);\n    return d;\n}\n\nfloat strips(vec2 st){\n\tfloat strip=box(st,vec2(0.003,0.5),0.015);\n    strip+=box(st-vec2(0.,0.47),vec2(0.25,0.008),0.015);\n    strip+=box(st-vec2(0.,0.31),vec2(0.25,0.004),0.015);\n    strip+=box(st-vec2(0.,0.29),vec2(0.25,0.004),0.015);\n    strip+=box(st-vec2(0.,0.00),vec2(0.25,0.004),0.015);\n    strip+=box(st-vec2(0.,-0.29),vec2(0.25,0.004),0.015);\n    return strip;\n}\n\nfloat curtain (vec2 uv, float blur)\n{\n\tvec2 st2=uv;\n    st2.x=abs(st2.x);\n    st2.x+=(0.25+0.0*sin(iTime))*2.*(st2.y+0.5)*abs(st2.x);\n    st2.y=sin(st2.x*60.+iTime/1.+1000.5*texture(iChannel0,st2/200.).r)*0.01+st2.y+0.05*texture(iChannel0,st2/200.+iTime/400.).r;\n    float d2= box(st2-vec2(0.17,0.),vec2(0.12-0.01*sin(iTime),0.49),blur)*(0.6+0.4*texture(iChannel0,st2*20.).r*(2.*sin(st2.x*50.+iTime/1.)+1.0))*(sin(st2.x*500.+iTime/1.)*0.05+1.0);\n    return d2;\n\n}\nfloat monster(vec2 uv){\n    float d;\n    uv*=2.;\n    uv.y-=10.*fract(iTime/30.)-0.5;\n    float dist= length(uv*rot(1.2)-vec2(-0.1,0.12));\n    d=S(0.2,0.13,dist);\n    dist= length(vec2(uv.x+0.8*uv.y,0.3*sin(iTime*2.)*uv.x+0.7*uv.y+1.5*uv.y*uv.y));\n    d+=S(0.1,0.03,dist);\n    dist= length(vec2(0.2*uv.x+0.1*sin(iTime*3.)*uv.y-0.1,0.1*uv.x+0.7*uv.y+1.5*uv.y*uv.y));\n    d+=S(0.1,0.03,dist);\n    dist= length(vec2(0.5*uv.x-0.87*uv.y-0.6,-0.1*uv.x-0.7*uv.y+1.5*uv.y+0.2));\n    d+=S(0.1,0.03,dist);\n    d=clamp(d,0.,1.);\n    return d;\n\n\n}\nvec3 windowColor(vec2 uv){\n    float t = 0.1*iTime;\n    \n    vec4 c,col;\n    col = vec4 (0.7);\n   \n    col+=vec4(1.,1.,0.7,1.)*(0.10/length(uv+vec2(0.7*sin(2.*t),0.1*cos(t))));\n    col+=vec4(0.7,0.7,1.,1.)*(0.10/length(uv+vec2(0.,0.3)+vec2(0.7*sin(1.*t),0.1*cos(3.*t))));\n    col= clamp(col,0.,2.);\n    float x=texture(iChannel0,uv/200.).r;\n    col-=vec4(-0.1)+vec4(0.5*sin(uv.x*uv.y*100.),0.5*cos(uv.y*uv.y*100.),0.,1.)*monster(vec2(-uv.y+0.3,-uv.x));\n    col= clamp(col,0.,2.);\n    col-=vec4(2.7)*box(uv-vec2(0.2,-0.3),vec2(0.1,0.3),0.1);\n    col-=vec4(2.0)*box(uv-vec2(-0.2,-0.4),vec2(0.05,0.2),0.1);\n    col-=vec4(0.4)*box(uv-vec2(-0.1,-0.3),vec2(0.002,0.5),0.02);\n    \n    return col.rgb;\n\n}\n\nvec3 window(vec2 uv){\n    vec2 st=uv;\n    st.y+=0.05;\n    float d= box(st,vec2(0.2,0.44),0.1);\n    \n    \n    // Time varying pixel color\n    vec3 col = vec3(0.01);\n    col=mix(col,vec3(1.),0.2*(1.-box(uv,vec2(0.7,0.5),0.05))*abs(uv.x));\n    //col*=S(0.01,-0.01,uv.x+uv.y);\n    //col*=texture(iChannel0,uv*1.).r;\n    col=mix(col,windowColor(uv),d);\n    float strip=strips(st);\n    col=mix(col,vec3(0.0),0.8*strip);\n    st=abs(st);\n    //st*=rot(3.14/4.);\n    //col= vec3(1./length())/10.;\n    float d2=curtain(uv*vec2(0.8,0.9),0.05);\n    d2+=curtain(uv*vec2(1.2,0.9),0.03)/2.;\n    d2+=curtain(uv*vec2(1.05,0.9),0.02)/4.;\n    d2*=S(0.5,0.35,uv.y);\n\tcol=mix(col,vec3(0.8),0.7*d2)*1.3;\n\treturn col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord-iResolution.xy*0.5)/iResolution.y;\n    //uv*=1.1;\n\tvec3 col=window(uv);\n    //col+=window(uv-vec2(0.9,0.))/3.;\n    //col+=window(uv-vec2(-0.9,0.));\n    //col=vec3(monster(uv));\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"wldXDX","date":"1581901446","viewed":290,"name":"window memory","username":"jiaolyulu1","description":"try to create a window, basically just drawing lines and light like on a canvas","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["2d","city","window","curtain"],"hasliked":0,"parentid":"","parentname":""}}