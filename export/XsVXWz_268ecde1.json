{"ver":"0.1","info":{"id":"XsVXWz","date":"1463833052","viewed":767,"name":"random quality measure","username":"FabriceNeyret2","description":"random quality measure\n\nWith random multiplier 3e4 instead of 3213.76,\nthere is an excess of small values, and steps appears ( try rate  .01 line 4 and wait 10'  ).","likes":12,"published":3,"flags":32,"usePreview":0,"tags":["noise","random","hash","rnd"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 O,  vec2 U )\n{\n\tO = texture(iChannel0, U/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// see also https://www.shadertoy.com/view/4sGSD1\n\n  #define rnd(x) fract( 3213.76 * sin( ( x + iTime ) * mat2(1,13.51,73.37,-57.17) ))\n//#define rnd(x) fract( 3e4     * sin( ( x + iTime ) * mat2(1,13.51,73.37,-57.17) ))\n\n#define T(y)   texture( iChannel0, ( U + vec2(0,y) ) /R )\n\nfloat K = .1;  // rate\n\nvoid mainImage( out vec4 O,  vec2 U )\n{\n    vec2 R = iResolution.xy;\n\n    O = T(0.); \n    \n    if (mod(float(iFrame),2.) == 0. && U.y == R.y-1.5) { // --- dust generator on 1st line\n        O = vec4( rnd(U).x < K * (U/R).x );             // probability = gradient\n        return; \n    }\n\n    if (T( 1).x==1.) { O++; return; }    // dust on up cell: transfer here    \n    if (T(-1).x==0.)   O -= O; \t         // free space below: dust could be transfered\n\n    // expected slope in blue\n    float h = K * (float(iFrame)/R.y-1.)/2.;\n    U/=R; if (abs(U.y -U.x*h) < 1./R.y)  if (O.r==0.) O.b = 1.; else O.g = 0.; \n          else if (O.r>0.) O++;\n}","name":"Buf A","description":"","type":"buffer"}]}