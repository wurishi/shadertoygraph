{"ver":"0.1","info":{"id":"ls3czS","date":"1519320002","viewed":1339,"name":"smart blending","username":"FabriceNeyret2","description":"A pseudo-z value is used to blend 2 textures. ( See ref in code header. Inspired by [url=https://www.shadertoy.com/view/Ms3yzS]PZ's[/url] shader)\nHere, I use luminance of MIPmap LOD of the ground - horizontal gradient.\nNote the strength parameter in code.","likes":13,"published":3,"flags":0,"usePreview":0,"tags":["terrain","blur","map","blending","mapping","texturing","splat","short","seamless","splatting","smartblend"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sfGRn","filepath":"/media/a/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","previewfilepath":"/media/ap/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// inspired by PZ's https://www.shadertoy.com/view/Ms3yzS\n// reference: https://www.gamedev.net/articles/programming/graphics/advanced-terrain-texture-splatting-r3287/\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    U /= iResolution.xy;\n\n    vec4 T0  = texture(iChannel0,U*4.).rrrr, // boulders - mushrooms\n         T0z = T0, \n         T1  = texture(iChannel1,U),         // wood - ground\n         T1z = textureLod(iChannel1,U,3.),\n         T2 = texture(iChannel2,U);          // noise - moss\n \n    float v0 = length(T0z.rgb)/3. *2.-1.,    // centered pseudo Z-values\n          v1 = length(T1z.rgb)/3. *2.-1.,\n          x =  2.*U.x - 1.;\n    \n    v1 = 3.*v1+1.2;                          // amplify and uplift ground\n    \n    float strength1 = 1.,\n              mask1 = .5 + strength1* ( v1-v0 - 1.2*x ), // mushrooms/ground\n          strength2 = 2.,\n              mask2 = .5 + strength2 * ( v0 - (-.7));    // mushrooms/moss\n    \n    T0 = mix( T2.x*vec4(0,.5,0,0),           // mushrooms over moss\n              T0*vec4(1 ,.9,1 ,0),\n              clamp( mask2, 0., 1. )\n             );\n    O = mix( T0*vec4(1 ,.9,1 ,0),            // mushroom on ground valleys\n             T1*vec4(.7,.5,.3,0), \n             clamp( mask1, 0., 1. )\n           );\n}","name":"Image","description":"","type":"image"}]}