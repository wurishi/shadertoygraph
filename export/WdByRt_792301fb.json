{"ver":"0.1","info":{"id":"WdByRt","date":"1587118158","viewed":81,"name":"Circle arc","username":"Aratelnar","description":"Draw arc from three points","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["circle","arc"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 center(vec2 a, vec2 b, vec2 c)\n{\n    \n        \n    vec2 ca = c-a;\n    vec2 cb = c-b;\n    \n    mat2 m = mat2(vec2(0,1),vec2(-1,0));\n    \n    ca *= .5;\n    cb *= .5;\n    \n    vec2 a1 = a+ca;\n    vec2 b1 = b+cb;\n    \n    ca *= m;\n    cb *= m;\n    \n    vec2 a2 = a1+ca;\n    vec2 b2 = b1+cb;\n    \n    float r = (a1.y-b1.y)*(b2.x-b1.x)-(a1.x-b1.x)*(b2.y-b1.y);\n    r /= (a2.x-a1.x)*(b2.y-b1.y)-(a2.y-a1.y)*(b2.x-b1.x);\n    return a1 + r*(a2-a1);\n}\n\nfloat angle(vec2 v)\n{\n    if(v.y == 0. && v.x < 0.) return radians(180.);\n    return acos(v.x/length(v))*sign(v.y);\n}\n\nbool circle(vec2 c, float r, float w, vec2 p)\n{\n    float d = length(p-c);\n    return d > r-w/2. && d < r+w/2.;\n}\n\nbool arc(vec2 a, vec2 b, vec2 c, vec2 p)\n{\n    float a1 = angle(a);\n    float b1 = angle(b);\n    float c1 = angle(c);\n    float p1 = angle(p);\n    \n    if(c1 > a1 && c1 < b1) return (p1>a1)&&(p1<b1);\n    else return (p1<a1)||(p1>b1);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord/iResolution.xy);\n    uv.x *= iResolution.x/iResolution.y;\n    \n    vec4 color = vec4(vec3(0.5),1.);\n    \n    float width = 4./length(iResolution.xy);\n    \n    vec2 a = vec2(200,100)/iResolution.xy;\n    vec2 b = vec2(200,200)/iResolution.xy;\n    vec2 c = vec2((b.x + a.x)/2. + .1*sin(iTime),(b.y + 2.*a.y)/3.);\n    \n    vec2 d = center(a,b,c);\n    \n    if(circle(d,length(a-d),width,uv) && arc(a-d,b-d,c-d,uv-d)) color.xyz = vec3(0);\n    \n    if(circle(a,0.,width,uv)) color.xyz = vec3(1,0,0);\n    if(circle(b,0.,width,uv)) color.xyz = vec3(0,1,0);\n    if(circle(c,0.,width,uv)) color.xyz = vec3(0,0,1);\n    if(circle(d,0.,width,uv)) color.xyz = vec3(1,1,1);\n    \n    fragColor = color;\n    \n    //fragColor.xy=uv;\n}","name":"Image","description":"","type":"image"}]}