{"ver":"0.1","info":{"id":"MsBBWt","date":"1502704990","viewed":433,"name":"Spooky Cave","username":"slerpy","description":"Can you see the light at the end of the tunnel?","likes":18,"published":1,"flags":0,"usePreview":0,"tags":["raytracing","simple","tunnel","fog","map","aa","cave"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define TAU 6.28318530718\n\nmat3 rz(float a)\n{\n    float s=sin(a),c=cos(a);\n    return mat3(c,s,0,-s,c,0,0,0,1);\n}\n\nvec3 t(vec3 p){ return abs(p-floor(p)-.5); }\nvec3 s(vec3 p){ return t(p+t(p/4.).zxy).zxy; }\nfloat b(vec3 p){ p.z-=round(p.z); return length(p.xz-.5); }\n\nfloat map(vec3 p)\n{\n\treturn min(.4-length(p.xy)+dot(s(p*rz(p.z/4.)),\n    \tvec3(.6)),b(p*rz(round(p.z)*1.5))-.06);\n}\n\nfloat tracer(vec3 ro, vec3 rd)\n{\n\tfloat t=.0, m;\n\tfor(int i=0; i<56; i++){\n\t\tt += .9 * (m = map(ro+rd*t));\n\t\tif(m<t*1e-3||t>12.)break;\n\t}\n\treturn t;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    float t = .0;\n    for(int i=0; i<4; i++)\n   \t\tt += tracer(vec3(0, 0, iTime-5.),normalize(\n        \tvec3(2.*fragCoord.xy+vec2(i&1,i>>1)-iResolution.xy,\n            \t3.*iResolution.y))*rz(cos(iTime/16.)));\n    \n\tfragColor = vec4(t*t/2304.);\n}","name":"Image","description":"","type":"image"}]}