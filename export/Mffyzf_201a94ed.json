{"ver":"0.1","info":{"id":"Mffyzf","date":"1722865652","viewed":83,"name":"CubeSink","username":"GCScholar","description":"3rd place at 1k intro compo, Assembly Summer 2024","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["intro","1k","assembly"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI=3.141;\n\nvec4 SDF(vec3 P)\n{   \n    float I=0.157, \n    d = length(P.xz), \n    dt = 1., \n    deep = 0.09;\n    \n    vec2 rt = vec2(log(d)+0.3*iTime, atan(P.z,P.x)+0.03*iTime),\n    id = floor(rt/I);\n    \n    P.y += (d < deep) ? (dt=0.5, deep * smoothstep(0.0, deep, deep - d)) : 0.0;\n    \n    P = vec3(mod(rt,I)-I/2.,(P.y+sin(iTime)*sin(P.x)*sin(P.z))/d);\n\n    vec3 q = abs(P)-.05;\n     \n    return vec4(mix(vec3(1.0, 0.5 * fract(sin(dot(id, vec2(13, 78))) * 78.), 0.0), vec3(0), step(0.8, fract(sin(dot(id, vec2(16, 85))) * 78.))),\n    dt*((length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0) -  0.02)*d));\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2.*fragCoord-iResolution.xy)/iResolution.x; \n    vec3 Peye = vec3(0.36, sin(iTime+PI)*-0.1 + 0.07, -0.27);\n    \n    vec3 ww = normalize(Peye), uu = (cross(vec3(0.,1.,0.),ww));\n\n    fragColor = vec4(0);\n    for(float t=0.; t < 10.;)\n    {\n        vec3 P = Peye + t*(uu*uv.x+cross(ww,uu)*uv.y-ww);\n            \n        vec4 C = SDF(P);\n        if(C.w < 1e-3)\n        {\n            vec2 eps = vec2(0.,1e-4);\n            vec3 normal = normalize(vec3(\n                SDF(P+eps.yxx).w - SDF(P-eps.yxx).w, \n                SDF(P+eps.xyx).w - SDF(P-eps.xyx).w, \n                SDF(P+eps.xxy).w - SDF(P-eps.xxy).w));\n       \n            float spec = pow(max(dot(normal, normalize(vec3(0.1,1.,0.1)+Peye)), 0.0), 16.0);     \n            fragColor = sqrt(C.xyzz*dot(normal,vec3(0.57703))+C.xyzz*0.5*max(dot(normal,vec3(0.,1.,0.)),0.)+spec);\n           \n            break;\n        }\n        \n        t+=C.w;\n    }  \n}","name":"Image","description":"","type":"image"}]}