{"ver":"0.1","info":{"id":"ldGfDG","date":"1536158144","viewed":302,"name":"Stereogram attempt","username":"trisslotten","description":"Testing stereogram stuff","likes":13,"published":1,"flags":0,"usePreview":0,"tags":["stereogram"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// https://www.shadertoy.com/view/4djSRW\n#define HASHSCALE1 .1031\nfloat hash12(vec2 p)\n{\n\tvec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\n// http://www.techmind.org/stereo/stech.html\nconst float XDPI = 200.;\nconst float EYE_SEP = XDPI*5.0;\nconst float OBS_DIST = XDPI*12.;\n\n//const float REPEAT = 100.;\n\nconst float BASE_DEPTH = 150.;\nconst float BASE_SEP = EYE_SEP*BASE_DEPTH/(BASE_DEPTH + OBS_DIST);\n\nfloat repHash(vec2 coord)\n{\n    //coord.x = mod(coord.x, REPEAT);\n    return hash12(coord + iTime);\n}\n\n\n\nfloat depthMap(vec2 coord)\n{\n    vec2 v = sin(coord*0.02 + 3.*iTime);\n    \n    return BASE_DEPTH + 20. * v.x*v.y;\n}\n\nvec3 genColor(vec2 fragCoord)\n{\n    vec2 currCoord = fragCoord;\n    for(int i = 0; i < 64; i++)\n    {\n        // http://www.techmind.org/stereo/stech.html \n     \tfloat depth = depthMap(currCoord);\n        float sep = EYE_SEP*depth/(depth + OBS_DIST);\n        sep = floor(sep);\n        if(sep < 1.0 || currCoord.x < 0.0)\n            break;\n        currCoord.x -= sep;\n        currCoord.x = floor(currCoord.x);\n    }\n    return vec3(repHash(currCoord));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\t\n    vec3 col = genColor(fragCoord);\n    \n    \n    vec2 hori_center = vec2(iResolution.x*0.5, iResolution.y*0.9);\n    float dist_l = length(hori_center - vec2(BASE_SEP/2., 0) - fragCoord);\n    float dist_r = length(hori_center + vec2(BASE_SEP/2., 0) - fragCoord);\n    col = mix(col, vec3(1,0,0), smoothstep(6., 4., dist_l));\n    col = mix(col, vec3(1,0,0), smoothstep(6., 4., dist_r));\n    \n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}