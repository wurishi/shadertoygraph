{"ver":"0.1","info":{"id":"4dsBR8","date":"1523616891","viewed":116,"name":"LumExpander","username":"Casheera","description":"LumExpander","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["diffusion","lumexpander","monsterizer"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tfragColor = texture(iChannel0, uv);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4df3zn","filepath":"/media/a/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","previewfilepath":"/media/ap/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define PI 3.14159265359\n#define DPI 6.28318530718\nint sn=3; // number of samples\nfloat r =5.7; // max pixel shift radius\n#define addnoise 1\n\nfloat lum(vec3 a){\n    return length(a*vec3(0.299, .587, .114));\n}\nfloat rand(vec2 co, float s)\n{\n return fract(sin(dot(co.xy ,vec2(12.9898+s,78.233-s))) * 43758.5453*s);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 c;\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    if (mod(float(iFrame), 5.0) == 0.0 || iMouse.z>0.0) \n    {\n        c = texture(iChannel0, uv).rgb;\n    }\n    else\n    {\n        float lacc = lum(texture(iChannel1, uv).rgb);\n        vec2 aov = vec2(0.);\n        for (int i=0; i< sn; i++)\n        {\n            float a = DPI*float(i)/float(sn);\n            vec2 ov = r * vec2(sin(a), cos(a))/iResolution.xy;\n            float lcur = lum(texture(iChannel1, uv + ov).rgb);\n            lacc += lcur;\n        \taov += ov*sin(lcur*6.);\n        }\n        aov = aov/lacc/float(sn);\n        c = texture(iChannel1, uv + aov).rgb;\n        #if addnoise == 1\n        c = c*(0.957+0.2*rand(uv*iTime*0.03, 2.234));\n        #endif\n    }\n    fragColor = vec4(c, 1.0);\n    \n}","name":"Buffer A","description":"","type":"buffer"}]}