{"ver":"0.1","info":{"id":"l3lBWH","date":"1728346187","viewed":31,"name":"exp(-t)*(cos(x)*cos(y)*cos(z))^n","username":"FordPerfect","description":"Explicit expressions for integral on a ray in scalar field (cos(x)*cos(y)*cos(z))^n with exponential decay, for n={2,4}.","likes":2,"published":3,"flags":0,"usePreview":0,"tags":["grid"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Public Domain under http://unlicense.org, see link for details.\n\n// Explicit expressions for integral on a ray in scalar field (cos(x)*cos(y)*cos(z))^n with exponential decay, for n={2,4}.\n\n// Obtained in Maxima via grind(ratsimp(trigreduce((cos(X+x*t)*cos(Y+y*t)*cos(Z+z*t))^n),t)).\n// Somewhat inspired by https://www.shadertoy.com/view/3lByRK and\n// https://www.shadertoy.com/view/WlByzc.\n\n// Integral of cos(A*t+B)*exp(-C*t) on [0;inf).\nfloat f(float C,float A,float B)\n{\n    return (C*cos(B)-A*sin(B))/(A*A+C*C);\n}\n\nfloat g2(vec3 A,vec3 B,float C)\n{\n    vec3 e=vec3(-2,0,+2);\n    return (\n        f(C,dot(A,e.zzz),dot(B,e.zzz))+\n        f(C,dot(A,e.xzz),dot(B,e.xzz))+\n        f(C,dot(A,e.zxz),dot(B,e.zxz))+\n        f(C,dot(A,e.zzx),dot(B,e.zzx)))/32.0+(\n        f(C,dot(A,e.zzy),dot(B,e.zzy))+\n        f(C,dot(A,e.zxy),dot(B,e.zxy))+\n        f(C,dot(A,e.zyz),dot(B,e.zyz))+\n        f(C,dot(A,e.xyz),dot(B,e.xyz))+\n        f(C,dot(A,e.yzz),dot(B,e.yzz))+\n        f(C,dot(A,e.yzx),dot(B,e.yzx)))/16.0+(\n        f(C,dot(A,e.zyy),dot(B,e.zyy))+\n        f(C,dot(A,e.yzy),dot(B,e.yzy))+\n        f(C,dot(A,e.yyz),dot(B,e.yyz))+\n        1.0/C)/8.0;\n}\n\nfloat g4(vec3 A,vec3 B,float C)\n{\n    float x=A.x,y=A.y,z=A.z;\n    float X=B.x,Y=B.y,Z=B.z;\n    return (\n        +f(C,4.0*z+4.0*y+4.0*x,+4.0*Z+4.0*Y+4.0*X)\n        +f(C,4.0*z+4.0*y-4.0*x,+4.0*Z+4.0*Y-4.0*X)\n        +f(C,4.0*z-4.0*y+4.0*x,+4.0*Z-4.0*Y+4.0*X)\n        +f(C,4.0*z-4.0*y-4.0*x,+4.0*Z-4.0*Y-4.0*X)\n        +4.0*f(C,4.0*z+4.0*y+2.0*x,+4.0*Z+4.0*Y+2.0*X)\n        +4.0*f(C,4.0*z+4.0*y-2.0*x,+4.0*Z+4.0*Y-2.0*X)\n        +4.0*f(C,4.0*z+2.0*y+4.0*x,+4.0*Z+2.0*Y+4.0*X)\n        +4.0*f(C,4.0*z+2.0*y-4.0*x,+4.0*Z+2.0*Y-4.0*X)\n        +4.0*f(C,4.0*z-2.0*y+4.0*x,+4.0*Z-2.0*Y+4.0*X)\n        +4.0*f(C,4.0*z-2.0*y-4.0*x,+4.0*Z-2.0*Y-4.0*X)\n        +4.0*f(C,4.0*z-4.0*y+2.0*x,+4.0*Z-4.0*Y+2.0*X)\n        +4.0*f(C,4.0*z-4.0*y-2.0*x,+4.0*Z-4.0*Y-2.0*X)\n        +4.0*f(C,2.0*z+4.0*y+4.0*x,+2.0*Z+4.0*Y+4.0*X)\n        +4.0*f(C,2.0*z+4.0*y-4.0*x,+2.0*Z+4.0*Y-4.0*X)\n        +4.0*f(C,2.0*z-4.0*y+4.0*x,+2.0*Z-4.0*Y+4.0*X)\n        +4.0*f(C,2.0*z-4.0*y-4.0*x,+2.0*Z-4.0*Y-4.0*X)\n        +6.0*f(C,4.0*z+4.0*y,+4.0*Z+4.0*Y)\n        +6.0*f(C,4.0*z-4.0*y,+4.0*Z-4.0*Y)\n        +6.0*f(C,4.0*z+4.0*x,+4.0*Z+4.0*X)\n        +6.0*f(C,4.0*z-4.0*x,+4.0*Z-4.0*X)\n        +6.0*f(C,4.0*y+4.0*x,+4.0*Y+4.0*X)\n        +6.0*f(C,4.0*y-4.0*x,+4.0*Y-4.0*X)\n        +16.0*f(C,4.0*z+2.0*y+2.0*x,+4.0*Z+2.0*Y+2.0*X)\n        +16.0*f(C,4.0*z+2.0*y-2.0*x,+4.0*Z+2.0*Y-2.0*X)\n        +16.0*f(C,4.0*z-2.0*y+2.0*x,+4.0*Z-2.0*Y+2.0*X)\n        +16.0*f(C,4.0*z-2.0*y-2.0*x,+4.0*Z-2.0*Y-2.0*X)\n        +16.0*f(C,2.0*z+4.0*y+2.0*x,+2.0*Z+4.0*Y+2.0*X)\n        +16.0*f(C,2.0*z+4.0*y-2.0*x,+2.0*Z+4.0*Y-2.0*X)\n        +16.0*f(C,2.0*z+2.0*y+4.0*x,+2.0*Z+2.0*Y+4.0*X)\n        +16.0*f(C,2.0*z-2.0*y+4.0*x,+2.0*Z-2.0*Y+4.0*X)\n        +16.0*f(C,2.0*z+2.0*y-4.0*x,+2.0*Z+2.0*Y-4.0*X)\n        +16.0*f(C,2.0*z-2.0*y-4.0*x,+2.0*Z-2.0*Y-4.0*X)\n        +16.0*f(C,2.0*z-4.0*y+2.0*x,+2.0*Z-4.0*Y+2.0*X)\n        +16.0*f(C,2.0*z-4.0*y-2.0*x,+2.0*Z-4.0*Y-2.0*X)\n        +24.0*f(C,4.0*z-2.0*y,+4.0*Z-2.0*Y)\n        +24.0*f(C,4.0*z+2.0*y,+4.0*Z+2.0*Y)\n        +24.0*f(C,4.0*z+2.0*x,+4.0*Z+2.0*X)\n        +24.0*f(C,4.0*z-2.0*x,+4.0*Z-2.0*X)\n        +24.0*f(C,2.0*z+4.0*y,+2.0*Z+4.0*Y)\n        +24.0*f(C,2.0*z-4.0*y,+2.0*Z-4.0*Y)\n        +24.0*f(C,2.0*z+4.0*x,+2.0*Z+4.0*X)\n        +24.0*f(C,2.0*z-4.0*x,+2.0*Z-4.0*X)\n        +24.0*f(C,4.0*y+2.0*x,+4.0*Y+2.0*X)\n        +24.0*f(C,4.0*y-2.0*x,+4.0*Y-2.0*X)\n        +24.0*f(C,2.0*y+4.0*x,+2.0*Y+4.0*X)\n        +24.0*f(C,2.0*y-4.0*x,+2.0*Y-4.0*X)\n        +36.0*f(C,4.0*z,+4.0*Z)\n        +36.0*f(C,4.0*y,+4.0*Y)\n        +36.0*f(C,4.0*x,+4.0*X)\n        +64.0*f(C,2.0*z+2.0*y+2.0*x,+2.0*Z+2.0*Y+2.0*X)\n        +64.0*f(C,2.0*z+2.0*y-2.0*x,+2.0*Z+2.0*Y-2.0*X)\n        +64.0*f(C,2.0*z-2.0*y+2.0*x,+2.0*Z-2.0*Y+2.0*X)\n        +64.0*f(C,2.0*z-2.0*y-2.0*x,+2.0*Z-2.0*Y-2.0*X)\n        +96.0*f(C,2.0*z+2.0*y,+2.0*Z+2.0*Y)\n        +96.0*f(C,2.0*z-2.0*y,+2.0*Z-2.0*Y)\n        +96.0*f(C,2.0*z+2.0*x,+2.0*Z+2.0*X)\n        +96.0*f(C,2.0*z-2.0*x,+2.0*Z-2.0*X)\n        +96.0*f(C,2.0*y+2.0*x,+2.0*Y+2.0*X)\n        +96.0*f(C,2.0*y-2.0*x,+2.0*Y-2.0*X)\n        +144.0*f(C,2.0*z,+2.0*Z)\n        +144.0*f(C,2.0*y,+2.0*Y)\n        +144.0*f(C,2.0*x,+2.0*X)\n        +108.0/C)/2048.0;\n}\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord)\n{\n    vec2 xy=(2.0*fragCoord-iResolution.xy)/iResolution.y;\n    vec3 ro=5.0*cos(0.037*vec3(17,19,23)*iTime);\n    vec3 rd=normalize(vec3(xy,-1.5));\n    vec4 q=normalize(cos(0.01*vec4(17,37,19,23)*iTime));\n    rd=rd+2.0*cross(q.xyz,cross(q.xyz,rd)+q.w*rd);\n    vec3 col=vec3(0.0625,0.5,0.0625)*g4(rd,ro,0.125);\n    col=mix(12.92*col,1.055*pow(col,vec3(1.0/2.4))-0.055,step(0.0031308,col)); // sRGB\n    fragColor=vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}