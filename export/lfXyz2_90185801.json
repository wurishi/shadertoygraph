{"ver":"0.1","info":{"id":"lfXyz2","date":"1721316903","viewed":43,"name":"[ARTS1308] GPU Sound","username":"ARTS1308","description":"Super simple example. ah vous dirai-je maman\nTwo instruments, resp. from\nhttps://www.shadertoy.com/view/ddtyzH\nhttps://www.shadertoy.com/view/ldXXDj","likes":2,"published":1,"flags":8,"usePreview":0,"tags":["gpusound"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// hash from https://www.shadertoy.com/view/XlGcRh\nvec3 hash31(float p)\n{\n   vec3 p3 = fract(vec3(p,p,p) * vec3(.1031, .1030, .0973));\n   p3 += dot(p3, p3.yzx+33.33);\n   return fract((p3.xxy+p3.yzz)*p3.zyx);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = vec4(0.);\n    for (int i = 0; i < 200; i++) {\n        vec3 rand = hash31(float(i));\n        vec2 center = rand.xy;\n        float shine = rand.z;\n        float sd = 0.01 - length(fragCoord/iResolution.x - center);\n        fragColor += (1. + sin(iTime * rand.z * 5.)) * .5 * shine * smoothstep(0., 0.01, sd);\n    }\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define p 1.059463094\n#define tau 6.2831\n\n//piano from https://www.shadertoy.com/view/ddtyzH\nfloat instrument1(int n, float t, float t0) {\n    if (t < t0) return 0.;\n    else {\n        float freq = 440. * p * p * pow(p, float(n));\n        float f = 0., a = 1.;\n        for (float k = 1.; k < 4.; k++) {\n            f += a * sin(tau * mod(freq * k * t, 1.)) * exp(-3.0*(t-t0)) ;\n            a /= 2.;\n        }\n        return f;\n    }\n}\n\n//from iq's pirate https://www.shadertoy.com/view/ldXXDj\nfloat instrument2(int n, float t, float t0) {\n    if (t < t0) return 0.;\n    else {\n        float dt = t-t0;\n        float freq = 440. * p * p * pow(p, float(n));\n        float ph = 1.0;\n        \n        ph *= sin(6.283185*freq*dt*2.0);\n        ph *= 0.5+0.5*max(0.0,5.0-0.01*freq);\n        ph *= exp(-dt*freq*0.2);\n        \n        float f = 0.;\n        f += 0.70*sin(1.00*tau*freq*dt+ph)*exp2(-0.7*0.007*freq*dt);\n        f += 0.20*sin(2.01*tau*freq*dt+ph)*exp2(-0.7*0.011*freq*dt);\n        f += 0.20*sin(3.01*tau*freq*dt+ph)*exp2(-0.7*0.015*freq*dt);\n        f += 0.16*sin(4.01*tau*freq*dt+ph)*exp2(-0.7*0.018*freq*dt);\n        f += 0.13*sin(5.01*tau*freq*dt+ph)*exp2(-0.7*0.021*freq*dt);\n        f += 0.10*sin(6.01*tau*freq*dt+ph)*exp2(-0.7*0.027*freq*dt);\n        f += 0.09*sin(8.01*tau*freq*dt+ph)*exp2(-0.7*0.030*freq*dt);\n        f += 0.07*sin(9.01*tau*freq*dt+ph)*exp2(-0.7*0.033*freq*dt);\n/*        \n        f += 0.35*f*f*f;\n        f += 0.10*f*f*f;\n       \n        f *= 1.0 + 1.5*exp(-8.0*dt);\n        f *= clamp( dt/0.004, 0.0, 1.0 );\n\n        f *= 2.5-1.5*clamp( log2(freq)/10.0,0.0,1.0);\n//*/        \n        return f;\n    }\n}\n\n//choose instrument\nfloat play(int n, float t, float t0) {\n    return instrument1(n, t, t0);\n}\n\n#define C 1\n#define D 3\n#define E 5\n#define F 6\n#define G 8\n#define A 10\n#define B 12\n\n#define PLAYNOTE(i) s+=play(i, t, t0);t0+=1.;\n\nvec2 mainSound( int samp, float time )\n{\n    // A 440 Hz wave that attenuates quickly overt time\n    float s = 0.;\n    float t = mod(time, 50.);\n    float t0 = 0.;\n    PLAYNOTE(C) PLAYNOTE(C) PLAYNOTE(G) PLAYNOTE(G) PLAYNOTE(A) PLAYNOTE(A) PLAYNOTE(G)\n    t0+=1.;\n    PLAYNOTE(F) PLAYNOTE(F) PLAYNOTE(E) PLAYNOTE(E) PLAYNOTE(D) PLAYNOTE(D) PLAYNOTE(C)\n    t0+=1.;\n    PLAYNOTE(G) PLAYNOTE(G) PLAYNOTE(F) PLAYNOTE(F) PLAYNOTE(E) PLAYNOTE(E) PLAYNOTE(D)\n    t0+=1.;\n    PLAYNOTE(G) PLAYNOTE(G) PLAYNOTE(F) PLAYNOTE(F) PLAYNOTE(E) PLAYNOTE(E) PLAYNOTE(D)\n    t0+=1.;\n    PLAYNOTE(C) PLAYNOTE(C) PLAYNOTE(G) PLAYNOTE(G) PLAYNOTE(A) PLAYNOTE(A) PLAYNOTE(G)\n    t0+=1.;\n    PLAYNOTE(F) PLAYNOTE(F) PLAYNOTE(E) PLAYNOTE(E) PLAYNOTE(D) PLAYNOTE(D) PLAYNOTE(C)\n\n    return vec2(s);\n}","name":"Sound","description":"","type":"sound"}]}