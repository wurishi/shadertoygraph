{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"// Written by GLtracy\n\nfloat tri( vec2 p0, vec2 p1, vec2 p2, vec2 v ) {\n\tvec2 e0 = p1 - p0;\n\tvec2 e1 = p2 - p1;\n\tvec2 e2 = p0 - p2;\n\t\n\tfloat len0 = length( e0 );\n\tfloat len1 = length( e1 );\n\tfloat len2 = length( e2 );\n\t\n\te0 /= len0;\n\te1 /= len1;\n\te2 /= len2;\n\t\n\tp0 = v - p0;\n\tp1 = v - p1;\n\tp2 = v - p2;\n\t\n\tfloat h0 = dot( p0, vec2( e0.y, -e0.x ) );\n\tfloat h1 = dot( p1, vec2( e1.y, -e1.x ) );\n\tfloat h2 = dot( p2, vec2( e2.y, -e2.x ) );\n\t\n\t// cw\n\tif ( e0.x * e1.y - e0.y * e1.x < 0.0 ) {\n\t\th0 = -h0;\n\t\th1 = -h1;\n\t\th2 = -h2;\n\t}\n\t\n\t// inside\n\tfloat m = max( max( h0, h1 ), h2 );\n\tif ( m <= 0.0 ) {\n\t\treturn m;\n\t}\n\t\n\t// side\n\tvec3 t = vec3( dot( p0, e0 ), dot( p1, e1 ), dot( p2, e2 ) );\n\t\n\tvec3 s = step( 0.0, t ) * step( t, vec3( len0, len1, len2 ) );\n\t\n\th0 *= s.x;\n\th1 *= s.y;\n\th2 *= s.z;\n\t\n\tfloat n = max( max( h0, h1 ), h2 );\n\tif ( n > 0.0 ) {\n\t\treturn n;\n\t}\n\t\n\t// corner\n\tfloat d0 = length( p0 );\n\tfloat d1 = length( p1 );\n\tfloat d2 = length( p2 );\n\treturn min( min( d0, d1 ), d2 );\n}\n\n// math\nmat2 rot2( float angle ) {\n\tfloat c = cos( angle );\n\tfloat s = sin( angle );\n\t\n\treturn mat2(\n\t\t c, s,\n\t\t-s, c\n\t);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 v = ( fragCoord.xy * 2.0 - iResolution.xy ) / min( iResolution.x, iResolution.y );\n\t\n\tmat2 r = rot2( sin( iTime * 0.5 ) * 3.14 );\n\t\n\tvec2 p0 = r * vec2( -1.3, -0.76 );\n\tvec2 p1 = r * vec2(  0.0,  0.73 );\n\tvec2 p2 = r * vec2(  1.3,  0.03 );\n\t\n\tvec2 p3 = vec2( -1.4,  0.76 ) * r;\n\tvec2 p4 = vec2(  0.6,  0.63 ) * r;\n\tvec2 p5 = vec2(  0.8, -0.58 ) * r;\n\t\n\tfloat d1 = tri( p0, p1, p2, v );\n\tfloat d2 = tri( p3, p4, p5, v );\n\t\n\tfloat d = max( d1, -d2 );\n\tconst float band = 0.2;\n\t\n\td = clamp( d / band, -1.0, +1.0 );\n\t\n\tfragColor =\n\t\tvec4( 0.5, 0.7, 0.3, 0.0 ) * max( d, 0.0) +\n\t\tvec4( 0.2, 0.4, 0.7, 0.0 ) * max(-d, 0.0) +\n\t\tvec4( 1.0, 1.0, 1.0, 0.0 ) * ( 1.0 - smoothstep( 0.0, 0.04, abs( d ) ) );\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XdXXW2","date":"1406712250","viewed":391,"name":"TSDF of Triangles","username":"gltracy","description":"samples for truncated signed distance field of triangles. green is outside, blue is inside, white line is zero surface.","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["tsdf"],"hasliked":0,"parentid":"","parentname":""}}