{"ver":"0.1","info":{"id":"mlKfDt","date":"1702665317","viewed":20,"name":"Spiral galaxy doodle","username":"vegardno","description":"covid doodle","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["asdf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    fragColor = texture(iChannel0, uv);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// https://stackoverflow.com/questions/12964279/whats-the-origin-of-this-glsl-rand-one-liner\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\n// https://www.shadertoy.com/view/wlsSRB\nvec3 hsv2rgb2(vec3 c, float k) {\n    vec4 K = vec4(3. / 3., 2. / 3., 1. / 3., 3.);\n    vec3 p = smoothstep(0. + k, 1. - k,\n        .5 + .5 * cos((c.xxx + K.xyz) * radians(360.)));\n    return c.z * mix(K.xxx, p, c.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 tex_uv = fragCoord / iResolution.xy;\n    vec2 uv = (2. * fragCoord - iResolution.xy) / iResolution.y;\n    \n    tex_uv = tex_uv - .5;\n    \n    float t = radians(2.);\n    vec2 cs = vec2(cos(t), sin(t));\n    tex_uv *= mat2(cs.x, cs.y, -cs.y, cs.x);\n    tex_uv *= .99;\n    tex_uv = tex_uv + .5;\n    \n    vec3 col = .995 * texture(iChannel0, tex_uv).rgb;\n\n#if 0\n    {\n        float t = radians(2.) * float(iFrame);\n        float a = smoothstep(0., 1., float(iFrame) / 60.);\n        float d = (length(uv - .1 * a * vec2(cos(t), sin(t))) - .01);\n        col += vec3(1.) * smoothstep(1., -1., d * iResolution.y);\n    }\n#endif\n\n#if 0\n    for (int i = 0; i < 10; ++i) {\n        float a = radians(360.) * rand(uv + float(i + iFrame));\n        float r = rand(uv + float(i + iFrame) + 100.);\n        vec2 pos = .5 * r * vec2(cos(a), sin(a));\n        float d = (length(uv - pos) - .01);\n        col += vec3(1.) * smoothstep(1., -1., d * iResolution.y);\n    }\n#endif\n\n    for (int i = 0; i < 30; ++i) {\n        float a = radians(2.) * (rand(vec2(i)) - .5);\n        float t = a * float(iFrame);\n        float r = smoothstep(0., 1., float(iFrame) / 1000.) * rand(vec2(i + 100)) * .3;\n        float d = (length(uv - r * vec2(cos(t), sin(t))) - .005);\n        col += hsv2rgb2(vec3(.5 + .5 * rand(vec2(i + 50)), 1., 1.), .07) * smoothstep(1., -1., d * iResolution.y);\n    }\n\n    col = min(col, vec3(2.));\n    fragColor = vec4(col, 1.);\n}","name":"Buffer A","description":"","type":"buffer"}]}