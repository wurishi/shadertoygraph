{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#define number_of_spheres 20\n#define far_clip_plane 27.0\n#define hardness 25.0\n\nstruct sphere{\n    vec3 p;\n    vec3 col;\n    float r;\n};\n\nfloat dist(vec2 a, vec2 b){\n    float d = (a.x - b.x)*(a.x - b.x) + (a.y - b.y)*(a.y - b.y);\n    return sqrt(d);\n}\n\nfloat rand(float n){\n\tn = n*12945.72183;\n\tn = 10.0+sin((n - ceil(n))*539.389167)*79.185179;\n\treturn (cos(n)+1.0)/2.0;\n}\n\nfloat circle(float d){\n    d = clamp(d,0.0,1.0);\n    return 1.0-sqrt(1.0-(d*d));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = (fragCoord.xy / iResolution.x) - vec2(0.5,0.3);\n    vec3 col = vec3(1.0-dist(uv,vec2(0.0)))*vec3(0.08,0.03,0.01);\n    sphere spheres[number_of_spheres];\n    for(int i = 0; i < number_of_spheres; i++){\n        sphere s;\n        float fi = float(i);\n        s.p = vec3(rand(fi-100.2)*5.0*cos(iTime*rand(fi-9.0)+rand(fi-1.3)),rand(fi+1.2)*5.0*sin(iTime*rand(fi+9.0)+rand(fi-12.2)),sin(iTime+rand(fi*100.0)*200.0)*5.0+20.0);\n        s.r = 1.0;\n        s.col = vec3(rand(fi),rand(fi+10.0),rand(fi*20.0));\n        spheres[i] = s;\n    }\n    float zold = far_clip_plane;\n    for(int i = 0; i < number_of_spheres; i++){\n        sphere s = spheres[i];\n        vec2 p = vec2(s.p.x/s.p.z, s.p.y/s.p.z);\n        float d = dist(p,uv) / (s.r/s.p.z);\n        float edge = clamp((1.0-d)*hardness,0.0,1.0);\n        float znew = circle(d)*s.r + s.p.z;\n        float m = clamp((zold-znew)*hardness/2.0,0.0,1.0)*edge;\n        float c = (0.3+circle(dist(p,uv)/(s.r/s.p.z))*((far_clip_plane-znew)/far_clip_plane));\n        col = mix(col,vec3(c)*s.col,m);\n        zold = mix(zold,znew,m);\n    }\n\tfragColor = vec4(pow(col,vec3(0.4545)),1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4dSSD1","date":"1411333680","viewed":213,"name":"fuzzy spheres","username":"Liquos","description":"attempting c++ with only python knowledge..","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["spheres"],"hasliked":0,"parentid":"","parentname":""}}