{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"music","id":"4dfGzn","filepath":"/media/a/ec8a6ea755d34600547a5353f21f0a453f9f55ff95514383b2d80b8d71283eda.mp3","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"#define PI 3.14159265359\n\nconst int METABALL_COUNT = 8;\nconst float TIME_SCALE = 0.7;\nconst float STROKE_SIZE = 0.04;\nconst float STROKE_SPACING = 0.02;\nconst int STROKES = 9;\n\n// Borrowed this method from here:\n// https://www.shadertoy.com/view/XsfGDS\n// Still not quite sure how sound sampling works.\nfloat sampleMusic()\n{\n\treturn 0.5 * (\n\t\ttexture( iChannel0, vec2( 0.15, 0.25 ) ).x + \n\t\ttexture( iChannel0, vec2( 0.30, 0.25 ) ).x);\n}\n\nfloat metaball(vec2 pos, float r)\n{\n\treturn r / dot(pos, pos);\n}\n\nfloat metaring(vec2 uv, float range, float offset, float radius, bool clockwise)\n{\n    float m = 0.0;\n    float d = 0.0;\n    //bool clockwise = false;\n    float spacing = (PI*2.0) / float(METABALL_COUNT);\n    \n    for(int i = 0; i < METABALL_COUNT; i++)\n    {\n        float multiplier = clockwise ? -1.0 : 1.0;\n        float time = ((iTime * TIME_SCALE) + offset) * multiplier;\n        \n        vec2 pos = uv + vec2(cos(d + time), sin(d + time)) * range;\n        \n        m += metaball(pos, radius);\n \t\td += spacing;\n        \n        // Uncomment this line for extra funkyness\n        clockwise = !clockwise;\n    }\n    \n    return m;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    uv = uv * 2.0 - 1.0;\n    uv.y *= iResolution.y / iResolution.x;\n    \n    float m = metaring(uv, sampleMusic() * 0.5, 0.0, 0.002, true) +\n        \tmetaring(uv, 0.3 + sampleMusic() * 0.1, 0.5, 0.002, false) +\n        \tmetaring(uv, 0.15, 0.5, 0.00015, false);\n    \n    for(int i = 0; i < STROKES; i++)\n    {\n        float iF = float(i);\n  \t\tfloat top = 1.0 - STROKE_SIZE * iF - STROKE_SPACING * iF;\n        float bottom = 1.0 - STROKE_SIZE * (iF+1.0) - STROKE_SPACING * iF;\n        \n        if(m > bottom && m < top)\n        {\n            float s = sin(iTime * 2.0) * 0.5 + 1.0;\n            \n            fragColor = mix(vec4(1.0 - s, 0.0, s, 1.0), vec4(0.6, 1.0, 0.6, 1.0), iF / float(STROKES));\n        }\n    }\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lsjXzD","date":"1409949692","viewed":229,"name":"Dancing Metaballs","username":"mathiassoeholm","description":"So this happened..","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["metaballs","abstract","dancing"],"hasliked":0,"parentid":"","parentname":""}}