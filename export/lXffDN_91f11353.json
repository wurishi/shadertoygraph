{"ver":"0.1","info":{"id":"lXffDN","date":"1728405523","viewed":25,"name":"Golden Ratio Flower","username":"zeroDarkThirty","description":"Golden Ratio\n\nhttps://www.youtube.com/watch?v=sj8Sg8qnjOg","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["goldenratio","phyllotaxis"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n// circle function\nfloat cir(vec2 pos) {return .00001/(pos.x*pos.x + pos.y*pos.y);}\n\n// degree to rad function\nfloat d2r(float a){return 3.14159*a/180.;}\n\n// rotate function\nvec2 rz( float a, vec2 r){float xc = r.x*cos(a) - r.y*sin(a);float yc = r.x*sin(a) + r.y*cos(a);return vec2( xc, yc );}\n\n// polar function\nfloat seed(vec2 r, float d,float a){vec2 arm = rz(d2r(a),d*vec2(1.0,0.0));return cir(r+arm);}\n\n// get data from buffer a\nvec3 getData(in int intID)\n{\n    int iChannel0_width = int(iChannelResolution[0].x);\n    ivec2 coord = ivec2(intID % iChannel0_width, intID / iChannel0_width);\n    return texelFetch(iChannel0, coord, 0).xyz;\n}\n\n// get pallete https://www.shadertoy.com/view/ll2GD3\nvec3 pal( in float t){return vec3(0.5,0.5,0.5) + vec3(0.5,0.5,0.5)*cos( 6.28318*(vec3(1.0,1.0,1.0)*t+vec3(0.0,0.33,0.67)) );}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 r = -vec2(fragCoord.x/iResolution.x,fragCoord.y/iResolution.x);\n    r += vec2(.5,.5*iResolution.y/iResolution.x);\n    float s = 0.0;\n    for(int i = 0; i < N; ++i)\n    {\n        vec3 data = getData(i);\n        s += seed(r,data.x,data.y+30.0*iTime)*data.z;\n    }\n    fragColor = vec4(vec3(.2)+s*pal(1.0-2.0*length(r)),1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    int intID = int(floor(fragCoord.x) + iResolution.x * floor(fragCoord.y));\n    if(intID >= N) return;\n    float tr = 1.618 + .001*iMouse.x/iResolution.x;\n    float a = tr*360.0*float(intID); //angle\n    //float r = .01*pow(float(intID),.5); //radius\n    float r = .001*float(intID); //radius\n    float alpha = 1.0;\n    if (float(intID)/20.0 > iTime)\n    {\n        alpha*=0.0;\n    }\n    fragColor = vec4(r,a,alpha,0.0);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"const int N = 700;\n","name":"Common","description":"","type":"common"}]}