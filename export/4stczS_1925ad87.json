{"ver":"0.1","info":{"id":"4stczS","date":"1519465128","viewed":104,"name":"rational function","username":"cailuming","description":"I have trouble with drawing rational function which seems to have different width and discontinuous edge , any one who can help me?","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["figure"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4df3Rn","filepath":"/media/a/3c33c415862bb7964d256f4749408247da6596f2167dca2c86cc38f83c244aa6.mp3","previewfilepath":"/media/ap/3c33c415862bb7964d256f4749408247da6596f2167dca2c86cc38f83c244aa6.mp3","type":"music","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define AXIS_WIDTH 0.004\n#define BIAS 1e-15\n \nvoid RationalFunc(inout vec3 col,vec2 uv){\n   \n    uv*=5.*(1.0+0.2*sin(iTime));\n    \n    float fx = 1.0/(-uv.x);\n    \n    float v = uv.y-fx;\n    if(abs(uv.x)>=0.1){\n       v=1.0/(abs(v)/fwidth(v));\n    }else{\n       v=0.0;\n    }\n    \n    \n    col = mix(col,vec3(v),0.5);\n \n}\n \n\nvoid Axis (inout vec3 col,vec2 uv,float as){\n    float vx = AXIS_WIDTH/as/abs(uv.x);\n    float vy = AXIS_WIDTH/abs(uv.y);\n    \n    vx=pow(vx,2.0);\n    vy=pow(vy,2.0);\n    \n    col=vec3(vx*0.2,vx*0.2,vx);   \n    col= mix(col,vec3(vy,vy*0.3,vy*0.2),0.5);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy - vec2(0.5);\n    vec2 ms = iMouse.xy/iResolution.xy - vec2(0.5);\n    float as = iResolution.x/iResolution.y;\n \n    uv.x*=as;\n    ms.x*=as;\n    if(length(iMouse.zw)>0.){\n       uv-= ms;\n    }\n    vec3 col =vec3(0);\n    \n    Axis(col,uv,as);\n    RationalFunc(col,uv);\n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}