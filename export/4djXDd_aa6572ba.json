{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"const int MAX_HARMONIC = 4;\nconst int MAX_INSTRUMENTS = 4;\nconst int MAX_GRIDSIZE = 4;\n\nstruct Signal {\n\tvec2  gridSize;\n    float radius;\n    float brightness;\n    };\n    \nstruct Instrument {\n\tSignal harmonics0;\n    Signal harmonics1;\n    Signal harmonics2;\n    Signal harmonics3;\n    \n    vec3 color; \n    \n};\n    \nconst Instrument instruments0 = Instrument\n    ( Signal(vec2(1.0, 1.0), 0.25, 0.5)\n    , Signal(vec2(2.0, 2.0), 0.10, 0.5)\n    , Signal(vec2(4.0, 4.0), 0.30, 1.0)\n    , Signal(vec2(8.0, 8.0), 0.40, 1.0)\n    , vec3(0.0, 1.0, 0.0)\n    );\n\n\n\nfloat circle (float radius, vec2 position) {    \n   vec2 px = dFdx (position);\n   vec2 py = dFdy (position); \n   \n   float fx = (2.0*position.x)*px.x + (2.0*position.y)*px.y;\n   float fy = (2.0*position.x)*py.x + (2.0*position.y)*py.y;\n   float bottom = sqrt(fx*fx + fy*fy);  \n   // Signed distance  \n   float sd = (dot(position, position) - radius*radius)/bottom;\n   // Linear alpha  \n   float alpha = 0.5 - sd;  \n\n   if (alpha > 1.0)  {       // Inside  \n     return 1.0;\n   } else if (alpha < 0.0) { // Outside  \n     return 0.0;\n   } else {                  // Near boundary  \n     return alpha;\n   }\n}\n\nfloat circleGrid(vec2 count, float radius, vec2 position) {\n   vec2 q = mod(position,count)-0.5*count;\n   return circle(radius, q);\n}\n\nfloat drawSignal(vec2 position, Signal signal) {\n\treturn signal.brightness * circleGrid(signal.gridSize, signal.radius, position);   \n}\n\nvec3 drawInstrument(vec2 position, Instrument instrument) {\n  return instrument.color * (drawSignal(position, instrument.harmonics0)\n  \t   + drawSignal(position, instrument.harmonics1)\n  \t   + drawSignal(position, instrument.harmonics2)\n  \t   + drawSignal(position, instrument.harmonics3));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\t\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    uv.y *= iResolution.y / iResolution.x;\n\tfragColor = vec4(drawInstrument(uv, instruments0), 1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4djXDd","date":"1417327328","viewed":148,"name":"circle_grid","username":"jfischoff","description":"A grid of circles. Just one circle so far.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["gridcircle"],"hasliked":0,"parentid":"","parentname":""}}