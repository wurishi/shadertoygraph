{"ver":"0.1","info":{"id":"XtsfRM","date":"1511394967","viewed":185,"name":"VGA EMU","username":"TomCat","description":"Framework for testing DOS VGA effects. Useful for prototyping DOS intros.\nIf you use variables timer and vmem instead of fragCoord and iTime\nthen your shader will be easily convertable to DOS VGA.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["vga","dos"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Emulating DOS VGA enviroment - code by TomCat/Abaddon\n// you can use it as you want...\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    // 046CH BIOS variable, INT8 counter speed 18.2Hz\n    int timer=int(iTime*105./88.*1000000./65536.);\n\n    // video memory offset, DI register for STOSB\n    int vmem=int(fragCoord.x/iResolution.x*320.)+320*int((iResolution.y-fragCoord.y)/iResolution.y*200.);\n\n    // indexed color palette, DAC array\n    vec3 pal[256];\n\n    // default colors for VGA video mode 13H\n    pal[0]=vec3(0,0,0);\n    pal[1]=vec3(0,0,42);\n    pal[2]=vec3(0,42,0);\n    pal[3]=vec3(0,42,42);\n    pal[4]=vec3(42,0,0);\n    pal[5]=vec3(42,0,42);\n    pal[6]=vec3(42,21,0);\n    pal[7]=vec3(42,42,42);\n    pal[8]=vec3(21,21,21);\n    pal[9]=vec3(21,21,63);\n    pal[10]=vec3(21,63,21);\n    pal[11]=vec3(21,63,63);\n    pal[12]=vec3(63,21,21);\n    pal[13]=vec3(63,21,63);\n    pal[14]=vec3(63,63,21);\n    pal[15]=vec3(63,63,63);\n    pal[16]=vec3(0,0,0);\n    pal[17]=vec3(5,5,5);\n    pal[18]=vec3(8,8,8);\n    pal[19]=vec3(11,11,11);\n    pal[20]=vec3(14,14,14);\n    pal[21]=vec3(17,17,17);\n    pal[22]=vec3(20,20,20);\n    pal[23]=vec3(24,24,24);\n    pal[24]=vec3(28,28,28);\n    pal[25]=vec3(32,32,32);\n    pal[26]=vec3(36,36,36);\n    pal[27]=vec3(40,40,40);\n    pal[28]=vec3(45,45,45);\n    pal[29]=vec3(50,50,50);\n    pal[30]=vec3(56,56,56);\n    pal[31]=vec3(63,63,63);\n    pal[32]=vec3(0,0,63);\n    pal[33]=vec3(16,0,63);\n    pal[34]=vec3(31,0,63);\n    pal[35]=vec3(47,0,63);\n    pal[36]=vec3(63,0,63);\n    pal[37]=vec3(63,0,47);\n    pal[38]=vec3(63,0,31);\n    pal[39]=vec3(63,0,16);\n    pal[40]=vec3(63,0,0);\n    pal[41]=vec3(63,16,0);\n    pal[42]=vec3(63,31,0);\n    pal[43]=vec3(63,47,0);\n    pal[44]=vec3(63,63,0);\n    pal[45]=vec3(47,63,0);\n    pal[46]=vec3(31,63,0);\n    pal[47]=vec3(16,63,0);\n    pal[48]=vec3(0,63,0);\n    pal[49]=vec3(0,63,16);\n    pal[50]=vec3(0,63,31);\n    pal[51]=vec3(0,63,47);\n    pal[52]=vec3(0,63,63);\n    pal[53]=vec3(0,47,63);\n    pal[54]=vec3(0,31,63);\n    pal[55]=vec3(0,16,63);\n    pal[56]=vec3(31,31,63);\n    pal[57]=vec3(39,31,63);\n    pal[58]=vec3(47,31,63);\n    pal[59]=vec3(55,31,63);\n    pal[60]=vec3(63,31,63);\n    pal[61]=vec3(63,31,55);\n    pal[62]=vec3(63,31,47);\n    pal[63]=vec3(63,31,39);\n    pal[64]=vec3(63,31,31);\n    pal[65]=vec3(63,39,31);\n    pal[66]=vec3(63,47,31);\n    pal[67]=vec3(63,55,31);\n    pal[68]=vec3(63,63,31);\n    pal[69]=vec3(55,63,31);\n    pal[70]=vec3(47,63,31);\n    pal[71]=vec3(39,63,31);\n    pal[72]=vec3(31,63,31);\n    pal[73]=vec3(31,63,39);\n    pal[74]=vec3(31,63,47);\n    pal[75]=vec3(31,63,55);\n    pal[76]=vec3(31,63,63);\n    pal[77]=vec3(31,55,63);\n    pal[78]=vec3(31,47,63);\n    pal[79]=vec3(31,39,63);\n    pal[80]=vec3(45,45,63);\n    pal[81]=vec3(49,45,63);\n    pal[82]=vec3(54,45,63);\n    pal[83]=vec3(58,45,63);\n    pal[84]=vec3(63,45,63);\n    pal[85]=vec3(63,45,58);\n    pal[86]=vec3(63,45,54);\n    pal[87]=vec3(63,45,49);\n    pal[88]=vec3(63,45,45);\n    pal[89]=vec3(63,49,45);\n    pal[90]=vec3(63,54,45);\n    pal[91]=vec3(63,58,45);\n    pal[92]=vec3(63,63,45);\n    pal[93]=vec3(58,63,45);\n    pal[94]=vec3(54,63,45);\n    pal[95]=vec3(49,63,45);\n    pal[96]=vec3(45,63,45);\n    pal[97]=vec3(45,63,49);\n    pal[98]=vec3(45,63,54);\n    pal[99]=vec3(45,63,58);\n    pal[100]=vec3(45,63,63);\n    pal[101]=vec3(45,58,63);\n    pal[102]=vec3(45,54,63);\n    pal[103]=vec3(45,49,63);\n    pal[104]=vec3(0,0,28);\n    pal[105]=vec3(7,0,28);\n    pal[106]=vec3(14,0,28);\n    pal[107]=vec3(21,0,28);\n    pal[108]=vec3(28,0,28);\n    pal[109]=vec3(28,0,21);\n    pal[110]=vec3(28,0,14);\n    pal[111]=vec3(28,0,7);\n    pal[112]=vec3(28,0,0);\n    pal[113]=vec3(28,7,0);\n    pal[114]=vec3(28,14,0);\n    pal[115]=vec3(28,21,0);\n    pal[116]=vec3(28,28,0);\n    pal[117]=vec3(21,28,0);\n    pal[118]=vec3(14,28,0);\n    pal[119]=vec3(7,28,0);\n    pal[120]=vec3(0,28,0);\n    pal[121]=vec3(0,28,7);\n    pal[122]=vec3(0,28,14);\n    pal[123]=vec3(0,28,21);\n    pal[124]=vec3(0,28,28);\n    pal[125]=vec3(0,21,28);\n    pal[126]=vec3(0,14,28);\n    pal[127]=vec3(0,7,28);\n    pal[128]=vec3(14,14,28);\n    pal[129]=vec3(17,14,28);\n    pal[130]=vec3(21,14,28);\n    pal[131]=vec3(24,14,28);\n    pal[132]=vec3(28,14,28);\n    pal[133]=vec3(28,14,24);\n    pal[134]=vec3(28,14,21);\n    pal[135]=vec3(28,14,17);\n    pal[136]=vec3(28,14,14);\n    pal[137]=vec3(28,17,14);\n    pal[138]=vec3(28,21,14);\n    pal[139]=vec3(28,24,14);\n    pal[140]=vec3(28,28,14);\n    pal[141]=vec3(24,28,14);\n    pal[142]=vec3(21,28,14);\n    pal[143]=vec3(17,28,14);\n    pal[144]=vec3(14,28,14);\n    pal[145]=vec3(14,28,17);\n    pal[146]=vec3(14,28,21);\n    pal[147]=vec3(14,28,24);\n    pal[148]=vec3(14,28,28);\n    pal[149]=vec3(14,24,28);\n    pal[150]=vec3(14,21,28);\n    pal[151]=vec3(14,17,28);\n    pal[152]=vec3(20,20,28);\n    pal[153]=vec3(22,20,28);\n    pal[154]=vec3(24,20,28);\n    pal[155]=vec3(26,20,28);\n    pal[156]=vec3(28,20,28);\n    pal[157]=vec3(28,20,26);\n    pal[158]=vec3(28,20,24);\n    pal[159]=vec3(28,20,22);\n    pal[160]=vec3(28,20,20);\n    pal[161]=vec3(28,22,20);\n    pal[162]=vec3(28,24,20);\n    pal[163]=vec3(28,26,20);\n    pal[164]=vec3(28,28,20);\n    pal[165]=vec3(26,28,20);\n    pal[166]=vec3(24,28,20);\n    pal[167]=vec3(22,28,20);\n    pal[168]=vec3(20,28,20);\n    pal[169]=vec3(20,28,22);\n    pal[170]=vec3(20,28,24);\n    pal[171]=vec3(20,28,26);\n    pal[172]=vec3(20,28,28);\n    pal[173]=vec3(20,26,28);\n    pal[174]=vec3(20,24,28);\n    pal[175]=vec3(20,22,28);\n    pal[176]=vec3(0,0,16);\n    pal[177]=vec3(4,0,16);\n    pal[178]=vec3(8,0,16);\n    pal[179]=vec3(12,0,16);\n    pal[180]=vec3(16,0,16);\n    pal[181]=vec3(16,0,12);\n    pal[182]=vec3(16,0,8);\n    pal[183]=vec3(16,0,4);\n    pal[184]=vec3(16,0,0);\n    pal[185]=vec3(16,4,0);\n    pal[186]=vec3(16,8,0);\n    pal[187]=vec3(16,12,0);\n    pal[188]=vec3(16,16,0);\n    pal[189]=vec3(12,16,0);\n    pal[190]=vec3(8,16,0);\n    pal[191]=vec3(4,16,0);\n    pal[192]=vec3(0,16,0);\n    pal[193]=vec3(0,16,4);\n    pal[194]=vec3(0,16,8);\n    pal[195]=vec3(0,16,12);\n    pal[196]=vec3(0,16,16);\n    pal[197]=vec3(0,12,16);\n    pal[198]=vec3(0,8,16);\n    pal[199]=vec3(0,4,16);\n    pal[200]=vec3(8,8,16);\n    pal[201]=vec3(10,8,16);\n    pal[202]=vec3(12,8,16);\n    pal[203]=vec3(14,8,16);\n    pal[204]=vec3(16,8,16);\n    pal[205]=vec3(16,8,14);\n    pal[206]=vec3(16,8,12);\n    pal[207]=vec3(16,8,10);\n    pal[208]=vec3(16,8,8);\n    pal[209]=vec3(16,10,8);\n    pal[210]=vec3(16,12,8);\n    pal[211]=vec3(16,14,8);\n    pal[212]=vec3(16,16,8);\n    pal[213]=vec3(14,16,8);\n    pal[214]=vec3(12,16,8);\n    pal[215]=vec3(10,16,8);\n    pal[216]=vec3(8,16,8);\n    pal[217]=vec3(8,16,10);\n    pal[218]=vec3(8,16,12);\n    pal[219]=vec3(8,16,14);\n    pal[220]=vec3(8,16,16);\n    pal[221]=vec3(8,14,16);\n    pal[222]=vec3(8,12,16);\n    pal[223]=vec3(8,10,16);\n    pal[224]=vec3(11,11,16);\n    pal[225]=vec3(12,11,16);\n    pal[226]=vec3(13,11,16);\n    pal[227]=vec3(15,11,16);\n    pal[228]=vec3(16,11,16);\n    pal[229]=vec3(16,11,15);\n    pal[230]=vec3(16,11,13);\n    pal[231]=vec3(16,11,12);\n    pal[232]=vec3(16,11,11);\n    pal[233]=vec3(16,12,11);\n    pal[234]=vec3(16,13,11);\n    pal[235]=vec3(16,15,11);\n    pal[236]=vec3(16,16,11);\n    pal[237]=vec3(15,16,11);\n    pal[238]=vec3(13,16,11);\n    pal[239]=vec3(12,16,11);\n    pal[240]=vec3(11,16,11);\n    pal[241]=vec3(11,16,12);\n    pal[242]=vec3(11,16,13);\n    pal[243]=vec3(11,16,15);\n    pal[244]=vec3(11,16,16);\n    pal[245]=vec3(11,15,16);\n    pal[246]=vec3(11,13,16);\n    pal[247]=vec3(11,12,16);\n    // colors are not defined from 248 to 255, usually black or white\n\n    // color index value for AL\n    int AL=255&(vmem+timer);\n\n    // putpixel, STOSB\n    fragColor=vec4(pal[AL]/63.,0);\n}","name":"Image","description":"","type":"image"}]}