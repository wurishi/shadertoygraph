{"ver":"0.1","info":{"id":"wllcDS","date":"1593009646","viewed":221,"name":"radial sd lines","username":"dtsmio","description":"radial lines","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["radial"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415926535\n#define scale vec2(6., 12.)\n\nfloat line (vec2 a, vec2 b, vec2 p)\n{\n    vec2 pa = p-a, ba = b-a;\n    float h = min(1., max(0., dot(pa, ba)/dot(ba, ba)));\n    \n    return length(pa - ba * h);\n}\n\nvec2 toDec (vec2 pol)\n{\n \treturn vec2(cos(pol.x * PI * 2.), sin(pol.x * PI * 2.)) * pol.y;   \n}\n    \nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;\n    \n    vec3 col1 = vec3(0);\n    vec3 col2 = vec3(0);\n    \n    vec2 s = scale;\n    \n\tvec2 rv = vec2(atan(uv.y, uv.x) / PI / 2., length(uv));\n    s.x += floor(rv.y * scale.y) * 2.;\n    rv *= s;\n    //rv = fract(rv/scale) * scale;\n    \n    vec2 cv = vec2(fract(rv.x), fract(rv.y));\n    vec2 id = vec2(floor(rv.x), floor(rv.y));\n    \n    col1 = cv.xyy;\n\n    float d = 0.;\n    \n    for ( float i = id.x - 2.; i <= id.x + 2.; i++)\n    {\n        for ( float j = id.y - 2.; j <= id.y + 2. && j >= -2.; j++)\n        {\n            if (j < 0.) continue;\n            \n            vec2 cs = s;\n            cs.x += (j - id.y) * 2.;\n            cs.x = max(scale.x, cs.x);\n            \n            float a1 = smoothstep(0., 0.2, sin(iTime + j/6.) * 0.5);\n            float a2 = smoothstep(0., 0.2, cos(iTime + j/4.) * 0.5);\n            float a3 = smoothstep(-0.6, -0.4, sin(iTime + j/6.)) * 0.5 + \n                \t   smoothstep(0.4, 0.6, sin(iTime + j/6.)) * 0.5;\n            \n            vec2 v = vec2(i, j);\n            vec2 p1 = toDec((v + vec2(a3 * 1., a2 * 0.3 + 0.2))/cs);\n            vec2 p2 = toDec((v + vec2(-a3 * 1., -a2 * 0.3 - 0.2) + 1.)/cs);\n            float t = line(p1, p2, toDec(rv/s));\n            float tt = smoothstep(0.02, 0.01, t);\n            t = 1. - t;\n            d = max(d, t);\n        }\n    }\n    \n    \n    d = smoothstep(0.982, 0.99, d); \n    col2 += d;\n    \n    \n    fragColor = vec4(col2, 1.);\n}","name":"Image","description":"","type":"image"}]}