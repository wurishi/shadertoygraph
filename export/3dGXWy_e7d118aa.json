{"ver":"0.1","info":{"id":"3dGXWy","date":"1574829802","viewed":353,"name":"Height Blend Transition","username":"clintrea","description":"Simple height blend transition","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["transition","blend","height","float"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGRn","filepath":"/media/a/cd4c518bc6ef165c39d4405b347b51ba40f8d7a065ab0e8d2e4f422cbc1e8a43.jpg","previewfilepath":"/media/ap/cd4c518bc6ef165c39d4405b347b51ba40f8d7a065ab0e8d2e4f422cbc1e8a43.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGRn","filepath":"/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","previewfilepath":"/media/ap/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// The goal is to create a natural transition between two textures\n// using their luminance/height values and a custom mask as the blend.\n// \n// Reference: \n// https://www.gamasutra.com/blogs/AndreyMishkinis/20130716/196339/Advanced_Terrain_Texture_Splatting.php\n \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   \n    vec2 uv = fragCoord/iResolution.x;\n   \n    \n    // Establish 2 organic texture RGB inputs and 1 MSK input\n    \n    // RGB input 1\n    vec4 input1 = smoothstep(0.2, 0.8, texture(iChannel0, (1.5*uv)));\n    \n    // RGB input 2\n    vec4 input2 = smoothstep(0.2, 0.8, texture(iChannel1, (1.5*uv)));\n    \n    \n    // MSK input, input 3\n    // Set color\n    vec3 input3 = vec3( 1, 1, 1 );\n\t// Create horizontal gradient\n    input3 *= uv.x;\n    \n    \n    // Begin transition\n    \n    float a1 = input3.r;\n    float a2 = -input3.r;\n    \n    float depth = 0.5;\n    \n    float ma = max(input1.r + a1, input2.r + a2) - depth;\n    \n    // float b1 = max(texture1.a + a1 - ma, 0);\n    float b1 = input1.r + a1 - ma > 0.0 ? input1.r : 0.0;\n    // float b2 = max(texture2.a + a2 - ma, 0);\n    float b2 = input2.r + a2 - ma > 0.0 ? input2.r : 0.0;\n    \n    // Extra step... convert to vec4\n    vec4 bb1 = vec4(b1, b1, b1, b1);\n    vec4 bb2 = vec4(b2, b2, b2, b2);\n    \n    \n    vec4 output1 = (input1*bb1 + input2*bb2) / (bb1 + bb2);\n    \n    \n    fragColor = output1;\n    \n    \n}","name":"Image","description":"","type":"image"}]}