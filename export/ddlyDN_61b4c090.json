{"ver":"0.1","info":{"id":"ddlyDN","date":"1686837567","viewed":80,"name":"Wavy Line Halftone","username":"marlus","description":"Line halftone sort of effect","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d","waves","effect","halftone"],"hasliked":0,"parentid":"4tfSRf","parentname":"Line Halftone"},"renderpass":[{"inputs":[{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"// based on https://www.shadertoy.com/view/4tfSRf\n\nvec2 rotate(vec2 vec, float angle) {\n    // Thanks, FabriceNeyret2 :)\n    float c, s;\n\treturn mat2(c=cos(angle), s=sin(angle), -s, c) * vec;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec4 tex = texture(iChannel0, uv * vec2(1, 1)).rgba;\n    float luma = tex.r * 0.21 + tex.g * 0.72 + tex.b * 0.07;\n    \n    float factor = iResolution.x / 1200.;\n    float lineThickness = 10.0*factor;\n    \n    float waviness = sin(fragCoord.x*0.02)*20.;\n    \n    float lineDither = rotate(fragCoord+waviness, 0.3).y / lineThickness;\n    \n    // video lines\n    float c1 = step((1.-luma)*1.2, mod(lineDither, 1.));\n  \n    // constant lines\n    float c2 = step(0.5, mod(lineDither, 1.));\n    \n    // dashed lines\n    float dash = 2./lineThickness;\n    float angle = sin(fragCoord.x*dash)*0.2;\n    float clampAngle = clamp(abs(angle),0.1,0.3)-.1;\n    dash = max(0.,clampAngle)*3.;\n    float c3 = step(dash, mod(lineDither, 1.0));\n    \n    vec4 luma4 = vec4(c2);\n    \n    // 1. absolute difference\n    luma4 = vec4(abs(c1 - (1.-c3)));\n    //luma4 = vec4(abs(c1 - (1.-c2-c3)));\n    \n    // 2. debug overlay\n    //luma4 = vec4(c1,c3,0.,1.);\n    \n    // 3. split debug view\n    //luma4 = uv.x < 0.333 ? vec4(c2) : uv.x > 0.666 ? luma4 : vec4(c3) ;\n    \n    \n    fragColor = luma4;\n}","name":"Image","description":"","type":"image"}]}