{"ver":"0.1","info":{"id":"Nt3GWj","date":"1636679300","viewed":114,"name":"Colorful Metaball Rings","username":"Geotale","description":"Drag with your mouse for the third one.\nI was observing the normals when trying to brute force a sorta sdf for these metaballs, but when trying to render them I came across this neat effect.\nIt's more difficult to do that now that this actually works.","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["metaballs"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define eps 0.00001\n\nfloat ball(vec2 p, float r){\n    return r * r / length(p);\n}\n\nvec2 mouse = vec2(0.0);\nfloat scene(vec2 p){\n    float d = ball(p - mouse, 0.12);\n    \n    d += ball(p - \n        0.3 * vec2(\n            2.0 * sin(0.8 * iTime),\n            cos(0.75 * iTime + sin(0.333 * iTime))\n        ),\n        0.11\n    );\n\n    d += ball(p - \n        0.3 * vec2(\n            2.0 * cos(0.3333 * iTime - sin(0.75 * iTime)),\n            sin(0.8 * iTime)\n        ),\n        0.1\n    );\n    \n    //Neatly, this function can have as many inputs as you'd like.\n    //This means you can create theoretically infinite metaballs\n    //and all computations should work correctly!\n\n    return 1.0 / d;\n}\n\nvec2 transform(vec2 uv){\n    uv = 2.0 * uv - vec2(1.0);\n    uv.y *= iResolution.y / iResolution.x;\n    return uv;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec2 uv = transform(fragCoord / iResolution.xy);\n    mouse = transform(iMouse.xy / iResolution.xy);\n\n    float sc = 100.0 * scene(uv);\n    \n    vec3 col = vec3(0.0);\n    \n//    if(sc < 1000.0){\n        vec2 sc2 = normalize(vec2(\n            scene(uv + vec2(eps, 0.0)) - scene(uv - vec2(eps, 0.0)),\n            scene(uv + vec2(0.0, eps)) - scene(uv - vec2(0.0, eps))\n        ));\n        col = 0.5 + 0.5 * vec3(sc2, 0.0);\n        \n        col *= 1000.0 / ((sc - 1000.0) * (sc - 1000.0));\n//    }\n\n    fragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}