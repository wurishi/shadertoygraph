{"ver":"0.1","info":{"id":"wdfyWj","date":"1585570071","viewed":109,"name":"Growing bamboo","username":"joha2nes","description":"Somewhere in a bamboo forest","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["2d","tiled","animation","bamboo"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI\t\t\t\t3.141592653589793\n\nfloat rand(vec2 co)\n{\n\treturn fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec2 tile(vec2 uv, vec2 zoom)\n{\n\treturn fract(uv * zoom);\n}\n\nfloat _stepSmoothness;\nfloat _step(float edge, float x)\n{\n\treturn smoothstep(edge - _stepSmoothness, edge + _stepSmoothness, x);\n}\n\nvec3 bamboo(vec2 uv)\n{\n\tconst vec2 zoom = vec2(30.0, 12.0);\n\n\tuv.x += iTime * 0.01;\n\n\tvec2 index = floor(uv * zoom);\n\n\tfloat rand = rand(vec2(index.x));\n\t\n\tuv.y += rand;\t\t\t\t\t\t// y offset\n\tuv.y -= iTime * rand * 0.02; \t\t// y animation;\n\n\tconst float curve = 0.1;\n\tconst float ySpacing = 0.01;\n\tconst float xSpacing = 0.2;\n\n\tvec2 uvt = tile(uv, zoom);\n\n\tfloat yPi = uvt.y * PI;\n\tfloat mask = _step(sin(yPi) * curve, uvt.x - xSpacing)\n\t\t\t   * _step(uvt.x + xSpacing, 1.0 - sin(yPi) * curve)\n\t\t\t   * _step(ySpacing, uvt.y) * _step(uvt.y, 1.0-ySpacing);\n\n\tconst vec3 bg = vec3(0.1, 0.2, 0.1);\n\tconst vec3 colorA = vec3(0.8353, 0.7882, 0.1451);\n\tconst vec3 colorB = vec3(0.4824, 0.8392, 0.149);\n\tvec3 color = mix(colorA, colorB, rand);\n\n\treturn mix(bg, color, mask);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tuv.x *= iResolution.x / iResolution.y;\n\n\t_stepSmoothness = 20.0 / iResolution.y;\n\n\tvec3 color = bamboo(uv);\n\n\tfragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}