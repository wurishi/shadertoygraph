{"ver":"0.1","info":{"id":"WsGfDm","date":"1607269453","viewed":191,"name":"osc + equalizer","username":"chernomord","description":"experimenting with the SoundCloud channel.\n\nThe track is by State Azure.","likes":5,"published":1,"flags":64,"usePreview":0,"tags":["soundcloud"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"llsXRr","filepath":"https://soundcloud.com/state-azure/tangerine-deam-love-on-a-real-train-live-cover","previewfilepath":"https://soundcloud.com/state-azure/tangerine-deam-love-on-a-real-train-live-cover","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.14;\n\nfloat plot(vec2 st, float pct){\n  return  smoothstep( pct-0.015, pct, st.y) -\n          smoothstep( pct, pct+0.015, st.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    // Time varying pixel color\n    vec4 col = vec4( 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4)), 1.);\n    vec4 top = texture(iChannel0, vec2(uv.x,1.));\n    float pl = plot(uv,top.r);\n    vec4 osc=vec4(vec3(pl),1.);\n\n    \n    uv.y = abs(uv.y*2.-1.);\n    osc.b /= 10.*uv.y;\n    osc.g /=5.*uv.y;\n\n    // Output to screen\n    // compress X coord\n    float comp = floor(uv.x*80.)/80.;\n    float ultraComp = floor(uv.y*1.)/1.;\n    \n    vec4 backgrCol = texture(iChannel0, vec2(ultraComp, 0.));\n    backgrCol.b = backgrCol.r / (uv.y*10.*uv.x)/2.;\n    backgrCol.g = backgrCol.r / (uv.y*6.*uv.x)/8.;\n    backgrCol.r = backgrCol.r / (uv.y*8.*uv.x)/1.;\n    \n    // get texture from channel0 \n    fragColor = texture(iChannel0, vec2(comp, 0.));\n    // colorize texture\n    fragColor.g = sin(fragColor.r*PI);\n    fragColor.b = abs(fragColor.r - 1.);\n    \n    fragColor *= step(uv.y, fragColor.r);\n    fragColor = fragColor/1.2 + osc;\n    fragColor = fragColor + backgrCol/4.;\n}","name":"Image","description":"","type":"image"}]}