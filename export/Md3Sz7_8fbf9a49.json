{"ver":"0.1","info":{"id":"Md3Sz7","date":"1460372844","viewed":217,"name":"radius_blur","username":"DeMaCia","description":"test","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["2d","img"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec2 focus = vec2(.5,.5);\n\nconst float split_num = 10.;\n\nfloat radius = 0.1;\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 pos = fragCoord.xy / iResolution.xy;\n    float angle = atan(pos.y - focus.y,pos.x - focus.x);\n    float csv = cos(angle);\n    float snv = sin(angle);\n\n    float len = distance(pos,focus);\n    \n    \n    len = len < radius ? 0.0 : len-radius;\n        \n    vec4 col = vec4(0.);\n    for(float i = -split_num; i < split_num ; i++)\n    {\n        float dis = len*i*0.01;\n    \tvec2 offset_uv = vec2(csv,snv)*dis;\n    \tcol += texture(iChannel0,pos+offset_uv);\n    }\n    float la = 1. + smoothstep(0.,1.,iTime-.5);\n    vec4 blurCol = col/(split_num*la);\n    vec4 realCol = texture(iChannel0,pos);\n    \n    float ra = smoothstep(0.,1.,iTime-1.);\n    fragColor = blurCol*(1.-ra) + realCol*ra;\n    \n    \n    fragColor = blurCol;\n}\n\n/*\n\nfloat a = 1.;\nfloat b = 0.;\nfloat c = -0.2;\nfloat scl = 0.9;\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 pos = fragCoord.xy / iResolution.xy;\n    float angle = atan(a,b)+3.1415926*.5;\n\tfloat csv = cos(angle);\n    float snv = sin(angle);\n    \n    float len = a*pos.x + b*pos.y + c;\n    len = len/sqrt(a*a+b*b);\n    len *= scl;\n    \n    len = len < 0. ? 0. : len;\n        \n    vec4 col = vec4(0.);\n    for(float i = -split_num; i < split_num ; i++)\n    {\n        float dis = len*i*0.01;\n    \tvec2 offset_uv = vec2(csv,snv)*dis;\n    \tcol += texture(iChannel0,pos+offset_uv);\n    }\n    \n    vec4 blurCol = col/(split_num*2.);\n\n    fragColor = blurCol;\n    \n}\n*/","name":"Image","description":"","type":"image"}]}