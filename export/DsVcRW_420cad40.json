{"ver":"0.1","info":{"id":"DsVcRW","date":"1695841084","viewed":57,"name":"Wave bug 2","username":"Qwer643","description":"Continues of https://www.shadertoy.com/view/DsVyRW\n\nFullscreen to some magick","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["wave","bug"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// EPILEPTIC WARNING!!!\n// pause and rewind time to 0.0\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = fragCoord.xy / iResolution.xy;    \n    vec4 draw = texture(iChannel0, uv);\n    fragColor = draw;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = fragCoord.xy / iResolution.xy;    \n    vec2 pix = vec2(1.0, 1.0) / iResolution.xy;\n     \n    vec4 previous = texture(iChannel0, uv);\n    float avg = texture(iChannel0, uv + vec2(pix.x, 0.0)).r;\n    \n    // neighbours\n    avg += texture(iChannel0, uv + vec2(-pix.x, 0.0)).r;    \n    avg += texture(iChannel0, uv + vec2(0.0, pix.y)).r;\n    avg += texture(iChannel0, uv + vec2(0.0, -pix.y)).r;    \n    avg /= 4.0;\n    \n    //r = heig, ab = speed\n    float spd = clamp(avg - previous.r, -0.3, 0.3); // can be negative    \n    \n    if (spd < 0.0){\n        previous.a += -spd; //negative    \n    } else {\n        previous.b += spd; //positive    \n    }\n    spd = clamp(previous.b - previous.a, -0.3, 0.3); //actual spd    \n    \n    // save to next frame\n    if (spd < 0.0){        \n        previous.a = -spd;\n    } else {        \n        previous.b = spd;\n    }    \n    \n    previous.r += spd;   \n    \n    fragColor = previous;    \n    \n    // initial wave? (Thanks Elenzil!)    \n    if (iFrame < 2){\n        fragColor.r = sin(uv.x * 123.0) * cos(uv.y * 123.0) + sin(uv.x*3.0)-1.3;\n        fragColor.r -= cos(uv.y * 6.0);\n    }\n}","name":"Buffer A","description":"","type":"buffer"}]}