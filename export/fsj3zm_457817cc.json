{"ver":"0.1","info":{"id":"fsj3zm","date":"1617164689","viewed":167,"name":"Grow your own broccoli","username":"dysangel","description":"This shader allows you to grow broccoli in  your graphics card","likes":8,"published":1,"flags":32,"usePreview":0,"tags":["broccoli"],"hasliked":0,"parentid":"7d2GzD","parentname":"First fluid sim"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"Main\n{\n    vec4 b = texture(iChannel0, U/R);\n    Q = (b + (vec4((sin(-b.x)),abs(sin(-b.y)),abs(sin(b.x)),1.)));\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"Main\n{\n    /*vec2 mouse = (iMouse.xy-R*0.5)/R.y;\n    vec2 mv = mouse-vec2(texture(iChannel1,vec2(0.)).w,texture(iChannel1,vec2(R.x)).w); // mouse velocity\n    \n    if(iFrame<2){\n        mv = vec2(0);\n    }\n    \n        vec2 mouse = (iMouse.xy-R*0.5)/R.y;\n        \n        if(length(iMouse)<0.01){\n            mouse = vec2(-0.5,0.);\n        }\n    \n    */\n    \n    Neighborhood;\n    \n    Q = B(U - B(U).xy);\n    Q.xy += sin(iTime / 5.) * vec2(sin(e.w - w.w),n.w - s.w);\n    \n    vec2 uv = U/R;\n    \n    if ((iFrame == 0 && (uv.x > 0.45 && uv.x < 0.55 && uv.y > 0.45 && uv.y < 0.55)) || iMouse.z>0.&&length(U-iMouse.xy)<10.)\n        Q.xyw = vec3(0.4*sin(iTime),0.4*cos(iTime),1.0);\n\n        //Q.xyw = vec3(clamp(iMouse.x - iMouse.z / 1.,-1.,1.), clamp(iMouse.w - iMouse.y / 1.,-1.,1.), 1.);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"Main\n{\n    Neighborhood;\n    Neighborhood2;\n    \n    Q      = B(U - A(U).xy);\n    Q.w   -= 0.2 * sin (iTime * 3.0 + e.x - w.x + n.y - s.y);\n    Q.xyz += 0.25*(N*n.y-S*s.y+E*e.x-W*w.x).xyz;\n    \n    \n    vec2 uv = U/R;\n    \n    if ((iFrame == 0 && (uv.x > 0.45 && uv.x < 0.55 && uv.y > 0.45 && uv.y < 0.55)) || iMouse.z>0.&&length(U-iMouse.xy)<10.)\n        Q.xyz = (vec3(sin(20.2121*iTime),cos(10.43*iTime),1.));\n\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define Main void mainImage(out vec4 Q, vec2 U)\n#define R iResolution.xy\n\n#define A(U) texture(iChannel0,(U)/R)\n#define B(U) texture(iChannel1,(U)/R)\n\n#define Neighborhood vec4 n = A(U+vec2(0,1)), e = A(U+vec2(1,0)), s = A(U-vec2(0,1)), w = A(U-vec2(1,0)), m = 0.25*(n+e+s+w);\n#define Neighborhood2 vec4 N = B(U+vec2(0,1)), E = B(U+vec2(1,0)), S = B(U-vec2(0,1)), W = B(U-vec2(1,0)), M = 0.25*(n+e+s+w);\n","name":"Common","description":"","type":"common"}]}