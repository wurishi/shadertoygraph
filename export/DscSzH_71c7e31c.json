{"ver":"0.1","info":{"id":"DscSzH","date":"1679357963","viewed":64,"name":"Triangle with normals","username":"ianertson","description":"Just an experiment","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2d","triangle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define R (iResolution.xy)\n#define T (iTime)\n\nfloat triangle(in vec2 p, in vec2 v0, in vec2 v1, in vec2 v2, in float t, inout vec3 st) {\n    vec2 e0 = v1 - v0;\n    vec2 e1 = v2 - v1;\n    vec2 e2 = v0 - v2;\n    vec2 vp0 = p - v0;\n    vec2 vp1 = p - v1;\n    vec2 vp2 = p - v2;\n    float dot0 = dot(e0.yx, vp0);\n    float dot1 = dot(e1.yx, vp1);\n    float dot2 = dot(e2.yx, vp2);\n    float dist = max(dot0, max(dot1, dot2));\n    st = normalize(dist-vec3(dot0, dot1, dot2));\n    return clamp(1.0-(dist/t), 0.0, 1.0);\n}\n\nvoid mainImage( out vec4 O, in vec2 fc )\n{\n    vec3 col = vec3(0.0);\n    vec2 uv = (fc-0.5*R.xy)/R.y;\n    uv.x = uv.x*2.0-1.0;\n    float ex = dFdx(uv.x)*1.5;\n    float ey = dFdy(uv.y)*1.5;\n    vec3 sta, stb, stc = vec3(0.0);\n    float a = triangle(uv,               vec2(-1., 0.0), vec2(0.0, 1.), vec2(1., 0.0), 0.4, sta);\n    float b = triangle(uv + vec2(ex, 0), vec2(-1., 0.0), vec2(0.0, 1.), vec2(1., 0.0), 0.4, stb);\n    float c = triangle(uv + vec2(0, ey), vec2(-1., 0.0), vec2(0.0, 1.), vec2(1., 0.0), 0.4, stc);\n    vec3 n = normalize(vec3(a, b, c));\n    col = mix(n, sta*a, 0.5+sin(T)*0.5);\n    col = max(col, 0.0);\n    O = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}