{"ver":"0.1","info":{"id":"lcKGW1","date":"1712712540","viewed":86,"name":"glow particle 2","username":"yufengjie","description":"last version i missed up random","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["glow"],"hasliked":0,"parentid":"4fyGD1","parentname":"glow particle"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"precision mediump float;\n\n#define PI 3.1415926\n\n\nvec3 palette(float t) {\n  vec3 a = vec3(0.731, 1.098, 0.192);\n  vec3 b = vec3(0.358, 1.090, 0.657);\n  vec3 c = vec3(1.077, 0.360, 0.328);\n  vec3 d = vec3(0.965, 2.265, 0.837);\n  return a + b * cos(6.28318 * (c * t + d));\n}\n\nfloat randomFloat(float seed) {\n  return fract(sin(seed) * 1348.2585);\n}\n\nvec2 random(float v) {\n  float x = fract(sin(v) * 45.53 + 13.46);\n  float y = fract(sin(v) * 76.41 + 75.85);\n  return vec2(x, y);\n}\n\nfloat plotGlowParticle(vec2 uv, vec2 pos, float r, float glowFactor) {\n  float v = length(uv - pos) - r;\n  //return smoothstep(0.01, 0.,abs(v));\n  return exp(-1. * glowFactor * v);\n}\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord) {\n  vec2 uv = (fragCoord.xy * 2. - iResolution.xy) / iResolution.y;\n  float ixy = iResolution.x / iResolution.y;\n  vec3 c_fin = vec3(0.);\n  float pix = 1. / iResolution.y;\n\n  float total = 100.;\n\n  for(float i = 0.; i < total; i += 1.) {\n\n    float factor = i / total;\n    float radius = (16. * factor + 4.) * pix;\n    float glowFactor = 80. - ( i / total) * 40.;\n    float isClock = randomFloat(i) > 0.5 ? 1. : -1.;\n    float speed = 1. + randomFloat(i / total) * 2.;\n\n    vec2 trackCenter = random(i) * vec2(ixy,1.) - vec2(ixy * 0.5, .5);\n    float trackRadius = randomFloat(i) * .8 + .1;\n    float randomStartAngle = randomFloat(i) * PI * 2.;\n    \n\n    vec2 pos = trackCenter + vec2(cos(randomStartAngle+iTime * isClock * speed + iTime * i * 0.01) * trackRadius,\n                                  sin(randomStartAngle+iTime * isClock * speed + iTime * i * 0.01) * trackRadius);\n\n    float glowParticle = plotGlowParticle(uv, pos, radius, glowFactor);\n\n    //c_fin = mix(c_fin, palette(factor), glowParticle);\n    c_fin += palette(factor) * glowParticle;\n  }\n\n  fragColor = vec4(c_fin, 1.);\n}\n","name":"Image","description":"","type":"image"}]}