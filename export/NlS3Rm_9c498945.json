{"ver":"0.1","info":{"id":"NlS3Rm","date":"1623520434","viewed":92,"name":"Triangle wave osc","username":"Envy24","description":"triangle, wave, osc, sound","likes":2,"published":1,"flags":8,"usePreview":0,"tags":["sound","wave","triangle","osc"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// See define in common\n\nfloat plotSmoothLine(\n    float value, // in range [-1.0; 1.0]\n    float v,     // in range [0.0; 1.0]\n    float width) // > 0.0\n{\n    return \n        smoothstep(\n            0.0,\n            width / iResolution.y,\n            abs(v - (1.0 + value) * 0.5));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.y;\n    \n    uv.x *= 0.05;\n    \n    float gray = plotSmoothLine(\n        additiveWave(VOLUME, BASE_FREQUENCY, (uv.x + iTime)),\n        uv.y,\n        2.0);\n\n    // Output to screen\n    fragColor = vec4(vec3(gray),1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"// See common\n\nvec2 mainSound( int samp, float time)\n{\n    //float level = traingleOsc(VOLUME, BASE_FREQUENCY, time, 0.0);\n    float level = additiveWave(VOLUME, BASE_FREQUENCY, time);\n    \n    return vec2(level, level);\n}","name":"Sound","description":"","type":"sound"},{"inputs":[],"outputs":[],"code":"#define TAU 6.2831853071795862 // 2*PI\n#define BASE_FREQUENCY 60.0    // in Hertz\n#define VOLUME 0.5             // in range [0.0; 1.0]\n\nfloat traingleOsc(\n    float amplitude,   // in range [0.0; 1.0]\n    float frequency,   // > 0.0\n    float time,        \n    float phase_shift)\n{\n    float phase = phase_shift + time * TAU * frequency;\n    \n    float sample_ = (2.0 * fract(phase / TAU) - 1.0);\n\n    sample_ = sample_ > 0.0 ? -sample_ : sample_;\n    \n    return (3.0 * sample_ + 1.5) * amplitude;\n}\n\nfloat additiveWave(\n    float amplitude,\n    float baseFrequncy,\n    float time)\n{\n    float level = \n             traingleOsc(1.0, baseFrequncy,       time, 0.0)  * 0.75;\n    level += traingleOsc(1.0, baseFrequncy * 2.0, time, 0.0)  * 0.25;\n    level += traingleOsc(1.0, baseFrequncy * 3.0, time, 0.0)  * 0.05;\n    level += traingleOsc(1.0, baseFrequncy * 8.0, time, 0.0)  * 0.02;\n    //                                                    sum = 1.07\n    \n    return (level / 1.07) * amplitude;\n}","name":"Common","description":"","type":"common"}]}