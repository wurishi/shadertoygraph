{"ver":"0.1","info":{"id":"MlfBR4","date":"1511139069","viewed":302,"name":"The House That Jack Built","username":"dpiponi","description":"First attempt at illusioning my optics.\nTry it full screen.\nTweak the parameters.\nNothing is animated.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["opticalillusion"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float pi = 3.1415926;\n\nvec4 compose(vec4 a, vec4 b) {\n    float alpha = a.a;\n    \n    return mix(b, a, a.a);\n}\n\nfloat square(float x) {\n//    return mod(x, 1.0) < 0.5 ? 1.0 : 0.0;\n    return 2.5*(clamp(sin(2.0*pi*x),-0.2,0.2)+0.2);\n}\n\nconst float start = 0.75;\nconst float end = 3.75;\nconst float period = 5.0;\nconst float shadow = 0.25;\n\nvec4 stripe(vec2 xy) {\n    float x = xy.x+10.0;\n\n    float y = xy.y-1.5*sin(pi*(x-0.5*(start+end)));\n\n    \n    float mx = mod(x, period);\n    \n    if (mx < start || mx > end) {\n        if (mx > start-shadow && mx < start) {\n            return 0.5*mix(vec4(0.0, 0.0, 0.0, 0.0), vec4(0.0, 0.0, 0.0, 1.0), (1.0/shadow)*(mx-(start-shadow)));\n        }\n\n        if (mx > end && mx < end+shadow) {\n            return 0.5*mix(vec4(0.0, 0.0, 0.0, 1.0), vec4(0.0, 0.0, 0.0, 0.0), (1.0/shadow)*(mx-end));\n        }\n\n\n        return vec4(0.0, 0.0, 0.0, 0.0);\n    }\n    \n    return vec4(vec3(square(y)), 1.0);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\tvec2 uv = fragCoord.xy / iResolution.x;\n    \n    vec4 bg = vec4(0.6, 0.6, 0.6, 1.0);\n    \n    bg = compose(1.0*stripe(100.0*uv), bg);\n    bg = compose(1.0*stripe(100.0*uv.yx), bg);\n    \n    bg = compose(1.0*stripe(50.0*uv), bg);\n    bg = compose(1.0*stripe(50.0*uv.yx), bg);\n\n    bg = compose(1.0*stripe(25.0*uv), bg);\n    bg = compose(1.0*stripe(25.0*uv.yx), bg);\n    \n    fragColor = bg;\n}","name":"Image","description":"","type":"image"}]}