{"ver":"0.1","info":{"id":"XfcSzS","date":"1719249853","viewed":50,"name":"田字格","username":"shadertoyjiang","description":"wang\n596.67.ran","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["wang"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n\n// 2024年4月25日\n\n#define M(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define PI    3.14159265358979\n#define PI2   (PI+PI)\n\nvec4 clr;\n\nfloat ln(vec2 u)\n{\n      return length(max(abs(u)-vec2(.06,.01),0.))-.02;\n}\n\nfloat wang(vec3 pos)\n{\n        vec4 p = pos.xyxy, c,e,s;\n        p.xy += .5;\n        p -= round(p);\n        c = .5-.5*cos(p*PI2);\n        p = abs(p); \n        \n        if(p.x<p.y)p.xy=p.yx,c.x=-c.y;\n        if(p.z<p.w)p.zw=p.wz,c.z=-c.w;\n        \n       // 1246 chars 23.8 chars\n        //s = vec2(p.x<p.y, p.z<p.w).xxyy;\n        //p += (p.yxwz-p)*s;\n        //c -= (c.yyww+c)*s;  \n        \n        e=vec4(p.yw, pos.z+vec2(1,-1)*.1-c.xz*.12);\n        float a=ln(e.xz), b=ln(e.yw);\n        \n        clr=vec4(.5,1,0,1);if(a<b)clr=vec4(1,.5,0,1);\n        return min(a,b);\n}\n\n\n\n\n\n\nfloat m(vec3 p)\n{\n        float t = 1.8+iTime; p.xy *= M(t*.3); p.yz *= M(t);  p.zx *= M(t*2.);\n        return wang(p);\n        //return max(length(p) - 3., dot(cos(4.*p),sin(4.*p.yzx))/4.);\n}\n\nvoid mainImage(out vec4 O, vec2 v)\n{\n        O = vec4(0);\n        vec2 R = iResolution.xy,\n             u = (v + v - R) / R.y;\n        vec3 o, \n             r = normalize(vec3(u, 1)),\n             e,\n             n, s;\n        float d = e.y = 1e-3,t,i;\n        o.z = -5.;\n        for(;i < 300. && t < 120. && d >=e.y ;i++)\n                t += d = m(o += r * d * .5) ; \n        if(i >= 100. || t > 120.){O += .5; return;}\n        n = normalize(  vec3(m(o+e.yxx),m(o+e),m(o+e.xxy)) - d );\n        s = normalize(  vec3(-1,2,-3) );\n        O += .5 + .5 * dot(n, s);\n        O *= clr;\n}\n\n\n\n\n\n\n","name":"Image","description":"","type":"image"}]}