{"ver":"0.1","info":{"id":"fssXDM","date":"1618704466","viewed":114,"name":"SpYralsBoxes","username":"lechuga","description":"Hecho con bonzomatic un sÃ¡bado en la tarde,","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["01010010","01001001","01000011","01001011"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define TWO_D\n#define rot(a)mat2(cos(a),sin(a),-sin(a),cos(a))\nfloat t;\nfloat sb(vec3 p,vec3 s){p=abs(p)-s;return max(max(p.z,p.y),p.x);}\n#define smin(a,b,k) min(a,b)-pow(max(k-abs(a-b),0.)/k,k)*k*(1.0/6.0)\nfloat h(vec3 x){return fract(sin(dot(x,x.zyx*324.234))*56.546);}\nfloat g1,g2,g3,g4;\nvoid l(inout float g,float d){g+=1./(1.+d*d*d);}\n#define pi 3.14154353456\n#define h1(x) fract(sin(x*256.)*724.24)\nfloat c(float t,float s){\n  t/=s*pi;\n  return mix(h1(floor(t)), h1(floor(t+1.)), pow(smoothstep(0., 1.,fract(t)),20.));\n}\nfloat m(vec3 p){float d;\n  p.xz*=rot(sin(t)*2.);\n  float gr= -p.y+2.;\n  l(g2,gr);\n  vec3 p2=p;\n  p2.xz=abs(p2.xz)-3.;\n  float id=h(floor(p2/90.+.5));\n  p.y+=mod(t*15.+id*id, 50.);\n  vec3 p1=p;\n  p1.xz=abs(p1.xz)-5.;\n  p1.xz*=rot(3.*.7+p1.y*.2);\n  for(float i=5.;i>=0.;i--){\n    p1.xz*=rot(t*.25*i);\n    p1.x=abs(p1.x)-.5-sin(i+t)*.5;\n  }\n  float b=sb(p1,vec3(1., 500., .05))*.66;\n  l(g3,b);\n  p2=(fract(p2/20.+.5)-.5)*20.;\n  vec3 rr=vec3(.65*id,sin(t)*abs(p2.y)+5.,.55*id);\n  float bb=sb(p2,rr);\n  l(g4,bb);\n  d=smin(gr,b,10.);\n  d=min(d,bb);\n  vec3 p5=p;\n  p5.y=(fract(p.y/10.+.5)-.5)*10.;\n \n  float egg=mix(length(p5)-3.6*sin(p5.x*.645+t)*sin(p5.z*.735+t)*sin(p5.x*.66+t)*.5-3.5,length(p5.zx)-1., .5);\n  d=smin(d,egg,10.);\n  g1+=.1/(.1+egg*egg);\n  return d;\n}\nvec3 nm(vec3 p){\n  vec2 e=vec2(.01, 0);\n  return m(p)-normalize(vec3(m(p-e.xyy),m(p-e.yxy),m(p-e.yyx)));\n}\nvoid ao(inout vec3 col,vec3 n, vec3 p,float i){\n  for(float ii=0.;ii<20.;ii++){\n    float o=clamp(m(p*n*i)/i, 0., 1.);\n    col*=o<0.? 1.:o;\n    col+=.1/(.5+vec3(ii, .234, h(vec3(0.3565, 3.42, 23.))));\n  }\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = vec2(fragCoord.x / iResolution.x, fragCoord.y / iResolution.y);\n\tuv -= 0.5;\n\tuv /= vec2(iResolution.y / iResolution.x, 1);\n    t=mod(iTime, 100.);\n  \n  float fov=1.15+length(sin(uv.y+t)*.5)+.77-length(sin(abs(uv.x+t)-.5)*2.);\n  vec3 s=vec3(0.00001,-5.0001,-20.),r=normalize(vec3(-uv,fov));\n  vec3 p=s;\n  float i,d,MAX=100.;\n  for(i=MAX;i>=0.;i--)if(d=m(p),p+=d*r,abs(d)<.0001) break;\n  vec3 col=vec3(0.);\n  col+=i/MAX;\n  vec3 n=nm(p);\n  \n  \n  col+=dot(n,normalize(vec3(-1., -2., -3e3)));\n  \n  ao(col,n,p,i);\n  col+=g1*vec3(1., 1., 0.)*.05;\n  col+=g2*vec3(.034, 0., 0.234)*.07;\n  col+=g3*vec3(0.06, 0.256, 0.9)*.03;\n  col+=g4*vec3(0.5466,0.9,0.2)*.07;\n  \n  col=smoothstep(0., 1.,col);\n  col*=1.-max(length(p-s)/300.,0.);\n  float inv=0.;\n  #ifdef TWO_D\n  vec2 uv2=uv;\n  for(float ii=3.;ii>=0.;ii--)\n    uv2=(abs(uv-3.)-3.)-.5-sin(t)*.5+.45;\n  uv2*=rot(pow(c(t,40.),5.));\n  for(float i=5.;i>=0.;i--)\n    inv=mix(inv,1.-inv,step(length(uv2)-.5,i-fract(t*.5)));\n  col=mix(col,1.-col,1.-inv);\n  #endif\n\tfragColor = vec4(col,1.);\n}","name":"Image","description":"","type":"image"}]}