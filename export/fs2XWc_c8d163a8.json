{"ver":"0.1","info":{"id":"fs2XWc","date":"1621175252","viewed":306,"name":"ShaderShowDown01_Outline","username":"louis_C","description":"Visual made during the Outline's Shadershowdown 2021\nvideo of the event https://www.youtube.com/watch?v=WNxlDgTitZE","likes":11,"published":1,"flags":40,"usePreview":0,"tags":["livedcoding"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0,fragCoord/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"mat2 rot(float t){ float c = cos(t); float s = sin(t); return mat2(c,-s,s,c);}\nfloat bl(vec2 p ,vec2 b){vec2 q = abs(p)-b;\n  return length(max(q,vec2(0.)))+min(0.,max(q.x,q.y));}\n  float m1;\n  float map(vec3 p){\n    vec3 p2 = p;\n    float s = 1.9;\n    for(int  i = 0 ; i < 3 ; i++){\n      p = abs(p);\n      p -=5.;\n      if(p.x>p.y)p.xy=p.yx;\n      p.x -= 3.-abs(p.y);\n      if(p.x>p.z)p.xz=p.zx;\n      if(p.z>p.y)p.zy=p.yz;\n      p = 2.2-abs(p-0.9);\n      s*=-1.2;\n      p*=-1.2;\n    }\n    p/=s;\n    float d1 = bl (p.zy,vec2(0.2-fract(iTime*2.)*0.1));\n    float d2 = length(p2)-1.5;\n    m1 = d2;\n    return min(d2,d1);\n  }\n  vec3 nor(vec3 p){vec2 e = vec2(0.01,0.);return normalize(map(p)-vec3(map(p-e.xyy),map(p-e.yxy),map(p-e.yyx)));}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 uc = uv;\n\tuv -= 0.5;\n  uv *= 2.;\n\tuv /= vec2(iResolution.y / iResolution.x, 1);\n  vec3 p = vec3(0.,0.,-5.);\n  vec3 r=normalize(vec3(uv,1.));\n  p.zy*=rot(iTime);\n  r.zy*=rot(iTime);\n  float dd = 0.;\n   vec3 n =vec3(0.);\n  for(int  i = 0 ; i < 64 ; i++){\n    float d = map(p);\n    if(dd>40.){dd=40.;break;}\n    if(d<0.001){\n      n = nor(p);\n      if(smoothstep(0.0,0.5,m1)>0.1)\n      {break;}\n      r = reflect(r,n);\n      d = 0.1;\n    }\n    p += r*d;\n    dd +=d;\n  }\n \n  float m = smoothstep(0.32,0.29,length(uv));\n  float ld = clamp(dot(n,-r),0.,1.);\n  float fr = pow(1.-ld,0.7)*0.5;\n  float dao = 0.3;\n  float ao = clamp(map(p+n*dao)/dao,0.,1.);\n  float s = smoothstep(40.,0.,dd);\n  float r1 =( mix(0.5,1.,ao)+fr*ao)*s;\n  float r2 = mix( mix(0.5,1.,texture(iChannel0,p.xz*0.1).a)*r1*s,r1,m);\n   r2 = pow(r2,mix(0.5,5.5,m));\n  float b = sqrt(24.);\n  float c = 0.;float d =pow(length(uv.y),1.2)*0.005;\n  for(float i = -0.5*b ; i<=0.5*b; i +=1.)\n  for(float j = -0.5*b ; j<=0.5*b; j +=1.){\n    c += texture(iChannel0,uc+vec2(i,j)*d).a;\n  }\n  c/= 24.;\n  vec3 c1 = mix(vec3(1.),3.*abs(1.-2.*fract(c*0.2+mix(0.85,0.95,c)+m*0.7+vec3(0.,-1./3.,1./3.)))-1.,mix(0.55,0.02,c)*(1.-m*0.3))*c;\n  vec3 c2 = pow(c1,vec3(mix(0.8,2.,length(uv.y))));\n    fragColor = vec4(c2,r2);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"float voc(float t, float f, float ft){float x = fract(t * f) / f;\nfloat e=(sin(x*3.*ft)+sin(x*22.*ft)+sin(x*28.*ft)); \nreturn e* min(x * 1000., 1.) * exp(x * -200.);}\nfloat hash(float x){return fract(sin(x) * 897612.531);}\nvec2 t1(float t, float var){vec2 v = vec2(0., 0.);\n    for(int i = 0; i < 7; ++i){\n        float h = float(i);\n       \tfloat m = voc(t+h,40.+pow(2.01,(h-8.)*.2),var);\n        float pan = hash(h);\n        v.x += m * pan;v.y += m * (1.-pan);\n    }return v *.1;}\nvec2 mainSound( in int samp, float time )\n{\n     vec2 bar = sin(pow(t1(time*200.,5.)*t1(pow(fract(time*0.1),1.5)*50.,5.),vec2(sqrt(fract(time*2.)))));\n    vec2 vt = t1(fract(time*2.+0.5)*0.5,10.)*distance(t1(time*0.1,10.),vec2(0.5));\n    return vec2( bar*0.2+vt);\n}","name":"Sound","description":"","type":"sound"}]}