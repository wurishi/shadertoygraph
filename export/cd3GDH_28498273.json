{"ver":"0.1","info":{"id":"cd3GDH","date":"1677202991","viewed":230,"name":"Hex Moire Mandala 2","username":"ChunderFPV","description":"A variant of https://www.shadertoy.com/view/DlSXW3","likes":16,"published":1,"flags":32,"usePreview":0,"tags":["moire","hexagon","hex","tile","buffer"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 RGBA, in vec2 XY )\n{\n    vec3 c = texture(iChannel0, XY/R, .2).rgb*.1; // load buffer A\n    c *= (2.5-length(U))*.5+.5; // darken edges & brighten center\n    RGBA = vec4(c*c*c, 1);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define R iResolution.xy\n#define U (2.*XY-R)/R.y\n#define SIN(x) (sin((x)*6.3)*.5+.5)\n#define H(a) (cos(radians(vec3(100, 140, 190))-((a)*6.2832))*.5+.5) // hue pallete\n\n// single hexagon\nfloat hex(vec2 u)\n{\n    u = abs(u);\n    vec2 h = vec2(u.x/.866, u.y+u.x*.577);\n    return max(0., 1.-max(h.x, h.y));\n}\n\n// xy grid of hexagons\nfloat hexgrid(vec2 u)\n{\n    vec2 v = vec2(1, 1.732);\n    return hex((u-round(u/v)*v)*v.y);\n}\n\n// (coords, time, offset: 0 or .5)\nvec3 hexcolor(vec2 u, float t, float o)\n{\n    vec2 v = vec2(1, 1.732);\n    u = round(u/v+o)-o;\n    float x = u.x,\n          y = u.y*v.y,\n          m = x*x+y*y;\n    return H(m*t) * (SIN(m*t)+.3);\n}\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 RGBA, in vec2 XY )\n{\n    vec3 c, h1, h2;\n    vec2 u = U; // coords\n    float t = iDate.w/3600.,\n          r = clamp(.3/sqrt(length(u)), .5, 1.5),\n          g1, g2;\n    u *= 20. / (1.-iMouse.y/R.y); // apply scale & zoom\n    c = texture(iChannel0, mix(XY/R, vec2(.5), -.002)).rgb*.95+.1; // frame blur\n    \n    // set 1\n    g1 = hexgrid(u);\n    g1 = min(g1, r-g1);\n    h1 = g1 * hexcolor(u, t, .0);\n    \n    // set 2\n    g2 = hexgrid(u-vec2(.5, .866));\n    g2 = min(g2, r-g2);\n    h2 = g2 * hexcolor(u, t, .5);\n    \n    c += max(h1*g1, h2*g2)*7.+.03; // blend\n    \n    vec2 v = abs(fract(XY/R+.5)-.5)/fwidth(XY/R); // vignette\n    c = min(c, min(v.x, v.y)*.75);\n    \n    RGBA = vec4(c, 1);\n}","name":"Buffer A","description":"","type":"buffer"}]}