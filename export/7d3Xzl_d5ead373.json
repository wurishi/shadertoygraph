{"ver":"0.1","info":{"id":"7d3Xzl","date":"1633875999","viewed":151,"name":"Water_shader_sidps","username":"kingcrimson1112","description":"A simple water shader using voronoi noise","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["voronoi","noise","water","worley"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//----------------------------------------------------\n// VORONOI_NOISE_GENERATOR\n//----------------------------------------------------\n#define GRID_HEIGHT 10\n\nfloat rand(vec2 pos)\n{\n    return fract(sin(dot(pos, vec2(12.9898f, 78.233f))) * 43758.5453f);\n}\n\nfloat get_voronoi_noise(vec2 pos)\n{\n    float dist=2.0f;\n    for(int y=-1;y<=1;y++)\n    {\n        for(int x=-1;x<=1;x++)\n        {\n            vec2 gridP = vec2(floor(pos.x+float(x)),floor(pos.y+float(y)));\n            vec2 rP = gridP+vec2(rand(gridP),rand(gridP.yx));\n            vec2 offset=vec2(sin(iTime*6.0f*rand(gridP)),cos(iTime*9.0f*rand(gridP.yx)))*0.1f;\n            float dis=distance(pos,rP+offset);\n            if(dis<dist)\n            {\n                dist=dis;\n            }\n        }\n    }\n    return dist/sqrt(2.0f);\n}\n//----------------------------------------------------\n//----------------------------------------------------\nvec3 waterCol=vec3(0.0f,0.44f,0.8f);\nvec3 highlightCol=vec3(0.5f,0.8f,1.0f);\nfloat p=4.5f;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Gets UVs\n    vec2 uv=fragCoord/iResolution.y;\n    uv*=float(GRID_HEIGHT);\n    \n    // Gets Offser\n    vec2 offset=vec2(0.0f);\n    offset.y=-iTime*3.0f;\n    offset.x=cos(iTime*0.5f)*2.0f;\n    \n    // Get Height Map\n    float h=get_voronoi_noise(uv+offset) + get_voronoi_noise(uv+offset*0.4f);\n    h=clamp(h*0.7f,0.0f,1.0f);\n    h=pow(h,p);\n    \n    // Final Color\n    vec3 col=vec3(h)*highlightCol+waterCol;\n   \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}