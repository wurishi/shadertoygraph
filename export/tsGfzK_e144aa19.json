{"ver":"0.1","info":{"id":"tsGfzK","date":"1607506865","viewed":303,"name":"LightHouse3","username":"sreejithpro","description":"sss","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["ss"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define S(a,b,t) smoothstep(a,b,t)\n\nmat2 Rot(float a) {\n    float s=sin(a), c=cos(a);\n    return mat2(c, -s, s, c);\n}\n\nvec4 TaperBox(vec2 p, float wb, float wt, float yb, float yt, vec4 col, float blur){\n\tfloat m = S(-blur,blur,p.y-yb);\n    m *= S(blur,-blur,p.y-yt);\n    \n    p.x = abs(p.x);\n    \n    //0 p=yb; 1 p=yt\n    float w = mix(wb,wt,(p.y-yb)/(yt-yb));\n    \n    m *= S(blur, -blur, p.x-w);\n    return m*vec4(col);\n    \n}   \n\nvec4 TaperBoxI(vec2 p, float hl, float hr, float xl, float xr, vec4 col, float blur){\n\tfloat m = S(-blur,blur,p.x-xl);\n    m *= S(blur,-blur,p.x-xr);\n    \n    p.y = abs(p.y);\n    \n    float w = mix(hl,hr,(p.x-xl)/(xr-xl));\n    \n    m *= S(blur, -blur, p.y-w);\n    return m*vec4(col);\n}\n\nvec4 LightHouse(vec2 uv, float x, float y, float blur){\n\t\n    //Color Definition\n    vec4 col1 = vec4(74.,2.,2.,255.)/255.;\n    vec4 col2 = vec4(204.,204.,204.,255.)/255.;\n    vec2 offs = vec2(x,y);\n    uv *= 2.;\n    vec4 m= TaperBox(uv-offs,0.2,.18,0.,.25,col1, blur);//Brick 1\n    m += TaperBox(uv-offs,.18,.16,0.25,.5,col2,blur);//Brick 2\n    m += TaperBox(uv-offs,.16,.14,0.5,.75,col1,blur);//Brick 3\n    m += TaperBox(uv-offs,.035,.035,0.55,.68,vec4(1.),blur+.015);//Brick 3 Window\n    m += TaperBox(uv-offs,.14,.12,0.75,1.,col2,blur);//Brick 4\n    m += TaperBox(uv-offs,.12,.10,1.,1.25,col1,blur);//Brick 5\n    m += TaperBox(uv-offs,.035,.035,1.05,1.18,vec4(1.),blur+.015);//Brick 5 Window\n    m += TaperBox(uv-offs,.10,.09,1.25,1.35,col2,blur);//Bricke 6\n    m += TaperBox(uv-offs,.09,.11,1.35,1.40,col1,blur);//Brick7 inverted\n    m += TaperBox(uv-offs,.2,.2,1.40,1.50,col2,blur);//Top Deck 1\n    m += TaperBox(uv-offs,.2,.2,1.50,1.60,col1,blur);//Top Deck 2\n    m += TaperBox(uv-offs,.03,.03,1.60,1.70,col2,blur);//Light Holder\n    m += TaperBox(uv-offs-vec2(-.1,0.),.01,.01,1.60,1.81,col1,blur);//Column Left\n    m += TaperBox(uv-offs-vec2(.1,0.),.01,.01,1.60,1.81,col1,blur);//Column Right\n    m += TaperBox(uv-offs,.01,.01,1.60,1.81,col1,blur);//Column Middle\n    m += TaperBox(uv-offs,.16,.0,1.81,2.,col2,blur);//Roof\n    \n    //Light\n    vec4 light = TaperBoxI(uv-offs-vec2(0.,1.65),0.02,0.4,0.,6.,vec4(0.96,.84,.109,1.),blur);\n    \n    light *= uv.x*0.2+0.5*sin(-iTime*0.5);\n    \n    \n    \n    m += light;\n    \n    \n    \n    \n    return m;\n}\n\nvec4 Sun(vec2 uv, float rad, float x, float y, vec4 col, float blur){\n    uv *= 5.;\n    uv.x -= x;\n    uv.y -= y;\n\tfloat d = length(uv);\n    //float s = .3/d;\n    \n    float m = S(rad, rad-blur-.05,d);\n    \n    return m*col;\n}\n\nfloat GetHeight(vec2 uv){\n    uv *= 0.2;\n    float height = .562*sin(uv.x*.551)+.325*sin(uv.x*8.356)+sin(uv.x*.2350)+sin(uv.x*.356)*.175;\n    return -height - .425*sin(uv.x)*.565;\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec2 uv = ((2.*fragCoord-iResolution.xy)/iResolution.y);\n\n    \n    //BG Gradient\n    float wPercent = fragCoord.y / iResolution.y;\n    vec4 color1 = vec4(208.,162.,21.,255.)/255.;\n    vec4 color2 = vec4(192.,101.,11.,255.)/255.;\n    float r = color1.x + wPercent * (color2.x - color1.x);\n    float g = color1.y + wPercent * (color2.y - color1.y);\n    float b = color1.z + wPercent * (color2.z - color1.z);\n    vec4 col = vec4(r,g,b,1.);\n    \n    float blur = 0.01;\n    vec4 lighthouse = LightHouse(uv, -0.5,-0.3, blur);\n    \n    col = mix(col,lighthouse,lighthouse.a);\n    vec4 suncol = vec4(226.,194.,61.,255.)/255.;\n    vec4 sun = Sun(uv, 0.8, 4., 1.9,suncol, .1)*1.2;\n    //sun += Sun(uv,0.8, 4., 1.9,suncol, .1);\n    col = mix(col,sun,sun.a);\n    \n    uv *= 2.;\n    vec4 bg = TaperBox(uv,12.,12.,-0.96,-.2+GetHeight(uv*sin(uv.x*.256)),vec4(0.01,0.01,0.,1.),blur+.02);\n    bg += TaperBox(uv*-1.,12.,12.,1.0,1.6+GetHeight(uv*sin(uv.x*.256)),vec4(0.01,0.01,0.,1.),blur+0.1);\n    bg += TaperBox(uv,12.,12.,-2.,-1.,vec4(208.,162.,21.,50.)/255.,.2)*0.2;\n    col =  mix(col,bg,bg.a);\n    uv /= 2.;\n    vec4 LHref = LightHouse(uv*vec2(1,-1.), -0.5,1.5, blur+.1);\n    \n    col = mix(col,LHref,LHref.a);\n    float T = sin(iTime*0.01);\n    vec4 boat = TaperBox(uv-vec2(-1.+T,0.2),.25,.3,-1.,-.93,vec4(0.01,0.01,0.01,1.),blur);\n    boat += TaperBox(uv-vec2(-1.+T,0.137),.3,.25,-1.,-.93,vec4(0.01,0.01,0.01,1.),blur*4.5);\n    \n    col = mix(col,boat,boat.a);\n    \n    float d = length(uv+vec2(0.95-T,0.65));\n    vec4 man = S(0.04,0.005,d)*suncol*vec4(0.,0.,0.,1.);\n\tman += TaperBox(uv-vec2(-0.95+T,0.2),.02,.01,-.93,-.87,vec4(0.01,0.01,0.01,1.),blur+.025)*2.;\n    man += TaperBoxI(uv-vec2(-.95+T,-0.7),0.005,.005,0.,0.35,vec4(0.01,0.01,0.01,1.),blur);\n  \tman += TaperBoxI(uv-vec2(-.95+T,-0.78),0.005,.005,0.,0.35,vec4(0.01,0.01,0.01,1.),blur+.05);\n\tman += TaperBox(uv-vec2(-.6+T,-0.8),0.005,.005,0.,0.1,vec4(0.01,0.01,0.01,1.),blur);\n    col = mix(col,man,man.a);\n    // Output to screen\n    fragColor = col;\n}","name":"Image","description":"","type":"image"}]}