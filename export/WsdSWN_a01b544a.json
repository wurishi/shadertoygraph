{"ver":"0.1","info":{"id":"WsdSWN","date":"1572010016","viewed":176,"name":"nGon by point definition","username":"zodiax","description":"nGon","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["points"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define _PI 3.141592\n\nfloat straight(vec2 A, vec2 B, vec2 uv, vec2 center)\n{\n    float o = (A.y-B.y)/(A.x-B.x);\n    float g = A.y - (o *A.x);\n    float w = .5/iResolution.y/abs(A.x-B.x);\n    float r = smoothstep(-w,w, o*uv.x + g - uv.y);\n   \n    if((o*center.x+g)/center.y<0.)\n    \t{\n        \tr = 1.-r;\n    \t}\n\n    return r;\n}\n\nfloat nGon(vec2 uv, int pointsCount, vec2 center, float rad)\n{\n    \n    \tvec2 p0 = vec2(rad,rad)+center;\n    \tvec2 p;\n    \tfloat r = 1.;\n    \n        for(int i=0;i<pointsCount+1;i++)\n        \t{\n                p = center + rad* vec2(sin(_PI*2./float(pointsCount)*float(i)),cos(_PI*2./float(pointsCount)*float(i)));\n         \n                r *= straight(p0,p,uv, center);\n                p0 = p;\n            }\t\n    \n    return r;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-vec2(iResolution.xy/2.))/iResolution.y;\n    \n    int sides = int(floor(fract(iTime/10.)*45.)+3.);\n    \n    vec3 diff = vec3(1.0,0.3,0.3);\n\tvec3 col = (nGon(uv,sides,vec2(0.,0.),0.45)-nGon(uv,sides,vec2(0.,0.),0.44))*diff;\n\t\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}