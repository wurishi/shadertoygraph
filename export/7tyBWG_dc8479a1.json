{"ver":"0.1","info":{"id":"7tyBWG","date":"1665647948","viewed":59,"name":"CCA tests","username":"adicirstei","description":"CCA tests","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["cca"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    ivec2 px = ivec2(fragCoord);\n    float state = texelFetch( iChannel0, px, 0 ).x;\n    vec3 col = vec3(state / float(STATES));\n    col *= 0.98*texelFetch(iChannel1, ivec2(int(state)*60,0),0).rgb;\n    \n    col = pow( col, vec3(0.4545) );\n    \n    fragColor = vec4( col, 1.0 );\n   \n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\n\nint cell( in ivec2 p )\n{\n    ivec2 r = ivec2(textureSize(iChannel0, 0));\n    p = (p+r) % r;\n    return int(texelFetch(iChannel0, p, 0 ).x);\n}\n\nint ncount( in ivec2 p, in int v )\n{\n\n   // ivec3 n = ivec3(-1,0,1);\n   // int v = (cell(p) + 1 ) % STATES;\n    int k = 0;\n    \n    for (int j = -RANGE;j<=RANGE; j++){\n        for (int i = -RANGE;i<=RANGE; i++){\n            k += (v == cell(p+ivec2(i,j))? 1:0);\n        }\n    }\n    \n    return k;\n}\n\n\n\n\n\nfloat init( in ivec2 p )\n{\n    return floor(texelFetch(iChannel2, p, 0 ).x * float(STATES));\n}\n\n\n\nfloat hash1( float n )\n{\n    return fract(sin(n)*138.5453123);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    ivec2 px = ivec2( fragCoord );\n    \n    if (iFrame ==0) fragColor = vec4(init(px), 0., 0., 1.);\n    else {\n        int c = cell(px);\n        int v = (c + 1 ) % STATES;\n\n        int k = ncount(px, v); \n        \n        fragColor = vec4(float(k>=TH?v:c), 0., 0., 1.);\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define STATES 7\n#define RANGE 1\n#define TH 3\n\nvec4 someFunction( vec4 a, float b )\n{\n    return a+b;\n}","name":"Common","description":"","type":"common"}]}