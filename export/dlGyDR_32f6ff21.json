{"ver":"0.1","info":{"id":"dlGyDR","date":"1700084988","viewed":37,"name":"a gentle embrace","username":"nullivory","description":"takes a really long time\ntypical fractal bullshit.\nmatches with the (hour long) song pretty well. trip-safe. have fun ;)","likes":2,"published":1,"flags":64,"usePreview":0,"tags":["fractal","trippy","hypnotic","psychadelic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dd3R2","filepath":"https://soundcloud.com/lego_o/intrusion-a-gentle-embrace-variant-reshape","previewfilepath":"https://soundcloud.com/lego_o/intrusion-a-gentle-embrace-variant-reshape","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float bpm = 108.3;\n    \n    //fractal speed\n    float angle = iTime*0.005;\n    \n    //uv coords\n    vec2 pos = fragCoord/iResolution.xy;\n    pos.x = pos.x*(iResolution.x/iResolution.y);\n    vec2 uv = pos;\n    pos = vec2(pos.x -((iResolution.x/iResolution.y)*.5), pos.y -.5);\n    \n    //radial coords. multiplied by sin time; zooms in and out\n    float r = length(pos)*(-sin(iTime*.005)+1.3);\n    //abs bullshit in order to create heaxagonal effect\n    float a = abs(-abs(-abs(atan(pos.x, pos.y))+1.)+1.);\n    vec2 radPos = vec2(r+.1, a);\n    \n    //wave propagates through r coord based on bpm and time\n    float beat = max(0.,sin(-fract((iTime/60.)*bpm - radPos.r/4.)*6.28 + 3.141)-.5);\n    beat += smoothstep(-1., 0., sin(-fract((iTime/60.)*bpm - radPos.r/4.)*6.28 + 3.141)-.5);\n    beat += max(0.,sin(-fract((iTime/120.)*bpm - radPos.r/4.)*6.28 + 3.141)-.5);\n    beat += smoothstep(-2., 0., sin(-fract((iTime/120.)*bpm - radPos.r/4.)*6.28 + 3.141)-.5);\n    \n    //fractal\n    for(float i = 0.; i < 125.; i++){\n        radPos = abs(radPos);\n        radPos -= ((sin(iTime*0.01)+1.)*.25)+.25+(beat*((-cos(iTime*0.001)*.5)+.5));\n        radPos*= 1.+((sin(iTime*0.01)+1.)*.05)+(beat*((-cos(iTime*0.001)*.01)+.01));\n        radPos *= mat2(cos(angle*1.00), -sin(angle*1.), sin(angle), cos(angle));\n    }\n    \n    //coloration\n    vec3 rgb = hsv2rgb(vec3(length(radPos)*3.*sin(iTime*.03)+(beat*radPos.x*.2), abs(-radPos.y+1.), abs(radPos.x)+(beat*.1)));\n    \n    fragColor = vec4(rgb,1.);\n}","name":"Image","description":"","type":"image"}]}