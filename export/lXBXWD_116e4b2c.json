{"ver":"0.1","info":{"id":"lXBXWD","date":"1710785539","viewed":52,"name":"color_palette","username":"alesteba","description":"palette","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["palettecolor"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nint binarySearch(float[3] nums,float searchnum ){\n\n    int low = 0;\n    int high = 3 - 1;\n    int mid = (low + high) / 2;\n    \n    while(low < high){\n        if(nums[mid] < searchnum){\n            if(nums[mid + 1] > searchnum){\n                return mid;\n            }\n            else{\n                low = mid + 1;\n            }\n        }\n        else{\n            high = mid - 1;\n        }\n        mid = (low + high) / 2;\n    }\n    \n    return mid;\n}\n\nfloat lerp (float x0, float x1, float y0, float y1, float x)\n{\n    float d = x1 - x0;\n    \n    if (d == 0.0)\n        return (y0 + y1) / 2.0;\n        \n    return y0 + ( (x - x0) * (y1 - y0) ) / d;\n}\n\nvec3 vec3_lerp(float x0, float x1, vec3 a, vec3 b, float x)\n{\n\n    return vec3(\n        lerp(x0, x1, a.x, b.x, x),\n        lerp(x0, x1, a.y, b.y, x),\n        lerp(x0, x1, a.z, b.z, x)\n    );\n}\n\n\nvec3 piecewise_lerp (float[3] Xs, vec3[3] Ys, float x)\n{\n    int index = int(binarySearch(Xs, x));\n\n    return vec3_lerp\n    (\n        Xs[index ], Xs[index+1],\n        Ys[index ], Ys[index+1],\n        x\n    );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\n    float interpolant = uv.x;\n    \n    float mid = 0.25*sin(iTime)+0.5;\n    \n    float x[3]=float[](0.0,mid,1.0); \n    vec3 COLOR_MASKS[3];\n    COLOR_MASKS[0] = vec3( 0.0, 0.25, 0.0 );\n    COLOR_MASKS[1] = vec3( 0.75, 0.5, 0.1 );\n    COLOR_MASKS[2] = vec3( 1.0, 0.5, 0.5 );\n    \n    vec3 combination = piecewise_lerp(x,COLOR_MASKS,interpolant);\n    \n    if( uv.y < 0.33 )\n       fragColor = vec4( 0.0);\n    else if( uv.y < 0.66 )\n        \n        fragColor = vec4(combination, 0.0);\n    else\n        fragColor = vec4( 0.0);\n            \n}","name":"Image","description":"","type":"image"}]}