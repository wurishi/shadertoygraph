{"ver":"0.1","info":{"id":"dlBBzc","date":"1694317341","viewed":84,"name":"truchet study (zv)","username":"zerovolts","description":"Inspired by (uses the same tile pattern): https://twitter.com/KaufmanRoni/status/1699409557544415651","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["truchet"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float GRID_SIZE = 4.;\n\nconst vec2 TOP_RIGHT = vec2(1., 1.);\nconst float FIFTH = 1. / 5.;\n\nconst vec3[] colors = vec3[](\n    vec3(0.97, 0.06, 0.10), // red\n    vec3(0.06, 0.75, 0.23), // green\n    vec3(0.08, 0.55, 0.71), // blue\n    vec3(0.97, 0.77, 0.19), // yellow\n    vec3(0.45, 0.20, 0.56), // violet\n    vec3(0.90, 0.28, 0.12)  // orange\n);\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec4 make_grid(vec2 uv) {\n    vec2 coord = floor(uv * GRID_SIZE);\n    vec2 cell_uv = fract(uv * GRID_SIZE);\n    return vec4(coord, cell_uv);\n}\n\nfloat aa_step(float d, float x) {\n    float aa = 3. / iResolution.y;\n    return smoothstep(d - aa, d + aa, x);\n}\n\nfloat aa_line(float d, float x) {\n    return aa_step(FIFTH * (d - .5), x)\n         - aa_step(FIFTH * (d + .5), x);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = (fragCoord - .5 * iResolution.xy) / iResolution.y;\n    uv.y += iTime * .2;\n    vec4 grid = make_grid(uv);\n    \n    float h = rand(grid.xy / 100.);\n    vec2 st = grid.zw;\n    \n    // randomly flip tiles horizontally\n    st.x = h > .5\n        ? st.x\n        : 1. - st.x;\n    // randomly flip tiles vertically\n    st.y = h > .25 && h < .75\n        ? st.y\n        : 1. - st.y;\n    \n    // mirror over y = x\n    st = st.x > st.y\n        ? st\n        : vec2(st.y, st.x);\n    \n    float black_mask = 0.;\n    // bottom-left dot\n    black_mask += 1. - aa_step(FIFTH / 2., length(st - vec2(FIFTH * 1.5, 0.)));\n    // bottom-right dot\n    black_mask += 1. - aa_step(FIFTH / 2., length(st - vec2(FIFTH * 3.5, 0.)));\n    // inside arc\n    black_mask += aa_line(1.5, length(st - TOP_RIGHT));\n    // outside arc\n    black_mask += aa_line(3.5, length(st - TOP_RIGHT));\n                \n    float white_mask = 0.;\n    // bottom-left corner\n    white_mask += 1. - aa_step(FIFTH, length(st));\n    // bottom-right corner\n    white_mask += 1. - aa_step(FIFTH, length(st - vec2(1., 0)));\n    // top-right corner\n    white_mask += 1. - aa_step(FIFTH, length(st - TOP_RIGHT));\n    // bottom-left arc\n    white_mask += aa_line(2.5, length(st));\n    // top-right arc\n    white_mask += aa_line(2.5, length(st - TOP_RIGHT));\n    \n    float color_mask_a = aa_line(1.5, length(st));\n    // cut out bottom-left black dot mask\n    color_mask_a -= 1. - aa_step(FIFTH / 2., length(st - vec2(FIFTH * 1.5, 0.)));\n    \n    // use all the leftover space for the secondary color\n    float color_mask_b = 1.;\n    color_mask_b -= black_mask;\n    color_mask_b -= white_mask;\n    color_mask_b -= color_mask_a;\n    \n    int color_index_a = int(h * 53.) % 6;\n    int color_index_b = (int(h * 137.)) % 6;\n    // guarantee the colors are different\n    color_index_b = color_index_a == color_index_b\n        ? (color_index_a + 1) % 6\n        : color_index_b;\n    \n    vec3 color = vec3(0);\n    color += colors[color_index_a] * color_mask_a;\n    color += colors[color_index_b] * color_mask_b;\n    color += vec3(.01, .01, .01) * black_mask;\n    color += vec3(.9, .9, .9) * white_mask;\n    \n    // rough texture\n    color += (texture(iChannel0, uv * 3.).x - .5) * .05;\n    \n    vec3 srgb = pow(color.rgb, vec3(1. / 2.2));\n    fragColor = vec4(srgb, 1.0);\n}","name":"Image","description":"","type":"image"}]}