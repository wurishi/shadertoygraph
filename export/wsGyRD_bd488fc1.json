{"ver":"0.1","info":{"id":"wsGyRD","date":"1602311259","viewed":96,"name":"#inktober2020 d7: clock","username":"zaiyugi","description":"Day 7. 24-hr clock, filling up til noon, then emptying down til midnight","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["time","clock","inktober"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Uncomment USE_TIME to use time since shader start\n//#define USE_TIME \n#define Td 60.\n#define PI  3.141592\n#define PI2 6.283185\n#define half(f, d) smoothstep(0., d, f)\n#define circ(p, r) max((1.-length(p)/r), 0.)\n#define rot(a) mat2(cos(a), -sin(a), sin(a), cos(a))\n\nfloat dial(vec2 p, float r, float d)\n{\n    float a = half(p.x, d);\n    float b = half(-(rot(r)*p).x, d);\n    return clamp(mix(a*b, a+b, step(PI, -r)), 0., 1.);\n}\n\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    // pixel -> uv\n    vec2 p = (U - 0.5*iResolution.xy)/iResolution.x;\n    float d = 1. / iResolution.y;\n    \n    vec3 col = vec3(0.);\n    float s_d = PI2/60.;\n    float h_d = PI2/12.;\n    \n#ifdef USE_TIME\n    float t = iTime*Td;\n#else\n    float t = iDate.w;\n#endif\n    \n    // Reverse time once past noon\n    t = mod(t, 86400.);\n    t *= mix(1., -1., step(43200., t));\n    \n    //float secs = mix( t, -t, step(.5, mod(floor(t/60.), 2.)) );\n    \n    float secs = -s_d * mod(floor(t), 60.);\n    float mins = -s_d * mod(floor(t/60.), 60.);\n    float hrs = -h_d * mod(floor(t/3600.), 12.);\n    \n    float f_s = dial(p, secs, d);\n    f_s *= pow(circ(p, .275), .5);\n    \n    float f_m = dial(p, mins, d);\n    f_m *= pow(circ(p, .175), .5);\n   \t\n    float f_h = dial(p, hrs, d);\n    f_h *= pow(circ(p, .075), .5);\n    \n    col.z = f_h;\n    col.y = col.z+f_m;\n    col.x = col.y+f_s;\n    \n    float ticks = 0., acc = 0.;\n    for(int i = 0; i < 12; ++i)\n    {\n        vec2 x = p+.275*vec2(cos(acc), sin(acc));\n        ticks += smoothstep(0., 100.*d, circ(x, .007));\n        acc += 0.5236;\n    }\n    \n    col += vec3(ticks*.25);\n    \n    C = vec4(col, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}