{"ver":"0.1","info":{"id":"43K3Ry","date":"1717822551","viewed":34,"name":"shadow of breath","username":"yunhai","description":"try a vfxï¼Œwanna use as a sprite selecting effect scheme","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"mtBGzc","parentname":"Kanshan in Lake"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//make what the shadow type u want\nvec3 getShadowCol(vec2 uv,vec3 ocol)\n{\n    //need to config\n    float flowSpeed=1./10.;\n    uv=uv+iTime*flowSpeed;\n    uv*=getRot(PI/4.);\n    uv*=10.;\n    float width=2.;\n    uv=fract(uv)*width;\n    vec3 scol=vec3(.5);\n    scol+=min(1.,step(uv.x,width/2.));\n    return scol;//simple stripe\n}\n//make what the shadow type u want\nvec3 getShadowCol2(vec2 uv,vec3 ocol)\n{\n    //need to config\n    float flowSpeed=1./10.;\n    uv=uv+iTime*flowSpeed;\n    uv*=getRot(PI/4.);\n    uv*=10.;\n    float width=2.;\n    vec2 ouv=uv;\n    uv=fract(uv)*width;\n    vec3 scol=vec3(.5);\n    scol+=min(1.,step(uv.x,width/2.));\n    return scol;//simple stripe\n}\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    //need to config per sprite\n    vec2 offcenter=vec2(.5,.4);\n    float breathSpeed=9.;\n    float shadowScale=2.2;\n    float shadowAlpha=1.;\n    \n    vec2 uv=I/iR;\n    vec2 buv=uv-offcenter;\n    buv/=1.+vec2(.2,.2)*(shadowScale+sin(iTime*breathSpeed))/8.;\n    buv+=offcenter;\n    vec4 img=texture(iChannel0,uv);\n    vec4 bimg=texture(iChannel0,buv);\n    vec3 scol=getShadowCol2(uv,bimg.xyz);\n    O=mix(vec4(scol,bimg.a*shadowAlpha),img,img.a);\n    O=mix(vec4(0.81),O,O.a);\n    //O.rgba=vec4(O.a);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define iR iResolution.xy\n#define SS(a,b,t) smoothstep(a,b,t)\n#define P (1./iR.y)\n#define T (iTime)\n#define S(x,t) smoothstep(x,x-4.*P,t)\nconst float PI=3.14159265;\nconst float ATR=PI/180.;\nvec2 randDir(vec2 id,float time)\n{\n    id+=vec2(3,181);\n    float t=time+PI*2.*fract(sin(83.*id.x)*(id.y)*(414.-id.y*5.));\n    return vec2(cos(t),sin(t));\n}\nfloat pnoise(vec2 uv,float iTime)\n{\n    vec2 id=floor(uv);uv=fract(uv);\n    vec2 of=vec2(1,0);\n    float t=iTime*.8;\n    float a=dot(uv-of.yy,randDir(id+of.yy,t)),\n          b=dot(uv-of.xy,randDir(id+of.xy,t)),\n          c=dot(uv-of.yx,randDir(id+of.yx,t)),\n          d=dot(uv-of.xx,randDir(id+of.xx,t));\n    uv=uv*uv*(vec2(3)-2.*uv);//f'(0)=f'(1)=0\n    a=mix(a,b,uv.x),b=mix(c,d,uv.x);      \n    return mix(a,b,uv.y)/1.4+.5;\n}\nmat2 getRot(float a){return mat2(cos(a),sin(a),-sin(a),cos(a));}\nvec3 palette(float t)\n{\n    t*=1.732;\n    return vec3(.7)+vec3(.3)*cos(2.*PI*(vec3(.71,.31,.21)*t+vec3(.2,.4,.6)));\n}\n\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\n\n//------------------dog----------------//\nvec2 rot(vec2 uv,float t)\n{\n    float c=cos(t),s=sin(t);\n    return mat2x2(c,-s,s,c)*uv;\n}\nfloat body(vec2 uv,float d)\n{\n    vec2 huv=rot(uv,.17),euv=rot(uv,.22),buv=uv;\n    euv.y+=0.04+d*.01;//off\n    euv.x*=sign(euv.x);\n    euv-=vec2(.16+d*.01,.1);//mid dis\n    euv=abs(rot(euv,-.1)*vec2(2,1));//mirr rot\n    huv-=vec2(.14,-d*.002);\n    huv*=vec2(1.,20.*huv.y/(.9-huv.x));\n    buv.x+=buv.y*buv.y*.1+d*.003;\n    float h=S(.4,length(huv)),\n         b=S(.26,length(buv.x))*step(uv.y,0.),\n         e=S(.19-d*.01,length(dot(euv,vec2(1))));\n    \n    return max(max(h,e),b);\n}\nfloat dbar(vec2 p,vec2 a,vec2 b)\n{\n    b=b-a;p=p-a;\n    return length(p-b*clamp(dot(p,b)/dot(b,b),0.,1.));\n}\nvoid image(out vec4 O,vec2 uv,vec2 I)\n{\n    vec2 suv=uv,e=vec2(0.,1.);\n    vec4 z=e.xxxx,o=1.-z;\n    //anim \n    uv+=vec2(.004*sin(max(.1,sin(iTime*0.))*10.),\n    +.11);\n\n    float otl=body(uv,0.);//big mat\n    float inl=body(uv*1.1,1.);\n    O= e.xxxy*otl;\n    O= mix(O,o,inl); \n    //face\n    O=mix(O,e.xxxy,min(otl,\n    S(.2,length(uv-vec2(.5,.1)))));\n    O=mix(O,e.xxxy, S(.04,length(uv-vec2(0,.06))));\n    //arm\n    uv+=.12;\n    uv=rot(uv,-1.+sin(iTime*10.)*.3);\n    vec2 se=e.yx*.2,hp=se*.8;\n    O=mix(O,e.xxxy,S(.018,\n    min( dbar(uv,e.xx,se),\n         dbar(uv,hp,hp+vec2(.01,.03)))));\n}\n\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    vec2 uv = (I-.5*iR)*P;\n    image(O,uv,I);\n}","name":"Buffer A","description":"","type":"buffer"}]}