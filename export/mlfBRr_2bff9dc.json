{"ver":"0.1","info":{"id":"mlfBRr","date":"1692523474","viewed":81,"name":"Visual cortex twister","username":"gimulnautti","description":"Generates cheap hallucinations: Fullscreen and stare at the middle for long enough, then quickly move eyes to a dark spot.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["tunnel","eyetwister"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float tunnel(vec2 uv, vec2 mid, vec2 mod)\n{\n    // base vectors\n    vec2 up = vec2(0,1);\n    vec2 right = vec2(1,0);\n    vec2 toFrag = uv - mid;\n    \n    // angle + log distance from middle\n    float angle = acos(dot(toFrag, up) / (length(toFrag)));\n    float dist = log(length(toFrag));\n        \n    // have two sides to it\n    if (dot(toFrag, right) > 0.0)\n    {\n        angle = -angle;\n    }\n\n    // animate tunnel \n    dist += cos(iTime / 4.0) * cos(dist * 3.0 + angle * 6.0) / 3.75;\n\n    // resolve texture UV\n    vec2 texUv = vec2(angle / 3.1415192, 1.0-dist);\n    \n    // tiling\n    texUv.x *= 4.0;\n    texUv.y *= 1.7;\n           \n    //animate\n    texUv.x += iTime / 2.0;\n    texUv.y -= iTime / 1.5 * mod.x;\n    \n    // animate texture pickup\n    texUv.y += 1.5 * cos(dist * sin(iTime / 3.0)) * mod.y;\n    \n    return texture(iChannel0, texUv).r;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // find aspect ratio\n    float aspect = iResolution.x / iResolution.y;\n    vec2 uv = fragCoord/iResolution.xy;\n    uv.x *= aspect;\n    \n    //uv.x += sin(iTime) / 3.6;\n    //uv.y += cos(iTime * 1.23) / 4.2;\n    vec2 mid = vec2(0.5 * aspect, 0.5);\n\n    // get slightly different tunnels\n    float t1 = tunnel(uv, mid, vec2(-1.05, 1.0));\n    float t2 = tunnel(uv, mid, vec2(-1.1, 1.05));\n    float t3 = tunnel(uv, mid, vec2(-1.15, 1.1));\n    \n    // compose image\n    vec3 col = vec3(t1, t2, t3);\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}