{"ver":"0.1","info":{"id":"3dGyDK","date":"1603718021","viewed":65,"name":"Raycast experiment 2","username":"alexijohansen","description":"Raycast experiment, not sure where the noisy stuff is coming from.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["raycast"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SPEED 0.1\n#define STEPS 90\n#define STEPSIZE 50.0\n#define NEARCLIP 10\n\n#define SOFT 0.005\n#define TRESH 0.6\n\nfloat treshold(vec2 uv)\n{\n \tfloat f = SOFT/2.0;\n\tfloat a = TRESH - f;\n\tfloat b = TRESH + f;\n\t\n\tfloat tx = texture(iChannel0, uv).x;\n\t\n\treturn smoothstep(a, b, tx);\n}\n\nvec3 raycast(vec2 p, vec2 uv)\n{\n    //vec2 v = normalize(vec2(uv.x*0.5,(uv.y*0.25)+0.5))/STEPSIZE;\n    vec2 v = (vec2(uv.x*0.75,(uv.y*0.5)+0.5))/STEPSIZE;\n\t\n   \tfloat d = 0.0;\n\tfloat tx = 0.0;\n    \n\tfor( int i=NEARCLIP; i < STEPS + NEARCLIP; i++ )\n    {\n        float t = treshold( p + (v*float(i)) );\n\n        if ( t != 0.0 )\n        {\n        \ttx = texture(iChannel0, p + (v*float(i)) ).x;\n            d = 1.0 - (float(i-NEARCLIP)/float(STEPS));\n            break;\n        }\n    }\n    \n    return vec3(d * tx);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord/iResolution.xy);\n\n    //float map = treshold(uv) * 0.3;\n    //fragColor = vec4(map,map,map,1.0) + vec4(raycast(vec2(0.55,fract(iTime*SPEED)),uv - 0.5),1.0);\n    \n    fragColor = vec4(raycast(vec2(fract(iTime*(SPEED/4.0)),fract(iTime*SPEED)),uv - 0.5),1.0);\n}","name":"Image","description":"","type":"image"}]}