{"ver":"0.1","info":{"id":"4ddSWX","date":"1461807124","viewed":393,"name":"8-bittish waterfall","username":"roywig","description":"Just a quick sketch; colors and gradient and so on need some real work. Could be golfed pretty small.\n\nInspired by Mark Ferrari\nhttp://www.gdcvault.com/play/1023586/8-Bit-8-Bitish-Graphics\nhttp://www.effectgames.com/demos/canvascycle/?sound=0","likes":18,"published":1,"flags":0,"usePreview":0,"tags":["water"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159\nfloat map(float value, float inMin, float inMax, float outMin, float outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\nvec3 palette(float value){\n    value = sin((value-.25)*PI*2.)/2.+0.5;\n    return mix(vec3(0.108,0.943,1.000),vec3(0.023,0.679,1.000),value);\n}\nvec3 colorWave(float in_,float wavea, float waveb){\n    float value = map(in_,wavea,waveb,0.,1.);\n    return palette(mod(value-iTime,1.))*step(wavea,in_)*(1.-step(waveb,in_));\n}\nfloat wave(float x, float height,float y){\n    return height*sin(x)+y;\n}\nfloat nthWave(float x, float n){\n    return wave(x, n,exp(n)-1.);\n}\nvec3 waves(vec2 z){\n    vec3 color;\n    color = colorWave(z.y,0.,nthWave(z.x,1.));\n    for (float j = 1.; j < 6.; j+=1.){\n        color += colorWave(z.y, nthWave(z.x,j),nthWave(z.x,j+1.));\n    }\n\treturn color;\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 z = fragCoord.xy/iResolution.xy;\n    z.x *= iResolution.x/iResolution.y;\n    z += vec2(-1);\n    z = z * 10.;\n    z.y = -z.y;\n    vec3 color = mix(waves(z),waves(z-vec2(PI,0.)),0.5);\n    color = mix(color, vec3(0.044,0.069,0.225),(z.y/30.));\n    fragColor = vec4(color,1.0);\n}\n","name":"Image","description":"","type":"image"}]}