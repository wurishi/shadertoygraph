{"ver":"0.1","info":{"id":"4fjcDt","date":"1723163746","viewed":152,"name":"Suds","username":"wyatt","description":"suds","likes":12,"published":3,"flags":32,"usePreview":0,"tags":["suds"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"Main {\n\n    vec4 q = A(U);\n\n    Q = smoothstep(2./R.y,.0,abs(q.wwww));\n    \n    Q = B(U);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define Main void mainImage(out vec4 Q, in vec2 U)\n#define R iResolution.xy\n#define A(U) texture(iChannel0,(U)/R)\n#define B(U) texture(iChannel1,(U)/R)\nvec4 hash44(vec4 p4)\n{\n\tp4 = fract(p4  * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"Main {\n\n    Q = A(U);\n    U = 2.*(U-.5*R)/R.y;\n    if (iFrame < 1) Q.w = 1e9;\n    float s = .5+.02*float(iFrame);\n    for (float x = -2.; x<=2.; x++)\n    for (float y = -2.; y<=2.; y++) {\n        vec2 V = (round(U*s)+vec2(x,y))/s;\n        vec4 h = hash44(vec4(V,iFrame,iTime));\n        V += .25*(h.xy*2.-1.);\n        vec2 W = V*.5*R.y+.5*R;\n        float r = min(.25*h.z,A(W).w-.001);\n        float f = length(U-V.xy)-r;\n        if (f < Q.w) {\n            Q.w = f;\n            Q.xy = V;\n            Q.z = r;\n        }\n        \n\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"float map (vec3 p) {\n    vec4 q = A(p.xy*.5*R.y+.5*R);\n    \n    float d = length(p-vec3(q.xy,0))-q.z;\n    \n    return d;\n    \n\n}\nvec3 normal (vec3 p) {\n    vec2 e = vec2(1./R.y,0);\n    float o = map(p);\n    return normalize(vec3(\n        map(p+e.xyy)-o,\n        map(p+e.yxy)-o,\n        map(p+e.yyx)-o\n    ));\n}\nMain {\n    vec3 p = vec3(0,0,-2);\n    vec3 d = normalize(vec3(2.*(U-.5*R)/R.y,2));\n    Q = vec4(0);\n    for (float i = 0.; i < 100.; i++) {\n        float m = map(p);\n        p += .8*m*d;\n        if (m > 4.) break;\n        if (m < 1e-5) {\n            d = reflect(d,normal(p));\n            p += 2e-5*d;\n            Q.xyz += .1*(.5+.5*d)*i/100.;\n        }\n    }\n    //Q = vec4(sign(map(vec3(2.*(U-.5*R)/R.y,0))));\n\n}","name":"Buffer B","description":"","type":"buffer"}]}