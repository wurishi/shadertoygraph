{"ver":"0.1","info":{"id":"7ljcWV","date":"1650288381","viewed":651,"name":"Christian Fitness Shrine","username":"evvvvil","description":"Winning shader made at Revision 2022 Shader Showdown Quarter-final.\nLive coded on stage in 25 minutes.  Designed beforehand in several hours.\n\n","likes":27,"published":1,"flags":0,"usePreview":0,"tags":["wave","demoscene","glow","temple","greeble","shrine","lazer","bend"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Winning shader made at Revision 2022 Shader Showdown Quarter-final\n\n// This shader was coded live on stage in 25 minutes. Designed beforehand in several hours.\n\n// \"Christian Fitness Shrine\" because I was listening to \"Christian Fitness\" UK band while preparing for the showdown. One of the best UK bands at the moment imo.\n// https://christianfitness.bandcamp.com/album/hip-gone-gunslingers\n\nvec2 z,v,e=vec2(.00035,-.00035);float t,tt,g,r,a,bb;vec3 op,pp,po,no,al,ld,lp;vec4 kp;\nfloat smin(float a,float b,float k){ float h=max(0.,k-abs(a-b)); return min(a,b)-h*h*.25/k;}\nfloat smax(float a,float b,float k){ float h=max(0.,k-abs(-a-b)); return max(-a,b)+h*h*.25/k;}\nmat2 r2(float r){return mat2(cos(r),sin(r),-sin(r),cos(r));}\nvec2 mp( vec3 p,float ga)\n{\n  op=p;bb=1.-(sin((p.z+tt*4.)*0.064)*.5+.5);\n  p.x=abs(p.x)-bb*15.;\n  p.xy*=r2(1.57*bb);\n  p.z=mod(p.z+tt*4.,50.)-25.;\n  pp=p; pp.xz=abs(pp.xz)-7.3;\n  vec2 h,d,t=vec2(length(pp)-2.5,0);  // balls\n  t.x=smin(t.x,length(pp-1.6)-.6,.5); // BUBBLE    \n  t.x=smax(length(pp-1.7)-.3,t.x,.5); // bubble hole\n  h=vec2(length(pp-1.5)-.5,2); //bubble light\n  kp=vec4(p-vec3(0,4.63,0),1); //kp\n  r=1.;                             //r\n  for(int i=0;i<4;i++){    //greeble greeble bro bro         \n      kp.xz=abs(kp.xz)-.4;\n      kp.xz*=r2(.785*mod(float(i),2.));\n      kp*=2.3;      \n      r=min(r,clamp(abs(cos(kp.y*.3)*abs(cos(kp.z*.3)*3.)-.5)-.5,-.25,.25)/kp.w);\n    }\n  t.x=smin(t.x,p.y+1.+sin(length(p.xz)-tt*2.)*0.5,1.5); //TERRAIN \n  t.x=min(t.x,length(p.yz-vec2(8,0))-.1-r); //Bridge\n  a=max(length(p.xz)-8.+r+p.y*.75,-(length(p.xz)-2.)); //PYRA\n  t.x=smin(t.x,a,1.5); //add pyra\n  t.x=max(t.x,-(abs(abs(p.y-4.)-1.)-.2-r)); //blue cut\n  a+=.2;  //push pyra\n  h.x=min(h.x,a);  //add pyra to glo\n  pp+=cos(p.y*.5); //deform\n  h.x=min(h.x,length(pp.xy-vec2(0,9)));; //lazers\n  g+=0.1/(0.1+h.x*h.x*(50.-45.*sin(op.z*.2+tt*2.)))*ga; //glow\n  t=t.x<h.x?t:h; //add t and h\n  pp.xz=abs(pp.xz)-.3; //spread out lines\n  h=vec2(length(pp.xz)-.1+r*.3,1); //BLACK LINES VERTICAL\n  pp.y=abs(pp.y-6.)-2.;\n  h.x=smin(h.x,length(pp.xy-vec2(0,1))-.1+r,1.5);  \n  pp=p;pp.y=abs(abs(p.y-5.)-1.)-.5-r;\n  h.x=smin(h.x,max(a-.5,pp.y),2.);\n  a=max(abs(length(p.xz)-16.+r)-.6,abs(p.y+r)-1.5); //BLACK CYLINDER\n  h.x=smin(h.x,a,1.5);\n  h.x=smin(h.x,(length(p.xy)-1.+r),1.5);   //FLOOR CYLINDER BLACK\n  t=t.x<h.x?t:h;\n  t.x*=0.6;\n  return t;\n}\nvec2 tr( vec3 ro,vec3 rd)\n{\n  vec2 h,t=vec2(.1);\n  for(int i=0;i<128;i++){\n    h=mp(ro+rd*t.x,1.);\n    if(h.x<.0001||t.x>70.) break;\n    t.x+=h.x;t.y=h.y;\n  }\n  if(t.x>70.) t.y=-1.;\n\treturn t;\n}\n#define a(d) clamp(mp(po+no*d,0.).x,0.,1.)\n#define s(d) smoothstep(0.,1.,mp(po+ld*d,0.).x)\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){ \nvec2 uv=(fragCoord.xy/iResolution.xy-0.5)/vec2(iResolution.y/iResolution.x,1);   \ntt=mod(iTime,75.); \n  vec3 ro=vec3(cos(tt*.1)*13.,13.-sin(tt*.4)*8.,-10),\n  cw=normalize(vec3(0,0,0)-ro),\n  cu=normalize(cross(cw,vec3(0,1,0))),\n  cv=normalize(cross(cu,cw)),\n  rd=mat3(cu,cv,cw)*normalize(vec3(uv,.5)),co,fo;\n  co=fo=clamp(vec3(.17,.15,.14)-length(uv)*.15-rd.y*.1,0.,1.);\n  z=tr(ro,rd);t=z.x;\n  if(z.y>-1.){\n    po=ro+rd*t;\n    no=normalize(e.xyy*mp(po+e.xyy,0.).x+e.yyx*mp(po+e.yyx,0.).x+e.yxy*mp(po+e.yxy,0.).x+e.xxx*mp(po+e.xxx,0.).x);\n    ld=normalize(ro-po);\n    al=clamp(mix(vec3(.3,.4,.7)-r*15.,vec3(0.1)-r*15.,z.y*1.3),0.,1.);    \n    if(z.y>1.) al=vec3(1);\n    float dif=max(0.,dot(no,ld)),\n    fr=pow(1.+dot(no,rd),4.),\n    sp=pow(max(dot(reflect(-ld,no),-rd),0.),40.);    \n    co=mix(sp+al*(a(.1)*a(.5)+.4)*(dif+s(2.0)),fo,min(fr,.5));\n    co=mix(fo,co,exp(-.00002*t*t*t));\n  }\n  co+=g*.2*vec3(.9,.5,.1);  \n  co=mix(co,co.xzy,length(uv)*.5);\n  fragColor = vec4(pow(co,vec3(.45)),1);\n}","name":"Image","description":"","type":"image"}]}