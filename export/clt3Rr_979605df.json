{"ver":"0.1","info":{"id":"clt3Rr","date":"1681886960","viewed":105,"name":"[230419] Audio Eclipse","username":"prin_e","description":"Audio Eclipse with HSV spectrum\n","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["reactive","audio","eclipse"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGzn","filepath":"/media/a/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","previewfilepath":"/media/ap/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","type":"music","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Audio Eclipse\n// inspired by https://www.shadertoy.com/view/MdsXWM\n\nconst float pi = 3.14159;\n\n// Official HSV to RGB conversion\n// https://www.shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb( in vec3 c )\n{\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n\treturn c.z * mix( vec3(1.0), rgb, c.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from -1 to 1)\n    vec2 uv = 2.0 * (fragCoord - 0.5 * iResolution.xy)/iResolution.y;\n    float dist = length(uv);\n    \n    // get theta (0~2pi)\n    float theta = asin(uv.y / dist);\n    if(uv.x < 0.0)\n        theta = pi - theta;\n    theta = mod(theta+pi, 2.*pi);\n    \n    // HSV to RGB (theta + time)\n    vec3 col = vec3(0);\n    vec3 rgb = hsv2rgb(vec3(iTime * 0.1 + theta / (2.0 * pi), 1.0, 1.0));\n    col.rgb = rgb / pow(dist / 0.5, 2.0); // background\n    \n    // Audio spectrum\n    float s_theta = 0.5 + 0.5 * sin(theta);\n    float b = texture(iChannel0, vec2(0.5 + 0.5 * sin(theta), 0.0)).r;\n    \n    // Colors\n    col.rgb += col.rgb / pow(dist / b, 1.4); // shaft\n    col = mix(col, rgb, smoothstep(0.55, 0.45, dist)); // highlight\n    col = mix(col, vec3(0.), smoothstep(0.45, 0.4, dist)); // black circle\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}