{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"music","id":"4sXGRr","filepath":"/media/a/48e2d9ef22ca6673330b8c38a260c87694d2bbc94c19fec9dfa4a1222c364a99.mp3","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"float RR(vec2 uv){\n    return fract(cos(dot(uv ,vec2(11.954626276298,71.236333))) * 43718.54763);\n}\nfloat raster(vec2 uv){\n\tvec2 oxide=mod(uv, vec2(0.1));\n\tif(oxide.x>0.08 && oxide.y>0.08)\n\t\treturn 1.0;\n\telse\n\t\treturn 0.0;\n}\nvec4 ball(vec2 uv, vec2 pos, float size, vec4 color_border, vec4 color_inside){\n\tfloat dist=distance(uv,pos);\n\tif(dist>size && dist<(size+size*0.35))\n\t\treturn color_border;\n\telse if(dist<size)\n\t\treturn color_inside;\n\telse\n\t\treturn vec4(-1.0);\n}\nvec4 rectangle(vec2 uv, vec2 pos, vec2 mins, vec2 maxs, vec4 c){\n\tif(uv.x>(pos.x+mins.x) && \n\t   uv.y>(pos.y+mins.y) && \n\t   uv.x<(pos.x+maxs.x) && \n\t   uv.y<(pos.y+maxs.y))\n\t\treturn c;\n\treturn vec4(-1.0);\n}\n\nfloat line(vec2 p1, vec2 p2, vec2 uv, float thick) {\n\n  float vA= abs(distance(p1, uv));\n  float vB= abs(distance(p2, uv));\n  float vC= abs(distance(p1, p2));\n\n  if ( vA>= vC|| vB>=  vC) return 0.0;\n\n  float p = (vA+ vB+ vC) * 0.5;\n  float h = (2.0 / vC) * sqrt( p * ( p - vA) * ( p - vB) * ( p - vC));\n  return mix(1.0, 0.0, smoothstep(0.5 * thick, 1.5 * thick, h));\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 start=vec2(0.0,3.0);\n\tvec2 uv=fragCoord.xy/iResolution.xy;\n\tfloat aspectCorrection=(iResolution.x/iResolution.y);\n\tvec2 coordinate_entered=2.0*uv-1.0;\n\tvec2 coord=vec2(aspectCorrection,1.0) *coordinate_entered;\n\tvec2 rcoord=coord;\n\tvec4 end=vec4(0.0);\n\tcoord.y+=min(iTime,10.0)*0.15;\n\tcoord*=1.2+min(max(iTime-10.0,0.0),16.0)*0.16;\n\tfloat rytmi=floor(iTime*(80.0/60.0));\n\t/*vec4 result=rectangle(coord, vec2(0.0), vec2(-0.06,-0.1), vec2(0.06,min(0.1+iTime*0.09,1.0)), vec4(0.3, 0.38, 0.3, 1.0));\n\t\tif(result.x>=0.0)\n\t\t\tend=result;*/\n\tvec4 result=vec4(0.0);\n\t\n\t\tfor(float i=0.0; i<3.0; i+=0.081){\n\t\tfloat music=0.0; //texture(iChannel0,vec2(0.6+i*0.06)).x-0.16;\n\t\tmusic*=music;\n\t\tvec2 position=vec2((RR(vec2(i,7.0))*2.0-1.0)*mod(iTime*0.6+i,3.0), mod(iTime*0.6+i,3.0)-1.5);\n\t\tfloat size=min((0.08+RR(vec2(i,0.0))*0.11)*mod(iTime*0.6+i,3.0),1.3);\n\t\tfloat kerroin=sin(i)*0.07;\n\t\tvec4 color_border=vec4(0.47+kerroin, 0.29, 0.28, 1.0);\n\t\tvec4 color_inside=vec4(0.7+music, 0.53+kerroin+music, 0.3+kerroin+music, 1.0);\n\t\tvec4 result=ball(rcoord, position, size, color_border, color_inside);\n\t\tif(result.x>=0.0)\n\t\t\tend=result;\n\t}\n\tfloat rr=floor(iTime*(80.0/60.0));\n\tfor(float j=-4.0; j<6.0; j++)\n\tfor(float i=-8.0; i<-2.0; i++){\n\t\tif(mod(i+j+1000.0*RR(vec2(i,j+rr)*4.0),5.0)<2.0){\n\t\t\tvec4 result=rectangle(rcoord, vec2(i*0.2,j*0.2), vec2(-0.05), vec2(0.1), vec4(0.01));\n\t\t\tif(result.x>=0.0)\n\t\t\t\tend+=result;\n\t\t} \n\t}\n\t\n\t\n\tfloat r=line(vec2(0.0, 0.0),min(iTime*0.1,1.0)*start, coord, 0.02);\n\tif(r>0.0)\n\t\tend=vec4(1.0);\n\t\n\tfor(float i=0.0; i<64.0; i++){\n\t\tvec2 pos=start+vec2(RR(vec2(5.0,i))*10.0-5.0, -5.0+mod(RR(vec2(3.0,i))*15.0+iTime*1.0,15.0));\n\t\tresult=rectangle(coord, pos, vec2(-0.1), vec2(0.1), vec4(0.1));\n\t\tif(result.x>=0.0)\n\t\t\tend=result;\n\t}\n\t\n\tfor(float i=0.0; i<3.141*2.0; i+=0.3){\n\t\tvec2 posi=start+(0.5+0.13*sin(i*i*i+iTime))*max(min(iTime-15.0, 5.3),0.0)*vec2(cos(i), sin(i));\n\t\tfloat r=line(posi,start, coord, 0.014);\n\t\tif(r>0.0)\n\t\t\tend=vec4(1.0);\n\t\t\n\t\tresult=ball(coord, posi, max(min(iTime-15.0, 20.0)*(0.014+0.0063*sin(i*i*i+iTime)),0.0), vec4(0.4, 0.01, 0.01, 1.0), vec4(0.25, 0.16, 0.16, 1.0));\n\t\tif(result.x>=0.0)\n\t\t\tend=result;\n\t}\n\t\n\tresult=ball(coord, start, max(min(iTime-10.0, 8.0),0.0)*0.17, vec4(0.5, 0.11, 0.01, 1.0), vec4(0.25, 0.16, 0.16, 1.0));\n\tif(result.x>=0.0)\n\t\tend=result;\n\n\t\n\tif(end.x==0.0)\n\t\tend=vec4(0.39*uv.y, 0.39*uv.y, 0.37*uv.y,1.0);\n\tfragColor=(end+vec4(-0.02+RR(uv*iTime)*0.04))*(1.62-length(rcoord));\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MssXRr","date":"1396212151","viewed":647,"name":"Tuhkamaa Shadertoy version","username":"Branch","description":"Shadertoy version of our Instanssi 2014 4k intro called \"Tuhkamaa\" won the 4k compo. Full version with noby's music here: http://branch.untergrund.net/online/intros/tuhkamaa/windo.htm","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["tuhkamaa","typographicy","constructivism","minimalism"],"hasliked":0,"parentid":"","parentname":""}}