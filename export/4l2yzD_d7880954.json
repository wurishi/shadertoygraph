{"ver":"0.1","info":{"id":"4l2yzD","date":"1507713944","viewed":532,"name":"derivative based blur","username":"yours3lf","description":"derivative based blur, unfortunately it has blocky (2x2) artefacts, but having the data available could be useful for other things","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["derivativebasedblur"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = vec4(0.0);\n    \n    ////////////////////////////////\n    //derivative based blur\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    vec4 d[4];\n\td[0] = texture( iChannel0, uv );\n\t\n\tvec4 dx = dFdx(d[0]);\n    vec4 dy = dFdy(d[0]);\n    d[1] = d[0] - dx;\n    d[2] = d[0] - dy;\n    \n    vec4 ddx = dFdx(d[1]);\n    vec4 ddy = dFdy(d[2]);\n    vec4 tmpX = d[1] - ddx;\n    vec4 tmpY = d[2] - ddy;\n    \n    //find out the last data in the 2x2 area\n    if(all(lessThan(abs(d[0] - tmpX), vec4(0.001))))\n    {\n        d[3] = tmpX;\n    }\n    else\n    {\n        d[3] = tmpY;\n    }\n    \n    vec4 deriRes = vec4(0.0);\n    for(int c = 0; c < 4; ++c)\n    {\n    \tderiRes += d[c];\n    }\n    \n    deriRes *= 0.25;\n    \n    ////////////////////////////////\n    //texture based blur  \n    vec4 texRes = vec4(0.0);\n    texRes += texture( iChannel0, (fragCoord.xy+vec2(0,0)) / iResolution.xy );\n    texRes += texture( iChannel0, (fragCoord.xy+vec2(0,1)) / iResolution.xy );\n    texRes += texture( iChannel0, (fragCoord.xy+vec2(1,0)) / iResolution.xy );\n    texRes += texture( iChannel0, (fragCoord.xy+vec2(1,1)) / iResolution.xy );\n    texRes *= 0.25;\n    ////////////////////////////////\n    \n    //original color\n    //fragColor = d[0];\n    //derivative blur result\n    fragColor = deriRes;\n    //texture blur result\n    //fragColor = texRes;\n    //difference between original and derivative blur\n    //fragColor = abs(deriRes - d[0]);\n    //difference between original and texture blur\n    //fragColor = abs(texRes - d[0]);\n    //difference between derivative blur and texture blur\n    //fragColor = abs(texRes - deriRes);\n}","name":"Image","description":"","type":"image"}]}