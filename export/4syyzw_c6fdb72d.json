{"ver":"0.1","info":{"id":"4syyzw","date":"1521357041","viewed":231,"name":"Interactive Collatz with good","username":"rodolphito","description":"Lots of credit to IQ for being really good. Hope I got all the math right!\n\nTry using the mouse! IQ's collatz: https://www.shadertoy.com/view/llcGDS","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["fractal","domain","hsv","complex","collatz"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec4 pi = vec4(0,2,4,8)*atan(1.0);\n\nvec2 cdiv (vec2 a,vec2 b){return vec2(dot(a,b),a.y*b.x-a.x*b.y)/dot(b,b);}\nvec2 cmul (vec2 a,vec2 b){return vec2(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x);}\nvec2 cmulj(vec2 z){return vec2(-z.y,z.x);}\nvec2 cexp (vec2 z){return exp( z.x)*sin(z.y+pi.yx);}\nvec2 cexpj(vec2 z){return exp(-z.y)*sin(z.x+pi.yx);}\nvec2 cpow (float a,vec2 z){return pow(a, z.x)*sin(z.y+pi.yx);}\nvec2 cpowj(float a,vec2 z){return pow(a,-z.y)*sin(z.x+pi.yx);}\nvec2 csqr (vec2 z){return vec2(z.x*z.x-z.y*z.y,2.0*z.y*z.x);}\nvec2 cinv (vec2 z){return vec2(z.x,-z.y)/dot(z,z);}\nvec2 cPow (vec2 z,float n){return pow(length(z),n)*sin(atan(z.y,z.x)*n+pi.yx);}\nvec2 cexpc(vec2 a, vec2 b)\n{\n    return cmul(cpow(dot(a,a),0.5*b),cexpj(atan(a.y,a.x)*b));\n    //(a+bi)^(c+di)=(aa+bb)^((c+id)/2)*e^(i(c+id)arg(a+ib))\n}\n\nvec3 hsv2rgb(in vec3 c)\n{\n\treturn c.z*mix(vec3(1.0),0.5+0.5*sin(c.x+pi.xzw/3.0),c.y);\n}\n\nvec3 getcol(float a)\n{\n\tvec3 c = sin(pi.w*vec3(a, a + 0.333, a + 0.666)) * 0.5 + 0.5;\n    c += 0.01;\n    return c * 0.05;\n}\n\nvec4 collatz(vec4 z, vec2 shift)\n{\n    vec2 k = cexpj(pi.z*z.xy);\n    vec2 zd = z.xy*1.25+vec2(0.5,0.0);\n    return vec4(\n          z.xy*1.75+vec2(0.5,0.0) - cmul(k,zd) + shift,\n         cmul(z.zw,vec2(1.75,0.0) - cmul(k,zd*pi.z-vec2(0.0,1.25)))\n    );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = 7.0*(fragCoord-iResolution.xy*0.5)/iResolution.x;\n    vec4 z = vec4(p,1.0,0.0);\n    vec2 shift = 1.0 - 2.0 * iMouse.xy / iResolution.xy;\n    if (iMouse.xy == iMouse.zw) shift += sin(iTime + vec2(0.0,pi*0.5));\n    for (int i = 0; i < 18; i++)\n    {\n        z = collatz(z, shift);\n    }\n    float hue = atan(z.z,z.w);\n    float val = 1.0/(1.0+0.0000000000001*dot(z.xy,z.xy));\n    float sat = 1.0-1.0/(1.0+0.000000001*dot(z.zw,z.zw));\n\tfragColor = vec4(hsv2rgb(vec3(hue+iTime,sat,val)),1.0);\n    //fragColor = vec4(pow(getcol(hue),vec3(val)),1.0);\n}","name":"Image","description":"","type":"image"}]}