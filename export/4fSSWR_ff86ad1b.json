{"ver":"0.1","info":{"id":"4fSSWR","date":"1706175954","viewed":94,"name":"water ripple WIP","username":"Superku","description":"water ripple","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["water"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Based on Adrian Boeing's blog: Ripple effect in WebGL, published on February 07, 2011\n// adapted for the lovely tkap :) catKISS\n// http://adrianboeing.blogspot.com/2011/02/ripple-effect-in-webgl.html\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 rippleCenter = vec2(0.7,0.2);\n    vec2 uv = fragCoord / iResolution.xy;\n    vec2 cp = uv - rippleCenter;\n    cp.x *= iResolution.x / float(iResolution.y);\n    float cl = length(cp);\n    float timeAdjusted = mod(iTime * 0.2, 1.0);\n    float waveProgress = clamp(1.0 - abs(timeAdjusted - cl-0.2)*4.0, 0.0, 1.0);\n    waveProgress = smoothstep(0.0,1.0,waveProgress);\n    float waveHeight = 1.0 - timeAdjusted;\n    float cl2 = cl*cl + cl;\n    vec2 uvShift = (cp / cl) * cos(-cl2 * 30.0 + timeAdjusted * 12.0) * 0.075 * waveProgress * waveHeight;\n    uv += uvShift;\n    vec3 normal = vec3(uvShift.x*20.0,-uvShift.y*20.0,1.0);\n    normal = normalize(normal);\n    vec3 sunDir = normalize(vec3(-1.0,-1.0,-1.0));\n    vec3 reflectDir = reflect(sunDir, normal);\n    float specular = pow(abs(reflectDir.z), 16.0); // why does abs make a difference??\n    float diffuse = max(0.0, dot(-normal, sunDir))+0.5;\n    vec3 col = texture(iChannel0, uv).xyz;\n    col *= diffuse;\n    col += specular*0.5;\n    fragColor = vec4(col, 1.0);\n    //fragColor = vec4(waveProgress,waveProgress,waveProgress,1.0);\n    //fragColor = vec4(specular,specular,specular,specular);\n}\n","name":"Image","description":"","type":"image"}]}