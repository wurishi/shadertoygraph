{"ver":"0.1","info":{"id":"Xcsfzn","date":"1723244555","viewed":33,"name":"Striped Voronoi","username":"05e12910","description":"Voronoi-generated pattern with stripes","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nprecision highp float;\n\nfloat rand(float n) {\n    n += n * 0.1338;\n    n *= n + 0.2193;\n    n = sin(n * 396.393 + n * 2.34) * 2341.123;\n    return fract(n);\n}\n\nvec2 rand_point(float n, float r) {\n    return vec2(rand(n) * r, rand(-n));\n}\n\nconst float PI = 2. * asin(1.);\nconst float TWO_PI = 2. * PI;\nconst vec3 background = vec3(37., 51., 64.);\nconst vec3 accent = vec3(66., 89., 112.);\nconst float gap = .005;\nconst float stripe_gap = .005;\nconst float stripe = .005;\nconst int n = 20;\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord / iResolution.yy;\n    vec3 color = background / 255.;\n    float r = iResolution.x / iResolution.y; \n    \n    bool inside = false;\n    float dist = 100.;\n    bool equi = false;\n    int idx = -1;\n    \n    vec2 pos[n];\n    float m[n];\n    \n    for (int i = 0; i < n; i++) {\n        pos[i] = rand_point(float(i + 1), r);\n        m[i] = rand(float(i + n)) * TWO_PI - PI;\n        float d = distance(pos[i], uv);\n        if (d < dist) {  \n            dist = d;\n            idx = i;\n        }\n    }\n    \n    for (int i = 0; i < n; i++) {\n        if (i == idx) continue;\n        vec2 norm = pos[i] - pos[idx];\n        vec2 mid = uv - (pos[i] + pos[idx]) / 2.;\n        equi = abs(dot(mid, norm) / length(norm)) < gap / 2.;\n        if (equi) break;\n    }\n    \n    \n    if (!equi) {\n        vec2 pm = vec2(sin(m[idx]), cos(m[idx]));\n        float total_width = stripe_gap + stripe;\n        if (fract(dot(uv - pos[idx], pm) / length(pm) / total_width) < stripe / total_width)\n            color = accent / 255.;\n    }\n    \n    fragColor = vec4(color, 1.);\n}","name":"Image","description":"","type":"image"}]}