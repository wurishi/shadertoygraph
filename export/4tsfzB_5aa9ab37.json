{"ver":"0.1","info":{"id":"4tsfzB","date":"1512966292","viewed":145,"name":"Domain Coloring","username":"twistedtensor","description":"Domain coloring of a simple but beautiful complex function. Drag with mouse to change parameters. You can also try changing the function definition in `func`.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["complex","domaincoloring"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define TWO_PI 6.28318530718\n#define E 2.71828182846\n\nconst vec2 I = vec2(0.,1.);\n\nvec2 cart2pol(vec2 z)\n{\n    float r = abs(z.x)*sqrt(1.+pow(z.y/z.x,2.));\n    float theta = atan(z.y,z.x);\n    return vec2(r,theta);\n}\n\nvec2 pol2cart(vec2 z)\n{\n    float x = z.x*cos(z.y);\n    float y = z.x*sin(z.y);\n    return vec2(x,y);\n}\n\nvec2 mult(vec2 z,vec2 w)\n{\n    vec2 prod = vec2(z.x*w.x-z.y*w.y,z.x*w.y+z.y*w.y);\n    return prod;\n}\n\nvec2 inv(vec2 z)\n{\n    float x = z.x/(z.x*z.x+z.y*z.y);\n    float y = -z.y/(z.x*z.x+z.y*z.y);\n    return vec2(x,y);\n}\n\nvec2 div(vec2 z, vec2 w)\n{\n    return mult(z,inv(w));\n}\n\nvec2 conj(vec2 z)\n{\n    return vec2(z.x,-1.*z.y);\n}\n\nvec2 cexp(vec2 z)\n{\n    float r = pow(E,z.x);\n    vec2 expz = pol2cart(vec2(r,z.y));\n    return expz;\n}\n\nvec2 cpow(vec2 z, vec2 w)\n{\n    vec2 pol = cart2pol(z);\n    float r = pol.x;\n    float theta = pol.y;\n    float x = w.x;\n    float y = w.y;\n    float r2 = pow(r,x)*exp(-1.*y*theta);\n    float theta2 = theta + y*log(r);\n    vec2 res = pol2cart(vec2(r2,theta2));\n    return res;\n}\n\nvec2 csin(vec2 z)\n{\n    \n    return div(cexp(mult(I,z))-cexp(mult(-1.*I,z)),2.*I);\n}\n\nvec2 ccos(vec2 z)\n{\n    return (cexp(z)+conj(cexp(z)))/2.;\n}\n\nvec2 func(vec2 z,vec2 z_mouse)\n{\n    vec2 outp = csin(z);\n    return outp;\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec3 complexColor(vec2 z)\n{\n    vec2 z_pol = cart2pol(z);\n    float hue = z_pol.y/TWO_PI;\n    float light = 1.-pow(2.,-1.*z_pol.x);\n    return hsv2rgb(vec3(hue,1.,light));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 z = (2.0*fragCoord-iResolution.xy)/iResolution.y;\n    vec2 z_mouse = (2.0*iMouse.xy-iResolution.xy)/iResolution.y;\n\tfragColor = vec4(complexColor(func(z,z_mouse)),1.0); \n}","name":"Image","description":"","type":"image"}]}