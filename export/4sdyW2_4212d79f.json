{"ver":"0.1","info":{"id":"4sdyW2","date":"1520255854","viewed":125,"name":"Just another FBM","username":"Pr0fed","description":"Learning and playing with colors.\n2d Worley noise this time.\n\nBTW what is the difference between Worley and Voronoi if any? I've seen people naming it Voronoi mostly.","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["fbm"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// 2D Worley noise.\nfloat r(float n)\n{\n \treturn fract(cos(n*89.42)*343.42);\n}\n\nvec2 r(vec2 n)\n{\n \treturn vec2(r(n.x*23.62-300.0+n.y*34.35),r(n.x*45.13+256.0+n.y*38.89)); \n}\n\nfloat worley2D(in vec2 n)\n{\n    float dis = 2.0;\n    for (int y= -1; y <= 1; y++) \n    {\n        for (int x= -1; x <= 1; x++) \n        {\n            // Neighbor place in the grid\n            vec2 p = floor(n) + vec2(x,y);\n\n            float d = length(r(p) + vec2(x, y) - fract(n));\n            if (dis > d)\n            {\n             \tdis = d;   \n            }\n        }\n    }\n    \n    return dis;\n}\n\n// Try setting to one :)\n#define NUM_OCTAVES 8\n\nfloat fbm ( in vec2 _st) \n{\n    float v = 0.075;\n    float a = 0.5;\n    \n    // Rotate to reduce axial bias\n    mat2 rot = mat2(cos(0.25), sin(0.25),\n                    -sin(0.25), cos(0.25));\n    \n    // Stable upward shift.\n    vec2 shift = -vec2(-iTime, iTime);\n    \n    for (int i = 0; i < NUM_OCTAVES; ++i) \n    {\n        v += a * worley2D(_st);\n        _st = rot * _st * 2.5 + shift;\n        a *= 0.4;\n    }\n    \n    return v;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) \n{\n    // Basic normalizarion.\n    vec2 st = (fragCoord - .5 * iResolution.xy ) / iResolution.y;\n    \n    // Tiling.\n    st *= 15.;\n    \n    vec3 color = vec3(0.0);\n\n    float f = fbm(st + fbm(st + fbm(st - fbm(st))));\n\n    // Orange - darkOrange mix.\n    color = mix(vec3(1.291, 0.549, 0.000),\n                vec3(0.992, 0.636, 0.000),\n                clamp((f*f) * 2.3, 0.0, 1.0));\n\n   \t// Further addition of orange.\n    color = mix(color,\n                vec3(1.836, 0.554, 0.000),\n                clamp(length(f), 0.0, 0.1));\n\n    fragColor = vec4((f*f*f + .93*f*f + .4 * f) * color, 1.);\n}","name":"Image","description":"","type":"image"}]}