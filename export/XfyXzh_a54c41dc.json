{"ver":"0.1","info":{"id":"XfyXzh","date":"1714759794","viewed":59,"name":"Cello: Alife 3+rgb","username":"JupiterDude","description":"Yet another take on Conway's Game of Life with some color and smoothing.\n\nNot sure if this will work on GPUs with lower precision internal - works fine on my 3080 as well as phone.\n\nControls:\n* Press <space> to reset.\n* LMB zoom & pan - Microscope mode!","likes":3,"published":1,"flags":48,"usePreview":0,"tags":["artificiallife"],"hasliked":0,"parentid":"MfdXDl","parentname":"Cello: Alife3"},"renderpass":[{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    if (fragCoord.y > 10.0 && fragCoord.y < (iResolution.y - 10.0) &&\n        fragCoord.x > 10.0 && fragCoord.x < (iResolution.x - 10.0) )\n    {\n        if (iMouse.z > 0.0) {\n            float cx = iMouse.x;\n            float cy = iMouse.y;\n            fragCoord -= vec2(cx, cy);\n            fragCoord /= 8.0;\n            fragCoord += vec2(cx, cy);\n        }\n\n        vec4 t = texelFetch( iChannel0, ivec2(fragCoord), 0);\n        float r = smoothstep(min(t.r, t.g), max(t.r, t.g), t.b); // t.r * t.g;\n        float g = smoothstep(min(t.g, t.b), max(t.g, t.b), t.r); // t.g * t.b;\n        float b = smoothstep(min(t.b, t.r), max(t.g, t.r), t.g); // t.b * t.r;\n        \n        fragColor = t;\n        \n    } else {\n        // vec4 t = texelFetch( iChannel0, ivec2(fragCoord), 0);\n        if (keypressed(65)) {\n            fragColor = vec4(1.0);\n        } else {\n            fragColor = vec4(.34); // t;\n        }\n        return;\n    }\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec4 init( vec2 fragCoord ) {\n\n    fragCoord.x = floor(fragCoord.x / 1.0);\n    fragCoord.y = floor(fragCoord.y / 1.0);\n    \n    float r = gold_noise(fragCoord, fract(iTime * .5) + .4);\n    if ( r < 0.05 || isnan(r) ) r = 0.05;\n    \n    float g = gold_noise(fragCoord, fract(iTime * .525) + .425);\n    if ( g < 0.05 || isnan(g) ) g = 0.05;\n\n    float b = gold_noise(fragCoord, fract(iTime * .55) + .4);\n    if ( b < 0.05 || isnan(b) ) b = 0.05;\n\n    vec4 fragColor = vec4(\n        r, g, b,\n        1.0);\n\n    return fragColor;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // INITIALIZE\n    if( iFrame==0 || keypressed(32) ) {\n        fragColor = init(fragCoord);\n        return;\n    }\n\n    if ( ((iFrame % 2) == 0) || keypressed(65)) {\n\n        vec4 t = texelFetch( iChannel0, ivec2(fragCoord), 0);\n        \n        vec4 t0 = texelFetch( iChannel0, ivec2(fragCoord) + ivec2(-1,-1), 0);\n        vec4 t1 = texelFetch( iChannel0, ivec2(fragCoord) + ivec2( 0,-1), 0);\n        vec4 t2 = texelFetch( iChannel0, ivec2(fragCoord) + ivec2( 1,-1), 0);\n        vec4 t3 = texelFetch( iChannel0, ivec2(fragCoord) + ivec2(-1, 0), 0);\n        vec4 t4 = texelFetch( iChannel0, ivec2(fragCoord) + ivec2( 1, 0), 0);\n        vec4 t5 = texelFetch( iChannel0, ivec2(fragCoord) + ivec2(-1, 1), 0);\n        vec4 t6 = texelFetch( iChannel0, ivec2(fragCoord) + ivec2( 0, 1), 0);\n        vec4 t7 = texelFetch( iChannel0, ivec2(fragCoord) + ivec2( 1, 1), 0);\n\n        float r = t.r + t0.r + t1.r + t2.r + t3.r + t4.r + t5.r + t6.r + t7.r;\n        float g = t.g + t0.g + t1.g + t2.g + t3.g + t4.g + t5.g + t6.g + t7.g;\n        float b = t.b + t0.b + t1.b + t2.b + t3.b + t4.b + t5.b + t6.b + t7.b;\n        \n        r = r / 9.0;\n        g = g / 9.0;\n        b = b / 9.0;\n        \n        r = smoothstep(0.0, 1.0, r);\n        g = smoothstep(0.0, 1.0, g);\n        b = smoothstep(0.0, 1.0, b);\n        \n        fragColor = vec4(r, g, b, 1.0);\n    \n    } else {\n    \n        fragColor = texelFetch( iChannel0, ivec2(fragCoord), 0);\n    }\n}\n","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define PI2 (6.283185307179586476925286766559)\n\n#define keypressed(ascii) ( texelFetch(iChannel3,ivec2(ascii,0),0).x > 0. )\n\n#define qrand(uv, n) (floor( gold_noise(uv, n) * 10.0) / 10.0)\n\n// gold_noise from dcerisano at  \n// Gold Noise ©2015 dcerisano@standard3d.com\n// - based on the Golden Ratio\n// - uniform normalized distribution\n// - fastest static noise generator function (also runs at low precision)\n// - use with indicated fractional seeding method\n// NOTE: Sometimes this random number generator creates obviously aliased / moire\n// patterns. Still, usually it works good. Need something better here.\n\nconst float PHI = 1.61803398874989484820459; // Φ = Golden Ratio \n\nfloat gold_noise(in vec2 xy, in float seed)\n{\n    // return fract(tan(distance(atan(xy*PHI), xy)*seed)*xy.x);\n    return fract(tan(distance(atan(xy*PHI) * seed, xy)*seed)*xy.x);\n}\n\nfloat gold_noise2( in vec2 xy, in float seed )\n{\n    return .5 + .5 * sin(cos(sin(xy.x * seed)*xy.y*seed)*xy.x*seed); // fract(fract(sin(xy.x * seed)*12138.5453123) + fract(cos(xy.y*seed)*13138.5453123) * seed);\n}\n\n\n\n","name":"Common","description":"","type":"common"}]}