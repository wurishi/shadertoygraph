{"ver":"0.1","info":{"id":"ddBfzm","date":"1689551950","viewed":112,"name":"Shock Wave with bugfix","username":"Duker","description":"Fork mostly to correct an issue causing it to stretch the texture. Ratio is now only applied for the distance check.\nAlso made minor tweaks that made sense to me, such as separating the wave parameters into their own variables","likes":5,"published":1,"flags":0,"usePreview":1,"tags":["wave","water","saturation","shockwave","ripple","shock"],"hasliked":0,"parentid":"llj3Dz","parentname":"Shock Wave with Saturation"},"renderpass":[{"inputs":[{"id":"4sfGRn","filepath":"/media/a/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","previewfilepath":"/media/ap/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Use as you will\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float WaveParam1 = 10.0;\n    float WaveParam2 = 0.8;\n    float WaveParam3 = 0.1;\n    \n    vec2 texCoord = fragCoord.xy / iResolution.xy;\n    \n    vec4 Color = texture(iChannel0, texCoord);\n    \n    //Use this if you want to place the centre with the mouse instead\n\t//vec2 WaveCentre = vec2( iMouse.xy / iResolution.xy );\n    \n    vec2 WaveCentre = vec2(0.5, 0.5);\n    \n    float ratio = iResolution.y / iResolution.x;\n\tfloat Dist = distance(\n        vec2(texCoord.x, texCoord.y * ratio),\n        vec2(WaveCentre.x, WaveCentre.y * ratio)\n    );\n    \n    //Below is optional and a change from the original but to my eyes it looks better,\n    // it effectively removes the first few frames of the \"animation\"\n    Dist = max(Dist, 0.12);\n    \n    //Sawtooth function to pulse from centre\n    float offset = (iTime - floor(iTime)) / iTime;\n\tfloat CurrentTime = iTime * offset;\n    \n    //Only distort the pixels within the parameter distance from the centre\n    if ((Dist <= ((CurrentTime) + (WaveParam3))) &&\n        (Dist >= ((CurrentTime) - (WaveParam3))))\n\t{\n        //The pixel offset distance based on the input parameters\n\t\tfloat Diff = (Dist - CurrentTime);\n\t\tfloat ScaleDiff = (1.0 - pow(abs(Diff * WaveParam1), WaveParam2));\n\t\tfloat DiffTime = (Diff * ScaleDiff);\n        \n        //The direction of the distortion\n\t\tvec2 DiffTexCoord = normalize(texCoord - WaveCentre);\n        \n        //Perform the distortion and reduce the effect over time\n\t\ttexCoord += ((DiffTexCoord * DiffTime) / (CurrentTime * Dist * 35.0));\n\t\tColor = texture(iChannel0, texCoord);\n        \n        //Blow out the color and reduce the effect over time\n\t\tColor += (Color * ScaleDiff) / (CurrentTime * Dist * 35.0);\n\t}\n    \n\tfragColor = Color;\n}","name":"Image","description":"","type":"image"}]}