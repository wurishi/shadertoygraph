{"ver":"0.1","info":{"id":"wlXXz2","date":"1563548892","viewed":223,"name":"Magical flower","username":"gaz","description":"3d","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["3d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI acos(-1.0)\n#define TAU PI*2.0\n\n\nvec2 rotate(vec2 p, float a)\n{\n    return mat2(cos(a),sin(a),-sin(a),cos(a))*p;\n}\n\nvec3 rotate(vec3 p,vec3 axis,float theta)\n{\n    vec3 v = cross(axis,p), u = cross(v, axis);\n    return u * cos(theta) + v * sin(theta) + axis * dot(p, axis);   \n}\n\nvec3 hue(float t){\nreturn cos((vec3(0,2,-2)/3.+t)*TAU)*.5+.5;\n}\n\nvec2 pmod(vec2 p, float r)\n{\n    float a = mod(atan(p.y, p.x), TAU / r) - 0.5 * TAU / r;\n    return length(p) * vec2(sin(a), cos(a));\n}\n\nfloat map(vec3 p)\n{\n    p.xy = rotate(p.xy,iTime*0.2);\n    p.yz = rotate(p.yz,iTime*0.1);\n    for(int i=0;i<3;i++)\n    {\n        p.xy = pmod(p.xy,18.0);\n        p.y-=mix(8.5,6.5,step(0.5,fract(iTime*0.2+3.0)));\n        p.yz = pmod(p.yz,16.0);\n        p.z-=mix(6.5,11.0,step(0.5,fract(iTime*0.1)));\n    }\n    return dot(abs(p),\n               rotate(\n                   normalize(vec3(2,1,3)),\n                   normalize(vec3(5,1,2)),\n                   1.4*sin(iTime*0.5))\n              )\n        \t-0.5-sin(iTime*0.8+2.3)*0.2;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   vec2 uv = (fragCoord.xy * 2.0 - iResolution.xy) / iResolution.y;\n \tvec3 ro=vec3(0,5,43.0);\n \tvec3 ta = vec3(3.5,0,0);\n \tta.xz=rotate(ta.xz,iTime*0.6);\t\n \tvec3 w=normalize(ta-ro);\n \tvec3 u=normalize(cross(w,vec3(0,1,0)));\n    vec3 rd=mat3(u,cross(u,w),w)*normalize(vec3(uv,2));\n    vec3 col = hue(0.55)*0.25;\n    float d,t=0.0;\n    for(float i=1.0;i>0.0;i-=1.0/80.0)\n    {\n     \tt+=d=map(ro+t*rd);\n        if(d<0.001)\n        {\n            col+=mix(vec3(1),hue(length(ro+t*rd)*0.1+iTime*0.1),0.8)*i*i;\n            break;\n        }\n    }\n    fragColor = vec4(col, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}