{"ver":"0.1","info":{"id":"XctXz7","date":"1713826984","viewed":106,"name":"Random_Colors","username":"StormOfTheVoid","description":"rand","likes":5,"published":1,"flags":32,"usePreview":0,"tags":["rand"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// This just paints whatever is in BufferA\nvoid mainImage(out vec4 color, in vec2 coord) {\n\n    vec2 uv = coord / iResolution.xy;\n    color = texture(iChannel0, uv); \n\n\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"const ivec2 FS_ADDR = ivec2(0.0);\n\nconst vec4 fs_stt = vec4(1.0);\n\nuint seed = 0u;\n\nvoid setSeed(uint s) {\n    seed = s;\n}\n\nuint hash(uint s) {\n    s ^= 2747636419u;\n    s *= 2654435769u;\n    s ^= s >> 16;\n    s *= 2654435769u;\n    s ^= s >> 16;\n    s *= 2654435769u;\n    return s;\n}\n\nuint randI() {\n    seed = hash(seed);\n    return seed;\n}\n\nfloat rand() {\n    uint rn = randI();\n    rn %= 1000000000u;\n    float rs = float(rn);\n    rs /= 1000000000.0;\n    return rs;\n}\n\n#define setNSeed() setSeed(uint(iResolution.x*fragCoord.y+fragCoord.x + float(hash(uint(iTime*1000.0))%1000u)))\n\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage(out vec4 color, in vec2 uv) {\n    vec2 fragCoord = uv;\n    \n    vec4 target = vec4(1.);\n    \n    if(mod(float(iFrame)/60.,9.8/(800./iResolution.x))==0.0){\n    \n       setNSeed();\n       color = 1.*vec4(rand(),rand(),rand(),1.0);\n    \n       if(uv.y>iResolution.y-20.){\n       color=target;\n       }\n       \n       if(uv.y<20.){\n       color=target;\n       }\n       \n       if(uv.x>iResolution.x-20.){\n       color=target;\n       }\n       \n       if(uv.x<20.){\n       color=target;\n       }\n       \n       }else{\n       \n       setNSeed();\n       float a = rand();\n       \n       color=texture(iChannel0,uv/iResolution.xy);\n\n       if(mod(100000.*rand(),1000.0)<=100.0){\n       \n       for(float i=-1.; i<=1.; i+=1.){\n       for(float j=-1.; j<=1.; j+=1.){\n       \n       vec2 next=vec2(0,0);\n       next.x=uv.x+i;\n       next.y=uv.y+j;\n       next=next/(iResolution.xy);\n              \n       if(length(texture(iChannel0,next)-target)<length(color-target)){\n       color=texture(iChannel0,next);\n       }\n       }\n       }\n       }\n      \n       vec4 random = vec4(rand(),rand(),rand(),1.0);\n       float c = 1./(pow(mod(float(iFrame)/60.,9.8/(800./iResolution.x))+0.9,100.0));\n       color=1./(1.+c)*(color+c*random);\n       \n       if(uv.y>iResolution.y-20.){\n       color=target;\n       }\n       \n       if(uv.y<20.){\n       color=target;\n       }\n       \n       if(uv.x>iResolution.x-20.){\n       color=target;\n       }\n       \n       if(uv.x<20.){\n       color=target;\n       }\n       }\n}\n","name":"Buffer A","description":"","type":"buffer"}]}