{"ver":"0.1","info":{"id":"7tVfWm","date":"1669499041","viewed":78,"name":"Automata.Life","username":"NAME_REDACTED","description":"Cellular automata: game of life. Draw on the screen. Undefine INIT to start with a blank screen.","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["automata","life","gameoflife"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   vec4 col = texelFetch(iChannel0, ivec2(fragCoord / CELL_SIZE), 0);\n   // Output to screen\n   fragColor = vec4(col.r, col.g, col.b, 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float rand(vec2 co){\n    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float result;\n    #ifdef INIT\n    if (iFrame == 0)\n    {\n        float a = length(iResolution.xy / 2.0 / CELL_SIZE - fragCoord);\n        a = a + rand(fragCoord + vec2(.246,.452));\n        if (a < 15.0 && mod(a, 3.0) < 1.0) {\n            fragColor = vec4(1.0,0,0,1);\n            return;\n        }\n    }\n    #endif\n\n    if (fragCoord.x > iResolution.x || fragCoord.y > iResolution.y) return;\n    ivec2 fc = ivec2(fragCoord);\n    if (iFrame % DELAY > 0)\n    {\n        vec4 c = texelFetch(iChannel0, fc, 0);\n        fragColor = c;\n        return;\n    }\n    int count = 0;\n    for (int y = fc.y - 1; y < fc.y + 2; y++)\n    {\n        for (int x = fc.x - 1; x < fc.x + 2; x++)\n        {\n            if (ivec2(x,y) != fc) {\n                vec4 c = texelFetch(iChannel0, ivec2(x, y), 0);\n                if (c.r > .5) count++;\n            }\n        }\n    }\n\n    if (count < 2 || count > 3)\n        result = 0.0; //death\n    else if (count == 3)\n        result = 1.0; //life\n    else //stay the same\n        result = texelFetch(iChannel0, fc, 0).r;\n        if (iMouse.z > 0.0)\n        {\n            //mouse generate\n            float a = length(iMouse.xy / CELL_SIZE - fragCoord);\n            a = a + rand(fragCoord);\n            if (a < 10.0 && mod(a, 3.0) < 1.0) {\n                result = 1.0; \n                }\n        } \n\n    fragColor = vec4(result, 0.0, 0.0, 0.0);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define CELL_SIZE 2.0\n\n#define DELAY 1 //update every nth frame - increase this to slow it down\n\n#define INIT //draw some stuff on the first frame","name":"Common","description":"","type":"common"}]}