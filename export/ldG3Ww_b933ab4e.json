{"ver":"0.1","info":{"id":"ldG3Ww","date":"1454708313","viewed":909,"name":"loading animation smokey","username":"Emil","description":"Experimenting with simplistic fluids.., kinda neat as a loading screen (especially in fullscreen)","likes":33,"published":1,"flags":32,"usePreview":0,"tags":["2d","fluid","smoke","loadinganimation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat val = texture(iChannel0, fragCoord/iResolution.xy).b;\n    fragColor = vec4(val)*0.16;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float random()\n{\n\treturn fract(sin(dot(gl_FragCoord.xy, vec2(12.9898,78.233))) * 43758.5453);  \n}\nfloat randomTime()\n{\n\treturn fract(sin(dot(gl_FragCoord.xy*iTime, vec2(12.9898,78.233))) * 43758.5453);  \n}\n\nvec4 get_pixel(float x_offset, float y_offset)\n{\n\treturn texture(iChannel0, (gl_FragCoord.xy / iResolution.xy) + (vec2(x_offset, y_offset) / iResolution.xy));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // r and g for xvelocity and yvelocity\n    float xvel = get_pixel(0.0, 0.0).r;\n    float yvel = get_pixel(0.0, 0.0).g;\n    // b for pressure\n    float press = 0.0;\n    // a for vorticity (spin) +=clockwise -=counterclockwise\n    float spin = 0.0;\n    \n    //// advection:\n    press += get_pixel(-xvel,-yvel).b;\n    spin += get_pixel(-xvel,-yvel).a;\n    //\\\\ end advection\n    \n    ////// vorticity:\n    float vortAmount = 0.04;\n    //vortAmount = 0.008*(6.5-press);\n    xvel += (get_pixel(0.0,-1.0).a)*vortAmount;\n    xvel -= (get_pixel(0.0,1.0).a)*vortAmount;\n    yvel += (get_pixel(-1.0,0.0).a)*vortAmount;\n    yvel -= (get_pixel(1.0,0.0).a)*vortAmount;\n    \n    \n    float spinAmount = 1.6;\n    spin += get_pixel(0.0,-1.0).r*spinAmount;\n    spin -= get_pixel(0.0,1.0).r*spinAmount;\n\tspin += get_pixel(-1.0,0.0).g*spinAmount;\n    spin -= get_pixel(1.0,0.0).g*spinAmount;\n    \n    \n    //\\\\\\\\ end vorticity\n    \n\t\n    \n    //// pressure:\n    float pressureAmount = -0.06+0.004*press;\n    xvel -= (get_pixel(-1.5,0.0).b-press)*pressureAmount;\n    xvel += (get_pixel(1.5,0.0).b-press)*pressureAmount;\n    yvel -= (get_pixel(0.0,-1.5).b-press)*pressureAmount;\n    yvel += (get_pixel(0.0,1.5).b-press)*pressureAmount;\n    //\\\\ end pressure\n    \n    //// random:\n    \n    if(iTime<0.01){\n        xvel += 0.3*(randomTime());\n        yvel += 0.3*(randomTime());\n    }\n    press *= 0.98+(0.01*random())*clamp(press,0.0,3.0);\n    //\\\\ end random\n    \n    if (iMouse.z > 0.0){\n        press += 0.3*smoothstep(1.0,0.0,length(fragCoord.xy-iMouse.xy)*0.016);\n    } else {\n    \tpress += 0.3*smoothstep(1.0,0.0,length(fragCoord.xy-(iResolution.xy*0.5+150.0*vec2(sin(iTime),cos(iTime))))*0.016);\n    \tpress += 0.3*smoothstep(1.0,0.0,length(fragCoord.xy-(iResolution.xy*0.5+150.0*vec2(sin(iTime+3.141),cos(iTime+3.141))))*0.016);\n    }\n        \n    fragColor.r = xvel*0.97;\n    fragColor.g = yvel*0.97;\n    fragColor.b = press*0.983;\n    fragColor.a = spin*0.906;\n}","name":"Buf A","description":"","type":"buffer"}]}