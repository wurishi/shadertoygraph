{"ver":"0.1","info":{"id":"tdd3WM","date":"1568711600","viewed":190,"name":"fdtd-edit","username":"xef6","description":"https://en.wikipedia.org/wiki/Finite-difference_time-domain_method\nhttps://ieeexplore.ieee.org/document/1138693\nedit of https://www.shadertoy.com/view/wlBXDm","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["wave","simulation","fdtd"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec4 col = texture(iChannel0,fragCoord.xy / iResolution.xy);\n\tfragColor = col.r < 0.0 ? vec4(abs(col.r),0.0,0.0,1.0) : vec4(0.0,abs(col.g),0.0,1.0);\n\t//fragColor = col*0.5+0.5;\n}\n// missing someone!","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"const float ascl = 1.0;\nconst float dx = ascl * 0.2;\nconst float dt = ascl * 0.1;","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"//in which\n// BufA is t-3*dt\n// BufB is t-2*dt\n// BufC is t-1*dt\n// BufD is t\n//\n// BufA becomes t+dt\n\nvec4 getX(sampler2D g, vec2 p){\n    return texture(g,p/iResolution.xy);\n}\n\nvec4 getA(sampler2D g, vec2 p){\n    vec4 middle    = getX(g,p);   \t\n    vec4 up        = getX(g,p+vec2( 0, 1));\n    vec4 down      = getX(g,p+vec2( 0,-1));\n    vec4 right     = getX(g,p+vec2( 1, 0));\n    vec4 left      = getX(g,p+vec2(-1, 0));\n    vec4 upright   = getX(g,p+vec2( 1, 1));\t\n    vec4 upleft    = getX(g,p+vec2(-1, 1));\n    vec4 downright = getX(g,p+vec2( 1,-1));\n    vec4 downleft  = getX(g,p+vec2(-1,-1));\n        \n   \treturn (-8.*middle + up + left + right + down + upright + upleft + downright + downleft)/(3.*dx*dx);  \n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec4 a   = getA(iChannel3,fragCoord);\n    vec4 dt3 = getX(iChannel0,fragCoord);\n    vec4 dt2 = getX(iChannel1,fragCoord);\n    vec4 dt1 = getX(iChannel2,fragCoord);\n    vec4 dt0 = getX(iChannel3,fragCoord);\n    \n    fragColor = 20./11.*dt0 + 1./11.*dt3 - 4./11.*dt2 - 6./11.*dt1 + 12./11.*dt*dt*a;\n\tfragColor *= 0.999;\n    if(iMouse.z>0. && distance(fragCoord,iMouse.xy)<10.) fragColor = vec4(1.);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"//in which\n// BufA is t-3*dt\n// BufB is t-2*dt\n// BufC is t-1*dt\n// BufD is t\n//\n// BufA becomes t+dt\n\nvec4 getX(sampler2D g, vec2 p){\n    return texture(g,p/iResolution.xy);\n}\n\nvec4 getA(sampler2D g, vec2 p){\n    vec4 middle    = getX(g,p);   \t\n    vec4 up        = getX(g,p+vec2( 0, 1));\n    vec4 down      = getX(g,p+vec2( 0,-1));\n    vec4 right     = getX(g,p+vec2( 1, 0));\n    vec4 left      = getX(g,p+vec2(-1, 0));\n    vec4 upright   = getX(g,p+vec2( 1, 1));\t\n    vec4 upleft    = getX(g,p+vec2(-1, 1));\n    vec4 downright = getX(g,p+vec2( 1,-1));\n    vec4 downleft  = getX(g,p+vec2(-1,-1));\n        \n   \treturn (-8.*middle + up + left + right + down + upright + upleft + downright + downleft)/(3.*dx*dx);  \n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec4 a   = getA(iChannel3,fragCoord);\n    vec4 dt3 = getX(iChannel0,fragCoord);\n    vec4 dt2 = getX(iChannel1,fragCoord);\n    vec4 dt1 = getX(iChannel2,fragCoord);\n    vec4 dt0 = getX(iChannel3,fragCoord);\n    \n    fragColor = 20./11.*dt0 + 1./11.*dt3 - 4./11.*dt2 - 6./11.*dt1 + 12./11.*dt*dt*a;\n\tfragColor *= 0.999;\n    if(iMouse.z>0. && distance(fragCoord,iMouse.xy)<10.) fragColor = vec4(1.);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"//in which\n// BufA is t-3*dt\n// BufB is t-2*dt\n// BufC is t-1*dt\n// BufD is t\n//\n// BufA becomes t+dt\n\nvec4 getX(sampler2D g, vec2 p){\n    return texture(g,p/iResolution.xy);\n}\n\nvec4 getA(sampler2D g, vec2 p){\n    vec4 middle    = getX(g,p);   \t\n    vec4 up        = getX(g,p+vec2( 0, 1));\n    vec4 down      = getX(g,p+vec2( 0,-1));\n    vec4 right     = getX(g,p+vec2( 1, 0));\n    vec4 left      = getX(g,p+vec2(-1, 0));\n    vec4 upright   = getX(g,p+vec2( 1, 1));\t\n    vec4 upleft    = getX(g,p+vec2(-1, 1));\n    vec4 downright = getX(g,p+vec2( 1,-1));\n    vec4 downleft  = getX(g,p+vec2(-1,-1));\n        \n   \treturn (-8.*middle + up + left + right + down + upright + upleft + downright + downleft)/(3.*dx*dx);  \n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec4 a   = getA(iChannel3,fragCoord);\n    vec4 dt3 = getX(iChannel0,fragCoord);\n    vec4 dt2 = getX(iChannel1,fragCoord);\n    vec4 dt1 = getX(iChannel2,fragCoord);\n    vec4 dt0 = getX(iChannel3,fragCoord);\n    \n    fragColor = 20./11.*dt0 + 1./11.*dt3 - 4./11.*dt2 - 6./11.*dt1 + 12./11.*dt*dt*a;\n\tfragColor *= 0.999;\n    if(iMouse.z>0. && distance(fragCoord,iMouse.xy)<10.) fragColor = vec4(1.);\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"//in which\n// BufA is t-3*dt\n// BufB is t-2*dt\n// BufC is t-1*dt\n// BufD is t\n//\n// BufA becomes t+dt\n\nvec4 getX(sampler2D g, vec2 p){\n    return texture(g,p/iResolution.xy);\n}\n\nvec4 getA(sampler2D g, vec2 p){\n    vec4 middle    = getX(g,p);   \t\n    vec4 up        = getX(g,p+vec2( 0, 1));\n    vec4 down      = getX(g,p+vec2( 0,-1));\n    vec4 right     = getX(g,p+vec2( 1, 0));\n    vec4 left      = getX(g,p+vec2(-1, 0));\n    vec4 upright   = getX(g,p+vec2( 1, 1));\t\n    vec4 upleft    = getX(g,p+vec2(-1, 1));\n    vec4 downright = getX(g,p+vec2( 1,-1));\n    vec4 downleft  = getX(g,p+vec2(-1,-1));\n        \n   \treturn (-8.*middle + up + left + right + down + upright + upleft + downright + downleft)/(3.*dx*dx);  \n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec4 a   = getA(iChannel3,fragCoord);\n    vec4 dt3 = getX(iChannel0,fragCoord);\n    vec4 dt2 = getX(iChannel1,fragCoord);\n    vec4 dt1 = getX(iChannel2,fragCoord);\n    vec4 dt0 = getX(iChannel3,fragCoord);\n    \n    fragColor = 20./11.*dt0 + 1./11.*dt3 - 4./11.*dt2 - 6./11.*dt1 + 12./11.*dt*dt*a;\n\tfragColor *= 0.999;\n    if(iMouse.z>0. && distance(fragCoord,iMouse.xy)<10.) fragColor = vec4(1.);\n}","name":"Buffer D","description":"","type":"buffer"}]}