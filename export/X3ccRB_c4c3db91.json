{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"// Fork of \"Aman Iman\" by wyatt. https://shadertoy.com/view/4cdfzB\n// 2024-12-26 17:54:51\n\n// Fork of \"Sound and Color\" by wyatt. https://shadertoy.com/view/XccBW4\n// 2024-12-02 23:35:05\n\n// Fork of \"El Aleph\" by wyatt. https://shadertoy.com/view/MccBRM\n// 2024-12-01 17:04:30\n\nMain {\n    \n    Q = A(U)/float(1+iFrame)*vec4(3,2,1,1);\n\n}","name":"Image","description":"","type":"image"},{"outputs":[],"inputs":[],"code":"#define Main void mainImage(out vec4 Q, in vec2 U)\n#define R iResolution.xy\n#define A(U) texture(iChannel0,(U)/R)\n#define ei(a) mat2(cos(a),sin(a),-sin(a),cos(a))\n#define pi 3.14159265359\nfloat smin( float a, float b, float k )\n{\n\tfloat h = clamp( 0.5 + 0.5*(b-a)/k, 0.0, 1.0 );\n\treturn mix( b, a, h ) - k*h*(1.0-h);\n}\nfloat smax(float a, float b, float k)\n{\n    return smin(a, b, -k);\n}\nvec4 hash(vec4 p4)\n{\n    p4 = fract(p4  * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}\nfloat ln (vec3 u, vec3 a, vec3 b) {\n\n    return length(u-a-(b-a)*clamp(dot(u-a,b-a)/dot(b-a,b-a),0.,1.));\n\n}\nfloat ellipsoid( vec3 p, vec3 r )\n{\n  float k0 = length(p/r);\n  float k1 = length(p/(r*r));\n  return k0*(k0-1.0)/k1;\n}","name":"Common","description":"","type":"common"},{"outputs":[{"channel":0,"id":"4dXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"\nfloat map (vec3 p) {\n    float d = 1e4;\n    d = smin(d,ellipsoid(p-vec3(0,-.3,-.3),vec3(.2,.2,.1)),.1);\n    d = smin(d,ellipsoid(p-vec3(0,.3,-.2),vec3(.4,.1,.2)),.1);\n    d = smin(d,ellipsoid(p-vec3(0,.4,-.1),vec3(.4,.2,.2)),.1);\n    d = smin(d,ellipsoid(p-vec3(0,-.3,-.3),vec3(.1,.1,.1)),.1);\n    d = smin(d,ellipsoid(p-vec3(0,-.4,-.3),vec3(.1,.1,.1)),.1);\n    d = smin(d,ellipsoid(p-vec3(0,-.3,-.2),vec3(.3,.2,.2)),.1);\n    d = smin(d,-ellipsoid(p-vec3(0,-.3,-.3),vec3(.18,.05,.1)),-.1);\n    d = smin(d,ellipsoid(p-vec3(0,-.3,-.3),vec3(.08,.02,.1)),.1);\n    d = smin(d,ellipsoid(p-vec3(0,0,-.4),vec3(.05,.2,.1)),.1);\n    d = smin(d,ellipsoid(p-vec3(0,0,0),vec3(.5,.5,.4)),.1);\n    d = smin(d,ellipsoid(p-vec3(-.2,.2,-.2),vec3(.1,.1,.1)),.05);\n    d = smin(d,ellipsoid(p-vec3(+.2,.2,-.2),vec3(.1,.1,.1)),.05);\n    d = smin(d,-ellipsoid(p-vec3(-.17,.1,-.22),vec3(.1,.1,.1)),-.1);\n    d = smin(d,-ellipsoid(p-vec3(+.17,.1,-.22),vec3(.1,.1,.1)),-.1);\n    d = smin(d,ellipsoid(p-vec3(-.1,-.1,-.43),vec3(.03)),.08);\n    d = smin(d,ellipsoid(p-vec3(+.1,-.1,-.43),vec3(.03)),.08);\n    d = smin(d,ellipsoid(p-vec3(0,-.1,-.5),vec3(.05)),.1);\n    d = smin(d,ellipsoid(p-vec3(-.5,0,0),vec3(.05,.15,.2)),.1);\n    d = smin(d,ellipsoid(p-vec3(+.5,0,0),vec3(.05,.15,.2)),.1);\n    d = smin(d,-ellipsoid(p-vec3(-.5,0,-.1),vec3(.03,.12,.15)),-.1);\n    d = smin(d,-ellipsoid(p-vec3(+.5,0,-.1),vec3(.03,.12,.15)),-.1);\n    d = smin(d,-ellipsoid(p-vec3(-.5,0,-.0),vec3(.04,.05,.1)),-.1);\n    d = smin(d,-ellipsoid(p-vec3(+.5,0,-.0),vec3(.04,.05,.1)),-.1);\n    return smin(d,-.1-p.z,.15);\n\n}\nvec3 normal (vec3 p) {\n    vec2 e = vec2(1e-3,0);\n    float m = map(p);\n    return normalize(vec3(\n        map(p+e.xyy)-m,\n        map(p+e.yxy)-m,\n        map(p+e.yyx)-m\n    ));\n\n}\nMain {\n    Q = A(U);\n    vec3 light = vec3(-1,0,-2);\n    vec4 h = hash(vec4(iFrame,1,1,1));\n    float w = h.w;\n    U = 2.*(U+h.xy*2.-1.-.5*R)/R.y;\n    vec3 p = vec3(0,0,-2.3);\n    vec3 d = normalize(vec3(U,3.));\n    p.xz *= ei(.2);\n    d.xz *= ei(.2);\n    for (float i = 0.; i < 50.; i++) {\n        float m = min(map(p),length(p-light)-.1);\n        p += d*m;\n        if (abs(length(p-light)-.1)<.1) {\n            Q += 50.;\n            break;\n        } else \n        if (m < 1e-3) {\n            d = normalize(reflect(d,normal(p))*.5+normalize(hash(vec4(R*U,i,iFrame)).xyz*2.-1.));\n            p += .01*d;\n        }\n        \n    }\n}","name":"Buffer A","description":"","type":"buffer"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":true,"mFlagMusicStream":false},"info":{"id":"X3ccRB","date":"1735237604","viewed":208,"name":"Path Traced Face","username":"wyatt","description":"face","likes":14,"published":3,"flags":32,"usePreview":0,"tags":["face"],"hasliked":0,"parentid":"","parentname":""}}