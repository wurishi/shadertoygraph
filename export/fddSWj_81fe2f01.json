{"ver":"0.1","info":{"id":"fddSWj","date":"1633974013","viewed":120,"name":"Portal shape","username":"therepo90","description":"Test","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["practice"],"hasliked":0,"parentid":"7scSW2","parentname":"Portal - sinus in polar"},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float PI = 3.141592653589;\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float t = iTime;\n    // Normalized pixel coordinates (from -1 to 1)\n    vec2 uvOrig = fragCoord/iResolution.xy;\n    vec2 uv = 2.0*(fragCoord-.5*iResolution.xy)/iResolution.xy;\n    \n\n    // polar\n    float d = length(uv); \n    //float alpha = atan(uv.y, uv.x) / (2.*PI) + 0.5; // normalize -pi,pi to 0, 1 for display\n    float alpha = atan(uv.y, uv.x); //-pi to pi\n    vec2 pc = vec2(d, alpha); // polar coords\n    \n    //fancy calc or irregular shape\n    float sinVal = sin(0.5+pc.y*3.+t*7.)*sin(pc.y*18.+t*2.)*0.02 - cos(0.3-pc.y*8.+t*5.)*0.015 + sin(pc.y*8.+t*8.)*0.03 * sin(-pc.y*2.+t*2.);\n    float thk = 0.03;\n    float res;\n    float r = 0.5;\n    float targetVal = r + sinVal;\n    \n    res = 1. - smoothstep(targetVal-thk, targetVal+thk, d);\n    \n    vec3 col;\n    \n    vec3 portalColor = texture(iChannel1,uvOrig).xyz;//vec3(1.0,1.0,1.0);\n    vec3 bgColor = vec3(0);\n    \n    col = mix(bgColor, portalColor, res);\n    vec3 edgeColor = vec3(1.,0,0);  // add edge tint\n    float edgeDist = smoothstep(targetVal-thk,targetVal+thk, d);\n    if(d < targetVal+thk){\n        col += edgeColor*edgeDist; // could be smoother\n    }\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}