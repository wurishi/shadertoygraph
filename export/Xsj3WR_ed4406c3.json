{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"const vec3 WHITE = vec3(1.,1.,0.);\nconst vec3 BLACK = vec3(0.,0.,0.);\nconst vec3 BACK = vec3(.3,.3,.3);\nconst int LEN = 8;\n\nstruct G{\n\tvec2 a,b;\n};\nstruct T{\n\tvec2 c;\n\tG g;\n};\n\t\nfloat _cross(vec2 a, vec2 b){\n\treturn a.x * b.y - b.x * a.y;\n}\n\nbool inside(\n\tconst in vec2 vv,\n\tconst in T s\n){\n\tvec2 v = vv - s.c;\n\treturn\n\t\t_cross(s.g.a, v) >= 0. &&\n\t\t_cross(v, s.g.b) >= 0. &&\n\t\t_cross(s.g.a - v, s.g.b - v) >= 0.;\n}\n\nvoid split(\n\tconst in T s,\n\tout T t[4]\n){\n\tG g = G(s.g.a / 2., s.g.b / 2.);\n\tt[0] = T(s.c + g.a + g.b, G(-g.a, -g.b));\n\tt[1] = T(s.c, g);\n\tt[2] = T(s.c + s.g.a, G(g.b - g.a, -g.a));\n\tt[3] = T(s.c + s.g.b, G(-g.b, g.a - g.b));\n}\n\nT start(const in vec2 s){\n\tfloat k = sqrt(5.) / 2.;\n\tfloat a = min(s.y * k, s.x);\n\tfloat h = a / k;\n\tT t;\n\tt.c = vec2((s.x - a) / 2., 0.);\n\tt.g.a = vec2(a, 0.);\n\tt.g.b = vec2(a / 2., h);\n\treturn t;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 v = fragCoord.xy;\n\tT s = start(iResolution.xy);\n\tT t[4];\n\t\n\tvec3 col = BACK;\n\tif(inside(v, s)){\n\t\tcol = BLACK;\n\t\tfor(int i=0; i<LEN; i++){\n\t\t\tsplit(s, t);\n\t\t\tif(inside(v, t[0])){\n\t\t\t\tcol = WHITE;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(inside(v, t[1]))\n\t\t\t\ts = t[1];\n\t\t\telse if(inside(v, t[2]))\n\t\t\t\ts = t[2];\n\t\t\telse if(inside(v, t[3]))\n\t\t\t\ts = t[3];\n\t\t}\n\t}\n\tfragColor = vec4(col, 1.);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"Xsj3WR","date":"1386097569","viewed":276,"name":"Triangle Sierpinski carpet","username":"Izokina","description":"Triangle version of Sierpinski carpet.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2d","fractal","math"],"hasliked":0,"parentid":"","parentname":""}}