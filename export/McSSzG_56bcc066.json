{"ver":"0.1","info":{"id":"McSSzG","date":"1706471009","viewed":303,"name":"Genuary 27 - Code for one hour","username":"Kali","description":"Not very inspired by this prompt but I did it","likes":28,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","fractal","genuary"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float det=.01;\nfloat maxdist=30.;\nvec3 m;\n\nmat2 rot(float a) {\n    float s=sin(a),c=cos(a);\n    return mat2(c,s,-s,c);\n}\n\nfloat de(vec3 p) {\n    vec3 pp=p;\n    float d=1.;\n    m=vec3(1000.);\n    float md=length(p)-3.;\n    p.y+=2.;\n    float t=iTime*.5;\n    float c=cos(t), s=sin(t);\n    p.xz*=rot(t*2.+p.y*.3);\n    p.yz*=rot(s*c*c*s);\n    for (int i=0; i<20; i++) {\n        p.xz=abs(p.xz)-.5;\n        p.xy*=rot(-1.+c*c*c);\n        p.xz*=rot(.5);\n        d*=1.2;\n        p*=1.2;\n        p-=1.2-s*s*.2;\n        if (i<5) m=min(m,abs(p.bgg));\n        md=min(md,(length(p)-.1)/d);\n    }\n    m=exp(-2.*m);\n    return md*.5-.2;\n}\n\nvec3 march(vec3 from, vec3 dir) {\n    float d, td=0.;\n    vec3 p, c=vec3(0.);\n    for (int i=0; i<300; i++){\n        p=from+dir*td;\n        d=de(p);\n        d=max(.003,abs(de(p)));\n        if (td>maxdist) break;\n        c+=exp(-.1*d)*.02*m*exp(-.2*td);\n        td+=d;\n    }\n    c.rb*=rot(.5);\n    c*=vec3(2.,1.,.5);\n    c=mix(length(c)*vec3(.5),c,.7);\n    return c;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    vec2 uv=(fragCoord.xy-iResolution.xy*.5)/iResolution.y;\n    vec3 from=vec3(sin(iTime)*2.,cos(iTime*.5)*.5,-8.);\n    vec3 dir=normalize(vec3(uv,.5));\n    vec3 col=march(from,dir);\n    fragColor=vec4(col,1.);\n}","name":"Image","description":"","type":"image"}]}