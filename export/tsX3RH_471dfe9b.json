{"ver":"0.1","info":{"id":"tsX3RH","date":"1544894506","viewed":343,"name":"an_simple_starfield","username":"CynicRus","description":"just an axperiment with this.","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["simple","starfield"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 nrand3( vec2 co )\n{\n\tvec3 a = fract( cos( co.x*8.3e-3 + co.y )*vec3(1.3e5, 4.7e5, 2.9e5) );\n\tvec3 b = fract( sin( co.x*0.3e-3 + co.y )*vec3(8.1e5, 1.0e5, 0.1e5) );\n\tvec3 c = mix(a, b, 0.5);\n\treturn c;\n}\n\nvec4 n(vec2 uv){\n\tuv = floor(fract(uv)*1e3);\n\tfloat v = uv.x+uv.y*1e3;\n\treturn fract(1e5*sin(vec4(v*1e-2, (v+1.)*1e-2, (v+1e3)*1e-2, (v+1e3+1.)*1e-2)));\n}\n\nfloat rand(float x){\n    return fract(sin(dot(vec2(x,x) ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat noise(vec2 p) {\n\tvec2 f = fract(p*1e3);\n\tvec4 r = n(p);\n\tf = f*f*(3.0-2.0*f);\n\treturn (mix(mix(r.x, r.y, f.x), mix(r.z, r.w, f.x), f.y));\t\n}\n\nfloat field(in vec3 p) {\n\tfloat strength = 7. + .03 * log(1.e-6 + iTime);\n\tfloat accum = 0.;\n\tfloat prev = 0.;\n\tfloat tw = 0.;\n\tint derp = int(iTime);\n\tfor (int i = 0; i < 32; ++i) {\n\t\tfloat mag = dot(p, p);\n\t\tp = abs(p) / mag + vec3(-.5, -.4, -1.5);\n\t\tfloat w = exp(-float(i) / 7.);\n\t\taccum += w * exp(-strength * pow(abs(mag - prev), 2.3));\n\t\ttw += w;\n\t\tprev = mag;\n\t}\n\tfloat maximum = rand(0.2 * 0.0000001);//sin(time)*sin(time);\n\treturn max(maximum, 5. * accum / tw - .7)-maximum;\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord/iResolution.xy);\n    \n    uv.y+=iTime/20.0;\n    \n    vec2 uvs = uv * iResolution.xy / max(iResolution.x, iResolution.y);\n\tvec3 p = vec3(uvs / 4., 0) + vec3(1., -1.3, 0.);\n\tp += .2 * vec3(sin(iTime / 16.), sin(iTime / 12.),  sin(iTime / 128.));\n\tfloat t = field(p);\n\t\n\n\tvec2 seed = uv * 2.2;\t\n\t\n\tseed = floor(seed * iResolution.xy);\n\t\n\tvec3 rnd = nrand3( seed );\n    \n\tvec4 starcolor = vec4(pow(rnd.y,90.0)) * 9.0;\n    starcolor.yz *= noise(uv) * 2.0;\n\n\tfragColor = mix(.4, 1., t) * vec4(1.8 * t * t * t, 1.4 * t * t, t, 1.0)+starcolor;\n}","name":"Image","description":"","type":"image"}]}