{"ver":"0.1","info":{"id":"XdffDj","date":"1498033360","viewed":375,"name":"Trippy Tunnel","username":"bwestlin","description":"A trippy tunnel effect","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["tunnel","sound"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGRr","filepath":"/media/a/d96b229eeb7a08d53adfcf1ff89e54c9ffeebed193d317d1a01cc8125c0f5cca.mp3","previewfilepath":"/media/ap/d96b229eeb7a08d53adfcf1ff89e54c9ffeebed193d317d1a01cc8125c0f5cca.mp3","type":"music","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define M_PI radians(180.0)\n#define t iTime\n\nvec3 surface(vec2 uv, float size) {\n    float hSize = size / 2.0;\n    float h2Size = hSize / 2.0;\n    float s = size / 20.0;\n    float o = size / (7.0 + 2.0 * sin(t * 3.0));\n    vec2 uv2 = abs(mod(uv, size) - hSize);\n    float c = max(smoothstep(h2Size + o - s, h2Size + o + s, uv2.x),\n                  smoothstep(h2Size + o - s, h2Size + o + s, uv2.y));    \n    float m1 = texture(iChannel0, vec2(mod(uv.x / 100.0, 1.0), 0.)).x + 0.5;\n    float m2 = texture(iChannel0, vec2(0.1, 0.)).x + 0.5;\n    return mix(\n        vec3(1.0, 0.5, 0.0) * m1,\n        vec3(0.9, 0.3 + 0.3 * sin(t * 2.0), 0.1) * m2,\n        c);\n}\n\nfloat wave(vec2 pos) {\n    return (sin(pos.y * 17.0 - t * 2.0) + 1.0) / (2.0);    \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = 2.0 * fragCoord.xy / iResolution.xy - 1.0;\n    uv.y *= (iResolution.y / iResolution.x);\n       \n    float dy = 5.0 / length(uv);\n    vec2 hit = vec2(\n       dy, \n       floor(10.0 + 6.0 * sin(t * 0.5)) * -atan(uv.x, uv.y) / M_PI\n    );\n    \n    float m1 = texture(iChannel0, vec2(0.1, 0.)).x;\n    hit.y += (hit.x / (4.0 - (m1 * 3.0))) * sin(t);\n    \n    float fade = min(1.0, 100.0 / (hit.x * hit.x));\n    \n    hit.x += t * 2.0;\n\n    float m2 = texture(iChannel0, vec2(0.6, 0.)).x + 0.7;\n    fragColor = vec4(fade * surface(hit, 1.0), 1.0);\n    fragColor += vec4(fade * vec3(0.0, 1.0, 0.6) * wave(-hit.yx / 20.0), 1.0) * m2;\n}","name":"Image","description":"","type":"image"}]}