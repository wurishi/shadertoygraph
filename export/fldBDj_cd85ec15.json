{"ver":"0.1","info":{"id":"fldBDj","date":"1663765273","viewed":122,"name":"Flashing lights","username":"Asif","description":" ","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["flashinglights"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n   fragColor = texture(iChannel0, fragCoord / iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"const float eps = 0.001;\n\nuint hash(uint x)\n{\n    x += (x << 10u);\n    x ^= (x >> 6u);\n    x += (x << 3u);\n    x ^= (x >> 11u);\n    x += (x << 15u);\n    return x;\n}\n\nfloat floatConstruct(uint m)\n{\n    const uint ieeeMantissa = 0x007fffffu;\n    const uint ieeOne       = 0x3f800000u;\n\n    m &= ieeeMantissa;\n    m |= ieeOne;\n\n    return uintBitsToFloat(m) - 1.0;\n}\n\nfloat random(float x)\n{\n    return floatConstruct(hash((floatBitsToUint(x))));\n}\n\nfloat sdCircle(vec2 p, float r) \n{\n    return length(p) - r;\n}\n\nvoid mainImage(out vec4 color, in vec2 coord) \n{\n    float aspect = iResolution.x / iResolution.y;    \n\n    vec2 uv = coord / iResolution.xy;\n    vec2 p  = uv * 2.0 - 1.0;\n    p.x *= aspect;\n    \n    vec3 col        = vec3(0);\n    vec3 prev_col   = texture(iChannel0, uv).rgb;\n\n    p.y -= 0.8;\n    p.x -= 1.8;\n    \n    float cx = sin(mod(iTime, 3.0) * 0.1);\n    float cy = cos(fract(iTime) * 0.1);\n    \n    float dist = sdCircle (p, mod(cos(iTime) * 0.5 + 0.5, mod(cos(0.1) * 0.5 + 0.5, 0.3)));\n    float c_id = 0.0;\n\n    float n = 30.0 * random(iTime);\n    for (float i = 1.0; i < n; ++i) {\n        p.x += 1.7  * sin(i) ;\n        p.y += 0.01 * cos(i);\n\n        p.x += 0.07 * cx;\n        p.y += 0.07 * cy;\n\n        float td = sdCircle (p, mod(cos(iTime) * 0.5 + 0.5, mod(cos(i + 0.1) * 0.5 + 0.5, 0.3)));\n\n        if (td < dist) {\n            dist = td;\n            c_id = i;\n        }\n    }\n\n    if (dist < eps) {\n        col = vec3 (\n            cos(iTime + c_id)      * 0.5 + 0.5, \n            sin(iTime + c_id)      * 0.5 + 0.5, \n            cos(sin(iTime * c_id)) * 0.5 + 0.5\n        );\n    }\n\n    color = vec4(mix(col, prev_col, 0.9 + random(iTime + p.y * p.x) * 0.09), 1.0);    \n}","name":"Buffer A","description":"","type":"buffer"}]}