{"ver":"0.1","info":{"id":"lt2SDG","date":"1446249594","viewed":443,"name":"Kaleidoscope (Anastadunbar)","username":"anastadunbar","description":"Kaleidoscope test. I don't know how to do anti-aliasing in the center.","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["2d","triangle","pi","hexagon","square","mirror","shape"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"#define SIDES 6.\n#define PAN iTime*0.5\n#define SHRINK 0.1\n#define MIRROR 1.\n#define PI 3.14159265358979323\n#define TAU (PI*2.)\n\nfloat grid(float x,float y) {\n    return floor(x*y)/(y-1.);\n}\n\nfloat fractri(float x) {\n    //return (fract(x)*floor(mod(x-1.,2.)))+(fract(1.-x)*floor(mod(x,2.)));\n    return abs(asin(sin(x*(PI/2.)))/(PI/2.));\n}\n\nfloat clamps(float x) {\n    return clamp(x,0.,1.);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    uv.x -= 0.5;\n    uv.x *= iResolution.x/iResolution.y;\n    uv.x += 0.5;\n    \n    float atans = (atan(uv.x-0.5,uv.y-0.5)+PI)/TAU;\n    float angle = atan(uv.x-0.5,uv.y-0.5)+PI;\n    float dist = length(uv-0.5);\n    //http://patriciogonzalezvivo.com/2015/thebookofshaders/07/\n    float r = TAU/(SIDES);\n    float d = (cos(floor(.5+angle/r)*r-angle)*dist)*(2.+(SHRINK));\n    vec2 kuv = vec2(fractri(((atans*(SIDES))-0.5)+PAN),d);\n    if (MIRROR < 1.) {\n    \tkuv = vec2(fract(((atans*(SIDES))-0.5)+PAN),d);\n    }\n    \n    vec3 draw = texture(iChannel0,kuv).rgb;\n    \n    //float shadow = float((length(uv-0.5)*2.) > 1.);\n    //float shadow = float(d > 1.); Hard version\n    float shadow = clamps((d-1.)*100.);\n    \n\tfragColor = vec4(draw-shadow,1.0);\n}","name":"","description":"","type":"image"}]}