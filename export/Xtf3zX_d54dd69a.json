{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"4sfGRn","filepath":"/media/a/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // get screen uvs\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    \n    // center\n    uv -= 0.5;\n    vec2 uv2 = uv;\n    \n    // correct aspect ratio\n    float ar = iResolution.x / iResolution.y;\n    uv.x *= ar;\n    \n    // measure distance from center\n    float dd = dot(uv, uv);\n    float dd2 = dot(uv2, uv2);\n\n    // warp\n    uv = (uv * dd) * 0.4 + uv * 0.6;\n    uv2 = (uv2 * dd2) * 0.4 + uv2 * 0.6;\n\n    //compute vignette\n    float vignette = (1.0 - abs(uv2.x)) * (1.0 - abs(uv2.y)) / (1.0 + dd2);\n    vignette *= vignette * 2.0;\n    vignette *= max(0.0, 1.0 - 2.75 * max(abs(uv2.x), abs(uv2.y)));\n    vignette = pow(vignette, 0.25);\n\n    // restore\n    uv += 0.5;\n    uv2 += 0.5;\n\n    // sample texture\n    vec4 color = texture(iChannel0, uv2);\n    // debug checker with aspect ratio correction\n    // float a = mod(uv.x * 20.0, 2.0);\n    // float b = mod(uv.y * 20.0, 2.0);\n    // float c = 0.3;\n    // if(int(a) != int(b))\n    //    c = 0.7;\n\n    // apply vertical scanlines \n    float v = abs(sin(uv.x * 270.0 + iTime * 3.0));\n    v += abs(sin(uv.x * 380.0 + iTime * 1.1));\n    v *= abs(sin(uv.x * 300.0 + iTime * 1.8));\n    v = mix(v, 0.5, 0.9) - 0.1;\n    // overlay\n    if(v > 0.5)\n        color = 1.0 - (1.0 - 2.0 * (v - 0.5)) * (1.0 - color);\n    else\n        color = (2.0 * v) * color;\n\n    // apply vignette\n    color *= vignette;\n\n    fragColor = color;\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"Xtf3zX","date":"1423599886","viewed":723,"name":"TVTube","username":"Daedelus","description":"Inspired by\nhttp://www.pouet.net/prod.php?which=64972\n\nBut without the vsync and noise and with more scanlines.","likes":13,"published":1,"flags":0,"usePreview":0,"tags":["oldtelevisionposteffect"],"hasliked":0,"parentid":"","parentname":""}}