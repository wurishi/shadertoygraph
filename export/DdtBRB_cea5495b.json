{"ver":"0.1","info":{"id":"DdtBRB","date":"1697313573","viewed":83,"name":"Maybe sand","username":"Slals","description":"Cellular automata, naive approach","likes":5,"published":1,"flags":32,"usePreview":0,"tags":["pattern"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    \n    vec4 t = texture(iChannel0, uv);\n    \n    vec2 mouseCoord = vec2(iMouse.x, iResolution.y - iMouse.y);\n    \n    fragColor = t;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define Get(pos) texture(iChannel0, (fragCoord + pos) / iResolution.xy)\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float rand = fract(1e5 * sin(dot(fragCoord, vec2(7.133, 9.1))));\n    \n    if (iFrame == 0) {\n        fragColor = vec4(vec3(float(rand < .1)), 1.0);\n    } else {\n        float current = Get(vec2(0, 0)).x;\n        float v = current;\n        \n        vec3 bottom = vec3(Get(vec2(-1, -1)).x, Get(vec2(0, -1)).x, Get(vec2(1, -1)).x);\n        vec3 top = vec3(Get(vec2(-1, 1)).x, Get(vec2(0, 1)).x, Get(vec2(1, 1)).x);\n        vec3 row = vec3(Get(vec2(-1, 0)).x, current, Get(vec2(1, 0)).x);\n\n        if (current > 0.0) {\n            if (bottom.y == 0.0) {\n                v = 0.0;\n            }\n        } else {\n            if (top.y > 0.0 || (top.z > 0.0 && row.z > 0.0 && bottom.z > 0.0) || (top.x > 0.0 && row.x > 0.0 && bottom.x > 0.0)) {\n                v = 1.0;\n            }   \n        }\n        \n        vec2 uv = fragCoord.xy / iResolution.xy;\n            \n        if (iMouse.z > 0.5) {\n            float dist = length (fragCoord - iMouse.xy);\n            if (current > 0.0 && dist < 20.0) v = 0.0;\n            else if (dist < 20.0) v = 1.0 * float(rand < .5);\n        }\n       \n\n        fragColor = vec4(vec3(1.0, uv.y, uv.x) * v, 1.0);\n    }\n}","name":"Buffer A","description":"","type":"buffer"}]}