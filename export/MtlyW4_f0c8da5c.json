{"ver":"0.1","info":{"id":"MtlyW4","date":"1504884480","viewed":107,"name":"Heart sign","username":"rougier","description":"Heart sign","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["sdf","csg"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Python and OpenGL for Scientific Visualization\n// 2017 Nicolas P. Rougier\n// See also http://jcgt.org/published/0003/04/01/\n\nconst float M_SQRT_2 = 1.41421356237309504880168872420969808;\n\n/*\nfloat heart(vec2 P, float size)\n{\n   float x = M_SQRT_2/2.0 * (P.x - P.y);\n   float y = M_SQRT_2/2.0 * (P.x + P.y);\n   float r1 = max(abs(x),abs(y))-size/3.5;\n   float r2 = length(P - M_SQRT_2/2.0*vec2(+1.0,-1.0)*size/3.5)- size/3.5;\n   float r3 = length(P - M_SQRT_2/2.0*vec2(-1.0,-1.0)*size/3.5)- size/3.5;\n   return min(min(r1,r2),r3);\n}\n*/\n\n// iq version: better isolines (see comments)\nfloat heart(vec2 P, float size)\n{\n    P = vec2(P.x,-P.y)/(size/3.5); // transform to weird space (to match original shader)\n    \n    vec2 q = abs( vec2(P.x-P.y,P.x+P.y)/M_SQRT_2 ) - 1.0;\n    float r1 = (min(q.x,q.y) > 0.0) ? length(q) : max(q.x,q.y); \n    float r2 = length(P - (M_SQRT_2/2.0)*vec2(+1.0,1.0))- 1.0;\n    float r3 = length(P - (M_SQRT_2/2.0)*vec2(-1.0,1.0))- 1.0;\n    float di = min(min(r1,r2),r3);\n    \n    return di * (size/3.5); // untransform from weird space (to match original shader)\n}\n\n// Blue or red color according to distance d\nvec4 color(float d)\n{\n    vec3 white = vec3(1.0, 1.0, 1.0);\n    vec3 blue  = vec3(0.1, 0.4, 0.7);\n    vec3 color = white - sign(d)*blue;\n    color *= (1.0 - exp(-4.0*abs(d))) * (0.8 + 0.2*cos(140.0*d));\n    color = mix(color, white, 1.0-smoothstep(0.0,0.02,abs(d)) );\n    return vec4(color, 1.0);\n}\n\n\n// Move circles using mouse\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec2 p = 2.0*(gl_FragCoord.xy/max(iResolution.x, iResolution.y))-1.0;\n    p = p * vec2(1.0,-1.0);\n    fragColor = color(heart(p-vec2(0.0,0.5), 1.0));\n}","name":"Image","description":"","type":"image"}]}