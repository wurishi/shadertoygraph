{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","sampler":{"filter":"nearest","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"\nprecision highp float;\n\n#define M_PI 3.1415926535897932384626433832795\n\nvec3 path( float time )\n{\n\treturn vec3( 0.4*cos(time*0.444), 0.5*sin(time*0.333), 3.3*time);\n\t\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat time = iTime;\n\n    vec2 q = fragCoord.xy / iResolution.xy;\n\tvec2 p = -1.0 + 2.0*q;\n\tp.x *= iResolution.x / iResolution.y;\n\tfloat rollz = 1.6*sin(0.13*time);\n\n\tvec3 ro = path( time+0.0 );\n\tvec3 ta = path( time+0.3 );\n\tta.y *= 0.35 + 0.25*sin(0.09*time);\n\t\n\tvec3 cw = normalize(ta-ro);\n\tvec3 cp = vec3(sin(rollz), -cos(rollz),0.0);\n\tvec3 cu = normalize(cross(cw,cp));\n\tvec3 cv = normalize(cross(cu,cw));\n\n\tvec3 rd = normalize( p.x*cu + p.y*cv + 2.1*cw );\n\n    float AapBb = ro.x*rd.x + ro.y*rd.y;\n    float A2pB2 = rd.x*rd.x + rd.y*rd.y;\n    float d = AapBb*AapBb-A2pB2*(ro.x*ro.x + ro.y*ro.y-1.0);\n\n\tfragColor.rgb = vec3(0.1, 0.3, 0.5);\n\n    if (d < 0.0) {\n        fragColor.rgb = vec3(0.0, 0.0, 1.0);\n    } else {\n        float s=sqrt(d);\n        float inv_A2pB2=1.0/A2pB2;\n        float t1=(-AapBb-s)*inv_A2pB2;\n        float t2=(-AapBb+s)*inv_A2pB2;\n        \n        vec3  oosPos = ro + rd*t2;\n        float u = fract(oosPos.z*0.2);\n        float v = (atan(oosPos.y, oosPos.x) + M_PI) / (2.0*M_PI);\n\n        float att = 1.0 - t2/10.0;\n        if (att < 0.0) \n            fragColor.rgb = vec3(0.0, 0.0, 0.0);\n        else\n        {\n            if (att > 1.0) att = 1.0;\n\t\t\t\n\t\t\tvec2 uv = vec2(u, v);\n\t\t\tvec3 col = texture(iChannel0, uv, -0.5).xyz * att;\n\n\t\t\tcol = col*0.3 + 0.7*col*col*(3.0-2.0*col);\n\t\t\tcol *= 1.2*vec3(1.0, 1.05, 1.0);\n            fragColor.rgb = col;\n        }\n    }\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MdfGDf","date":"1380958392","viewed":351,"name":"VHP-tunneli Muumille","username":"nurpax","description":"Tunnel with raycast per pixel","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["tunnel","raycast"],"hasliked":0,"parentid":"","parentname":""}}