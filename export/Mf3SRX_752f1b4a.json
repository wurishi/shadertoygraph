{"ver":"0.1","info":{"id":"Mf3SRX","date":"1719249939","viewed":54,"name":"人字编","username":"shadertoyjiang","description":"ren","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["ren"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n// 2024年04月27日 \n// 人字编\n\n#define M(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define PI    3.14159265358979\n#define PI2   6.28318530717957\n\nvec4 clr;\n\nfloat lrc(vec2 u, int t)\n{\n        return length(max(abs(u)-vec2(.45,.05), 0.));\n}\n\nfloat renzi(vec3 p)\n{\n        \n        p *= 4.;\n        vec2 u = mod(p.xy, 4.),\n             i = round(u),\n             f = u - i,\n             e = cos( (u+i.yx+vec2(0,1))*PI*.5 );          \n               //+ 0.*(iTime/10.-2.)*cos( ((u.x+u.y))*PI*.5 );\n             \n             e *= .2;             \n             \n        float a = lrc( vec2 ( f.x, p.z - e.y ),0 ),\n              b = lrc( vec2 ( f.y, p.z - e.x),0 );\n                \n        if(a<b)clr = texture(iChannel0, vec2(u.x*.2, 0));        \n        else   clr = texture(iChannel0, vec2(u.y*.2, 0));      \n                \n        return min(a,b)/8.;\n}\n\n\nfloat m(vec3 p)\n{\n        float t = iTime; p.yz *= M(t*.3); p.xy *= M(t); // p.zx *= M(t*2.);\n        return renzi(p);\n}\n\nvoid mainImage(out vec4 O, vec2 v)\n{\n        O = vec4(0);\n        clr++;\n        vec2 R = iResolution.xy,\n             u = (v + v +.1- R) / R.y;\n        vec3 o, \n             r = normalize(vec3(u, 1)),\n             e,\n             n, s;\n        float d = e.y = 1e-3,t,i;\n        o.z = -2.;\n        for(;i < 100. && t < 20. && d >=e.y ;i++)\n                t += d = m(o += r * d * .5) ; \n        if(i >= 100. || t > 20.){O += .5; return;}\n        n = normalize(  vec3(m(o+e.yxx),m(o+e),m(o+e.xxy)) - d );\n        s = vec3(-1,2,-3) * .27;\n        O += .5 + .5 * dot(n, s);\n        O *= clr;\n}\n\n\n\n\n\n\n\n\n\n","name":"Image","description":"","type":"image"}]}