{"ver":"0.1","info":{"id":"Xd2BWz","date":"1500071732","viewed":3299,"name":"[SH17A] 2tweet fluid totally","username":"flockaroo","description":"a bit different now, but actually 2 tweets long in total (phew)!\n(reduced version of https://www.shadertoy.com/view/4sSBRm)\nthanks fabrice for the amazing help!\n","likes":33,"published":3,"flags":32,"usePreview":0,"tags":["fluid","2tweet","sh17a"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// created by florian berger (flockaroo) - 2017\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n// 2tweet fluid totally\n\nvoid mainImage(out vec4 c,vec2 f)\n{\n    c=texelFetch(iChannel0,ivec2(f),0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// created by florian berger (flockaroo) - 2017\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n// 2tweet fluid totally\n\n// a lot of the optimizations came from FabriceNeyret2 - thx a lot!\n// see https://www.shadertoy.com/view/4sSBRm for the optimization process\n\n// everything properly initialized now...\n#define C(x) texelFetch(iChannel0,ivec2(f+x),0).xy\n// 1st loop pass gives 0 summand to v, so no harm done...\n#define L(b) for(vec2 a=S;a.y<9.;b=sin(a++))\n\nvoid mainImage(out vec4 c, vec2 f)\n{\n    // also working:\n    // vec2(5,-6) should be a bit faster, but different look\n    // vec2(15,-18) with a.y<0. in L - gives bigger vortices but > 280 chars\n    vec2 S=vec2(4,-7),p,q,v=p=q=S-S;\n    L(p) L(q) v+=p*dot(C((p+q).yx*S),q);\n    c.xy=C(v)+.3/f;\n}\n\n/* old version - v not initialized\n#define C(x) texelFetch(iChannel0,ivec2(f+x),0).xy\n// more than 5 samples now - tried different values - 16, 15 works nice\n#define L(b) for(float a=0.;a<16.;a++) { b=sin(a+S);\n\nvoid mainImage(out vec4 c, vec2 f)\n{\n    // magic numbers: S.x-S.y must be roughly (n+.5)*pi, so we can use it \n    // as phase shift above in sin(a+S)\n    vec2 p,q,v,S=vec2(4,-7);\n    // v auto initializes to 0 on my system (might not work on some other platforms)\n    //v-=v;\n    L(p)\n        L(q)\n            v+=p*dot(C((p+q).yx*S),q);\n        }\n    }\n    c.xy=C(v)+.3/f;\n}\n*/","name":"Buf A","description":"","type":"buffer"}]}