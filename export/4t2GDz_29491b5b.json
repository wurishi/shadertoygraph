{"ver":"0.1","info":{"id":"4t2GDz","date":"1428429027","viewed":171,"name":"simple patterns","username":"cnc","description":"again trying to find out how things work on my own","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4df3Rn","filepath":"/media/a/3c33c415862bb7964d256f4749408247da6596f2167dca2c86cc38f83c244aa6.mp3","previewfilepath":"/media/ap/3c33c415862bb7964d256f4749408247da6596f2167dca2c86cc38f83c244aa6.mp3","type":"music","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"XdXGzn","filepath":"/media/a/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","previewfilepath":"/media/ap/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"const float NUM_RECTS = 10.0;\nconst float NUM_NOTES = 12.0;\nconst float PI        = 3.14159265359;\n\nvec4 circle( vec2 center, vec2 current, float radius, vec4 color )\n{\n    float l = length( current - center );\n    color.rgb *= 1.0 - smoothstep( radius * 0.96, radius, l );\n    return color;\n}\n\nvec4 rotate( vec2  center, \n             float angle,\n             vec2  current, \n             vec4  color )\n{\n    mat2 rot = mat2( cos(angle), -sin(angle),\n                     sin(angle),  cos(angle) );\n    \n    vec2  c = rot * (current - center);    \n    float h = (iResolution.x / 2.0) / NUM_RECTS;\n    \n    int newC1 = int(c.x / h);\n    int newC2 = int(c.y / h);\n    \n    float colorStep  = 1.0 / NUM_RECTS;\n    color.r += float(newC1) * colorStep;\n    color.b += float(newC2) * colorStep;\n    \n    return color;\n}    \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = vec4(0,0,0,1);\n    \n    float amplitude = texture( iChannel0, vec2(0.05, 0.25) ).x * 0.01;\n    vec2 center = iResolution.xy / 2.0;    \n    vec2 uv     = fragCoord.xy / iResolution.xy;\n    \n    fragColor  = rotate( center, 200.0*amplitude, fragCoord.xy, fragColor );  \n    fragColor *= 1.0 - (texture( iChannel1, uv ) * 0.2);\n    \n    vec4 circleColor = vec4(0.2,0,0,1.0);\n    \n    float angleInc = ((2.0*PI) / 360.0) * 360.0 / NUM_NOTES;\n    float a = 0.0;\n    float d = (iResolution.x / 2.0) * 0.4;\n    float texInc = 1.0 / NUM_NOTES;\n    for( int i=0; i<int(NUM_NOTES); ++i )\n    {\n    \tvec2 pos = vec2( cos(a), sin(a) );\n    \tpos *= d;\n        float amp = texture( iChannel0, vec2(texInc, 0.25) ).x;\n        circleColor.rgb += amp*amp*0.4;\n    \tfragColor   += circle( pos , fragCoord.xy - center, d / 4.5, circleColor );\n        a += angleInc;\n        texInc += 2.0 * texInc;\n    }    \n}\n\n","name":"","description":"","type":"image"}]}