{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"4sXGRn","filepath":"/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"/*\n  Andor Salga\n  August 2013\n*/\n\n#define PI 3.141592658\n\nvec3 getNormal(in vec2 sphereCenter, in float sphereRadius, in vec2 point){\n\t// Need to figure out how far the current point is from the center to lerp it\n\tfloat distFromCenter = distance(point, sphereCenter);\n\tfloat weight = distFromCenter/sphereRadius;\n\t\n\t// Z component is zero since at the edge the normal will be on the XY plane\n\tvec3 edgeNormal = vec3(point - sphereCenter, 0);\n\tedgeNormal = normalize(edgeNormal);\n\t\n\t// We know the normal at the center of the sphere points directly at the viewer,\n\t// so we can use that in our mix/lerp.\n\treturn mix(vec3(0,0,1), edgeNormal, weight); \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\tvec2 center = vec2(iResolution.xy)/2.0;\n\t\n\tvec2 spherePos = vec2( sin(iTime), cos(iTime)) * 30.0;\n\t\n\tif( distance(center, vec2(fragCoord)) < 140.0){\n\t\tvec3 sphereNormal =  vec3(getNormal(center, 140.0, vec2(fragCoord)));\n\t\tvec3 dirLight = vec3(0,0,1);\n\t\tvec3 col =  normalize((vec3(1, 1, 1))) * dot(sphereNormal, dirLight);\n\t\t\t\t\n\t\tvec3 northVector = vec3(0, 1, 0);\n\t\tvec3 eastVector  = vec3(1, 0, 0);\n\t\t\n\t\tvec3 vertPoint = sphereNormal;\n\t\t\n\t\tfloat lat = acos(dot(northVector, sphereNormal));\n\t\tfloat v = lat / PI;\n\t\tfloat u;\n\t\t\n\t\tfloat lon = (acos( dot( vertPoint, eastVector) / sin(lat))) / (2.0 * PI);\n\t\tif(dot(cross(northVector, eastVector), vertPoint) > 0.0){\n\t\t\tu = lon;\n\t\t}\n\t\telse{\n\t\t\tu = 1.0 - lon;\n\t\t}\n\n\t\tu -= iTime / 20.0;\n\t\t\n\t\tfragColor = vec4(0.1) + vec4(col * 3.0, 0) * texture(iChannel0, vec2(u, v));\n\t}\n\telse{\n\t\tfragColor = vec4(0);\n\t}\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MssGRl","date":"1377340073","viewed":1035,"name":"Metal Ball","username":"asalga","description":"Simple sphere texture mapping","likes":14,"published":1,"flags":0,"usePreview":0,"tags":["spheretexturemapping"],"hasliked":0,"parentid":"","parentname":""}}