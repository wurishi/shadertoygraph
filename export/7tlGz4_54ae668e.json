{"ver":"0.1","info":{"id":"7tlGz4","date":"1621681783","viewed":83,"name":"colorful Voronoi cell","username":"yunhai","description":"Voronoi pattern irregular cell generating","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["learn"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 random22(vec2 p)\n{\n    return vec2(fract(sin(27.*p.x+137.*p.y)*9492.),fract(sin(21.*p.x+131.*p.y)*8466.));\n}\nvoid mainImage( out vec4 O, in vec2 C )\n{\n    vec2 uv = (2.*C-iResolution.xy)/iResolution.y;\n    float t=iTime;\n    \n    vec2 cuv=uv*5.;\n    vec2 id=floor(cuv);\n    cuv=fract(cuv)-.5;\n    \n    float minDis=1e20;\n    vec2 minDisId;\n    //search for nearest pos in neighbor cell\n    for(float i=-1.0;i<1.1;i+=1.0)\n        for(float j=-1.0;j<1.1;j+=1.0)\n        {\n            vec2 nei=vec2(i,j);\n            vec2 speed=random22(nei+id);//global with id\n            vec2 p=nei+sin(speed*t)*.5;//relative pos\n            float len=length(p-cuv);\n            if(minDis>len)\n            {\n                minDis=len;\n                minDisId=nei+id;\n            }\n        }\n    O.b=minDis;\n                //O.b*=9.;//check move trail\n    O.rg=(minDisId+vec2(10.,10.))*.05;\n}","name":"Image","description":"","type":"image"}]}