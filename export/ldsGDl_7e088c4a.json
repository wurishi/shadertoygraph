{"ver":"0.1","info":{"id":"ldsGDl","date":"1475094916","viewed":114,"name":"Line Test","username":"kimau","description":"Working on a test","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["line","wip"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float distToLine(vec2 a, vec2 b, vec2 p)\n{\n\tvec2 topA = p - a;\n\tvec2 topB = b - a;\n\tfloat t = dot(topA, topB ) / (topB.x*topB.x + topB.y*topB.y);\n\tvec2 np = a + t * topB;\n\t\n\treturn length(np - p);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec4 p1 = vec4(1,0,\n\t\t\t\t   0, iResolution.y * 0.5);\n\t\t\t\t   //(cos(iTime*1.3)*0.5+0.5)*iResolution.y);\n\tvec4 p2 = vec4(1,0,\n\t\t\t\t   iResolution.x, iResolution.y * 0.5);\n\t\t\t\t   //(sin(iTime)*0.5+0.5)*iResolution.y);\n\n\t\n\t// RandomTans\n\tp1.xy = vec2(1.0,sin(iTime) * 6.0);\n\tp2.xy = vec2(1.0,cos(iTime*1.4+3.2));\n\tp1.xy = p1.xy / p1.x * iResolution.x;\n\tp2.xy = p2.xy / p2.x * iResolution.x;\n\t\n\tvec2 a,b,c,d;\n\tvec2 ln = p2.zw - p1.zw;\n\t\n\tif(dot(ln,p1.xy) > 0.0)\n\t{ // AB\n\t\ta = p1.zw - p1.xy;\n\t\tb = p1.zw;\n\t\tc = p2.zw;\n\t\td = p2.zw + p2.xy;\n\t}\n\telse\n\t{\t// BA\n\t\td = p1.zw + p1.xy;\n\t\tc = p1.zw;\n\t\tb = p2.zw;\n\t\ta = p2.zw - p2.xy;\n\t}\n\t\n\tfloat t = fragCoord.x / iResolution.x;\n\tvec2 p = 0.5 *((2.0*b) + \n\t\t\t\t   (-a+c)*t + \n\t\t\t\t   (2.0*a-5.0*b+4.0*c-d)*t*t + \n\t\t\t\t   (-a+3.0*b-3.0*c+d)*t*t*t );\n\t\n\tfloat dist = length(p - fragCoord.xy) * 0.01;\n\t\n\tfragColor = vec4(1.0);\n\tfragColor.rgb = vec3(1.0 - dist);\n    fragColor.r = dFdx(fragColor.g)*100.0;\n}","name":"Image","description":"","type":"image"}]}