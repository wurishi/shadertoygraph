{"ver":"0.1","info":{"id":"NljyR1","date":"1649218109","viewed":207,"name":"cone shape distortion(top view) ","username":"vonagisa","description":"Input the desire look of distortion viewing from top","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["distortion","cone"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4df3zn","filepath":"/media/a/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","previewfilepath":"/media/ap/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415926538\n\nconst float scale = .5;\nfloat r = 0.071;\nconst float _alpha = PI / 6.;\n\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from -.5 to .5)\n    vec2 uv = fragCoord/iResolution.xy - 0.5;\n    uv.x *= iResolution.x/iResolution.y;\n    vec2 uv0, uv1;\n    float b = tan(_alpha) / tan(2. * _alpha);\n    float len_p = sqrt(uv.x * uv.x + uv.y * uv.y);\n    float len_p0 = (r - b * len_p) / (1. + b);\n    uv0 = uv*len_p0/len_p;\n    // change the map value here to scale img\n    uv1.x = map(uv0.x, -r * scale, r * scale, 0., 1.); \n    uv1.y = map(uv0.y, -r * scale, r * scale, 0., 1.);\n    vec4 tex = texture(iChannel0,uv1) \n        * step(r, length(uv)); // circle in center \n        \n    \n    // only y clamp\n    tex *= step(uv1.y, 1.) * step(0., uv1.y);\n    // no corner \n    // tex *= (step(uv1.y, 1.) * step(0., uv1.y) + step(uv1.x, 1.) * step(0., uv1.x)) / 2.;\n     \n        \n    // Output to screen\n    fragColor = tex;\n}\n\n","name":"Image","description":"","type":"image"}]}