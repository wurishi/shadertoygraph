{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"channel":1,"type":"music","id":"4df3Rn","filepath":"/media/a/3c33c415862bb7964d256f4749408247da6596f2167dca2c86cc38f83c244aa6.mp3","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"float time = 0.0;\n\t \nvec3 rotate(vec3 r, float v){ return vec3(r.x*cos(v)+r.z*sin(v),r.y,r.z*cos(v)-r.x*sin(v));}\n\nfloat noise( in vec3 x )\n{\n\tfloat  z = x.z*64.0;\n\tvec2 offz = vec2(0.217,0.123);\n\tvec2 uv1 = x.xy + offz*floor(z); \n\tvec2 uv2 = uv1  + offz;\n\treturn mix(texture( iChannel0, uv1 ,-1000.0).x,texture( iChannel0, uv2 ,-1000.0).x,fract(z))-0.5;\n}\n\nfloat noises( in vec3 p){\n\tfloat a = 0.0;\n\tfor(float i=1.0;i<4.0;i++){\n\t\ta += noise(p)/i;\n\t\tp = p*2.5 + vec3(i*a*0.02,a*0.01,a*0.1);\n\t}\n\treturn a;\n}\n\nfloat ground( in vec3 p){\n\treturn noise(vec3(p.x,p.y,p.z)*0.00002)*1000.0-noise(p.zxy*0.00013)*80.0+p.y;\n}\n\nfloat clouds( in vec3 p){\n\treturn noises(vec3(p.x*0.2+time*10.0,p.y*2.0,p.z)*0.00004);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\t\n    time        = iTime*4.8+floor(iTime*0.1)*120.0+210.0;\n\t\n    vec2 uv     = fragCoord.xy/(iResolution.xx*0.5)-vec2(1.0,iResolution.y/iResolution.x);\n    vec3 campos = vec3(80.0,400.0,time*3.0);\n    vec3 ray   = rotate(normalize(vec3(uv.x,uv.y-sin(time*0.02)*0.2-0.2,1.0).xyz),time*0.01);\n    vec3 pos    = campos+ray*1.0;\n    vec3 sun    = vec3(0.0,0.5,-0.5);    \t\n\t\n    // raymarch\n    float test  = 0.0;\n    float fog   = 0.0;\n\tfloat dist  = 0.0;\n\n\tvec3  p1 = pos;\t\n\tfor(float i=1.0;i<60.0;i++){\n        test  = ground(p1); \n\t\tfog  += max(clouds(p1)+test*0.0003,0.0);\n\t\tp1   += ray*min(test,i*1.3);\n\t\tdist += test;\n\t}\n\n\tfloat l     = sin(dot(ray,sun));\n\tvec3  light = vec3(l,0.0,-l)+ray.y*0.2;\n    \n\tfloat amb = smoothstep(-50.0,80.0,ground(p1+vec3(0.0,10.0,0.0)+sun*30.0))-smoothstep(200.0,-0.0,p1.y-100.0);\n\tvec3  ground = vec3(0.30,0.30,0.25)+sin(p1*0.002)*0.01+noise(vec3(p1*vec3(0.001,0.02,0.005)))*-0.04+amb*0.2+light*0.05;\n\t\t\n\tfloat h = smoothstep(4000.,25000.0,dist);\n\tvec3  sky = vec3(0.6)+light*0.1+ray.y*0.3;\n\n\tfloat f = smoothstep(1.0,30.0,fog);\n\tvec3  cloud = vec3(0.95,0.94,0.90)+light*0.1;\n\t\n\tfragColor = vec4(sqrt(smoothstep(0.1,1.0,mix(mix(ground,sky,h),cloud,f))),1.0);\n\t\n\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MdX3zX","date":"1375442941","viewed":2739,"name":"Foggy Mountains","username":"ztri","description":"Moutains with timelapse style clouds and fog.","likes":54,"published":1,"flags":0,"usePreview":0,"tags":["noise","raycasting"],"hasliked":0,"parentid":"","parentname":""}}