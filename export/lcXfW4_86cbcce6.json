{"ver":"0.1","info":{"id":"lcXfW4","date":"1724175382","viewed":80,"name":"Drip Drip","username":"incre_ment","description":"Wanted to mess around with one of the smoothing functions (opSmoothUnion).  Thanks IQ for that knowledge (and the SDFs, as always).","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["domainrepetition","smoothunion","drips"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   vec2 uv = ( fragCoord - .5* iResolution.xy ) /iResolution.y;\n   vec3 col = vec3(0.);   \n   float tt = fract(.5*iTime);\n \n   float numCol = 10.;       \n   uv *= numCol;\n   float cellID = floor(uv.x);\n   float tOff = fract(324.6*sin(46.7*cellID));\n   float t = fract(tt + tOff); \n   uv.x = fract(uv.x) - .5;        \n   float box = sdBox(uv - vec2(0,numCol/2.), vec2(1.0,1.4));\n   float box2 = sdBox(uv- vec2(0,-numCol/2.), vec2(1.0,1.4));  \n   float startPos = numCol/2.4;\n   float endPos = numCol;\n   float drop = sdEgg(uv - vec2(0.,startPos-endPos*fract(t*t)),.4,.2);\n   float circ_box = opSmoothUnion(box, drop, .2);\n   circ_box = opSmoothUnion(box2, circ_box, .5);\n   col += .02/abs(circ_box);    \n   fragColor = vec4(col,1.0);\n} ","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"// Thanks IQ for the following three functions\nfloat sdBox( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\n\nfloat sdEgg( in vec2 p, in float ra, in float rb )\n{\n    const float k = sqrt(3.0);\n    p.x = abs(p.x);\n    float r = ra - rb;\n    return ((p.y<0.0)       ? length(vec2(p.x,  p.y    )) - r :\n            (k*(p.x+r)<p.y) ? length(vec2(p.x,  p.y-k*r)) :\n                              length(vec2(p.x+r,p.y    )) - 2.0*r) - rb;\n}\n\n\nfloat opSmoothUnion( float d1, float d2, float k )\n{\n    float h = clamp( 0.5 + 0.5*(d2-d1)/k, 0.0, 1.0 );\n    return mix( d2, d1, h ) - k*h*(1.0-h);\n}","name":"Common","description":"","type":"common"}]}