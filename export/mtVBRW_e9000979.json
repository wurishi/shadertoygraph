{"ver":"0.1","info":{"id":"mtVBRW","date":"1702083567","viewed":31,"name":"Mountain shadow w/ raymarching","username":"ZoldLeo","description":"Mountain ","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","shadow"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","previewfilepath":"/media/ap/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float height(vec2 uv) { // Noise, the height of the mountain \n    uv /= 10.;\n    float col = texture(iChannel0,uv).x;\n    col += texture(iChannel0,uv*2.).x/2.;\n    col += texture(iChannel0,uv*4.).x/4.;\n    col += texture(iChannel0,uv*8.).x/8.;\n    col *= max(1.-abs(length(uv*20.)),0.);\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.x*2.-iResolution.xy/iResolution.x;\n    float col = height(uv);\n    fragColor = vec4(0,1,0,1); // Coloring\n    if(col>=.05)fragColor=vec4(0,.9,0,1);\n    if(col>=.1)fragColor=vec4(0,.8,0,1);\n    if(col>=.2)fragColor=vec4(0,.6,0,1);\n    if(col>=.4)fragColor=vec4(.8,.6,.6,1);\n    if(col>=.6)fragColor=vec4(.8,.8,.8,1);\n    if(col>=.8)fragColor=vec4(1);\n    vec3 ro = vec3(uv,col); // Setting up the ray facing the lightsource\n    vec3 rd = vec3(iMouse.xy/iResolution.x*2.-iResolution.xy/iResolution.x,2)-ro;\n    rd /= rd.z;\n    float d = .01;\n    int l = int(length(rd)/d);\n    for (int i;i<l;i++) { // Raymarching \n        ro += rd*d;\n        if (ro.z<=height(ro.xy)) {\n            fragColor *= vec4(.75);\n            return;\n        }\n    }\n}","name":"Image","description":"","type":"image"}]}