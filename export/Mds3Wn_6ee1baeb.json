{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"float noise(float t) {\n\treturn fract(sin(t)*4397.33);\n}\n\nvec3 rotate(vec3 p) {\n\tfloat angle = iTime / 3.;\n\treturn vec3(p.x*cos(angle) + p.z*sin(angle), p.y, p.x*sin(angle) - p.z*cos(angle));\n}\n\nfloat field(vec3 p) {\n\tfloat d = 0.;\n\tp = abs(rotate(p));\n\tfor (int i = 0; i < 7; ++i) {\n\t\td = max(d, exp(-float(i) / 7.) * (length(max(p - .4, vec3(0.))) - .2));\n\t\tp = abs(2.*fract(p) - 1.) + .1;\n\t}\n\treturn d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = 2. * fragCoord.xy / iResolution.xy - 1.;\n\tuv *= iResolution.xy / max(iResolution.x, iResolution.y);\n\tvec3 ro = vec3(0., 0., 2.7);\n\tvec3 rd = normalize(vec3(uv.x, -uv.y, -1.5));\n\tfloat dSum = 0.;\n\tfloat dMax = 0.;\n\t\n\tfloat variance = mix(3., 1., pow(.5 + .5*sin(iTime), 8.));\n\tvariance -= .05 * log(1.e-6 + noise(iTime));\n\t\n\tfor (int i = 0; i < 64; ++i) {\n\t\tfloat d = field(ro);\n\t\tfloat weight = 1. + .2 * (exp(-10. * abs(2.*fract(abs(4.*ro.y)) - 1.)));\n\t\tfloat value = exp(-variance * abs(d)) * weight;\n\t\tdSum += value;\n\t\tdMax = max(dMax, value);\n\t\tro += (d / 8.) * rd;\n\t}\n\t\n\tfloat t = max(dSum / 32., dMax) * mix(.92, 1., noise(uv.x + noise(uv.y + iTime)));\n\tfragColor = vec4(t * vec3(t*t*1.3, t*1.3, 1.), 1.);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"Mds3Wn","date":"1367822921","viewed":2770,"name":"Digital Heart","username":"JoshP","description":"The purest of love demands the highest of prices.","likes":87,"published":1,"flags":0,"usePreview":0,"tags":["3d","raymarching","heart"],"hasliked":0,"parentid":"","parentname":""}}