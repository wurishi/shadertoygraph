{"ver":"0.1","info":{"id":"sdS3RG","date":"1617621284","viewed":167,"name":"Filter, reshaped pixel","username":"Envy24","description":"other implementation: https://www.shadertoy.com/view/XlSBzm\n\nmouse.x - pixel shape\nmouse.y - smothness","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["pixel","filter","pixelate","reshaped"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define R iResolution\n#define MX (iMouse.x / iResolution.x)\n#define MY ((R.y - iMouse.y) / iResolution.y)\n#define SHAPE_RANGE 16.0f\n#define PIXEL_SIZE (8.0f)\n#define BACKGROUND (vec4(0.03f, 0.1f, 0.2f, 1.0f))\n#define MIN 1.0\n#define TEX0(x) (texture(iChannel0, x))\n\n/* MOUSE.X - shape saturation */\n\nfloat average_lum(vec4 color) { return (color.r + color.g + color.b) * 0.33333f; }\nfloat weighted_lum(vec4 color) { return (color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722); }\n\nvoid mainImage( out vec4 O, in vec2 P )\n{\n    float RADIUS = PIXEL_SIZE * 0.5f;\n\n    vec2 redused_uv = floor(P / PIXEL_SIZE) * PIXEL_SIZE;\n    vec2 diff = (P - redused_uv) - RADIUS;\n\n    RADIUS *= MIN + MX * SHAPE_RANGE;                \n   \n    vec4 color = TEX0(redused_uv / R.xy);\n    \n    float MODULATED_RR = RADIUS * RADIUS * average_lum(color);\n    \n    //float dist = diff.x * diff.x + diff.y * diff.y - MODULATED_RR * MODULATED_RR;\n    float dist = diff.x * diff.x + diff.y * diff.y - MODULATED_RR;\n    \n    float t = smoothstep(-RADIUS * MY, RADIUS * MY, dist);\n    O = mix(BACKGROUND, color, 1.0f - t);\n}","name":"Image","description":"","type":"image"}]}