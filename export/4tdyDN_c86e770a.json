{"ver":"0.1","info":{"id":"4tdyDN","date":"1532708628","viewed":152,"name":"island shader","username":"Bitmesh","description":"click to zoom and pan","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["island"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4df3Rr","filepath":"/media/a/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","previewfilepath":"/media/ap/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define GROUND  \tvec4(0.2,0.9,0.3,1.0)\n#define SAND \t\tvec4(0.7,0.4,0.3,1.0)\n#define SEA_SHALLOW vec4(0.0,0.7,0.5,1.0)\n#define SEA_DEEP \tvec4(0.0,0.1,0.2,1.0)\n#define ROCK \t\tvec4(0.3,0.25,0.25,1.0)\n#define SNOW\t\tvec4(0.9,0.9,1.0,1.0)\n\n#define TREES \t\tvec4(0.1,0.3,0.1,1.0)\n\n#define SEA_LEVEL 0.4\n#define WAVES_INTENSITY 0.005\n\nfloat noise(vec2 uv)\n{\n   float height = \n         texture(iChannel0, uv*.25).r\n        +texture(iChannel0, uv*.5).r\n        +texture(iChannel0, uv).r\n        +texture(iChannel0, uv*2.).r;\n    height /= 4.;\n    height *= 1.0-distance(uv, vec2(0.5,0.5));\n    \n    return height;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.y - vec2(.4,0);\n    \n    float zoom = iMouse.z > 0. ? -0.9 : 0.;//(sin(iTime)*.5-.5);\n    vec2 pan = iMouse.z > 0. ? iMouse.xy / iResolution.xy - vec2(0.5) : vec2(0.);\n    \n    uv *=  zoom + 1.;\n    uv -= vec2(zoom * .5) - pan;\n    \n    float height = noise(uv);\n    \n    float waves = sin(iTime + (height*.5-.5)*24. + (uv.x + uv.y ) * 34.)*WAVES_INTENSITY;\n    float seaLevel = SEA_LEVEL + waves;\n   \n    vec4 seaColor = mix(SEA_SHALLOW, SEA_DEEP, clamp(1.0-pow(height - waves* 1.3, 2.0),0.,1.0));\n    vec4 groundColor = mix(GROUND, SAND, clamp(1.0-pow(height* 2.1, 4.0), 0., 1.));\n    \n    float trees = (1.0 - pow(abs(SEA_LEVEL + .07 - height) * 14., 2.0));\n        \n    groundColor = height > SEA_LEVEL+0.14 ? (ROCK + pow(height * 1.3, 6.)): groundColor;\n    groundColor = height > SEA_LEVEL+0.19 ? SNOW : groundColor;\n    groundColor = (texture(iChannel1, uv * 24.).r * clamp(trees,0.,1.)) > .5 ? TREES:groundColor;\n\n    fragColor = height < seaLevel ? seaColor : groundColor;\n}","name":"Image","description":"","type":"image"}]}