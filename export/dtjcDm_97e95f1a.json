{"ver":"0.1","info":{"id":"dtjcDm","date":"1691874490","viewed":156,"name":"Demodulation battle â€” Final","username":"illus0r","description":"https://livecode.demozoo.org/performer/Ivan%2520Dianov.html","likes":19,"published":1,"flags":0,"usePreview":0,"tags":["battle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define o fragColor\n#define time iTime\n\n#define F float\n#define V vec2\n#define W vec3\n#define N normalize\n#define L length\n#define S(x) sin(x + 2.0 * sin(x + 4.0 * sin(x)))\n#define sabs(x) sqrt((x) * (x) + 0.1)\n#define smax(a, b) ((a + b + sabs(a - (b))) * 0.5)\n#define Z(p, s) (asin(sin(p * T / s) * 0.9) / T * s)\n#define T 6.283\n#define rot(x) mat2(cos(x), -sin(x), sin(x), cos(x))\n\nF gl=0.;\nfloat sdf(vec3 p) {\n    vec3 pI = p;\n    \n    p.x += S(p.z * 0.1 + iTime) * p.z * 0.05;\n    p.y += S(p.z * 0.161 + iTime) * p.z * 0.05;\n    p.xy = vec2(atan(p.y, p.x) / T * 8.0 + S(pI.z * 0.162 + iTime * 0.2), -length(p.xy) + 1.5 + 0.6 * S(pI.z * 0.2 + iTime * 0.2));\n    \n    p.z += iTime * 4.0;\n    \n    p.y += 0.5;\n    float pl = p.y;\n    \n    p.xz = vec2(Z(p.xz, 2.0));\n    \n    p.y += 0.5 * sin(pI.z + iTime + atan(p.y, p.x));\n    float sp = length(p) - 0.3;\n    float l = length(p) - 0.02 + 0.02 * sin(pI.z + S(iTime));\n    l *= 0.5;\n    \n    pl = smax(pl, -sp) + 0.01 * sin(atan(pl, sp) * 40.0);\n    \n    pl = min(pl, l);\n    gl += 0.01 / l * pl;\n    if (l < 0.002) gl++;\n    \n    return pl * 0.5;\n}\n\nvec3 norm(vec3 p) {\n    float d = sdf(p);\n    vec3 e = vec3(0.0, 0.001, 0.0);\n    return normalize(vec3(d - sdf(p - e.yxx), d - sdf(p - e.xyx), d - sdf(p - e.xxy)));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = vec2(gl_FragCoord.x / iResolution.x, gl_FragCoord.y / iResolution.y);\n\tuv -= 0.5;\n\tuv /= vec2(iResolution.y / iResolution.x, 1);\n  o*=0.;\n\n  F i=0.,d=0.,e=1.;\n  W p,rd=N(W(uv,1));\n  rd.xz*=rot(.2*S(iTime*.1+uv.y*.2));\n  rd.yz*=rot(.1*S(time*.161+uv.x*.23));\n  for(;i++<99.&&e>.001;){\n    p=rd*d+.00001;\n    d+=e=sdf(p);\n  }\n  W l=W(0,1,0);\n  l.xy*=rot(p.z*.4+time*4.);\n  W n=norm(p);\n  o.r+=dot(n,l)*.5+.5;\n  o.g+=dot(n,l.zxy)*.5+.5;\n  o.b+=dot(n,l.yzx)*.5+.5;\n  o*=(1.-i/99.)*.8+.2;\n  //o=pow(max(o,0),vec4(.5));\n  o+=gl;\n  o*=smoothstep(50.,0.,d);\n}\n","name":"Image","description":"","type":"image"}]}