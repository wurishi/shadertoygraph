{"ver":"0.1","info":{"id":"NlSyDm","date":"1649757735","viewed":163,"name":"slider through buffer","username":"yunhai","description":"demo","likes":6,"published":1,"flags":32,"usePreview":0,"tags":["study","tut"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//render\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    float v=texelFetch(iChannel0,ivec2(0,0),0).x;\n    //aplly v\n    float SM=PIXW*(1.+10.*v);\n    \n    O=vec4(0);\n    vec2 uv=(I-0.5*iR)*PIXW;\n    \n    //draw line\n    vec2 f=vec2(-l,0),t=-f;\n    vec2 fp=uv-f,ft=t-f;\n    float d=length(fp-\n    clamp(dot(fp,ft)/dot(ft,ft),0.,1.)*ft);\n    \n    O.xyz+=smoothstep(r+SM,r-SM,d)*vec3(.5,.7,1.);\n\n\n    //draw p\n    O.xyz=mix(O.xyz,vec3(.9,.8,.9),\n        smoothstep(r+SM,r,length(uv-(f+v*ft))));\n        \n    //aplly v\n    O.xyz=mix(O.xyz,vec3(1.),v*smoothstep(r-SM,r+SM,d));\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"//handle input \n//iMouse feature:\n//https://shadertoyunofficial.wordpress.com/2016/07/20/special-shadertoy-features/\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    \n    O.x=texelFetch(iChannel0,ivec2(0,0),0).x;\n    vec4 uv=iMouse;uv.w=abs(uv.w);\n    uv=(uv-0.5*iR.xyxy)*PIXW;\n    float lnr=l+r;\n    if(uv.z>-lnr&&uv.z<lnr&&\n        uv.w>-r&&uv.w<r)\n        O.x=clamp((uv.x+l)/(2.*l),0.,1.);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define iR iResolution.xy\n#define PIXW (1./iR.x)\nfloat l=.3;\nfloat r=.02;","name":"Common","description":"","type":"common"}]}