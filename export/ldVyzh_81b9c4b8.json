{"ver":"0.1","info":{"id":"ldVyzh","date":"1521069033","viewed":405,"name":"Doodling #3: Glass","username":"lsdlive","description":"Doodling session.\nThanks to iq, mercury, lj, aiekick, balkhan & all shadertoyers.\nGreets to all the shader showdown paris gang.\n\nPhantom mode from aiekick: https://www.shadertoy.com/view/MtScWW","likes":25,"published":1,"flags":0,"usePreview":0,"tags":["raymarch","doodling"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"mat2 r2d(float a) {\n    float c=cos(a),s=sin(a);\n    return mat2(c, s, -s, c);\n}\n\nfloat sc(vec3 p, float s) {\n    p=abs(p);\n    p=max(p,p.yzx);\n    return min(p.x,min(p.y,p.z)) - s;\n}\n\nvec2 amod(vec2 p, float c) {\n    float m = c/6.28;\n    float a = mod(atan(p.x,p.y)-m*.5, m)-m*.5;\n    return vec2(cos(a), sin(a)) * length(p);\n}\n\nvoid mo(inout vec2 p, vec2 d) {\n    p.x = abs(p.x) - d.x;\n    p.x = abs(p.x) - d.x;\n    if(p.y>p.x)p=p.yx;\n}\n\nfloat g = 0.;\nfloat de(vec3 p) {\n    \n    vec3 q = p;\n    \n    p.xy *= r2d(iTime*.1);\n    \n    \n    q.xy += vec2(sin(q.z*2.+1.)*.2+sin(q.z)*.05, sin(q.z)*.4);\n    float c = length(max(abs(q+vec2(0,.05).xyx) - vec3(.01, .01, 1e6), 0.));\n    \n    p.xy *= r2d(p.z*.1);\n    p.xy = amod(p.xy, 19.);//8.\n    float d1 = 2.;\n    p.z = mod(p.z-d1*.5, d1) - d1*.5;\n    \n    \n    mo(p.xy, vec2(.1, .3));\n    mo(p.xy, vec2(.8, .9));\n    \n    p.x = abs(p.x) - .8;\n\n    p.xy *= r2d(.785);\n    mo(p.xy, vec2(.2, .2));\n    \n    \n    float d = sc(p, .1);\n    d = min(d, c);\n    g+=.01/(.01+d*d);\n    return d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy -.5;\n    uv.x*=iResolution.x/iResolution.y;\n    \n    vec3 ro=vec3(0,0,iTime*2.);\n    vec3 rd=normalize(vec3(uv,1));\n       \n    vec3 p;\n    float ri,t=0.;\n    for(float i=0.;i<1.;i+=.01) {\n        ri=i;\n        p=ro+rd*t;\n        float d = de(p);\n        if(t>30.) break;\n        d = max(abs(d), .0004);\n        t+=d*.5;\n    }\n\n    vec3 bg = vec3(.2, .1, .2);\n\n    vec3 col = bg;\n    if(t<=30.)\n\t    col = mix(vec3(.9, .3, .3), bg, uv.x+ri);\n\n    col+=g*.02;\n\n    col = mix(col, bg, 1.-exp(-.1*t*t));\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}