{"ver":"0.1","info":{"id":"4tjyz1","date":"1507481136","viewed":216,"name":"Reveal Layer","username":"StevieP","description":"Hold your mouse across the screen to move the circle.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["reveal","kernels"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRn","filepath":"/media/a/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","previewfilepath":"/media/ap/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"mat3 blur = mat3(\n\t0.111, 0.111, 0.111,\n\t0.111, 0.111, 0.111,\n\t0.111, 0.111, 0.111 \n);\nmat3 sharpen = mat3(\n\t0., -1, 0.0, \n\t-1, 5, -1, \n\t0., -1, 0.0 \n);\nmat3 emboss = mat3(\n\t-2, -1, 0.0,\n\t-1, 1, 1,\n\t0.0, 1, 2\n);\nmat3 outline = mat3(\n\t-1, -1, -1,\n\t-1, 8, -1,\n\t-1, -1, -1\n);\nmat3 topSobel = mat3(\n    1, 2, 1,\n    0.0, 0.0, 0.0,\n    -1, -2 ,-1\n);\nvec3 aSample(const int x, const int y, in vec2 fragCoord)\n{\n    vec2 uv = fragCoord.xy / iResolution.xy * iChannelResolution[0].xy;\n    uv = (uv + vec2(x, y)) / iChannelResolution[0].xy ;\n    return texture(iChannel0, uv).xyz;\n}\nvec3 aFilter(in vec2 fragCoord, mat3 kernel)\n{\n    vec3 sum = vec3(0,0,0);\n    \n    for(int i = 0; i < 3; i++)\n    {\n        for(int j = 0; j < 3; j++)\n        {\n        \tsum += aSample(i - 1, j - 1, fragCoord) * kernel[i][j]; \n        }\n    }\n    \n    return sum;\n}\n//Changable\nfloat radius = 0.1;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n\tvec2 fc = fragCoord.xy;\n\n    vec2 uv = fc / iResolution.xy;\n    uv.y *= iResolution.y / iResolution.x;\n    \n    vec4 layer1 = texture(iChannel0, uv);\n    vec4 layer2;\n    \n  \tvec2 mouseUV = iMouse.xy / iResolution.xy;  \n\tmouseUV.y *= iResolution.y / iResolution.x;\n\n    //Select your effect\n    \n    vec3 cf = aFilter(fc, sharpen);\n    //vec3 cf = aFilter(fc, emboss);\n    //vec3 cf = aFilter(fc, outline);\n    //vec3 cf = aFilter(fc, topSobel); \n\t\n    //layers\n    layer1 = vec4(cf, 1.0);\n    \n    float topLayerAlpha = step(radius, length(uv - mouseUV));\n    \n    layer2 = vec4(aFilter(fc, blur), topLayerAlpha);\n    \n    //composite layers\n    vec4 composite;\n    composite = mix(layer1, layer2, layer2.a);\n    \n\n    fragColor = composite;\n}","name":"Image","description":"","type":"image"}]}