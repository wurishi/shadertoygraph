{"ver":"0.1","info":{"id":"Dslfz8","date":"1690429972","viewed":89,"name":"GlitchEffect_01","username":"LudenGhost","description":"模拟老电视glitch","likes":3,"published":1,"flags":0,"usePreview":1,"tags":["glitch"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n// 设置老电视效果的参数\nfloat scanlineIntensity = 0.5;\nfloat distortionIntensity = 0.01;\nfloat distortionSpeed = .01;\nfloat noiseIntensity = 0.002;\nfloat noiseSpeed = .01;\n\nfloat rand(vec2 coord)\n{\n    return fract(sin(dot(coord, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec4 TVEffect(vec2 uv, vec2 screenCoord, float time)\n{\n    // 扫描线效果\n    float scanline = step(mod(screenCoord.y * iResolution.y, 2.0),1.0);\n    scanline *= scanlineIntensity;\n\n    // 扭曲效果\n    vec2 distortionOffset = vec2(\n        sin(screenCoord.y * iResolution.y * distortionSpeed + time * distortionSpeed),\n        cos(screenCoord.x * iResolution.x * distortionSpeed + time * distortionSpeed)\n    ) * distortionIntensity*sin(iTime)*0.5;\n\n    // 噪声效果\n    float noise = rand(uv + vec2(time * noiseSpeed));\n    noise = noise * 2.0 - 1.0;\n    noise *= noiseIntensity;\n\n    // 应用效果\n    vec2 offset = distortionOffset + vec2(noise, noise);\n    vec4 color = texture(iChannel0, uv + offset);\n\n    // 叠加扫描线\n    color.rgb -= scanline;\n\n    return color;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    // 将纹理坐标转换为屏幕坐标\n    vec2 screenCoord = fragCoord.xy / iResolution.xy;\n\n    // 应用老电视效果\n    vec4 finalColor = TVEffect(fragCoord.xy / iResolution.xy, screenCoord, iTime);\n\n    fragColor = finalColor;\n}\n","name":"Image","description":"","type":"image"}]}