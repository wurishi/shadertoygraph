{"ver":"0.1","info":{"id":"MdK3Rw","date":"1453812992","viewed":254,"name":"Trippy festival","username":"Emil","description":"Random experiment with sound and notes.","likes":6,"published":1,"flags":8,"usePreview":0,"tags":["music","trippy","odd","generatedmusic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float map(vec3 p){\n    vec3 pn = p;\n    p.x = mod(p.x, 3.0)-1.5;\n    p.z = mod(p.z*0.2+p.x, 3.0)-1.5;\n    p.y += (pn.x*sin(iTime*0.2))*0.2;\n    \n    p += 0.0001*cross(pn.zyx,p*sin(iTime));\n    \n    return length(p) - 1.5*abs(cos(iTime*0.2))+0.7*sin(pn.x*pn.z*0.000001);\n}\n\nfloat trace(vec3 o, vec3 r){\n    float t = 0.0;\n    for (int i = 0; i < 32; i++){ \n        vec3 p = o + r * t;\n        float d = map(p);\n        t += d * 0.8;\n    }\n    return t;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    uv = uv*2.0 -1.0;\n    uv.x *= iResolution.x / iResolution.y;\n    uv.y = abs(uv.y-0.1);\n    uv.x = abs(uv.x-0.1);\n    \n    float tact = iTime*(0.4);\n    \n    \n    float note1 = (26.0)*(3.0*fract(tact));\n    note1 += (3.0*sin(tact*2.0+radians(90.0)));\n    note1 += ceil(3.0*fract(tact-0.5));\n    \n    \n    vec4 color = vec4(normalize(vec3(abs(-sin(iTime+uv.x)),abs(-sin(iTime+degrees(45.0/2.0)+uv.x)),abs(sin(iTime+degrees(45.0)+uv.x)))),1.0);\n    \n    vec3 r = normalize(vec3(uv+vec2(0.0,-0.05), 1.0));\n    r += note1*0.01;\n    vec3 o = vec3(2.0,-10.0+2.0*cos(iTime*0.2),-1.0+iTime*30.0);\n    \n    \n    float t = trace(o,r*color.xyz);\n    float fog = 1.0 / (0.0 + t * t * 0.002);\n    vec3 fc = 1.0/vec3(t/20.0)+fog;\n    \n\tfragColor = vec4(0.0)+vec4(abs(fc*0.8*vec3(1.2,0.3,cos(iTime*0.2))+0.3),1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"XsfGRr","channel":0}],"code":"float random (float x){\n    return fract(sin(dot(vec2(x, x+12.36) ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n\nvec2 mainSound( in int samp, float time )\n{\n    float mtime = 0.0;\n    float randomtact = random(ceil(time));\n    float tact = time*(0.4*1.5);\n    \n    float randomnote = random(ceil(tact));\n    \n    float note1 = (6.0+randomnote*10.0)*ceil(3.0*fract(tact));\n    note1 += ceil(3.0*sin(tact*2.0+radians(90.0)));\n    note1 += ceil(3.0*fract(tact-0.5));\n    \n    randomnote = random(ceil(-tact+30.0));\n    \n    float note2 = (15.0+randomnote*10.0)*ceil(3.0*fract(tact));\n    \n    mtime = time*note1*10.0;\n    float bass = ( sin(6.2831*mtime) );\n    mtime = time*note2*10.0;\n    float melody = ( fract(sin(mtime*2.0)));\n    \n    float noise = (2.0*fract(tact/0.5))<0.3?random(time):0.0;\n    \n    return 0.03*vec2((0.3*noise+bass),(noise*0.26+melody*2.0+bass*0.3));\n}","name":"Sound","description":"","type":"sound"}]}