{"ver":"0.1","info":{"id":"mlByz1","date":"1691465571","viewed":67,"name":"edge difference direction visual","username":"lalaoopybee","description":"1. \"blur\" consecutive frames.\n2. find dir of pix with most similar color to \"blurred\"\n3. show dir with rainbow.\nshadertoy needs more intriguing base textures!","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["blur","edgedetection","rainbow"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define K 7\n\n#define PI 3.1415927\n\nvec3 colorWheel(float angle){\n    float r=cos(angle);\n    float g=cos(angle-PI*.667);\n    float b=cos(angle-PI*1.33);\n    \n    return vec3(r, g, b)*.5+.5;\n}\n\nvoid mainImage (out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv=fragCoord/iResolution.xy;\n    fragColor=texture(iChannel1, uv);\n    \n    float record=1.;\n    vec2 saidOffset;\n    for (int i=-K; i<=K; i++) {\n        for (int j=-K; j<=K; j++) {\n            vec2 offset=vec2(i, j);\n            vec2 offsetUV=offset/iResolution.xy;\n            vec4 blur=texture(iChannel0, uv+offsetUV);\n            vec3 diff=(fragColor-blur).rgb;\n            float dist=dot(diff, diff);\n            if (dist<record) {\n                record=dist;\n                saidOffset=offset;\n            }\n        }\n    }\n    \n    vec3 diff=(fragColor-texture(iChannel0, uv)).rgb;\n    float dist=dot(diff, diff);\n    float angle=atan(saidOffset.y, saidOffset.x)+iTime;\n    vec3 rainbow=colorWheel(angle)*dist;\n    fragColor.rgb+=rainbow;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define PCT .03\n\nvoid mainImage (out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv=fragCoord/iResolution.xy;\n    vec4 old=texture(iChannel0, uv);\n    vec4 new=texture(iChannel1, uv);\n    fragColor=mix(old, new, PCT);\n}","name":"Buffer A","description":"","type":"buffer"}]}