{"ver":"0.1","info":{"id":"XlSSRz","date":"1440857040","viewed":534,"name":"Color Blind Filter","username":"BillyBag2","description":"An attempt to create a shader to help someone who is color blind distinguish colors.","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["filter","colorblind"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdXGzn","filepath":"/media/a/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","previewfilepath":"/media/ap/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"// This is my first shader.\n// Feedback very welcome.\n\n\n// When you are color blind it is dificult to tell colours apart.\n// The idea of this shader is to help when this becomes a problem.\n// I can think of two cases where I struggle with color blindness.\n// One is colored LEDs. Red and green LEDs look the same to me.\n// The other is maps with color keys,\n// for example the london underground map.\n// In these cases it is less about naming the colours and more\n// about telling colors apart.\n// Most colour blind apps try and name colours. I want a quick visual\n// clue that colors are different.\n// Ideally this shader would be in a phone/tablet app using a camera.\n\n\n// TODO:\n// I want to \"blur\" the texture so the hue value for the stripes\n// is less noisy. However may introduce color aliasing.\n\n// At the time of writing it darked the image to make the stripes.\n// If I center the stripe intensidt the avaerage brightness will\n// not change. Hoever I could \"overflow\" ? \n// As a begginner I'm not sure how to adderss this. \n\n// Stole rgb2hsv  from...\n// http://stackoverflow.com/questions/15095909/from-rgb-to-hsv-in-opengl-glsl\nvec3 rgb2hsv(vec3 c)\n{\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float angle = iTime; // A test engle for a texture.\n    float freq = 200.0; // Frequency across the screen.\n    float amp =2.0; // Amplitude of texture. \n \tvec2 xy = fragCoord.xy / iResolution.xy;\n    vec4 texColor = texture(iChannel0,xy);\n    \n    vec3 hsv = rgb2hsv(texColor.xyz);\n    angle = hsv.x * 3.14;\n    \n     // quantize the angle so we get better areas of stripes.\n    angle = floor(angle * 10.0)/10.0;\n    float rotx = ((fragCoord.xy.x * cos(angle)) - (fragCoord.xy.y * sin(angle)))/iResolution.xy.x;\n    \n    amp = amp * hsv.y; // Increase mplitude for higher saturation.\n    \n    amp = clamp(amp,0.0,1.0);\n    // Set sinOffset to 0.5 to only decrease brightness.\n    // Set signOffset to 0.0 to balance the amplitude.\n    float sinOffset = 0.0;\n    float ampxy = 1.0 - (amp * (sinOffset + (0.5 * sin(rotx * freq * 2.0 * 3.14)))); \n    texColor = texColor * ampxy;\n    \n    //texColor = texColor * ;\n    fragColor = texColor;\n}","name":"","description":"","type":"image"}]}