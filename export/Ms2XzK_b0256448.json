{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","sampler":{"filter":"nearest","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"vec4 getRainbowAt(vec2 p, vec2 nyan_p)\n{\n    float f = (p.y+nyan_p.y-0.08)*5.3*1.2 + 0.03*sin((p.x+nyan_p.x)*100.0+iTime*40.0);\n    return vec4( ( (1.0-step(0.6,f)) + 0.29*step(1.0,f) ), \n               ( step(0.2,f)/pow(3.14159,(3.0-3.0*step(0.4,f)+4.84409*step(0.6,f))/8.0) - 0.5*step(0.8,f) ),\n               ( step(0.8,f)-0.49*step(1.0,f)),\n                step(0.0, f)*(1.0-step(1.0,f))*(1.0-step(-nyan_p.x+0.08,p.x))\n             );\n}\n\nvec4 getNyanAt(vec2 p, vec2 nyan_p, float nyan_s)\n{\n    float nyan_t = floor(mod(iTime*2.0,1.0)*6.0)/6.4;\n    return texture(iChannel0, clamp(p+nyan_p, vec2(0,0), vec2(nyan_s-0.01,1))\n                    * vec2((1.0/nyan_s)/6.0, -1.0/nyan_s) + vec2(0,1) + vec2(nyan_t,0));\n}\n\nfloat getStarAt(vec2 p, vec2 star_p)\n{\n    vec2 o = p/0.8 - mod(p/0.8,0.2);\n    float dt = .7*o.x + 2.0*o.y;\n    float visible = step(0.9,sin(o.x*6.0+8.5*o.y+iTime*0.3 + cos(o.x*1.542)));\n    float specialstar = step(0.999,sin(o.x*6.0+8.5*o.y+iTime*0.3 + cos(o.x*1.542)));\n    \n    p = mod(p/0.8,0.2);\n    vec2 q = p+star_p;\n    q = floor(q*70.0)/70.0;\n    float a = atan(q.x, q.y);\n    float r = length(q);\n    float t = mod(iTime + dt, 1.0)/1.0;\n    \n    return ( step(0.1, 0.1*cos((4.0+4.0*specialstar)*a))\n                * (1.0-step(0.02+0.02*step(0.2,t)+0.01*step(0.4,t),r)) )\n        \t\t* (step(0.01-0.01*step(0.4,t),r)\n        \t\t* (1.0-step(0.4,t)*(r<=0.01 || r>=0.02?0.0:1.0) ) \n                * (1.0-step(0.6,t)*(1.0-step(0.03,r))) )\n        \t\t* (1.0-step(0.8,t))\n        \t* visible\n        ;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 wuv = uv * vec2(iResolution.x / iResolution.y, 1);\n    vec4 col = vec4(1);\n    vec4 backgr = vec4(0.16, 0.16, 0.45, 1.0);\n    \n    vec2  nyan_p = vec2(0.1*sin(iTime*1.4)-0.3,0.1*sin(iTime*.6)-0.35);\n    float nyan_s = 0.3;\n    float dt = iTime*1.0;\n    col = mix(backgr, vec4(1), getStarAt( wuv + vec2(dt,0), vec2(-.1, -.1)));\n    \n    vec4 rainbow = getRainbowAt(uv, nyan_p);\n    col = mix(col, rainbow, rainbow.a);\n    vec4 nyan = getNyanAt(uv, nyan_p, nyan_s);\n    \n    col = mix(col, nyan, nyan.a);\n    \n    fragColor = vec4(col);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"Ms2XzK","date":"1414075264","viewed":528,"name":"Nyan Cat Shader","username":"EyeOfPython","description":"Nyan nyan nyan nyan! Nyan nyan nyan.","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["nyancat"],"hasliked":0,"parentid":"","parentname":""}}