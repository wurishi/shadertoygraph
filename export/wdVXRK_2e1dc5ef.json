{"ver":"0.1","info":{"id":"wdVXRK","date":"1574469020","viewed":69,"name":"Back ang granular","username":"jordanjanaq","description":"background and granular","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["blackgranular"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define step 0.01\n#define cutoff 0.500\nfloat yVar;\nvec2 s,g,m;\n///////////////////////\n// Trabajando el background\nvec3 bg(vec2 uv)\n{\n    vec3 bg_final = texture(iChannel0, uv).rgb;\n    float gray = dot( bg_final, vec3(0.399, 0.587, 0.314));\n    bg_final = vec3(gray);\n    for(float i=1.0;i>0.;i-=step)\n    {\n         if (bg_final.g < i && bg_final.r < i-cutoff && bg_final.b < i-cutoff) \n             bg_final=vec3(0.);\n        //else\n            //grayV = vec4(0.);//,0.1, 0.8,1.0);\n    }\n    return bg_final;\n}\n///////////////////////\n// Efecto de transformaciÃ³n\nvec3 effect(vec2 uv, vec3 col)\n{\n    float granularity = yVar*20.+10.;\n    if (granularity > 0.0) \n    {\n        float dx = granularity / s.x;\n        float dy = granularity / s.y;\n        uv = vec2(dx*(floor(uv.x/dx) + 0.5),\n                  dy*(floor(uv.y/dy) + 0.5));\n        return bg(uv);\n    }\n    return col;\n}\n///////////////////////\n// Sistema de coordenadas\nvec2 getUV()\n{\n    return g / s; \n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    s = iResolution.xy;\n    g = fragCoord.xy; \n    m = iResolution.xy/10.0;\n    yVar = m.y/s.y;\n    vec2 uv = getUV(); \n    vec3 tex = bg(uv);\n    vec3 col = effect(uv,tex);   \n\tfragColor = vec4(col,1.);\n}","name":"Image","description":"","type":"image"}]}