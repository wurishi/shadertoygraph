{"ver":"0.1","info":{"id":"ftySWh","date":"1640622784","viewed":145,"name":"IT melody","username":"louis_C","description":"small sound's filter test without taking into account the compilation time. ","likes":5,"published":1,"flags":8,"usePreview":0,"tags":["sound","filter"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float pi = 3.141592653589793;\nmat2 rot(float t){ float c = cos(t); float s = sin(t); return mat2(c,-s,s,c);}\nfloat los ( vec2 p,  float b ) {\n    vec2 q = abs(p);\n    float h = clamp( (-2.0*(q.x*b-q.y*b) )/dot(vec2(b),vec2(b)), -1.0, 1.0 );\n    float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n    d *= sign( q.x + q.y - b );    \n    return d;}\nfloat ff(vec2 uv){\n    vec2 uc = uv;\n    uv = 2.*uv-1.;\n  float ux = floor(uc.x*13.)/13.*2.;float uy =1.- uc.y;\n    uv.x *= iResolution.x/iResolution.y;\n    vec2 p1 = uv*2.2;\n    float r1 = 0.6;float r2 = 0.8;\n    p1.x = mod(p1.x+0.5*r1,r1)-0.5*r1;\n    p1.y = mod(p1.y+0.5*r2,r2)-0.5*r2;\n     vec2 g = p1;\n     float uby = uy*5.4-0.2;\n     float my =clamp(floor(uby),0.,1.);\n     float my2 =clamp(floor(uby-2.),0.,1.);\n    float t1 = 0.12;\n    float t2 = 0.2*ux;\n    vec2 p2 = p1;\n    p2.x -= clamp(p2.x*smoothstep(0.15,0.25,p2.y),-t2,t2);\n    p2.y -= clamp(p2.y,-0.2,0.2);\n    p2.xy *= rot(mix(0.3,0.13,length(ux-0.5)*2.)*my2);    \n    p1.y -= clamp(p1.y,-0.2,0.2);\n    p1.x += t1*ux;\n    p1.x -= clamp((p1.y+0.5*t1*ux)*2.,-0.,t1);\n    p1.xy *= rot(mix(0.3,0.13,length(ux-0.5)*2.)*my);    \n    float d1 = step(0.,los(mix(p1,p2,step(0.4,uy)*step(uy,0.9)),0.1));   \n    g *= rot(pi*0.25);\n    float d2 = min(smoothstep(0.,0.02,distance(fract(g.x*7.05),0.5)),smoothstep(0.,0.02,distance(fract(g.y*7.05),0.5)));\n    float rf = d2*max(max(d1,step(0.95,length(uv.y))),step(0.12,uv.x));\n    return rf;}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    float rf = 0.;\n    float nb = 24.;\n      float b = sqrt(nb);float c = 0.;\n    for(float i = -0.5*b ; i <= 0.5*b; i += 1.)\n    for(float j =-0.5*b ; j <=0.5*b ;j +=1.){\n    c += ff(uv+vec2(i,j)*0.0002);\n    }c /=nb;\n    fragColor = vec4(0.905882,0.,0.22745,0.)*c;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":3,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"float tri(float t){ return mix(fract(t*2.),1.-fract(t*2.),step(0.5,fract(t)));}\nfloat bt(float t){ return floor(fract(t*0.1)*4.)/4.;}\nfloat t1 (float t){ \nfloat ta  = step(fract(t*0.0625),0.25);\nreturn (2.*pow(fract(t*mix(4.,2.,\n    step(mix(0.25,0.5,step(0.75,fract(t*0.25))),fract(t*0.25)))\n    *mix(1.,2., step(bt(t),fract(t*0.5+0.5)))),0.5)-1.)*(1.-ta)\n    +(2.*fract(t*8.)-1.)*(ta);\n    }\nfloat t2(float t,float tt){float r = 0.;\nfor(int  i = 1 ; i<40 ;i++){\nr +=t1(t+float(i)*mix(0.005,0.02,tt))/(float(i)*0.75+0.25);\n}\nreturn r*0.2;}\nvec2 r1(float time){float t =(1.-fract(time*0.1))*10.;\n    float tt = (1.-fract(time*0.1))*10.+1.;\n    float s1 = t2(t,bt((tri(time*0.025))*40.+2.));\n    float s2 = t2(tt,bt((tri(time*0.025))*40.));\n    vec2 rf = vec2( s1 ,s2)*vec2(sin(time),cos(time));\n    return rf;\n    }\nvec2 r2(float t){ vec2 rn  = r1(t);\n        vec2 ra = vec2(0.);\n        float ta = pow(tri((t)/40.),2.);\n        float ch = 0.002*ta;\n         for(int i = -5 ; i <= 5 ; i++){\n  ra += r1(t+float(i)*ch); \n  }\n  ra /= 10.;\n  ra *= mix(1.,1.5,ta);\n  return ra;}   \n  vec2 op(float t,float k){vec2 r = vec2(0.);\n     for(int i = -5 ; i <= 5 ; i++){\n  r += r2(t+float(i)*0.07*k+k*0.01); \n  }\n  r /= 10.;\n  return (r/k);\n  }\n  vec2 rf(float t){\n  vec2 ra = r2(t);\n    for(int  i = 1 ; i < 5;i++){\n    ra += op(t,float(i));\n    }  \n    return ra*0.5;\n    }\nvec2 mainSound( int samp, float time )\n{\n    float t = time*0.5;\n    vec2 s1 = rf(t)*0.5;\n    s1 += rf(t*2.)*0.7;\n    s1 += rf(t*3.)*0.2;\n    return s1*clamp(time*0.1,0.,1.);\n        \n}","name":"Sound","description":"","type":"sound"}]}