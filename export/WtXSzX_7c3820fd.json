{"ver":"0.1","info":{"id":"WtXSzX","date":"1563643955","viewed":573,"name":"Cursed Pattern","username":"104","description":"code originally painted on a cave wall in new mexico","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["2d","archaeology"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat dtoa(float d, float amount){\n    return 1. / clamp(d*amount, 1., amount);\n}\n\nvec2 hex(vec2 i)\n{\n    vec2 o;\n    o=ceil(i+=i.x*=.577);\n    o-=step(i-=o,mod(o.x+o.y,3.)+--i.yx);\n    o=mod(o,.8);\n    return o;\n}\n\nmat2 rot2D(float r)\n{\n    float c = cos(r), s = sin(r);\n    return mat2(c, s, -s, c);\n}\n\nvec2 warp(vec2 uv, out float sd) {\n    float d = length(mod(uv+1.,2.)-1.);\n    sd = d-1.;\n    return uv*4.*(1.-d);\n}\n\nvoid mainImage(out vec4 o, vec2 O)\n{\n    float t = iTime+1e3;\n    vec2 R = iResolution.xy\n        ,V=(O-.5*R)/R.y\n        ,N=O/R-.5\n        ,P=O-R*.5\n        ;\n    \n    V *= 2.;\n    V *= rot2D(3.14159/4.);\n    \n    float sd;\n    o = vec4(0.);\n\n    for(float i = 1.; i >= 0.; --i) {\n        V *= 2.;\n        vec2 uvP = warp(V, sd);\n\n        uvP *= rot2D(iTime*.01);\n        uvP += iTime*.65;\n\n        vec3 col = hex(uvP).xyy;\n\n        col.rg *= rot2D(.4);\n        col.br *= rot2D(-.8);\n        col=clamp(col,0.,1.);\n\n        float a = 1.-dtoa(-sd, 100.);\n        col *= a;\n\n        float a2 = pow(smoothstep(0.,1.,-sd), .4);\n        col = mix(col, vec3(0,0,.2), 1.-a2);\n        \n      \to.rgb = mix(col, o.rgb, pow(o.a, .1));\n        o.a += a;\n    }\n\n    //o = vec4(0,0,1,0);\n    float v = 1.-dot(N,N);\n    o.rgb = mix(vec3(o.r+o.g+o.b)/3.,o.rgb, pow(v,3.));\n    v *= 1.-length(4.*pow(abs(N), vec2(2.)));// vingette\n    o *= v;\n    o=clamp(o,0.,1.);\n    o *= 1.7;\n    //o = fract(o);\n    o=clamp(o,0.,1.);\n    o = pow(o,o-o+.55);\n    o *= 1.-step(.42,abs(N.y));\n}\n\n\n\n\n\n","name":"Image","description":"","type":"image"}]}