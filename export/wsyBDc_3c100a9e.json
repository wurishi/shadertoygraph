{"ver":"0.1","info":{"id":"wsyBDc","date":"1608091115","viewed":135,"name":"Complex Arg(z)-lines","username":"jllusty","description":"Plots lines of constant arg(f(z)) for a given complex function f(z).","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["complex"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float pi = 4.0 * atan(1.0);\n\nvec2 mult(in vec2 a, in vec2 b) {\n    return vec2(a.x * b.x - a.y * b.y, a.y * b.x + a.x * b.y);\n}\n\n\nvec2 div(in vec2 a, in vec2 b) {\n    return mult(a,vec2(b.x,-b.y))/length(b);\n}\n\nvec2 func(in vec2 z) {\n    return mult(z - vec2(2.0f, 0.0), z + vec2(2.0f, 0.0));\n}\n\nvec3 checkerboard(in vec2 uv) {\n    int parity = int(floor(uv.x)) + int(floor(uv.y));\n    if(parity % 2 == 0) {\n        return vec3(0.0);\n    }\n    else {\n        return vec3(1.0);\n    }\n}\n\n//float wrap(float x, float a) {\n//    return x - a * floor(x / a);\n//}\n\n\n// Smooth wrap.\nfloat wrap(float x, float a){\n    x -= a*floor(x/a);\n    // Smoothing factor.\n    const float sf = 16.; \n    // Rough smoothing.\n    return min(x, (1. - x)*x*16.);\n}\n\nfloat angdist(in float theta1, in float theta2) {\n    return wrap(theta2 - theta1 + pi, 2.0*pi) - pi;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = 4.0*fragCoord/iResolution.xy - 2.;\n    float aspect = iResolution.y/iResolution.x;\n    uv.x = uv.x/aspect;\n\n    // Save Pixel Position\n    vec2 pos = uv;\n\n    // Apply Function\n    uv = func(uv);\n    \n    // Get distance to closest arg(z)-isocurve\n    float n = 13.;\n    float arg = atan(uv.y, uv.x);\n    float gEps = 0.01;\n    float stretch = length(func(pos+vec2(gEps,gEps))-func(pos))/(sqrt(2.)*gEps);\n    float eps = 0.03;\n    float r = length(uv);\n    float d = r*abs(fract(arg*n/(2.*pi)+.5)-.5)/stretch;\n    if (r < 1.)  { d = d/r; }\n    float c = 1.-smoothstep(eps, 2.*eps, d);\n    \n    // Stack onto Base Image (Contours)\n    //  background color\n    vec3 bcol = vec3(1.0-wrap(length(uv), 1.0));\n    //  line color\n    vec3 lcol = vec3(1.0,0.0,0.0);\n    vec3 col = (1.0 - c) * bcol + c * vec3(1.0, 0.0, 0.0);\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}