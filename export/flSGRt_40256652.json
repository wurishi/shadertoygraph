{"ver":"0.1","info":{"id":"flSGRt","date":"1624438100","viewed":94,"name":"Procedural Voronoi noise","username":"Zyphery","description":"A procedural generation of Voronoi noise.\n\neval generates 2 values\nx: distance of uv to point (without the square root)\ny: hash value of closest point (the z calculated in rehash3())\n\nthe y can be used in rehash3() to generate a random color","likes":1,"published":3,"flags":0,"usePreview":0,"tags":["voronoi","proceduralnoise"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float hash(float x) {\n    return fract(x + 7.3215f * 1.8152f);\n}\n\nfloat hash2(vec2 a) {\n    return fract((hash(a.y * 67.6417f) + hash(a.x * 54.3815f)) * 347.1158f);\n}\n\nfloat sqr(float x) {return x*x;}\nfloat fastdist(vec2 a, vec2 b) {\n    return sqr(b.x - a.x) + sqr(b.y - a.y);\n}\n\nvec3 rehash3(float x) {\n    return vec3(fract((x + 0.583f * 59.3829f) * 394.3485f), fract((x + 0.892f * 83.6621f) * 145.3871f), fract((x + 0.763f * 47.9397f) * 957.9732f));\n}\n\n// x : distance (w/o sqrt) / y : hash\nvec2 eval(float x, float y, int seed) {\n    vec3 p[9];\n    for (int _x = -1; _x < 2; _x++) for (int _y = -1; _y < 2; _y++) {\n        vec2 _p = vec2(floor(x), floor(y)) + vec2(_x, _y);\n        float h = hash2(_p + float(seed));\n        p[_x + 1 + (_y + 1) * 3] = rehash3(h + float(seed)) + vec3(_p,0);\n    }\n    float m = 999999.9999f, z = 0.0f;\n    for (int i = 0; i < 9; i++) {\n        float d = fastdist(vec2(x, y), p[i].xy);\n        if (d < m) { m = d; z = p[i].z; }\n    }\n    return vec2(m, z);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord / iResolution.y * 5.0;\n    \n    vec2 n = eval(uv.x,uv.y,0);\n    vec3 col = (1.0 - sqrt(n.x)) * rehash3(n.y);\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}