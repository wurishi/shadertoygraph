{"ver":"0.1","info":{"id":"MXK3Ry","date":"1717906782","viewed":94,"name":"try LIC","username":"yunhai","description":"try Line Integral Convolution.\nrefs https://www.shadertoy.com/view/MdGSDG","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["study"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Channel0 as img\n//Channel1 as vector field input\nconst int convStepNums=12;\nconst float itrStepPixLen=5.;\nconst float distanceAttenuation=0.99;\nconst float vectorCirculationRate=0.8;\n\nvec4 getCol( vec2 pos)\n{\n    vec4 c1=texture(iChannel0,pos/iR);\n    return c1;\n}\nfloat getD(vec2 pos)\n{\n    vec4 c1=texture(iChannel1,pos/iR);\n    return length(c1);//+.022*length(pos-.5*iR);\n}\nvec2 grad( vec2 pos,float delta)//vec field\n{\n    vec2 e=vec2(1.,0.)*delta;\n    float o=getD(pos);\n    return vec2(getD(pos+e.xy)-o,\n                getD(pos+e.yx)-o)/delta;\n}\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    O-=O;\n    vec2 pos=I;\n    float r=1.;\n    float acc=0.;\n    for(int i=0;i<convStepNums;i++)\n    {\n        O+=getCol(pos)*r;\n        vec2 dir=grad(pos,itrStepPixLen)+vec2(1)*0.001;\n        pos+=2.*normalize(mix(dir,dir.yx*vec2(1,-1),vectorCirculationRate));\n        acc+=r;\n        r*=distanceAttenuation;\n    }\n    O.xyz/=acc;//O*=0.81;\n    //O=texture(iChannel0,I/iR);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define iR iResolution.xy\n#define SS(a,b,t) smoothstep(a,b,t)\n#define P (1./iR.y)\n#define T (iTime)\n#define S(x,t) smoothstep(x,x-4.*P,t)\nconst float PI=3.14159265;\nconst float ATR=PI/180.;\n\nfloat remap(float a,float b,float x,float y,float t)\n{\n    return (t-a)/(b-a)*(y-x)+x;\n}\nmat2x2 mrot(float r)\n{\n    r*=ATR;\n    float c=cos(r),s=sin(r);\n    return mat2x2(c,s,-s,c);\n}\nvec2 randDir(vec2 id,float time)\n{\n    id+=vec2(3,181);\n    float t=time+PI*2.*fract(sin(83.*id.x)*(id.y)*(414.-id.y*5.));\n    return vec2(cos(t),sin(t));\n}\nfloat pnoise(vec2 uv,float iTime)\n{\n    vec2 id=floor(uv);uv=fract(uv);\n    vec2 of=vec2(1,0);\n    float t=iTime*.8;\n    float a=dot(uv-of.yy,randDir(id+of.yy,t)),\n          b=dot(uv-of.xy,randDir(id+of.xy,t)),\n          c=dot(uv-of.yx,randDir(id+of.yx,t)),\n          d=dot(uv-of.xx,randDir(id+of.xx,t));\n    uv=uv*uv*(vec2(3)-2.*uv);//f'(0)=f'(1)=0\n    a=mix(a,b,uv.x),b=mix(c,d,uv.x);      \n    return mix(a,b,uv.y)/1.4+.5;\n}","name":"Common","description":"","type":"common"}]}