{"ver":"0.1","info":{"id":"MfyGR1","date":"1722435202","viewed":82,"name":" music(小星星)","username":"shadertoyjiang","description":"music test","likes":6,"published":3,"flags":8,"usePreview":0,"tags":["musictest"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// 灵感来自(SnoopethDuckDuck)：https://www.shadertoy.com/view/dlycDt\n\nvoid mainImage( out vec4 O, in vec2 fragCoord )\n{\n    \n    vec2 u =  fragCoord/iResolution.xy;\n    for(int i;i++<17;)\n    {\n         //u+=tan(mod(exp(sin(u.x+u.y)),atan(u.x,u.y+u.x)))*abs(u.x-u.y)+.001;               \n         u+=tan(mod(sin(u.x+u.y),atan(u.x,u.y+u.x)))*sin(abs(u.x-u.y) )+.001;               \n    }\n    \n    O.xy=u  *.3 ;\n    O.z=0.;//1.-mod(u.x,u.y)*.2;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"\nfloat fayin(int key, float time)\n{\n        float y = 0.,\n              a = .01, // why ?\n              f = 1.,\n              //w=     2PI * frequency\n              w = 6.283185 * 13.75*exp2(float(key)/12.);\n        for(int i;i<8;i++)\n        {\n                y += a * (sin(w*f*time)  /*+cos(w*(f+1.0)*time*(1.+.001*a))*/   )*exp(-3.*time);\n                f=f+f+1.;\n                a *= .4;\n        }\n        //y+=.35*y*y*y;y+=.10*y*y*y;\n        y *= 1.+1.5*exp(-8.*time);\n        return y*100.;\n}\n\n\n\nvec2 mainSound(in int samp, float times)\n{\n        int key[]=int[](60,60,67,67,69,69,67,-1,-1,65,65,64,64,62,62,60,-1,-1,-1),ptr;\n        float time = float(samp)/44100.,\n              scale= .06, // 当前最小为32分音符\n              dtime,  ft,\n              y;\n        time = mod(time, 9.); // 歌曲循环时间\n        ptr = int(time/(scale*8.));\n        dtime = floor(time/(scale*8.))*(scale*8.);\n        if(key[ptr]>-1 )y+= fayin(key[ptr],time-dtime);return vec2(clamp(y,-1.,1.));\n        /*\n        for(int i;i<key.length();i++)\n        {\n                ft = float(i)*(scale*8.)-dtime;\n                ft = time-dtime+ft;\n                if(key[i]>-1 && ft>0.  && ft<scale*88888.)y += .1*fayin(key[i]-14,ft);\n        }*/\n        return vec2(y);\n}\n\n\n\n\n","name":"Sound","description":"","type":"sound"}]}