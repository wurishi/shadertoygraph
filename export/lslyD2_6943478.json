{"ver":"0.1","info":{"id":"lslyD2","date":"1490031631","viewed":497,"name":"Electric Field","username":"hhhzzzsss","description":"This shows the electric fields resulting from charged particles. The brightness represents intensity, and the colors indicate direction. The particles move around to make a cool show.","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["2d","field","physics","electrodynamics"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define TAU 6.2831853071\n\nvec2 uv;\n\nvec3 hsv2rgb(vec3 c) {\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid updateField(inout vec2 f, vec3 p) {\n    vec2 dispvec = uv-p.xy;\n    vec2 dir = normalize(dispvec);\n    float len = length(dispvec);\n    float mag = p.z/(len*len);\n    f += dir*mag;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tuv = fragCoord.xy / iResolution.xy;\n    uv = uv * 2.0 - 1.0;\n    uv.x *= iResolution.x / iResolution.y;\n    \n    vec2 field = vec2(0.0);\n    \n    vec3 p1 = vec3(sin(iTime*4.78904365), cos(iTime*5.142093847), -0.2);\n    vec3 p2 = vec3(sin(iTime*3.32252), cos(iTime*2.70329481), 0.2);\n    vec3 p3 = vec3(sin(iTime*1.23947), cos(iTime*0.6598234), -0.25);\n    vec3 p4 = vec3(sin(iTime*0.72783957), cos(iTime*1.2034242), 0.25);\n    vec3 p5 = vec3(sin(iTime*3.234058), cos(iTime*3.7583429), 0.1);\n    vec3 p6 = vec3(sin(iTime*2.82094583), cos(iTime*3.40534298), 0.1);\n    updateField(field, p1);\n    updateField(field, p2);\n    updateField(field, p3);\n    updateField(field, p4);\n    updateField(field, p5);\n    updateField(field, p6);\n    \n    float direction = atan(field.y, field.x)/TAU;\n    float intensity = 1.0-1.0/(1.0+length(field));\n    \n    vec3 col = hsv2rgb( vec3(direction, 1.5+0.5*sin(iTime)-intensity, intensity) );\n    col = pow(col, vec3(0.45));\n    \n\tfragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}