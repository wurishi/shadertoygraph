{"ver":"0.1","info":{"id":"clsSWN","date":"1674779610","viewed":109,"name":"weird fake 3D thing","username":"ianertson","description":"weird","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["fake3d","fake3d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3Rr","filepath":"/media/a/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","previewfilepath":"/media/ap/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define R iResolution.xy\n#define T (iTime)\n#define M_PI (3.1416)\n#define TAU (M_PI * 2.0)\n\n\nmat2 rot(float a) {\n    float c = cos(a);\n    float s = sin(a);\n    return mat2(c, s, -s, c);\n}\n\nfloat box(vec2 uv, vec2 pos, vec2 siz, out vec2 boxUv) {\n   uv.y = abs(uv.y+0.1);\n   pos *= rot(T);\n   uv *= rot(T);\n   uv += siz*0.5;\n   vec2 mi = pos;\n   vec2 ma = pos+siz;\n   if (uv.x < mi.x || uv.x > ma.x) return 0.0;\n   if (uv.y < mi.y || uv.y > ma.y) return 0.0;\n   boxUv = uv-mi;\n   return 1.;\n}\n\nvoid mainImage( out vec4 O, in vec2 fc )\n{\n    vec3 col = vec3(0.0);\n    vec2 uv = (fc-0.5*R.xy)/R.y;\n    vec2 boxUv = vec2(0.0);\n    vec3 rd = normalize(vec3(uv.xy, 1.0));\n    vec2 m = (iMouse.xy-0.5*R.xy)/R.y;\n    \n    mat2 view = mat2(1.);\n    if (iMouse.z > 0.05) {\n        view = rot(m.x*TAU);\n        \n    } else {\n        view = rot(T);\n    }\n    rd.xz *= view;\n    vec2 buv = uv / rd.z;\n\n    buv *= inverse(view);\n    col += box(buv, vec2(0.0, 0.2+(0.4*cos(T)*0.5)), vec2(0.5), boxUv);\n    col *= texture(iChannel0, boxUv).rgb;\n    \n    vec3 water = vec3(0.1, 0.7, 0.8)*max(0.0, 1.0 - smoothstep(0.5, 32.0, (uv.y*R.y)));\n    \n    col += max(0.0, dot(rd, vec3(0.0, -1.0, 0.0)))*(texture(iChannel1, (rd.zx / rd.y)).rgb + water);\n    \n    O = vec4(col, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}