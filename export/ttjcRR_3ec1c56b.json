{"ver":"0.1","info":{"id":"ttjcRR","date":"1593612979","viewed":89,"name":"escher Deformation","username":"sidchou","description":"explain how escherdeformation  code work from reinder's \"Escher's prentententoonstelling\"\nhttps://www.shadertoy.com/view/Mdf3zM","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["escher","transformation","reproduction","explain"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//escherDeformation based on @reinder's code\n//https://www.shadertoy.com/user/reinder\n//\n//https://www.shadertoy.com/view/Mdf3zM\n\n\nfloat t;\n\nfloat st = 0., zt = 0.;\n\nfloat deformationScale, zoom;\n\nvec2 escherDeformation( in vec2 uv ) {\n\t\n// http://www.ams.org/notices/200304/fea-escher.pdf\n// h(w) = w^((2πi + log scale)/(2πi))\n\t\n\tfloat lnr = log(length(uv));\n\tfloat th = atan( uv.y, uv.x )+(0.4/256.)*deformationScale;\n\tfloat sn = -log(deformationScale)*(1./(2.*3.1415926));\n\tfloat l = exp( lnr - th*sn ); \n\t\n\tvec2 ret = vec2( l );\n\t\n\tret.x *= cos( sn*lnr+th );\n\tret.y *= sin( sn*lnr+th );\n\t\t\n\treturn ret;\n}\n\nvoid init() {\n\tt = mod( t+11., 12. );\n\n\tif( t < 2. ) st = t;\n\telse if( t < 6. ) st = 2.;\n\telse if( t < 8. ) st = 8.-t;\n\t\tst*=4.;\n        st =\n\tt = mod( t+3., 12. );\n\t\t\n\tif( t < 2. ) zt = t;\n\telse if( t < 6. ) zt = 2.;\n\telse if( t < 8. ) zt = 8.-t;\n\t\tzt*=4.;\n\tdeformationScale = clamp(pow(2.0,st), 1., 256.);\n\tzoom = 2.8*clamp(pow(2.0,zt), 1.0, 256. );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n        t = mod(iTime, 12.);\n    t = 6.;\n\tinit();\n\n    // Normalized pixel coordinates (from 0 to 1)\n \tvec2 uv = fragCoord.xy / iResolution.xy;\n\t\n\tuv = 2.*uv - vec2(1.);\n    uv.x *= iResolution.x/ iResolution.y;\n\n    //uv *= 10.;\n    \n    uv = escherDeformation(uv);\n    float f;\n    f = fract(uv.x)*fract(uv.y);\n    \n    // Time varying pixel color\n    vec3 col = vec3(f);\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}