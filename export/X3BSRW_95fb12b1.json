{"ver":"0.1","info":{"id":"X3BSRW","date":"1710291143","viewed":105,"name":"Yet Another Triangle SDF","username":"Nazlbit","description":"Yet Another Triangle SDF.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["sdf","triangle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float cross2d(const vec2 a, const vec2 b)\n{\n    return a.x * b.y - a.y * b.x;\n}\n\nfloat triangle_sdf(const vec2 uv, const vec2 a, const vec2 b, const vec2 c)\n{\n    if(dot(uv-a, b-a) < 0. && dot(uv-a, c-a) < 0.)\n        return length(uv - a);\n    if(dot(uv-b, a-b) < 0. && dot(uv-b, c-b) < 0.)\n        return length(uv - b);\n    if(dot(uv-c, b-c) < 0. && dot(uv-c, a-c) < 0.)\n        return length(uv - c);\n    vec3 xyz = vec3(cross2d(normalize(b-a), uv-a), cross2d(normalize(c-b), uv-b), cross2d(normalize(a-c), uv-c)) * sign(cross2d(c-a, b-a));\n    return max(max(xyz.x, xyz.y), xyz.z);\n}\n\nvoid mainImage( out vec4 result, in vec2 coords )\n{\n    vec2 uv = (2.0 * coords - iResolution.xy) / iResolution.y;\n\n    vec2 a = vec2(-0.25) + vec2(cos(iTime), sin(iTime))*0.5;\n    vec2 b = vec2(0, 0.25) + vec2(cos(iTime*sqrt(2.)), sin(iTime*sqrt(2.)))*0.5;\n    vec2 c = vec2(0.25, -0.25) + vec2(cos(iTime*sqrt(3.)), sin(iTime*sqrt(3.)))*0.5;\n    float d = triangle_sdf(uv, a, b, c);\n\n    // same colorization that Inigo Quilez uses in his shaders\n    vec3 color = vec3(1.0) - sign(d) * vec3(0.1, 0.4, 0.7);\n    color *= 1.0 - exp(-4.0 * abs(d)); \n\tcolor *= 0.8 + 0.2 * cos(120.0 * d);\n    color = mix(color, vec3(1.0), 1.0 - smoothstep(0.0, 3.0, (abs(d) - 0.003) * iResolution.y));\n    if (iMouse.z > 0.0) {\n        vec2 mousePosition = (2.0 * iMouse.xy - iResolution.xy) / iResolution.y;\n        float d = triangle_sdf(mousePosition, a, b, c);\n        color = mix(color, vec3(1.0, 1.0, 0.0), 1.0 - smoothstep(0.0, 3.0, abs(length(uv - mousePosition) - abs(d)) * iResolution.y - 1.0));\n    }\n    result = vec4(color, 1.);\n}","name":"Image","description":"","type":"image"}]}