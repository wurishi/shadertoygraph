{"ver":"0.1","info":{"id":"wsfBWn","date":"1588009620","viewed":70,"name":"day-night","username":"Vokneelis","description":"move mouse cursor to move sun","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["daynightdawn"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float random(vec2 st){\n    return fract(sin(dot(st,vec2(127.1,311.7)))*43758.489);\n}\nvec3 smoothmix(vec3 a, vec3 b, float low, float high, float t) {\n    return mix(a, b, smoothstep(low, high, t));\n}\nfloat len2(vec2 v) {\n    return dot(v, v);\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 st = fragCoord/iResolution.xy;\n    st.x *= iResolution.x/iResolution.y;\n\n\tvec3 color = vec3(0.);\n    \n    // night\n    // stars\n    vec2 a_st = st * 50.428;\n    vec2 i_st = floor(a_st);\n    vec2 f_st = fract(a_st);\n    vec3 star_color = vec3( step(0.982, random(i_st)) * step(len2(f_st - vec2(.5)), 0.1)  );\n    \n    \n    // day\n    \n    float sun_height = 0.488;\n    sun_height = iMouse.y/iResolution.y * 1.2 - .2;\n    //sun_height = sin(iTime * .5) * .6 + .4;\n    \n    float day_bright = sun_height + 0.308;\n    \n    color += mix(vec3(0.318,0.307,0.820), vec3(0.160,0.195,0.295), st.y);\n    color *= day_bright;\n    \n    color = smoothmix(star_color, color, -0.2, 0.1, sun_height);\n    \n    vec2 delta = st - vec2(.5, sun_height);\n    \n    // sun halo\n    vec3 halo_color = smoothmix(vec3(0.995,0.179,0.198), color * 1.644, 0.1, 0.3, sun_height);\n    \n    vec2 delta_halo = delta;\n    delta_halo.x *= clamp(pow(sun_height + .5, 2.0), .1, 1.);\n    \n    color = smoothmix(halo_color, color, 0.000, mix(.1, 0.01, sun_height), len2(delta_halo) );\n    \n    // sun\n    vec3 sun_color = smoothmix(vec3(0.982,0.995,0.175), vec3(0.995,0.992,0.683), 0.1, 0.3, sun_height);\n    color = smoothmix(sun_color, color, 0.008, 0.015, len2(delta));\n    \n\n    // Output to screen\n    fragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}]}