{"ver":"0.1","info":{"id":"msScR3","date":"1687963606","viewed":72,"name":"The real wall","username":"Xecutor","description":"First time trying buffers. If anyone can explain me strange horizontal stripes and why sometimes the image is different when paused/unpaused, I would be grateful.","likes":5,"published":1,"flags":32,"usePreview":0,"tags":["wall","filter","random","scrolling"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    ivec2 uv = ivec2(int(fragCoord.x), int(fragCoord.y));\n    vec3 col = texelFetch(iChannel0, uv, 0).rgb;\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float hash21(vec2 p)\n{\n    p = fract(p*vec2(13.34, 456.21));\n    p += dot(p, p+45.32);\n    return fract(p.x*p.y);\n}\n\nfloat unrealhash(vec2 p) {\n    vec2 pos = mod(p-.5, 128.) + vec2(-64.340622, -72.465622);\n    return fract(dot(pos.xyx * pos.xyy, vec3(20.390625, 60.703125, 2.4281209)));\n}\n\nfloat rnd(vec2 p) {\n    return (abs(hash21(p))+abs(unrealhash(p))) / 2.0;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    if(int(fragCoord.y)==0 || iFrame == 0) {\n        int x = int(fragCoord.x);\n        int y = 0;\n        int w = int(iResolution.x);\n        int c = int(texelFetch(iChannel0, ivec2(x,y),0).r * 255.0) * 2;\n        c += int(texelFetch(iChannel0, ivec2((x+1)%w,y), 0).r*256.0);\n        c += int(texelFetch(iChannel0, ivec2((x-1+w)%w,y), 0).r*256.0);\n        c /= 16;\n        c += iFrame == 0 ? int(rnd(fragCoord) * 63.0) : int(rnd(fragCoord+vec2(sin(iTime),iTime))*3.77);\n        if(c>0)c--;\n        c = clamp(c * 4, 0, 255);\n        \n        float q = float(c) / 255.0;\n        fragColor = vec4(q,q, q, 1.0);\n    } else {\n        ivec2 v = ivec2(int(fragCoord.x),int(fragCoord.y)-1);\n        fragColor = texelFetch(iChannel0, v,0);\n    }\n}","name":"Buffer A","description":"","type":"buffer"}]}