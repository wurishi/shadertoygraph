{"ver":"0.1","info":{"id":"3lfBR8","date":"1595903473","viewed":595,"name":"Double slit simulation","username":"Pidhorskyi","description":"Double slit experiment simulation using SchrÃ¶dinger's quantum mechanical wave equation.","likes":18,"published":3,"flags":32,"usePreview":0,"tags":["simulation","quantum","waveequation","schrdinger"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define s_Im_pdt iChannel0\n#define s_Re_c iChannel1\n\nvec3 lab2xyz( vec3 c ) {\n    float fy = ( c.x + 16.0 ) / 116.0;\n    float fx = c.y / 500.0 + fy;\n    float fz = fy - c.z / 200.0;\n    return vec3(\n         95.047 * (( fx > 0.206897 ) ? fx * fx * fx : ( fx - 16.0 / 116.0 ) / 7.787),\n        100.000 * (( fy > 0.206897 ) ? fy * fy * fy : ( fy - 16.0 / 116.0 ) / 7.787),\n        108.883 * (( fz > 0.206897 ) ? fz * fz * fz : ( fz - 16.0 / 116.0 ) / 7.787)\n    );\n}\n\nvec3 xyz2rgb(vec3 c){\n\tconst mat3 mat = mat3(\n        3.2406, -1.5372, -0.4986,\n        -0.9689, 1.8758, 0.0415,\n        0.0557, -0.2040, 1.0570\n\t);\n    vec3 v = (c / 100.0) * mat;\n    vec3 r;\n    r.x = ( v.r > 0.0031308 ) ? (( 1.055 * pow( v.r, ( 1.0 / 2.4 ))) - 0.055 ) : 12.92 * v.r;\n    r.y = ( v.g > 0.0031308 ) ? (( 1.055 * pow( v.g, ( 1.0 / 2.4 ))) - 0.055 ) : 12.92 * v.g;\n    r.z = ( v.b > 0.0031308 ) ? (( 1.055 * pow( v.b, ( 1.0 / 2.4 ))) - 0.055 ) : 12.92 * v.b;\n    return r;\n}\n\nvec3 lab2rgb( vec3 c ) {\n    return xyz2rgb( lab2xyz( vec3(100.0 * c.x, 2.0 * 127.0 * (c.y - 0.5), 2.0 * 127.0 * (c.z - 0.5)) ) );\n}\n\t\t\nvoid mainImage(out vec4 outColor, vec2 uv)\n{\n    uv /= iResolution.xy;\n\tfloat Im_mdt = texture(s_Im_pdt, uv).x;\n\tfloat Re_c = texture(s_Re_c, uv).x;\n\t\t\t\t\n    vec2 pos = uv * vec2(1.0, iResolution.y / iResolution.x);\n    pos = 2.0 * pos - vec2(1.0, iResolution.y / iResolution.x);\n\t\t\t\t\n\tvec3 phase = (vec3(0.5, 0.0, 0.5) + vec3(Re_c, 0, Im_mdt) * 0.5);\n\tvec3 module = vec3(length(vec2(Re_c, Im_mdt)));\n    float U = Potential(pos);\n    \n\t//outColor = vec4( mix(phase, module, u_phaseOrModule) + vec3(U),  1.0); \n    outColor = vec4(lab2rgb(vec3(module.x, phase.x, phase.z)),  1.0); \n    outColor += Potential(pos);\n}\n                    \n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define dt  (0.10 * dx.x * dx.x)\n\nconst float Kx = 500.0;\nconst float Ky = 0.0;\nconst float omega = 0.1;\nconst float cx = -0.7;\nconst float cy = 0.0;\n\nfloat Potential(vec2 pos)\n{\n\treturn mix(0., 1.e6, float(abs(pos.x - 0.0) < 0.01)) * float(abs(pos.y - 0.1) > 0.01 && abs(pos.y + 0.1) > 0.01); \n}\n\nvec2 Psi0(vec2 pos)\n{\n    float s = pow(pos.x-cx,2.0)+pow(pos.y-cy,2.0);\n    float o = exp(-s / 2.0 / pow(omega, 2.0) ) / omega / 15.0;\n    float im = sin(Kx*pos.x+Ky*pos.y);\n    float re = cos(Kx*pos.x+Ky*pos.y);\n\treturn o * vec2(re, im);\n}\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define s_Im_mdt iChannel0\n#define s_Re_c iChannel1\n\t\t\t\nvoid mainImage(out vec4 outColor, vec2 uv)\n{\n    uv /= iResolution.xy;\n\tvec2 dx = vec2(1.0 / iResolution.x, 0.0);\n\tvec2 dy = vec2(0.0, 1.0 / iResolution.x);\n\n    vec2 pos = uv * vec2(1.0, iResolution.y / iResolution.x);\n    pos = 2.0 * pos - vec2(1.0, iResolution.y / iResolution.x);\n\tfloat U = Potential(pos);\n\t\t\t\t\n\tfloat ImPsi_mdt   = texture(s_Im_mdt, uv).x;\n\tfloat RePsi_c     = texture(s_Re_c, uv).x;\n\tfloat RePsi_c_pdx = texture(s_Re_c, uv + dx).x;\n\tfloat RePsi_c_mdx = texture(s_Re_c, uv - dx).x;\n\tfloat RePsi_c_pdy = texture(s_Re_c, uv + dy).x;\n\tfloat RePsi_c_mdy = texture(s_Re_c, uv - dy).x;\n\n\tfloat ImPsi_pdt = \n\n\t(\n\t\t0.5 * (\n\n\t\t\t(RePsi_c_pdx + RePsi_c_mdx - 2.0 * RePsi_c) /dx.x / dx.x +\n\t\t\t(RePsi_c_pdy + RePsi_c_mdy - 2.0 * RePsi_c) /dy.y / dy.y\n\n\t\t)  - U * RePsi_c\n\n\t) * 2.0*dt + ImPsi_mdt;\n\n    if (iFrame < 1)\n    {\n        outColor = vec4(Psi0(pos).y, 0, 0, 0);\n    }\n    else\n    {\n        outColor = vec4(ImPsi_pdt, 0, 0, 0);\n    }\n}\n","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"#define s_Im_pdt iChannel0\n#define s_Re_c iChannel1\n\t\t\t\nvoid mainImage(out vec4 outColor, vec2 uv)\n{\n    uv /= iResolution.xy;\n\tvec2 dx = vec2(1.0 / iResolution.x, 0.0);\n\tvec2 dy = vec2(0.0, 1.0 / iResolution.x);\n\t\t\t\t\n    vec2 pos = uv * vec2(1.0, iResolution.y / iResolution.x);\n    pos = 2.0 * pos - vec2(1.0, iResolution.y / iResolution.x);\n\tfloat U = Potential(pos);\n\n\tfloat RePsi_c = texture(s_Re_c, uv).x;\n\tfloat ImPsi_pdt = texture(s_Im_pdt, uv).x;\n\tfloat ImPsi_pdt_pdx = texture(s_Im_pdt, uv + dx).x;\n\tfloat ImPsi_pdt_mdx = texture(s_Im_pdt, uv - dx).x;\n\tfloat ImPsi_pdt_pdy = texture(s_Im_pdt, uv + dy).x;\n\tfloat ImPsi_pdt_mdy = texture(s_Im_pdt, uv - dy).x;\n\n\tfloat RePsi_ppdt = \n\n\t(\n\t\t-0.5 * (\n\n\t\t\t(ImPsi_pdt_pdx + ImPsi_pdt_mdx - 2.0 * ImPsi_pdt)/ dx.x/ dx.x +\n\t\t\t(ImPsi_pdt_pdy + ImPsi_pdt_mdy - 2.0 * ImPsi_pdt)/ dy.y/ dy.y\n\n\t\t)  + U * ImPsi_pdt\n\n\t) * 2.0*dt + RePsi_c;\n\n    if (iFrame < 1)\n    {\n        outColor = vec4(Psi0(pos).x, 0, 0, 0);\n    }\n    else\n    {\n        outColor = vec4(RePsi_ppdt, 0, 0, 0);\n    }\n}\n","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"#define s_Im_mdt iChannel0\n#define s_Re_c iChannel1\n\t\t\t\nvoid mainImage(out vec4 outColor, vec2 uv)\n{\n    uv /= iResolution.xy;\n\tvec2 dx = vec2(1.0 / iResolution.x, 0.0);\n\tvec2 dy = vec2(0.0, 1.0 / iResolution.x);\n\t\t\t\t\n    vec2 pos = uv * vec2(1.0, iResolution.y / iResolution.x);\n    pos = 2.0 * pos - vec2(1.0, iResolution.y / iResolution.x);\n\tfloat U = Potential(pos);\n\t\t\t\t\n\tfloat ImPsi_mdt   = texture(s_Im_mdt, uv).x;\n\tfloat RePsi_c     = texture(s_Re_c, uv).x;\n\tfloat RePsi_c_pdx = texture(s_Re_c, uv + dx).x;\n\tfloat RePsi_c_mdx = texture(s_Re_c, uv - dx).x;\n\tfloat RePsi_c_pdy = texture(s_Re_c, uv + dy).x;\n\tfloat RePsi_c_mdy = texture(s_Re_c, uv - dy).x;\n\n\tfloat ImPsi_pdt = \n\n\t(\n\t\t0.5 * (\n\n\t\t\t(RePsi_c_pdx + RePsi_c_mdx - 2.0 * RePsi_c) /dx.x / dx.x +\n\t\t\t(RePsi_c_pdy + RePsi_c_mdy - 2.0 * RePsi_c) /dy.y / dy.y\n\n\t\t)  - U * RePsi_c\n\n\t) * 2.0*dt + ImPsi_mdt;\n\n    if (iFrame < 1)\n    {\n        outColor = vec4(Psi0(pos).y, 0, 0, 0);\n    }\n    else\n    {\n        outColor = vec4(ImPsi_pdt, 0, 0, 0);\n    }\n}\n","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"#define s_Im_pdt iChannel0\n#define s_Re_c iChannel1\n\t\t\t\nvoid mainImage(out vec4 outColor, vec2 uv)\n{\n    uv /= iResolution.xy;\n\tvec2 dx = vec2(1.0 / iResolution.x, 0.0);\n\tvec2 dy = vec2(0.0, 1.0 / iResolution.x);\n\t\t\t\t\n    vec2 pos = uv * vec2(1.0, iResolution.y / iResolution.x);\n    pos = 2.0 * pos - vec2(1.0, iResolution.y / iResolution.x);\n\tfloat U = Potential(pos);\n\n\tfloat RePsi_c = texture(s_Re_c, uv).x;\n\tfloat ImPsi_pdt = texture(s_Im_pdt, uv).x;\n\tfloat ImPsi_pdt_pdx = texture(s_Im_pdt, uv + dx).x;\n\tfloat ImPsi_pdt_mdx = texture(s_Im_pdt, uv - dx).x;\n\tfloat ImPsi_pdt_pdy = texture(s_Im_pdt, uv + dy).x;\n\tfloat ImPsi_pdt_mdy = texture(s_Im_pdt, uv - dy).x;\n\n\tfloat RePsi_ppdt = \n\n\t(\n\t\t-0.5 * (\n\n\t\t\t(ImPsi_pdt_pdx + ImPsi_pdt_mdx - 2.0 * ImPsi_pdt)/ dx.x/ dx.x +\n\t\t\t(ImPsi_pdt_pdy + ImPsi_pdt_mdy - 2.0 * ImPsi_pdt)/ dy.y/ dy.y\n\n\t\t)  + U * ImPsi_pdt\n\n\t) * 2.0*dt + RePsi_c;\n\n    if (iFrame < 1)\n    {\n        outColor = vec4(Psi0(pos).x, 0, 0, 0);\n    }\n    else\n    {\n        outColor = vec4(RePsi_ppdt, 0, 0, 0);\n    }\n}\n","name":"Buffer D","description":"","type":"buffer"}]}