{"ver":"0.1","info":{"id":"mssfzN","date":"1688554316","viewed":54,"name":"learning exercise 1 - 05072023","username":"foxinabox","description":"learning exercise","likes":1,"published":1,"flags":8,"usePreview":0,"tags":["fractal","music","practice"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 palette (float t)\n{\n    vec3 a = vec3(0.5, 0.5, 0.5);\n    vec3 b = vec3(0.5, 0.5, 0.5);\n    vec3 c = vec3(1.0, 1.0, 1.0);\n    vec3 d = vec3(0.0, 0.3, 0.6);\n    \n    return a + b*cos(6.28318*(c*t+d));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;\n    vec2 uv0 = uv;\n    \n    vec3 finalColor = vec3(0.0);\n    \n    for(float i = 0.0; i < 4.0; i++)\n    {    \n        uv = fract(uv * 1.5) -0.5;\n\n        float d = length(uv) * exp(-length(uv0));\n\n        vec3 col = palette(length(uv0) + i * 0.4 + iTime * 0.4);\n\n        d = sin(d * 8. + iTime)/8.;\n        d = abs(d);\n\n        d = pow(0.01 / d, 1.2);\n\n        finalColor += col * d;\n    }\n    \n    fragColor = vec4(finalColor + iTime * 0.1, 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define TWOPI 6.2831\n\nfloat sinPluck (float f, float t)\n{\n    return sin(TWOPI*f*t)*exp(-3.0*t) * 0.1+sin(TWOPI*f*20.*t)*exp(-20.0*t) * 0.05;\n}\n\nfloat sqrPluck (float f, float t)\n{\n    return sign(sin(TWOPI*f*t))*exp(-3.0*t) * 0.1;\n}\n\nfloat sawPluck (float f, float t)\n{\n    return (mod(t*f,1.0)*2.0-1.0)*exp(-3.0*t) * 0.1;\n}\n\nfloat FM(float fc, float fm, float iom, float t)\n{\n    return sin(TWOPI*fc*t + iom*sin(TWOPI*fm*t));\n}\n\nvec2 fmPluck (float f, float t)\n{\n    float fc = f; //carrier\n    float fm = f*3.; //modulation\n    float iom = 1.; //index of m.\n    \n    float env = exp(-2.0*t) * 0.1;\n    vec2 sig = vec2(0.0);\n    \n    sig.x += FM(f+1.,f+1.,1.,t) * env;\n    sig.y += FM(f-1.,f-1.,1.,t) * env;\n    sig += FM(f,f,15.,t) * exp(-20.0*t) * 0.03;;\n    \n    return sig;\n}\n\nvec2 pan (float pos)\n{\n    vec2 e = vec2(1.-pos,1.+pos);\n    return normalize(e);\n}\n\n\nfloat interval(float semitones)\n{\n    return pow(2., semitones/12.);\n}\n\nconst float notes [] = float[6](5.,2.,6.,3.,6.,5.);\nvec2 jingle(float t)\n{\n    vec2 sig = vec2(0.0);\n    for(int i = 0; i < 6; i++)\n    {\n        float nn = notes[i];\n        float f1 = 440.*interval(nn);\n        float t0i = 0.25*float(i);\n        float ti = mod(t-t0i, 2.);\n        float pos = float((i+1)%3) + 1.;\n        \n        sig += fmPluck(f1,ti) * pan(pos);\n    }\n    return sig;\n}\n\n\nvec2 mainSound( int samp, float t )\n{\n    vec2 sig = vec2(0.0); \n    sig += sinPluck(110.,mod(t, 1.)) * 0.8;\n    sig += sinPluck(220.,mod(t+1., 2.)) * 0.5;\n    sig += sawPluck(220.,mod(t+1., 0.25)) * 0.3;\n    sig += jingle(t) - (t*0.15);\n    \n    return sig;\n}","name":"Sound","description":"","type":"sound"}]}