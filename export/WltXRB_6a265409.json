{"ver":"0.1","info":{"id":"WltXRB","date":"1641876783","viewed":125,"name":"stick guyyry34","username":"celyk","description":"old. use arrow keys to move","likes":5,"published":1,"flags":48,"usePreview":0,"tags":["qoioiushs"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 O,vec2 U){\n\tO=texture(iChannel0,U/iResolution.xy);\n    /*\n        vec2 t0=lineX(vec4(C,t),vec4(400.5,0.5,400.5,200.5),bug0);\n        vec2 t1=lineX(vec4(C,t),vec4(130.5,0.5,130.5,200.5),bug1);*/\n    O.z+=step(line(U,vec2(401,101),vec2(401,201)),1.);\n    O.xy+=step(line(U,vec2(131,101),vec2(131,201)),1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define T2(C) texture(iChannel2,(C)/vec2(256.,3.))\nvec2 arrowkey(){return vec2(T2(vec2(39,0)).x-T2(vec2(37,0)).x,T2(vec2(38,0)).x-T2(vec2(40,0)).x);}\n\nfloat isInside(vec2 p,vec2 c){\t//store values\n    vec2 d=abs(p-0.5-c)-0.5001;\n    return -max(d.x,d.y);\n}\nvec4 loadValue(vec2 re){\t//get stored values\n    return texture(iChannel0,(0.5+re)/iChannelResolution[0].xy,-100.0);\n}\nvoid mainImage(out vec4 O,vec2 U){\n    //current coordinates\n    vec2 C=U-.5;\n    \n    //initial state\n    if(iFrame<1){\n        U-=20.;       \n        U.x=abs(U.x);\n        \n\t\tO+=step( line(U,vec2(0,0),vec2(5,-15)) ,1.);\n        O+=step( line(U,vec2(0,0),vec2(0,8)) ,1.);\n        O+=step( line(U,vec2(0,8),vec2(7,1)) ,1.);\n        \n        O+=step( length(U-vec2(0,12)) ,3.);\n        \n        return;\n    } \n    //direction\n    vec2 dir=arrowkey();\n    \n    if(isInside(U,C)>0.){\n        vec2 t=C-dir*4.;\n        bool bug0,bug1;\n        vec2 t0=lineX(vec4(C,t),vec4(400.5,100.5,400.5,200.5),bug0);\n        vec2 t1=lineX(vec4(C,t),vec4(130.5,100.5,130.5,200.5),bug1);\n        float d=length(t0-t);\n        if(bug0){t+=vec2(-270.,0);}\n        if(bug1){t+=vec2(270.,0);}\n        t=mod(t,iResolution.xy);\n        O=loadValue(t);\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"vec2 lineX(vec4 a,vec4 b,out bool bug){\n    vec2 adir=normalize(a.zw-a.xy);\n    vec2 bdir=normalize(b.zw-b.xy);\n    \n    float d=dot(a.xy-b.xy,bdir);\n    \n    //a.xy projected onto plane\n    vec2 p=b.xy+bdir*d;\n    \n    //closest distance to plane\n    float cdP=length(p-a.xy);\n    \n    vec2 cdir=normalize(p-a.xy);\n    //adir projected onto closest distance line\n    float d0=dot(adir,cdir);\n    \n    float dP=cdP/d0;\n    \n    vec2 p0=a.xy+adir*dP;\n    \n    //is p0 on both lines?\n    float atest=dot(p0-a.xy,adir)/length(a.zw-a.xy);\n    float btest=dot(p0-b.xy,bdir)/length(b.zw-b.xy);\n    \n    if(abs(atest*2.-1.)<1.&&abs(btest*2.-1.)<1.){\n    \tbug=true;\n    }\n    //if()\n\treturn p0;\n}\nfloat line(vec2 p,vec2 a,vec2 b){\n    return length(-clamp(dot(p-=a,b-=a)/dot(b,b),0.,1.)*b+p);\n}","name":"Common","description":"","type":"common"}]}