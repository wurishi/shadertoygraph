{"ver":"0.1","info":{"id":"7t2cRV","date":"1649967626","viewed":111,"name":".ref gamma","username":"xrx","description":".","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["color","gamma","calibration"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float GAMMA = 2.25 ; // calibrated to 50% gray (surface avg)\n//uniformity uncalibrated monitor could have Â±0.1 variation across surface\n\nstruct Prec {int up, dn;};\n\nvec4 print_char(vec2 p, int c) {\n    if (p.x<0.||p.y<0.||p.x>1.||p.y>1.) return vec4(0);\n    return texture(iChannel0, p/16.+fract(vec2(c,15-c/16)/16.));\n}\n\nvec4 print_num(vec2 p, Prec prec, float x0) {\n    float base = 10.;\n    float x = abs(x0);\n    \n    vec4 v= vec4(0);\n    if (x0<.0) {v+= print_char(p+vec2(float(prec.up-1)*.5,0), 45); }\n    p.x-= .5;\n    \n    for (int ii = 0; ii<prec.up; ii++) { \n        v+= print_char(p+vec2(float(ii)*.5,0), 48+int(mod(x,10.)) ); //p.x= p.x + .5;\n        x/=10.;\n    }\n    p.x-= .5;\n    \n    {v+= print_char(p, 46); p.x-= .5;}\n    x = abs(x0);\n    for (int ii = 0; ii>-prec.dn; ii--) { \n        v+= print_char(p, 48+int(fract(x)*10.) ); p.x-= .5;\n        x*=10.;\n    }\n    return v;\n}\n\nbool checker(ivec2 p) {return (p.x+p.y)%2>0; } // dont use float mod() ops, due to aliasing\n\nvoid mainImage(out vec4 C, vec2 p){\n    vec2 r = iResolution.xy;\n    \n    if (iMouse.xy!=vec2(0,0)) GAMMA = mix(.5,3.002,iMouse.x/r.x);\n\n    C.r = checker(ivec2(p)>>5)?float(checker(ivec2(p))):.5;\n    \n    float z = print_num((p/r.xy-.5)*32.+.5, Prec(1,3), GAMMA).r;\n    if(z>.5) C.r = z; // no add, filter only, or box\n\n    C.r = pow(C.r,1./GAMMA);\n    C = vec4(C.r);\n}","name":"Image","description":"","type":"image"}]}