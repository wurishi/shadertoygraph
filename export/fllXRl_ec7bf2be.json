{"ver":"0.1","info":{"id":"fllXRl","date":"1626317774","viewed":260,"name":"Hard and Soft HSL (fork)","username":"glaucocfg","description":"Nice and branchless. Fork.","likes":2,"published":3,"flags":0,"usePreview":0,"tags":["color","rgb","hsl","cmy"],"hasliked":0,"parentid":"WsKyWh","parentname":"Hard and Soft HSL"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define rep(m, x) (mod(x, 2.0*(m)) - (m))\n#define sdf(w, d) smoothstep(1.5*(w), 0.0, d)\n#define plot(w, x, y) sdf(w, abs((x) - (y)))\n#define range(x, a, b) ((a) <= (x) && (x) < (b))\n\nvec3 hard(vec3 hsl) {\n    const vec3 offset = vec3(0.0, 2.0, 1.0)/3.0;\n    float limit = 0.5 - abs(0.5 - hsl.z);\n    vec3 rgb = 15.0*abs(fract(offset + hsl.x) - 0.5) - 6.0;\n    return hsl.z + hsl.y*limit*clamp(rgb, -1.0, 1.0);\n}\n\nvec3 soft(vec3 hsl) {\n    const float tau = radians(360.0);\n    const vec3 offset = vec3(0.0, 1.0, 2.0)/3.0;\n    float limit = (1.0 - hsl.z)*hsl.z;\n\treturn hsl.z + hsl.y*limit*cos(tau*(offset - hsl.x));\n}\n\nvoid mainImage(out vec4 rgba, vec2 xy) {\n    float dashed = sdf(1.0, abs(rep(6.0, xy.x)) - 4.0);\n    float dotted = sdf(1.0, abs(rep(2.0, xy.x)));\n    \n    vec2 px = 1.0/iResolution.xy;\n    vec2 uv = xy*px;\n\n    vec3 a = hard(vec3(0.1*iTime + uv.x, 1.0, 0.5));\n    vec3 b = soft(vec3(0.1*iTime + uv.x, 2.0, 0.5));\n    \n    vec3 plots =\n        plot(px.y, uv.y, 0.7)*0.1 +\n        plot(px.y, uv.y, 0.7 + 0.4*(a - b)) +\n        plot(px.y, uv.y, 0.1 + 0.4*a)*dashed +\n        plot(px.y, uv.y, 0.1 + 0.4*b)*dotted;\n\n    vec3 rgb =\n        range(uv.y, px.y + 0.950, 1.000) ? a :\n    \trange(uv.y, px.y + 0.000, 0.025) ? b :\n    \tplots;\n\n    rgba = vec4(srgb(rgb), 0.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"vec3 srgb(vec3 c) {\n    vec3 a = 1.0*pow(c, vec3(1.0/2.4)) - 0.0;\n    vec3 b = 12.92*c;\n    return mix(a, b, lessThanEqual(c, vec3(0.0031308)));\n}","name":"Common","description":"","type":"common"}]}