{"ver":"0.1","info":{"id":"McG3RK","date":"1713059129","viewed":50,"name":"Warm heart","username":"smarchevsky","description":"Heart using SDF, smooth floor function, simple palette, and a lot of love :)","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["palette","smoothfloor"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define saturate(x) clamp(x, 0., 1.)\nfloat plainstep(float a, float b, float t) { return saturate((t - a) / (b - a)); }\n\n// smooth fract from: https://www.shadertoy.com/view/clB3zc\nfloat sfract(float x){ float fw = saturate(fwidth(x)); return min(fract(x) / (1. - fw), fract(-x) / fw); }\nfloat sfloor(float x){ return max(floor(x), x - sfract(x)); }\n\n\n// SDF heart from iq: https://www.shadertoy.com/view/3tyBzV\nfloat dot2( in vec2 v ) { return dot(v,v); }\nfloat sdHeart( in vec2 p ) {\n    p.x = abs(p.x);\n    if (p.y + p.x > 1.0) return sqrt(dot2(p-vec2(0.25,0.75))) - sqrt(2.0)/4.0;\n    return sqrt(min(dot2(p-vec2(0.00,1.00)), dot2(p-0.5*max(p.x+p.y,0.0)))) * sign(p.x-p.y);\n}\n\nvec3 palette(float t, vec3 scale, vec3 offset) {\n    vec3 x = 0.5 + 0.5 * cos(6.28318 * (scale * t + offset));\n    x=1.-x; x*=x; x=1.-x;\n    return x; }\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 p = fragCoord.xy / iResolution.xy;\n    //p.x *= 2.;\n    p = p * 2. - vec2(1.0, 0.5);\n    p.x *= iResolution.x / iResolution.y;\n\n    float div = 7.;\n\n    float heartBeat = 0.;\n    heartBeat = pow(1. - abs(abs(sin(iTime * 3.14159) * 2.) - 1.), 2.) *.01;    \n    float x = saturate(sdHeart(p) + heartBeat + 1./div);\n\n    x = sfloor(x*div)/div; // smooth floor gradient\n\n    x = mix(x, smoothstep(0., 1., x), 0.5);\n\n    vec3 col = palette( x * 0.35 + -.05, vec3(1.0,1.0,1.0),vec3(0.0,0.33,0.67) );\n    col = normalize(col);\n\n\tfragColor = vec4( col, 1.0 );\n}","name":"Image","description":"","type":"image"}]}