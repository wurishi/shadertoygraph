{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"\nvec2 map(float t){\n    //from iq's shader https://www.shadertoy.com/view/Xlf3zl\n    return 0.85*cos( t + vec2(0.0,1.0) )*(0.6+0.4*cos(t*7.0+vec2(0.0,1.0)));\n}\n\n\n\nvec2 arcdist(vec2 p, vec2 a, vec2 b, vec2 c) {\n    \n    // normals of perpendicular bisector of segment ab, bc\n\tvec2 nab = b-a;\n\tvec2 nbc = c-b;\n\t\n    // homogeneous line equations of of perpendicular bisectors\n\tvec3 l1 = vec3(nab, -dot(nab, 0.5*(a+b)));\n\tvec3 l2 = vec3(nbc, -dot(nbc, 0.5*(b+c)));\n\t\n    // cross product of homogeneous lines gives point of intersection\n\tvec3 pi = cross(l1, l2);\n    \n    // project to cartesian coords by perspective division\n\tvec2 ctr = pi.xy/pi.z; \n    \n    // get circle radius\n    float r = length(b-ctr);\n    \n    // get distance to arc\n    p -= ctr;\n    a -= ctr;\n    b -= ctr;\n    c -= ctr;\n    \n    // clamp distance outside of angles we care about\n    vec2 ap = vec2(-a.y, a.x);\n    vec2 cp = vec2(-c.y, c.x);    \n    \n    vec2 pc = p;\n    if (dot(ap,p)*dot(ap,b) < 0.) {\n        pc = a;\n    } else if (dot(cp,p)*dot(cp,b) < 0.) {\n        pc = b;\n    } else {\n        pc = p * r / length(p);\n    }\n    \n\treturn vec2(r, length(p-pc));\n    \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    \n\tvec2 p=(2.0*fragCoord.xy-iResolution.xy)/iResolution.y;\n\t\n    float t0 = 0.0; \n    float t1 = 0.1;\n     \n    vec2 m0 = map(t0);\n    vec2 m1 = map(t1);\n    float d = 100.;\n    \n    float r = 1.0;\n\n    for (int k=0; k<60; ++k) {\n        float t2 = t1 + 0.12;\n        vec2 m2 = map(t2);\n        vec2 rd = arcdist(p, m0, m1, m2);\n        d = min(d, rd.y);\n        r = rd.x;\n        m0 = m1; t0 = t1;\n        m1 = m2; t1 = t2;\n    }\n    \n    d = smoothstep(0.0, 0.01, d);\n    vec3 col = vec3(1.,d,d);\n    \n\tfragColor = vec4(col,1.0);\n    \n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"llfGzs","date":"1424293775","viewed":221,"name":"Parametric piecewise arcs","username":"mattz","description":"approximation of iq's parametric shape as piecewise arcs.\nprobably useless.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["test"],"hasliked":0,"parentid":"","parentname":""}}