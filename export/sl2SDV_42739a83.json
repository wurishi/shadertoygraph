{"ver":"0.1","info":{"id":"sl2SDV","date":"1628709130","viewed":120,"name":"Neon sdf warping","username":"archrona","description":"Playing around with 2D SDFs and space warping","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["sdf","neon"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define PI 3.1415926535897\n#define DD 0.001\n\nvec4 circle(vec2 p, float radius, vec3 color) {\n    return vec4(length(p) - radius, color);\n}\n\nvec4 subtract(vec4 d1, vec4 d2) {\n    return d1.x > -d2.x ? d1 : vec4(-d2.x, d2.yzw);\n}\n\nvec4 smooth_union(float k, vec4 a, vec4 b)\n{\n    float diff = abs(a.x - b.x);\n    float h = max(k - diff, 0.0) / k;\n    if (a.x < b.x) {\n        return vec4(a.x - h*h*h*k/6.0, b.yzw * (h/2.0) + a.yzw * (1.0-h/2.0));\n    } else {\n        return vec4(b.x - h*h*h*k/6.0, b.yzw * (1.0-h/2.0) + a.yzw * (h/2.0));\n    }\n}\n\nvec4 map(vec2 p) {\n\n    vec4 sdf = vec4(1e5, 0, 0, 0);\n\n    for (float th = 0.0; th < 6.28; th += PI / 16.0) {\n        float r = 1.3 + 0.7 * sin(6.0 * th + iTime);\n        float rc = 0.24 + 0.07 * cos(3.0 * th + 3.0 * iTime);\n        sdf = smooth_union(clamp(0.5 + 1.0 * pow(sin(iTime), 3.0), 0.001, 1.0), sdf, \n            circle(\n                p - r * vec2(cos(th), sin(th)),\n                rc,\n                vec3(0.6 + 0.4 * sin(3.0 * th + 2.7), 0.0, 0.6 + 0.4 * sin(3.0 * th))\n            )\n        );\n    }\n\n    sdf = subtract(sdf, circle(p - vec2(cos(-iTime), sin(-iTime)) * 0.1, 0.6, vec3(0.4, 1.0, 0.7)));\n\n    return sdf;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) \n{\n    vec2 aspectRatio = vec2(iResolution.x / iResolution.y, 1.0);\n    vec2 uv = aspectRatio * (fragCoord.xy / iResolution.xy - 0.5) * 4.0;\n    \n\tvec4 sdf = map(uv);\n\n    vec3 color;\n\n    if (sdf.x > 0.0) {\n        float angle = atan(uv.y, uv.x);\n        float stripe = clamp(pow(0.5 - sdf.x * 0.4, 3.0), 0.0, 0.4) * clamp(50.0 * sin(angle * 16.0 + iTime + sdf.x * 10.0) - 20.0, 0.0, 1.0);\n        color = sdf.yzw * stripe;\n    } else if (sdf.x > -0.02) {\n        color = mix(sdf.yzw, vec3(0.0, 1.0, 0.4), 0.5);  \n    } else {\n        color = sdf.yzw;\n    }\n\n    fragColor = vec4(pow(color, vec3(0.4545)), 1.0);\n}\n","name":"Image","description":"","type":"image"}]}