{"ver":"0.1","info":{"id":"DsSSzK","date":"1670500835","viewed":66,"name":"Psycadelic lava lamp","username":"Zygal","description":"Weird experiment to lean glsl","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["background"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define pi 3.141592\n\nfloat circ(vec2 uv, vec2 pos, float rad) {\n    return (rad/distance(vec2(uv.x * (iResolution.x / iResolution.y), uv.y), pos));\n}\n\n// bounce the balls of the walls\nvec2 position(float xSpeed, float ySpeed, float time) {\n    float x = (2./pi)*(asin(sin((2.*pi/xSpeed) * time)));\n    float y = (1.5/pi)*(asin(sin((2.*pi/ySpeed) * time)));\n    return vec2(x, y);\n}\n\n//HSV (hue, saturation, value) to RGB.\n//Sources: https://gist.github.com/yiwenl/745bfea7f04c456e0101, https://gist.github.com/sugi-cho/6a01cae436acddd72bdf\nvec3 hsv2rgb(vec3 c){\n    vec4 K=vec4(1.,2./3.,1./3.,3.);\n    c = min(c, vec3(1.));\n    c = max(c, vec3(0.));\n    return c.z*mix(K.xxx,clamp(abs(fract(c.x+K.xyz)*6.-K.w)-K.x, .0, 1.),c.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 midUV = uv - .5;\n    float time = iTime/50.;\n\n    float c = 0.;\n    float col = 1.;\n\n    for (int i = 1; i <= 15; i++){\n        float delta = circ(midUV, position(.4 / sin(float(i)), .3 / sin(float(i)), time), .075);\n        c += delta;\n        col = min(col, delta);\n    }\n        fragColor = vec4(hsv2rgb(vec3(round(c / 3. * 25.) / 25., 1., 1.)), 1.);\n\n        //fragColor = mix(fragColor, vec4(hsv2rgb(vec3(min(c * .1, 0.1), 1., 1.)), 1.), smoothstep(1., c * .5, 0.));\n    //fragColor = mix(fragColor, vec4(1.), (c * .5) > .8 && (c * .5) < .85 ? 1. : 0.);\n    fragColor = mix(fragColor, vec4(1.), int(c * 100.) % 15 == 0 && c < 2.75? 1. : 0.);\n\n\n}","name":"Image","description":"","type":"image"}]}