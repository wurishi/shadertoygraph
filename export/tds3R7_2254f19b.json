{"ver":"0.1","info":{"id":"tds3R7","date":"1545545523","viewed":93,"name":"Anothererer Mandelbrot","username":"HyPeRbLaH","description":"A mandelbrot which uses the average orbit position as a normal.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["mandelbrot"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float steps = 92.0;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float scale = 2.0/iResolution.y;\n    vec2 res = iResolution.xy * scale;\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord * scale * 4.0 - 2.0 * res)/(/*(sin(iTime * 0.35) * 5.0 + 7.0) * */res.y * 50.0);\n    // x = r*cos(theta)+0.25, y = r*sin(theta)\n    float theta = iTime * 0.125;\n    //float r = (1.0 - cos(theta))/2.0;\n    //uv += vec2(r*cos(theta)+0.25, r*sin(theta));\n    \n    // r = 0.25, x = r*cos(theta)-1, y = r*sin(theta)\n    float r = 0.25;\n    uv += vec2(r*cos(theta)-1.0,r*sin(theta));\n    \n    theta *= 3.14;\n    vec3 ld1 = normalize(vec3(cos(theta), sin(theta), 0.75));\n    theta += 3.14;\n    vec3 ld2 = normalize(vec3(cos(theta), sin(theta), 0.75));\n\n    vec2 z = vec2(0.0);\n    vec3 nrm = vec3(0.0);\n    \n    float i = 0.0;\n    for (; i < steps; ++i) {\n        //z += uv;\n    \tz = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y);\n        z += uv;\n        \n        if (z.x * z.x + z.y * z.y > 4.0) {\n            break;\n        }\n        \n        nrm += vec3(z.xy, 0.0);\n    }\n    nrm /= i;//i * 2.0;\n    float mag = length(nrm.xy);\n    if (mag > 1.0) {\n        nrm = vec3(nrm.xy / mag, 0.0);\n    } else {\n        float m = 1.0 - nrm.x * nrm.x - nrm.y * nrm.y;\n        nrm.z = m;\n    }\n    //nrm = nrm * 0.5 + 0.5;\n    float l1 = dot(nrm, ld1) * 0.5 + 0.5;\n    l1 = l1*l1*l1 + 0.1;\n    float l2 = dot(nrm, ld2) * 0.5 + 0.5;\n    l2 = l2*l2*l2 + 0.1;\n    \n    //nrm = nrm * 0.5 + 0.5;\n\n    // Output to screen\n    fragColor = vec4(l1, abs(l1 - l2), l2, 1.0);\n}","name":"Image","description":"","type":"image"}]}