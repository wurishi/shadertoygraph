{"ver":"0.1","info":{"id":"7t3Szf","date":"1639490035","viewed":204,"name":"Pencil patterns","username":"sinvec","description":"Based on my [url=https://www.shadertoy.com/view/ft33Rn]previous work[/url].","likes":17,"published":1,"flags":0,"usePreview":0,"tags":["grid","pencil","pattern","paper","notebook"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159\n#define R iResolution.xy\n#define s(v,l) smoothstep(l/R.y,0.,v) // AA\n#define ro(a) (mat2(cos(a),sin(a),-sin(a),cos(a))) // 2d rotation matrix\n\nfloat fbm(vec2 p){\n    return texture(iChannel0, p*.001).x*.533 +\n           texture(iChannel0, p*.01).x*.267 +\n           texture(iChannel0, p*.3).x*.133 +\n           texture(iChannel0, p*.5).x*.067; \n}\n\n\nfloat lineseg(in vec2 p, in vec2 a, in vec2 b){\n    vec2 ba = b-a, pa = p-a;\n    float h = clamp(dot(pa,ba)/dot(ba,ba), 0., 1.);\n    return length(pa-h*ba);\n}\n\n\nvoid mainImage( out vec4 O, in vec2 E )\n{\n    vec2 u = (E - R*.5) / R.y;\n\n    const float grid_size = .1; \n    vec3 col = vec3(.9);\n    \n    vec3 grid_color = vec3(.5, .5, .9);\n    \n    u -= (vec2(fbm(u*16.), fbm(u*16. + .35)) - .5) * .008;\n    \n    col = mix(col, grid_color, s( pow(fract(u.x / grid_size -.5)-.5, 2.)-.001 , 1.5));\n    col = mix(col, grid_color, s( pow(fract(u.y / grid_size -.5)-.5, 2.)-.001 , 1.5));\n    \n    col = mix(col, col*.7, texture(iChannel0, u*5.).x*.5);\n    col += texture(iChannel0, (u+vec2(.125,.382))*5.).x*.2;\n    \n    vec2 start_point = vec2(-5., 4.);\n    \n    float line = 999.;\n    \n    while (start_point.y > -4.) {\n        line = min(line, lineseg(u, (start_point-vec2(1.,0.)) * grid_size, (start_point-vec2(1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(.5,0.)) * grid_size, (start_point-vec2(.5,1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point) * grid_size, (start_point-vec2(0., 1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(-.5,0.)) * grid_size, (start_point-vec2(-.5,1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point+vec2(1.,0.)) * grid_size, (start_point+vec2(1.,-1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(1.)) * grid_size, (start_point-vec2(0.,2.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(0.,1.)) * grid_size, (start_point-vec2(-1.,2.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(1.,2.)) * grid_size, (start_point-vec2(.5,1.5)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(-.5,1.5)) * grid_size, (start_point-vec2(-1.,1.)) * grid_size));\n        start_point.y -= 2.;\n    }\n    \n    col = mix(col, mix(vec3(0.),col,1.-texture(iChannel0, u*10.).x), s(line-.005, 1.5));\n    \n    line = 999.;\n    start_point = vec2(0., 3.);\n    u -= (vec2(fbm(u*16.), fbm(u*16. + .35)) - .5) * .01;\n    \n    while (start_point.y > -3.) {\n        line = min(line, lineseg(u, (start_point-vec2(1.,0.)) * grid_size, (start_point-vec2(1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(.5,.5)) * grid_size, (start_point-vec2(.5,1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point) * grid_size, (start_point-vec2(0., 1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(-.5,0.)) * grid_size, (start_point-vec2(-.5,.5)) * grid_size));\n        line = min(line, lineseg(u, (start_point+vec2(1.,0.)) * grid_size, (start_point+vec2(1.,-1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(1.)) * grid_size, (start_point-vec2(0.,3.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(.5,1.)) * grid_size, (start_point-vec2(-.5,3.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(0.,1.)) * grid_size, (start_point-vec2(-1.,3.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(1.,3.)) * grid_size, (start_point-vec2(.5,2.)) * grid_size)); \n        line = min(line, lineseg(u, (start_point-vec2(-.5,2)) * grid_size, (start_point-vec2(-1.,1.)) * grid_size));\n        start_point.y -= 3.;\n    }\n    \n    col = mix(col, mix(vec3(.2),col,1.-texture(iChannel0, u*5.).x), s(line-.005, 2.));\n    \n    line = 999.;\n    start_point = vec2(5., 4.);\n    while (start_point.y > -4.) {\n        line = min(line, lineseg(u, (start_point-vec2(1.,0.)) * grid_size, (start_point-vec2(1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(.5,0.)) * grid_size, (start_point-vec2(.5,1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point) * grid_size, (start_point-vec2(0., 1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(-.5,0.)) * grid_size, (start_point-vec2(-.5,1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point+vec2(1.,0.)) * grid_size, (start_point+vec2(1.,-1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(1.)) * grid_size, (start_point-vec2(0.,2.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(.5,1.)) * grid_size, (start_point-vec2(-.5,2.)) * grid_size)); \n        line = min(line, lineseg(u, (start_point-vec2(0.,1.)) * grid_size, (start_point-vec2(-1.,2.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(1.,2.)) * grid_size, (start_point-vec2(.5,1.5)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(.5,2.)) * grid_size, (start_point-vec2(.25,1.75)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(-.5,1.5)) * grid_size, (start_point-vec2(-1.,1.)) * grid_size));\n        line = min(line, lineseg(u, (start_point-vec2(-.25,1.25)) * grid_size, (start_point-vec2(-.5,1.)) * grid_size));     \n        start_point.y -= 2.;\n    }\n    \n    col = mix(col, mix(vec3(.0),col,1.-texture(iChannel0, u*5.).x), s(line-.002, 2.));\n    \n    O = vec4(col, 1.);\n}","name":"Image","description":"","type":"image"}]}