{"ver":"0.1","info":{"id":"XdtGWB","date":"1452008416","viewed":235,"name":"Multipass Radial blur","username":"madware","description":"This is some radial blur attempt with multipass rendering","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["multypass"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iChannelResolution[0].xy;                 \n    fragColor = texture( iChannel0, uv);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iChannelResolution[0].xy;\n        \n    if((iFrame == 0) || (mod(iTime, 1.)<= .05))\n    {\n        if(uv.y <= .5)\n    \t\tfragColor = vec4(sin(iTime * .2) * .2 + .8,.6 + sin(iTime * 2.5) * .2,sin(iTime * .7 + .3) * .2 + .5,1.0);\n        else\n        \tfragColor = vec4(1.0);\n    }\n    else\n    {\n        if(uv.y <= .5)\n        \tfragColor = texture( iChannel0, uv);\n        else\n            fragColor = mix(texture( iChannel0, uv), vec4(0.,0.,0.,1.), .05);\n    }\n    \n}","name":"Buf A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"#define MPLY 2.0\n#define BLUR_OFFSET 0.995\n#define BLUR_STR 0.95\n\nfloat circle(in vec2 uv, in vec2 p, in float rad)\n{\n    vec2 uv2 = vec2(uv.x - .5 + p.x, (uv.y - .5 + p.y) * iChannelResolution[1].y / iChannelResolution[1].x * MPLY);\n    return smoothstep( rad + .001, rad - 0.001, length(uv2));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iChannelResolution[1].xy;\n    \n    // horizontal multiply uv coords\n    vec2 uv2 = vec2(mod(uv.x * MPLY, 1.), uv.y);    \n    \n    // radial blur uv coords\n    vec2 uv3 = uv + vec2(-.5);    \n    float a = atan(uv3.y, uv3.x);\n    float l = length(uv3);\n    uv3 = vec2(BLUR_OFFSET * l * cos(a) +.5, BLUR_OFFSET * l * sin(a) + .5);    \n    \n    vec4 clr = texture( iChannel0, vec2(0.0));\n    \n    vec4 col = vec4(0.,0.,0.,1.);\n    \n    float rad = 0.005 + .02 * texture( iChannel0, vec2(1.0)).x;\n    float py = sin(iTime * .5) *.05;\n    \n\tfor(float i = -.4; i <= .4; i += .025)\n    {\n        float pyy = py + i;        \n        float spherify = .5 + pow((.4 - i), .25)*(-.45);\n            \n        for(float j = -1.; j < 1.; j += .1)\n        {\n            float radius = rad * (1. - i) * (1. - j);  \n            float kf = iTime + i * 2.5 + j;            \n            col = mix(col, clr, circle(uv2, vec2(sin(kf+kf) * spherify, pyy), radius));            \n        }\n    }\n    col *= 1.6;\n    if(iFrame == 0)\n        fragColor = col;\n    else\n        fragColor = mix(col, texture( iChannel1, uv3), BLUR_STR);\n}","name":"Buf B","description":"","type":"buffer"}]}