{"ver":"0.1","info":{"id":"ltB3Rt","date":"1431335207","viewed":241,"name":"004 Coloured Voronoi","username":"nmarsden","description":"Based on Voronoise by iq https://www.shadertoy.com/view/Xd23Dh","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["2d","voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"// Based on Voronoise by iq https://www.shadertoy.com/view/Xd23Dh\n\nconst float NUM_HORIZONTAL_TILES = 40.0;\n\nvec3 hash3( vec2 p )\n{\n    vec3 q = vec3( dot(p,vec2(127.1,311.7)), \n\t\t\t\t   dot(p,vec2(269.5,183.3)), \n\t\t\t\t   dot(p,vec2(419.2,371.9)) );\n\treturn fract(sin(q)*43758.5453);\n}\n\nfloat voronoi( in vec2 x )\n{\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n\t\t\n\tfloat k = 1.0+63.0*pow(1.0,4.0);\n\t\n\tfloat va = 0.0;\n\tfloat wt = 0.0;\n    for( int j=-2; j<=2; j++ )\n    {\n        for( int i=-2; i<=2; i++ )\n        {\n            vec2 g = vec2( float(i),float(j) );\n            vec3 o = hash3( p + g )*vec3(1.0,1.0,1.0);\n            vec2 r = g - f + o.xy;\n            float d = dot(r,r);\n            float ww = pow( 1.0-smoothstep(0.0,1.414,sqrt(d)), k );\n            va += o.z*ww;\n            wt += ww;\n        }\n    }\t\n    return va/wt;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xx;\n\n\tfloat f = voronoi( NUM_HORIZONTAL_TILES * uv);\n    \n    vec3 col = vec3( f, 4.0 * f * (1.0 - f), 1.0 - f ) * f * 2.0;\n    \n    fragColor = vec4( col, 1.0 );\n}","name":"","description":"","type":"image"}]}