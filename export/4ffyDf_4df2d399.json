{"ver":"0.1","info":{"id":"4ffyDf","date":"1721880538","viewed":72,"name":"miku's spider thread","username":"zemi","description":"A trial for music","likes":2,"published":1,"flags":8,"usePreview":0,"tags":["music"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//from efairbanks' Spiderweb Fractal\n\nvec2 c2p(vec2 p){return vec2(atan(p.y,p.x),length(p));}\nvec2 p2c(vec2 p){return vec2(cos(p.x),sin(p.x))*p.y;}\nvec3 getPixel(vec2 fragCoord) {\n    vec2 uv = fragCoord/iResolution.xy;\n    uv -= 0.5; uv.x *= (iResolution.x/iResolution.y); uv *= 20./pow(iTime,3.1);\n    for(int i=0;i<13;i++) {\n    \tuv.xy = p2c(c2p(uv.xy)*vec2(float(((i+4)%9)),1.1)-vec2(0.1,0.));\n    \tuv.xy += 0.0275;\n    }\n    if(length(uv)<0.3) return vec3(1.);\n    return vec3(0.);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    #define SSAA 4\n    vec3 col = vec3(0.);\n    for(int x=-SSAA/2;x<SSAA/2;x++)\n        for(int y=-SSAA/2;y<SSAA/2;y++)\n            col += getPixel(vec2(fragCoord.x+float(x)/float(SSAA),\n                                 fragCoord.y+float(y)/float(SSAA)));\n\tfragColor = vec4(col/pow(2.,float(SSAA)),1.);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"vec2 soundNote(int samp, float time, float delay, float frequency) {\n    vec2 eco = vec2(0.0);\n    if(time > delay) {\n    float noteFreq=frequency;\n    float noteTime=time-delay;\n    float y  = 0.5*sin(6.2831*1.00*noteFreq*noteTime)*exp(-0.0015*1.0*noteFreq*noteTime);\n\t      y += 0.3*sin(6.2831*2.01*noteFreq*noteTime)*exp(-0.0015*2.0*noteFreq*noteTime);\n\t      y += 0.2*sin(6.2831*4.01*noteFreq*noteTime)*exp(-0.0015*4.0*noteFreq*noteTime);\n          y += 0.1*y*y*y;\t  \n          y *= 0.9 + 0.1*sin(40.0*noteTime);\n\t      y *= smoothstep(0.0,0.1,noteTime);\n    for (int i=0;i<2;i++)\n    {\n        float h=float(i)/2.0;\n        eco += y * vec2(0.5+0.2*h,0.5-0.2*h) * (1.0-sqrt(h)*0.85);\n    \n    \n    \n    }\n    eco/=3.0;\n    return eco;\n    \n    \n    \n    \n    \n        \n    } else {\n        return vec2(0.0);\n    }\n}\n\nvec2 mainSound(int samp, float time) {\n    vec2 sound = vec2(0.0);\n\n    // 音符频率\n    float C4 = 261.63;\n    float D4 = 293.66;\n    float E4 = 329.63;\n    float F4 = 349.23;\n    float G4 = 392.00;\n    float A4 = 440.00;\n    float B4 = 493.88;\n    float C5 = 523.25;\n    //D44 means D#4\n    float D44 = 311.3;\n    float B3=246.94;\n    float A33=233.08;\n    float A3=220.00;\n    float G33=207.65;\n    float C44=277.18;\n    float G44=415.30;\n    float F44=369.99;\n    float G22=103.83;\n    float G11=51.91;\n    float B2=123.47;\n    float B1=61.74;\n    float C33=138.59;\n    float C22=69.3;\n    float D2=73.42;\n    float D3=146.83;\n    float D33=155.56;\n    float D55=622.25;\n    float D22=77.78;\n    float F33=185.0;\n    float G55=830.61;\n    float G66=1661.22;\n    float C66=1108.73;\n    float D66=1244.51;\n    float F66=1479.98;\n    float F55=739.99;\n    float B6=1975.53;\n    float A66=1864.66;\n    float B5=987.77;\n    float A55=932.33;\n    float A44=466.16;\n    float C55=554.37;\n    \n    \n    \n    // 第一个声部\n    sound += soundNote(samp, time, 0.0,G66 );\n    sound += soundNote(samp, time, 0.3,G55 );\n    sound += soundNote(samp, time, 0.6,C66 );\n    sound += soundNote(samp, time, 0.9,G55 );\n    \n    sound += soundNote(samp, time, 1.2,D66 );\n    sound += soundNote(samp, time, 1.5,F66 );\n    sound += soundNote(samp, time, 1.8,G55 );\n    sound += soundNote(samp, time, 2.1,G66 );\n    \n    sound += soundNote(samp, time, 0.0,E4 );\n    sound += soundNote(samp, time, 0.0,F44 );\n    sound += soundNote(samp, time, 0.0,B4 );\n    //\n    \n    sound += soundNote(samp, time, 2.4,D66 );\n    sound += soundNote(samp, time, 2.7,C66 );\n    sound += soundNote(samp, time, 3.0,D66 );\n    sound += soundNote(samp, time, 3.3,G55 );\n    \n    sound += soundNote(samp, time, 3.6,F66 );\n    sound += soundNote(samp, time, 3.9,G55 );\n    sound += soundNote(samp, time, 4.2,C66 );\n    sound += soundNote(samp, time, 4.5,D66 );\n    \n    sound += soundNote(samp, time, 2.4,D44 );\n    sound += soundNote(samp, time, 2.4,G4 );\n    sound += soundNote(samp, time, 2.4,A44 );\n    //\n    \n    sound += soundNote(samp, time, 4.8,G66 );\n    sound += soundNote(samp, time, 5.1,G55 );\n    sound += soundNote(samp, time, 5.4,C66 );\n    sound += soundNote(samp, time, 5.7,G55 );\n    \n    sound += soundNote(samp, time, 6.0,D66 );\n    sound += soundNote(samp, time, 6.3,F66 );\n    sound += soundNote(samp, time, 6.6,G55 );\n    sound += soundNote(samp, time, 6.9,G66 );\n    \n    sound += soundNote(samp, time, 4.8,C44 );\n    sound += soundNote(samp, time, 4.8,F44 );\n    sound += soundNote(samp, time, 4.8,G44 );\n    //\n    \n    sound += soundNote(samp, time, 7.2,D66 );\n    sound += soundNote(samp, time, 7.5,C66 );\n    sound += soundNote(samp, time, 7.8,D66 );\n    sound += soundNote(samp, time, 8.1,G55 );\n    \n    sound += soundNote(samp, time, 8.4,B6 );\n    sound += soundNote(samp, time, 8.7,A66 );\n    sound += soundNote(samp, time, 9.0,F66 );\n    sound += soundNote(samp, time, 9.3,C66 );\n    \n    sound += soundNote(samp, time, 7.2,C4 );\n    sound += soundNote(samp, time, 7.2,F44 );\n    sound += soundNote(samp, time, 7.2,G44 );\n    //\n    \n    sound += soundNote(samp, time, 9.6,G66 );\n    sound += soundNote(samp, time, 9.9,G55 );\n    sound += soundNote(samp, time, 10.2,C66 );\n    sound += soundNote(samp, time, 10.5,G55 );\n    \n    sound += soundNote(samp, time, 10.8,D66 );\n    sound += soundNote(samp, time, 11.1,F66 );\n    sound += soundNote(samp, time, 11.4,G55 );\n    sound += soundNote(samp, time, 11.7,G66 );\n    \n    sound += soundNote(samp, time, 9.6,E4 );\n    sound += soundNote(samp, time, 9.6,F44 );\n    sound += soundNote(samp, time, 9.6,B4 );\n    //\n    \n    sound += soundNote(samp, time, 12.0,D66 );\n    sound += soundNote(samp, time, 12.3,C66 );\n    sound += soundNote(samp, time, 12.6,D66 );\n    sound += soundNote(samp, time, 12.9,G55 );\n    \n    sound += soundNote(samp, time, 13.2,F66 );\n    sound += soundNote(samp, time, 13.5,G55 );\n    sound += soundNote(samp, time, 13.8,C66 );\n    sound += soundNote(samp, time, 14.1,D66 );\n    \n    sound += soundNote(samp, time, 12.0,D44 );\n    sound += soundNote(samp, time, 12.0,G4 );\n    sound += soundNote(samp, time, 12.0,A44 );\n    //\n    \n    \n    sound += soundNote(samp, time, 14.4,G66 );\n    sound += soundNote(samp, time, 14.7,G55 );\n    sound += soundNote(samp, time, 15.0,C66 );\n    sound += soundNote(samp, time, 15.3,G55 );\n    \n    sound += soundNote(samp, time, 15.6,D66 );\n    sound += soundNote(samp, time, 15.9,F66 );\n    sound += soundNote(samp, time, 16.2,G55 );\n    sound += soundNote(samp, time, 16.5,G66 );\n    \n    sound += soundNote(samp, time, 14.4,C44 );\n    sound += soundNote(samp, time, 14.4,F44 );\n    sound += soundNote(samp, time, 14.4,G44 );\n    //\n    \n    \n    sound += soundNote(samp, time, 16.8,D66 );\n    sound += soundNote(samp, time, 17.1,C66 );\n    sound += soundNote(samp, time, 17.4,D66 );\n    sound += soundNote(samp, time, 17.7,G55 );\n    \n    sound += soundNote(samp, time, 18.0,B6 );\n    sound += soundNote(samp, time, 18.3,A66 );\n    sound += soundNote(samp, time, 18.6,F66 );\n    sound += soundNote(samp, time, 18.9,C66 );\n    \n    sound += soundNote(samp, time, 19.2,G66 );\n    sound += soundNote(samp, time, 19.5,G55 );\n    sound += soundNote(samp, time, 19.8,C66 );\n    sound += soundNote(samp, time, 20.1,G55 );\n    \n    sound += soundNote(samp, time, 16.8,C4 );\n    sound += soundNote(samp, time, 16.8,F44 );\n    sound += soundNote(samp, time, 16.8,G44 );\n    \n    //\n    \n    \n    sound += soundNote(samp, time, 20.4,D66 );\n    sound += soundNote(samp, time, 20.7,F66 );\n    sound += soundNote(samp, time, 21.0,G55 );\n    sound += soundNote(samp, time, 21.3,G66 );\n    \n    sound += soundNote(samp, time, 21.7,D66 );\n    sound += soundNote(samp, time, 22.0,C66 );\n    sound += soundNote(samp, time, 22.3,D66 );\n    sound += soundNote(samp, time, 22.6,G55 );\n    \n    sound += soundNote(samp, time, 20.4,C44 );\n    sound += soundNote(samp, time, 20.4,F44 );\n    sound += soundNote(samp, time, 20.4,G44 );\n    \n    sound += soundNote(samp, time, 22.9,F66 );\n    sound += soundNote(samp, time, 23.2,G55 );\n    sound += soundNote(samp, time, 23.5,C66 );\n    sound += soundNote(samp, time, 23.8,D66 );\n    \n     sound += soundNote(samp,time, 24.1,G66 );\n    sound += soundNote(samp, time, 24.4,G55 );\n    sound += soundNote(samp, time, 24.7,C66 );\n    sound += soundNote(samp, time, 25.0,G55 );\n    \n    sound += soundNote(samp, time, 24.1,C44 );\n    sound += soundNote(samp, time, 24.1,F44 );\n    sound += soundNote(samp, time, 24.1,G44 );\n    \n    sound += soundNote(samp, time, 25.3,D66 );\n    sound += soundNote(samp, time, 25.6,F66 );\n    sound += soundNote(samp, time, 25.9,G55 );\n    sound += soundNote(samp, time, 26.2,G66 );\n    \n    sound += soundNote(samp, time, 25.3,C44 );\n    sound += soundNote(samp, time, 25.3,F44 );\n    sound += soundNote(samp, time, 25.3,G44 );\n    \n    sound += soundNote(samp, time, 26.5,D66 );\n    sound += soundNote(samp, time, 26.8,C66 );\n    sound += soundNote(samp, time, 27.1,D66 );\n    sound += soundNote(samp, time, 27.4,G55 );\n    \n    sound += soundNote(samp, time, 26.5,C44 );\n    sound += soundNote(samp, time, 26.5,F44 );\n    sound += soundNote(samp, time, 26.5,G44 );\n    \n    sound += soundNote(samp, time, 27.7,B5 );\n    sound += soundNote(samp, time, 28.0,A55 );\n    sound += soundNote(samp, time, 28.3,F55 );\n    sound += soundNote(samp, time, 28.6,C55 );\n    \n    return sound;\n    \n    \n}\n","name":"Sound","description":"","type":"sound"}]}