{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"// Written by Benjamin Jo Botten\n\n\nfloat getPseudoHeight(vec4 col);\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    uv.y = 1. - uv.y;\n    vec4 col = texture(iChannel0, uv * 2.);\n    float height = getPseudoHeight(col) * 5.;\n    \n    vec3 lightPos;\n    lightPos.x = 400. + 0.5 * cos(iTime * 0.35) * iResolution.x;\n    lightPos.y = 200. + 0.5 * sin(iTime * 1.25) * iResolution.y;\n    lightPos.z = height * 5.;\n    \n    vec3 cameraPos = vec3(iResolution.x / 2., iResolution.y / 2., 10.);\n    vec3 pixelPos = vec3(fragCoord.x, fragCoord.y, height * 0.05);\n   \n    vec3 normal;\n    normal.x = dFdx(height);\n    normal.y = dFdy(height);\n    normal.z = sqrt(1. - (normal.x * normal.x) - (normal.y * normal.y));\n    \n    \n    vec3 viewDir = vec3(cameraPos - pixelPos);\n    vec3 sourceDir = vec3(lightPos - pixelPos);\n    vec3 halfwayDir = vec3(sourceDir + viewDir);\n    viewDir = normalize(viewDir);\n    sourceDir = normalize(sourceDir);\n    halfwayDir = normalize(halfwayDir);\n    normal = normalize(normal);\n    \n    float lambert = max(dot(sourceDir, normal), 0.);\n    \n    //float blinnphong = max(pow(dot(halfwayDir, normal), 0.), 0.);\n    \n    \n    col.r = col.r * (0.0 + 0.2 * 1. * lambert);\n    col.g = col.g * (0.0 + 0.6 * 1. * lambert);\n    col.b = col.b * (0.0 + 1.0 * 1. * lambert); \n\t\n    fragColor = vec4(col);\n}\n\nfloat getPseudoHeight(vec4 col) {\n    return (0.85 / (1. + pow((col.r * col.g * col.b), 1.15)));\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4lfGRn","date":"1417556882","viewed":193,"name":"Pseudo-Bumping","username":"D_e_X","description":"I had a simple idea about how to do a kind of heightmap from texel data. Tweaking the scene parameters enough provided good results for some of the types of texture that initially could benefit from more sense of depth.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["shadingandpseudogeometryeffects"],"hasliked":0,"parentid":"","parentname":""}}