{"ver":"0.1","info":{"id":"XtffDX","date":"1513497768","viewed":118,"name":"fractal_2d_kali_0","username":"balkhan","description":"http://iquilezles.org/articles/mset_smooth/mset_smooth.htm","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["fractal","polar"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define I_MAX 150\n\n/*\n**\tLeon's mod polar from : https://www.shadertoy.com/view/XsByWd\n*/\n\n#define PI 3.14159\n#define TAU PI*2.\n\nvec2 modA (vec2 p, float count) {\n    float an = TAU/count;\n    float a = atan(p.y,p.x)+an*.5;\n    a = mod(a, an)-an*.5;\n    return vec2(cos(a),sin(a))*length(p);\n}\n\n/*\n**\tend mod polar\n*/\n\nvec2 \tcmult(vec2 a, vec2 b);\nvec2\tcadd(vec2 a, vec2 b);\n\nvoid\tmainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2\tuv = fragCoord.xy / iResolution.xy;\n    vec4\tz = vec4(0.0, 0.0, 0.0, 0.0);\n    vec2\tof = vec2((uv.x -0.5)/0.25, (uv.y -0.5)/0.25);\n    vec3\tcol = vec3(0.0);\n    vec2\tdist = vec2(0.0);\n    z.xy = of;\n    float ii = -1.;\n    z.xy = modA(z.xy, 5.);\n    z.x -= .753;\n    for (int i = -1; i < I_MAX; ++i)\n    {\n        ++ii;\n        z.xy = cadd((cmult( abs(z.xy)-1.0*sin(iTime*.25)*.13 , abs(z.xy)-1.0*sin(iTime*.25)*.13 )), vec2(-.3, -2.0));\n        vec2 fz = fract(z.xy*1.1)-.5;\n        z.xy += 1./max(fz*fz, .9750);\n        z.xy = cadd(z.xy, .051*vec2(sin(-3.55), cos(-3.55)) );\n        z.z = 2.0 * (z.x*z.z - z.y*z.w);\n        z.w = 2.0 * (z.y*z.z - z.x*z.w);\n        dist.x = dot(z.xy,z.xy);\n\t\tdist.y = dot(z.zw,z.zw);\n        if (dist.x > 100000000000.0 || dist.y > 100000000000.0)\n            break;\n    }\n    // iq\n    // https://iquilezles.org/articles/msetsmooth\n    vec3\ttmp = vec3(0.);\n        if( ii < float(I_MAX)-.5 )\n        {\n            float sit = ii - log2(log2(dot(z.xy,z.xy))/(log2(2.)))/log2(2.); \n            tmp = \n                +\n                vec3(\n                sin(+sit*.25+0.00)*.25 + .5\n                ,\n                sin(+sit*.25+1.04)*.25 + .3\n                ,\n                sin(+sit*.25+2.08)*.25 + .2\n                )\n                ;\n        }\n    col = tmp;\n    fragColor = vec4(col, 1.0);\n}\n\nvec2 \tcmult(vec2 a, vec2 b)\n{\n    return (vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x));\n}\n\nvec2\tcadd(vec2 a, vec2 b)\n{\n\treturn (vec2(a.x + b.x, a.y + b.y));\n}\n","name":"Image","description":"","type":"image"}]}