{"ver":"0.1","info":{"id":"MclyWs","date":"1721803357","viewed":83,"name":"interactive flow","username":"Hzzzch","description":"flow from : https://www.shadertoy.com/view/4lycWK\nuse your mouse to add more lines and sources.\nif the click is not working, reset the timeline will fix the problem.","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["fluid"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3zn","filepath":"/media/a/0681c014f6c88c356cf9c0394ffe015acc94ec1474924855f45d22c3e70b5785.png","previewfilepath":"/media/ap/0681c014f6c88c356cf9c0394ffe015acc94ec1474924855f45d22c3e70b5785.png","type":"cubemap","channel":2,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec4 t (vec2 v) {return texture(iChannel0,v/iResolution.xy);}\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    vec4 me = t(U);\n    vec2 dw = vec2(\n    \tt(U+vec2(1,0)).w-t(U-vec2(1,0)).w,\n    \tt(U+vec2(0,1)).w-t(U-vec2(0,1)).w\n    );\n    vec3 n = normalize(vec3(dw,.07));\n    C = sin(vec4(1.5,2.5,3,4)*me.w*4.);\n    float l = dot(n,normalize(vec3(3,1,0)));\n    C *= 0.7+0.3*(0.3+0.7*l)*texture(iChannel2, reflect(vec3(0,0,-1),n));\n\tC = (0.9+0.1*l)*sqrt(C)*sqrt(sqrt(C));\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec2 R;\nvec4 T ( vec2 U ) {return texture(iChannel0,U/R);}\nfloat ln (vec2 p, vec2 a, vec2 b) { \n    return length(p-a-(b-a)*clamp(dot(p-a,b-a)/dot(b-a,b-a),0.,1.));\n}\nvoid mainImage( out vec4 Q, in vec2 U )\n{   R = iResolution.xy;\n \t\n \tvec2 O = U,A = U+vec2(1,0),B = U+vec2(0,1),C = U+vec2(-1,0),D = U+vec2(0,-1);\n \tvec4 u = T(U), a = T(A), b = T(B), c = T(C), d = T(D);\n \tvec4 p;\n \tvec2 g = vec2(0);\n \t#define I 2\n \tfor (int i = 0; i < I; i++) {\n        U -=u.xy; A -=a.xy; B -=b.xy; C -=c.xy; D -=d.xy; \n        p += vec4(length(U-A),length(U-B),length(U-C),length(U-D))-1.;\n        g += vec2(a.z-c.z,b.z-d.z);\n        u = T(U);a = T(A); b = T(B); c = T(C); d = T(D);\n \t}   \n \tQ = T(U);\n \tvec4 N = 0.25*(a+b+c+d);\n \tQ = mix(Q,N, vec4(0,0,1,0));\n \tQ.xy -= g/8./float(I);\n \tQ.z += (p.x+p.y+p.z+p.w)/8.;\n \tQ.z *= 0.9995;\n \tfloat o = .25; // CHANGE THIS TO CHANGE SPEED\n \t\n \t\n    vec4 mouse = texture(iChannel1,vec2(0.2));\n    float q = ln(U,mouse.xy,mouse.zw);\n    vec2 m = mouse.xy-mouse.zw;\n    float l = length(m);\n    if (mouse.z>0.&&l>0.) {\n        Q.xyw = mix(Q.xyw,vec3(-normalize(m)*min(l,2.)/25.,1.),max(0.,5.-q)/25.);\n    }\n    \n    if (iFrame < 1) Q = vec4(o,0,0,0);\n \tif (length(U/R.y-vec2(0.1,0.5)) < .025) Q.xyw = vec3(0,0,1);\n \t\n \tif (U.x<2.||U.y<2.||R.x-U.x<2.||R.y-U.y<2.) Q=vec4(o,0,0,0);\n    \n        \n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"vec2 R;\nvec4 T ( vec2 U ) {return texture(iChannel0,U/R);}\nfloat ln (vec2 p, vec2 a, vec2 b) { \n    return length(p-a-(b-a)*clamp(dot(p-a,b-a)/dot(b-a,b-a),0.,1.));\n}\nvoid mainImage( out vec4 Q, in vec2 U )\n{   R = iResolution.xy;\n \t\n \tvec2 O = U,A = U+vec2(1,0),B = U+vec2(0,1),C = U+vec2(-1,0),D = U+vec2(0,-1);\n \tvec4 u = T(U), a = T(A), b = T(B), c = T(C), d = T(D);\n \tvec4 p;\n \tvec2 g = vec2(0);\n \t#define I 2\n \tfor (int i = 0; i < I; i++) {\n        U -=u.xy; A -=a.xy; B -=b.xy; C -=c.xy; D -=d.xy; \n        p += vec4(length(U-A),length(U-B),length(U-C),length(U-D))-1.;\n        g += vec2(a.z-c.z,b.z-d.z);\n        u = T(U);a = T(A); b = T(B); c = T(C); d = T(D);\n \t}   \n \tQ = T(U);\n \tvec4 N = 0.25*(a+b+c+d);\n \tQ = mix(Q,N, vec4(0,0,1,0));\n \tQ.xy -= g/8./float(I);\n \tQ.z += (p.x+p.y+p.z+p.w)/8.;\n \tQ.z *= 0.9995;\n \tfloat o = .25; // CHANGE THIS TO CHANGE SPEED\n \t\n \t\n    vec4 mouse = texture(iChannel1,vec2(0.2));\n    float q = ln(U,mouse.xy,mouse.zw);\n    vec2 m = mouse.xy-mouse.zw;\n    float l = length(m);\n    if (mouse.z>0.&&l>0.) {\n        Q.xyw = mix(Q.xyw,vec3(-normalize(m)*min(l,2.)/25.,1.),max(0.,5.-q)/25.);\n    }\n    \n\n    if (iFrame < 1) Q = vec4(o,0,0,0);\n \tif (length(U/R.y-vec2(0.1,0.5)) < .025) Q.xyw = vec3(0,0,1);\n \t\n \tif (U.x<2.||U.y<2.||R.x-U.x<2.||R.y-U.y<2.) Q=vec4(o,0,0,0);\n    \n        \n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"vec2 R;\nvec4 T ( vec2 U ) {return texture(iChannel0,U/R);}\nfloat ln (vec2 p, vec2 a, vec2 b) { \n    return length(p-a-(b-a)*clamp(dot(p-a,b-a)/dot(b-a,b-a),0.,1.));\n}\nvoid mainImage( out vec4 Q, in vec2 U )\n{   R = iResolution.xy;\n \t\n \tvec2 O = U,A = U+vec2(1,0),B = U+vec2(0,1),C = U+vec2(-1,0),D = U+vec2(0,-1);\n \tvec4 u = T(U), a = T(A), b = T(B), c = T(C), d = T(D);\n \tvec4 p;\n \tvec2 g = vec2(0);\n \t#define I 2\n \tfor (int i = 0; i < I; i++) {\n        U -=u.xy; A -=a.xy; B -=b.xy; C -=c.xy; D -=d.xy; \n        p += vec4(length(U-A),length(U-B),length(U-C),length(U-D))-1.;\n        g += vec2(a.z-c.z,b.z-d.z);\n        u = T(U);a = T(A); b = T(B); c = T(C); d = T(D);\n \t}   \n \tQ = T(U);\n \tvec4 N = 0.25*(a+b+c+d);\n \tQ = mix(Q,N, vec4(0,0,1,0));\n \tQ.xy -= g/8./float(I);\n \tQ.z += (p.x+p.y+p.z+p.w)/8.;\n \tQ.z *= 0.9995;\n \tfloat o = .25; // CHANGE THIS TO CHANGE SPEED\n \t\n \t\n    vec4 mouse = texture(iChannel1,vec2(0.2));\n    float q = ln(U,mouse.xy,mouse.zw);\n    vec2 m = mouse.xy-mouse.zw;\n    float l = length(m);\n    if (mouse.z>0.&&l>0.) {\n        Q.xyw = mix(Q.xyw,vec3(-normalize(m)*min(l,2.)/25.,1.),max(0.,5.-q)/25.);\n    }\n       \n    if (iFrame < 1) Q = vec4(o,0,0,0);\n \tif (length(U/R.y-vec2(0.1,0.5)) < .025) Q.xyw = vec3(0,0,1);\n \t\n \tif (U.x<2.||U.y<2.||R.x-U.x<2.||R.y-U.y<2.) Q=vec4(o,0,0,0);\n    \n        \n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 p = texture(iChannel0,fragCoord/iResolution.xy);\n    if (iMouse.z>0.) {\n        if (p.z>0.) fragColor =  vec4(iMouse.xy,p.xy);\n    \telse fragColor =  vec4(iMouse.xy,iMouse.xy);\n    }\n    else fragColor = vec4(-iResolution.xy,-iResolution.xy);\n}","name":"Buffer D","description":"","type":"buffer"}]}