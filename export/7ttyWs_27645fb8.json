{"ver":"0.1","info":{"id":"7ttyWs","date":"1660808118","viewed":206,"name":"Fluid-01 (Click Music)","username":"Rugged","description":"Added pressure so I think I can call this my first fluid. Yay!\n\nREAD BELOW\nto play music click the pause/play button ON THE ICHANNEL1 box  -- also click & drag to make splashes","likes":3,"published":1,"flags":96,"usePreview":0,"tags":["fluid"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"MtSSzm","filepath":"https://soundcloud.com/void_palace/eclipse?in=adrian-basilio/sets/mid-tempo&si=f8e6701b9bf1463cb4b02d6a57897423&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing","previewfilepath":"https://soundcloud.com/void_palace/eclipse?in=adrian-basilio/sets/mid-tempo&si=f8e6701b9bf1463cb4b02d6a57897423&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing","type":"musicstream","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"precision highp float;\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec4 col = texture(iChannel0, uv);\n    \n    vec2 muv = iMouse.xy / iResolution.xy;\n    \n    float sound = texture(iChannel1, vec2(.75, .25)).x;\n    \n    fragColor = 300. * pow(length(col), .5 - sound) * col;// * col.w;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"precision highp float;\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec4 col = texture(iChannel0, uv);\n    \n    \n    \n    fragColor = col;\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"precision highp float;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    \n    vec2 uvc = uv - vec2(0.5);\n    \n    vec4 col = texelFetch(iChannel0, ivec2(fragCoord), 0);\n    \n    \n    ivec2 fragI = ivec2(fragCoord);\n    \n    vec2 ex = vec2(1., 0.);\n    vec2 ey = vec2(0., 1.);\n    \n    vec2 coords = fragCoord;\n    \n    vec2 cfx = coords + ex;\n    vec2 cbx = coords - ex;\n    vec2 cfy = coords + ey;\n    vec2 cby = coords - ey;\n    \n    \n    \n    \n    if(iFrame == 0){\n        col = vec4(0.);\n    }\n    else if(distance(uvc, vec2(0.)) < 1.) {\n        \n        \n        //advect to new spot\n        vec4 u = texelFetch(iChannel0, ivec2(coords), 0);\n        \n        vec4 ufx = texelFetch(iChannel0, ivec2(cfx), 0);\n        vec4 ubx = texelFetch(iChannel0, ivec2(cbx), 0);\n        vec4 ufy = texelFetch(iChannel0, ivec2(cfy), 0);\n        vec4 uby = texelFetch(iChannel0, ivec2(cby), 0);\n        \n        \n        \n        \n        \n        \n        float dpx = ufx.z - ubx.z;\n        float dpy = ufy.z - uby.z;\n        \n        \n        \n        cfx -= ufx.xy;\n        cbx -= ubx.xy;\n        cfy -= ufy.xy;\n        cby -= uby.xy;\n        \n        \n        coords -= u.xy;\n        \n        \n        float densX = distance(coords, cfx) + distance(coords, cbx) - 2.;\n        float densY = distance(coords, cfy) + distance(coords, cby) - 2.;\n        \n        float density = densX + densY;\n        \n\n        //apply changes\n        col = texelFetch(iChannel0, ivec2(coords), 0);\n        \n        col.x -= dpx / 4.;\n        col.y -= dpy / 4.;\n        \n        \n        \n        \n        \n        \n        //get data at new spot\n        ufx = texelFetch(iChannel0, ivec2(cfx), 0);\n        ubx = texelFetch(iChannel0, ivec2(cbx), 0);\n        ufy = texelFetch(iChannel0, ivec2(cfy), 0);\n        uby = texelFetch(iChannel0, ivec2(cby), 0);\n        \n        vec4 uAvg = (ufx + ubx + ufy + uby) / 4.;\n        \n        col.z = uAvg.z + (density / 4.);\n        \n        if(iMouse.z > 0.){\n            vec2 muvc = (iMouse.xy / iResolution.xy) - vec2(.5);\n            \n            col += vec4(-muvc, 0., 1.) * iTimeDelta * (.1 / (0.001 + distance(uvc, muvc))) * .05;\n        }\n        \n        if(distance(coords, iResolution.xy * vec2(0.5)) < 3. && mod(iTime, .5) < .01){\n            col += vec4(-uvc, 0., 1.) * sin(iTime * 5.) * 10.;\n        }\n        \n        \n        //dye will dissipate over time\n        col.w *= .9999;\n        \n    }\n    \n    \n    \n    fragColor = col;\n}","name":"Buffer B","description":"","type":"buffer"}]}