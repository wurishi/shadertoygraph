{"ver":"0.1","info":{"id":"4lByRG","date":"1508931260","viewed":155,"name":"spiral colorbars","username":"voax","description":"upgrading a colorbars test pattern","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["procedural"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float spirals = 5.0, tile_x = 0.7;\n\nvec3 hsv2rgb(float h, float s, float v) {\n  vec3 p = abs( fract( h +  vec3(3,2,1)/3. ) * 6. - 3.) -1.;\n  return v * mix(vec3(1), clamp(p, 0., 1.), s);\n}\n\nfloat sq(float v) {\n\treturn v*v;    \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    if (iMouse.z > 0.5) {\n    \tspirals = 1.0 + iMouse.x * 10.0 / iResolution.x;\n    \ttile_x  = iMouse.y * 4.0 / iResolution.y;\n    }\n    \n    // spirals = 7.0;\n    // tile_x = 6.0;\n    float fade = 1.0;\n\n    vec2 R = iResolution.xy,\n         d = ( fragCoord - .5 * R ) / R.y,\n\t\t polar = vec2(atan(d.y, d.x) / (2.0*3.14159) + 0.5, length(d)); // in [0,1]\n    \n    // float t = polar.x + polar.y*spirals; // linear spiral\n    float t = polar.x + log(polar.y * spirals); // logarithmic spiral\n    vec2 suv = vec2(floor(t) + 1.0 - polar.x, fract(t)); // spiral \"uv coordinates\"\n    \n    float s = mix(1.0, 1.0, sq(suv.x * fade));\n    float v = mix(1.0, 0.0, sq(2.0*suv.y-1.0));\n    \n    fragColor = vec4(hsv2rgb(suv.x * tile_x, s, v), 1);\n}","name":"Image","description":"","type":"image"}]}