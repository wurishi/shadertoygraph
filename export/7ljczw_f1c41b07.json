{"ver":"0.1","info":{"id":"7ljczw","date":"1649403927","viewed":171,"name":"Reproject Web Mercator","username":"venus","description":"Reproject Web Mercator to Geographic","likes":0,"published":3,"flags":0,"usePreview":0,"tags":["webmercator"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define north 1.4844222297453322\n#define south -1.4844222297453322\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    vec2 geographicUV = uv;\n    \n    float sinLatitude = sin(south);\n    float southMercatorY = 0.5 * log((1.0 + sinLatitude) / (1.0 - sinLatitude));\n    \n    sinLatitude = sin(north);\n    float northMercatorY = 0.5 * log((1.0 + sinLatitude) / (1.0 - sinLatitude));\n    float oneOverMercatorHeight = 1.0 / (northMercatorY - southMercatorY);\n    \n    float fraction = mix(south, north, geographicUV.y);\n    sinLatitude = sin(fraction);\n    float mercatorY = 0.5 * log((1.0 + sinLatitude) / (1.0 - sinLatitude));\n    \n    float mercatorFraction = (mercatorY - southMercatorY) * oneOverMercatorHeight;\n    vec2 webMercatorUV = vec2(geographicUV.x, mercatorFraction);\n\n\n    // Output to screen\n    vec2 click = iMouse.xy / iResolution.xy;\n    uv = uv.x > click.x\n      ? webMercatorUV\n      : geographicUV;\n    float r = texture(iChannel0, uv).r;\n\n    fragColor.rgb = vec3(r);\n    fragColor.a = 1.0;\n}","name":"Image","description":"","type":"image"}]}