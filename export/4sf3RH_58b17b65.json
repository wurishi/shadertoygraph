{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"musicstream","id":"ldfGR4","filepath":"https://soundcloud.com/pi-xl/electromagnetica-live-jam-1er-certamen-midi-de-electromagnetica","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"#define pi 3.141592653589793238462643383279\r\n#define pi_inv 0.318309886183790671537767526745\r\n\r\nvec2 complex_mul(vec2 factorA, vec2 factorB){\r\n  return vec2( factorA.x*factorB.x - factorA.y*factorB.y, factorA.x*factorB.y + factorA.y*factorB.x);\r\n}\r\n\r\nvec2 complex_div(vec2 numerator, vec2 denominator){\r\n   return vec2( numerator.x*denominator.x + numerator.y*denominator.y,\r\n                numerator.y*denominator.x - numerator.x*denominator.y)/\r\n          vec2(denominator.x*denominator.x + denominator.y*denominator.y);\r\n}\r\n\r\nvec2 wrap_flip(vec2 uv){\r\n\treturn vec2(1.)-abs(fract(uv*.5)*2.-1.);\r\n}\r\n \r\nfloat border(vec2 domain, float thickness){\r\n   vec2 uv = fract(domain-vec2(0.5));\r\n   uv = min(uv,1.-uv)*2.;\r\n   return clamp(max(uv.x,uv.y)-1.+thickness,0.,1.)/(thickness);\r\n}\r\n\r\nfloat circle(vec2 uv, vec2 aspect, float scale){\r\n\treturn clamp( 1. - length((uv-0.5)*aspect*scale), 0., 1.);\r\n}\r\n\r\nfloat sigmoid(float x) {\r\n\treturn 2./(1. + exp2(-x)) - 1.;\r\n}\r\n\r\nfloat smoothcircle(vec2 uv, vec2 center, vec2 aspect, float radius, float sharpness){\r\n\treturn 0.5 - sigmoid( ( length( (uv - center) * aspect) - radius) * sharpness) * 0.5;\r\n}\r\n\r\nfloat lum(vec3 color){\r\n\treturn dot(vec3(0.30, 0.59, 0.11), color);\r\n}\r\n\r\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\r\n{\r\n\t// domain map\r\n\tvec2 uv = fragCoord.xy / iResolution.xy;\r\n\t\r\n\t// aspect-ratio correction\r\n\tvec2 aspect = vec2(1.,iResolution.y/iResolution.x);\r\n\tvec2 uv_correct = 0.5 + (uv -0.5)/ aspect.yx;\r\n\tvec2 mouse_correct = 0.5 + ( iMouse.xy / iResolution.xy - 0.5) / aspect.yx;\r\n\t\r\n\tvec2 pos1 = vec2(0.5);//mouse_correct;\r\n\t\r\n\tfloat angle = atan(uv_correct.y - pos1.y, uv_correct.x - pos1.x);\r\n\tfloat phaseshift = -iTime*0.1;\r\n\tvec2 spectrum_uv = fract(vec2( -angle * pi_inv*0.5 + phaseshift, 0.25));\r\n\t\r\n\tfloat spectrum = lum(texture(iChannel0, spectrum_uv).rgb);\r\n\t\r\n\tfloat d = 0.1 + spectrum*0.3;\r\n\tfloat sharpness = 300.;\r\n\tfloat circle = smoothcircle(uv_correct, pos1, vec2(1), d, sharpness);\r\n\tfloat circle_outline = circle*(1.-circle)*4.;\r\n\t\t\r\n\tfloat grid = border((uv_correct - 0.5)*16., 0.1);\r\n\r\n\tfragColor = vec4(uv,0.,1.0);\r\n\r\n\tfragColor = mix(fragColor, vec4(1), grid);\r\n\tfragColor = mix(fragColor, vec4(0), circle*0.5);\r\n\tfragColor = mix(fragColor, vec4(1), circle_outline);\r\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":true},"info":{"id":"4sf3RH","date":"1362138763","viewed":959,"name":"spectrum circle starter","username":"Flexi","description":"personal template with apect-ratio independency","likes":4,"published":1,"flags":64,"usePreview":0,"tags":["spectrum","aspectindependent"],"hasliked":0,"parentid":"","parentname":""}}