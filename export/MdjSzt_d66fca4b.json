{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"float WardAnisotropy (in vec3 vNormal, in vec3 vDirection, in vec3 vEye, in vec3 vLight,in vec2 Roughness) \n{    \n    vec3 A = normalize(vEye+vLight);\n    \n    float X = dot(A,normalize(cross(vNormal,vDirection)))/Roughness.x;\n    \n    float Y = dot(A,normalize(cross(vNormal,A)))/Roughness.y;\n    \n    float B = 1.0+dot(A,vNormal);\n    \n    float XY = -2.0*(pow(X,2.0)+pow(Y,2.0)) / B;\n    \n    float C = exp(XY) * (1.0/12.5664*Roughness.x*Roughness.y);\n    \n    return C * (1.0/sqrt(max(dot(vEye,vNormal),0.0)/max(dot(vLight,vNormal),0.0)));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.yy;\n    \n    vec2 uvl = fragCoord.xy / iResolution.xy-0.5;\n    \n    //Cones  \n    float s1 = 1.0-clamp(length(uv*4.0-vec2(1.5,1.2)),0.0,1.0);\n    \n    float s2 = 1.0-clamp(length(uv*4.0-vec2(5.67,1.2)),0.0,1.0);\n        \n    float s3 = 1.0-clamp(length(uv*4.0-vec2(3.67,2.8)),0.0,1.0);\n    \n    float sph = s1+s2+s3;\n    \n    float spm = clamp((s1+s2+s3)*96.0,0.0,1.0);\n    \n    \n    //Normals\n    float dx = dFdx(sph)*iResolution.x/15.0*spm;\n    \n    float dy = dFdy(sph)*iResolution.x/15.0*spm;\n     \n    vec3 vNormal = normalize(vec3(dx,dy,sqrt(clamp(1.0-dx*dx-dy*dy,0.0,1.0))));\n\n    \n    //Shading\n    vec2 Roughness = vec2(0.2,0.8);\n\n\tvec3 Dir1 = normalize(vec3(fract(uv.x*4.0)-0.5,fract(uv.y*4.0)-0.5,0.0));\n    \n\tvec3 Dir2 = normalize(vec3(0.0,1.0,0.0));\n    \n    vec3 Dir3 = normalize(vec3(uv.x*4.0-5.67,uv.y*4.0-1.2,0.0));\n    \n    vec3 vLight = normalize(vec3(uvl.x+(0.5*sin(iTime)),uvl.y+(0.5*cos(iTime)),0.5));\n    \n    vec3 vEye = vec3(0.0,0.0,1.0);\n    \n    float sh = clamp(dot(vNormal,vLight),0.0,1.0);\n    \n    vec3 Dir = mix(mix(Dir1,Dir2,spm),Dir3,min(s1*48.0,1.0));\n    \n    vec3 sp = WardAnisotropy(vNormal,Dir,vEye,vLight,Roughness)*vec3(24.0);\n    \n    vec3 Color = vec3(0.15)+vec3(0.45)*sh+sp;\n    \n    fragColor = vec4(Color,1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MdjSzt","date":"1415284580","viewed":1360,"name":"Anisotropic Shading","username":"mAlk","description":"ward's anisotropic specular reflectance model","likes":18,"published":1,"flags":0,"usePreview":0,"tags":["2d","anisotropic","anisotropy"],"hasliked":0,"parentid":"","parentname":""}}