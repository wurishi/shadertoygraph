{"ver":"0.1","info":{"id":"ft3SW4","date":"1639349919","viewed":128,"name":"Fluid metal","username":"pleroma","description":"Fluid metal","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["fluidmetal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3zn","filepath":"/media/a/488bd40303a2e2b9a71987e48c66ef41f5e937174bf316d3ed0e86410784b919.jpg","previewfilepath":"/media/ap/488bd40303a2e2b9a71987e48c66ef41f5e937174bf316d3ed0e86410784b919.jpg","type":"cubemap","channel":1,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"Main \n{\n    vec2 q = U/R;\n    vec3 e = vec3(vec2(1.0)/R,0.);\n    float p10 = texture(iChannel0, q-e.zy).x;\n    float p01 = texture(iChannel0, q-e.xz).x;\n    float p21 = texture(iChannel0, q+e.xz).x;\n    float p12 = texture(iChannel0, q+e.zy).x;\n    vec4 color =  vec4(.8,0.8,0.8,1.);  \n    vec3 grad = normalize(vec3(p21 - p01, p12 - p10, 1.));\n    vec3 light = normalize(vec3(.2,-.25,.7));\n    float diffuse = dot(grad,light)*1.5;\n    float spec = pow(max(0.,-reflect(light,grad).z),24.0);\n    vec4 ref= texture(iChannel1,reflect(light,grad)) ;\n    Q = color*diffuse*ref+ spec;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define R iResolution.xy\n#define A(U) texture(iChannel0,(U)/R)\n#define B(U) texture(iChannel1,(U)/R)\n#define Neighborhood vec4 n = B(U+vec2(0,1)), e = B(U+vec2(1,0)), s = B(U-vec2(0,1)), w = B(U-vec2(1,0)), m = 0.25*(n+e+s+w);\n#define Main void mainImage(out vec4 Q, vec2 U)\n#define dampening 0.98\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4df3zn","filepath":"/media/a/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","previewfilepath":"/media/ap/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","type":"video","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"Main \n{\n  float c=A(U).r;\n  Neighborhood;\n  Q = vec4(2.*(0.5-A(U))+(e+s+n+w-2.));\n  Q *= dampening; \n  Q = Q*.5 + .5;\n  Q *= pow(texture(iChannel2, U/R).x,.1);\n  if (iMouse.z>0.&&length(U-iMouse.xy)<10.)\n  {  \n      Q = vec4(1.);\n  }\n\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"Main \n{\n  float c=A(U).r;\n  Neighborhood;\n  Q = vec4(2.*(0.5-A(U))+(e+s+n+w-2.));\n  Q *= dampening; \n  Q = Q*.5 + .5;\n}","name":"Buffer D","description":"","type":"buffer"}]}