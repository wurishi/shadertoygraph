{"ver":"0.1","info":{"id":"ftySWc","date":"1641405376","viewed":84,"name":"Lots of Balls","username":"BetaSoftCologne","description":"One of my first experiments with raymarching. Now without artifacts, thanks to hamtarodeluxe!","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["3d","balls"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Author: BetaSoftCologne\n// Title: Lots of Balls\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\n\nmat3 rotx(float a) {\n    return mat3(\n        1,\t\t0, \t\t0,\n        0, \t\tcos(a), -sin(a), \n        0,\t\tsin(a), cos(a)\n    );\n}\n\nfloat circle(in vec3 pos, in float radius) {\n    float d = length(pos) - radius;\n    return d;\n}\n\nfloat scene(in vec3 p) {\n    float r = 0.05;\n   \tp.x += 0.25 * sin(iTime);\n    p.y += 0.25 * cos(iTime);\n    vec3 center = floor(p) + 0.5;\n    float x = min(\n        circle(p - center, r),\n        circle(p - center, r*1.5)\n    );\n    //x = circle(p, r);\n    return x;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)    \n    vec2 p = (2.*fragCoord.xy-iResolution.xy)/iResolution.y;\n    \n    // ray origin\n    vec3 ro = vec3(0.,0.,1.);\n\n    // ray direction\n    float z = 2.;\n    // zoom in and out: \n    z = 2.+sin(iTime);\n    vec3 rd = normalize(vec3(p, z));\n    \n    // march\n    vec3 pos, col = vec3(0);\n    float d;\n    float t = 0.;\n    vec4 r;\n    mat3 rt = rotx(iTime*0.);\n    for (int i=0; i<100; i++) {\n        pos = ro + t*rd;\n        //float d = map(pos);\n        d = scene(pos*rt);\n        if (d<0.001) break; // hit something!\n        // keep marching   \n        t += d;\n        if (t>20.0) break;\n    }\n    \n    if (t<20.0) {\n        float b = 0.3;\n        col = vec3(1./t);\n        col.r += b*pos.x;\n        col.g += b*pos.y;\n        col.b += b*pos.z;\n        \n        float a = dot(ro, pos);\n        vec3 x = vec3(-1,0,0);\n        //col *= a;\n    }\n       \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}