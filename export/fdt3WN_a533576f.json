{"ver":"0.1","info":{"id":"fdt3WN","date":"1629868164","viewed":94,"name":"Kaleidoscope (atz)","username":"ilyaev","description":"Kaleidoscope study","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["kaleidoscope"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265359\n#define PI2 6.28309265359\n\n\nfloat n21(vec2 n) {\n    return fract(sin(dot(n, vec2(12.9898 + floor(1.), 4.1414))) * 43758.5453);\n}\n\nmat2 rot2d(float a) {\n    return mat2(vec2(sin(a), cos(a)), vec2(-cos(a), sin(a)));\n}\n\nvec3 wheelOfFortune(vec2 uv, float segments) {\n    float angle = atan(uv.y, uv.x) + iTime;\n    float segmentAngle = PI2 / segments;\n    float wid = floor((angle + PI) / segmentAngle);\n    float n = n21(vec2(wid, 3.2));\n    vec3 color = vec3(n, fract(n * 10.23) + sin(iTime + uv.y * 6.), fract(n* 123123.342) + cos(iTime + uv.x*6.1));\n    return color;\n}\n\nvec3 background(vec2 uv) {\n    vec3 color = vec3(0.);\n\n    vec3 c1 = wheelOfFortune(uv * rot2d(iTime), 8.); \n    vec3 c2 = wheelOfFortune(uv + vec2(sin(iTime) * .1, cos(iTime*.3) * .1) * rot2d(-iTime), 15.);\n    vec3 c3 = wheelOfFortune(uv - vec2(sin(iTime*.6) * .2, cos(iTime) * .2) * rot2d(-iTime), 15.);\n    color = (c1 * c2 / c3) / 3.;\n\n    // color /= 3.;\n\n    return color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\n    float _SegmentCount = 7.;\n\n    vec2 mouse = iMouse.xy/iResolution.xy;\n\n    vec2 shiftUV = (fragCoord.xy-.5*iResolution.xy)/iResolution.y;\n\n\n    float radius = sqrt(dot(shiftUV, shiftUV));\n    float angle = atan(shiftUV.y, shiftUV.x) + mouse.x;\n\n    float segmentAngle = PI2 / _SegmentCount;\n\n    float wid = floor((angle + PI) / segmentAngle);\n\n    angle -= segmentAngle * floor(angle / segmentAngle);\n\n    angle = min(angle, segmentAngle - angle);\n\n    vec2 uv = vec2(cos(angle), sin(angle)) * radius + sin(iTime) * 0.1;\n\n\n    vec3 color = vec3(0.);\n\n    color += background(uv);\n\n\n    fragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}