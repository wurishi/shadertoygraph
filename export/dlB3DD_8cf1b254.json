{"ver":"0.1","info":{"id":"dlB3DD","date":"1673309481","viewed":73,"name":"Spruces","username":"ShadertoyAccount4635","description":"My first shader","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["stars","trees"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define TAU 6.283185307\nfloat range(float x,float y,float z) {\n    return (1.-step(x,y)) * (step(x,z)); \n}\nfloat circle(float radius, vec2 dif) {\n    return range(dot(dif,dif), 0., radius);  \n}\n\nfloat sector(vec2 center, float radius, vec2 uv, int c) {\n    vec2 dif = uv-center;\n    float angle = atan(dif.y, dif.x)+TAU/4.;\n    return circle(radius, dif) * range(angle, -0.2-5., 0.2);\n}\nvec3 cone(vec2 center, float radius, vec2 uv,int c) {\n    vec2 dif = uv-center;\n    float angle = atan(dif.y, dif.x)+TAU/4.;\n    \n    float blick = range(angle, -0.1, -0.05)*0.6;\n    float blickG = range(angle, -0.15, 0.07);\n    return vec3(blick, blickG/2.+0.5, blick)*circle(radius, dif) * range(angle, -0.2, 0.2);\n}\n\nvec3 spruce(float radius, vec2 uv) {\n    uv/=radius;\n    vec3 res = cone(vec2(0, 0), 0.1, uv, 0);\n    float drawn = step(0., dot(res, res)-0.1);\n \n    vec3 cone1 = cone(vec2(0, 0.08-0.2), 0.12, uv, 1);\n    res = mix(res, \n        cone1, 1.-drawn);\n    drawn = step(0., dot(res, res)-0.1);\n    res = mix(res, \n        cone(vec2(0., -0.07-0.2), 0.13, uv,2), 1.-drawn);\n    return res;  \n}\nvec3 Sspruce(float phase, float xden, float yden, vec2 uv) {\n    float timeslow = iTime/3.+1.;\n    float timeI = fract(timeslow+phase);\n    float timeS = floor(timeslow+phase);\n    float radius = 0.07/(1.-timeI);\n    float x = (fract(timeS/xden*168.)*2.-1.)*radius*2.;\n    float y = ((-1.)*radius+0.5);\n    return spruce(radius, uv-vec2(x, y));  \n}\nfloat path(float pos) {\n    return sin(pos)/1.61803399 + sin(pos*1.61803399)+sin(pos/11.2546)*11.2546;\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = -1. + 2. * fragCoord/iResolution.xy;\n    vec3 forest;\n    fragColor = vec4(0.0,0.0,0.0,0.0);\n    for(float i = 1.; i < 20.; i++) {\n        fragColor += circle(0.0001*1., uv-vec2(mod(1.61803399*i,2.)-1., mod(1.61803399*mod(2.253536*i,1.)*i,0.5)+0.5));\n    }\n    float sky = (uv.y-0.5);\n    fragColor += range(mix(uv.x/sky/2.,2.,step(0.5,(uv.y))), -0.01+path(iTime*3.-1./(sky))/20., 0.01+path(iTime*3.-1./(sky))/20.)*vec4(0.3, 0.15, 0,1);\n    \n    fragColor += vec4(Sspruce(0., 20., 30., uv)+\n                    Sspruce(0.2, 50., 70., uv)+\n                    Sspruce(0.4, 10., 110., uv)+\n                    Sspruce(0.6, 130., 170., uv)+\n                    Sspruce(0.8, 190., 230., uv)+\n                    Sspruce(0.1, 290., 310., uv)+\n                    Sspruce(0.3, 370., 430., uv)+\n                    Sspruce(0.5, 470., 530., uv)+\n                    Sspruce(0.7, 570., 670., uv)+\n                    Sspruce(0.9, 710., 730., uv),1);\n\n    fragColor += fragColor==vec4(0.,0.,0.,1.)?mix(vec4(0.03,0.20,0.01,1.0),vec4(0.1, 0.1, 0.6, 0.1),smoothstep(0.48, 0.51, uv.y)):vec4(0.);\n    \n}","name":"Image","description":"","type":"image"}]}