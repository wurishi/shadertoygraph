{"ver":"0.1","info":{"id":"dtBBDD","date":"1694049922","viewed":27,"name":"arc origin bug","username":"shadertoyacc","description":"anyone know how to make this not clip past origin?","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["bug","arc"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float pi = 3.1415926535897932384626433832795f;\n\nfloat get_angle(in vec2 ouv) {\n  float angle = acos(ouv.x / length(ouv));\n  angle = ouv.y < 0. ? (2. * pi - angle) : angle;\n  \n  return angle;\n}\n\nfloat arc(in vec2 uv, in vec2 centre, in float radius, in float thickness, in float start_angle, in float end_angle) {\n  vec2 ouv = uv - centre;\n  vec2 arc_start = vec2(radius * cos(start_angle), radius * sin(start_angle));\n  vec2 arc_end = vec2(radius * cos(end_angle), radius * sin(end_angle));\n\n  float border_thickness = abs(length(ouv) - radius);\n  float dist_start = length(ouv - arc_start);\n  float dist_end = length(ouv - arc_end);\n  float angle = get_angle(ouv);\n\n  float delta = fwidth(length(ouv));\n\n  if (angle > start_angle && angle < end_angle) {\n    return smoothstep(thickness - delta, thickness + delta, border_thickness);\n  } else if (angle < start_angle) {\n    return smoothstep(thickness - delta, thickness + delta, dist_start);\n  } else {\n    return smoothstep(thickness - delta, thickness + delta, dist_end);\n  }\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy - vec2(0.5); // Normalized pixel coordinates (from 0 to 1)\n    uv.x = uv.x * iResolution.x / iResolution.y;\n    \n    const vec2 centre = vec2(0.);\n    const float radius = 0.4;\n    const float thickness = 0.03;\n    \n    float strip3 = arc(uv, centre, radius, thickness, radians(-60.0), radians(60.0));\n    \n    fragColor = vec4((1.0 - strip3) * vec3(1.0, 0.0, 0.0), 1.0);\n}","name":"Image","description":"","type":"image"}]}