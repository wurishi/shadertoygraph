{"ver":"0.1","info":{"id":"WslfRM","date":"1587918990","viewed":363,"name":"Color blend","username":"disambiguator","description":"Quick experiment learning how to blend overlapping shapes","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["blend"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float circ(vec2 p, float radius) {\n    return step(length(p - 0.5), radius);   \n}\nfloat distanceBetween = 0.8;\n// https://iquilezles.org/articles/palettes\n// As t runs from 0 to 1 (our normalized palette index or domain), \n//the cosine oscilates c times with a phase of d. \n//The result is scaled and biased by a and b to meet the desired constrast and brightness.\nvec3 cosPalette( float t, vec3 a, vec3 b, vec3 c, vec3 d )\n{\n    return a + b*cos( 6.28318*(c*t+d) );\n}\nfloat blendOverlay(float base, float blend) {\n\treturn base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));\n}\nvec3 blendOverlay(vec3 base, vec3 blend) {\n\treturn vec3(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b));\n}\nvec3 blendOverlay(vec3 base, vec3 blend, float opacity) {\n\treturn (blendOverlay(base, blend) * opacity + base * (1.0 - opacity));\n}\nvec3 blendColors(vec3 c1, vec3 c2) {\n    if(length(c1) == 0.) { return c2; }\n    if(length(c2) == 0.) { return c1; }\n    return blendOverlay(c1, c2);\n}\nvec3 shapes(vec2 position, vec3 color) {\n    float radius = 0.3;\n    position = mod(position, distanceBetween);\n    float inCircle = circ(position, radius);\n    return color * inCircle;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 position = ( 2.* fragCoord - iResolution.xy ) /iResolution.y;\n    \n    float time = iTime;\n     float drift =  mod(time/5., distanceBetween);\n    vec3 col = cosPalette(0.5,vec3(0.1),vec3(0.3),vec3(1),vec3(time*0.01,time*0.1,time*.2));\n    vec3 col2 = cosPalette(0.3,vec3(0.4),vec3(0.5),vec3(1),vec3(time*0.1,time*0.1,time*.3));\n    vec3 col3 = cosPalette(0.1,vec3(0.2),vec3(0.1),vec3(1),vec3(time*0.2,time*0.4,time*.3));\n    vec3 col4 = cosPalette(0.2,vec3(0.6),vec3(0.3),vec3(1),vec3(time*0.4,time*0.2,time*.5));\n    vec3 shape = shapes(vec2(position.x + drift,                          position.y + distanceBetween/4.), vec3(.2, .62, 1.0));\n    vec3 shape2 = shapes(vec2(position.x + distanceBetween/3. - 2.*drift, position.y), col);\n    vec3 shape3 = shapes(vec2(position.x - drift,                         position.y + distanceBetween/2.), col3);\n    vec3 shape4 = shapes(vec2(position.x + 2.*drift,                      position.y + 3.*distanceBetween/4.), col2);\n     fragColor = vec4(blendColors(blendColors(blendColors(shape, shape2), shape3), shape4), 1.0);\n\n}","name":"Image","description":"","type":"image"}]}