{"ver":"0.1","info":{"id":"ltyBz1","date":"1541782646","viewed":265,"name":"Animated BW Mandala","username":"n01se","description":"Inspired by and forked from https://www.shadertoy.com/view/4s3yDr","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["2d","bw","mandala"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.141592\n#define TAU 2.0*PI\n\nvoid amod(inout vec2 p, float c) {\n    float m = TAU / c;\n    float a = mod(atan(p.x, p.y)-m*.5, m) - m*.5;\n    p = vec2(cos(a), sin(a)) * length(p);\n}\n\nvoid mo(inout vec2 p, vec2 d) {\n    p = abs(p) - d;\n    if(p.y>p.x)p=p.yx;\n}\n\nmat2 r2d(float a) {\n    float c = cos(a), s = sin(a);\n    return mat2(c, s, -s, c);\n}\n\nfloat smooth_stairs(float x) {\n    return tanh(5.*(x-floor(x)-0.5))/tanh(2.5)*0.5+floor(x)+0.5;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = ( fragCoord - .5*iResolution.xy ) / iResolution.y;\n    //vec2 mouse = iMouse.xy / iResolution.xy;\n    //uv.y = abs(uv.y);\n    \n    uv *= 3.0;\n    //amod(uv, 5.5+sin(iTime*0.2)*2.5);\n    float nrays = abs(mod(iTime*0.3, 10.)-5.);\n    amod(uv, 8.-smooth_stairs(nrays));\n    \n    mo(uv, vec2(1.2+sin(iTime*0.3), 0.6+sin(iTime*0.5)*0.3));\n    uv *= r2d(PI/12.-PI/8.*mod(iTime*0.2, 16.));\n    mo(uv, vec2(1.1+sin(iTime*0.5)*0.7, 0.4+0.5*1.5));\n    uv *= r2d(PI/6.-mod(iTime*0.25, 12.0)*PI/6.0);\n    mo(uv, vec2(.7+sin(iTime*0.45)*0.2, .2));\n    \n    //uv *= 10.;\n    uv *= 30.;\n    float l = min(abs(uv.x), abs(uv.y));\n    //float l = max(abs(uv.x), abs(uv.y));\n    //float l = abs(uv.x) + abs(uv.y);\n    float d = sin(l) - .3;\n    \n    d = smoothstep(0., fwidth(d), d);\n    fragColor = vec4(sqrt(d));\n}","name":"Image","description":"","type":"image"}]}