{"ver":"0.1","info":{"id":"msjSRD","date":"1670018698","viewed":163,"name":"rotating flowers and shapes","username":"garabatospr","description":"rotating flowers and shapes\n","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["shapes","polar"],"hasliked":0,"parentid":"ddfXWX","parentname":"ovals and waves"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415926535897932384626433832795\n#define len 5.0\n\n// Author: Elio Ramos (@garabatospr instagram, twitter) \n\n// color palette\n\nconst vec3 COLORS[]=vec3[](\n\tvec3(0.949,0.922,0.541),\n    vec3(0.996,0.816,0.),\n    vec3(0.988,0.518,0.0),\n    vec3(0.929,0.212,0.102),\n    vec3(0.886,0.941,0.953),\n    vec3(0.702,0.863,0.878),\n    vec3(0.267,0.392,0.631),\n    vec3(0.125,0.188,0.318),\n    vec3(1.,0.773,0.78),\n    vec3(0.953,0.596,0.765),\n    vec3(0.812,0.22,0.584),\n    vec3(0.427,0.208,0.541),\n    vec3(0.024,0.706,0.69),\n    vec3(0.294,0.541,0.373)  \n);\n\n\nfloat Hash21(vec2 p) {\n    p = fract(p*vec2(234.234, 435.145));\n    p += dot(p, p+34.236767);\n    return fract(p.x*p.y);\n}\n\n// get \"random\" color based on location \n\nvec3 getColor(vec2 id,float seed)\n{\n  return COLORS[int(14.*Hash21(id*seed))];\n}\n\n// standard 2d rotation matrix \n\nmat2 rotate2d(in float radians)\n{\n  float c = cos(radians);\n  float s = sin(radians);\n  return mat2(c, -s, s, c);\n}\n\n// distortion function \n\n\nvec2 distort(vec2 uv,float freq)\n{\n  float freq1 = 2.;\n  float freq2 = 2.;\n\n  float x = uv.x;\n  float y = uv.y;\n\n  return vec2(x + cos(freq1*y + freq*iTime)*0.1,y + cos(freq2*x + freq*iTime)*0.1);\n}\n\n// draw flowers with polar coordinates \n\nvec3 drawFlower(vec2 uv,vec2 offset,float rad,vec3 col,vec3 col1,vec3 col2)\n{\n   float n = floor(10.*Hash21(offset)); \n   uv -= offset; \n   uv *= rotate2d(iTime*0.05);\n   float a = atan(uv.y,uv.x);\n   float r = length(uv);\n   float f = rad*cos(n*a);\n   float blur = 0.0001;\n   //return mix(mix(col1,col2,r),col,smoothstep(f-blur,f+blur,r));\n   return mix(mix(col1,col2,r),col,smoothstep(-1.5,0.,(r-f) / fwidth(r-f)));\n   \n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec2 uv = fragCoord/iResolution.xy -0.5;\n    \n    uv.x *= iResolution.x/iResolution.y;\n \n    uv *= 5.0; \n \n    uv = distort(uv,1.);\n \n    vec3 col = mix(COLORS[3],COLORS[2],uv.y);\n    \n    \n    for(float x = -len;x <= len;x+=1.)\n    {\n      for(float y = -len;y <= len;y+=1.)\n      {\n        vec2 pos = vec2(x,y) + 0.5;\n\n        float rang  = 2.0*PI*(Hash21(pos*678.));\n        float radFlower = floor(Hash21(pos*945.)*2. + 0.5);\n        float dir = sign(0.5 - Hash21(pos*145.));\n        uv *= rotate2d(rang*dir*iTime*0.01);\n        col = drawFlower(uv,pos,radFlower,col,getColor(pos,567.),getColor(pos,145.));\n        \n      }\n    } \n   \n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}