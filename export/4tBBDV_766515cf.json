{"ver":"0.1","info":{"id":"4tBBDV","date":"1517172573","viewed":166,"name":"Wave2d","username":"jt","description":"Testing buffers - simple wave simulation with time-reversal after 30 seconds.","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["wave"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Wave2d - 2018 by JT (https://www.shadertoy.com/view/4tBBDV)\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    ivec2 p = ivec2(fragCoord);\n    fragColor = vec4(0);\n    fragColor.z = texelFetch(iChannel0, p, 0).z; // pressure\n    fragColor.xy = texelFetch(iChannel1, p, 0).xy; // velocity\n    //fragColor.xy = texelFetch(iChannel2, p, 0).xy; // acceleration\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// Wave2d - 2018 by JT (https://www.shadertoy.com/view/4tBBDV)\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    ivec2 p = ivec2(fragCoord);\n    ivec2 s = ivec2(textureSize(iChannel0, 0));\n    ivec2 r = (p + ivec2(1,0)) % s;\n    ivec2 u = (p + ivec2(0,1)) % s;\n    float k = 1.0;\n    fragColor = vec4(0);\n    if(iFrame > 0)\n    {\n        // update acceleration (pressure-gradient)\n    \tfragColor.x = (texelFetch(iChannel0, p, 0).z - texelFetch(iChannel0, r, 0).z) * k;\n    \tfragColor.y = (texelFetch(iChannel0, p, 0).z - texelFetch(iChannel0, u, 0).z) * k;\n    }\n}\n","name":"Buf A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"// Wave2d - 2018 by JT (https://www.shadertoy.com/view/4tBBDV)\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    ivec2 p = ivec2(fragCoord);\n    ivec2 s = ivec2(textureSize(iChannel0, 0));\n    float dt = (mod(iTime, 60.0) < 30.0 ? +1.0 : -1.0) * 0.5;//iTimeDelta;\n    fragColor = vec4(0);\n    if(iFrame > 0)\n    {\n        // update velocity (add acceleration)\n    \tfragColor = texelFetch(iChannel1, p, 0) + texelFetch(iChannel0, p, 0) * dt;\n    }\n}\n","name":"Buf B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"// Wave2d - 2018 by JT (https://www.shadertoy.com/view/4tBBDV)\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    ivec2 p = ivec2(fragCoord);\n    ivec2 s = ivec2(textureSize(iChannel0, 0));\n    ivec2 l = (p + s - ivec2(1,0)) % s;\n    ivec2 d = (p + s - ivec2(0,1)) % s;\n    float dt = (mod(iTime, 60.0) < 30.0 ? +1.0 : -1.0) * 0.5;//iTimeDelta;\n    fragColor = vec4(0);\n    if(iFrame > 0)\n    {\n        // update pressure (add velocity)\n        fragColor = texelFetch(iChannel1, p, 0);\n    \tfragColor.z += (texelFetch(iChannel0, l, 0).x - texelFetch(iChannel0, p, 0).x) * dt;\n    \tfragColor.z += (texelFetch(iChannel0, d, 0).y - texelFetch(iChannel0, p, 0).y) * dt;\n    }\n    else\n    {\n        vec2 q = 2.0 * vec2(p) / vec2(s) - 1.0;\n      \tfloat d = length(q);\n      \tfragColor.z = 10.0 * pow(exp(-d*d), 500.0);\n    }\n}\n","name":"Buf C","description":"","type":"buffer"}]}