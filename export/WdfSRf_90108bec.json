{"ver":"0.1","info":{"id":"WdfSRf","date":"1551740364","viewed":100,"name":"Mandelbrot 3","username":"saidwho12","description":"Just another mandelbrot shader","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["2d","mandelbrot","animation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#define AA 2\n#define LOG2 0.30102999566\n#define PI 3.14159\n#define TAU 6.28\n\n#define time (.04*iTime)\n\nvec2 cmul(in float a1, in float b1, in float a2, in float b2) {\n\t\n    // (a1+b1)*(a2+b2)\n    // a1*a2 + a1*b2i + b1i*a2 + b1i*b2i\n    // a1*a2 + a1*b2i + b1i*a2 -b1i*b2i\n    return vec2(a1*a2 - b1*b2, a1*b2 + b1*a2);\n}\n\nvec2 cexp2(in float a, in float b) {\n    // (a+bi)(a+bi)\n    // a^2 + abi + abi + bi^2\n    // a^2 + 2abi + bi^2\n    // (a^2, 2abi + bi^2)\n    // (a^2 - b^2, 2abi)\n\treturn vec2(a*a - b*b, 2.*a*b);\n}\n\nvec3 hsv(in float x) {\n\treturn sin( TAU*(x + vec3(0,2,4)/3.) );\n}\n\nvec3 fire_color(float x)\n{\n    return\n        // red\n        vec3(1., 0., 0.) * x\n        // yellow\n        + vec3(1., 1., 0.) * clamp(x - .5, 0., 1.)\n        // white\n        + vec3(1., 1., 1.) * clamp(x - .7, 0., 1.);\n}\n\nvoid mainImage( out vec4 O, in vec2 u )\n{\n    O-=O;\n    \n    float S = TAU;\n    float i, N = 256., r = 2., zoom = exp(-5. + 5.*cos(S*time) );\n    vec2 L[] = vec2[](\n        vec2(-0.7453,0.1127),\n        vec2(-0.7463, 0.1102),\n        vec2(-1.25066, 0.02012),\n        vec2(-0.925, 0.266)\n    );\n    \n    vec2 R = iResolution.xy,\n        mo = iMouse.xy, p = iMouse.z > 0. ?\n        (mo+mo-R)/R.y :\n    \tL[int(floor(time))%L.length()];\n    \n    \n    for(int n = 0; n<AA; ++n) {\n        for(int m = 0; m<AA; ++m) {\n            vec2 z = vec2(0), c = (2.* (u + vec2(n,m)/float(AA)) -R)/R.y*zoom + p;\n            \n            i = -1.;\n            while(++i<N && !(length(z = cexp2(z.x,z.y)+c) > r));\n\n            O.w += (i+1.-log(log(length(z)+r))/LOG2);\n    \t}\n\t}\n\n\tO.rgb += fire_color( O.w/float(AA*AA)/N );\n    O.rgb = sqrt(O.rgb);\n}","name":"Image","description":"","type":"image"}]}