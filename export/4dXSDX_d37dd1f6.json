{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#ifdef GL_ES\nprecision mediump float;\n#endif\n\nfloat t;\nfloat obj;\n\nfloat distFunc(vec3 p,vec2 uv){\n    float ts=sin(t);\n    float tc=cos(t);\n    float tws=sin(uv.y*sin(t)*6.);\n    float twc=cos(uv.y*sin(t)*6.);\n    p=mat3(twc,0,-tws,0,1,0,tws,0,twc)*p;\n    p=mat3(tc,-ts*tc,ts*ts,ts,tc*tc,-ts*tc,0,ts,tc)*p;\n    float distW=999.,distR=999.;\n    vec3 d;\n    for(float c=0.;c<8.;c++)\n    {\n\t    d=abs(p+vec3(mod(c,2.)*.2-.1,mod(floor(c/2.),2.)*.2-.1,mod(floor(c/4.),2.)*.2-.1))-vec3(.1,.1,.1);\n\t    if(mod(c+floor(c/2.)+floor(c/4.),2.)==0.)\n        {\n            distW=min(distW,min(max(d.x,max(d.y,d.z)),0.0)+length(max(d,0.0)));\n        }\n        else\n        {\n            distR=min(distR,min(max(d.x,max(d.y,d.z)),0.0)+length(max(d,0.0)));\n        }\n    }\n    if(distW<=distR){obj=1.;return distW;}\n    else{obj=0.;return distR;}\n}\n\nvec3 getNormal(vec3 p,vec2 uv){\n\tfloat d=0.0001;\n\treturn normalize(vec3(\n\t\tdistFunc(p+vec3(d,0.,0.),uv)-distFunc(p+vec3(-d,0.,0.),uv),\n\t\tdistFunc(p+vec3(0.,d,0.),uv)-distFunc(p+vec3(0.,-d,0.),uv),\n\t\tdistFunc(p+vec3(0.,0.,d),uv)-distFunc(p+vec3(0.,0.,-d),uv)\n\t));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\nt=iTime;\n\n\tvec2 uv=(fragCoord.xy*2.-iResolution.xy)/iResolution.x;\n\tvec3 camP=vec3(0.,0.,1.);\n\tvec3 camC=vec3(0.);\n\tvec3 camU=vec3(0.,1.,0.);\n\tvec3 camS=cross(normalize(camC-camP),camU);\n\tvec3 ray=normalize(camS*uv.x+camU*uv.y+(camC-camP));\n\t\n\tfloat dist=0.;\n\tfloat rayL=0.;\n\tvec3 rayP=camP;\n\tfor(int i=0;i<64;i++){\n\t\tdist=distFunc(rayP,uv);\n\t\trayL+=dist;\n\t\trayP=camP+ray*rayL;\n\t}\n\t\n\tif(abs(dist)<0.001){\n\t\tfloat frag=dot(-ray,getNormal(rayP,uv));\n\t\tfragColor=vec4(vec3(frag)*vec3(1.,obj,obj)*.5/rayL,1.);\n\t}else{\n\t\tfragColor=vec4(vec3(0.,0.,0.), 1.0);\n\t}\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4dXSDX","date":"1407158011","viewed":245,"name":"Box twist","username":"FMS_Cat","description":"twist! twist!!\n( yes i'm doing ugly texturing )","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["3d"],"hasliked":0,"parentid":"","parentname":""}}