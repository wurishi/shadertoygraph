{"ver":"0.1","info":{"id":"3lfSzj","date":"1563476190","viewed":334,"name":"Triangle Trial","username":"Nocks_on","description":"my first shader.\ntriangle + rotate + scale + anti-alias","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["learning"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415\n\nfloat triangle(vec2 r, vec2 center, float a) {\n    float ret = 1.;\n    float d = 0.005;\n    float x = r.x - center.x;\n    float y = r.y - center.y;\n    \n    float v1 = (sqrt(3.)*x - y + sqrt(3.)*a/3.)/2.;\n    float v2 = (-sqrt(3.)*x - y + sqrt(3.)*a/3.)/2.;\n    float v3 = y + sqrt(3.)*a/6.;\n    \n    ret *= smoothstep(-d, d, v1);\n    ret *= smoothstep(-d, d, v2);\n    ret *= smoothstep(-d, d, v3);\n    \n    return ret;\n}\n\nfloat interval(vec2 r, float T) {\n\tfloat x = mod(r.x, T);\n    float half_T = T/2.;\n    float d = 0.005;\n    float ret = 0.0;\n    if (x < d) {\n       ret = smoothstep(-d, d, x); \n    } else if (d <= x && x <= half_T-d) {\n        ret = 1.0;\n    } else if (half_T-d < x && x < half_T+d) {\n        ret = 1.0 - smoothstep(-d, d, x-half_T);\n    } else if (half_T+d <= x && x <= T-d) {\n        ret = 0.0;\n    } else if (T-d < x) {\n     \tret = smoothstep(-d, d, x-T);\n    }\n    return ret;\n}\n\nmat2 rotate(float angle) {\n    return mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n}\n\nmat2 scale(float s) {\n\treturn mat2(s, 0.0, 0.0, s);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // position\n    vec2 r = (fragCoord.xy - 0.5*iResolution.xy)/ iResolution.y;\n\n    // color\n    float t = iTime;\n    float theta = t;\n    float s = sin(t);\n    vec2 r1 = r;\n    r1 *= scale(s);\n    r1 *= rotate(theta);\n    float val = triangle(r1, vec2(0., 0.), 0.7);\n    vec2 r2 = r;\n    r2 *= rotate(-theta/2.);\n    val *= interval(r2, 0.1); \n    vec3 col = vec3(clamp(val, 0.1, 0.9));\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}