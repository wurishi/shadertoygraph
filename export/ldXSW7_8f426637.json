{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"webcam","id":"4sf3zn","filepath":"/presets/webcam.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"texture","id":"4sXGRn","filepath":"/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"mat3 gx = mat3(\n\t 1.0,  2.0,  1.0,\n\t 0.0,  0.0,  0.0,\n\t-1.0, -2.0, -1.0\n);\n\nmat3 gy = mat3(\n\t-1.0, 0.0, 1.0,\n\t-2.0, 0.0, 2.0,\n\t-1.0, 0.0, 1.0\n);\n\nfloat intensity(vec3 pixel) {\n\treturn (pixel.r + pixel.g + pixel.b) / 3.0;\n}\n\nfloat pixelIntensity(vec2 uv, vec2 d) {\n\tvec3 pix = texture(iChannel0, uv + d*2. / iResolution.xy).rgb;\n\treturn intensity(pix);\n}\n\n\nfloat convolv(mat3 a, mat3 b) {\n\tfloat result = 0.0;\n\n\tfor (int i=0; i<3; i++) {\n\t\tfor (int j=0; j<3; j++) {\n\t\t\tresult += a[i][j] * b[i][j];\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfloat sobel(vec2 uv) {\n\tmat3 pixel = mat3(0.0);\n\n\tfor (int x=-1; x<2; x++) {\n\t\tfor (int y=-1; y<2; y++) {\n\t\t\tpixel[x+1][y+1] = pixelIntensity(uv, vec2(float(x), float(y)));\n\t\t}\n\t}\n\n\tfloat x = convolv(gx, pixel);\n\tfloat y = convolv(gy, pixel);\n\n\treturn sqrt(x * x + y * y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\t\n\tfloat width = .01;\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\t\n\tfloat s = sobel(uv);\n\t\n\tfloat blackboard = texture(iChannel1,uv).r;\n\t\n\tfloat color = max(s,0.)*(blackboard)+blackboard*.3;\n\tfragColor = vec4(color);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":true,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"ldXSW7","date":"1402102552","viewed":424,"name":"Sobel chalk on blackboard","username":"run","description":"Inspired by https://www.shadertoy.com/view/4df3RS","likes":5,"published":1,"flags":2,"usePreview":0,"tags":["sobelchalkonblackboard"],"hasliked":0,"parentid":"","parentname":""}}