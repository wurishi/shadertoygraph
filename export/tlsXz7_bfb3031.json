{"ver":"0.1","info":{"id":"tlsXz7","date":"1564669479","viewed":285,"name":"Coaster Party","username":"104","description":"curves\n& modulation\n& curves\n& modulation","likes":19,"published":1,"flags":0,"usePreview":0,"tags":["2d","festive"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.141592654;\n\nvec3 hash32(vec2 p){\n\tvec3 p3 = fract(vec3(p.xyx) * vec3(.1031, .1030, .0973));\n    p3 += dot(p3, p3.yxz+19.19);\n    return fract((p3.xxy+p3.yzz)*p3.zyx);\n}\nvec4 disco(vec2 uv) {\n    float v = abs(cos(uv.x * PI * 2.) + cos(uv.y *PI * 2.)) * .5;\n    uv.x -= .5;\n    vec3 cid2 = hash32(vec2(floor(uv.x - uv.y), floor(uv.x + uv.y))); // generate a color\n    return vec4(cid2, v);\n}\nmat2 rot2D(float r){\n    float c = cos(r), s = sin(r);\n    return mat2(c, s, -s, c);\n}\nvec2 warp(vec2 uv, float f, out float sd) {\n    float d = length(mod(uv+1.,2.)-1.);\n    sd = d-1.;\n    return uv*f*(1.-d);\n}\n\nvec4 purty(vec2 V, float t, float f) {\n    float t2 = t*.2;\n    V *= rot2D(t2*.25);\n    V += vec2(sin(t2), cos(t2));\n\n    float sd;\n    vec2 uvP = warp(V, f, sd);\n\n    uvP += t*.2;\n\n    vec4 d = disco(uvP);\n    vec3 col = d.rgb * pow(d.a, .15);\n\n    col.rg *= rot2D(.1);\n    col.br *= rot2D(-.2);\n\n    float a = pow(smoothstep(0.,1.,-sd), .4);\n    return vec4(col, a);\n}\nvoid mainImage(out vec4 o, vec2 O)\n{\n    float t = iTime+1e3;\n    vec2 R = iResolution.xy\n        ,V=(O-.5*R)/R.y\n        ,N=O/R-.5\n        ,P=O-R*.5;\n    V *= 4.;\n    \n    vec4 p =purty(V, t, 4.);\n    V += 1.;\n    V = -V * 2.;\n    vec4 p2 = purty(V, t, 1.);\n    p2.rgb *= .15;\n    p2.rgb = mix(p2.rgb,vec3(p2.r+p2.g+p2.b)/3.,.9);//desaturate\n\n    o = mix(p2,p,smoothstep(0.,.05,iMouse.z > 0. ? 0. : p.a));//mix the lower layer where a = 0\n    \n    o=clamp(o,0.,1.);\n    o = pow(o,o-o+.5);\n    o *= 1.-dot(N,N*2.);\n    o *= 1.-step(.42,abs(N.y));\n    o.a= 1.;\n}\n\n\n\n\n","name":"Image","description":"","type":"image"}]}