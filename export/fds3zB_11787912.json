{"ver":"0.1","info":{"id":"fds3zB","date":"1616171349","viewed":133,"name":"20210320_wavetable","username":"FMS_Cat","description":"haha","likes":3,"published":1,"flags":8,"usePreview":0,"tags":["sound"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Ref: https://iquilezles.org/articles/distfunctions2d\nfloat sdSegment( in vec2 p, in vec2 a, in vec2 b ) {\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\nvec2 wavetable( float phase, float radius, vec2 offset ) {\n  float p = TAU * phase;\n  return 1.0 - 2.0 * texture( iChannel0, radius * vec2( sin( p ), cos( p ) ) + offset ).xy;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 tex = texture( iChannel0, uv );\n    \n    float dist = 1E9;\n    vec3 color = tex.xyz;\n    vec2 w0 = fract( genUv( iTime ) );\n    \n    for ( int i = 0; i < 500; i ++ ) {\n        float ph = float( i ) / 500.0;\n        vec2 w1 = fract( genUv( iTime - ph * 0.01 ) );\n        float distSeg = sdSegment( uv, w0, w1 ) - 0.004;\n        \n        if ( distSeg < min( 0.0, dist ) ) {\n            dist = distSeg;\n            color += sin( vec3( 0.0, 2.0, 4.0 ) + 2.0 * exp( -2.0 * ph ) + 3.2 );\n        }\n        w0 = w1;\n    }\n\n    fragColor = vec4( color, 1.0 );\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"vec2 mainSound( int samp, float time ) {\n    vec2 wave = genWave( iChannel0, time );\n    return wave;\n}\n","name":"Sound","description":"","type":"sound"},{"inputs":[],"outputs":[],"code":"const float TAU = 6.28318530718;\n\nvec2 wavetableUv( float phase, vec2 radius, vec2 offset ) {\n    float p = TAU * phase;\n    return radius * vec2( sin( p ), cos( p ) ) + offset;\n}\n\nvec2 genUv( float time ) {\n    return wavetableUv(\n        40.0 * time,\n        vec2( 0.07 + 0.03 * sin( TAU * 750.0 * time ) * sin( 6.0 * time ) ),\n        vec2( 0.5 + 0.09 * sin( TAU * 450.0 * time ) * sin( 6.0 * time ) )\n    );\n}\n\nvec2 genWave( sampler2D table, float time ) {\n    return 2.0 * texture( table, genUv( time ) ).xy - 1.0;\n}\n","name":"Common","description":"","type":"common"}]}