{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"float rand(vec3 co)\n{\n    return -1.0 + fract(sin(dot(co.xy,vec2(12.9898 + co.z,78.233))) * 43758.5453) * 2.0;\n}\n\nfloat linearRand(vec3 uv)\n{\n\tvec3 iuv = floor(uv);\n\tvec3 fuv = fract(uv);\n\t\n\tfloat v1 = rand(iuv + vec3(0,0,0));\n\tfloat v2 = rand(iuv + vec3(1,0,0));\n\tfloat v3 = rand(iuv + vec3(0,1,0));\n\tfloat v4 = rand(iuv + vec3(1,1,0));\n\t\n\tfloat d1 = rand(iuv + vec3(0,0,1));\n\tfloat d2 = rand(iuv + vec3(1,0,1));\n\tfloat d3 = rand(iuv + vec3(0,1,1));\n\tfloat d4 = rand(iuv + vec3(1,1,1));\n\t\n\treturn mix(mix(mix(v1,v2,fuv.x),mix(v3,v4,fuv.x),fuv.y),\n\t\t       mix(mix(d1,d2,fuv.x),mix(d3,d4,fuv.x),fuv.y),\n\t\t\t   fuv.z);\n}\n\nfloat textureNoise(vec3 uv)\n{\n\tfloat c = (linearRand(uv * 1.0) * 32.0 +\n\t\t\t   linearRand(uv * 2.0) * 16.0 + \n\t\t\t   linearRand(uv * 4.0) * 8.0 + \n\t\t\t   linearRand(uv * 8.0) * 4.0 + \n\t\t\t   linearRand(uv * 16.0) * 2.0 + \n\t\t\t   linearRand(uv * 32.0) * 1.0) / 32.0;\n\treturn c * 0.5 + 0.5;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tuv = uv * 2.0 - 1.0;\n\tuv.x *= iResolution.x / iResolution.y;\n\t\n\tfloat time = iTime + 2.49;\n\t\t\n\tfloat wave = time * 2.0;\n\tfloat waveAnim = wave;//floor(wave) + 0.5 + 0.5 * sin(-3.1415 * 0.5 + fract(wave) * 3.1415);\n\tfloat water = textureNoise(vec3(uv * 16.0 + vec2(0,time * 4.0), waveAnim));\n\t\n\tfloat cloud = textureNoise(vec3(uv * 1.0 + vec2(0,time * 8.0), iTime));\n\t\n\tfloat islands = textureNoise(vec3(uv * 2.0 + vec2(0,time * 0.5), 0.0));\n\tfloat islandsMix = 1.0;\n\tvec4 islandsCol = vec4(0.5,0.3,0.1,1);\n\tif (islands < 0.1 + cos(time) * 0.01) {\n\t\tislandsMix = clamp(islands / 0.1, 0.0, 1.0) * 0.3;\n\t\tislandsCol = mix(vec4(0.1,0.4,0.05,1),vec4(0.5,0.3,0.1,1),islands / (0.1 + cos(time) * 0.01));\n\t} else if (islands < 0.3) {\n\t\tislandsMix = islands / 0.3;\n\t}\n\t\n\tfragColor = \tmix(vec4(1,1,1,1),\n\t\t\t\t\t   \tmix(islandsCol,\n\t\t\t\t\t   \t\tmix(vec4(0,0,0.6,1),vec4(0,0.1,0.7,1),water),\n\t\t\t\t\t\tislandsMix),\n\t\t\t\t\tcloud);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MsS3Wz","date":"1385997941","viewed":1095,"name":"Perlin Archipelago","username":"HLorenzi","description":"Flying over an archipelago! Everything is Perlin-noise-generated.","likes":15,"published":1,"flags":0,"usePreview":0,"tags":["noise","cloud","perlin","water","random","ocean","island","archipelago"],"hasliked":0,"parentid":"","parentname":""}}