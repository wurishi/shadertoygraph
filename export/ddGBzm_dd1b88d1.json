{"ver":"0.1","info":{"id":"ddGBzm","date":"1698051782","viewed":86,"name":"GPU postprocessing and samplers","username":"chenxianming","description":"llllocked","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","fxaa"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define I iResolution\n#define PI 3.14159\n#define t iTime\n#define r3( r ) mat3( cos(r), sin(r), 0., -sin(r), cos(r), 0., 0., 0., 1. )\n#define m max\n#define n min\n\nfloat a( vec3 p, vec3 u ){\n    return m(\n        m(\n            abs( p.x ) - u.x,\n            abs( p.y ) - u.y\n        ),\n        abs( p.z ) - u.z\n    );\n}\n\nfloat f( vec3 p ){\n    p.y = abs( p.y ) - .4;\n    return a( p, vec3( .7, .2, .2 ) );\n}\n\nfloat F( vec3 p ){\n    return n(\n        f( p ),\n        a( p + vec3( .5, .4, 0. ), vec3( .2, 1., .2 ) )\n    );\n}\n\nfloat X( vec3 p ){\n    p.y += .3;\n    return n(\n        a( p * r3( .25 * PI ), vec3( .2, 1.2, .2 ) ),\n        a( p * r3( -.25 * PI ), vec3( .2, 1.2, .2 ) )\n    );\n}\n\nfloat A( vec3 p ){\n    vec3 p2 = p;\n    p.y += .2;\n    p2.y += .5;\n    p.x = abs( p.x ) - .3;\n    return n(\n        a( p * r3( .15 * PI ), vec3( .2, 1., .2 ) ),\n        a( p2, vec3( .4, .2, .2 ) )\n    );\n}\n\n\nfloat df( vec3 p ){\n    float d = .1;\n\n    \n    p.yzx *= r3( cos( t ) * .15 );\n    p.xzy *= r3( cos( t ) * .3 );\n    p.zyx *= r3( -cos( t ) * .7 );\n    \n    p.x += 3.;\n    p.y += cos( p.x - t * 5. ) * .1;\n    \n    d = n(\n        d,\n        F( p )\n    );\n    \n    p.x -= 2.;\n    \n    d = n(\n        d,\n        X( p )\n    );\n    \n    p.x -= 2.;\n    \n    d = n(\n        d,\n        A( p )\n    );\n    \n    p.x -= 2.;\n    \n    d = n(\n        d,\n        A( p )\n    );\n\n    return d;\n}\n\n\nvoid mainImage( out vec4 U, in vec2 V )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 u = ( V * 2. - I.xy ) / n( I.x, I.y );\n    \n    vec3 c, p, o = vec3( 0., 0., -3. ), r = vec3( u * .9, 1. );\n    float t, d, i, dp, e = sqrt( 5e-4 );\n\n    for( ; i < 128.; i++ )\n        p = o + r * t,\n        d = df( p ),\n        dp = ( 1. - abs( d ) / e ),\n        c += ( dp > 0. ) ? .5 * dp / t : 0.,\n        t += max( abs( d ) * .66667, e * .9 );\n    \n    i = 0., e = sqrt( 5e-3 );\n    \n    for( ; i < 32.; i++ )\n        p = o + r * t,\n        p.x += cos( p.y - t ) * .1,\n        p = mod( p, vec3( 8., 3., 2. ) ) - vec3( 4., 1.5, 1. ),\n        d = df( p ),\n        dp = ( 1. - abs( d ) / e ),\n        c -= ( dp > 0. ) ? .8 * dp / t : 0.,\n        t += max( d, e * .9 );\n\n\n    // Output to screen\n    U = vec4(c,1.0);\n}","name":"Image","description":"","type":"image"}]}