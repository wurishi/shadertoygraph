{"ver":"0.1","info":{"id":"sdKBzw","date":"1657893700","viewed":67,"name":"Grille séquencée","username":"rid","description":"Exemple de moire avec une grille séquencée \n\nCliquer sur le canvas pour faire apparaître et glisser une grille par-dessus et initier l'effet de mouvement.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["moire","grille"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 bgd_color  = vec3(1.);\nvec3 grid_color = vec3(.9, .65, .1);\nvec2 period     = vec2(10., 200.);\nfloat ratio     = 0.4;\nfloat steps     = 4.0; \nfloat delta     = 0.0;\n\nfloat grid_swipe_speed = 18.; // (px per second)\n\nvec4 topGrid(vec2 uv, float t_delta) {\n\n    float x = fract(uv.x + t_delta);\n    \n    float a = smoothstep(ratio, ratio + 1.5/period.x, x);\n\n    a = a*clamp(-20.0*(x-0.4)*(x - 1.0), 0.0, 1.0);\n    \n    return vec4(grid_color, a);\n}\n\nvec4 seqGrid(vec2 uv) {\n    \n    float y = floor(uv.y*steps)/steps;\n    float x = fract(uv.x + y + delta);\n    \n    float a = smoothstep(ratio, ratio + 1.5/period.x, x);\n    \n    return vec4(mix(bgd_color, grid_color, a), 1.0);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = fragCoord/period;\n    float grid_delta = iTime*grid_swipe_speed/period.x;\n\n    vec4 col = seqGrid(uv);\n    \n    if (0. < iMouse.z) {\n        vec4 t = topGrid(uv, grid_delta);\n        col = mix(col, t, t.a);\n    }\n    \n    // Output to screen\n    fragColor = col;\n}","name":"Image","description":"","type":"image"}]}