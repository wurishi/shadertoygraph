{"ver":"0.1","info":{"id":"WsXfRN","date":"1587739824","viewed":123,"name":"Double Slit Light","username":"dagelf","description":"Added mouse to https://www.shadertoy.com/view/tsKXDy\nClick and drag on the image ","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["light","doubleslit"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 hsv2rgb( in vec3 c )\n{\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n    return c.z * mix( vec3(1.0), rgb, c.y);\n}\n\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec3 lamdaToRgb(in float l)\n{\n    float m = map(l, 0.000000375, 0.000000800, 0., 10.);\n    vec3 col0 = vec3(0., 0., 0.);\n    vec3 col1 = vec3(0.5, 0., 1.);\n    vec3 col2 = vec3(0., 0., 1.);\n    vec3 col3 = vec3(0., 1., 1.);\n    vec3 col4 = vec3(0., 1., 0.);\n    vec3 col5 = vec3(1., 1., 0.);\n    vec3 col6 = vec3(1., 0., 0.);\n    vec3 col7 = vec3(0., 0., 0.);\n    return mix(col0, mix(col1, mix(col2, mix(col3, mix(col4, mix(col5, mix(col6, col7, smoothstep(7., 8., m)), smoothstep(6., 7., m)),smoothstep(4.5, 5.6, m)),smoothstep(2.5, 4.5, m)),smoothstep(2., 3., m)),smoothstep(1., 2., m)),smoothstep(0., 1., m));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float scale = 1.5;\n    float x=.0,y=.0;\n    vec2 uv = ((fragCoord-0.5*iResolution.xy)/iResolution.y)*scale;\n    \n    if ((iMouse.x+iMouse.y)==.0) {\n        x = .01; \n        y = .03; \n    } else {\n        x = iMouse.x/iResolution.x;\n        y = iMouse.y/iResolution.y;\n    };\n    \n    float a = x*0.001;  //slit distance\n    float b = y*0.0001; //slit width\n    float d = 10.;     //distance to screen\n    \n    float c = 299792458. ;      //speed of light\n    float f = 430000000000000.; //frequency of red light\n    \n    vec3 col = vec3(0.);\n    \n    //simulation of white light\n    \n    float FREQUENCY_SAMPLES = 100.;\n    float FREQEUNCY_FACTOR = 1.006;\n    \n    for(float i = 0.; i < FREQUENCY_SAMPLES; i++)\n    {\n        float l = c/f;\n        float k = (2.*3.141)/l;\n        float alpha = atan(uv.x/d);\n        float gamma = (k/2.)*b*sin(alpha);\n        float delta = (k/2.)*a*sin(alpha);\n        float I = pow(sin(gamma)/gamma, 2.)*pow(cos(delta), 2.);\n        I = 50.*I/FREQUENCY_SAMPLES*pow(10000., -abs(uv.y));\n        col += lamdaToRgb(l) * I;\n        f*= FREQEUNCY_FACTOR;\n    }\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}