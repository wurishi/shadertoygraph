{"ver":"0.1","info":{"id":"wlcGzN","date":"1575744023","viewed":292,"name":"Voronoi 3D_","username":"Anskiere","description":"-","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float rand(vec2 co)\n{\n    return fract(sin(dot(co.xy,vec2(65.9898,\n                                    78.233))) * 25758.5497);\n}\n\nfloat rand11(float x)\n{\n    return fract(sin(x * 35.7313) * 437.5453);\n}\n\nvec3 rand13(float x)\n{\n    vec3 r;\n    r.x = rand11(x);\n    r.y = rand11(r.x);\n    r.z = rand11(r.z);\n    \n    return r;\n}\n\nvec2 rand22(vec2 co)\n{\n    vec2 res;\n    res.x = rand(co);\n    res.y = rand11(res.x);\n\n    return res;\n}\n\nfloat rand31(vec3 co)\n{\n    return fract(sin(dot(co,vec3(65.9898,\n                                 78.233, 29.3471))) * 1537.5497);\n}\n\nvec3 rand33(vec3 co)\n{\n    float r1 = rand31(co);\n    float r2 = rand11(r1);\n    float r3 = rand11(r2);\n\n    return vec3(r1, r2, r3);\n}\n\n\nvec3 getPoint(vec3 ijk)\n{\n    vec3 p;\n    p = rand33(ijk);\n\n    return p;\n}\n\nfloat n(vec3 uv)\n{\n    vec3 ijk = floor(uv);\n    vec3 luv = fract(uv);\n\n    float d = 10000.;\n    vec3 di = ijk;\n\n    for(int i = -1; i <= 1; i++)\n    for(int j = -1; j <= 1; j++)\n    for(int k = -1; k <= 1; k++)\n    {\n    \tvec3 p = getPoint(ijk + vec3(i,j,k));\n        p += vec3(i,j,k);\n        float dist = distance(p, luv);\n\n        if (dist < d)\n        {\n            d = dist;\n            di = ijk + vec3(i,j,k);\n        }\n    }\n    \n    return rand31(di);\n}\n\nfloat noise(vec3 uv)\n{\n    float res;\n    int steps = 1;\n    float p = 1.;\n    \n    for (int i = 0; i < steps; i++)\n    {\n        res += n(uv * p) / p;\n        \n        p *= 2.;\n    }\n    \n    //res /= 2.;\n    \n    return res;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float t = iTime * .02;\n    vec3 uv = vec3(fragCoord.xy / iResolution.x, t);\n\n    uv *= 10.;\n\n\tfloat res = noise(uv);\n        \n    //res = pow(res, 1.);\n    vec3 col = rand13(res);\n\t//col *= res;\n\n    fragColor = vec4(col, 0);\n}","name":"Image","description":"","type":"image"}]}