{"ver":"0.1","info":{"id":"XltGWl","date":"1472402678","viewed":257,"name":"Shlick Phase Function","username":"nlguillemot","description":"Shlick phase function used as an approximation of the Henyey-Greenstein phase function. See https://www.shadertoy.com/view/4ttGWl","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["shlickfunction"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define M_PI 3.14159265359\n\nfloat Shlick(float k, float costh)\n{\n    return (1.0 - k * k) / (4.0 * M_PI * pow(1.0 + k * costh, 2.0));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // compute \"k\" from mouse X coordinate\n    float k = iMouse.x * 2.0 / iResolution.x - 1.0;\n    \n    // default input (for shadertoy preview)\n    if (iMouse.xy == vec2(0.0))\n        k = 0.7;\n    \n    // make position from -1 to 1 in x and y, with (0,0) in the center of the screen.\n    vec2 pos = fragCoord * 2.0 / iResolution.xy - vec2(1.0);\n    \n    // compute cos(theta) used as input to Shlick Phase Function\n    // = dot((1,0), pos) / (length((1,0)) * length(pos))\n    // = dot((1,0), pos) / length(pos)\n\tfloat costh = pos.x / length(pos);\n    \n    // compute Shlick Phase Function\n    float p = Shlick(k, costh);\n    \n    // convert to a color\n    vec4 color = vec4(vec3(p),1.0);\n    \n    // gamma-correct it\n    color.rgb = pow(color.rgb, vec3(1.0/2.2));\n    \n    // render it        \n    fragColor = color;\n}","name":"Image","description":"","type":"image"}]}