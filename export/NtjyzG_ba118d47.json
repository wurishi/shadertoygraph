{"ver":"0.1","info":{"id":"NtjyzG","date":"1649861703","viewed":158,"name":"mod of squares","username":"eiffie","description":"(n*n)%m","likes":9,"published":1,"flags":8,"usePreview":0,"tags":["mod"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//mod of squares by eiffie\n//The formula (i*i)%j returns interesting reflections and cycles as you take\n//consecutive integers i for any integer j. If j is divisible by 4 it cycles\n//twice in j consecutive integers. (Bottom half)\n\n//Looking at the difference in output for (n^p)%d as d increases with time\n//n with the x axis and p with the y axis (odd d on top, even d on bottom)\n//When d is a power of 2 the numerator is quickly bisected as the power \n//increases. (Top half of screen)\n#define rez iResolution.xy\nint pmod(int n, int p, int d){//(n^p)%d\n  if(p==0)return 1;\n  for(int i=1;i<p;i++)n*=(n%d);\n  return n%d;\n}\nvoid mainImage(out vec4 O, in vec2 U){\n  int y=int(floor(U.y/rez.y*4.)),n=int(floor(U.x)),p=int(floor(mod(U.y,rez.y*.25)/7.)),d=y+int(2.*floor(6.*iTime));\n  if(y<2){p=2;d=512+y;}\n  n=pmod(n,p,d);\n  float R=float(n)/float(d);\n  if(y<2)R=U.y-(float(y)+R)*rez.y*.25;\n  O=vec4(R,R,R,1);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"//a sample using the patterns from (i*i*i*i)%j as MIDI notes\n#define div 512\n#define div2 (div*2)\n#define pi 3.14159\nint scale(int note){//shifts dissonant tones into scale\n int n2=note % 12;\n if((n2==1)||(n2==4)||(n2==6)||(n2==9)||(n2==11))note=note-1;//minor \n return note;\n}\n// note number to frequency  from https://www.shadertoy.com/view/ldfSW2\nfloat ntof(int n){n=scale(n);return (n>0)?440.0 * pow(2.0, (float(n) - 67.0) / 12.0):0.0;}\nvec2 mainSound(int samp, float time){//i*i*i*i/j as a MIDI note shifted into a minor scale\n  int n1=int(floor(time*6.))%div2,n2=int(floor((time+.5)*6.))%div2;\n  n1=(n1*(n1*(n1*(n1%div2)%div2)%div2)%div2)/16;\n  n2=(n2*(n2*(n2*(n2%div)%div)%div)%div)/16;\n  return (sin(vec2(ntof(n1+36),ntof(n2+29))*mod(time*pi,pi))-pow(fract(vec2(ntof(n1/2+24))*time),vec2(2.,.5)))*.25;\n}","name":"Sound","description":"","type":"sound"}]}