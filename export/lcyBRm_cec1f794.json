{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"\n/*\n3d wave noise\nafl_ext 2018-2024\npublic domain\n*/\n\nfloat gw3d_hash(float p){\n    return fract(4768.1232345456 * sin(p));\n}\n\nvec2 gw3d_wavedx(vec3 position, vec3 direction, float speed, float frequency, float timeshift) {\n    float x = dot(direction, position) * frequency + timeshift * speed;\n    float wave = exp(sin(x) - 1.0);\n    float dx = wave * cos(x);\n    return vec2(wave, -dx);\n}\n\nfloat gw3d_seedWaves = 0.0;\nvec3 gw3d_randWaves(){\n    float x = gw3d_hash(gw3d_seedWaves);\n    gw3d_seedWaves += 1.0;\n    float y = gw3d_hash(gw3d_seedWaves);\n    gw3d_seedWaves += 1.0;\n    float z = gw3d_hash(gw3d_seedWaves);\n    gw3d_seedWaves += 1.0;\n    return vec3(x,y,z) * 2.0 - 1.0;\n}\n\nfloat getwaves3d(vec3 position, float dragmult, float timeshift){\n    float iter = 0.0;\n    float phase = 6.0;\n    float speed = 2.0;\n    float weight = 1.0;\n    float w = 0.0;\n    float ws = 0.0;\n    for(int i=0;i<20;i++){\n        vec3 p = gw3d_randWaves() * 1.21;\n        vec2 res = gw3d_wavedx(position, p, speed, phase, 0.0 + timeshift);\n        position -= normalize(position - p) * res.y * weight * dragmult * 0.01;\n        w += res.x * weight;\n        iter += 12.0;\n        ws += weight;\n        weight = mix(weight, 0.0, 0.2);\n        phase *= 1.2;\n        speed *= 1.02;\n    }\n    return w / ws;\n}\n\n// helper function\n\nvec3 polarToXyz(vec2 xy){\n    xy *= vec2(2.0 *3.1415,  3.1415);\n    float z = cos(xy.y);\n    float x = cos(xy.x)*sin(xy.y);\n    float y= sin(xy.x)*sin(xy.y);\n    return normalize(vec3(x,y,z));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n\tvec2 mouse = iMouse.xy / iResolution.xy;\n    vec3 col = vec3(1.0) * getwaves3d(polarToXyz(uv), 10.4, iTime);\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lcyBRm","date":"1733864735","viewed":222,"name":"Wave noise 3d","username":"afl_ext","description":"cheap and simple","likes":18,"published":3,"flags":0,"usePreview":0,"tags":["3d","noise","wave"],"hasliked":0,"parentid":"","parentname":""}}