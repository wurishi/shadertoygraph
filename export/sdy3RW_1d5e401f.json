{"ver":"0.1","info":{"id":"sdy3RW","date":"1631159845","viewed":514,"name":"Voxels in 428 chars","username":"Xor","description":"How'd I do? Should I publish the original?","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["voxel","golf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n    A tiny voxel renderer in only 480 chars.\n\n    You can turn the camera with the mouse.\n    The level of detail is adjustable!\n    Just change z = 8. to another scale.\n    \n    <512 Chars playlist: shadertoy.com/playlist/N3SyzR\n*/\n#define M (length(mod(a,4.)-2.)-2.)\n#define R *= mat2(cos(vec4(0,11,33,0)+c\n\nvoid mainImage(out vec4 O, vec2 I)\n{\n    vec3 a = iResolution, b=iMouse.xyz,\n    c = 3.*(b/a-.5)*sign(b),\n    d = vec3(a.y,I+I-a.xy),\n    p = d-d; p.x = iTime;\n    d.xz R.y)); d.xy R.x));\n    d /= length(d);\n   \n    float i=0.,z = 8.;\n    for(c = p; i++<1e3 && M*z>.8;)\n    \n        b = min(a = (trunc(c*z+sign(d))-c*z)/d, min(a.y,a.z)).xxx,\n        c += d*b/z,\n        a = (ceil(c*z+d*step(a,b))-.5)/z;\n\n    O = (sin(a.x+vec4(0,2,4,a=c))+1.)*(M*2e1+2.)/(9.+dot(p-=c,p));\n}\n\n/*\n// Original (607 chars):\n\n#define n normalize\n#define m(p) (length(mod(p,4.)-2.)-2.)\n\nfloat t(vec3 p, inout vec3 d)\n{\n    float m,z = 8.;\n    vec3 a,b,c = p;\n    for(int i = 0; i++<999 && z<9.;)\n    {\n        a = sign(d);\n        b = fract(-c*z*a);\n        b += step(b,-b);\n        a *= b/d;\n        b = min(a.xxx,min(a.y,a.z));\n        c += d*b/z;\n        m = m(ceil(c*z+d*step(a,b))/z-.5/z)*z;\n        z *= m<1.8?2.:1.;\n    }\n    d = c;\n    return z;\n}\nvoid mainImage(out vec4 O, vec2 I)\n{\n    vec2 r = iResolution.xy,m=iMouse.xy,\n    a = 3.*(m/r-.5)*sign(m);\n    vec3 x = vec3(cos(a.x+vec2(0,11))*cos(a.y),sin(a.y)),\n    y = n(vec3(-x.y,x.x,0)),\n    z = n(cross(x,y)),\n    \n    d = n(mat3(x,y,z) * vec3(r.y,I+I-r)),\n    p = d-d; p.x=iTime;\n\tfloat h = t(p,d),\n    l = 9./(9.+dot(p-d,p-d));\n    l *= mod(dot(ceil(d),d-d+1.),2.)+.4;\n    O += l*m(d)*h/6.-O;\n}\n*/\n\n/*\n//528 chars:\n\n#define V vec3\n#define m(p) (length(mod(p,4.)-2.)-2.)\n#define R mat2(cos(vec4(0,11,33,0)+a\n\nV t(V p, V d)\n{\n    float z = 8.;\n    V a,b,c = p;\n    for(int i = 0; i++<999 && z<9.;)\n    {\n        a = sign(d);\n        b = fract(-c*z*a);\n        b += step(b,-b);\n        a *= b/d;\n        b = min(a.xxx,min(a.y,a.z));\n        c += d*b/z;\n        z *= m(ceil(c*z+d*step(a,b))/z-.5/z)*z<.8?2.:1.;\n    }\n    return c;\n}\nvoid mainImage(out vec4 O, vec2 I)\n{\n    V r = iResolution, m=iMouse.xyz,\n    a = 3.*(m/r-.5)*sign(m),\n    d = V(r.y,I+I-r.xy),\n    p = d-d; p.x=iTime;\n    d.xz *= R.y)); d.xy *= R.x));\n\tV v = t(p,normalize(d)),\n    l = V(8)+dot(p-v,p-v);\n    l = mod(dot(ceil(v),V(2))+1.,4.)/l;\n    O.rgb = l+l*m(v)/.1;\n}\n*/\n\n/*\n//485 chars:\n\n#define V vec3\n#define m(p) (length(mod(p,4.)-2.)-2.)\n#define R mat2(cos(vec4(0,11,33,0)+c\n\nvoid mainImage(out vec4 O, vec2 I)\n{\n    V a = iResolution, b=V(iMouse),\n    c = 3.*(b/a-.5)*sign(b),\n    d = V(a.y,I+I-a.xy),\n    p = V(iTime,0,0);\n    d.xz *= R.y)); d.xy *= R.x));\n    d /= length(d);\n   \n    c = p;\n    float i=0.,z = 8.;\n    for(;i++<1e3 && z<9.;)\n    {\n        a = sign(d);\n        b = fract(-c*z*a);\n        b += step(b,-b);\n        a *= b/d;\n        b = min(a.xxx,min(a.y,a.z));\n        c += d*b/z;\n        z *= m(ceil(c*z+d*step(a,b))/z-.5/z)*z<.8?2.:1.;\n    }\n\n    O.rgb = mod(dot(ceil(c),V(2))+1.,4.)/V(8.+dot(p-c,p-c))*(m(c)/z*1e2+1.);\n}\n*/\n\n/*\n//468 chars:\n\n#define m(p) (length(mod(p,4.)-2.)-2.)\n#define R *= mat2(cos(vec4(0,11,33,0)+c\n\nvoid mainImage(out vec4 O, vec2 I)\n{\n    vec3 a = iResolution, b=iMouse.xyz,\n    c = 3.*(b/a-.5)*sign(b),\n    d = vec3(a.y,I+I-a.xy),\n    p = d-d; p.x = iTime;\n    d.xz R.y)); d.xy R.x));\n    d /= length(d);\n   \n    float i=0.,z = 8.;\n    for(c = p; i++<1e3 && z<9.; z *= m(a=ceil(c*z+d*step(a,b))/z-.5/z)*z<.8?2.:1.)\n        a = sign(d),\n        b = fract(-c*z*a),\n        a *= (b+step(b,-b))/d,\n        b = min(a.xxx,min(a.y,a.z)),\n        c += d*b/z;\n\n    O = (sin(a.x+vec4(0,2,4,0))+1.)*(m(c)/z*2e2+2.)/(8.+dot(p-c,p-c));\n}\n*/","name":"Image","description":"","type":"image"}]}