{"ver":"0.1","info":{"id":"3dKyDG","date":"1603646339","viewed":50,"name":"RIOW - 4 - Background","username":"TheMunro","description":"https://raytracing.github.io/books/RayTracingInOneWeekend.html#rays,asimplecamera,andbackground","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["raytracing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ) \n{\n    vec4 data = texelFetch(iChannel0, ivec2(fragCoord),0);\n    //fragColor = vec4(sqrt(data.rgb/data.w),1.0);\n    fragColor = vec4(data.rgb, 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"//constants\nvec3 zero = vec3(0., 0., 0.);\nvec3 one = vec3(1., 1., 1.);\n\n//data types\nstruct Ray\n{ \n    vec3 o; \n    vec3 d;\n}; \n \nvec3 ray_color(in Ray r)\n{\n    vec3 n = normalize(r.d);\n    float t = 0.5 * (n.y + 1.);\n    return (1.0 - t) * one + t * vec3(0.5, 0.7, 1.);\n}\n\n//output\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord) \n{    \n    vec2 seed = vec2(hrand(fragCoord) + iTime);\n    //remap height into [-1, 1]\n    vec2 uv = (2. * fragCoord.xy - iResolution.xy + hash_2d(seed))/iResolution.y;\n        \n    //position \n    Ray r = Ray(zero, vec3(uv, -1.));\n    \n    vec3 col = ray_color(r);\n    \n    //still need to accumulate per frame\n    fragColor = vec4(col, 1.);\n}","name":"Buffer @","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"float nrand(in vec2 n)\n{\n\treturn fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453);\n}\n\n\n// Hash functions by Nimitz:\n// https://www.shadertoy.com/view/Xt3cDn\n\nuint base_hash(uvec2 p)\n{\n    p = 1103515245U*((p >> 1U)^(p.yx));\n    uint h32 = 1103515245U*((p.x)^(p.y>>3U));\n    return h32^(h32 >> 16);\n}\n\nfloat hash_1d(vec2 x)\n{\n    uint n = base_hash(floatBitsToUint(x));\n    return float(n)*(1.0/float(0xffffffffU));\n}\n\nvec2 hash_2d(vec2 x)\n{\n    uint n = base_hash(floatBitsToUint(x));\n    uvec2 rz = uvec2(n, n*48271U);\n    return vec2((rz.xy >> 1) & uvec2(0x7fffffffU))/float(0x7fffffff);\n}\n\nvec3 hash_3d(vec2 x)\n{\n    uint n = base_hash(floatBitsToUint(x));\n    uvec3 rz = uvec3(n, n*16807U, n*48271U);\n    return vec3((rz >> 1) & uvec3(0x7fffffffU))/float(0x7fffffff);\n}\n\nvec4 hash_4d(vec2 x)\n{\n    uint n = base_hash(floatBitsToUint(x));\n    uvec4 rz = uvec4(n, n*16807U, n*48271U, n*69621U); //see: http://random.mat.sbg.ac.at/results/karl/server/node4.html\n    return vec4((rz >> 1) & uvec4(0x7fffffffU))/float(0x7fffffff);\n}  \n\nfloat hrand(in vec2 coord) \n{\n    uint hashed_coord = base_hash(floatBitsToUint(coord));\n    return float(hashed_coord)/float(0xFFFFFFFFU);  \n}\n","name":"Common","description":"","type":"common"}]}