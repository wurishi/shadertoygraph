{"ver":"0.1","info":{"id":"wttcWn","date":"1608829730","viewed":163,"name":"Day 2: Animated background","username":"Gratemate","description":"Trying to animate SDFs.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2d","background"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//2d SFDs from https://iquilezles.org/articles/distfunctions2d\nfloat ndot(vec2 a,vec2 b){return a.x*b.x-a.y*b.y;}\n\nfloat sdCircle(vec2 p,float r)\n{\n    return length(p)-r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p)\n{\n    const float k=sqrt(3.);\n    p.x=abs(p.x)-1.;\n    p.y=p.y+1./k;\n    if(p.x+k*p.y>0.)p=vec2(p.x-k*p.y,-k*p.x-p.y)/2.;\n    p.x-=clamp(p.x,-2.,0.);\n    return-length(p)*sign(p.y);\n}\n\n//a - bottom left, b - top right, th-thickness\nfloat sdOrientedBox(in vec2 p,in vec2 a,in vec2 b,float th)\n{\n    float l=length(b-a);\n    vec2 d=(b-a)/l;\n    vec2 q=(p-(a+b)*.5);\n    q=mat2(d.x,-d.y,d.y,d.x)*q;\n    q=abs(q)-vec2(l,th)*.5;\n    return length(max(q,0.))+min(max(q.x,q.y),0.);\n}\n\nfloat sdRhombus(in vec2 p,in vec2 b)\n{\n    vec2 q=abs(p);\n    float h=clamp((-2.*ndot(q,b)+ndot(b,b))/dot(b,b),-1.,1.);\n    float d=length(q-.5*b*vec2(1.-h,1.+h));\n    return d*sign(q.x*b.y+q.y*b.x-b.x*b.y);\n}\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord){\n    vec2 uv=fragCoord.xy*2./iResolution.xy-1.;\n    uv.x*=iResolution.x/iResolution.y;\n    float stage=floor(fract(iTime*.35)*4.);\n    vec3 col=vec3(1.,uv);\n    \n    //center triangle\n    float centerTri=sdEquilateralTriangle(uv*3.);\n    centerTri=abs(.02/centerTri);\n    \n    //center box spinning\n    vec2 orientBox=vec2(cos(iTime)*.1,sin(iTime)*.1);\n    float boxMiddleD=sdOrientedBox(uv,-orientBox,orientBox,.2);\n    float boxMiddle=1.-smoothstep(0.,.01,abs(boxMiddleD));\n    float final=max(boxMiddle,centerTri);\n    \n    //first screen - rhombus\n    float romb1=sdRhombus(uv,vec2(1.));\n    romb1=1.-smoothstep(0.,.01,abs(romb1));\n    if(stage==0.)final=max(final,romb1);\n    \n    //second screen double circle\n    float circ2_1=sdCircle(uv,.8);\n    circ2_1=1.-smoothstep(0.,.01,abs(circ2_1));\n    float circ2_2=sdCircle(uv,.75);\n    circ2_2=1.-smoothstep(0.,.01,abs(circ2_2));\n    float circ2=max(circ2_1,circ2_2);\n    if(stage==1.)final=max(final,circ2);\n    \n    //third screen - green dots\n    float romb3=1.;\n    for(float i=-2.;i<2.;i+=.3){\n        for(float j=-1.;j<1.;j+=.3){\n            vec2 offset=vec2(fract(iTime*.35))*.1-vec2(.1);\n            float rombTemp=sdCircle(uv+vec2(i,j)+vec2(0.,.1)+offset,.03);\n            rombTemp=smoothstep(0.,.01,rombTemp);\n            romb3=min(romb3,rombTemp);\n        }\n    }\n    romb3=1.-romb3;\n    if(stage==2.)final=max(final,romb3);\n    \n    //fourth screen - double triangle\n    float tri4_1=sdEquilateralTriangle(uv*-1.);\n    tri4_1=1.-smoothstep(0.,.01,abs(tri4_1));\n    float tri4_2=sdEquilateralTriangle(uv*2.);\n    tri4_2=1.-smoothstep(0.,.01,abs(tri4_2));\n    float tri4=max(tri4_1,tri4_2);\n    if(stage==3.)final=max(final,tri4);\n    \n    col+=vec3(max(.4,sin(length(vec2(sin(uv.x*5.),cos(iTime*.1))*124.))));\n    col*=vec3(final);\n    \n    fragColor=vec4(col,1.);\n}","name":"Image","description":"","type":"image"}]}