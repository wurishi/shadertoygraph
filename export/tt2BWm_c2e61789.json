{"ver":"0.1","info":{"id":"tt2BWm","date":"1599141265","viewed":170,"name":"nube y fuego plasma","username":"jorge2017a1","description":"nube y fuego plasma","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["nubeyfuegoplasma"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"///referencia de autores desconocidos\n//modificado por jorge2017a1--3-sep-2020\n\n\n\n//------------------------------\n\nfloat     alpha;\n vec2      speed;\n float     shift;\n\n\n//-------------------------------------------\nfloat sdSphere( vec3 p, float s )\n{\n  return length(p)-s;\n}\n\n\nfloat noise(vec3 p) //Thx to Las^Mercury\n{\n\tvec3 i = floor(p);\n\tvec4 a = dot(i, vec3(1., 57., 21.)) + vec4(0., 57., 21., 78.);\n\tvec3 f = cos((p-i)*acos(-1.))*(-.5)+.5;\n\ta = mix(sin(cos(a)*a),sin(cos(1.+a)*(1.+a)), f.x);\n\ta.xy = mix(a.xz, a.yw, f.y);\n\treturn mix(a.x, a.y, f.z);\n}\n\n\n\nfloat flame(vec3 p)\n{\n\t\n    float d= sdSphere(  p*vec3(1.,.5,1.), 1.0 );\n\tfloat esf1= d + (noise(p+vec3(.0,iTime*2.,.0)) + noise(p*3.+vec3(.0,iTime*11.,.0))*.5)*.25*(p.y) ;\n    \n    return esf1;\n}\n\n\n\n\nfloat scene(vec3 p)\n{\n\n    float f1= min(100.-length(p) , abs(flame(p)) );\n    return f1;\n}\n\nvec4 raymarch(vec3 org, vec3 dir)\n{\n\tfloat d = 0.0, glow = 0.0, eps = 0.02;\n\tvec3  p = org;\n\tbool glowed = false;\n\t\n\tfor(int i=0; i<64; i++)\n\t{\n\t\td = scene(p) + eps;\n\t\tp += d * dir;\n\t\tif( d>eps )\n\t\t{\n\t\t\tif(flame(p) < .0)\n\t\t\t\tglowed=true;\n\t\t\tif(glowed)\n       \t\t\tglow = float(i)/64.;\n\t\t}\n\t}\n\treturn vec4(p,glow);\n}\n\nvec4 ImageFuego( in vec2 fragCoord , float dist)\n{\n\tvec2 v = -1.0 + 2.0 * fragCoord.xy / iResolution.xy;\n\tv.x *= iResolution.x/iResolution.y;\n\t\n\tvec3 org = vec3(0., -2., 4.);\n\tvec3 dir = normalize(vec3(v.x*1.6, -v.y, -1.5));\n\t\n\tvec4 p = raymarch(org, dir);\n\tfloat glow = p.w;\n\t\n\tvec4 col = mix(vec4(1.0,0.5,0.1,1.0), vec4(0.1,0.5,1.0,1.0), p.y*.03+.4);\n\t\n\tvec4 Color = mix(vec4(0.0), col, pow(glow*2.,3.));\n\t\n    dist=p.w;\n\treturn Color;\n}\n\n\n\nfloat rand(vec2 n) \n{\n\treturn fract(cos(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n}\n\nfloat noise(vec2 n) \n{\n\tconst vec2 d = vec2(0.0, 1.0);\n\n\tvec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n\n\treturn mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n}\n\nfloat fbm(vec2 n) \n{\n\tfloat total = 0.0, amplitude = 1.0;\n\t\n\tfor (int i = 0; i < 4; i++) {\n\t\ttotal += noise(n) * amplitude;\n\t\tn += n;\n\t\tamplitude *= .5;\n\t}\n\t\n\treturn total;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tconst vec3 c1 = vec3(126.0/255.0, 0.0/255.0, 97.0/255.0);\n\tconst vec3 c2 = vec3(173.0/255.0, 0.0/255.0, 161.4/255.0);\n\tconst vec3 c3 = vec3(0.2, 0.0, 0.0);\n\tconst vec3 c4 = vec3(164.0/255.0, 1.0/255.0, 214.4/255.0);\n\tconst vec3 c5 = vec3(0.1);\n\tconst vec3 c6 = vec3(0.9);\n\n\tvec2 p = fragCoord.xy * 8.0 / iResolution.xx;\n    \n    //------------\n    vec4 fuego;\n    float distfuego;\n    fuego=ImageFuego( fragCoord , distfuego);\n    //------------\n    \n\n\tfloat q = fbm(p - iTime * 0.1);\n\tvec2 r = vec2(fbm(p + q + iTime * speed.x - p.x - p.y), fbm(p + q - iTime * speed.y));\n\tvec3 c = mix(c1, c2, fbm(p + r)) + mix(c3, c4, r.x) - mix(c5, c6, r.y);\n\tfloat grad = fragCoord.y / iResolution.y;\n\tfragColor = vec4(c * cos(shift * fragCoord.y / iResolution.y), 1.0);\n\tfragColor.xyz *= 1.25-grad;\n    \n    //mezclar fuego y nube\n    vec4 Color = mix(fuego,fragColor, sin( 1.4*iTime));\n    \n    fragColor=Color;\n}\n\n","name":"Image","description":"","type":"image"}]}