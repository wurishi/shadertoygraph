{"ver":"0.1","info":{"id":"7tBcRR","date":"1650721572","viewed":103,"name":"Mandelbrot Set EK","username":"EdTheBass","description":"Help me, this took way too long","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["mandelbrot"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float _map(in float val, in float r1, in float r2, in float nr1, in float nr2) {\n    return float(((val-r1)/(r2-r1)) * (nr2-nr1) + nr1);\n}\n\nvec4 num_to_rgb(in int num) {\n    int r = (num >> 16) & 255;\n    int g = (num >> 8) & 255;\n    int b = num & 255;\n    return vec4(r,g,b,255);\n}\n\n\nvec2 next_z(in vec2 zn, in vec2 c) {\n    vec2 z_next;\n    \n    z_next = vec2( (zn[0]*zn[0]) - (zn[1]*zn[1]) + c[0], 2.0f * zn[0] * zn[1] + c[1] );\n    return z_next;\n}\n\nvec4 calc_colour(in vec2 point, in int iterations) {\n    if ((pow(point[0],2.0f) + pow(point[1],2.0f)) > 4.0f) {\n        return vec4(255, 255, 255, 255);\n    }\n    \n    vec2 z = vec2(0.0f,0.0f);\n    int z_count = 0;\n    float colour;\n    for (int x=0;x<iterations;x++) {\n        z = next_z(z, point);\n        z_count++;\n        \n        if (pow(z[0],2.0f) + pow(z[1],2.0f) > 4.0f) {\n            colour = _map(float(z_count), 0.0f, float(iterations)-1.0f, 0.0f, 16777215.0f);\n            return num_to_rgb(int(colour));\n        }\n    }\n    return vec4(0,0,0,0);\n}\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    float mapped_x = _map(fragCoord[0], 1.0f, 800.0f, -2.0f, 2.0f);\n    float mapped_y = _map(fragCoord[1], 1.0f, 450.0f, -1.12f, 1.12f);\n    \n    fragColor = calc_colour(vec2(mapped_x, mapped_y), 5000);\n}","name":"Image","description":"","type":"image"}]}