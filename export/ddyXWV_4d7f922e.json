{"ver":"0.1","info":{"id":"ddyXWV","date":"1681612581","viewed":57,"name":"Subtractive RG Colour","username":"ElizabethHudnott","description":"Experiment with taking the blue out of images.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["filter"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float yellowRed = 0.88;\nconst float blueGreen = 0.5;\nconst float maxSaturation = 96.0 / 255.0;\nconst float maxBrightness = 0.96;\nconst float grain = 0.05;\n\nconst vec4 luminanceVec = vec4(0.2126, 0.7152, 0.0722, 0);\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 coords = fragCoord/iResolution.xy;\n    vec4 inColor = texture(iChannel0, coords);\n    vec4 noise = texture(iChannel1, coords);\n    inColor.rgb *= mix(1.0, noise.r, grain);\n\n    float cyan = 1.0 - inColor.r;\n    float yellow = min((1.0 - inColor.g) / yellowRed, 1.0);\n    \n    float r = inColor.r;\n    float g = 1.0 - yellow * yellowRed;\n    float b = max(1.0 - yellow - cyan * blueGreen, 0.0);\n    vec4 outColor = vec4(r, g, b, 1.0);\n\n    float saturation = 0.5 * abs(r - g);\n\n    if (saturation > maxSaturation) {\n        float white = saturation - maxSaturation;\n        outColor.rgb += white;\n\t}\n\n    float inLuminance = dot(inColor, luminanceVec);\n    float outLuminance = dot(outColor, luminanceVec);\n    float black = min(inLuminance / outLuminance, 1.0);\n    outColor.rgb *= black * maxBrightness;\n\n    fragColor = coords.x < 0.5 ? outColor : texture(iChannel0, coords);\n}\n","name":"Image","description":"","type":"image"}]}