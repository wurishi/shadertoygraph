{"ver":"0.1","info":{"id":"43d3Rj","date":"1724007464","viewed":29,"name":"difference of gaussian","username":"sp3ctre","description":"difference of gaussian","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["blur","imageprocessing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define lumaVec vec3(0.2126,0.7152,0.0722)\n#define threshhold 0.1\n#define one vec4(1.,1.,1.,1.)\n#define zero vec4(0.,0.,0.,1.)\n\n//use mouse click to see the effect\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    float slider = iMouse.x/iResolution.x;\n    \n    vec4 col1 = texture(iChannel0,uv);\n    vec4 col2 = texture(iChannel1,uv);\n    \n    float value = dot(lumaVec,(col1-col2).xyz);\n    \n    value = (value-0.5)*2.+1.;\n    \n    \n    if (uv.x < slider){\n        if (value > threshhold) fragColor = one;\n        else fragColor = zero;\n    }else fragColor = texture(iChannel2,uv);\n    \n    //fragColor = (col1-col2);\n    //fragColor = vec4(value,value,value,1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float kernelSize(float sigma){\n    return (floor(4. * sigma + .5));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 texelSize = 1./iResolution.xy;\n    \n    float sigma = 1.;\n    \n    vec4 col;\n    float totalWeight = 0.;\n    float s = kernelSize(sigma);\n    for (float i = -s; i<=s; i++){\n        float weight = exp(-i*i/(2.*sigma*sigma));\n        totalWeight += weight;\n        col += texture(iChannel0,uv + vec2(texelSize.x*i,0.)) * weight;  \n    }\n    col /= totalWeight;\n    \n    fragColor = vec4(col.xyz,sigma);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"float kernelSize(float sigma){\n    return (floor(4. * sigma + .5));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 texelSize = 1./iResolution.xy;\n    \n    float sigma = texture(iChannel0,uv).z;\n    \n    vec4 col;\n    float totalWeight = 0.;\n    float s = kernelSize(sigma);\n    for (float i = -s; i<=s; i++){\n        float weight = exp(-i*i/(2.*sigma*sigma));\n        totalWeight += weight;\n        col += texture(iChannel0,uv + vec2(0.,texelSize.y*i)) * weight;  \n    }\n    col /= totalWeight;\n    \n    fragColor = col;\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"float kernelSize(float sigma){\n    return (floor(4. * sigma + .5));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 texelSize = 1./iResolution.xy;\n    \n    float sigma = 2.;\n    \n    vec4 col;\n    float totalWeight = 0.;\n    float s = kernelSize(sigma);\n    for (float i = -s; i<=s; i++){\n        float weight = exp(-i*i/(2.*sigma*sigma));\n        totalWeight += weight;\n        col += texture(iChannel0,uv + vec2(texelSize.x*i,0.)) * weight;  \n    }\n    col /= totalWeight;\n    \n    fragColor = vec4(col.xyz,sigma);\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"float kernelSize(float sigma){\n    return (floor(4. * sigma + .5));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 texelSize = 1./iResolution.xy;\n    \n    float sigma = texture(iChannel0,uv).w;\n    \n    vec4 col;\n    float totalWeight = 0.;\n    float s = kernelSize(sigma);\n    for (float i = -s; i<=s; i++){\n        float weight = exp(-i*i/(2.*sigma*sigma));\n        totalWeight += weight;\n        col += texture(iChannel0,uv + vec2(0.,texelSize.y*i)) * weight;  \n    }\n    col /= totalWeight;\n    \n    fragColor = col;\n}","name":"Buffer D","description":"","type":"buffer"}]}