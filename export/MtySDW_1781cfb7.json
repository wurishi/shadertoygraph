{"ver":"0.1","info":{"id":"MtySDW","date":"1484324020","viewed":103,"name":"seasickness simulator","username":"azsteak","description":"test","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d","sea"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec4 color;\nvec2 coord;\n\nconst float eyeToScreenDistance = 1.0;\nfloat eyeHeight =100.0;\n\nfloat coefHeightDif = 5.0;\n\nfloat waterHeight;\nfloat waveLength = 0.01;\nfloat waveHeight = 40.0;\nfloat transSpeed = 20.0;\n\nvoid drawSun(){\n    vec2 pos = vec2(100,iResolution.y/1.2);\n    \n    \n    if(distance(pos,coord) < iResolution.x/10.0){\n        color = vec4(0.8,0.8,0.2,1.0);\n    }\n}\nvoid wave(float dist){\n    \n    float y = eyeToScreenDistance + (waterHeight/2.0-eyeHeight) / dist + dist;\n    \n    float waveheightCoef = waveHeight/pow(dist,coefHeightDif);\n    \n    float wave = sin(waveLength*coord.x*pow(dist,4.0)+iTime*transSpeed/dist);\n    \n    float rotation = coord.x/-10.0;\n    float animatedRotation = rotation * cos(iTime) ;\n    \n    float height = wave*waveheightCoef+y+waterHeight+animatedRotation;\n    \n    if(coord.y<height){\n        //color = vec4(0,0,max(1.1/pow(dist,coefColorDegrade),0.4),1.0);\n        color = vec4(0,0.1*dist,dist,1.0);\n    }\n    \n}\nvoid rotateScreen(float angle){\n    coord.x = coord.x*cos(angle) + coord.y * sin(angle);\n    coord.y =-coord.x*sin(angle) + coord.y * cos(angle);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    waterHeight = iResolution.y/2.0;\n    color = fragColor;\n    coord = fragCoord;\n    //rotateScreen(iTime*1.0);\n    color = vec4(0.6,0.6,1.0,1.0);\n    \n    float coefScreen = iResolution.y/5.0;\n    eyeHeight = cos(iTime*2.0)*coefScreen+2.5*coefScreen;\n    \n    \n    drawSun();\n    for(float d = 4.0 ; d > 1.0 ; d-=0.4){\n        wave(d);\n    }\n    \n    fragColor = color;\n}","name":"Image","description":"","type":"image"}]}