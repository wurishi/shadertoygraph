{"ver":"0.1","info":{"id":"NsjfR3","date":"1646767708","viewed":129,"name":"SimpleUranus","username":"BadBadDog","description":"Simple Uranus shader","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["space","uranus"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsX3Rn","filepath":"/media/a/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","previewfilepath":"/media/ap/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float PI = 3.14159265359;\nfloat d2r( float d ){\treturn (d*PI)/180.0; }\nfloat r2d( float r ){\treturn (r*180.0)/PI; }\n\nfloat vec2deg( vec2 uv )\n{\n\treturn atan(uv.x,uv.y);\n}\n\nvec2 pln2pol( vec2 uv, float sc )\n{\n    vec2 suv = texture( iChannel0, uv*0.5 ).xy;\n    suv = mix( vec2(1.0), suv, 0.1*smoothstep(0.5,0.0,abs(uv.y-0.2)));\n    return suv * vec2( uv.x*sc, sc + 0.35 + 0.5*asin(uv.y-0.5 * smoothstep(4.5,0.0,abs(asin(uv.x/(0.3-0.4*pow(asin(abs(uv.y*2.0)),2.0)))))));\n}\n\n\n\nvec3 Uranus(vec2 uv)\n{\n\tfloat scale = 1.0;\n    float tilt = -0.0;\n    float pitch = 0.3;\n    \n    uv = (vec2(0.5,0.5) - uv) * 2.0 * vec2(1.0/(iResolution.y/iResolution.x),1.0);\n    uv = uv * 100.0 * scale;\n    vec2 luv = uv;\n    vec2 suv = uv;\n    uv.x = distance(vec2(0.0, 0.0), uv) * sin( vec2deg(uv) + tilt );\n    uv.y = distance(vec2(0.0, 0.0), uv) * cos( vec2deg(uv) + tilt );\n    suv.x = distance(vec2(0.0, 0.0), suv) * sin( vec2deg(suv) + tilt -0.13 );\n    suv.y = distance(vec2(0.0, 0.0), suv) * cos( vec2deg(suv) + tilt -0.13 );\n    \n    vec2 puv = pln2pol( uv.yx/190.0, 0.0 ) + vec2( iTime*0.0001, 0.0 );\n    vec2 ruv = pln2pol( uv.yx/190.0, 0.2 ) + vec2( iTime*0.001, 0.0 );\n\n    float dist = distance(vec2(0.0, 0.0), uv);\n    vec2 dmult = vec2(1.0,1.0/pitch);\n\n    // main body\n\tvec3 bcol = vec3( 0.5, 0.8, 0.9 )  + vec3( 0.2 ) * smoothstep( 0.1, 0.5, texture( iChannel0, puv ).z );\n    bcol = mix( bcol, vec3( 0.5, 0.9, 1.0 ), 0.6 * smoothstep( 0.4, 0.0, texture( iChannel0, ruv ).x ) );\n    float body = smoothstep( 50.1, 50.0, distance(vec2(0.0, 0.0), uv.yx ) );\n    float bmask = smoothstep( 50.1, 50.0, distance(vec2(0.0, 0.0), uv.yx ) ) * float(uv.x<0.0);\n    \n     // atmo fade\n    bcol = mix( bcol, vec3(0.5, 0.8, 0.9) * 0.8, 0.8 * smoothstep( 0.0-luv.x*0.7, 52.0, distance(vec2(0.0, 0.0), luv ) )  );\n     // atmo glow\n    bcol = mix( bcol, vec3(0.6,0.9,1.0), 0.9 * smoothstep( 40.0, 52.0, distance(vec2(0.0, 0.0), luv*vec2(1.0,0.8) ) ) * smoothstep( 40.0, 0.0, luv.x )  );\n    // atmo deep shadow\n    bcol = mix( bcol, vec3(0.0,0.0,0.0), smoothstep( 35.0, 48.0, distance(vec2(0.0, 0.0), luv*vec2(1.0,0.8) ) ) * smoothstep( -30.0, 30.0, luv.x )  );\n     \n     \n     // self shadow\n    bcol = mix( bcol, vec3(0.0, 0.04, 0.06), smoothstep( -10.0, 52.0, distance(vec2(0.0, 0.0), vec2(20.0,0.0) + luv*vec2(0.7,0.5) ) ) * smoothstep( -50.0, 0.0, luv.x )  );\n \n    // shadow from the disc\n    //vec3 dscol = texture( iChannel0, vec2(0.5,-30.0 + distance(vec2(0.0, 0.0), uv*dmult))*0.01 ).xyz;\n    //float dshd = (1.0-bmask) * smoothstep(0.0,0.5,dscol.x) * smoothstep( 130.0, 110.0, distance(vec2(0.0, 0.0), (uv+vec2(0.0,5.0))*dmult )) * smoothstep( 61.0, 100.0, distance(vec2(0.0, 0.0), (uv+vec2(0.0,5.0))*dmult ));\n    //bcol = mix( bcol, vec3(0.0), 0.8*dshd );\n \n \n    // disc\n    vec3 dcol = vec3( 0.8, 0.9, 1.0 ) * (0.5 + 0.5*texture( iChannel0, vec2(0.5, distance(vec2(0.0, 0.0), uv.yx*dmult))*0.004 ).x );\n    float disc = 0.9 * (1.0-bmask) * smoothstep(0.0,0.8,dcol.x) * smoothstep( 95.0, 90.0, distance(vec2(0.0, 0.0), uv.yx*dmult) ) * smoothstep( 70.0, 80.0 + 40.0-abs(uv.y/5.0), distance(vec2(0.0, 0.0), uv.yx*dmult) );\n    \n    // shadow on the disc from the body\n    //float dshad = smoothstep( 131.0, 130.0, distance(vec2(0.0, 0.0), suv*vec2(1.2,7.7) ) ) * smoothstep( 0.0, 0.1, suv.x );\n    //dcol = mix( dcol, vec3(0.0), 0.8*dshad );\n    \n    \n\treturn mix( dcol*disc, bcol*body, 1.0-disc );\n}\n\n\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n\n// Time varying pixel color\n    vec3 col = Uranus( uv );\n\n\n\n\n\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}