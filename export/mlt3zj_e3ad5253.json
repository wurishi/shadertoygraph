{"ver":"0.1","info":{"id":"mlt3zj","date":"1682770606","viewed":91,"name":"Voronoi diagram2d","username":"z1lfromhell","description":"study the voronoi","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["causticsvoronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"  #define scale 12.     \n  vec2 hashmap (vec2 p1)\n  {\n   float hash1 = fract(sin(dot(floor(p1),vec2(123.321,456.654))));\n   float hash2 = fract(sin(dot(floor(p1),vec2(321.456,156.168))));\n   return vec2(hash1,hash2);\n  }\n  \n  vec3 voronoi (vec2 p )\n  {\n    float res = 1. ;\n    float index = 0.;\n    vec2 gridid = floor(p);\n    \n    for(float i= -1. ; i <= 1. ; i++)\n    {\n      for(float j= -1. ; j <= 1. ; j++)\n      {      \n      vec2 id = vec2(i,j)+gridid;    \n      vec2 hash = hashmap(id);\n      hash = sin(hash*6.283+iTime)*0.5+0.5;\n      vec2 pos = hash+id;      \n      float d = dot(p-pos,p-pos);      \n      if(d<res)\n       {       \n        index = hash.x;      \n        res = min(d,res);     \n       }\n      }\n    }\n    \n    return vec3(1.-pow(res,0.25),index,res);\n  }\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    //(fragCoord-0.5*iResolution.xy)/min(iResolution.x,iResolution.y)\n    vec2 p = (fragCoord-0.5*iResolution.xy)/min(iResolution.x,iResolution.y)*scale;\n    \n    vec3 color = vec3(1.,0.,1.);\n    \n    vec2 p1=p-(sin((p.x*5.)+iTime*10.)*0.5+0.5-sin((p.y*5.)+iTime*10.)*0.5+0.5)*0.1;\n\n    vec3 r = voronoi(p);\n    \n    vec3 r1 = vec3(voronoi(p1+0.05).z,voronoi(p1).z,voronoi(p1-0.05).z);\n    \n    float clip = r1.x-sin(dot(vec2(1.,1.),(fragCoord/iResolution.xy*2.-1.))+iTime*0.8);\n    if(clip<0.)\n    {\n    color = mix(vec3(r.x),vec3(r.y),0.5);\n    }\n    else if(clip>fwidth(60.*(fragCoord/iResolution.xy).x))\n    {\n    color = mix(vec3(0.,0.1,0.3),vec3(mix(r1*2.,mix(vec3(r.x),vec3(r.y),0.5),0.5)),0.88);\n    }\n    else{color = vec3(0.3,0.3,0.3);\n    }\n    //float color = mix(r.x,r.y,mouse);\n    \n    fragColor = vec4(vec3(color),1.0);\n}","name":"Image","description":"","type":"image"}]}