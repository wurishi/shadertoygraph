{"ver":"0.1","info":{"id":"XcGcDD","date":"1731855633","viewed":70,"name":"symmetric tangent circles circle","username":"jt","description":"Arrangement of n tangent (\"kissing\") circles on a circle, visualizing also circle centers, tangent points, circle through tangent points and inner/outer tangent circle.","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["circle","geometry","tangent","regular","symmetric","kiss"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// https://www.shadertoy.com/view/XcGcDD symmetric tangent circles circle, 2024 by jt\n\n// Arrangement of n tangent (\"kissing\") circles on a circle,\n// visualizing also circle centers, tangent points,\n// circle through tangent points and inner/outer tangent circle.\n\n// tags: circle, geometry, tangent, regular, symmetric, kiss\n\n\n//#define POINTSIZE 0.01\n#define POINTSIZE (5.0/R.y)\n#define draw_point(q) o *= smoothstep(0.0, POINTSIZE, abs(q))\n#define draw_circle(r, I) draw_point(length(I) - (r))\n\n#define draw_point_grey(q) o *= (0.5+0.5*smoothstep(0.0, POINTSIZE, abs(q)))\n#define draw_circle_grey(r, I) draw_point_grey(length(I) - (r))\n\n\n#define pi 3.1415926\n#define tau (pi+pi)\n\nfloat line(vec2 p, vec2 a, vec2 b) // https://iquilezles.org/articles/distfunctions2d/\n{\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp(dot(pa,ba)/dot(ba,ba), 0.0, 1.0);\n    return length(pa - ba*h);\n}\n\nvec2 polar(float t)\n{\n    //return vec2(cos(t),sin(t)); // standard\n    return vec2(cos(t),sin(t)).yx; // flipped\n}\n\nvoid mainImage(out vec4 o, vec2 I)\n{\n    vec2 R = iResolution.xy;\n    I = (I+I-R)/R.y;\n\n    o = vec4(1);\n\n    float r0 = 0.7; // radius of circle containing centers of tangent circles\n\n    draw_circle_grey(r0,I); // circle containing centers of tangent circles\n\n    //uint n = 7u; // number of tangent circles\n    uint n = uint(floor(mix(3.0,16.0,0.5-0.5*cos(iTime)))); // number of tangent circles\n\n    float phi = tau/float(n); // angle of tangents between tangent circles\n\n    float r1 = cos(phi/2.0)*r0; // radius of circle containing tangent points\n    float r = sin(phi/2.0)*r0; // radius of tangent circles\n    draw_circle_grey(r1,I); // circle containing tangent points\n    \n    draw_circle_grey(r0+r,I); // outer tangent circle\n    draw_circle_grey(r0-r,I); // inner tangent circle\n\n    for(uint i = 0u; i < n; i++)\n    {\n        vec2 c = polar(phi*float(i))*r0;\n        draw_circle_grey(0.01,I-c); // center of tangent circle\n        draw_circle(r,I-c); // tangent circle\n        //vec2 b = polar(phi*(float(i)+0.5))*r0;\n        //draw_point_grey(line(I,vec2(0),b)); // tangents\n        vec2 a = polar(phi*(float(i)+0.5))*r1;\n        draw_circle_grey(0.01,I-a); // tangent points\n    }\n    \n    o = sqrt(o); // approx gamma\n}\n","name":"Image","description":"","type":"image"}]}