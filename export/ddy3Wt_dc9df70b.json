{"ver":"0.1","info":{"id":"ddy3Wt","date":"1679184866","viewed":123,"name":"Field of worms","username":"ianertson","description":"Use the mouse to look around :)","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["noise","worms"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define R (iResolution.xy)\n#define T (iTime)\n#define M_PI (3.14159265359)\n#define TAU (M_PI * 2.0)\n#define ZERO (min(0, int(iTime)))\n#define adot(a,b) (abs(dot(a, b)))\n#define cdot(a,b) (max(0.0, dot(a, b)))\n#define rgb(a,b,c) (vec3(a, b, c) / 255.0)\nfloat luma(vec3 color) { return dot(color, vec3(0.299, 0.587, 0.114)); }\nmat2 rot(in float a) { float c = cos(a); float s = sin(a); return mat2(c, s, -s, c); }\n\n\nfloat hash21(in vec2 ip, in float seed) {\n    uvec2 p = uvec2(floatBitsToUint(ip.x), floatBitsToUint(ip.y));\n    uint s = floatBitsToUint(seed+0.0982812) >> 3U;\n    s ^= (s << (~p.x + ~p.y));\n    p ^= ((p >> s) << 17U);\n    p ^= (p >> 12U);\n    p ^= (p << 5U);\n    p ^= (p << s);\n    return float(((p.x*p.y) + ((~p.x ^ ~p.y)))*239U) / float(0xFFFFFFFFU);\n}\n\n\nfloat noise(in vec2 uv, in float seed) {\n    vec2 id = floor(uv);\n    vec2 lv = fract(uv);\n    lv = lv*lv*(3.0-2.0*lv);\n    \n    return mix(\n        mix(hash21(id, seed), hash21(id+vec2(1, 0), seed), lv.x),\n        mix(hash21(id+vec2(0, 1), seed), hash21(id+vec2(1, 1), seed), lv.x),\n        lv.y\n    );\n}\n\nvec4 wave(in vec2 uv, in float seed, in float eps){\n  float a1 = noise(vec2(uv.x, uv.y + eps), seed);\n  float a2 = noise(vec2(uv.x, uv.y - eps), seed);\n  float b1 = noise(vec2(uv.x + eps, uv.y), seed);\n  float b2 = noise(vec2(uv.x - eps, uv.y), seed);\n  float a = (a1 - a2) / (2.0 * eps);\n  float b = (b1 - b2) / (2.0 * eps);\n  float c = (a1 - b1) / (2.0 * eps);\n  float d = (a2 - b2) / (2.0 * eps);\n  return vec4(a, b, c, d);\n}\n     \nvoid mainImage( out vec4 O, in vec2 fc )\n{\n    vec3 col = vec3(0.0);\n    vec2 uv = (fc-0.5*R.xy)/R.y;\n    vec4 m = vec4((iMouse.xy-0.5*R.xy)/R.y, iMouse.zw);\n    uv += ((m.z > 0.0001) ? m.xy : vec2(cos(T*0.2), sin(T*0.2))*0.2);\n    uv *= 30. + (70.0 *( 0.5+sin(T)*0.5));\n    vec4 c = wave(uv, 3.3029123, 0.67);\n    float seed = 4.329912;\n    col += noise(c.xy*2.0-1.0, seed);\n    col += noise(c.zw*2.0-1.0, seed);\n    vec3 n = normalize(vec3(c.xy, 0.2));\n    vec3 ldir = normalize(vec3(cos(T), sin(T), 0.5));\n    vec3 lpos = vec3(sin(T)*6., cos(T)*6., 1.0);\n    vec3 L1 = normalize(lpos - vec3(uv.xy, 0.0));\n    vec3 att = vec3(0.97, 0.24, 0.13)*(0.08*max(0.0, dot(n, normalize(ldir+(L1/2.)))) + max(0.0, smoothstep(0.8, 1.0, dot(ldir, L1))));\n    att *= 90.0 / max(0.0001, pow(distance(vec3(uv.xy, 0.0), vec3(lpos.xy, 0.)), 2.));\n    col *= (att+0.01);\n    col *= smoothstep(0.0, 0.9, length(c.xy));\n    col += luma(col)/3.;\n    col /= 1.0 + max(col-0.33, 0.0);\n    col = pow(col, vec3(1.0/2.2));\n    O = vec4(col, 1.0);\n}\n\n","name":"Image","description":"","type":"image"}]}