{"ver":"0.1","info":{"id":"NsGfDW","date":"1658152885","viewed":538,"name":"Moving pixels","username":"bitless","description":"A small experiment with the smoothed minimum function","likes":27,"published":1,"flags":0,"usePreview":0,"tags":["2d","shadow","fake","pixel","cell"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsBSR3","filepath":"/media/a/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","previewfilepath":"/media/ap/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Author: bitless\n// Title: Through the hive\n\n// Thanks to Patricio Gonzalez Vivo & Jen Lowe for \"The Book of Shaders\"\n// and Fabrice Neyret (FabriceNeyret2) for https://shadertoyunofficial.wordpress.com/\n// and Inigo Quilez (iq) for  https://iquilezles.org/www/index.htm\n// and whole Shadertoy community for inspiration.\n\n#define H(p) sin(iTime*.5+fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453)*10.)*.5+.5\n\nvoid mainImage( out vec4 O, in vec2 g )\n{\n    vec2 r = iResolution.xy\n        ,u = (g+g-r)/r.y*5. //camera scaling\n        ,l = fract(u)       //cell local coordinates\n        ,s,z;\n    u = floor(u); //cell id\n    \n    float h = H(u)          //cell \"height\"\n            ,d = 1.\n            ,n,f;\n    \n    for (int i=0;i<9;i++)   //calculate distance field to 8 neighbors cells\n    {\n        s = vec2(i/3,i%3)-1.; //cell id shift\n        z = abs(l-.5-s)-.5;  //the distance to the neighbor cell divided by the height difference with the current cell\n        n = (length(max(z,0.)) + min(max(z.x,z.y),0.))/max(H(u+s)-h,.05)/2.; //more difference -> less distance -> darker shadow \n        f = max(0., 1. - abs(n - d)/.4);    //smooth min of distance\n        d = (i!=4) ? min(d, n) - .1*f*f:d;  //skiping current cell\n    }\n    O = mix(vec4(.4,.5,.6,1),vec4(1,.9,.6,1),h) + min(d,.2)-.3;\n}","name":"Image","description":"","type":"image"}]}