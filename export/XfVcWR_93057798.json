{"ver":"0.1","info":{"id":"XfVcWR","date":"1731708570","viewed":171,"name":"Nearest Neighbor Compare","username":"MichaelPohoreski","description":"Comparison of AA point sampling (left) and nearest neighbor (right)\nInstructions: Drag mouse left/right.\n\nLeft = AA point sampling (d7samurai)\nRight = Nearest neighbor\n","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["aa","pointsample","nearestneighbor"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\nNearest Neighbor Compare\nCopyleft {C} Michael Pohoreski\n\nLeft  = AA point sampling (d7samurai)\nRight = Nearest neighbor -- sharper image\n\nSee:\n  aa point sampling for pixel art \n  https://www.shadertoy.com/view/MlB3D3\n*/\n//#define QUAD_COMPARE // Uncomment for an A/B/C/D comparison instead of A/B\n//#define DYNAMIC_ZOOM\n\nvoid mainImage(out vec4 col, in vec2 pix)\n{\n    vec2 m = iMouse.xy / iResolution.xy;           // 0..1\n    vec2 p = pix.xy    / iResolution.xy;           // 0..1\n    vec2 r = vec2(1.0) / iChannelResolution[0].xy; // reciprocal texture dim\n\n    // At odd scaling we have 4x4 and 5x5 black squares\n    // in the bottom of the cat's face\n    float scale = 4.5;\n#ifdef DYNAMIC_ZOOM\n          scale = cos(iTime * 0.5)*4.0 + 8.0;\n#endif\n\n#ifdef QUAD_COMPARE\n    vec2 s = (pix - 0.5*iResolution.xy) / scale;\n#else\n    vec2 s = pix / scale;\n#endif\n\n    vec2 t  = floor(s) + min(fract(s) / fwidth(s), 1.0) - 0.5; // aa point sample\n    vec2 st = t * r;\n\n    vec2 nn = floor(s) + 0.5; // nearest neighbor\n    vec2 uv = nn * r;\n    \n    float col0 = m.x      ;\n    if (p.x < col0 )\n       col = texture(iChannel0, st ); // point sampling\n    else\n       col = texture(iChannel0, uv ); // nearest neighbor\n\n    col = mix( col, vec4(0.0,1.0,0.0,1.0), 1.0-smoothstep( 0.002, 0.003, abs( p.x - col0 )));\n}\n","name":"Image","description":"","type":"image"}]}