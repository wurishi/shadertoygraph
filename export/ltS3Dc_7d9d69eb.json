{"ver":"0.1","info":{"id":"ltS3Dc","date":"1433017728","viewed":372,"name":"Hallucinating Squares","username":"anastadunbar","description":"I am very bored.","likes":7,"published":1,"flags":8,"usePreview":0,"tags":["2d","music","loop","lsd","tripping"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"vec3 HueShift (in vec3 Color, in float Shift)\n{\n    vec3 P = vec3(0.55735)*dot(vec3(0.55735),Color);\n    \n    vec3 U = Color-P;\n    \n    vec3 V = cross(vec3(0.55735),U);    \n\n    Color = U*cos(Shift*6.2832) + V*sin(Shift*6.2832) + P;\n    \n    return vec3(Color);\n}\n\nvec2 rotation(in float angle,in vec2 position,in vec2 center)\n{\n    //Function seen from https://www.shadertoy.com/view/XlsGWf\n    float rot = radians(angle);\n    mat2 rotation = mat2(cos(rot), -sin(rot), sin(rot), cos(rot));\n    return vec2((position-center)*rotation);\n}\n\nvec2 scale(vec2 pos, float size, vec2 center)\n{\n \treturn vec2((pos-center)*size);   \n}\n\n\nfloat rectangle(vec2 uv, vec2 pos, vec2 size) {\n    return 1.-clamp(length(max(abs(uv-pos)-size,0.))*400.,0.,1.);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 suv = vec2(((uv.x-0.5)*(iResolution.x / iResolution.y))+0.5,uv.y);\n    float time = iTime*1.1;\n    float time2 = 1.-(mod(time,4.)/4.);\n    float time3 = 1.-mod(time*4.,1.);\n    float time4 = 1.-mod(time*6.,1.);\n    float time5 = mod(time,4.);\n    float time6 = (mod(time,8.));\n    float time7 = (mod(time,16.));\n    if(time5 > 3.){\n    time4 = 1.-mod(time*3.,1.);\n    }\n    float a = sin(((uv.x+(uv.y*cos(uv.x+uv.y)))*50.)+(time*5.4))*time4;\n    a += sin(((uv.x+(uv.x*cos(uv.x-uv.y)))*50.)+(time*20.4));\n    float b = sin(((uv.x+(uv.y*cos(uv.x+uv.y)))*20.)+(time*5.4))*time4;\n    b += sin(((uv.x+(uv.x*cos(uv.x-uv.y)))*50.)+(time*20.4));\n    float c = sin(((uv.x+(uv.y*cos(uv.x+uv.y)))*80.)+(time*2.4))*time4;\n    c += sin(((uv.x+(uv.x*cos(uv.x-uv.y)))*30.)+(time*20.4));\n    a = clamp(a,0.,1.); b = clamp(b,0.,1.); c = clamp(c,0.,1.);\n    a *= 10.;\n    b *= 10.;\n    c *= 10.;\n    a = clamp(a,0.,1.); b = clamp(b,0.,1.); c = clamp(c,0.,1.);\n    vec3 colors = HueShift(vec3(a,b,c),0.9)*1.4;\n    if(time6 > 4.){\n    colors = vec3(a,a,a);\n    }\n    colors = clamp(colors,0.,1.);\n    vec2 suv2 = rotation(time*20.,suv,vec2(0.5));\n    colors -= rectangle(suv2,vec2(0.5,abs(sin(radians(time*90.)))*0.4 ),vec2(0.2));\n    suv2 = rotation((time+24.5)*10.,suv,vec2(0.5));\n    colors -= rectangle(suv2,vec2(0.5,abs(sin(radians(time*90.)))*0.6 ),vec2(0.2));\n    if (time7 > 8.) {\n    a = sin(((uv.x+(uv.y*cos(uv.x+uv.y+1.)))*240.)+(time*5.4))*time4;\n    b = sin(((uv.x+(uv.y*cos(uv.x+uv.y+2.)))*140.)+(time*7.4))*time4;\n    c = sin(((uv.x+(uv.y*cos(uv.x+uv.y)))*820.)+(time*9.4))*time4;\n    colors *= vec3(a,b,c);\n    vec2 suv2 = rotation(time*20.,suv+(sin((uv.y*24.)+(time*10.))/9.),vec2(0.5));\n    colors -= rectangle(suv2,vec2(0.5,abs(sin(radians(time*90.)))*0.4 ),vec2(0.2));\n    suv2 = rotation((time+24.5)*10.,suv+(sin((uv.x*24.)+(time*10.))/9.),vec2(0.5));\n    colors -= rectangle(suv2,vec2(0.5,abs(sin(radians(time*90.)))*0.6 ),vec2(0.2));\n    colors = clamp(colors,0.,1.);\n    colors = HueShift(colors,(uv.x*4.)+uv.y);\n    }\n    \n\tfragColor = vec4(colors+0.1,1.0);\n}","name":"","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float rand(vec2 co){\n    co *= 4.;\n    return (fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453)+fract(sin(dot(co.xy*0.014 ,vec2(12.9898,78.233))) * 43758.5453))/1.5;\n    \n}\n\nfloat music1(float time) {\n    float time2 = mod(time,4.);\n    float time4 = mod(time,8.);\n    float a = sin(500.*time*2.)+sin(500.*time);\n    float hihat = rand(vec2(time,0.))*(1.-mod(time*6.,1.))*0.5;\n    if(time2 > 1.){\n    a = sin(530.*time*2.)+sin(530.*time);  \n    }\n    if(float(time2 > 0.5)+float(time4 > 4.)>1.){\n    a = sin(650.*time*2.)+sin(680.*time);  \n    }\n    if(time2 > 2.){\n    a = sin(580.*time*2.)+sin(500.*time);    \n    }\n    if(time2 > 3.){\n    a = sin(490.*time*2.)+sin(490.*time);     \n    hihat = rand(vec2(time,0.))*(1.-mod(time*3.,1.))*0.5;\n    }\n    a /= 2.;\n    a *= clamp(mod(time*1.,1.)*1.5,0.,1.);\n    float beat = mod(time*2.,1.)/2.;\n    float kick = sin(beat*(700.*(1.-(beat*1.4))));\n    \n    return ((a+kick+hihat)/3.);\n}\n\nfloat music(float time) {\n    float time1 = mod(time,16.);\n    float a = 0.;\n    for(float i = 0.; i < 20.; i++) {\n    a += music1((time)-(i*0.002));\n    }\n    a /= 10.;\n    a += music1(time)/2.;\n    if (time1 > 8.) {\n    a *= music1(time*2.)/1.;\n    a += music1(time)/2.;\n    }\n    return a;\n}\n\nvec2 mainSound( in int samp,float t)\n{\n    float time = t*1.1;\n\tfloat a = music(time);\n    return vec2( a );\n}","name":"","description":"","type":"sound"}]}