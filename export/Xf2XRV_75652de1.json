{"ver":"0.1","info":{"id":"Xf2XRV","date":"1706565314","viewed":133,"name":"road building automaton","username":"Boogaloo","description":"Playing around with 2 layer neural automata","likes":6,"published":1,"flags":32,"usePreview":0,"tags":["cellularautomata","neural"],"hasliked":0,"parentid":"XflSWl","parentname":"Fork 2 layer ne Boogaloo 026"},"renderpass":[{"inputs":[{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"go{O = tex(C0,ivec2(I));}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define go void mainImage( out vec4 O, in vec2 I )\n#define R iResolution\n#define C0 iChannel0\n#define C1 iChannel1\n#define cut(x) clamp(x,0.,1.)\n#define tex(x,y) texelFetch(x,y,0)","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float ig(float x){return 1.-pow(2.,-x*x);}\n\nivec2 wrap(float a, float b){return ivec2(mod(a,R.x),mod(b,R.y));}\n\ngo{\n\n if(iFrame<1 && distance(I,R.xy*.5)<10.){\n   O = vec4(fract(sin(iDate[3]/10000.*dot(I, vec2(12.9898, 78.233))) * 43758.5453)); return;}\n   if(iMouse.z>0. && abs(iMouse.x-I.x)<2. && abs(iMouse.y-I.y)<2.){O=vec4(1.); return;}\n\nfloat T = 465.;\n\nmat3 L1 = mat3(-.75+-.5*abs(sin(T/11.)),.75+.5*abs(sin(T/37.)),sin(T/29.),-.75-.5*abs(sin(T/19.)),.75+.5*abs(sin(T/13.)),sin(T/41.),-.75-.5*abs(sin(T/31.)),.75+.5*abs(sin(T/23.)),sin(T/17.));\nvec3 L2 = vec3(sin(T/16.),sin(T/15.),sin(T/17.));\nfloat a,b,c = 0.;\n   for(float i=-1.;i<=1.;i++){\n   for(float j=-1.;j<=1.;j++){\n   float d=tex(C0, wrap(I.x+i,I.y+j)).x;\n   if(i==0. && j==0.){\n   a += d*L1[0][2];\n   b += d*L1[1][2];\n   c += d*L1[2][2];\n   continue;\n   }\n   if(abs(i)==abs(j)){\n   a += d*L1[0][0];\n   b += d*L1[1][0];\n   c += d*L1[2][0];\n   continue;}\n   a += d*L1[0][1];\n   b += d*L1[1][1];\n   c += d*L1[2][1];\n   }}\n   a = ig(a);\n   b = ig(b);\n   c = ig(c);\n   O = vec4(1209./450.*(ig(L2[0]*a+L2[1]*b+L2[2]*c)));\n   \n  \n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"float ig(float x){return 1.-pow(2.,-x*x);}\n\nivec2 wrap(float a, float b){return ivec2(mod(a,R.x),mod(b,R.y));}\n\ngo{\n\n\nfloat T = 465.;\n\nmat3 L1 = mat3(-.75+-.5*abs(sin(T/11.)),.75+.5*abs(sin(T/37.)),sin(T/29.),-.75-.5*abs(sin(T/19.)),.75+.5*abs(sin(T/13.)),sin(T/41.),-.75-.5*abs(sin(T/31.)),.75+.5*abs(sin(T/23.)),sin(T/17.));\nvec3 L2 = vec3(sin(T/16.),sin(T/15.),sin(T/17.));\nfloat a,b,c = 0.;\n   for(float i=-1.;i<=1.;i++){\n   for(float j=-1.;j<=1.;j++){\n   float d=tex(C0, wrap(I.x+i,I.y+j)).x;\n   if(i==0. && j==0.){\n   a += d*L1[0][2];\n   b += d*L1[1][2];\n   c += d*L1[2][2];\n   continue;\n   }\n   if(abs(i)==abs(j)){\n   a += d*L1[0][0];\n   b += d*L1[1][0];\n   c += d*L1[2][0];\n   continue;}\n   a += d*L1[0][1];\n   b += d*L1[1][1];\n   c += d*L1[2][1];\n   }}\n   a = ig(a);\n   b = ig(b);\n   c = ig(c);\n   O = vec4(1209./450.*(ig(L2[0]*a+L2[1]*b+L2[2]*c)));\n   \n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"float ig(float x){return 1.-pow(2.,-x*x);}\n\nivec2 wrap(float a, float b){return ivec2(mod(a,R.x),mod(b,R.y));}\n\ngo{\n\nfloat T = 465.;\n\nmat3 L1 = mat3(-.75+-.5*abs(sin(T/11.)),.75+.5*abs(sin(T/37.)),sin(T/29.),-.75-.5*abs(sin(T/19.)),.75+.5*abs(sin(T/13.)),sin(T/41.),-.75-.5*abs(sin(T/31.)),.75+.5*abs(sin(T/23.)),sin(T/17.));\nvec3 L2 = vec3(sin(T/16.),sin(T/15.),sin(T/17.));\nfloat a,b,c = 0.;\n   for(float i=-1.;i<=1.;i++){\n   for(float j=-1.;j<=1.;j++){\n   float d=tex(C0, wrap(I.x+i,I.y+j)).x;\n   if(i==0. && j==0.){\n   a += d*L1[0][2];\n   b += d*L1[1][2];\n   c += d*L1[2][2];\n   continue;\n   }\n   if(abs(i)==abs(j)){\n   a += d*L1[0][0];\n   b += d*L1[1][0];\n   c += d*L1[2][0];\n   continue;}\n   a += d*L1[0][1];\n   b += d*L1[1][1];\n   c += d*L1[2][1];\n   }}\n   a = ig(a);\n   b = ig(b);\n   c = ig(c);\n   O = vec4(1209./450.*(ig(L2[0]*a+L2[1]*b+L2[2]*c)));\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"go{\nO=vec4(0.);\nvec4 them = tex(C0,ivec2(I));\nvec4 me = tex(C1,ivec2(I));\nO.z=cut(.2*them.z+.8*me.z);\nO.x= abs(them.z-me.z)>.3 ? cut(me.x+.05) : me.x*.95;\n}","name":"Buffer D","description":"","type":"buffer"}]}