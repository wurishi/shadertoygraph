{"ver":"0.1","info":{"id":"4lVBD3","date":"1544301669","viewed":235,"name":"VFB3","username":"rory618","description":"Fractals from feedback with reflection and sharpening. Wait for a moment or try using the mouse whenever the image becomes a solid color.","likes":10,"published":1,"flags":32,"usePreview":0,"tags":["feedback","multipass"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    fragColor = (texture(iChannel0,fragCoord/iResolution.xy))*.3+.5;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\n#define scale 5.2\n#define I vec2(0,1)\n#define R vec2(1,0)\n#define PI 2.*asin(1.)\n#define E exp(1.)\n#define r iResolution\n#define pi 3.14159265\n//cproj\nfloat creal(vec2 z) {\n    return z.x;\n}\nfloat cimag(vec2 z) {\n    return z.y;\n}\nvec2 conj(vec2 z) {\n    return vec2(z.x,-z.y);\n}\nvec2 cprod(vec2 a, vec2 b){\n    return mat2(a,-a.y,a.x) * b;\n}\nvec2 csqr(vec2 a){\n    return cprod(a,a);\n}\nvec2 cis(float t){\n    return cos(t - I*PI/2.);\n}\n//vec3 tanh(vec3 x){\n// return (exp(x)-exp(-x))/(exp(x)+exp(-x));\n// }\nvec4 tmirror(sampler2D ch, vec2 uv){\n    vec2 f = mod(floor(uv),vec2(2));\n    return texture(ch, fract(uv)*(1.-f*2.)+f );\n}\nvec4 sharpen( in vec2 uv )\n{\n\n  vec2 s = 1.0 / iResolution.xy;\n\n  vec3 texA = .5*tmirror( iChannel0, uv + vec2(-s.x, -s.y) * 1.5 ).rgb;\n  vec3 texB = .5*tmirror( iChannel0, uv + vec2( s.x, -s.y) * 1.5 ).rgb;\n  vec3 texC = .5*tmirror( iChannel0, uv + vec2(-s.x,  s.y) * 1.5 ).rgb;\n  vec3 texD = .5*tmirror( iChannel0, uv + vec2( s.x,  s.y) * 1.5 ).rgb;\n\n    vec3 around = 0.25 * (texA + texB + texC + texD);\n  vec3 center  = .5*tmirror( iChannel0, uv ).rgb;\n\n  float sharpness = 1.0;\n\n  vec3 col = center + (center - around) * sharpness;\n\n    col = tanh(col);\n\n    return mix(vec4(col,1.0),.5*tmirror(iChannel0,uv),.5);\n}\n\nvec4 t(vec2 c){\n    return sharpen((r.xy/2.+c.yx*r.y/scale)/r.xy);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 c = (fragCoord - r.xy/2.)/r.y*scale;\n    c=c.yx;\n    float tm = iTime/20.;\n    vec2 p = cis(tm)*(.95+.1*sin(iTime/20.));\n    vec2 seed = -p ;\n    //if(mod(tm/pi/2.,2.)<1.){\n    //  seed = conj(p)/2.-R;\n   // }\n    vec2 s = cprod(abs(c),seed)+iMouse.xy/r.xy-.5;\n    //s=abs(s);\n    fragColor = t(s );\n    fragColor.xyz += .01*(0.25 + 0.25*cos(iTime+100.*uv.xyx+vec3(0,2,4)));\n    \n\n    fragColor.xy = cprod(fragColor.xy-.5,cis(.14))+.5;\n    fragColor.yz = cprod(fragColor.yz-.5,cis(.13))+.5;\n    fragColor.zx = cprod(fragColor.zx-.5,cis(.12))+.5;\n    fragColor = 2.*mix(fragColor,.5*texture(iChannel0,fragCoord/iResolution.xy),.4);\n    //fragColor.xyz = normalize(fragColor.xyz);//clamp(fragColor,vec4(0),vec4(1));\n    \n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    fragColor = textureLod(iChannel0,fragCoord/iResolution.xy,0.)-textureLod(iChannel0,fragCoord/iResolution.xy,14.);\n    fragColor*=fragColor;\n}","name":"Buf B","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    fragColor = (texture(iChannel0,fragCoord/iResolution.xy)-textureLod(iChannel0,fragCoord/iResolution.xy,14.))/sqrt(textureLod(iChannel1,vec2(fragCoord/iResolution.xy),14.));\n}","name":"Buf C","description":"","type":"buffer"}]}