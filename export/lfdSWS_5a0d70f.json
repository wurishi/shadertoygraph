{"ver":"0.1","info":{"id":"lfdSWS","date":"1714681060","viewed":104,"name":"infinite squares","username":"adaad","description":"a","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["3d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float modnum = 1.5;\nfloat rbright = 12.;\nfloat r2 = 1.7;\n\nvec2 rep(vec2 co, float s) {\n    return abs(mod(abs(co)+s,s*2.)-s);\n}\n\nfloat diam(vec2 co){\n\n    co = rep(pow(abs(co),vec2(1.)),modnum);\n    \n    //co = fract(co * 1.5) - 0.5;\n    //return length(co)-1.;\n    return dot(abs(co),vec2(1.))-1.;\n}\n\nfloat squares(vec2 co){\n    co = rep(co,modnum*.5);\n    return max(co.x,co.y)-.3;\n}\n\n\nvec3 color(float v) {\n    return .5+.5*sin(vec3(0,2.1,-2.1)+v);\n}\n\nfloat glow(float v,float l) {\n    v = clamp(v,-.03,1.);\n    v = pow(abs(pow(abs(v),.5))*l,-1.2);\n    return clamp(v,0.,1.);\n}\n\n\nvec3 blend(vec3 a, vec3 b) {\n    return a + b * (r2 - length(a))/r2;\n\n    vec3 f = a + b;\n    if (length(f) > r2) {\n        return normalize(f)*r2;\n    } else {\n        return f;\n    }\n    return clamp(a*(1.-length(b))+b*(1.-length(a)),0.,1.);\n}\n\nvec3 proc(vec2 uv, int i, float t) {\n    float d = float(i)+fract(t);\n    vec2 co = uv*d + sin(t*vec2(.11,.17))*vec2(3.5,2.3);\n    \n    float v = diam(co);\n    v = glow(v,rbright);\n    \n    float v2 = glow(squares(co),rbright*1.5);\n    \n    return color(d+uv.x)*v + color(d*2.+uv.y)*v2;\n}\n\nvoid mainImage( out vec4 O, in vec2 U )\n{\n    vec2 uv = (U*2.-iResolution.xy)/iResolution.y;\n    float t = -iTime;\n    \n    //mouse pan\n    if (iMouse.z > 0.0) {\n        vec2 muv = (iMouse.xy*2.-iResolution.xy)/iResolution.y;\n        uv += muv / 3.;\n    }\n    \n    uv += vec2(sin(t*.2),cos(t*.1))*.3;\n    \n    int i;\n    float d;\n    vec3 fv = proc(uv,0,t) * fract(t);\n    for (i = 1; i < 8; i++) {\n        fv = blend(fv, proc(uv,i,t));\n    }\n    fv = blend(fv, proc(uv,i,t) * (1. - fract(t)));\n    \n    \n    O=vec4(vec3(fv),1.);\n}","name":"Image","description":"","type":"image"}]}