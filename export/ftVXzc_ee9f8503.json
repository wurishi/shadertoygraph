{"ver":"0.1","info":{"id":"ftVXzc","date":"1641166646","viewed":115,"name":"ImageProcessing Sample Color 2","username":"dhayward","description":"ImageProcessing Sample2","likes":1,"published":1,"flags":2,"usePreview":0,"tags":["webcam"],"hasliked":0,"parentid":"stySD1","parentname":"ImageProcessing Sample Color 1"},"renderpass":[{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec3 rgb_to_yiq (vec3 rgb)\n{\n    mat3 mtx = mat3(0.299,  0.595716,  0.211456,\n                    0.587, -0.274453, -0.522591,\n                    0.114, -0.321263,  0.311135);\n    return mtx * rgb;\n}\n\nvec3 yiq_to_rgb (vec3 yiq)\n{\n    mat3 mtx = mat3(1.0,       1.0,       1.0,\n                    0.956296, -0.272122, -1.10699,\n                    0.621024, -0.647381,  1.70461);\n    return mtx * yiq;\n}\n\n\nvec3 alterPixel (vec3 pixel, vec2 mouse)\n{\n    vec3 newPix = pixel;\n    \n    // Contrast RGB\n    if (true) {\n        // Sigmoid function https://www.desmos.com/calculator/dznyjgdqza\n        newPix = 3.0*pixel*pixel + 2.0*pixel*pixel*pixel;\n    }\n    \n    // Contrast YIQ\n    if (false) {\n        vec3 yiq = rgb_to_yiq(pixel);\n        float Y = yiq.r;\n        yiq.r = 3.0*Y*Y + 2.0*Y*Y*Y;\n        newPix = yiq_to_rgb(yiq);\n    }\n    \n    return mix(pixel, newPix, mouse.y);\n}\n\nvec3 DrawSlider (vec2 pos, vec2 mouse, vec3 rgb)\n{\n    if (pos.x>0.05)\n        return rgb;\n\n    if (abs(pos.y - mouse.y)<0.01)\n        return vec3(1.0);\n    return rgb * 0.5;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 mouse = iMouse.xy / iResolution.xy;\n\tvec2 pos = fragCoord.xy / iResolution.xy;\n    \n    vec4 c = texture(iChannel0,pos);\n    \n    c.rgb = alterPixel(c.rgb, mouse);\n    c.rgb = DrawSlider(pos, mouse, c.rgb);\n\tfragColor = c;\n}","name":"Image","description":"","type":"image"}]}