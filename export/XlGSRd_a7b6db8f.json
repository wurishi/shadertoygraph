{"ver":"0.1","info":{"id":"XlGSRd","date":"1485376356","viewed":220,"name":"Box2Sphere [oo]","username":"pthextract","description":"No use of defines in this copy of another shader.\n\t\t[url]https://www.shadertoy.com/view/llyXzc[/url]\n\nSupport for Occulus(3D?)  and stereoscopy 3D, but not VR mode.","likes":3,"published":1,"flags":64,"usePreview":0,"tags":["sphere","box","stereoscopy"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"MsjGz3","filepath":"https://soundcloud.com/espenvh/heightened-senses","previewfilepath":"https://soundcloud.com/espenvh/heightened-senses","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Created by pthextract in 2017-Jan-24\n/*Now with HmdWarpcode for Occulus ripped from:\n\thttps://www.shadertoy.com/view/MsS3WG */\n\nvec2 HmdWarp(vec2 uv)\n{\n\t// screen space transform(Side by Side)\n\tuv = vec2((mod(uv.x,1.0)-0.5)*2.0+0.2*sign(uv.x), uv.y);\n\n\t// HMD Parameters\n\tvec2 ScaleIn = vec2(1.0);\n\tvec2 LensCenter = vec2(0.0,0.0);\n\tvec4 HmdWarpParam = vec4(1.0,0.22, 0.240, 0.00);\n\tvec2 Scale = vec2(1.0);\n\n\t// Distortion\n\tvec2 theta  = (uv - LensCenter) * ScaleIn; // Scales to [-1, 1]\n\tfloat  rSq    = theta.x * theta.x + theta.y * theta.y;\n\tvec2 rvector= theta * (HmdWarpParam.x + HmdWarpParam.y * rSq\n\t\t\t       + HmdWarpParam.z * rSq * rSq\n\t\t\t       + HmdWarpParam.w * rSq * rSq * rSq);\n\treturn LensCenter + Scale * rvector;\n}\n\nvec4 rend(vec2 uv,float s, float zm)\n    //BORDER AND BACKGROUND\n{vec4 c=.4-.4*vec4(.6,.8,.2,1.)-vec4(0.,.06*uv*uv,1.);\n    if ( (uv.x*uv.x>.77)|| (uv.y*uv.y>.24) ) return c-vec4(.05);\n    uv.x-=s;\t\n \tif (uv.x*uv.y<.11) c+=vec4(.05);\n    if (uv.x*uv.y<.14) c-=vec4(.05);    \n \t uv.x+=s+s;\n\t float f=cos((iTime)*2.), zoff=1.+zm*5.,xd=sin (iTime) *.5, yd=cos (iTime) *.5;\n \tf*=f;\n   \tfor (float x=-.5;x<=.5;x+=.1)for (float y=-.5;y<=.5;y+=.1)for (float z=-.5;z<=.5;z+=.1)//loops \n            if((max(abs(x),max(abs(y),abs(z)))>.39)||fract(iDate.w/5.)<.5) //just rim of cube\n        \t{ \n            vec3 nu=normalize(vec3(x,y,z))*.7;\n             vec2 xy=vec2(xd+x *f+(1.-f)* nu.x,yd+y *f+(1.-f)* nu.y);\n              float zz=z *f+(1.-f)* nu.z+zoff;\n            if(length(xy/zz-uv)<.06/zz)   c+=.08-vec4(.3,.5,1,1)*.08*(fract(x+y+z));\n        \t}           \n return c;\n}\nvoid mainImage( out vec4 C, in vec2 uv )\n{//float s2=.05;\n vec2 R=iResolution.xy;\n     float M=iMouse.x/R.x;\n    float zm=iMouse.y/R.y;\n     float s2=M/5.;//EYES WIDE APART?\n uv+=.5;uv/= R;\n\n if (s2>.02)\n {s2-=2.*s2*float(uv.x<.5);\n  if (M<.6) {uv.x=fract(uv.x*2.);}}\n uv-=.5;uv.x*=R.x/R.y;\n    if (M>=.6)  {uv=HmdWarp(uv);s2/=2.;}\nC=rend(uv,s2,zm);\n}","name":"Image","description":"","type":"image"}]}