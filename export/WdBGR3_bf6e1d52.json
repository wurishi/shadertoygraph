{"ver":"0.1","info":{"id":"WdBGR3","date":"1549443182","viewed":217,"name":"During Eclipse ","username":"Canysway","description":"Eclipse","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["sun","light","moon","eclipse"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv_s = fragCoord/iResolution.xy;\n    vec2 uv_m = fragCoord/iResolution.xy;\n    float time_m = (fract(iTime * 0.1)  -1.) * 0.15;\n    float interval = floor(iTime);\n    time_m = mod(interval, 10.) <= 1. ? 0. : time_m;\n    uv_m.x -= time_m;\n    vec4 color_s = texture(iChannel0, uv_s);\n    vec4 color_m = texture(iChannel1, uv_m);\n    fragColor = color_s * color_m;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define PI 3.14159265359\n#define TWO_PI 6.28318530718\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = fragCoord/iResolution.xy;\n    float ratio = iResolution.x/iResolution.y;\n    uv.x *= ratio;\n    float dist1 = distance(vec2(0.5 * ratio, 0.5), uv);\n    float dist = .55/sqrt(dist1 * 3.1);\n    \n    vec2 ray_uv = uv;\n    ray_uv -= vec2(0.5 * ratio, 0.5);\n    float angle = atan(ray_uv.x, ray_uv.y);\n    float r = (cos(angle * 100.) + 1.) * 0.5 + 1.;\n    ray_uv *= r;\n    float dist2 = .27/sqrt(length(ray_uv) * 3.1);\n    \n    vec4 spot_color = vec4(1.- step(0.05, dist1));\n    vec4 ray_color = vec4(dist2);\n    vec4 light_color = vec4(dist);\n    ray_color = mix(vec4(0., 0.,0.,1.), ray_color, ray_color.a);\n    ray_color = mix(vec4(0., 0.,0.,1.), ray_color, ray_color.a);\n    ray_color = mix(vec4(0., 0.,0.,1.), ray_color, ray_color.a);\n    ray_color.a *= 0.22;\n    ray_color.a = min(1., ray_color.a);\n    \n    light_color = mix(vec4(0., 0.,0.,1.), light_color, light_color.a);\n    light_color = mix(vec4(0., 0.,0.,1.), light_color, light_color.a);\n    light_color = mix(vec4(0., 0.,0.,1.), light_color, light_color.a);\n    light_color.a = min(1., light_color.a);    \n    fragColor = mix(light_color, ray_color, ray_color.a);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[{"id":"XsXGR8","channel":0}],"code":"\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = fragCoord/iResolution.xy;\n    float ratio = iResolution.x/iResolution.y;\n    uv.x *= ratio;\n    \n    float dist = distance(vec2(0.5 * ratio, 0.5), uv);\n    dist = smoothstep(0.085, 0.085 + 0.015, dist);\n    fragColor = vec4(dist);\n}","name":"Buf B","description":"","type":"buffer"}]}