{"ver":"0.1","info":{"id":"NlSSRy","date":"1627894942","viewed":333,"name":"7-Seg variable thickness","username":"cmzw","description":"Seven segment display with variable segment length/thickness.","likes":12,"published":3,"flags":0,"usePreview":0,"tags":["2d","text","display"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265359\nmat2 rotate(float angle) { return mat2(cos(angle), -sin(angle), sin(angle), cos(angle)); }\n\nfloat quadrant(in vec2 p, in int qi) {\n\tvec2 q[4] = vec2[4](vec2(1., -1.), vec2(2., 1.), vec2(1.), vec2(2., -1.));\n\n\tp *= rotate(PI / q[qi].x);\n\treturn dot(vec2(-abs(p.x), p.y), vec2(1., q[qi].y * 1.));\n}\n\nfloat _4seg(in vec2 p, in float s, in float seg_t, in float seg_l,\n            in vec4 quadrants) {\n\tvec2 _p = p;\n\tp = abs(p) - s;\n\tfloat l = min(-dot(p, vec2(1., 1.)), abs(dot(p, vec2(1., -1.)))) - seg_l;\n\tfloat segs = min(seg_t - abs(max(p.x, p.y) * -1.), l);\n\n\tfloat all_segs = min(min(segs, quadrant(_p, 0)), quadrants[0]);\n\tall_segs = max(all_segs, min(min(segs, quadrant(_p, 1)), quadrants[1]));\n\tall_segs = max(all_segs, min(min(segs, quadrant(_p, 2)), quadrants[2]));\n\tall_segs = max(all_segs, min(min(segs, quadrant(_p, 3)), quadrants[3]));\n\n\treturn all_segs;\n}\n\nfloat _7seg(in vec2 p, in float s, in float seg_t, in float seg_l, vec4 bb,\n            vec4 bt) {\n\treturn max(\n\t    _4seg(p - vec2(0., .5), s, seg_t, seg_l, vec4(bt.x, bt.y, bt.z, bt.w)),\n\t    _4seg(p - vec2(0., -.5), s, seg_t, seg_l,\n\t          vec4(bb.x, bb.y, bb.z, bb.w)));\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\tvec2 p = (2. * fragCoord - iResolution.xy) / iResolution.y;\n\n\tp *= 1.75;\n\n\tvec4[10] bt_brightness = vec4[10](\n\t    vec4(1., 1., 0., 1.), vec4(0., 1., 0., 0.), vec4(1., 1., 1., 0.),\n\t    vec4(1., 1., 1., 0.), vec4(0., 1., 1., 1.), vec4(1., 0., 1., 1.),\n\t    vec4(1., 0., 1., 1.), vec4(1., 1., 0., 0.), vec4(1., 1., 1., 1.),\n\t    vec4(1., 1., 1., 1.));\n\n\tvec4[10] bb_brightness = vec4[10](\n\t    vec4(0., 1., 1., 1.), vec4(0., 1., 0., 0.), vec4(1., 0., 1., 1.),\n\t    vec4(1., 1., 1., 0.), vec4(1., 1., 0., 0.), vec4(1., 1., 1., 0.),\n\t    vec4(1., 1., 1., 1.), vec4(0., 1., 0., 0.), vec4(1., 1., 1., 1.),\n\t    vec4(1., 1., 1., 0.));\n\n\tint index = int(mod(iTime, 10.));\n\n\tfloat scale = .5;\n\tfloat time = .75-sin(iTime/2.)*.65;\n\tfloat seg_thickness = .2 * time;\n\tfloat seg_length = .1 * time;\n\n\tfloat seg_bg = _7seg(p, scale, seg_thickness, seg_length, bb_brightness[8],\n\t                     bt_brightness[8]);\n\tfloat seg = _7seg(p, scale, seg_thickness, seg_length, bb_brightness[index],\n\t                  bt_brightness[index]);\n\n\tseg = smoothstep(0., .01, seg);\n\tfloat bg = smoothstep(0., .01, seg_bg) * .1;\n\n\tfragColor = vec4(vec3(max(seg, bg)), 1.);\n}","name":"Image","description":"","type":"image"}]}