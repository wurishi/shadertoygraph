{"ver":"0.1","info":{"id":"Ml3Szl","date":"1481096500","viewed":190,"name":"Gyroscope Hierarchy","username":"sea","description":"Work in progress.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["gyroscope"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"mat4 roll (float r)\n{\n    return mat4(\n        cos(r),\tsin(r),\t0.0, 0.0,\n        -sin(r), cos(r), 0.0, 0.0,\n        0.0, 0.0, 1.0, 0.0,\n        0.0, 0.0, 0.0, 1.0\n    );\n}\n\nmat4 yaw (float r)\n{\n    return mat4(\n        cos(r),\t0.0, -sin(r), 0.0,\n        0.0, 1.0, 0.0, 0.0,\n        sin(r),\t0.0, cos(r), 0.0,\n        0.0, 0.0, 0.0, 1.0\n    );\n}\n\nmat4 pitch (float r)\n{\n    return mat4(\n       \t1.0, 0.0, 0.0, 0.0,\n        0.0, cos(r), sin(r), 0.0,\n        0.0, -sin(r), cos(r), 0.0,\n        0.0, 0.0, 0.0, 1.0\n    );\n}\n\nfloat ellipsoid (vec3 p, vec3 d)\n{\n    return pow(p.x / d.x, 2.0) + pow(p.y / d.y, 2.0) + pow(p.z / d.z, 2.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 ws = fragCoord.xy / iResolution.xy * 2.0 - 1.0;\n    ws.x *= iResolution.x / iResolution.y;\n    vec3 color = vec3(ws, 1.0);\n    \n    vec3 ro = vec3(0.0, 0.5, -2.0);\n    vec3 rd = vec3(ws, 1.0);\n    \n    vec3 p = vec3(0.0);\n    float eo, ei = 0.0;\n    bool hit = false;\n    \n    for (float i = 0.0; i < 3.0; i += 0.03)\n    {\n        p = ro + rd * i;\n        \n        for (int e = 1; e < 20; e++)\n        {\n            p = (vec4(p, 1.0) * roll(iTime * 0.1) * pitch(iTime * 0.1)).xyz;\n            \n            eo = float(e) * 0.1;\n            ei = float(e) * 0.1 - 0.1;\n            \n            if (ellipsoid(p, vec3(1.0) * eo) < 1.0 && !(ellipsoid(p, vec3(1.0) * ei) < 1.0) && p.y < 0.05 && p.y >= -0.05)\n            {\n            \tcolor = vec3(1.0 - float(e) * 0.05 - 0.1);\n                hit = true;\n                break;\n            }\n        }\n        \n        if (hit)\n            break;\n    }\n    \n\tfragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}