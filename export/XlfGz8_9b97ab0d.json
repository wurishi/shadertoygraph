{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"channel":1,"type":"texture","id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"channel":2,"type":"texture","id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"channel":3,"type":"cubemap","id":"XdX3zn","filepath":"/media/a/488bd40303a2e2b9a71987e48c66ef41f5e937174bf316d3ed0e86410784b919.jpg","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"//Floating ornaments, and wind-blown snow that slowly piles up on the bottom of the screen.\n\n#define SNOWRATE 200.0 //Screen fills up in SNOWRATE seconds\n#define PI 3.14159\n#define HALFPI 1.570796\n\n//Specular function shamelessly stolen from TDM (www.shadertoy.com/user/TDM)\nfloat specular(vec3 normal, vec3 light, vec3 eye, float s)\n{\n    float nrm = (s + 8.0) / (PI * 8.0);\n    return pow(max(dot(reflect(eye, normal), light), 0.0), s) * nrm;\n}\n\nvec4 circle(vec2 fragCoord, vec2 pos, vec3 color, float rad)\n{\n    //Bob up and down\n    pos.y = pos.y + sin(iTime + pos.x * 10.0) * rad;\n    \n    //Apply cubemap to ornament, make it look reflective\n    vec2 uv = fragCoord.xy;\n    vec2 fluv = uv / iResolution.xy;\n    float fldis = distance(fluv, pos);\n    float normX = sin(((fluv.x - pos.x) / rad));\n    float normY = sin(((fluv.y - pos.y) / rad));\n    float normZ = sin((1.0 - fldis));\n    vec3 cubeCoord = normalize(vec3(normX, normY, normZ));\n    vec4 texture = texture(iChannel3, cubeCoord);\n    color = mix(color, texture.rgb, 0.2);\n    \n    //Add specular\n    vec3 specCoord = vec3(-cubeCoord.xyz);\n    vec3 light = normalize(vec3(0.0, 3.0, 0.1));\n    vec3 dir = normalize(vec3(fluv.xy, -2.0));\n    dir.z += length(fluv) * 0.15;\n    dir = normalize(dir);\n    color += vec3(specular(specCoord, light, dir, 60.0));\n    \n    //Check if point is within bounds of circle, make transparent if false\n    float radius = rad * iResolution.x;\n    float dis = distance(uv, pos * iResolution.xy);\n    float filled = smoothstep(0.0, 3.0, radius - dis);\n    \n    return vec4(color, filled);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    //Generate edge of the pile of snow\n    float snowdrift = smoothstep(0.0, uv.y * SNOWRATE, iTime);\n    //Invert y to flip the texture\n    uv.y = 1.0 - uv.y;\n    \n    //Wobbled uv\n    vec2 wuv = uv.xy;\n    //Move downward\n    //Commented sin function looks too artifical\n    wuv.y = wuv.y - (/*(sin(iTime * 1.5) / 20.0) + */(iTime) / 10.0);\n    //Apply sway to flakes\n    wuv.x = wuv.x + (sin((iTime + (uv.y * 90.0)) / 2.0) / 360.0);\n    //Apply wind to flakes\n    wuv.x = wuv.x + (sin(iTime / 20.0) * 4.0);\n    \n    vec4 background = texture(iChannel0, uv.xy);\n    vec4 flakes = texture(iChannel1, wuv.xy);\n    vec4 snow = texture(iChannel2, uv.xy);\n    //Change snow to grayscale\n    snow = snowdrift * (snow.rrra + 0.3);\n    flakes = flakes.rrra;\n    \n    //Applies flakes over the background, and the snowdrift over that\n    vec3 snowscape = clamp((mix(background.rgb, flakes.rgb, flakes.rgb)) * (1.0 - snowdrift) + snow.rgb, 0.0, 1.0);\n    \n    //Generate some festive ornaments\n    vec4 redBall = circle(fragCoord, vec2(0.4, 0.8), vec3(1.0, 0.0, 0.0), 0.05);\n    vec4 greenBall = circle(fragCoord, vec2(0.8, 0.5), vec3(0.0, 1.0, 0.0), 0.08);\n    vec4 blueBall = circle(fragCoord, vec2(0.2, 0.2), vec3(0.0, 0.0, 1.0), 0.03);\n    vec4 balls = mix(greenBall, redBall, redBall.a);\n    balls = mix(balls, blueBall, blueBall.a);\n    vec4 final = mix(vec4(snowscape, 1.0), balls, balls.a);\n    \n\tfragColor = final;\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XlfGz8","date":"1419724865","viewed":472,"name":"Snowy Street","username":"htw6174","description":"First real shader, any tips or feedback are appreciated.","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["2d","christmas"],"hasliked":0,"parentid":"","parentname":""}}