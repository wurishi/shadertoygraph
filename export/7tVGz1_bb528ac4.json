{"ver":"0.1","info":{"id":"7tVGz1","date":"1637194022","viewed":91,"name":"Psychedelic 3D raymarching","username":"zlynch","description":"Raymarching sphere graphic","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["raymarching"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float thingy(vec3 var){\n  vec3 b=vec3(0.9);\n  vec3 q=var-b;\n  return length(max(q,4.0))+min(max(q.x,max(q.y,q.z)),0.0);\n}\n\nfloat displacement(vec3 var){\n\tfloat height = ((sin(6.0*var.y)*cos(10.0*var.x)*tan(6.0*var.z))*cos(60.1));\n\treturn height;\n}\n\nmat2 rotation(float theta){\n\tfloat sinx=sin(theta);\n\tfloat cosx=cos(theta);\n\treturn mat2(cosx,-sinx,sinx,cosx);\n}\n\nfloat mainShapeSphere(vec3 var){\n\treturn length(var)-(cos(iTime)+.7);\n}\n\n\n\nvec3 getNormal(vec3 var){\n\treturn normalize(var);\n}\n\n\n\n\nfloat dist(vec3 var){\n\tvar.xy*=rotation(iTime);\n\tvar.xz*=rotation(iTime);\n\tfloat x=displacement(var);\n\tfloat mysphere=mainShapeSphere(var);\n\tfloat box=thingy(var);\n\treturn x+mysphere;\n}\n\n\n\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord){\n    vec2 mouse = vec2(iMouse)/vec2(iResolution);\n\tvec3 look=vec3(1.0,0.0,0.0);\n\n\n\n\tvec2 uv=(2.0*fragCoord.xy-iResolution.xy)/iResolution.y;\n    \n    \n\tvec3 ro=vec3(0.0,0.0,-5.0);\n\tfloat zoom= 3.0;\n\n\tvec3 focus=normalize(look-ro);\n\tvec3 ray=normalize(cross(vec3(3.0,1.0,0.0),focus));\n    \n\tvec3 u=cross(focus,ray);\n\tvec3 c=ro+focus*zoom;\n\tvec3 i=c+uv.x*ray+uv.y*u;\n\tvec3 rd=normalize(i-ro);\n    vec3 k,l;\n\n\n    float d,t;\n\tvec3 color;\n    \n    for(int i=0;i<40;i++){\n        vec3 k=ro+rd*t;\n\n        d=dist(k);\n        l=getNormal(k);\n        if(d<.02)break;\n        t+=d;\n    }\n\t\n\tcolor=reflect(cos(l),l);\n\n\tfragColor=vec4(color,6.0);\n}\n\n","name":"Image","description":"","type":"image"}]}