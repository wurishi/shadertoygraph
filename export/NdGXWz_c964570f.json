{"ver":"0.1","info":{"id":"NdGXWz","date":"1634453366","viewed":81,"name":"sphere without rays","username":"wnu","description":"3d sphere without rays. use mouse to rotate.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["3d","sphere"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float random(vec2 p) { return fract(1e4 * sin(17.0 * p.x + p.y * 0.1) * (0.1 + abs(sin(p.y * 13.0 + p.x)))); }\n\nmat4 rotationMatrix(vec3 axis, float angle)\n{\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    \n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\nvec3 rot(vec3 p, vec3 axis, float a){\n    return (rotationMatrix(axis,a)*vec4(p,1.)).xyz;\n}\n\nvec3 mouseRot(vec3 p){\n\n    vec2 mouse = iMouse.xy/iResolution.xy*2.-1.;\n    vec3 p1 = p;\n    if (iMouse.z > 0.5) {\n        p1 = rot(p1,vec3(0.,1.,0.),mouse.x*3.1415/2.);\n        p1 = rot(p1,vec3(1.,0.,0.),-mouse.y*3.1415/2.);\n    }\n    return p1;\n}\n\nvoid mainImage( out vec4 O, in vec2 U )\n{\n    \n    U = (U/R-0.5)*2.;\n    U.x *= R.x/R.y;\n    U *= 2.;\n    \n    float sinAcosY = sin(acos(U.y));\n    float zVal = sin(acos(U.x/sinAcosY));\n    zVal = sqrt(1.-dot(U,U)); //Better than first method\n    vec3 p = vec3(U,zVal); //Sphere positions\n    \n    vec3 p3 = mouseRot(p); //rotate with mouse\n    \n    vec3 n = normalize(p3); //visualize with normal\n    vec3 up = normalize(vec3(0.,1.,0.));   \n    float dotUp = dot(n,up); \n\n    vec3 col = vec3(dotUp);\n    col = pow(col,vec3(2.2));\n    \n    O = vec4(col,1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define R iResolution.xy\n#define dither random(U+1.*fract(iTime))\n","name":"Common","description":"","type":"common"}]}