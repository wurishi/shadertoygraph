{"ver":"0.1","info":{"id":"cscGDM","date":"1677315510","viewed":304,"name":"20230224_hj_pinieon","username":"0b5vr","description":"Played with DJ: Pinieon @ 1/2 Junction, 2023 Feb 24, MOGRA, Akihabara\n\nhttps://twitter.com/killu0_/status/1627187546097881093\n\nLive coded in 45 minutes.\nThe one I've done in live had several custom textures, This one doesn't have them.","likes":35,"published":1,"flags":0,"usePreview":0,"tags":["2d","circles","quadtree"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define saturate(x) clamp(x,0.,1.)\n#define linearstep(a,b,t) saturate( ( (t)-(a) ) / ( (b)-(a) ) )\n\nconst float PI=acos(-1.);\n\nvec4 blend(vec4 a,vec4 b){\n  return b+a*(1.-b.w);\n}\n\nuvec3 pcg3d(uvec3 s){\n  s=s*1145141919u+1919810u;\n  s.x+=s.y*s.z;\n  s.y+=s.z*s.x;\n  s.z+=s.x*s.y;\n  s^=s>>16;\n  s.x+=s.y*s.z;\n  s.y+=s.z*s.x;\n  s.z+=s.x*s.y;\n  return s;\n}\n\nvec3 pcg3df(vec3 s){\n  uvec3 r=pcg3d(floatBitsToUint(s));\n  return vec3(r)/float(0xffffffffu);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n  vec2 uv=fragCoord/iResolution.xy;\n  vec2 p=uv*2.-1.;\n  p.x*=iResolution.x/iResolution.y;\n  \n  vec4 rect;\n  rect.xy=floor(p);\n  rect.zw=rect.xy+1.;\n  \n  vec3 dices,dice0,dice1,dice;\n  vec2 clip0,clip1,clip;\n  float t,ani;\n  vec2 id=rect.xy;\n  float size=1.;\n  \n  for(int i=0;i<3;i++){\n    dices=pcg3df(id.xyy);\n    \n    t=.2*iTime+dices.x;\n    ani=smoothstep(1.,0.,exp(-30.*fract(t)));\n    \n    dice0=pcg3df(vec3(id,floor(t)));\n    dice1=pcg3df(vec3(id,floor(t+1.)));\n    \n    #define fclip(x) (x<.1?vec2(0):x<.2?vec2(0,1):x<.3?vec2(1,0):x<.4?vec2(1):vec2(.5))\n    clip0=fclip(dice0.x);\n    clip1=fclip(dice1.x);\n    clip=mix(clip0,clip1,ani);\n    clip=mix(rect.xy,rect.zw,clip);\n    \n    if(p.x<clip.x){\n      rect.z=clip.x;\n    }else{\n      rect.x=clip.x;\n      id.x+=size/2.;\n    }\n    if(p.y<clip.y){\n      rect.w=clip.y;\n    }else{\n      rect.y=clip.y;\n      id.y+=size/2.;\n    }\n    \n    size/=2.;\n  }\n\n  dices=pcg3df(id.xyy);\n    \n  t=iTime+dices.x;\n  ani=smoothstep(1.,0.,exp(-5.*fract(t)));\n    \n  dice0=pcg3df(vec3(id,floor(t)));\n  dice1=pcg3df(vec3(id,floor(t+1.)));\n\n  vec2 rects=rect.zw-rect.xy;\n  float cellsize=min(rects.x,rects.y);\n  float delta=2./iResolution.y;  \n\n  fragColor=dices.x<.5?vec4(.1,.12,.15,1):dices.x<.8?vec4(.4,.4,.4,1.):vec4(.7,.3,.3,1.);\n  \n  if(dices.x<.05){\n    float d=acos(cos(60.*PI*(p.x+p.y+.1*iTime)))/60./PI;\n    float shape=linearstep(delta,-delta,d);\n    fragColor=blend(fragColor,vec4(1)*shape);\n    return;\n  }\n  \n  vec4 layer=vec4(0);\n  \n  #define fcircc(x) (x<.2?vec2(0):x<.4?vec2(0,1):x<.6?vec2(1,0):x<.8?vec2(1):vec2(.5))\n  {\n    vec2 circc0=fcircc(dice0.y);\n    vec2 circc1=fcircc(dice1.y);\n    vec2 circc=mix(circc0,circc1,ani);\n    circc=mix(rect.xy,rect.zw,circc);\n    float r0=dice0.z<.5?.5:1.;\n    float r1=dice1.z<.5?.5:1.;\n    float r=mix(r0,r1,ani);\n    r*=cellsize;\n    float d=length(circc-p)-r;\n    float shape=linearstep(delta,-delta,d);\n    layer=blend(layer,vec4(.9,.9,.8,1)*shape);\n  }\n  dice0=pcg3df(dice0);\n  dice1=pcg3df(dice1);\n  {\n    vec2 circc0=fcircc(dice0.y);\n    vec2 circc1=fcircc(dice1.y);\n    vec2 circc=mix(circc0,circc1,ani);\n    circc=mix(rect.xy,rect.zw,circc);\n    float r0=dice0.z<.5?.5:.25;\n    float r1=dice1.z<.5?.5:.25;\n    float r=mix(r0,r1,ani);\n    r*=cellsize;\n    float d=length(circc-p)-r;\n    float shape=linearstep(delta,-delta,d);\n    layer=blend(layer,vec4(.6,.8,.4,1)*shape);\n  }\n  dice0=pcg3df(dice0);\n  dice1=pcg3df(dice1);\n  {\n    vec2 circc0=fcircc(dice0.y);\n    vec2 circc1=fcircc(dice1.y);\n    vec2 circc=mix(circc0,circc1,ani);\n    circc=mix(rect.xy,rect.zw,circc);\n    float r0=dice0.z<.5?.5:.25;\n    float r1=dice1.z<.5?.5:.25;\n    float r=mix(r0,r1,ani);\n    r*=cellsize;\n    float d=length(circc-p)-r;\n    float shape=linearstep(delta,-delta,d);\n    layer=blend(layer,vec4(.5,.6,.8,1)*shape);\n  }\n  \n  layer*=linearstep(.0,.0625,cellsize);\n  fragColor=blend(fragColor,layer);\n}","name":"Image","description":"","type":"image"}]}