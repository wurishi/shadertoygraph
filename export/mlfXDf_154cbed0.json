{"ver":"0.1","info":{"id":"mlfXDf","date":"1675426319","viewed":84,"name":"She tried","username":"ABK","description":"partiel matin\nBlobs In The Sky With Diamonds","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["partiel"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4df3Rr","filepath":"/media/a/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","previewfilepath":"/media/ap/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// 2023 \n// based on Flopine raymarch algo\n\n\nvec3 opRep( in vec3 p, in vec3 c)\n\n{\n    return mod(p+0.8*c,c)-0.5*c;\n}\n\n  vec3 palette (in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d)\n{\n    return a +b*cos (6.28318*(c*t+d) );\n}\n\nfloat SDF(vec3 p)\n{\n    //distance entre les balles\n    p = opRep(p, vec3(4.));\n    //taille des balles\n    return length(p)-1.30;\n    \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-iResolution.xy*.5)/iResolution.y;\n     \n    float mask = smoothstep(0.8, 0.0, length(uv));\n    mask *= 1.0-(uv.y+0.5);\n    \n    \n      \n    //depth des balles\n    uv = 10.*(fragCoord/iResolution.xy)-4.;\n\tuv.x *= iResolution.x/iResolution.y;\n    \n    // mouvement balles\n    uv.x +=sin(uv.y * 1.0) *0.5;\n    uv.y +=sin(uv.x * 1.0) *0.5;\n    \n    //emplacement cam\n    vec3 p = vec3 (iTime,0.,-2.);\n    vec3 dir = normalize(vec3(uv,5.));\n    \n    //nuance de gris de l'ombre/environement\n    float shad =  .80;\n\n    \n    // nette des pas derriere\n    for (int i=0;i<90;i++)\n    {\n        float d = SDF(p);\n        if (d<.01)\n        {\n            shad = float(i)/64.;//ombre des bordures?\n            break;\n        }\n        p += d*dir;\n    }\n    // Texture \n    vec3 an = abs(p);\n    vec3 c1 = texture(iChannel0, 0.005 * fract(p.xy)).rgb;\n    \n   //couleur \n    vec3                col = palette( fract(p.x), vec3(0.5,0.0,0.2),vec3(0.5,0.1,0.4),vec3(.2,.0,.4),vec3(0.3,0.2,0.20) + an.x*c1);\n    \n   // shadowing\n    col *= 0.8 + 0.7*sqrt(5.0*shad*(1.0-shad));\n    fragColor = vec4(col,.1);\n    float glow = mask*1.8;\n}\n","name":"Image","description":"","type":"image"}]}