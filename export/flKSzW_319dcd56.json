{"ver":"0.1","info":{"id":"flKSzW","date":"1640778137","viewed":133,"name":"Light fibers","username":"AnicetN","description":"Light fibers","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.14;\n\nfloat wave(vec2 p, inout vec3 tangent, float t, float ang, float ampl, float wl, float spd) {\n    float k = (2.*PI)/wl;\n    float f = (dot(vec2(cos(ang), sin(ang)), p.xy) - spd - t) * k;\n    \n    tangent += normalize(vec3(1., k*ampl*cos(f), 0.));\n    return ampl * sin(f);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 color = vec3(1., 0.3, 0.3);\n    float zoom = 0.6;\n    float t = (iTime*0.5*zoom)/2.;\n    vec2 uv = fragCoord/iResolution.xy;\n    uv = (2.*uv) - vec2(1.);\n    \n    vec3 tangent = vec3(0.);\n    float h = wave(uv, tangent, -t, (sin(t)*0.1)+t, 0.3, 1.*zoom, 0.1)\n        + wave(uv, tangent, t, (sin(t)*0.2)+t, 0.4, 0.4*zoom, 10.)\n        + wave(uv, tangent, t, (sin(t)*0.05)+t, 0.8, 0.7*zoom, 2.)\n        + wave(uv, tangent, -t, (sin(t)*0.3)+t, 1., 2.*zoom, 7.);\n\n    vec3 n = vec3(-tangent.y, tangent.x, 0);\n    \n    vec3 p = vec3(uv.x, h, uv.y);\n    vec3 lpos = vec3(cos(t)*1., 2., sin(t)*1.);\n    float lam = smoothstep(0., 2., dot(n, normalize(lpos-p)));\n    \n    vec3 water = vec3(lam)*color;\n    vec3 shiny = (vec3(smoothstep(0.9, 1., lam))*vec3(1., 1., 1.)*0.1)\n        + (vec3(smoothstep(0.999999, 1., lam))*vec3(1., 1., 1.)*0.2);\n    \n    fragColor = vec4(mix(vec3(0.1, 0.3, 0.6), water+shiny, n.y-0.3), 1.0);\n}","name":"Image","description":"","type":"image"}]}