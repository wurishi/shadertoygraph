{"ver":"0.1","info":{"id":"NtdBWs","date":"1663840034","viewed":102,"name":"Fork [SH17B] He Matvey 004","username":"Matvey","description":"hell repaint","likes":4,"published":1,"flags":64,"usePreview":0,"tags":["sh17b"],"hasliked":0,"parentid":"Ms2fWW","parentname":"[SH17B] HellCarting"},"renderpass":[{"inputs":[{"id":"XsfGzn","filepath":"/media/a/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","previewfilepath":"/media/ap/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","type":"cubemap","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdXXDB","filepath":"https://soundcloud.com/outlooks/subwaytrainsoundeffect2","previewfilepath":"https://soundcloud.com/outlooks/subwaytrainsoundeffect2","type":"musicstream","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 color0 = vec3(0, 0, 133);\nvec3 color1 = vec3(255, 105, 225);\nvec3 color2 = vec3(0, 0, 0);\nvec3 color3 = vec3(255, 105, 225);\n\n//More Spirograph by eiffie\n//Trying (and failing) to make a better DE for parameterized curves.\n\n\nfloat mapColorToValue(vec3 color) {\n    return (color.x + color.y + color.z) / 3.0;\n}\n\nvec3 interpolator(float t0, vec3 color0, float t1, vec3 color1, float t) {\n  return vec3(color1.x * t - color0.x * t + color0.x * t1 - color1.x * t0, color1.y * t - color0.y * t + color0.y * t1 - color1.y * t0, color1.z * t - color0.z * t + color0.z * t1 - color1.z * t0) / (t1 - t0) / 255.0;\n}\n\nvec3 mapValueToColor(float value) {\n    if(value >= 0.8) {\n        return interpolator(0.8, color2, 1.0, color3, value);\n    }\n    if(value >= 0.5) {\n        return interpolator(0.5, color1, 0.8, color2, value);\n    }\n    return interpolator(0.0, color0, 0.5, color1, value);\n}\n\nvec3 repaintColor(vec3 color) {\n    float value = mapColorToValue(color);\n    return mapValueToColor(value);\n}\n\n\n\nvec2 Path(vec2 x) {\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n\tf = f*f*(3.-2.*f);\n\treturn textureLod(iChannel2, (p+vec2(37.5,17.5) + f)/256.0, 0.).xy;\n}\n\n#define S(x) vec4(Path(x*vec2(.04,.1))*vec2(6,9),0,0)\n\nvoid mainImage( out vec4 o, in vec2 C ) {\n    vec4 p = vec4(C.xy,0,0)/iResolution.xyxy-.5, d=p, t, c, s;\n    p.z += iTime*8.;\n    p -= S(p.z);\n    float x, r, w, i;\n    for(i=1.5; i>0.; i-=.01)\n    {\n        // Select one of 5 type of wood beam separation\n        vec2 z = (p.zz-2.)*.25;\n        z = Path(z - fract(z))*4.+.5;\n        z = (z - fract(z))/10.;\n        z = mix(z, vec2(1.), step(vec2(.4), z));      \n        z *= step(4., mod(p.z-2., 8.));\n\t\tfloat f = mix(z.x, z.y, step(p.x, 0.));                \n        \n        t = abs(mod(c=p+S(p.z), 8.)-4.);\n        w = step(0., c.y);\n        r = (step(2.6, t.x) - step(2.8, t.x)) * w;        \n        s = texture(iChannel0, (c.y*t.x > 3. ? t.zxy:t.yzx)-3.);\n        x = min(t.x + f, t.y)-s.x * (1.-r) - r*.8;  \n                       \n        if(x < .01) break;\n        p -= d*x*.5;\n     }\n    w = step(t.x, 0.8) * step(2.8, t.z) + step(2.8, t.x) * step(0., c.y);\n    vec4 X4 = p.wyyw*.02 + 1.3* mix(s, vec4(.8), r) * mix(vec4(1), vec4(1,.5,.2,1), w ) * i/p.w;\n\to = vec4(repaintColor(X4.xyz), X4.w);\n}\n","name":"Image","description":"","type":"image"}]}