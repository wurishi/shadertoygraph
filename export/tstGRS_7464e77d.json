{"ver":"0.1","info":{"id":"tstGRS","date":"1568801800","viewed":163,"name":"Psychedelic Ripples","username":"j0","description":"This shader gives me a headache :)","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["ripples"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float Circle(vec2 uv, float radius){\n    return smoothstep(radius, radius*0.99, length(uv));\n}\n\nfloat Rand21(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec2 Rand22(vec2 co){\n    float p = Rand21(co);\n    return vec2(p, Rand21(vec2(co.y, p)));\n}\n\nfloat XOR(float a, float b){\n    return a*(1.-b) + b*(1.-a);\n}\n\nfloat Ripples(vec2 uv){\n    float m = 0.;\n    float t = iTime * 5.;\n    \n    vec2 gv = (fract(uv)-0.5)*2.;\n    vec2 id = floor(uv);\n    \n    \n    for(int y = -1; y <= 1; ++y){\n        for(int x = -1; x <= 1; ++x){\n            vec2 offset = vec2(x, y)*2.;\n            vec2 wId = vec2(id-offset*0.5);\n            vec2 wGv = gv + offset;\n            float wIdLength = length(wId);\n            \n            float maxRadius = clamp((20.-wIdLength)/20., 0., 1.);\n            maxRadius = mix(0.4, 2., maxRadius);\n    \t\tfloat radius = mix(0.3, maxRadius, sin(t-wIdLength*0.8)*0.5+0.5);\n            \n            vec2 pos = sin(Rand22(wId+756.31)*t)*0.4;\n            pos *= clamp(wIdLength, 0., 2.);\n            pos += wGv;\n            \n            float circle = Circle(pos, radius);\n    \t\tm = XOR(circle, m);\n        }\n    }\n    \n    return m;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-0.5*iResolution.xy)/iResolution.y;\n    float gradient = uv.y;\n    \n    float uvLength = length(uv);\n    \n    uv *= uvLength;\n    \n    float a = iTime*0.2*(1.-uvLength*0.005);\n    float sinA = sin(a);\n    float cosA = cos(a);\n    mat2 rot = mat2(cosA, -sinA, sinA, cosA);\n    uv *= rot;\n    \n   \tuv *= mix(40., 150., sin(iTime*0.41)*0.5+0.5);\n    \n    float m = Ripples(uv+0.5)*0.8;\n    m += Ripples(uv*0.5+0.5);\n    \n    m += clamp(0.25-gradient, 0., 1.)*0.7;\n    \n    m = clamp(m, 0., 1.);\n    \n    m *= 1. - uvLength*0.5;\n    \n    vec3 col = vec3(0.);\n    \n    col.r = sin(iTime*0.874)*0.2+0.65;\n    col.g = sin(iTime*0.976)*0.2+0.65;\n    col.b = sin(iTime*0.897)*0.2+0.65;\n    \n    col *= m;\n    \n    fragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}