{"ver":"0.1","info":{"id":"3tKBz3","date":"1614771613","viewed":114,"name":"Wave Photo Render in Progress","username":"vamoss","description":"Render image with different wave strokes width.\n\nThis application uses PCD Brasil 2021 Identity, available at: https://pcd.encontrosdigitais.com.br","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["wave","line","sine","photo","tracer","render"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 bgColor = vec3(1.0);\nvec3 color1 = vec3(1.0, 0.4, 0.42);\nvec3 color2 = vec3(0.0, 0.29, 0.63);\n\nfloat wave(vec2 uv, float amp, float freq, float stroke, float threshold){\n    float waveY = mod(uv.y, amp);\n    waveY += (amp * sin(uv.x * freq + iTime ))/3.0 - amp/2.0;\n\tfloat wave = abs(1.0 / (80.0 * waveY)) * stroke;\n    return smoothstep(threshold, 1.0, wave);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec3 photo = texture(iChannel0, uv).rgb;\n\tfloat photoGrey = 0.21 * photo.r + 0.71 * photo.g + 0.07 * photo.b;\n    \n\tuv  = -1.0 + 2.0 * uv;\n    \n    vec3 finalColor = bgColor;\n    \n    float amp = 0.2;\n    float strokeWidth = 0.15;\n    float frequency = 8.0;\n    float threshold = 0.1;\n    const float repeat1 = 4.0;\n    for(float i = 0.0; i < repeat1; i++){\n        vec2 stepUv = uv + vec2(0., amp/repeat1*i);\n        float w = wave(stepUv, amp, frequency, strokeWidth, threshold);\n        finalColor = mix(finalColor, color1, w);\n    }\n    \n    amp = 0.12;\n    strokeWidth = 1.0-photoGrey;\n    frequency = 4.2;\n    threshold = 0.75;\n    const float repeat2 = 3.0;\n    for(float i = 0.0; i < repeat2; i++){\n        vec2 stepUv = uv + vec2(0., amp/repeat2*i);\n        float w = wave(stepUv, amp, frequency, strokeWidth, threshold);\n        finalColor = mix(finalColor, color2, w);\n    }\n    \n\tfragColor = vec4(finalColor, 1.0);\n}","name":"Image","description":"","type":"image"}]}