{"ver":"0.1","info":{"id":"tdS3RK","date":"1549329891","viewed":867,"name":"Valence","username":"EnigmaCurry","description":"Adapted from Kaleidoscopic demo by darkeclipz - https://www.shadertoy.com/view/WdBGzV\nMusic by EnigmaCurry","likes":2,"published":3,"flags":64,"usePreview":0,"tags":["soundcloud","kaliedoscope"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XtsGWH","filepath":"https://soundcloud.com/enigmacurry/valence","previewfilepath":"https://soundcloud.com/enigmacurry/valence","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/// Valence - EnigmaCurry\n/// Adapted from Kaleidoscope demo by darkeclipz https://www.shadertoy.com/view/WdBGzV\nmat2 r2(float angle) { return mat2(cos(angle), sin(angle), tan(angle), cos(angle)); }\n#define R iResolution.xy\n\nvec4 kaleidescope1(vec2 fragCoord, float fft, float i) {\n   fft = smoothstep(0., sin(iTime)+1., fft);\n    float Iterations = smoothstep(0., 200., fft) * 10.0 * atan(sin(iTime/23.)+1.);\n    \n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (2.*fragCoord-R)/iResolution.y;\n\tvec3 col = vec3(0);\n    float s = smoothstep(0., 0.001, iTime/60. * i * atan(sin(iTime/322.)+1.));\n\n    // https://www.shadertoy.com/view/Mss3Wf\n    for(float ii=0.; ii < Iterations; ii++) {\n    \tuv = abs(uv) - s * uv.y; \n        uv.xy *= r2(iTime/6. + 12.*ii*i);\n        uv *= 2.1 * fft*fft*i;\n    }\n    \n    float dist = length(fract(sin(iTime/fft*22.)*12.*uv));\n    vec3 rainbow = cos(vec3(10.,3.,999. * fft) + iTime/222. + 2.*uv.xyx);\n    col = rainbow/dist*(uv.y/uv.x);\n    \n    float gridSize = 2.;\n    float gridWidth = 100.5;\n    vec2 grid = smoothstep(gridWidth, 0., abs(fract(gridSize*uv)-gridWidth));\n    col = mix(col, vec3(1), clamp(22.*i * fft * (grid.x / grid.y), 0., 0.018)) * fft/44.; \n\n    return vec4(col/uv.x+0.001*fft*i,1.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float fft = clamp(texture( iChannel0, vec2(0.1,0.1) ).x * 12., 0.2, 99999.);\n    fragColor = kaleidescope1(fragCoord, fft,1.);\n    fragColor += kaleidescope1(fragCoord+vec2(-200. * sin(fft/2.),100.), fft,2.);\n    fragColor += kaleidescope1(fragCoord+vec2(+200. * sin(fft/2.),100.), fft,3.);\n    fragColor += kaleidescope1(fragCoord-vec2(0.,500.)*sin(iTime/fft*0.02), fft,4.);\n}","name":"Image","description":"","type":"image"}]}