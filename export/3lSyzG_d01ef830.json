{"ver":"0.1","info":{"id":"3lSyzG","date":"1595197059","viewed":292,"name":"Comic_Life (Dither)","username":"SleepyRon","description":"Basic dithering for video input. ","likes":4,"published":1,"flags":2,"usePreview":0,"tags":["dither","bayer","luma"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float luma(vec3 color) {\n\treturn dot(color, vec3(0.299, 0.587, 0.114));\n}\n\nfloat bayer( int iter, vec2 rc )\n{\n\tfloat sum = 0.0;\n\tfor( int i=0; i<1; ++i )\n\t{\n\t\tif ( i >= iter ) break;\n\t\tvec2 bsize = vec2(pow(2.0, float(i+1)));\n\t\tvec2 t = mod(rc, bsize) / bsize;\n\t\tint idx = int(dot(floor(t*2.0), vec2(2.0,1.0)));\n\t\tfloat b = 0.0;\n\t\tif ( idx == 0 ) { b = 0.0; } else if ( idx==1 ) { b = 2.0; } else if ( idx==2 ) { b = 3.0; } else { b = 1.0; }\n\t\tsum += b * pow(4.0, float(iter-i-1));\n\t}\n\tfloat phi = pow(4.0, float(iter))+1.0;\n\treturn (sum+1.0) / phi;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec3 col;\n    \n    // TRY CHANGING DITHER AMOUNT\n    float dither_amount = .5;\n\tfloat thresh = bayer(1, uv * (iResolution.xy * dither_amount) );\n\t\t\n\tvec3 cam_color = texture( iChannel0, uv).xyz;\n    \n    cam_color = cam_color * step(thresh, luma(cam_color));\n  \tfragColor.xyz = cam_color;\n}","name":"Image","description":"","type":"image"}]}