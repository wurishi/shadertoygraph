{"ver":"0.1","info":{"id":"wdjGRc","date":"1549580202","viewed":1773,"name":"Love and Domination","username":"wyatt","description":"Who threatens you? Who do you want? ","likes":74,"published":3,"flags":32,"usePreview":0,"tags":["particles","paper","rock","scissors"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 R;\nvec4 D (vec2 U) {return texture(iChannel0,U/R);}\\\nvoid mainImage( out vec4 Q, in vec2 U )\n{\tR = iResolution.xy;\n \tvec4 \n        n = D(U+vec2(0,1)),\n        e = D(U+vec2(1,0)),\n        s = D(U+vec2(0,-1)),\n        w = D(U+vec2(-1,0));\n        \n \tvec4 dx = e-w;\n \tvec4 dy = n-s;\n \tQ = (D(U)+abs(dx) + abs(dy))/3.;     \n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec2 R;\nvec4 A (vec2 U) {return texture(iChannel0,U/R);}\nvec4 B (vec2 U) {return texture(iChannel1,U/R);}\nvec4 C (vec2 U) {return texture(iChannel2,U/R);}\nvoid X (vec2 U, inout vec4 Q, vec2 u) {\n    vec4 p = A(U+u);//read neighbor\n    if (length(p.xy - U) < length(Q.xy-U)) Q = p;\n}\nvoid mainImage( out vec4 Q, in vec2 U )\n{\tR = iResolution.xy;\n \tQ = A(U);\n \t// measure the neighborhood\n \tX(U,Q,vec2(1,0)); \n \tX(U,Q,vec2(0,1));\n \tX(U,Q,vec2(0,-1));\n \tX(U,Q,vec2(-1,0));\n \tX(U,Q,vec2(1,1));\n \tX(U,Q,vec2(-1,1));\n \tX(U,Q,vec2(1,-1));\n \tX(U,Q,vec2(-1,-1));\n\t// get gradient of pheromone feild\n \t// 0 : x  1 : y 2 : z\n \t// x > y > z > x > y ...\n \tvec4 \n        n = C(U+vec2(0,1)),\n        e = C(U+vec2(1,0)),\n        s = C(U+vec2(0,-1)),\n        w = C(U+vec2(-1,0));\n        \n \tvec3 dx = e.xyz-w.xyz;\n \tvec3 dy = n.xyz-s.xyz;\n\t\n \tvec2 v = vec2(0);\n    if (Q.w == 0.) v = vec2(dx.z-dx.y+0.3*dx.x,dy.z-dy.y+0.3*dy.x);\n    if (Q.w == 1.) v = vec2(dx.x-dx.z+0.1*dx.y,dy.x-dy.z+0.1*dy.y);\n    if (Q.w == 2.) v = vec2(dx.y-dx.x+0.2*dx.z,dy.y-dy.x+0.2*dy.z);\n \tif (length(v) > 0.) \n        Q.xy += normalize(v)*min(1.,SPEED*length(v));\n    \n    if (iFrame < 1) {\n        U = floor((U)/8.)*8.+5.;\n    \tQ = vec4(U,1,floor(mod(-U.x/R.x*5.,3.)));\n    }\n \tif (iMouse.z > 0. && length(iMouse.xy-Q.xy) < MOUSE_SIZE) Q=vec4(-100,-100,0,0);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"// Blur pass 1\nvec2 R;\nvec4 A (vec2 U) {return texture(iChannel0,U/R);}\nvec4 B (vec2 U) {return texture(iChannel1,U/R);}\nvec4 C (vec2 U) {return texture(iChannel2,U/R);}\nvoid mainImage( out vec4 Q, in vec2 U )\n{\tR = iResolution.xy;\n\tQ = vec4(0);\n \tfor (float i = -BLUR_DEPTH ; i <= BLUR_DEPTH ; i++) {\n \t\tvec4 a = A(U+vec2(i,0));\n        vec4 c = a.z*smoothstep(1.,.5,length(U+vec2(i,0)-a.xy))*vec4(a.w==0.,a.w==1.,a.w==2.,0);\n        Q += c*sqrt(s2)/s2*exp(-i*i*0.5/s2);\n \t}\n \t\t\n \t\n}\n","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"// Blur pass 2\nvec2 R;\nvec4 A (vec2 U) {return texture(iChannel0,U/R);}\nvec4 B (vec2 U) {return texture(iChannel1,U/R);}\nvec4 C (vec2 U) {return texture(iChannel2,U/R);}\nvoid mainImage( out vec4 Q, in vec2 U )\n{\tR = iResolution.xy;\n\tQ = vec4(0);\n \tfor (float i = -BLUR_DEPTH ; i <= BLUR_DEPTH ; i++) {\n \t\tvec4 c = B(U+vec2(0,i));\n        Q += 2.*c*sqrt(s2)/s2*exp(-i*i*0.5/s2);\n \t}\n \tQ = mix(Q,C(U),0.1);\n \t\n}\n","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"// color\nvec2 R;\nvec4 A (vec2 U) {return texture(iChannel0,U/R);}\nvec4 B (vec2 U) {return texture(iChannel1,U/R);}\nvec4 C (vec2 U) {return texture(iChannel2,U/R);}\nvoid mainImage( out vec4 Q, in vec2 U )\n{\tR = iResolution.xy;\n \tvec4 c = C(U);\n \tvec4 \n        n = C(U+vec2(0,1)),\n        e = C(U+vec2(1,0)),\n        s = C(U+vec2(0,-1)),\n        w = C(U+vec2(-1,0));\n \tvec4 a = A(U);\n \tfloat r=smoothstep(1.,0.5,length(U-a.xy));\n \tvec4 f = \n        (r*float(a.w==0.))*vec4(.8,.6,.3,1)+\n        (r*float(a.w==1.))*vec4(.9,.2,.4,1)+\n        (r*float(a.w==2.))*vec4(.2,.7,.9,1);\n \tQ = 2.*f*(0.5+0.5*(n-s+e-w));\n}","name":"Buffer D","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"/*\n\tThis controls how far the \"scent\" of each cell travels\n\tIts distributed by a gaussian blur.\n\tThe farther the information spreads, the more blurred it is\n\tHigh values result in sleepy simulations and \n\tlow values result in excited simulations\n*/\n\n#define s2 30.\n#define BLUR_DEPTH 25.\n#define SPEED 2.\n#define MOUSE_SIZE 60.","name":"Common","description":"","type":"common"}]}