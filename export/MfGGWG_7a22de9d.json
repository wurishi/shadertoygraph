{"ver":"0.1","info":{"id":"MfGGWG","date":"1713316942","viewed":50,"name":"Drawing Shapes","username":"HenriPK","description":"Drawing a few shapes on-screen (WIP).","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["shapes"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void commit( inout vec3 col, in vec4 blend ) {\n    col = mix(col, blend.rgb, blend.a);\n}\n\nbool pointInAABB(vec2 p, vec2 position, vec2 size) {\n    return p.x > position.x && p.y > position.y && p.x < (position.x + size.x) && p.y < (position.y + size.y);\n}\n\nvoid rect(inout vec2 fc, out vec3 col, vec2 position, vec2 size, vec4 color_a, vec4 color_b, float radius) {\n    float d = SDFRect(fc - size*0.5 - position, size*0.5, radius);\n    vec4 color = mix(color_a, color_b, (fc.x - position.x) / size.x);\n    vec4 c_color = d < 0.0 ? color : vec4(color.rgb, 0.0);\n    //c_color = vec4(sin(d), 0.0, 0.0, 1.0);\n    commit(col, c_color);\n}\n\nvoid rectStroke(inout vec2 fc, out vec3 col, vec2 position, vec2 size, vec4 color, float radius, float thickness) {\n    float d = SDFRect(fc - size*0.5 - position, size*0.5, radius);\n    vec4 c_color = d > -thickness * 0.5 && d < thickness * 0.5 ? color : vec4(color.rgb, 0.0);\n    commit(col, c_color);\n}\n\nvoid rectShadow(inout vec2 fc, out vec3 col, vec2 position, vec2 size, vec4 color, float radius, float thickness) {\n    float d = SDFRect(fc - size*0.5 - position, size*0.5, radius);\n    float dd = smoothstep(thickness, -thickness, d);\n    vec4 c_color = vec4(color.rgb, color.a * dd * dd);\n    commit(col, c_color);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{   \n    vec2 fc = fragCoord;\n    vec3 col = vec3(0.0);\n\n    // Objects;\n    commit(col, vec4(vec3(0.95), 1.0));\n \n    vec2 size = vec2(96, 40);\n    vec2 pos = (iResolution.xy - size) / 2.0 + vec2(30.0 * cos(iTime), 10.0 * sin(iTime*3.0));\n \n    rectShadow(fc, col, pos-vec2(2), size + vec2(4), vec4(0.7, 0.2, 0.3, 0.9), 25.0, 30.0);\n    vec4 colb = vec4(1.0, 0.0, 0.25, 1.0);\n    vec4 cola = vec4(1.0, 0.25, 0.2, 1.0);\n    rect(fc, col, pos, size, cola, colb, 5.0);\n    rectStroke(fc, col, pos + vec2(1.0), size - vec2(2.0), vec4(1.0, 1.0, 1.0, 0.3), 5.0, 2.0);\n    rectStroke(fc, col, pos, size, vec4(0.6, 0.0, 0.2, 1.0), 5.0, 1.7);\n \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float SDFRect(vec2 position, vec2 halfSize, float cornerRadius) {\n   position = abs(position) - halfSize + cornerRadius;\n   return length(max(position, 0.0)) + min(max(position.x, position.y), 0.0) - cornerRadius;\n}","name":"Common","description":"","type":"common"}]}