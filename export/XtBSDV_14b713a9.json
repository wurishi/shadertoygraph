{"ver":"0.1","info":{"id":"XtBSDV","date":"1446424093","viewed":417,"name":"Starlight","username":"jackdavenport","description":"A screensaver I was making for OS X that didn't end up working, ported to Shadertoy. If the stars don't appear immediately, go fullscreen and they should appear.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["2d","noise","star","sky","night","scene"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","previewfilepath":"/media/ap/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float getStarFact() {\n\n\tfloat t = dot(vec2(iTime / 120.), gl_FragCoord.xy);\n\tfloat x = fract(sin(t));\n\n\treturn mix(.3, 1., x);\n\n}\n\nfloat noise(vec2 p) {\n\n\tvec2 uv = mod(p / 1000., vec2(1.));\n\tvec4 t  = texture(iChannel0, uv);\n\n\treturn (t.x+t.y+t.z)/3.;\n\n}\n\nfloat noise1D(float x) {\n\n    vec4 tex = texture(iChannel0, mod(vec2(x / 30.,0.), 1.));\n    return (tex.r + tex.g + tex.b) / 3.;\n    \n}\n\nfloat smoothNoise(float x) {\n\n\tfloat halfX = x / 10.;\n\n\tfloat interp = smoothstep(0.,1.,fract(x));\n\tfloat s = mix(noise1D(floor(halfX)), noise1D(ceil(halfX)), interp);\n\tfloat n = mix(noise1D(ceil(halfX)), noise1D(floor(halfX)), interp);\n\treturn mix(s, n, 1. - interp);\n\n}\n\nfloat fractNoise(float x) {\n\n\tfloat sum = 0.;\n\tsum += smoothNoise(x);\n\tsum += smoothNoise(x * 2.);\n\tsum += smoothNoise(x * 4.);\n\tsum += smoothNoise(x * 8.);\n\tsum += smoothNoise(x * 16.);\n\treturn sum / 5.;\n\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tfloat n = noise(vec2(uv.x,uv.y-iTime / 10000.) * 6000.);\n\n\tfloat mountainH = mix(.1,.2,fractNoise(uv.x * 6.));\n\tvec3 col = vec3(getStarFact());\n\t\n\tif(n < 0.95) {\n\t\n\t\tcol = mix(vec3(0.),vec3(.25),1.-pow(uv.y,.5));\n\t\n\t}\n\t\n\tif(uv.y < mountainH) {\n\t\n\t\tcol = vec3(.08);\n\t\n\t}\n\t\n\tfragColor = vec4(col,1.);\n}\n","name":"Image","description":"","type":"image"}]}