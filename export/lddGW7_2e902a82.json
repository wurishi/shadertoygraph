{"ver":"0.1","info":{"id":"lddGW7","date":"1450208268","viewed":226,"name":"Necromurlok - Angle","username":"Necromurlok","description":"two ways to do almost a same thing","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["angle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define TEXEL (1.0 / iResolution.y)\n#define TEXELPOWERED TEXEL * TEXEL\n\nfloat line(in vec2 uv, in vec2 p0, in vec2 p1)\n{\n    vec2 line = p1 - p0;\n    vec2 dir = uv - p0;\n    \n    float h = clamp(dot(dir, line) / dot(line, line), 0.0, 1.0);\n    dir -= line * h;\n    \n    return 1.0 - smoothstep(-TEXELPOWERED, TEXELPOWERED, dot(dir, dir) - 0.0000025);\n}\n\n\nfloat smoothDot(in vec2 uv, in vec2 pos, in float r, in float pw)\n{\n    float l = length(uv - pos) / r;    \n\treturn step(l, 1.0) * (1.0 - pow(l, pw));\n}\n\n\nconst float STEP = 1.0 / 20.0;\n\n\nfloat star1(in vec2 uv, in vec2 center, in float radius)\n{\n    uv -= center;\n    float angle = atan(uv.x, uv.y) / (3.1415 * 2.0);\n    \n    angle = fract((floor(angle / STEP) * STEP));\n    \n    angle = (angle + STEP * 0.5) * 3.1415 * 2.0;\n    vec2 pos = vec2(radius, 0.0);\n    mat2 m = mat2(sin(angle), cos(angle), cos(angle), -sin(angle));\n        \n    pos *= m;\n    \n    return line(uv, vec2(0.0), pos);\n}\n\nfloat star2(in vec2 uv, in vec2 center, in float radius)\n{\n    float ret = 0.0;\n    for(float angle = 0.0; angle < 3.1415 * 2.0; angle += STEP * 3.1415 * 2.0)\n    {\n        mat2 m = mat2(sin(angle), cos(angle), cos(angle), -sin(angle));        \n        vec2 pos = m * vec2(radius, 0.0);\n//        ret += line(uv, center, pos + center);\n        ret = max(ret, line(uv, center, pos + center));\n            \n    }\n    return ret;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (fragCoord.xy - (iResolution.xy * 0.5)) / iResolution.xx;\n    \n    fragColor = vec4(vec3(star1(uv, vec2(-0.25, 0.0), 0.25)), 0.0);\n    fragColor += vec4(vec3(star2(uv, vec2(0.25, 0.0), 0.25)), 1.0);\n\n}\n\n","name":"Image","description":"","type":"image"}]}