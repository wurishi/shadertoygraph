{"ver":"0.1","info":{"id":"ctfBWS","date":"1693375653","viewed":52,"name":"Programmers At Night _ 2","username":"ramansinghdhiman","description":"Programmers At Night _ 2","likes":7,"published":1,"flags":0,"usePreview":1,"tags":["procedural","moon","night","buildings"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Moving this shader to new account\n\nfloat random(vec2 uv)\n{\n    return fract(sin(uv.x * 5131.0 + uv.y * 52236.0034) * 5889.0);\n}\n\nfloat circleShape(vec2 center, vec2 uv, float radius, float smoothness)\n{\n    float dist = distance(uv, center);\n    return 1.0 - smoothstep(radius - smoothness, radius + smoothness, dist);\n}\n\nfloat rectShape(vec2 center, vec2 size, vec2 uv, float smoothness)\n{\n    vec2 le = center - size / 2.0;\n    vec2 ue = center + size / 2.0;\n    \n    float rect = smoothstep(le.x - smoothness, le.x + smoothness, uv.x);\n    rect *= smoothstep(le.y - smoothness, le.y  + smoothness, uv.y);\n    \n    rect *= 1.0 - smoothstep(ue.x - smoothness, ue.x + smoothness, uv.x);\n    rect *= 1.0 - smoothstep(ue.y - smoothness, ue.y + smoothness, uv.y);\n    \n    return rect;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    uv -= 0.5;\n    uv.x *= iResolution.x / iResolution.y;\n    uv += 0.5;\n    \n    vec3 col = vec3(0.05, 0.1, 0.25);\n    \n    float glow = circleShape(vec2(0.425, 0.6), uv, 0.25, 0.3);\n    \n    float rand = random(uv);\n    \n    col = mix(col, vec3(1.0) *  1.0 - glow, step(0.9995, rand));\n        \n    glow = clamp(glow, 0.0, 1.0);\n    \n    glow *= 0.25;\n    \n    col = mix(col, vec3(1.0), glow);\n    \n    float moon = circleShape(vec2(0.5, 0.7), uv, 0.25, 0.0025);\n    moon -= circleShape(vec2(0.6, 0.8), uv, 0.25, 0.0025);\n    \n    float tex = texture(iChannel0, uv * 10.0).r + 0.5;\n    \n    float texFill = circleShape(vec2(0.55, 0.75), uv, 0.25, 0.05);\n    \n    tex = mix(1.0, tex, texFill);\n    \n    moon *= tex;\n    \n    moon = clamp(moon, 0.0, 1.0);\n    \n    col = mix(col, vec3(1.0), moon);\n    \n    float bv = fract(uv.x * 10.0);\n    float bs = floor(uv.x * 10.0);\n    \n    float building = random(vec2(bs));\n    \n    building = mix(0.1, 0.45, building);\n    \n    building *= 30.0;\n    building = floor(building);\n    building /= 30.0;\n    \n    building = 1.0 - step(building, uv.y);\n    \n    col = mix(col, vec3(0.05), building);\n    \n    vec2 blocks = fract(uv * 30.0);\n    vec2 blockF = floor(uv * 30.0);\n    \n    float block = rectShape(vec2(0.5), vec2(0.5), blocks, 0.00001) * 0.5;\n    \n    float light = random(blockF);\n    \n    block += rectShape(vec2(0.5), vec2(0.5), blocks, 0.1) * step(0.8, light);\n    \n    block *= step(0.1, uv.y);\n    \n    light = step(0.6, light);\n    \n    block *= light;\n    \n    col = mix(col, mix(vec3(1.0, 0.0, 1.0), vec3(0.0, 1.0, 1.0), uv.x), block * building);\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}