{"ver":"0.1","info":{"id":"4lycWK","date":"1537941863","viewed":719,"name":"Unsteady Flow","username":"wyatt","description":"Vortex shedding demonstration of my new fluid solving algorithm. Best results in full screen.\nfor an explanation of this algorithm : https://www.shadertoy.com/view/XtGcDK","likes":12,"published":3,"flags":32,"usePreview":0,"tags":["fluid"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsX3zn","filepath":"/media/a/94284d43be78f00eb6b298e6d78656a1b34e2b91b34940d02f1ca8b22310e8a0.png","previewfilepath":"/media/ap/94284d43be78f00eb6b298e6d78656a1b34e2b91b34940d02f1ca8b22310e8a0.png","type":"cubemap","channel":2,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec4 t (vec2 v) {return texture(iChannel0,v/iResolution.xy);}\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    vec4 me = t(U);\n    vec2 dw = vec2(\n    \tt(U+vec2(1,0)).w-t(U-vec2(1,0)).w,\n    \tt(U+vec2(0,1)).w-t(U-vec2(0,1)).w\n    );\n    vec3 n = normalize(vec3(dw,.07));\n    C = sin(vec4(1.5,2.5,3,4)*me.w*4.);\n    float l = dot(n,normalize(vec3(3,1,0)));\n    C *= 0.7+0.3*(0.3+0.7*l)*texture(iChannel2, reflect(vec3(0,0,-1),n));\n\tC = (0.9+0.1*l)*sqrt(C)*sqrt(sqrt(C));\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec2 R;\nvec4 T ( vec2 U ) {return texture(iChannel0,U/R);}\nvoid mainImage( out vec4 Q, in vec2 U )\n{   R = iResolution.xy;\n \t\n \tvec2 O = U,A = U+vec2(1,0),B = U+vec2(0,1),C = U+vec2(-1,0),D = U+vec2(0,-1);\n \tvec4 u = T(U), a = T(A), b = T(B), c = T(C), d = T(D);\n \tvec4 p;\n \tvec2 g = vec2(0);\n \t#define I 2\n \tfor (int i = 0; i < I; i++) {\n        U -=u.xy; A -=a.xy; B -=b.xy; C -=c.xy; D -=d.xy; \n        p += vec4(length(U-A),length(U-B),length(U-C),length(U-D))-1.;\n        g += vec2(a.z-c.z,b.z-d.z);\n        u = T(U);a = T(A); b = T(B); c = T(C); d = T(D);\n \t}   \n \tQ = T(U);\n \tvec4 N = 0.25*(a+b+c+d);\n \tQ = mix(Q,N, vec4(0,0,1,0));\n \tQ.xy -= g/8./float(I);\n \tQ.z += (p.x+p.y+p.z+p.w)/8.;\n \tQ.z *= 0.9995;\n \tfloat o = .15; // CHANGE THIS TO CHANGE SPEED\n \tif (U.x < 2.) Q.x = o;\n \tif (iFrame < 1) Q = vec4(o,0,0,0);\n \tif (length(U/R.y-vec2(0.1,0.5)) < .025) Q.xyw = vec3(0,0,1);\n \t\n \tif (U.x<2.||U.y<2.||R.x-U.x<2.||R.y-U.y<2.) Q=vec4(o,0,0,0);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"vec2 R;\nvec4 T ( vec2 U ) {return texture(iChannel0,U/R);}\nvoid mainImage( out vec4 Q, in vec2 U )\n{   R = iResolution.xy;\n \t\n \tvec2 O = U,A = U+vec2(1,0),B = U+vec2(0,1),C = U+vec2(-1,0),D = U+vec2(0,-1);\n \tvec4 u = T(U), a = T(A), b = T(B), c = T(C), d = T(D);\n \tvec4 p;\n \tvec2 g = vec2(0);\n \t#define I 2\n \tfor (int i = 0; i < I; i++) {\n        U -=u.xy; A -=a.xy; B -=b.xy; C -=c.xy; D -=d.xy; \n        p += vec4(length(U-A),length(U-B),length(U-C),length(U-D))-1.;\n        g += vec2(a.z-c.z,b.z-d.z);\n        u = T(U);a = T(A); b = T(B); c = T(C); d = T(D);\n \t}   \n \tQ = T(U);\n \tvec4 N = 0.25*(a+b+c+d);\n \tQ = mix(Q,N, vec4(0,0,1,0));\n \tQ.xy -= g/8./float(I);\n \tQ.z += (p.x+p.y+p.z+p.w)/8.;\n \tQ.z *= 0.9995;\n \tfloat o = .15; // CHANGE THIS TO CHANGE SPEED\n \tif (U.x < 2.) Q.x = o;\n \tif (iFrame < 1) Q = vec4(o,0,0,0);\n \tif (length(U/R.y-vec2(0.1,0.5)) < .025) Q.xyw = vec3(0,0,1);\n \t\n \tif (U.x<2.||U.y<2.||R.x-U.x<2.||R.y-U.y<2.) Q=vec4(o,0,0,0);\n}","name":"Buffer D","description":"","type":"buffer"},{"inputs":[{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"vec2 R;\nvec4 T ( vec2 U ) {return texture(iChannel0,U/R);}\nvoid mainImage( out vec4 Q, in vec2 U )\n{   R = iResolution.xy;\n \t\n \tvec2 O = U,A = U+vec2(1,0),B = U+vec2(0,1),C = U+vec2(-1,0),D = U+vec2(0,-1);\n \tvec4 u = T(U), a = T(A), b = T(B), c = T(C), d = T(D);\n \tvec4 p;\n \tvec2 g = vec2(0);\n \t#define I 2\n \tfor (int i = 0; i < I; i++) {\n        U -=u.xy; A -=a.xy; B -=b.xy; C -=c.xy; D -=d.xy; \n        p += vec4(length(U-A),length(U-B),length(U-C),length(U-D))-1.;\n        g += vec2(a.z-c.z,b.z-d.z);\n        u = T(U);a = T(A); b = T(B); c = T(C); d = T(D);\n \t}   \n \tQ = T(U);\n \tvec4 N = 0.25*(a+b+c+d);\n \tQ = mix(Q,N, vec4(0,0,1,0));\n \tQ.xy -= g/8./float(I);\n \tQ.z += (p.x+p.y+p.z+p.w)/8.;\n \tQ.z *= 0.9995;\n \tfloat o = .15; // CHANGE THIS TO CHANGE SPEED\n \tif (U.x < 2.) Q.x = o;\n \tif (iFrame < 1) Q = vec4(o,0,0,0);\n \tif (length(U/R.y-vec2(0.1,0.5)) < .025) Q.xyw = vec3(0,0,1);\n \t\n \tif (U.x<2.||U.y<2.||R.x-U.x<2.||R.y-U.y<2.) Q=vec4(o,0,0,0);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"vec2 R;\nvec4 T ( vec2 U ) {return texture(iChannel0,U/R);}\nvoid mainImage( out vec4 Q, in vec2 U )\n{   R = iResolution.xy;\n \t\n \tvec2 O = U,A = U+vec2(1,0),B = U+vec2(0,1),C = U+vec2(-1,0),D = U+vec2(0,-1);\n \tvec4 u = T(U), a = T(A), b = T(B), c = T(C), d = T(D);\n \tvec4 p;\n \tvec2 g = vec2(0);\n \t#define I 2\n \tfor (int i = 0; i < I; i++) {\n        U -=u.xy; A -=a.xy; B -=b.xy; C -=c.xy; D -=d.xy; \n        p += vec4(length(U-A),length(U-B),length(U-C),length(U-D))-1.;\n        g += vec2(a.z-c.z,b.z-d.z);\n        u = T(U);a = T(A); b = T(B); c = T(C); d = T(D);\n \t}   \n \tQ = T(U);\n \tvec4 N = 0.25*(a+b+c+d);\n \tQ = mix(Q,N, vec4(0,0,1,0));\n \tQ.xy -= g/8./float(I);\n \tQ.z += (p.x+p.y+p.z+p.w)/8.;\n \tQ.z *= 0.9995;\n \tfloat o = .15; // CHANGE THIS TO CHANGE SPEED\n \tif (U.x < 2.) Q.x = o;\n \tif (iFrame < 1) Q = vec4(o,0,0,0);\n \tif (length(U/R.y-vec2(0.1,0.5)) < .025) Q.xyw = vec3(0,0,1);\n \t\n \tif (U.x<2.||U.y<2.||R.x-U.x<2.||R.y-U.y<2.) Q=vec4(o,0,0,0);\n}","name":"Buffer C","description":"","type":"buffer"}]}