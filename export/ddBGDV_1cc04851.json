{"ver":"0.1","info":{"id":"ddBGDV","date":"1668137592","viewed":84,"name":"KiraKira","username":"akabozu","description":"005","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["wrap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"ivec2 ch;\nconst float PI = 3.1415926;\n\nuvec3 k = uvec3(0x456789abu, 0x6789ab45u, 0x89ab4567u);\nuvec3 u = uvec3(1, 2, 3);\nconst uint MAX = 0xffffffffu;\n\nuvec2 h2(uvec2 n){\n    n ^= (n.yx << u.xy);\n    n ^= (n.yx >> u.xy);\n    n *= k.xy;\n    n ^= (n.yx << u.xy);\n    return n * k.xy;\n}\n\nfloat h1(vec2 p){\n    uvec2 n = floatBitsToUint(p);\n    return float(h2(n).x) / float(MAX);\n}\n\nvec2 h2(vec2 p){\n    uvec2 n = floatBitsToUint(p);\n    return vec2(h2(n)) / vec2(MAX);\n}\n\nfloat g(vec2 l, vec2 p){\n    uvec2 n = floatBitsToUint(l);\n    uint i = h2(n).x >> 29;\n    float u = 0.92387953 * (i < 4u ? p.x : p.y);  \n    float v = 0.38268343 * (i < 4u ? p.y : p.x);  \n    return ((i & 1u) == 0u ? u : -u) + ((i & 2u) == 0u? v : -v);\n}\n\nfloat n(vec2 p){\n    vec2 n = floor(p);\n    vec2 f = fract(p);\n    float[4] v;\n    for (int j = 0; j < 2; j ++){\n        for (int i = 0; i < 2; i++){\n            v[i+2*j] = g(n + vec2(i, j), f - vec2(i, j));\n        }\n    }\n    f = f * f * f * (10.0 - 15.0 * f + 6.0 * f * f);\n    return 0.5 * mix(mix(v[0], v[1], f[0]), mix(v[2], v[3], f[0]), f[1]) + 0.5;\n}\n\nfloat wrapmin(vec2 p){\n    return n(p);\n}\n\nfloat warp(vec2 p, float gv){\n    float val = 0.0;\n    for (int i = 0; i < 4; i++){\n        val = wrapmin(p + gv * vec2(cos(2.0 * PI * val), sin(2.0 * PI * val)));\n    }\n    return val;\n}\n\nfloat c(float v){ \n    return ch == ivec2(0, 0) ? 0.5 * sin(4.0 * PI * v + iTime) + 0.5 : v;   \n}\n\nvoid mainImage(out vec4 fc, in vec2 fcCoord){\n    vec2 pos = fcCoord.xy / min(iResolution.x, iResolution.y);\n    pos = 10.0 * pos;\n    fc = vec4(vec3(0.0, mix(c(warp(pos, 1.0)), c(warp(pos, 0.5)), 0.5) * 0.9, 1.0), 1.0);\n}\n","name":"Image","description":"","type":"image"}]}