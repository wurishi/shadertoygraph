{"ver":"0.1","info":{"id":"ls3yzM","date":"1518168674","viewed":443,"name":"true type font to svg to shader","username":"zhufei","description":"the svg file is gen by fontforge .\nthe code is base on https://www.shadertoy.com/view/llySWc\nvery loose version.","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["font","svg","ttf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// the code is based on https://www.shadertoy.com/view/llySWc\n\n/*\n<?xml version=\"1.0\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\" >\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" viewBox=\"-3 -410 1366 2048\">\n  <g transform=\"matrix(1 0 0 -1 0 8)\">\n   <path fill=\"currentColor\"\nd=\"M-3 0 \nl 56.3 146.6\nh 20.9\nl 60.0 -146.6\nh -22.1\nl -17.1 44.4\nh -61.3\nl -16.1 -44.4\nh -20.6\nz\nM 42.0 60.2\nh 49.7\nl -15.3 40.6\nq -7.0 18.5 -10.4 30.4\nq -2.8 -14.1 -7.9 -28.0\nz\n\" />\n  </g>\n\n</svg>\n*/\n\n// you can try this svg in   http://www.runoob.com/try/try.php?filename=trysvg_rect\n// svg is generate by fontforge    http://fontforge.github.io/en-US/\n\n\n#define M(x,y)             x0 = _x = x;   y0 =_y = y;\n#define L(x,y)             d = min(d, line(uv, vec2(_x,_y), vec2(_x+x,_y+y)) ); _x=_x+x,_y=_y+y;\n#define C(x1,y1,x,y) d = min(d, bezier(uv, vec2(_x,_y), vec2(_x + x1,_y+ y1),vec2(_x + x1,  _y+ y1), vec2(_x+ x ,_y + y)) ); _x=x + _x,_y=y + _y; \n#define z                  d = min(d, line(uv, vec2(_x,_y), vec2(x0,y0)) );\n\n\n\nfloat bezier(vec2 uv, vec2 A, vec2 B, vec2 C, vec2 D);\nfloat line(vec2 p, vec2 a, vec2 b);\nfloat contrast = 1.;\n\n\nfloat SVG(vec2 uv) {\n    uv.y  =  .48 - uv.y;\n    uv.x -= .3;\n    \n    uv *= 400.; \n    \n     \n    contrast = .75*iResolution.x/ 400.;\n    float d = 1e38, _x = .0, _y = .0, x0, y0;\n    \n    M(-3.,0. )\n    L(56.30, 146.60)\n    L(20.90, 0.0 )\n    L(60.00, -146.60)\n    L(-22.10, 0.0 )\n        \n    L(-17.10, 44.40 )  \n    L(-61.30, 0.0 )\n    L(-16.10, -44.40 )\n    L(-20.60, 0.0 )\n    z\n    M(42.0, 60.2)\n    L(49.7, 0.)\n    L(-15.3, 40.6)\n        \n    C(-7.0, 18.5, -10.4, 30.4)\n        \n    C( -2.8, -14.1, -7.9, -28.0)\n    z\n        \n    return d;\n}\n\nconst mat4   M = mat4(-1,  3, -3,   1,         // Bspline Matrix\n                       3, -6,  3,   0,\n                      -3,  3,  0,   0,\n                       1,  0,  0,   0);\n/*\n#define T .5\nconst mat4   M = mat4(-T,   2.-T,  T-2.,    T, //  Catmull-Rom Matrix\n                       2.*T, T-3., 3.-2.*T,-T,\n                      -T,      0,   T,      0,\n                       0,      1,   0,      0);\n*/\n\n// Spline Interpolation\nvec2 interpolate(vec2 G1, vec2 G2, vec2 G3, vec2 G4, float t) {\n    vec2 A = G1 * M[0][0] + G2 * M[0][1] + G3 * M[0][2] + G4 * M[0][3];\n    vec2 B = G1 * M[1][0] + G2 * M[1][1] + G3 * M[1][2] + G4 * M[1][3];\n    vec2 C = G1 * M[2][0] + G2 * M[2][1] + G3 * M[2][2] + G4 * M[2][3];\n    vec2 D = G1 * M[3][0] + G2 * M[3][1] + G3 * M[3][2] + G4 * M[3][3];\n\n    return t * (t * (t * A + B) + C) + D;\n}\n\nfloat line(vec2 p, vec2 a, vec2 b) {\n\tvec2 pa = p - a, ba = b - a;\n\tfloat h = clamp(dot(pa, ba) / dot(ba, ba), 0., 1.);\n\tvec2 d = pa - ba * h;\n\treturn dot(d,d); //length(d); // optimization by deferring sqrt\n}\n\n\nfloat bezier( vec2 uv, vec2 A, vec2 B, vec2 C, vec2 D)    \n{\n    float d = 1e5;\n    vec2 p = A;\n    for (float t = 0.; t <= 1.01; t += .025) {\n        vec2 q = interpolate(A, B, C, D, t);\n        d = min(d, line(uv, p, q));\n\t\tp = q;\n\t}\n\n\treturn d;\n}\n\n\nvoid mainImage(out vec4 O, vec2 U) {\n    vec2 R = iResolution.xy;\n    U.y = R.y-U.y; U /= R.x;\n    \n    float d = sqrt(SVG(U)); // SVG(U); // optimization by deferring sqrt here\n    d *= contrast;\n\tO = vec4(d); // *vec4(1,.2,.05,1);\n\tif (fract(iDate.w/2.)>.5) O = clamp(d,0.,1.) + .05*vec4(0,sin(d),0,0);\n}\n\n","name":"Image","description":"","type":"image"}]}