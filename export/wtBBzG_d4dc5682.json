{"ver":"0.1","info":{"id":"wtBBzG","date":"1599200520","viewed":328,"name":"Let it flow","username":"Kali","description":"Overthinking is bad.","likes":19,"published":1,"flags":0,"usePreview":0,"tags":["3d","fractal","volumetric"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define t iTime*.2\nvec3 col;\nmat2 rot(float a) \n{\n\tfloat s=sin(a),c=cos(a);\n    return mat2(c,s,-s,c);\n}\nfloat de(vec3 p)\n{\n    float z=p.z,m=1000.,sc=1.;\n    vec3 ot=vec3(1000);\n    p.xy*=rot(p.z * .05 + t * 3.);\n    p=abs(5.-mod(p,10.));\n\tvec3 cp=p;\n    for (int i=0;i<10;i++) \n    {\n        p.xy=abs(p.xy+.5)-abs(p.xy-.5)-p.xy-1.;\n        p.yz*=rot(t);\n        float s=-2.5/clamp(dot(p,p),.0,1.);\n        p=p*s-1.;\n        sc*=s;\n        ot=min(ot,abs(p.yzz));\n        m=min(m,abs(p.z));\n    }\n    m=exp(-1.*m);\n    col=exp(-2.*ot)+m*.5;\n    col*=fract(-t*3.+m*.3+z*.05)*4.;\n    return (p.x/sc-.5)*.8;\n}\nvec3 march(vec3 from, vec3 dir) \n{\n\tfloat d,td=0.;\n    vec3 p, c=vec3(0), ot=vec3(1000);\n    for (int i=0; i<70; i++) \n    {\n        p=from+dir*td;\n        d=de(p);\n        td+=max(.002, abs(d));\n        if (td>50.) break;\n        c+=col*max(0.,1.-d)*exp(-.05*td); \n    }\n   \treturn pow(c*.02,vec3(1.5));\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv=(fragCoord-iResolution.xy*.5)/iResolution.y;\n \tvec3 dir = normalize(vec3(uv, .7)),from = vec3(cos(t*2.) * 0., 1., t*10.);\n    dir.xz *= rot(smoothstep(-.3,.3,sin(t))*3.);\n\tvec3 c = march(from, dir);\n    fragColor = vec4(c,1.0);\n}","name":"Image","description":"","type":"image"}]}