{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"//yard deer by eiffie\n#define time iTime\n#define size iResolution\n\nfloat mld,dL;\n\n//handy functions from IQ\nfloat hash( vec2 n ){return fract(sin(dot(n*0.123,vec2(78.233,113.16)))*43758.351);}\nfloat noise(in vec2 p){\n\tvec2 c=floor(p),f=fract(p),v=vec2(1.0,0.0);\n\treturn mix(mix(hash(c),hash(c+v),f.x),\n\t\tmix(hash(c+v.yx),hash(c+v.xx),f.x),f.y);\n}\nfloat Tube(vec3 pa, vec3 ba, float r){return length(pa-ba*clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0))-r;}\n\nconst vec3 p1=vec3(-1.0,0.0,0.0),b1=vec3(2.0,0.0,0.0);\nconst vec3 p2=vec3(-1.5,1.0,0.0),b2=vec3(-0.4,0.0,0.0);\nfloat DED(in vec3 z0,float oa){\n\tvec2 c=floor(z0.xz/6.0);\n\tz0.y+=0.5*sin(c.x+2.4*sin(c.y));\n\tz0.xz=mod(z0.xz,6.0)-3.0;\n\tfloat dM=max(3.25-max(abs(z0.x),abs(z0.z)),z0.y-1.25);\n\tfloat a=oa+c.x+c.y*2.3;\n\tz0.xz=cos(a)*z0.xz+sin(a+0.14+oa*0.3)*vec2(z0.z,-z0.x);\n\tvec3 z=z0;\n\tfloat body=Tube(z-p1,b1,0.5);\n\tfloat head=Tube(z-p2,b2,0.375);\n\tfloat neck=Tube(z-p1,p2-p1,0.325);\n\tz.xz=abs(z.xz)-vec2(1.0,0.4);\n\tz.y+=0.75;\n\tfloat leg=Tube(z-vec3(0.0,-0.75,0.0),vec3(0.0,1.25,0.0),0.15);\n\tfloat d=min(body,min(leg,min(head,neck)));\n\tz=mod(z0,0.4)-0.2;\n\tz=abs(z);\n\tfloat d2=min(z.x,min(z.y,z.z));\n\tdL=min(dL,length(vec2(d,max(z.x,max(z.y,z.z)))));\n\tbody=length(vec2(d,d2));\n\tz=z0-p2;z.y-=1.3;\n\td=length(vec2(length(z.zy)-1.0,z.x));\n\tz.y-=1.0;\n\td=min(d,length(vec2(length(z.zy)-2.0,z.x)));\n\td=max(d,z0.y-1.75);\n\treturn min(0.9*min(body,d),dM);\n}\nfloat DE(in vec3 p){\n\tdL=100.0;\n\t//return DED(p);\n\treturn min(DED(p,0.0),DED(p+vec3(3.0,0.0,2.0),1.0));\n}\nfloat rndStart(vec2 co){return 0.8+0.2*fract(sin(dot(co,vec2(123.42,117.853)))*412.453);}\n\nmat3 lookat(vec3 fw,vec3 up){\n\tfw=normalize(fw);vec3 rt=normalize(cross(fw,up));return mat3(rt,cross(rt,fw),fw);\n}\n\nfloat fo(float t){return exp(-t*0.02);}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\tfloat zoom=2.0,px=2.0/(size.y*zoom);//find the pixel size\n\tfloat tim=time;\n\t\n\t//position camera\n\tvec3 ro=vec3(15.0+2.25*tim,5.0+sin(0.5*tim),3.0*tim);\n\tvec3 rd=normalize(vec3((2.0*fragCoord.xy-size.xy)/size.y,zoom));\n\trd=lookat(vec3(sin(tim*0.7)*0.4+sin(tim*0.3)*0.6,-0.4+0.3*sin(tim*0.2),1.0),vec3(0.0,1.0,0.0))*rd;\n\n\t//march\n\t\n\tfloat tG=-(1.5+ro.y)/rd.y;//approx ground\n\tvec2 g=ro.xz+rd.xz*tG;\n\tfloat n=noise(g-vec2(5.0*tim*step(0.0,rd.y)))*0.1;\n\tg=g/6.0-vec2(0.5);\n\tfloat yp=sin(g.x+2.4*sin(g.y));\n\ttG+=yp*0.75;\n\tfloat t=(2.0-ro.y)/rd.y,d,dm=100.0,tm=0.0;\n\tt+=DE(ro+rd*t)*rndStart(fragCoord.xy);\n\tvec3 lc=vec3(1.0);\n\tmld=100.0;\n\tfloat MIN_DIST=px*0.1;\n\tfor(int i=0;i<64;i++){\n\t\td=DE(ro+rd*t);\n\t\tdL+=t*t*0.00002;\n\t\tif(dL<mld){\n\t\t\tvec2 p=ro.xz+rd.xz*t;\n\t\t\tmld=dL;\n\t\t\tfloat lh=0.2*sin(7.0*(p.x+sin(p.y)));\n\t\t\tlc=vec3(0.8+lh,0.8,0.8-lh);\n\t\t}\n\t\tif(d<dm){tm=t;dm=d;}//and save the max occluder\n\t\tt+=max(d,MIN_DIST);\n\t\tif(t>tG)break;\n\t}\n\n\t//color the ground \n\tvec3 col=vec3(clamp((0.25-0.125*yp-0.75*rd.y+n)*fo(abs(tG)),0.0,1.0));\n\tif(rd.y<0.0){\n\t\tcol.rb+=vec2(-0.01,0.01)*(yp+n*10.0);\n\t\tn=noise(g*1000.0);\n\t\tif(fract(n+rd.x+rd.z+rd.y+yp)>0.99)col+=vec3(exp(-abs(tG*0.18)));\n\t}else{col*=8.0*pow(rd.y,1.5);}\n\t\n\t//add in the deer\n\tif(dm<px*tm)col=mix(vec3(0.0,0.2,0.0)*fo(tm),col,clamp(dm/(px*tm),0.0,1.0));\n\n\t//add the lights\n\tcol+=2.0*lc*exp(-mld*15.0);\n\tfragColor=vec4(col,1.0);\n} ","name":"Image","description":"","type":"image"},{"outputs":[],"inputs":[],"code":"//the far too many days of christmas\n#define bps 3.5\n\n// note number to frequency  from https://www.shadertoy.com/view/ldfSW2\nfloat ntof(float n){return 440.0 * pow(2.0, (n - 69.0) / 12.0);}\nfloat saw(float t){return fract(t+0.5)-0.5;}\nfloat rand(float t){return fract(sin(t*341.545234)*1531.2341);}\n\nvec2 mainSound( in int samp,float time)\n{\n float b0=floor(time*bps);\n if(b0>21.0)b0=16.0+mod(b0-16.0,6.0);\n int b=int(b0);\n float t=fract(time*bps),p=0.0,f=0.0,n=0.0,tf=t;\n if(b>31 && b<55)b-=32;\n if(b<3)n=43.0;\n else if((b>3 && b<7) || b==9)n=48.0;\n else if(b==8)n=47.0;\n else if(b==10 || b==13 || b==18 || b==21)n=50.0;\n else if(b==11 || b==14 || b==19)n=52.0;\n else if(b==12 || b==20)n=53.0;\n else if(b==16 || (b==17 && rand(floor(time*bps))>0.25))n=55.0;\n if(n>0.5)f=ntof(n);\n t=time*f;\n float a=saw(t)+saw(t*1.5)*0.5;\n return vec2(0.8*(a*rand(time)))*exp(-time*0.05)*exp(-tf);\n}\n","name":"Sound","description":"","type":"sound"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":true,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XlXGRr","date":"1417622576","viewed":282,"name":"Yard Deer","username":"eiffie","description":"I am determined to outdo my neighbors.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["xmas"],"hasliked":0,"parentid":"","parentname":""}}