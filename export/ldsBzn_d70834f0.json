{"ver":"0.1","info":{"id":"ldsBzn","date":"1494678204","viewed":121,"name":"fire2d","username":"lovelyH","description":"my attempt to make realistic fire.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["2d","fire"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/// rand\nfloat rand(vec2 n) { \n\treturn fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\t/// UV\n\tvec2 uv= 2.0 * fragCoord / iResolution.xy - vec2(1.0,1.0);\n\tuv.x *= iResolution.x / iResolution.y;\n\n\t/// zoom\n\tuv *= 1.2;\n\n\t/// result\n\tfloat r= 0.0;\n\n\t/// repat whole process few times\n\tconst float iterationsNum= 16.0;\n\tfor(float b=0.0;b<iterationsNum;b++){\n\t\tconst float w=8.0;\n\t\tfor( float a=-w;a<=w;a++){\n\t\t\tconst float div= 1.0 / 64.0;\n\t\t\tfloat x= floor( uv.x/div )*div + div/2.0 + a*div;\n\n\t\t\tfloat y= mod( iTime+2.0*rand(vec2(x,0.1+b/iterationsNum)), 2.0 );\n\n\t\t\t/// radius of ball\n\t\t\tfloat rad= div*(w+0.5) * clamp( 0.5*y+1.0, 0.1, 1.0 );\n\n\t\t\t/// ball shape\n\t\t\tif( length(uv-vec2(x,(0.3+0.7*rand(vec2(x,-0.1)))*y-1.0)) < rad ){\n\t\t\t\t/// dark at bottom and top\n\t\t\t\tr += clamp( 1.0-abs(y-1.0), 0.0, 1.0 );\n\t\t\t}\n\t\t}\n\t}\n\n\t/// get rid of artifacts, look much better than clamp\n\tr= 1.0 - 1.0 / (1.0 + 4.0*r/iterationsNum );\n\n\t/// return\n\tr *= 3.0;\n\tfragColor = vec4(\n\t\tclamp(r,0.0,1.0),\n\t\tclamp(r-1.0,0.0,1.0),\n\t\tclamp(r-2.0,0.0,1.0),\n\t\t1.0);\n}\n\n","name":"Image","description":"","type":"image"}]}