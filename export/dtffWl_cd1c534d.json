{"ver":"0.1","info":{"id":"dtffWl","date":"1693728527","viewed":59,"name":"Filter -- Notch","username":"Nieb","description":"Notch Filter.\n","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["filter"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\n#define INPUT_MOUSE 1\n\n#define FILTER_WRAP 1\n\n\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\nconst float Domain = 360.0;\n\nfloat Dlt =  -0.5;  //  \"Delta\"\nfloat Pos = 270.0;  //  \"Position\"\nfloat Rds = 120.0;  //  \"Radius\"\nfloat Fal =   6.0;  //  \"Falloff\"\n\n\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\n//  https://www.desmos.com/calculator/ii5rtydljm\nfloat Filter(float x, float Dlt, float Pos, float Rds, float Fal) {\n    float y;\n\n    y = abs(x - Pos) / Rds;\n\n#if FILTER_WRAP\n    float m1 = Domain/Rds;\n    float m2 = m1 * 0.5;\n    y = mod(y+m2, m1) - m2;\n    y = abs(y);\n#endif\n\n    y = pow(y, Fal);\n\n    y = 1.0 + Dlt*pow(Rds, -y);\n\n    return y;\n}\n\n\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 ScreenUV = fragCoord.xy/iResolution.xy;\n\n#if INPUT_MOUSE\n    if (iMouse.x > 0.5) {\n        Pos = iMouse.x/iResolution.x * Domain;\n        Dlt = iMouse.y/iResolution.y - 1.0;\n    }\n#endif\n\n    float Test = Filter(ScreenUV.x*Domain, Dlt, Pos, Rds, Fal);\n    Test = Plot(Test, 1.5, ScreenUV.y);\n\n    fragColor = vec4(vec3(Test),1.0);\n  //fragColor = DebugFloat(Test);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\nvec4 DebugFloat(float x) {\n    if      (x <  -1.0) { return vec4(     0.0, 0.0, fract(abs(x)), 1.0); } // Blu  -Clipping\n    else if (x <   0.0) { return vec4(  abs(x), 0.0,       abs(x) , 1.0); } // Vlt  -\n    else if (x <=  1.0) { return vec4(      x ,  x ,           0.0, 1.0); } // Ylw  +\n    else                { return vec4(fract(x), 0.0,           0.0, 1.0); } // Red  +Clipping\n}\n\n\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\nfloat Plot(float fX, float LineThickness, float PlotPosY) {\n    float Plot;\n    Plot = PlotPosY - fX;\n\n#if 1\n    Plot = abs(Plot) / fwidth(Plot);\n    Plot = smoothstep(LineThickness, max( 0.0, LineThickness-1.5 ), Plot);\n#else\n    Plot = abs(Plot) / fwidth(Plot) * 0.01;\n#endif\n\n    return Plot;\n}\n\n","name":"Common","description":"","type":"common"}]}