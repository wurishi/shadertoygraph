{"ver":"0.1","info":{"id":"cstBRl","date":"1697534694","viewed":67,"name":"Simple Grid Selector","username":"snolot","description":"Try to understand how to do a simple grid selector using mouse click for personal project\n\nClick on cell to expand.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["grid","cell","id"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec2 gridSize = vec2(5.,4.);//grid size (columns, rows)\n\nfloat EncID(vec2 s, vec2 h, vec2 sz) // encode id from coord // s:screenSize / h:pixelCoord / sz=gridSize\n{\n    float cx = floor(h.x/(s.x/sz.x));\n    float cy = floor(h.y/(s.y/sz.y));\n    return cy*sz.x+cx;\n}\n\nvec2 DecID(float id, vec2 sz) // decode id to coord // id:cellId / sz=gridSize\n{\n    float cx = mod(float(id), sz.x);\n    float cy = (float(id)-cx)/sz.x;\n    return vec2(cx,cy);\n}\n\nvec3 getcell(vec2 s, vec2 h, vec2 sz) // return id / uv\n{\n    float cx = floor(h.x/(s.x/sz.x));\n    float cy = floor(h.y/(s.y/sz.y));\n    \n    float id = cy*sz.x+cx;\n    \n    vec2 size = s/sz;\n    float ratio = size.x/size.y;\n    vec2 uv = (2.*(h)-size)/size.y - vec2(cx*ratio,cy)*2.;\n    uv*=1.5;\n    \n    return vec3(id, uv);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    vec2 s = iResolution.xy;\n    vec2 g = fragCoord.xy;\n    \n    vec2 p = (2.*g-s)/s.y;\n    p = mod(p, gridSize.x) - gridSize.x /2.;\n    \n    vec2 m = iMouse.xy;\n    vec3 cell = getcell(s,g,gridSize);\n    \n    if(iMouse.z>0.) {\n        cell.x = EncID(s,m,gridSize);\n        cell.yz = g;\n    }\n\n    vec3 col = vec3(0.);\n\n    col  = 0.5 + 0.5*cos( 2.0*cell.x + vec3(0.0,1.0,2.0) );\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}