{"ver":"0.1","info":{"id":"lt3BWX","date":"1541275579","viewed":357,"name":"Water fall","username":"guil","description":"Experimenting with water simulation.\nbased on https://www.shadertoy.com/view/MttfDj","likes":20,"published":1,"flags":32,"usePreview":0,"tags":["water","fluid"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 R;\nvec4 T ( vec2 U ) {return texture(iChannel0,U/R);}\nvoid mainImage( out vec4 C, in vec2 U )\n{   R = iResolution.xy;\n    float k = min(T(U).w, 0.4);\n    C = 0.5+0.5*sin(k*vec4(8,12,16,1));\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define k 4.\n#define l 3.\n#define v .05\n#define g 2.5\n#define t iTime\nvec2 R;\nvec4 T ( vec2 U ) {return texture(iChannel0,U/R);}\nvoid mainImage( out vec4 Q, in vec2 U )\n{   R = iResolution.xy;\n \tvec4 a = T(U+vec2(1,0)),b = T(U+vec2(0,1)),c = T(U+vec2(-1,0)),d = T(U+vec2(0,-1));\n    vec2 vu = T(U-v*T(U).xy).xy;\n    Q = T(U-v*vu);\n \tfloat f = (0.1+1.*Q.w);\n    vec2 gp = vec2(a.z-c.z,b.z-d.z);//pressure gradient\n    vec2 gw = vec2(a.w-c.w,b.w-d.w);//density gradient\n    float p = 0.25*(a.z+b.z+c.z+d.z);\n    float div = (c.x-a.x+d.y-b.y);//divergence\n    Q.xyz = vec3(Q.x+f*k*gp.x-l*gw.x,Q.y+f*k*gp.y-l*gw.y-f*g*Q.w,p - 0.02*div)*.998;\n    Q.z= max(Q.z,-20.);\n    if (iFrame < 1) Q = vec4(0);\n    if (U.x < 1.||U.y < 1.||R.x-U.x < -1.||R.y-U.y < 1.) Q.xy *= 0.;\n    if (U.x < 0.2*R.x&&U.y < 0.25*R.y) Q.xy *= 0.;\n \tif (length(U-vec2(0,0.5*R.y)) < 8.) {Q.xy= Q.xy*.5+.5*vec2(1.+0.4*sin(1.5*t),0); Q.w = 1.+0.2*sin(1.2*t);};\n}","name":"Buffer A","description":"","type":"buffer"}]}