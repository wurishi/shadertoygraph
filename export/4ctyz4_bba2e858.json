{"ver":"0.1","info":{"id":"4ctyz4","date":"1730321443","viewed":145,"name":"tetrahedron subdivision 2","username":"FabriceNeyret2","description":"we often have wrong extrapolated intuitions when going from 2D to 3D:\ntetrahedron = 4 tetrahedron + octohedron  ( rather than only tets/simplex, as in 2D and 1D ).\n( simpler variant of https://shadertoy.com/view/XX2fD3 )","likes":12,"published":3,"flags":0,"usePreview":0,"tags":["short"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// simpler variant of https://shadertoy.com/view/XX2fD3\n\n\n#define rot(a)    mat2(cos(a+vec4(0,33,11,0)))                                       // rotation\n#define T(q)      max( max(-q.x+q.y, q.x-q.y)+q.z, max(q.x+q.y, -q.x-q.y)-q.z )/1.73 // iq tet in cube\n#define T3(q,d) ( min( min( T((q+d))          , T((q+vec3(d,0,0))) ),                /* 4 sub-tets */ \\\n                        min(T((q+vec3(0,d,0))), T((q+vec3(0,0,d))) )                                  \\\n                   ) -.5 )\n\nvoid mainImage( out vec4 O, vec2 u ) {\n\n    vec3 R = iResolution,\n         P = 9./R, q, a,                                            // P: camera pos, then sample along ray\n         D = normalize(vec3( u , -R.y ) - .5*R ),                   // D: ray direction\n         M = iMouse.z > 0. ? iMouse.xyz/R -.5 :                     // comment for no mouse cam\n                 vec3( .15,.07,0) * cos(.3*iTime + vec3(0,11,0));          \n    float t = 1., d= cos(3.*iTime) - 2.73;                          // offset >= 1.73\n    \n    for ( O=vec4(1); O.x > 0. && t > .01; O-=.005 )                 // --- march scene\n        q = P, \n        q.yz *= rot(-6.*M.y),                                       // rotations\n        q.xz *= rot(-6.*M.x-1.57),\n        a = abs(q), t = max( a.x, max(a.y,a.z) ) -2.,\n        t = min( T3(q-.5*d,d),                                      // 4 sub-tets\n                 max( T((q)) -.97, -T3(q+.87,-1.73) ) ),            // residual main tet minus 4 sub-tets\n     // t = min(t, length(a)-1.5),                                  // centered sphere, for test\n        P += .5*t*D;                                                // step along the ray\n    \n    O *= O*O;                                                       // color scheme\n // u = abs(u-.5-R.xy/2.); if (u.x*u.y==0.) O.r++;                  // red cross, for tests\n}\n","name":"Image","description":"","type":"image"}]}