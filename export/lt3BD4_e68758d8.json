{"ver":"0.1","info":{"id":"lt3BD4","date":"1539618430","viewed":212,"name":"Midterm Shader","username":"cjramsden","description":"Moving 'eclipse' over a yellow sun","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["shader","midterm"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Moon Variables\nvec2 moonPos = vec2(0.45,0.5);\nfloat moonRadius = 0.35;\nconst float ECLIPSE_FREQ = 0.3;\nconst float ECLIPSE_MAGN = 0.4;\n\n// Sun Variables\nvec2 sunPos = vec2(0.35,0.5);\nfloat sunRadius = 0.3;\n\n// All Other Variables\nconst float SMOOTH_BY = 0.01;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n// Normalized pixel coordinates (from 0 to 1)\nvec2 uv = fragCoord/iResolution.xy;\n// x-focused aspect ratio\nfloat aspectRatio = iResolution.x/iResolution.y;\n// Correcting UV, circle positions by the Aspect Ratio\nuv.x *= aspectRatio;\nsunPos.x *= aspectRatio;\nmoonPos.x *= aspectRatio;\n// Creates a 'horizon' effect for the background\nvec3 horizon = vec3(1.0,uv.y,0.0);\n\n// Layer Setup\nvec4 BGLayer = vec4(horizon,1.0);\nvec4 LayerOne = vec4(0.0,0.0,0.0,0.0);\nvec4 LayerTwo = vec4(0.0,0.0,0.0,0.0);\n\n// Makes the moon / eclipse animate\nmoonPos.x += sin(iTime*ECLIPSE_FREQ)*ECLIPSE_MAGN;\n// Creates the sun and moon circles\nfloat sun = smoothstep(sunRadius, sunRadius+SMOOTH_BY,distance(sunPos,uv));\nfloat moon = smoothstep(moonRadius, moonRadius+SMOOTH_BY, distance(moonPos,uv)); \n    \n// Draws Layer One (The Sun) and Layer Two (The Eclipse / Moon)\nLayerOne = vec4(1.0,0.9,0.2, moon);\nLayerTwo = vec4(horizon,sun);\n\n// Overlays the Sun over the Background\nvec4 outColor = mix(BGLayer,LayerOne,LayerOne.a);\n// Overlays the Eclipse over the Sun\noutColor = mix(outColor, LayerTwo, LayerTwo.a);\n\n// Output to screen\nfragColor = outColor;\n}","name":"Image","description":"","type":"image"}]}