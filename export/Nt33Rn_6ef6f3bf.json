{"ver":"0.1","info":{"id":"Nt33Rn","date":"1635566796","viewed":83,"name":"Toxijuice_Blobs","username":"Toxijuice","description":"I initially was trying to make a lava lamp, but stopped at the blobs.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["blobs","lavalamp"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define ss smoothstep\n#define saturate(x) clamp(x, 0.0, 1.0)\nconst float BUBBLE_AMOUNT = 30.0;\nconst float BUBBLE_SIZE_MULT = 0.9;\nconst float BUBBLE_SIZE_ADD = 0.3;\nconst vec2 BUBBLE_OFFS_MULT = vec2(0.35, 0.2);\n\n\n//From https://stackoverflow.com/a/17897228\nvec3 hsv2rgb(vec3 c){\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\n//From https://stackoverflow.com/a/17897228\nvec3 rgb2hsv(vec3 c){\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\n// From Martijn Steinrucken\n// https://www.youtube.com/channel/UCcAlTqd9zID6aNX3TzwxJXg\n// https://www.shadertoy.com/user/BigWIngs\nfloat N21(vec2 p) {\n    p = fract(p*vec2(123.3,234.3));\n    p += dot(p, p+23.2);\n    return fract(p.x*p.y);\n}\n\nvec2 N22(vec2 p){\n    return vec2(N21(p), N21(vec2(fract(p.x*p.y*2.0), dot(p, p+723.27531))));\n}\n\nfloat spot(vec2 uv, vec2 pos, float size){\n    uv = (uv - 0.5) * 2.0;\n    return ss(1.0-saturate(length(uv * size - pos)), 0.0, 0.5);\n}\n\nfloat bubble(vec2 uv, float seed, float size){\n    vec2  sd = vec2(seed, seed);\n    vec2  ps = N22(sd)*size;\n    vec2  tm = N22(ps);\n    tm *= BUBBLE_OFFS_MULT;\n    tm = vec2(sin(iTime * (tm.x + 0.05)) * BUBBLE_OFFS_MULT.x, sin(iTime * (tm.y + 0.05)));\n    float sz = N21(ps + sd) * BUBBLE_SIZE_MULT + BUBBLE_SIZE_ADD;\n    sz *= size;\n    return spot(uv, ps + tm, sz);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    vec2 uv = (fragCoord-0.5*iResolution.xy)/iResolution.y;\n    vec2 buv = fragCoord/iResolution.y;\n    buv.y *= 0.5;\n    buv.x *= 0.5;\n    buv += vec2(0.5, 0.25);\n    \n    float bub = 0.0;\n    \n    for(float i = 0.0; i < BUBBLE_AMOUNT; i += 1.0){\n        bub += bubble(buv, i * 2.0 + 1.0, 15.0);\n    }\n    \n     for(float i = 0.0; i < BUBBLE_AMOUNT; i += 1.0){\n        bub += bubble(buv, i * 22.0 + 5.0, 7.0);\n    }\n    \n    bub /= BUBBLE_AMOUNT * 2.0;\n    \n    float bubShade = ss(bub, 0.0, 0.0015);\n    bubShade *= bubShade * bubShade;\n    bub = ss(bubShade, 0.0, 0.1);\n    \n    \n    vec3 c1 = vec3(1.0, 0.0, 0.0);\n    vec3 c2 = vec3(0.5, 0.0, 0.1);\n    vec3 col = mix(c2, c1, bubShade) * bub;\n    col = mix(c2*0.5, col, col.r);\n    \n    vec3 hsv = rgb2hsv(col);\n    hsv.x += (iTime + uv.x * 16.0) * 0.01;\n    col = hsv2rgb(hsv);\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}