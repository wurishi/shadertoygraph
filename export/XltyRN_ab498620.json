{"ver":"0.1","info":{"id":"XltyRN","date":"1531822630","viewed":80,"name":"movingGauss","username":"MillhausVKodi","description":"continious gauss line","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["continiousgaussline"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define M_PI 3.1415926535897932384626433832795\n\n\nfloat sgn(float x)\n{\n\tif(x>0.0)\n        return 1.0;\n    if(x<0.0)\n        return -1.0;\n    return 0.0;\n}\n\nfloat erf(float x)\n{\n    return 2.0/sqrt(M_PI)*sgn(x)*sqrt(1.0 - exp(-pow(x,2.0)))*(sqrt(M_PI)/2.0 + 31.0/200.0*exp(-pow(x,2.0))-341.0/8000.0*exp(-2.0*pow(x,2.0)));\n}\n\n//http://www.wolframalpha.com/input/?i=integrate+e%5E(-0.5*(h%5E2%2Bx%5E2))%2F(sigma+*+2.506628274631000502415765284811)+dx+from+x%3D0+to+l%2F2\nfloat integral2DGauss(float h, float l)\n{\n     float sigma = 2.0;\n    return 0.5*exp(-0.5*h*h)*erf(0.353553*l)/sigma;\n}\n\nfloat movingCircle(vec2 position, vec2 widthlength) {\n    // Intersection between circle and line.\n    float delta = pow(widthlength.x, 2.0) - pow(position.y, 2.0);\n    if (delta <= 0.0) {\n        // Less than two intersections.\n        return 0.0;\n    }\n    delta = sqrt(delta);\n\n    float x1 = position.x + delta;\n    float x2 = position.x - delta;\n    if (x1 < 0.0) {\n        x1 = 0.0;\n    } else if (x1 > widthlength.y) {\n        x1 = widthlength.y;\n    }\n    if (x2 < 0.0) {\n        x2 = 0.0;\n    } else if (x2 > widthlength.y) {\n        x2 = widthlength.y;\n    }\n\n    return integral2DGauss(position.y , abs(x1 - x2))/integral2DGauss(position.y , 2.0*widthlength.x);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 d = fragCoord/iResolution.xy-vec2(0.0,0.5);\n\n    // Time varying pixel color\n    float sigma = 2.0;\n    float g =0.5*exp(-0.5*d.y*d.y)*erf(0.707107*d.x)/sigma;\n\n    // Output to screen\n    fragColor = vec4(movingCircle(d,vec2(0.5,0.8))*2.0,0.0,1.0,1.0);\n}","name":"Image","description":"","type":"image"}]}