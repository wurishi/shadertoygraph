{"ver":"0.1","info":{"id":"Mfd3zS","date":"1712110380","viewed":103,"name":"Silly Tree","username":"gee8sh","description":"Fractalish tree. I was just toying with an idea that I soon abandoned. I thought I'd publish this shader anyway.","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["fractals","trees"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.1415926535897932384626433832795;\nconst uint depth = 32u; \nconst float scale = sqrt(0.5);\nconst float inverseScale = 1.0 / scale;\n\nmat2 right;\nmat2 left;\n\nfloat base(vec2 p) {\n    vec2 xy = vec2(p.x * (1.0 + p.y), p.y);\n    vec2 xxyy = xy * xy * vec2(256.0, 4.0);\n    return exp(1.0 - xxyy.x - xxyy.y);\n}\n\nfloat tree(vec2 p) {\n    vec2 xy = p;\n    float result = 0.0;\n    for (uint i = 0u; i < depth; i++) {\n        result += base(xy);\n        xy -= vec2(0.0, 0.5);\n        float rightWeight = dot(xy, left[1]); \n        float leftWeight  = dot(xy, right[1]);\n        mat2 m = rightWeight > leftWeight ? right : left;\n        xy = inverseScale * m * xy - vec2(0.0, 0.5);\n    }\n    return result;\n}\n\nfloat scene(vec2 p) {\n    return tree(p + vec2(0.0, 0.5)) + exp(-15.0 - 16.0 * p.y);\n}\n\nvec4 colorAt(vec2 xy) {\n    return scene(2.0 * xy + vec2(0.0, 0.5)) > 1.0 ? vec4(0.4, 0.7, 1.0, 1.0) : vec4(0.0);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float relativeAngle = 0.5 * sin(0.25 * PI * iTime);\n    float angle = (0.5 - relativeAngle) * PI;\n    float s = sin(angle);\n    float c = cos(angle);\n    right = mat2(\n         s,  c,\n        -c,  s\n    );\n    left = mat2(\n         s, -c,\n         c,  s\n    );\n\n    float halfPixel = 1.0 / min(iResolution.x, iResolution.y);\n    vec2 xy = (2.0 * fragCoord - iResolution.xy) * halfPixel;\n    fragColor = 0.25 * (\n        colorAt(xy) +\n        colorAt(xy + vec2(halfPixel, 0.0)) +\n        colorAt(xy + vec2(0.0, halfPixel)) +\n        colorAt(xy + vec2(halfPixel))\n    );\n}","name":"Image","description":"","type":"image"}]}