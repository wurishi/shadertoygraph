{"ver":"0.1","info":{"id":"MlKGDh","date":"1474493152","viewed":180,"name":"EM Spectrum","username":"deadmanswitch","description":"EM spectrum","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["spectrum","em"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat safeSquare(in float num) {\n    return num*num;\n}\n\n// wavelength in nanometer\nvec3 wave2XYZ(in float wavelength) {\n    \n    // approx:\n    // http://fooplot.com/#W3sidHlwZSI6MCwiZXEiOiIoMTc1KmV4cCgtKCh4LTQ1MCkvNDApXjIpKSIsImNvbG9yIjoiIzAwMUVGRiJ9LHsidHlwZSI6MCwiZXEiOiIoMzUqZXhwKC0oKHgtNDUwKS80MCleMikpKygxMDYqZXhwKC0oKHgtNjAwKS80MCleMikpIiwiY29sb3IiOiIjRkYwMDAwIn0seyJ0eXBlIjowLCJlcSI6IigxMDAqZXhwKC0oKHgtNTUwKS82MCleMikpIiwiY29sb3IiOiIjMDBGRjFFIn0seyJ0eXBlIjoxMDAwLCJ3aW5kb3ciOlsiMjQ2Ljg4ODM1MTg2ODc3MjAyIiwiODI0LjIwNDMyNDY3Mzg1MjQiLCItMTIzLjUxOTQ1NDUyMTg3NTA4IiwiMjMxLjc1MTkxMzM1ODE3NDQiXX1d\n    \n    vec3 xyz = vec3(\n        \n    \t0.35 * exp( -safeSquare( (wavelength-450.0)/40.0 )) + 1.06 * exp( -safeSquare( (wavelength-600.0)/50.0 ) ),\n        \n        1.00 * exp( -safeSquare( (wavelength-550.0)/60.0 )),\n       \n        1.75 * exp( -safeSquare( (wavelength-450.0)/40.0 ))\n        \n    );\n    \n    // multiply by 1/(X + Y + Z);\n    //return xyz / dot( xyz, vec3(1.0) );\n    return xyz;\n    \n}\n\nvec3 XYZ2RGB(in vec3 xyz) {\n    \n    // D50\n    return xyz*mat3(\n         1.7552599, -0.4836786, -0.2530000,\n        -0.5441336,  1.5068789,  0.0215528,\n         0.0063467, -0.0175761,  1.2256959\n    );\n    \n}\n\nvec3 wave2sRGB(in float wavelength) {\n    return sqrt(XYZ2RGB(wave2XYZ(wavelength)));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat scale = fragCoord.x / iResolution.x;\n    float wavelength = scale*300.0 + 400.0; // from 400 to 700 nm\n    \n\tfragColor = vec4(wave2sRGB(wavelength), 1.0);\n}","name":"Image","description":"","type":"image"}]}