{"ver":"0.1","info":{"id":"4clyz7","date":"1720957451","viewed":30,"name":"Magic gate","username":"ODtian","description":"null","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["noise","fbm","wrap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3Rr","filepath":"/media/a/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","previewfilepath":"/media/ap/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// FabriceNeyret2\n#define MOD 4  // type of Perlin noise\n#define rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define hash31(p) fract(sin(dot(p,vec3(127.1,311.7, 74.7)))*43758.5453123)\n\n\nfloat noise3(vec3 p) {\n    vec3 i = floor(p);\n    vec3 f = fract(p);\n    f = f * f * (3. - 2. * f); // smoothstep\n\n    float v = mix(mix(mix(hash31(i + vec3(0, 0, 0)), hash31(i + vec3(1, 0, 0)), f.x), mix(hash31(i + vec3(0, 1, 0)), hash31(i + vec3(1, 1, 0)), f.x), f.y), mix(mix(hash31(i + vec3(0, 0, 1)), hash31(i + vec3(1, 0, 1)), f.x), mix(hash31(i + vec3(0, 1, 1)), hash31(i + vec3(1, 1, 1)), f.x), f.y), f.z);\n    return MOD == 0 ? v : MOD == 1 ? 2. * v - 1. : MOD == 2 ? abs(2. * v - 1.) : 1. - abs(2. * v - 1.);\n}\n\nfloat fbm3(vec3 p) {\n    float v = 0., a = .5;\n    mat2 R = rot(.37);\n\n    for (int i = 0; i < 2; i++, p *= 2., a /= 2.) p.xy *= R, p.yz *= R, v += a * noise3(p);\n\n    return v;\n}\n\nfloat sdCircle(vec2 p, float r) {\n    return length(p) - r;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord / iResolution.xy;\n    float asp = iResolution.x / iResolution.y;\n    vec2 pos = uv - 0.5;\n    pos.y /= asp;\n    \n    vec4 m = iMouse / iResolution.x;\n    m.y -= 0.25;\n    m.x -= 0.5;\n\n    float a = fbm3(vec3(10.0 * pos, iTime));\n    float b = fbm3(vec3(10.0 * pos + 100.0, iTime));\n    float c = fbm3(vec3(10.0 * pos + 10.0, iTime));\n    float d = fbm3(vec3(a, a + b, b + c));\n\n    vec2 new_pos = vec2(fbm3(vec3(a + b, b + c, c + d)), fbm3(vec3(a + d, a + c, d + b))) - 0.7;\n    \n    fragColor.rgb = mix(mix(texture(iChannel1, uv), vec4(0.4, 0.4, 0.8, 1.0), 0.7) * (1.0 - smoothstep(-0.1, 0.3, sdCircle(pos - new_pos -m.xy, 0.03 * sin(iTime) + 0.2))), texture(iChannel0, uv), smoothstep(-0.1, 0.3, sdCircle(pos - new_pos -m.xy, 0.03 * sin(iTime) + 0.2))).rgb;\n\n}","name":"Image","description":"","type":"image"}]}