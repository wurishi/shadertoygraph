{"ver":"0.1","info":{"id":"Mc3czs","date":"1731019465","viewed":92,"name":"Dynamic Cubemap Resolution 2","username":"vladdoc","description":"Dynamic cubemap resolution now with actual cubemap","likes":1,"published":3,"flags":0,"usePreview":0,"tags":["camera","cubemap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGzn","filepath":"/media/a/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","previewfilepath":"/media/ap/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","type":"cubemap","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Fork of \"Dynamic Cubemap Resulution\" by vladdoc. https://shadertoy.com/view/lf3yzs\n// 2024-11-07 22:41:00\n\nfloat fprecision(float x, float samples)\n{\n    return round(x * samples) / samples;\n}\n\nvec3 fprecision(vec3 v, float samples)\n{\n    return vec3(\n        fprecision(v.x, samples),\n        fprecision(v.y, samples),\n        fprecision(v.z, samples)\n    );\n}\n\nvec2 Rotate2D(in vec2 uv, in float angle) \n{ \n    float sin = sin(angle);\n    float cos = cos(angle);\n    \n    return uv * mat2(\n        +cos, +sin,\n        -sin, +cos\n    );\n}\n\n#define PI 3.1415926535897932384626433832795\n#define PI_DIV_2 (PI * 0.5)\n\nvec3 GetDir(in vec2 uv, in vec2 mouse)\n{\n    vec3 rd = vec3(uv, 1.);\n    \n    rd.yz = Rotate2D(rd.yz, PI_DIV_2 * mouse.y);\n    rd.xz = Rotate2D(rd.xz, PI * mouse.x);\n    \n    return normalize(rd);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec2 uvClip = (fragCoord.xy - iResolution.xy * .5) / iResolution.y;\n    vec2 mouse = (iMouse.xy / iResolution.xy) * 2.0 - 1.0; // <-1.0,1.0>    \n    vec3 rd = GetDir(uvClip, mouse);\n\n    float cubemapRes = abs(cos(iTime / 8.0)) * 256.0;\n\n    vec3 dir = normalize(fprecision(rd, cubemapRes));\n    fragColor = texture(iChannel0, dir);\n}","name":"Image","description":"","type":"image"}]}