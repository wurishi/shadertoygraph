{"ver":"0.1","info":{"id":"ssy3Dy","date":"1632107780","viewed":147,"name":"draw smooth line","username":"shiyuugo","description":"reference:\nhttps://www.shadertoy.com/view/wsyfRD","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["mouse","line"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 col = texture(iChannel0, fragCoord.xy/iResolution.xy).rgb;\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    \n    if(iFrame<1){\n        fragColor = vec4(0,0,0,1.0);\n        return;\n    }\n    \n    if(fragCoord.x < 0.9 && fragCoord.y < 0.9){\n        fragColor = vec4(iMouse.xy, 0.,1.);\n        return;\n    }\n    \n    vec4 col = texture(iChannel0, uv);\n    \n    vec2 currMouse = iMouse.xy;\n    vec2 prevMouse = iMouse.w>0.0 ? iMouse.xy : texture(iChannel0,vec2(0)).xy;\n    float lineL = length(currMouse-prevMouse);\n    float lineW = 10.;\n    \n    if(iMouse.z>0.){\n        for(float d = 0.; d < lineL ; d++ ){\n            float press = 1.0;\n            //press = mix(0.5,1.0, 1.-sin(d/lineL*3.14));\n            //press = mix(1.0-fract(lineL/100.),1.0, 1.-sin(d/lineL*3.14));\n            \n            col +=  smoothstep(lineW * press, 0., length( mix( prevMouse,currMouse,  d/lineL ) - fragCoord ) ); \n           // col +=  smoothstep(1., 0., length( mix( prevMouse,currMouse,  d/lineL ) - fragCoord ) ) * vec4(1.,0.,0.,1.); \n       }\n    }\n    col *= 0.99;\n    \n    fragColor =col;\n}","name":"Buffer A","description":"","type":"buffer"}]}