{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"cubemap","id":"4sX3zn","filepath":"/media/a/0681c014f6c88c356cf9c0394ffe015acc94ec1474924855f45d22c3e70b5785.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\t\n\tvec2 p = uv * 2.0 - 1.0;\n\tp.x *= iResolution.x / iResolution.y;\n\t\n\tvec3 ro = vec3(0.0,0.0,0.0);\n\tvec3 rd = vec3(p, -1.0);\n\t\n\t// sphere center\n\tvec3 sc = vec3(0.0,0.0,-10.0);\n\t\n\t// sphere radius\n\t//float sr = 1.0 + 5.0 * (0.5+0.5*sin(iTime));\n\tfloat sr = 6.0;\n\t\n\t// Raycast against sphere\n\tfloat a = dot(rd, rd);\n    float b = 2.0*dot(rd,(ro - sc));\n    float c = dot((ro - sc),(ro - sc)) - (sr*sr);\n\t\n\t// discriminant\n\tfloat disc = b*b-4.0*a*c;\n\t\n\tvec3 color = vec3(0.0,0.0,0.0);\n\t\n\tif (disc >= 0.0)\n\t{\n\t\t// first intersection\n\t    float t0 = (-b - sqrt(disc))/(2.0*a);\n\t    vec3 i0 = ro + t0 * rd;\n\t    vec3 n0 = normalize(i0 - sc);\n\t\n\t    vec3 l = normalize(vec3(1.0,1.0,0.15));\n\t    vec3 v0 = -normalize(i0);\n\t    float n0dotl = clamp(dot(n0,l),0.0,1.0);\n\t    //color = color * (0.1+n0dotl);\n\t    vec3 h = normalize(l+v0);\n\t    float n0doth = clamp(dot(n0,h),0.0,1.0);\n\t    float spec = pow(n0doth,1000.0);\n\t\n\t    vec3 refl0 = reflect(-v0,n0);\n\t\t//float r0dotn0 = clamp(dot(refl0,n0),0.0,1.0);\n\t\t\n\t\t\n\t    vec3 rcolor = 0.05 * texture(iChannel0, refl0).xyz;\n\t\n\t\tfloat density = 1.0/(1.333*3.1415*sr*sr*sr);\n\t\t\n\t\tfloat deep = disc/(2.0*sr)*0.05;\n\t\tdeep = deep*deep*deep*deep * (0.6+0.4*sin(iTime));\n\t\n\t    color = vec3(disc*density + deep,deep,0.0) + spec + rcolor;\t\n\t\t\n\t}\n\t\n\t// rough gamma\n\tcolor = sqrt(color);\n\t\t\n\tfragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4s2GDd","date":"1395286645","viewed":243,"name":"[SH2014]Noobish","username":"Renderwonk","description":"My first Shadertoy","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["weak"],"hasliked":0,"parentid":"","parentname":""}}