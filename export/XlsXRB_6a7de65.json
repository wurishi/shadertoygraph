{"ver":"0.1","info":{"id":"XlsXRB","date":"1437609944","viewed":4470,"name":"2D Outline","username":"mba105","description":"Create a 2d distance field using a texture alpha channel, and use it to draw an outline.","likes":22,"published":1,"flags":0,"usePreview":0,"tags":["2d","distancefield","outline"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"\nvoid mainImage(out vec4 result, in vec2 fragCoord)\n{\n    float r = min(iResolution.x, iResolution.y);\n    \n\tvec2 uv = fragCoord / r;\n    uv.x /= 8.0;\n    uv.y = 1.0 - uv.y;\n    \n    vec3 c = texture(iChannel0, uv).rgb;\n    \n    float a = texture(iChannel0, uv).a;\n    bool i = bool(step(0.5, a) == 1.0);\n    \n    const int md = 20;\n    const int h_md = md / 2;\n    \n    float d = float(md);\n    \n    for (int x = -h_md; x != h_md; ++x)\n    {\n        for (int y = -h_md; y != h_md; ++y)\n        {\n            vec2 o = vec2(float(x), float(y));\n            vec2 s = (fragCoord + o) / r;\n    \t\ts.x /= 8.0;\n    \t\ts.y = 1.0 - s.y;\n            \n            float o_a = texture(iChannel0, s).a;\n            bool o_i = bool(step(0.5, o_a) == 1.0);\n            \n            if (!i && o_i || i && !o_i)\n                d = min(d, length(o));\n        }\n    }\n    \n    d = clamp(d, 0.0, float(md)) / float(md);\n    \n    if (i)\n        d = -d;\n    \n    d = d * 0.5 + 0.5;\n    d = 1.0 - d;\n    \n    \n    float border_fade_outer = 0.1;\n    float border_fade_inner = 0.01;\n    float border_width = 0.25;\n    vec3 border_color = vec3(1.0, 0.0, 0.0);\n    \n    float outer = smoothstep(0.5 - (border_width + border_fade_outer), 0.5, d);\n    \n    vec3 temp = vec3(0.0, 0.0, 0.0);\n    vec4 border = mix(vec4(temp, 0.0), vec4(border_color, 1.0), outer);\n    \n    float inner = smoothstep(0.5, 0.5 + border_fade_inner, d);\n    \n    vec4 color = mix(border, vec4(c, 1.0), inner);\n    \n    result = color;\n}\n","name":"","description":"","type":"image"}]}