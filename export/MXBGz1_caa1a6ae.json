{"ver":"0.1","info":{"id":"MXBGz1","date":"1708191311","viewed":491,"name":"hex grid spirals","username":"Bleuje","description":"experimenting with hex grid","likes":31,"published":1,"flags":0,"usePreview":0,"tags":["2d","hexgrid","spirals"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// by @etiennejcb, started from https://www.shadertoy.com/view/wtdSzX by leftofzen\n\nconst vec2 s = vec2(1, 1.7320508);\nfloat PI = 3.141592;\nmat2 rot(float a) { float c = cos(a), s = sin(a); return mat2(c,-s,s,c); }\nfloat scale = 5.;\n\n// from https://www.shadertoy.com/view/wtdSzX\nvec4 getHex(vec2 p)\n{    \n    vec4 hC = floor(vec4(p, p - vec2(.5, 1))/s.xyxy) + .5;\n    vec4 h = vec4(p - hC.xy*s, p - (hC.zw + .5)*s);\n    return dot(h.xy, h.xy) < dot(h.zw, h.zw) \n        ? vec4(h.xy, hC.xy) \n        : vec4(h.zw, hC.zw + .5);\n}\n\n// function to improve colors, found in tdhooper shader : https://www.shadertoy.com/view/fdSGRy\nvec3 aces(vec3 x) {\n  const float a = 2.51;\n  const float b = 0.03;\n  const float c = 2.43;\n  const float d = 0.59;\n  const float e = 0.14;\n  return clamp((x * (a * x + b)) / (x * (c * x + d) + e), 0.0, 1.0);\n}\n\nfloat mixer;\n\nfloat getColorComponent(in vec2 fragCoord, float time)\n{\n\tvec2 u = (fragCoord - iResolution.xy*.5)/iResolution.y;\n    \n    vec4 h = getHex(u*scale + 0.*s.yx*time/2.);\n    float dist = length(h.xy);\n    vec2 coords = h.zw;\n    \n    float offset = 0.09*length(scale*u*vec2(1.,2.));\n    offset = 0.09*length(4.*u*vec2(1.,1.7));\n    \n    float rotAmount = 5.5*sin(PI*2.*(0.3*time - offset))*max(0.,1. - 1.985*dist);\n    vec2 hDistortion = h.xy*rot(rotAmount);\n    \n    float pattern = 6.*atan(hDistortion.y,hDistortion.x);\n    \n    float ret = smoothstep(0.7, .8, 0.5 + 0.5*sin(pattern + PI/2.));\n    mixer = smoothstep(0.8, .9, 0.5 + 0.5*sin(pattern + PI/2.));\n\n    return ret;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    float time = 0.8*iTime;\n    vec2 u = (fragCoord - iResolution.xy*.5)/iResolution.y;\n    \n    float colorOffset = 0.1;\n    float r = getColorComponent(fragCoord,time - colorOffset);\n    float g = getColorComponent(fragCoord,time + 0.);\n    float b = getColorComponent(fragCoord,time + colorOffset);\n    vec3 col0 = vec3(r,g,b);\n    \n    col0.zy  = abs(0.25 + 0.75*col0.xy*rot(0.3*time - 0.5*length(scale*u)));\n    col0.yz  = abs(0.25 + 0.5*col0.zy*rot(0.23*time - 0.4*length(scale*u)));\n\n    vec3 col = aces(col0.xzy)*0.25 + col0;\n    col = mix(col,vec3(1.),mixer);\n    col = mix(col,vec3(1.),0.6*length(u));\n    col = clamp(1.17*aces(col),0.,1.);\n    \n    fragColor = vec4(col, 1);    \n}","name":"Image","description":"","type":"image"}]}