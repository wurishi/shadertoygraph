{"ver":"0.1","info":{"id":"4stXRj","date":"1460287790","viewed":156,"name":"Nielmo: Mandelbrot","username":"Nielmo","description":"mandelbrot","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["mandelbrot"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Nielmo 2016\n\nvec2 mc(in vec2 a, in vec2 b) {\n    //return vec2(a.x*b.x-a.y*b.y, dot(a.xy,b.yx));\n    return vec2(dot(a,vec2(b.x,-b.y)), dot(a.xy,b.yx));\n}\n\nvec4 mandelbrot( vec2 p, float depth, vec2 r, float scale, float t) {\n//    vec2 loc =  vec2(0.7,0.35);\n//    vec2 loc =  vec2(0.73700,0.24340);\n//    vec2 loc =  vec2(1.19622,0.32835);\n//    vec2 loc =  vec2(-0.4002,0.3604);\n//    vec2 loc =  vec2(0.1304,0.8792);\n//    vec2 loc =  vec2(1.19622,0.32835);\n    vec2 loc =  vec2(0.749107,-0.135849);\n    \n\n    //float t = iTime;\n    //scale = 1.0;\n    //r = vec2(1.0, 0.0);\n    \n    //mc(c,vec2(sin(t),cos(t)));\n    \n\tvec2 c = (iResolution.xy*-0.5+p.xy)*scale;\n\tc = mc(c,r) - loc;\n\n    vec2 z = vec2(0.0,0.0);\n    float n = 0.0;\n    for(int nn=0;nn<=1024;nn++) {\n        z = mc(z,z)+c;\n        n++;\n        if(dot(z,z)>=256.0) {\n            break;\n        }\n        if(n>=depth) {\n            break;\n        }\n    }\n    if(n>=depth) {\n\t\treturn vec4(0.0,0.0,0.0,1.0);\n    }\n    n = n -log2(log2(dot(z,z)));\n    n = n / 128.0;\n    n = sqrt(n);\n    float cr = 0.5+0.5*cos(n*7.0+t);\n    float cg = 0.5+0.5*cos(n*11.0+t*1.111);\n    float cb = 0.5+0.5*cos(n*13.0+t*2.567);\n\treturn vec4(cr,cg,cb,1.0);\n}\n\n# define A 3\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   \t//int antialias = 1;\n    //antialias = fragCoord.x<iResolution.x/2.0;\n    float t = iTime;\n    float depth=300.0;\n\n    float sr = 0.13;\n    float scale = 0.32+0.300*sin(t*sr);\n    scale = 4.0*scale*scale*scale / iResolution.y;\n\n    float rr = 1.0;\n    vec2 r = vec2(sin(5.0*sin(0.17*t)*rr),cos(7.7*cos(0.07*t)*rr));\n    \n    vec4 c = vec4(0.0);\n    float n = 0.0;\n    float a = float(A);\n    float ni = 0.0;\n    for(int i=0; i<A; i++) {\n\t    float nj = 0.0;\n\t    for(int j=0; j<A; j++) {\n    \t\tc = c + mandelbrot(fragCoord.xy+vec2(ni/a,nj/a),depth,r,scale,t);\n            n++;\n\t        nj++;\n        }\n        ni++;\n    }\n    fragColor = c / n;\n            \n}","name":"Image","description":"","type":"image"}]}