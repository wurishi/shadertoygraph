{"ver":"0.1","info":{"id":"mdjSWd","date":"1671118060","viewed":94,"name":"quantising the colours","username":"krotos139","description":"quantising the colours","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["quantising"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// License: MIT\n\n#define PIXEL_SIZE 4\n\n// This function is from the https://www.shadertoy.com/view/4t3czs\nvec3 roundToPrecision(vec3 v, float p) {\n    return clamp(p * round(v / p), vec3(0.0), vec3(1.0));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragCoord = (floor((fragCoord - 0.5) / float(PIXEL_SIZE)) + 0.5) * float(PIXEL_SIZE);\n    vec2 uv = fragCoord/iResolution.xy; // Normalized pixel coordinates (from 0 to 1)\n    vec3 tex = texture(iChannel0, uv).rgb; // Colors from 0.0 to 1.0\n    vec3 stepSize = vec3(15); // color steps\n    float prec = 0.0666;\n    \n    vec3 col = vec3(0.0);\n    \n    if (iMouse.z >= 0.0) {\n        col = tex;\n        if (uv.x > iMouse.x/iResolution.x) {\n            col = tex*tex;\n        }\n\n        if (uv.y > iMouse.y/iResolution.y) {\n            // step the color range\n            col *= stepSize;\n            col = round(col);\n            col /= stepSize;\n        } else {\n            col = roundToPrecision(col, prec);\n        }\n        \n        if (uv.x > iMouse.x/iResolution.x) {\n            col = sqrt(col);\n        }\n        \n    } else {\n    \n        col = tex*tex;\n        \n        // quantising\n        col = round(col * stepSize) / stepSize;\n        \n        col = sqrt(col);\n    }\n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}