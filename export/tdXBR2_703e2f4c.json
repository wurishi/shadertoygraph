{"ver":"0.1","info":{"id":"tdXBR2","date":"1588604893","viewed":167,"name":"up!","username":"nabr","description":"abc","likes":6,"published":1,"flags":8,"usePreview":0,"tags":["sound","abc"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// -----------------------------------------------------\n// up! by nabr\n// https://www.shadertoy.com/view/tdXBR2\n// License Creative Commons Attribution-NonCommercial 4.0 International (CC BY-NC 4.0)\n// https://creativecommons.org/licenses/by-nc/4.0/\n// -----------------------------------------------------\n\n\n//based on Small Path Tracer by Yoshimaster96\n//https://www.shadertoy.com/view/Xs3GDM\n\n//#define mainImage(o,U)o=vec4(scn(o.xyz, U),1)\n#define e 1e-6\nfloat seed = e;\n#define rnd (fract(sin(seed++)*43758.5453123))\n\nfloat sph(vec3 o,vec3 d,float r)\n{\n    float b=dot(o,d),h=sqrt(b*b-(dot(o,o)-r*r));\n    return max(-max(b+h,b-h),-1.);\n}\n\nfloat pln(vec3 o, vec3 d)\n{\n    float t=-o.y/d.y;\n    o+=t*d;\n    return(abs(o.x)>1.||abs(o.z)<1.9)?-t:t;\n}\n\nvoid I(float t, vec3 p, inout vec3 o, inout vec3 d)\n{\n    float r0=6.283185*rnd,r1=rnd;\n    o+=d*t;\n    vec3 n=normalize(o-p),u=cross(n.yzx,n);\n    d=normalize(u*cos(r0)+cross(n,u)*sin(r0))*r1+n*sqrt(1.-(r1*r1));\n}\n\n//vec3 scn(vec3 O, vec2 U)\nvoid mainImage(out vec4 o, vec2 U)\n{\n    vec3 O = o.xyz;\n    vec2 R=iResolution.xy,\n         st=(U+U-R)/min(R.x,R.y),\n         uv=U/R+1.;\n    float t0,t1,t2,t=float(iFrame/30);\n    seed=dot(uv,uv)+t;\n    \n    vec3 p0=vec3(0,.2,-.5),\n         p1=vec3(0,-.5,3),\n         p2=vec3(sin(t),.2,-.5+cos(t));\n    \n    // -------- main\n    for (int j = 64; j > 0; --j)\n    {\n        vec3 ro = vec3(0,0,3),\n             rd = normalize(vec3(st, -3)),c;\n        float sn = 0.;\n        for (int i = 4; i > 0; --i){//color\n            t0 = sph(ro-p0, rd, .5);\n            t1 = pln(ro-p1, rd);\n            t2 = sph(ro-p2, rd, .2);\n            if(t0>e&&(t0<t1||t1<e)&&(t0<t2||t2<e)){//light\n                c+=16.;break;\n            }\n            else if(t2>e&&(t2<t1||t1<e))//sphere\n                I(t2,p2,ro,rd);\n            else if(t1>e)//ground\n                I(t1,p1,ro,rd);\n            sn+=1.;\n        }\n        O += (c/(64.*sn));\n    }\n    o.xyz = O;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"\n// -----------------------------------------------------\n// up! by nabr\n// https://www.shadertoy.com/view/tdXBR2\n// License Creative Commons Attribution-NonCommercial 4.0 International (CC BY-NC 4.0)\n// https://creativecommons.org/licenses/by-nc/4.0/\n// -----------------------------------------------------\n\n\n#define kck(h,t,a)(sin(h*t)*exp(log2(1.-t)/1.)*exp(-a*t))\n#define org(h,t,a)(sin(h*t)*sin(-a*t))\n//#define mainSound( in int samp,t)m(t)\nvec2 mainSound( in int samp,float tm){\nfloat a,b,c,\nft=fract(2.5*fract(tm));\na=kck(303.,ft,8.);\nc=kck(503.,ft,10.);\nb=sqrt(ft*exp(log2(1.-ft)/.4))*exp(sin(123.*fract(2.*tm))*3.-1.);\nreturn\n.04*vec2((org(2020.,tm,5.)+org(2280.,tm,2.)),(org(2400.,tm,10.)+org(2036.,tm,4.)))//bg\n+vec2(.425*a+.23*c,.3*a+.42*c)//kick\n+vec2((.9-cos(a))/(sin(b)+1.01),.3*(.7-cos(b))/(sin(a)+1.571))//wide\n+(mod(tm, 5.)>3.?.1*sin(20.*floor(fract(tm)*5.)/3.):0.);//click\n}","name":"Sound","description":"","type":"sound"}]}