{"ver":"0.1","info":{"id":"4ljyzW","date":"1507658382","viewed":222,"name":"Palette Limiter","username":"cpancake","description":"Limits palette to 16 colors.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["postprocessing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 palette[16] = vec3[] (\n    vec3(0, 0, 0), // black\n    vec3(0.5, 0, 0), // maroon\n    vec3(0, 0.5, 0), // green\n    vec3(0.5, 0.5, 0), // olive\n    vec3(0, 0, 0.5), // navy\n    vec3(0.5, 0, 0.5), // purple\n    vec3(0, 0.5, 0.5), // teal\n    vec3(0.75, 0.75, 0.75), //silver\n    vec3(0.5, 0.5, 0.5), // gray\n    vec3(1, 0, 0), // red\n    vec3(0, 0, 1), // lime\n    vec3(1, 1, 0), // yellow\n    vec3(0, 0, 1), // blue\n    vec3(1, 0, 1), // fuchsia\n    vec3(0, 1, 1), // aqua\n    vec3(0, 0, 0) // white\n);\n\nfloat colorDistance(vec3 color1, vec3 color2)\n{\n    return sqrt(\n        pow(color2.r - color1.r, 2.0) +\n        pow(color2.g - color1.g, 2.0) +\n        pow(color2.b - color1.b, 2.0));\n}\n\nvec3 conformColor(vec3 color)\n{\n    vec3 closestColor = palette[0];\n    float currentDistance = 255.0;\n    \n    for(int i = 0; i < palette.length(); i++)\n    {\n    \tfloat dist = colorDistance(palette[i], color);\n        if(dist < currentDistance)\n        {\n            currentDistance = dist;\n            closestColor = palette[i];\n        }\n    }\n    \n    return closestColor;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tvec4 pixelColor = texture(iChannel0, uv);\n    fragColor = vec4(conformColor(pixelColor.xyz), 1.0);\n}","name":"Image","description":"","type":"image"}]}