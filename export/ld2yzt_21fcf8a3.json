{"ver":"0.1","info":{"id":"ld2yzt","date":"1493405969","viewed":111,"name":"Smileys demo","username":"ocdy1001","description":"ok","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["test"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415f\n//shapes---------------------------------------------------------------------------\nfloat circle(vec2 uv, vec2 pos, float r, float blur){\n    float d = length(uv - pos);\n    return smoothstep(r, r-blur, d);\n}\n\nfloat band(float t, float start, float end, float blur){\n    float s0 = smoothstep(start-blur, start+blur, t);\n    float s1 = smoothstep(end+blur, end-blur, t);\n    return s0*s1;\n}\n\nfloat rect(vec2 uv, float l, float r, float t, float b, float blur){\n\tfloat s0 = band(uv.x, l, r, blur);\n    float s1 = band(uv.y, t, b, blur);\n    return s0*s1;\n}\n//other----------------------------------------------------------------------------\nfloat smiley(vec2 uv, vec2 pos, float r){\n    uv -= pos;\n    uv /= r * 2.5f;\n    \n    float mask = circle(uv, vec2(0.0f, 0.0f), 0.4f, 0.05f);\n    mask -= circle(uv, vec2(-0.13f, 0.16f), 0.05f, 0.01f);\n    mask -= circle(uv, vec2(+0.13f, 0.16f), 0.05f, 0.01f);\n    \n    float mouth = circle(uv, vec2(0.0f, 0.0f), 0.3f, 0.02f);\n    mouth -= circle(uv, vec2(0.0f, 0.3f), 0.5f, 0.02f);\n    mouth = max(mouth, 0.0f);\n    \n    mask -= mouth;\n    mask -= rect(uv, -0.03f, +0.03f, -0.1f, +0.05f, 0.01f);\n        \n    return mask;\n}\n//main----------------------------------------------------------------------------\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 rawuv = fragCoord.xy / iResolution.xy;\n\tvec2 uv = fragCoord.xy / iResolution.xy;  \n    uv -= 0.5f;//set origen to the middle of the screen.\n    uv.x *= iResolution.x / iResolution.y;//aspect ratio\n    \n\tfloat mask = 0.0f;\n    \n    mask += smiley(uv, vec2(0.0f, 0.0f), 0.3f);\n    for(int i = 0; i < 10; i++){\n        float rot = (float(i) * (2.0f*PI/10.0f)) + (iTime * 0.3f);\n    \tmask += smiley(uv, vec2(sin(rot)*0.4f, cos(rot)*0.4f), 0.05f);\n    }\n    \n    vec3 backg = vec3(rawuv,0.5+0.5*sin(iTime));\n    vec3 col = backg * mask;\n\tfragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}