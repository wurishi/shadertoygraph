{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"texture","id":"4sXGRn","filepath":"/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"}}],"code":"vec3 sun = vec3(-1.0, -0.2, 0.0);\nfloat noise_scale =2.0;\nfloat bump_coef = 0.5;\n\n// begin github: https://gist.github.com/patriciogonzalezvivo/670c22f3966e662d2f83\nfloat rand(float n){return fract(sin(n) * 43758.5453123);}\n\nfloat noise(float p){\n\tfloat fl = floor(p);\n  float fc = fract(p);\n\treturn mix(rand(fl), rand(fl + 1.0), fc);\n}\n\n// end\n\nfloat lerp(float v0, float v1, float t) {\n  return (1.0 - t) * v0 + t * v1;\n}\n\n\nvec3 get_moon_color(vec2 uv) {\n    \n    float bump = uv.x * uv.x + uv.y * uv.y;\n    \n    vec3 normal = normalize(vec3(uv.x, 1.0 - bump, uv.y));\n    \n    float diffuse = dot(-normalize(sun), normal);\n    \n    diffuse = clamp(diffuse, 0.01, 1.0);\n    \n    float px  = noise_scale * uv.x;\n    float bpx = px * bump;\n    \n    float py  = noise_scale * uv.y;\n    float bpy = py * bump;\n    \n    float fx = bump_coef * px + (1.0 - bump_coef) * bpx;\n    float fy = bump_coef * py + (1.0 - bump_coef) * bpy;\n    \n    float base = texture(iChannel0, vec2(fx, fy)).r;\n   \n    return vec3(base * diffuse);\n}\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord/iResolution.xy;\n\n    float dst = 1.0 - distance(vec2(0.5, 0.5), uv);\n    \n    sun = vec3(sin(iTime), cos(iTime), 0.0);\n    \n    vec3 col = get_moon_color(uv * 2.0 - vec2(1.0)) * step(0.5, dst);\n    \n    // if (step(0.5, dst) < 0.5) discard;\n    \n    fragColor = vec4(col, step(0.5, dst));\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4cVBDV","date":"1734473783","viewed":38,"name":"moon shader","username":"bonmas","description":"just simple \"moon\" shader.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["moon"],"hasliked":0,"parentid":"","parentname":""}}