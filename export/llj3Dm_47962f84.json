{"ver":"0.1","info":{"id":"llj3Dm","date":"1430826803","viewed":288,"name":"Full_","username":"shezard","description":"Some nightish scene","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["fullmoon"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGRn","filepath":"/media/a/cd4c518bc6ef165c39d4405b347b51ba40f8d7a065ab0e8d2e4f422cbc1e8a43.jpg","previewfilepath":"/media/ap/cd4c518bc6ef165c39d4405b347b51ba40f8d7a065ab0e8d2e4f422cbc1e8a43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"float rand(in vec2 uv){\n    return fract(sin(dot(uv.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat noise1d(in float p) {\n  \tfloat fl = floor(p);\n    float fc = fract(p);\n    \n  \treturn mix(rand(vec2(fl,fl)),rand(vec2(fl,fl)+1.0),fc);   \n}\n\nfloat noise(in vec2 uv) {\n\treturn sin(1.5*uv.x)*sin(1.5*uv.y);\n}\n\nconst mat2 m = mat2( 0.80,  0.60, -0.60,  0.80 );\n\nfloat fbm1d(in float p) {\n        float f = 0.0;\n    f += 0.5000*noise1d(p); p = p*2.02;\n    f += 0.2500*noise1d(p); p = p*2.03;\n    f += 0.1250*noise1d(p); p = p*2.01;\n    f += 0.0625*noise1d(p);\n    return f/0.9375;\n}\n\nfloat fbm(vec2 uv) {\n    float f = 0.0;\n    f += 0.5000*noise(uv+iTime*.1); uv = m*uv*2.02;\n    f += 0.2500*noise(uv+iTime*.1); uv = m*uv*2.03;\n    f += 0.1250*noise(uv+iTime*.1); uv = m*uv*2.01;\n    f += 0.0625*noise(uv+iTime*.1);\n    return f/0.9375;\n}\n\nfloat fbm2(in vec2 uv) {\n   vec2 p = vec2(fbm(uv + vec2(0.0,0.0)),\n                 fbm(uv + vec2(5.2,1.3)));\n\n   return fbm(uv + 4.0*p);\n}\n\nfloat r = 0.0;\n\nvec3 mountain(in vec2 p, in vec2 offset) {\n     \n    float c = 0.0;\n    if(-p.y > fbm1d(p.x)) {\n        \n       float mountain = (1.0 - (ceil(-p.y) * -p.y)) * length(p-offset) * .125;\n    \n       c = max(c,mountain);\n    }\n    \n    return c * (.95 + .05 * texture(iChannel0,p*.5).rgb);\n}\n\nvec3 scene( in vec2 p) {\n    \n    vec2 offset = vec2(1.3,-.6);\n    \n    vec3 c = vec3(.9) * length(p+offset) + fbm2(p*20.0+20.0)*.0025; \n    \n    \t c = clamp(c,.0,.2) / length(p+offset) - fbm2(p+vec2(iTime*.01,0))*.025;\n\n    float stars = (1.0 - clamp(0.0, 0.025, r*10.0) * 40.0) * .4 * (p.y * 3.0 + 1.0) * (.25 + fbm2(p*200.0)) * ceil(p.y);\n    \n    c = max(c, stars);\n    \n    c = max(c,mountain(p, offset));\n    \n    c = max(c,mountain(p+vec2(-0.4,0.1), offset+vec2(-0.4,0.1)));\n    \n    c = max(c,mountain(p+vec2(-0.55,0.2), offset+vec2(-0.55,0.2)));\n    \n    return c;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    vec2 p = -1.0 + 2.0 * uv;\n    \t p.x *= iResolution.x/iResolution.y;\n\n    \t r = rand(uv);\n    \n    vec3 c = scene(p);\n    \n\tfragColor = vec4(c,1.0);\n}","name":"Image","description":"","type":"image"}]}