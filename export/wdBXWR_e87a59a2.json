{"ver":"0.1","info":{"id":"wdBXWR","date":"1553382511","viewed":902,"name":"Perlin Smoke","username":"scratch13764","description":"Use the mouse","likes":12,"published":1,"flags":32,"usePreview":0,"tags":["noise","perlin","smoke","buffer","octave"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0, fragCoord/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdXGzn","filepath":"/media/a/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","previewfilepath":"/media/ap/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec2 perlin (vec2 p)\n{\n    vec2 a = texture(iChannel1, vec2(floor(p.x), ceil (p.y))/64.).xy;\n    vec2 b = texture(iChannel1, vec2(ceil (p.x), ceil (p.y))/64.).xy;\n    vec2 c = texture(iChannel1, vec2(floor(p.x), floor(p.y))/64.).xy;\n    vec2 d = texture(iChannel1, vec2(ceil (p.x), floor(p.y))/64.).xy;\n    \n    vec2 m = smoothstep(0.,1.,fract(p));\n    return mix(mix(c, a, m.y), mix(d, b, m.y), m.x) - .5;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 t = fragCoord/iResolution.xy;\n    vec2 p = fragCoord/iResolution.y;\n    vec2 m = iMouse.xy/iResolution.y;\n    \n    float b = smoothstep(.1+sin(iTime*5.)/100.,0., length(m-p));\n    \n    vec2 off = vec2(0);\n    vec2 noff = vec2(sin(iTime/2.), cos(iTime/3.));\n    float freq = 15.;\n    float amp = 2.;\n    for(int i = 0; i <= 5; i++)\n    {\n        p += noff/15.;\n        off += perlin(p*freq)*amp;\n        freq *= 1.45;\n        amp *= .5;\n        p = (p-10.)*mat2(cos(.25),-sin(.25),sin(.25),cos(.25))+10.;\n    }\n    off += vec2(-.2, .5);\n    t -= off/iResolution.xy;\n    b = min(texture(iChannel0, t, 1.5).x*.997 + b*.1, 1.);\n    fragColor = vec4(b);\n}","name":"Buffer A","description":"","type":"buffer"}]}