{"ver":"0.1","info":{"id":"MtBBRG","date":"1516193426","viewed":222,"name":"Chebyshev","username":"SegorGramsa","description":"plasma with chebyshev polynomials","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["chebyshev"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float chebyshev(float x, int n){\n    const int MAX_POWER = 16;\n    vec2 tvec = vec2( 1., x);\n    mat2 m = mat2 (0., -1., 1., 2.*x);\n    for( int i = 2; i < MAX_POWER; i += 1){\n        if( i > n ) return tvec.y;\n        tvec = m*tvec;\n    }\n    return tvec.y;\n}\n\n//https://github.com/hughsk/glsl-hsv2rgb/blob/master/index.glsl\nvec3 hsv2rgb(vec3 c) {\n  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy/iResolution.xy;\n    uv -= vec2(0.5);\n    uv *= 2.3*iResolution.xy/(min(iResolution.x, iResolution.y));\n\n    float timex = iTime * .21;\n    float tx = cos(timex)*chebyshev(uv.x, 2)  + sin(timex)* chebyshev(uv.x, 5) ;\n    float timey = iTime * 0.2;\n    float ty = cos(timey)*chebyshev(uv.y, 3) + sin(timey)* chebyshev(uv.y, 7) ;\n\n    float t2 = iTime * .5;\n    float csigma = cos(t2);\n    float s2sigma = 1. - csigma*csigma;\n    //next formula was taken from this paper\n    //http://boj.pntic.mec.es/~jcastine/Trabajos%20matematicos_archivos/cmj122-127.pdf\n    float b = tx*tx + ty*ty - 2.0*tx*ty*csigma + s2sigma;\n    float w = 3.*fwidth(b);\n    //float w = .2;\n    \n    b *= 2.;\n    float bFloor = floor(b);\n    b = smoothstep(w,0.,abs(fract(b) -.5))/fwidth(b);\n\t\n    //b*= step(abs(uv.x), 1.);\n    //b*= step(abs(uv.y), 1.);\n    \n\tvec3 color = hsv2rgb(vec3(bFloor/10.+fract(iTime*0.1),1.,1.));\n\t\n    color *= b;\n\n    fragColor = vec4(color, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}