{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#define PI 3.1415926535\n\nfloat rand(vec2 p){\n\treturn fract(sin(dot(p.xy,vec2(12.9898,78.233)))*43758.5453);\n}\n\nmat2 rot(float t) {\n\treturn mat2(cos(t),-sin(t),\n\t\t\t\tsin(t), cos(t));\n}\n\n// point to flower color, with alpha\nvec4 flower(vec2 p, float n, float seed) {\n\tif (p.y > 1.0 || p.y < 0.0) return vec4(0.0);\n\tvec2 c = vec2(floor(p.x)+0.5, 0.5);\n\tc.x += rand(vec2(c.x+seed*100.0, c.y*20.134))*.32-.16;\n\tc.y += rand(vec2(c.x+seed*200.0, c.y*30.412))*.32-.16;\n\tvec2 v = p-c;\n\t\n\tfloat rot = rand(vec2(c.x+seed, c.y+10.512))*1.4-0.7;\n\tfloat t = atan(v.y, v.x)+(rand(c)*2.0-1.0)*2.0*PI+iTime*rot;\n\tfloat r = sin(t*n)*0.05+.25;\n\tfloat rr = cos(t*n)*0.005+.08;\n\tfloat l = length(v);\n\t\n\t// petal\n\tfloat petal = smoothstep(0.02, 0.0, l-r);\n\t// pistil\n\tfloat pistil = smoothstep(0.05, -0.0, l-rr);\n\t// border\n\tfloat border = smoothstep(-0.09, 0.0, l-r)*0.3;\n\t\n\treturn vec4(vec3(0.5+pistil*0.5)-border, petal);\n}\n\n// beat value, 0->1, 1->0\nfloat beat(float x) {\n\tfloat temp = x-1.0;\n\ttemp *= temp;\n\ttemp *= temp;\n\treturn temp*(cos(30.0*x)*.5+.5);\n}\n\n// point to background color value\nvec3 backgroundColor(vec2 p) {\n\tvec3 color = vec3(.3, .05, .2);\n\t\n\t// add a star\n\tfloat t = atan(p.y, p.x) / PI;\n\tt *= 5.0;\n\tt += iTime*0.5;\n\tt = abs(fract(t)*2.0-1.0);\n\tfloat star = smoothstep(0.5, 0.6, t);\n\tcolor = mix(color, vec3(0.5, 0.2, 0.4), star);\n\t\n\t// add some flowers\n\tp.y+=3.3;\n\tp *= 0.2;\n\tfor (float i = 0.0 ; i < 5.5 ; i++) {\n\t\tvec2 pp = p;\n\t\tpp *= rot(.05*sin(2.0*iTime+2.0*PI*rand(vec2(i,1.0))));\n\t\tpp.x += iTime*(rand(vec2(i,2.0))*2.0-1.0)*(i+3.0)*.12;\n\t\tpp.y += sin(iTime+2.0*PI*rand(vec2(i,3.0)))*.1;\n\t\tvec4 flowerValue = flower(pp, 5.0+floor(i*.5), i);\n\t\tp.y += 0.02;\n\t\tp /= 0.9;\n\t\t\n\t\tvec3 flowerColor = vec3(rand(vec2(i, 19.0))*1.0,\n\t\t\t\t\t\t\t\trand(vec2(i, 18.0))*0.2,\n\t\t\t\t\t\t\t\trand(vec2(i, 16.0))*0.8);\n\t\t\n\t\tflowerValue.rgb = flowerColor*flowerValue.rgb*3.0+flowerValue.rgb;\n\t\tcolor = mix(color, flowerValue.rgb, flowerValue.a);\n\t}\n\t\n\treturn color;\n}\n\n// point to heart value\nfloat heartFormula(vec2 p, bool time) {\n\t// heartbeat\n\tif (time) {\n\t\tfloat beatValue = beat(fract(0.824*iTime))*0.1;\n\t\tp.x *= 1.0 + beatValue * 2.0;\n\t\tp.y *= 1.0 - beatValue * 1.5;\n\t}\n\t// center the heart around the axis\n\tp.y -= 1.6;\n\t// see http://mathworld.wolfram.com/HeartCurve.html\n\tfloat t = atan(p.y, p.x);\n\tfloat si = sin(t);\n\tfloat r = 2.0-2.0*si+si*(sqrt(abs(cos(t)))/(si+1.4));\n\treturn length(p)-r;\n}\n\n// heart value to heart color with alpha\nvec4 heartColor(vec2 p) {\n\tfloat v = heartFormula(p, true);\n\tvec3 color = vec3(1.0, 0.5, 0.8);\n\tcolor -= smoothstep(-0.8, +0.5, v)*vec3(0.6);\n\tcolor += smoothstep(-0.0, -1.6, v)*vec3(.4);\n\tcolor -= smoothstep(-0.2, +0.2, v)*vec3(0.1);\n\treturn vec4(color, smoothstep(0.2, 0.1, v));\n}\n\n// opening\nfloat opening(vec2 p) {\n\tfloat mult = max(0.0, 5.0-iTime*1.5);\n\tp *= 3.0*mult*mult*mult;\n\tp *= rot(sin(iTime*6.0)*.2);\n\tfloat v = heartFormula(p, false);\n\treturn smoothstep(-0.5, 0.5, v);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = fragCoord.xy / iResolution.xy * 2.0 - 1.0;\n\tuv.x *= iResolution.x / iResolution.y;\n\tfloat mult = 3.0+4.0*beat(min(1.0, 0.09*iTime));\n\tuv *= mult;\n\t\n\t// get background\n\tvec3 color = backgroundColor(uv);\n\t// heart formula and color\n\tvec4 hcolor = heartColor(uv*mult*.32);\n\t// and blend with heart color\n\tcolor = mix(color, hcolor.rgb, hcolor.a);\n\tcolor = clamp(color, 0.0, 1.0);\n\t// set opening\n\tcolor -= opening(uv);\n\t\n\tfragColor.rgb = color;\n\tfragColor.a = 1.0;\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lsXXD4","date":"1401073664","viewed":921,"name":"Bonne FÃªte Maman !","username":"Klems","description":"Happy mother's day to all mothers in the world!","likes":22,"published":1,"flags":0,"usePreview":0,"tags":["2d","cute","cartoon","flower","heart"],"hasliked":0,"parentid":"","parentname":""}}