{"ver":"0.1","info":{"id":"wtsGWl","date":"1558114139","viewed":190,"name":"Pong smoke","username":"shadyLane","description":"glitchy boxes in a modulo space","likes":3,"published":1,"flags":8,"usePreview":0,"tags":["boxes"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 symmod(vec3 x, vec3 modulo) {\n    return mod(x, modulo) - modulo * .5;\n}\n\nmat2 rotation(float a) {\n\tfloat c = cos(a), s = sin(a);   \n   \treturn mat2(c, -s, s, c);\n}\n\nfloat box(vec3 pos, float size) {\n    return max(abs(pos.x), max(abs(pos.y), abs(pos.z))) - size;\n}\n\nfloat map(vec3 pos) {\n    // rotation globale\n    pos.xz *= rotation(iTime * 0.2 * pos.y * 0.0001);\n    // modulo\n    pos = symmod(pos, vec3(\tsin(iTime*0.9 + pos.z) + 3.,\n                        \tsin(iTime*0.7 + pos.y) + 3.,\n                        \tsin(iTime*1.1 + pos.y) + 3.\n                        )\n             \t);\n    // rotation\n    pos.xy *= rotation(iTime * 0.5);\n    \n    float geo = box(pos, 0.3);\n    return geo;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = (fragCoord/iResolution.xy)*2.-1.;\n    uv.x *= iResolution.x/iResolution.y;\n    uv += vec2(sin(iTime*1.)*0.05 * uv.x * uv.y, cos(iTime*.7)*0.05* uv.x * uv.y);\n    uv.y += mod((iTime + 10. * 0.5), 15.) + 2.;\n    uv.x += mod((iTime + 10. * 0.3), 15.) + 2.;\n    uv *= 0.2;\n    \n    vec3 eye = vec3(0., 0., -1.);\n    vec3 ray = normalize(vec3(uv, 2.));\n    vec3 shade = vec3(0., (1.-uv.y)*0.1, uv.y*0.4);\n    \n    for (int i = 0; i < 20; i++) {\n        float d = map(eye);\n        eye += ray * d;\n        if(d < 0.1) {\n            float dye = 1. - float(i)/20.;\n            shade = vec3(1.-dye, dye, sin(dye*3.)*0.5+0.5);\n            break;\n        }   \n    }\n    \n    fragColor = vec4(vec3(shade),1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float gran(float t, float period, float decay, float freq, float offset) {\n\treturn exp(- mod(t + offset, period ) * decay ) * sin(freq* 6.24 * t);  \n}\n\nfloat tchic(float t, float period, float decay, float offset) {\n\treturn exp(- mod(t + offset, period ) * decay ) * sin(1000. * t * sin(7777. * t * sin(20. * t)));  \n}\n\nfloat woom(float t, float period, float decay, float offset) {\n\treturn exp(- mod(t + offset, period ) * decay ) * sin(1000. * t * sin(7777. * t * sin(20. * t)));  \n}\n\nvec2 mainSound( in int samp, float t)\n{\n    return clamp(vec2( \n        //gran(t, .06 , 5000. , 1000., 0.  ) * 0.1 +\n        //gran(t, .15 , 3000. , 2000. , 0.013  ) * 0.1 +\n        //gran(t, .3  , 3200. ,  170., 0.023  ) * 0.1 +\n        //gran(t, .35 , 5000. , 1200. , 0.006  ) * 0.5 +\n        gran(t, 1.4 , 10.   , 100.  , 0.002  ) * 0.4 + \n        gran(t, 1.4 , 10.   , 150.  , 0.851  ) * 0.4 +\n        gran(t, 1.4 , 10.   , 175.  , 0.933  ) * 0.4 +\n        gran(t, 1.4 , 10.   , 193.  , 1.201  ) * 0.4 +\n  clamp(gran(t, 0.35 , 20.   ,  50. , 0.352  ), -0.2, 0.2)* 4. +\n        tchic(t, 0.35, 100.         , 0.121  ) * 0.1\n    ), -0.9, .9);\n}","name":"Sound","description":"","type":"sound"}]}