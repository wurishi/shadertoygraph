{"ver":"0.1","info":{"id":"4Xlczs","date":"1726772948","viewed":32,"name":"Integer Grid - Pixelated Effect","username":"jafam","description":"Physics update grid for a falling sand engine.","likes":0,"published":3,"flags":32,"usePreview":0,"tags":["displacement","bit","bithack"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 O, in vec2 I) {\n    I = texelFetch(iChannel0,ivec2(I),0).xy; //displaced uv\n    O = vec4(I/iResolution.xy,0,1);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"//Displacement shader\n\nconst uint n = 5u; //offset by 2^n pixels\n\nvoid mainImage(out vec4 O, in vec2 I) {\n    uint t = uint(iTime*4.0);\n    uvec2 phase = uvec2(0u,1u); //shift y offset 1 time unit\n    uvec2 offset = (t+phase)&2u;//mod 4\n    \n    uvec2 p = uvec2(I);\n    \n    //floor(p) to nth bit\n    p = (p >> n) << n;\n\n    //scale offset\n    offset = offset<<(n-1u);\n    \n    p += offset;\n    O = vec4(p,0,0); //could fit more data\n}","name":"Buffer A","description":"","type":"buffer"}]}