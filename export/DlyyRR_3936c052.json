{"ver":"0.1","info":{"id":"DlyyRR","date":"1699859740","viewed":137,"name":"Fork Fork Snowy zhitaowang 296","username":"zhitaowang","description":"First real shader, any tips or feedback are appreciated.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d","christmas"],"hasliked":0,"parentid":"clyyRR","parentname":"Fork Snowy Stre zhitaowang 217"},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","previewfilepath":"/media/ap/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"XdX3zn","filepath":"/media/a/488bd40303a2e2b9a71987e48c66ef41f5e937174bf316d3ed0e86410784b919.jpg","previewfilepath":"/media/ap/488bd40303a2e2b9a71987e48c66ef41f5e937174bf316d3ed0e86410784b919.jpg","type":"cubemap","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"//Floating ornaments, and wind-blown snow that slowly piles up on the bottom of the screen.\n\n#define SNOWRATE 200.0 //Screen fills up in SNOWRATE seconds\n#define PI 3.14159\n#define HALFPI 1.570796\n\n//Specular function shamelessly stolen from TDM (www.shadertoy.com/user/TDM)\nfloat specular(vec3 normal, vec3 light, vec3 eye, float s)\n{\n    float nrm = (s + 8.0) / (PI * 8.0);\n    return pow(max(dot(reflect(eye, normal), light), 0.0), s) * nrm;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    //Generate edge of the pile of snow\n    float snowdrift = smoothstep(0.0, uv.y * SNOWRATE, iTime);\n    //Invert y to flip the texture\n    uv.y = 1.0 - uv.y;\n    \n    //Wobbled uv\n    vec2 wuv = uv.xy;\n    //Move downward\n    //Commented sin function looks too artifical\n    wuv.y = wuv.y - (/*(sin(iTime * 1.5) / 20.0) + */(iTime) / 10.0);\n    //Apply sway to flakes\n    wuv.x = wuv.x + (sin((iTime + (uv.y * 90.0)) / 2.0) / 360.0);\n    //Apply wind to flakes\n    wuv.x = wuv.x + (sin(iTime / 20.0) * 4.0);\n    \n    vec4 background = texture(iChannel0, uv.xy);\n    vec4 flakes = texture(iChannel1, wuv.xy);\n    vec4 snow = texture(iChannel2, uv.xy);\n    //Change snow to grayscale\n    snow = snowdrift * (snow.rrra + 0.3);\n    flakes = flakes.rrra;\n    \n    //Applies flakes over the background, and the snowdrift over that\n    vec3 snowscape = clamp((mix(background.rgb, flakes.rgb, flakes.rgb)) * (1.0 - snowdrift) + snow.rgb, 0.0, 1.0);\n;\n    vec4 final = vec4(snowscape, 1.0);\n    \n\tfragColor = final;\n}","name":"Image","description":"","type":"image"}]}