{"ver":"0.1","info":{"id":"wsffWM","date":"1588423911","viewed":57,"name":"Prairie des vaches","username":"HyiKing","description":"Prairie des vaches - the cow meadow","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["prairievachescowmeadow"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SCALE 15.0\n#define TILESIZE 30.0\n#define PI 3.14159265359\n\n// COLORS\nvec3 yellow = vec3(241./255.,242./255.,208./255.);\nvec3 green = vec3(127./255., 173./255., 110.0/255.);\nvec3 laurel = vec3(146./255., 173./255., 148.0/255.);\nvec3 bg = vec3(226./255., 214./255., 134.0/255.);\nvec3 middlegreen = vec3(88./255.,129./255.,87./255.);\nvec3 huntergreen = vec3(68./255.,100./255.,74./255.);\nvec3 blackolive = vec3(53./255.,56./255.,49./255.);\n\nfloat hash21(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat rect(vec2 uv, vec2 bottomLeft, vec2 topRight) {\n    vec2 step1 = step(bottomLeft, uv);\n    vec2 step2 = step(1.0-topRight, 1.0-uv);\n    return step1.x*step1.y*step2.x*step2.y;\n}\n\nvec4 tile1(vec2 uvT) {\n    // Draw First Tile flowers\n    vec3 col = vec3(0.0);\n    float mask = rect(uvT, vec2(2.0, 10.0), vec2(6.0, 14.0));\n    mask += rect(uvT, vec2(10.0, 10.0), vec2(14.0, 14.0));\n    mask += rect(uvT, vec2(6.0, 6.0), vec2(10.0, 10.0));\n    mask += rect(uvT, vec2(6.0, 14.0), vec2(10.0, 16.0));\n\n    mask += rect(uvT, vec2(18.0, 20.0), vec2(22.0, 24.0));\n    mask += rect(uvT, vec2(22.0, 24.0), vec2(26.0, 26.0));\n    mask += rect(uvT, vec2(22.0, 16.0), vec2(26.0, 20.0));\n    mask += rect(uvT, vec2(26.0, 20.0), vec2(30.0, 24.0));\n    col = mix(col, yellow, mask);\n    float mask2 = rect(uvT, vec2(2.0, 8.0), vec2(6.0, 10.0));\n    mask2 += rect(uvT, vec2(6.0, 10.0), vec2(10.0, 14.0));\n    mask2 += rect(uvT, vec2(10.0, 8.0), vec2(14.0, 10.0));\n    mask2 += rect(uvT, vec2(6.0, 4.0), vec2(10.0, 6.0));\n\n    mask2 += rect(uvT, vec2(18.0, 18.0), vec2(22.0, 20.0));\n    mask2 += rect(uvT, vec2(22.0, 20.0), vec2(26.0, 24.0));\n    mask2 += rect(uvT, vec2(26.0, 18.0), vec2(30.0, 20.0));\n    mask2 += rect(uvT, vec2(22.0, 14.0), vec2(26.0, 16.0));\n    col = mix(col, green, mask2);\n    return vec4(col,clamp(mask+mask2, 0.0, 1.0));\n}\n\nvec4 tile2(vec2 uvT) {\n    // Draw Second Tile flowers\n    vec3 col = vec3(0.0);\n    float mask = rect(uvT, vec2(0.0, 22.0), vec2(12.0, 26.0));\n    mask += rect(uvT, vec2(4.0, 18.0), vec2(8.0, 28.0));\n\n    mask += rect(uvT, vec2(16.0, 12.0), vec2(28.0, 16.0));\n    mask += rect(uvT, vec2(20.0, 8.0), vec2(24.0, 18.0));\n    col = mix(col, yellow, mask);\n    float mask2 = rect(uvT, vec2(0.0, 20.0), vec2(4.0, 22.0));\n    mask2 += rect(uvT, vec2(4.0, 22.0), vec2(8.0, 26.0));\n    mask2 += rect(uvT, vec2(4.0, 16.0), vec2(8.0, 18.0));\n    mask2 += rect(uvT, vec2(8.0, 20.0), vec2(12.0, 22.0));\n\n    mask2 += rect(uvT, vec2(16.0, 10.0), vec2(20.0, 12.0));\n    mask2 += rect(uvT, vec2(20.0, 12.0), vec2(24.0, 16.0));\n    mask2 += rect(uvT, vec2(20.0, 6.0), vec2(24.0, 8.0));\n    mask2 += rect(uvT, vec2(24.0, 10.0), vec2(28.0, 12.0));\n    col = mix(col, green, mask2);\n    return vec4(col, clamp(mask+mask2, 0.0, 1.0));\n}\n\nvec4 tile3(vec2 uvT) {\n    // Draw Third Tile flowers\n    vec3 col = vec3(0.0);\n    float mask = rect(uvT, vec2(0.0, 18.0), vec2(12.0, 22.0));\n    mask += rect(uvT, vec2(4.0, 14.0), vec2(8.0, 24.0));\n    mask += rect(uvT, vec2(18.0, 24.0), vec2(30.0, 28.0));\n    mask += rect(uvT, vec2(22.0, 20.0), vec2(26.0, 30.0));\n    mask += rect(uvT, vec2(10.0, 6.0), vec2(22.0, 10.0));\n    mask += rect(uvT, vec2(14.0, 2.0), vec2(18.0, 12.0));\n    col = mix(col, yellow, mask);\n    float mask2 = rect(uvT, vec2(0.0, 16.0), vec2(4.0, 18.0));\n    mask2 += rect(uvT, vec2(4.0, 18.0), vec2(8.0, 22.0));\n    mask2 += rect(uvT, vec2(8.0, 16.0), vec2(12.0, 18.0));\n    mask2 += rect(uvT, vec2(4.0, 12.0), vec2(8.0, 14.0));\n    mask2 += rect(uvT, vec2(18.0, 22.0), vec2(22.0, 24.0));\n    mask2 += rect(uvT, vec2(22.0, 24.0), vec2(26.0, 28.0));\n    mask2 += rect(uvT, vec2(26.0, 22.0), vec2(30.0, 24.0));\n    mask2 += rect(uvT, vec2(22.0, 18.0), vec2(26.0, 20.0));\n    mask2 += rect(uvT, vec2(10.0, 4.0), vec2(14.0, 6.0));\n    mask2 += rect(uvT, vec2(14.0, 6.0), vec2(18.0, 10.0));\n    mask2 += rect(uvT, vec2(18.0, 4.0), vec2(22.0, 6.0));\n    mask2 += rect(uvT, vec2(14.0, 0.0), vec2(18.0, 2.0));\n    col = mix(col, green, mask2);\n    return vec4(col, clamp(mask+mask2, 0.0, 1.0));\n}\n\nfloat weed(vec2 uvT, vec2 pos, float speed) {\n\t// Grass movement\n    // let stop and move again periodically\n    float ct1 = iTime*2.0*speed;\n    float ct2 = iTime*1.0*speed;\n    float stopEveryAngle1 = PI/2.;\n    float stopEveryAngle2 = PI;\n    float stopRatio1 = 0.9;\n    float stopRatio2 = 0.9;\n    float tm1 = (floor(ct1) + smoothstep(0.0, 1.0-stopRatio1, fract(ct1)) )*stopEveryAngle1;\n    float tm2 = (floor(ct2) + smoothstep(0.0, 1.0-stopRatio2, fract(ct2)) )*stopEveryAngle2;\n\n    float x1 = -4.0*cos(tm1);\n    float x2 = -2.0*cos(tm2);\n    float mask = rect(uvT, vec2(pos.x+x1, pos.y+6.0), vec2(pos.x+2.0+x1, pos.y+10.0));\n    mask += rect(uvT, vec2(pos.x+x2, pos.y+3.0), vec2(pos.x+2.0+x2, pos.y+6.0));\n    mask += rect(uvT, vec2(pos.x, pos.y), vec2(pos.x+3.0, pos.y+3.0));\n\treturn mask;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = fragCoord.xy/iResolution.xy;\n    uv.x *= iResolution.x/iResolution.y;\n    vec2 uvStatic = uv;\n\n    // TIME\n    uv.x += iTime/8.0;\n    uv.y += iTime/32.0;\n    uv *= SCALE;\n    vec2 guv = fract(uv);\n    vec2 id = floor(uv);\n    \n    // Background\n    vec2 uvBack = uv*SCALE/1.0;\n    vec2 guvBack = fract(uvBack);\n    vec2 idB = floor(uvBack);\n    vec2 uvTBack = guvBack*TILESIZE;\n    vec3 col = huntergreen;\n    float noiseGreen = hash21(idB);\n    if (noiseGreen < 0.6) col = middlegreen;\n    else if (noiseGreen < 0.8) col = huntergreen;\n    else if (noiseGreen < 0.9) col = blackolive;\n    \n    float noise = hash21(id);\n    if (noise < 0.5) col.r -= noise*0.1;\n    noise = hash21(id+0.4);\n    if (noise < 0.4) col.b -= noise*0.1;\n    \n    vec2 uvT = guv*TILESIZE;\n    \n    // Flowers\n    vec4 flower;\n    float isTile = hash21(id+0.1);\n    if (isTile < 0.1) {\n        flower = tile3(uvT);\n    \tcol = mix(col, flower.rgb, flower.a);\n    } else if (isTile < 0.22) {\n        flower = tile2(uvT);\n    \tcol = mix(col, flower.rgb, flower.a);\n    } else if (isTile < 0.35) {\n        flower = tile1(uvT);\n    \tcol = mix(col, flower.rgb, flower.a);\n    }\n    \n    // Weed\n    float r1 = hash21(id+0.34);\n    float r2 = hash21(id+0.71);\n    vec2 pos = vec2(4.8+19.0*r1, 18.0*r2);\n    //float speed = 1.5*sin(id.x+iTime*PI/2.)+2.0;\n    float maskWeed = weed(uvT, pos, 1.0);\n    r1 = hash21(id+0.64);\n    r2 = hash21(id+0.55);\n    maskWeed += weed(uvT, vec2(4.8+19.0*r1, 18.0*r2), 1.0);\n   \tmaskWeed = clamp(maskWeed, 0.0, 1.0);\n    col = mix(col, bg, maskWeed);\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}