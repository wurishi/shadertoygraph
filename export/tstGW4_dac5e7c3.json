{"ver":"0.1","info":{"id":"tstGW4","date":"1568576627","viewed":133,"name":"More Dither Comparison","username":"Carandiru","description":"More blue noise comparison, \nthis time with luma based shading\n\noriginal shader by iq:\nhttps://www.shadertoy.com/view/Wdc3DH","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["dither"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsBSR3","filepath":"/media/a/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","previewfilepath":"/media/ap/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// More blue noise comparison, \n// this time with luma based shading\n// removes banding and brings out the shadows and highlights in a real scene\n// this is a variant of a \"dithering\" shader Im using to add more shading\n// it also gives the illusion that there are more colors than can\n// actually be displayed by your screen\n// as better seen or applied to a real game\n\n// original shader by iq:\n// https://www.shadertoy.com/view/Wdc3DH\n    \n#define LUMA vec3(0.2126f, 0.7152f, 0.0722f)\n#define NOISE_SCALAR (17.0f/255.0f)\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = fragCoord/iResolution.xy;\n     \n    // try with different textures / videos\n    vec3 col = texture(iChannel2, p * vec2(0.32f,1.0f)).rgb;\n    \n    // dither test\n    if( abs(p.y-0.5)<0.5 )\n    {\n        // blue noise, 2 channels\n        // typically you would scale this by a very low number\n        // like (1.0f/255.0f) to (17.0f/255.0f)\n        // but for purposes of this demo to show luma range sin(iTime) is used instead\n        // you can try NOISE_SCALAR instead but than you will barely see it\n        // unless you capture a screenshot and zoom in with a paint program\n        vec2 no = texelFetch( iChannel0, (ivec2(fragCoord) & 1023), 0 ).xy * abs(sin(iTime));\n        \n        // temporal swap of blue noise\n        float noise = mix(no.x, no.y, bool(iFrame&1));//1.0-no.x-no.y;\n        \n        // luminance\n        float luma = dot(col, LUMA);\n        \n        // apply compared dither\n        col = mix( mix(col - noise, col + noise, luma), // just right ?\n                   mix(col - noise * luma, col + noise * luma, luma), // too little ?\n                   bvec3(p.y < 0.5f) );\n\n    }\n\n    fragColor = vec4( col, 1.0 );\n}\n\n","name":"Image","description":"","type":"image"}]}