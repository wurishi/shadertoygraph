{"ver":"0.1","info":{"id":"mllSDB","date":"1675325622","viewed":64,"name":"Simple Circles With BGM II","username":"nelsonkuang","description":"Simple Circles With BGM II","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["circles","music"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGzn","filepath":"/media/a/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","previewfilepath":"/media/ap/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","type":"music","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"mat2 rotate2d(float theta) {\n  float s = sin(theta), c = cos(theta);\n  return mat2(c, -s, s, c);\n}\n\nvec2 hash2(vec2 p) {\n  p = vec2(dot(p, vec2(127.1, 311.7)), dot(p, vec2(269.5, 183.3)));\n\n  return -1.0 + 2.0 * fract(sin(p) * 43758.5453123);\n}\n\nfloat getAmp(float frequency) { // from: https://www.shadertoy.com/view/4ljGD1\n  return texture(iChannel0, vec2(frequency / 512.0, 0)).x;\n}\n\nfloat getWeight(float f) { // from: https://www.shadertoy.com/view/4ljGD1\n  return (+getAmp(f - 2.0) + getAmp(f - 1.0) + getAmp(f + 2.0) + getAmp(f + 1.0) + getAmp(f)) / 5.0;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n  vec2 uv = fragCoord / iResolution.xy;\n  \n  float weight = getWeight(uv.x * cos(iTime) + uv.x * sin(iTime));\n\n  uv *= rotate2d(sin(iTime * 0.1) * cos(iTime * 0.1));\n  uv.y += iTime * 0.15;\n  uv *= 4.0;\n  vec2 offsets = hash2(floor(uv));\n  uv = fract(uv);\n  uv -= 0.5;\n  uv.x *= iResolution.x / iResolution.y;\n\n  float d = length(uv) - 0.3 * weight;\n  float circleSize = 0.3 * weight;\n  float val = smoothstep(circleSize, -circleSize, d);\n  vec3 col = vec3(val) * offsets.x;\n  fragColor = vec4(col.r * sin(iTime), col.g * cos(iTime), col.b * (sin(iTime) + cos(iTime)), 1.0); // output color\n}\n","name":"Image","description":"","type":"image"}]}