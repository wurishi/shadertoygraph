{"ver":"0.1","info":{"id":"4tjfDw","date":"1516054074","viewed":79,"name":"pattern01152018","username":"edapx","description":"flower, patterns","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["patterns","flower"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define TWO_PI 6.28318530718\n\n// Utilities\nfloat strokeSmoot(float x, float pos, float width){\n  return smoothstep(pos, pos+0.01,x+ width*0.5) -\n         smoothstep(pos, pos+0.01,x- width*0.5);\n}\n\nfloat circle(vec2 st, float diameter){\n  return length(st - 0.5) * diameter;\n}\n\nfloat flip(float v, float pct){\n  return mix(v, 1. - v, pct);\n}\n\nfloat fill(float sdfVal, float size){\n  return smoothstep(size, size+0.02,sdfVal);\n}\n\nmat2 rotate2d(float _angle){\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle));\n}\n\nfloat quadrifoglio (vec2 st, float diameter, float utime, float speed, float tickness){\n  float time = utime * speed;\n  float offset = .25;\n  float cross = 2.1;\n  float petalsDist = .24;\n  float petalsThickA = -.019 + abs(cos(time * 9.) * tickness);// .5\n  float petalsThickB = -.019 + abs(sin(time * 4.5) * tickness);// .5\n  \n  float center = circle(st, diameter);\n\n  vec2 petAcen = st-vec2(offset, offset);\n  float radiusA = length(petAcen);\n  float petA = circle(petAcen,radiusA*cross);\n\n  vec2 petBcen = rotate2d(TWO_PI/4.) * petAcen;\n  petBcen -= vec2(0., -.5);\n  float radiusB = length(petBcen);\n  float petB = circle(petBcen,radiusB*cross);\n\n  float petals = strokeSmoot(petA, petalsDist,petalsThickA);\n  petals += strokeSmoot(petB, petalsDist,petalsThickB);\n\n  float color = flip(petals,\n                fill(center, .155));\n  return color;\n}\n\n\n// Example\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec3 bgCol = vec3(0.049,0.398,0.905);\n    vec3 fCol = vec3(0.905,0.283,0.046);\n    float timeFreq = 0.7;\n    float timeAmp = 1.2; // 4.\n    float zoom = 3.;\n    float thick =0.1; // 0.1, 0.7\n    vec2 st = fragCoord.xy/iResolution.xy;\n    // tiling\n    st.x *= iResolution.x/iResolution.y;\n    st *=zoom;\n    // offset\n    st.x += step(1.0, mod(st.y,2.0)) * 0.5;\n    st = fract(st);\n    \n    // Movement\n    //float mov = sin(mod(st.x*st.y, 2.7));\n    //float mov = sin(mod(st.y, 2.7));\n    float mov = sin(mod(st.x, 2.7));\n    float ampMov = 4.; // 24.\n\n    float draw = quadrifoglio(\n      st, 1.9,\n      sin(iTime*timeFreq)*timeAmp,\n      (mov*ampMov),\n      thick);\n    vec3 col = mix(fCol, bgCol, draw);\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}