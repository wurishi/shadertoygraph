{"ver":"0.1","info":{"id":"XtBBDD","date":"1515751494","viewed":103,"name":"Rotating Circles","username":"hallabada","description":"How can I remove these visual artifacts?\nInspired By (https://www.youtube.com/watch?v=uTQy_UqTtGo&t=4s)","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec4 drawSmooth(float d, vec3 color);\nfloat sdfCircle(vec2 center, float radius, vec2 pt);\nfloat sdfUnion(float sdf1, float sdf2);\nfloat sdfDiff(float sdf1, float sdf2);\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = 0.5 - fragCoord.xy / iResolution.xy;\n    vec2 p = vec2(iResolution.x / iResolution.y, 1) * uv;\n\t\n    float outerRadius = 0.4;\n    int circleCount = 50;\n    float t = iTime;\n    float strokeWidth = 0.003 + 0.001*sin(t);\n    \n    float d = 10000.0;\n    \n    for (int i=0; i<circleCount; i++)\n    {\n        float rstep = outerRadius/float(circleCount);\n        float radius = float(i)*rstep;\n        float offset = (outerRadius-sin(t)*radius);\n        vec2 center = vec2(offset*cos(t), offset*sin(t));\n        \n        float circle1 = sdfCircle(center, radius+strokeWidth, p);\n        float circle2 = sdfCircle(center, radius, p);\n        float stroke = sdfDiff(circle1, circle2);\n        \n        d = sdfUnion(d, stroke);\n    }\n    \n    vec4 layer = drawSmooth(d, vec3(0,0,0));\n    vec4 bg = vec4(1.0, 1.0, 1.0, 1.0);\n    fragColor = vec4(mix(bg.rgb, layer.rgb, layer.a), 1.0);\n}\n\n\nvec4 drawSmooth(float d, vec3 color)\n{\n    float aaf = fwidth(d);\n    vec4 stroke = vec4(color, 1.0-d*80.0);\n    return stroke;\n}\n\n/* (x - center)^2 + (y - center)^2 = radius^2 */\nfloat sdfCircle(vec2 center, float radius, vec2 pt)\n{\n    vec2 r = pt - center;\n    return sqrt((r.x*r.x) + (r.y*r.y)) - radius;\n}\nfloat sdfUnion(float sdf1, float sdf2)\n{\n    return min(sdf1, sdf2);\n}\n\nfloat sdfDiff(float sdf1, float sdf2)\n{\n    return max(sdf1, -sdf2);\n}","name":"Image","description":"","type":"image"}]}