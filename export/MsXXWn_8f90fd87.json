{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"float sdBox( vec3 p, vec3 b )\n{\n\tvec3 d = abs(p) - b;\n\treturn min(max(d.x,max(d.y,d.z)),0.0) +\n\t\t   length(max(d,0.0));\n}\n\nfloat sdCross(vec3 p)\n{\n\t// infinity doesn't exist, so 123456789. does the job\n\treturn min(sdBox(p, vec3(123456789., 1., 1.)),\n\t\t\t   min(sdBox(p, vec3(1., 123456789., 1.)),\n\t\t\t   sdBox(p, vec3(1., 1., 123456789.))));\n}\n\nfloat dist2nearest(vec3 p)\n{\n\t// repeat the cross with 1. between each in every direction\n\tvec3 q = mod(p, 1.) - .5;\n\treturn sdCross(q * 27.) / 27.;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec3 camDir = vec3(fragCoord.xy / iResolution.xy, 1.) * 2. - 1.;\n\tcamDir.x *= iResolution.x / iResolution.y;\n\t\n\tmat2 rot = mat2(cos(iTime), sin(iTime),\n\t\t\t\t\t-sin(iTime), cos(iTime));\n\tcamDir.xz *= rot;\n\tcamDir.yz *= rot;\n\tcamDir.xy *= rot;\n\t\n\tcamDir = normalize(camDir);\n\t\n\tvec3 camPos = vec3(0., 0., iTime);\n\t\n\tfloat t = 0., d = 0.000002;\n\tint j = 0;\n\t\n\tfor(int i = 0; i < 64; i++)\n\t{\n\t\tif(abs(d) < 0.000001 || t > 100.) continue;\n\t\td = dist2nearest(camPos + t * camDir);\n\t\tt += d;\n\t\tj = i;\n\t}\n\t\n\tfloat shade = 0.;\n\tif(abs(d) < 0.000001) shade = 1. - float(j) / 64.;\n\t\n\tfragColor = vec4(shade);\n}\n\nvoid mainVR( out vec4 fragColor, in vec2 fragCoord, in vec3 fragRayOri, in vec3 fragRayDir )\n{\n    vec3 camPos = fragRayOri;\n    vec3 camDir = fragRayDir;\n    float t = 0., d = 0.000002;\n\tint j = 0;\n\t\n\tfor(int i = 0; i < 64; i++)\n\t{\n\t\tif(abs(d) < 0.000001 || t > 100.) continue;\n\t\td = dist2nearest(camPos + t * camDir);\n\t\tt += d;\n\t\tj = i;\n\t}\n\t\n\tfloat shade = 0.;\n\tif(abs(d) < 0.000001) shade = 1. - float(j) / 64.;\n\t\n\tfragColor = vec4(shade);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":true,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MsXXWn","date":"1398900913","viewed":457,"name":"The network","username":"matrefeytontias","description":"It started out as an experiment on Menger's Sponge. Well, it went quite a different route.","likes":9,"published":1,"flags":1,"usePreview":0,"tags":["3d","raymarching"],"hasliked":0,"parentid":"","parentname":""}}