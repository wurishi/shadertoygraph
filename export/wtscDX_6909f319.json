{"ver":"0.1","info":{"id":"wtscDX","date":"1593330487","viewed":174,"name":"Julia Stripes","username":"dashxdr","description":"Stripe Average Coloring","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["fractal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform float time;\n//uniform vec2 mouse;\n\n// dashxdr was here\n// Trying to implement Stripe Average Coloring for mandelbrot fractal\n// https://en.wikibooks.org/wiki/Fractals/Iterations_in_the_complex_plane/triangle_ineq\n// Then see the paper:\n// On Smooth Fractal Coloring Techniques master thesis by Jussi Haerkoenen\n\nvoid mainImage( out vec4 FragColor, in vec2 FragCoord) {\n\tvec2 v = (FragCoord.xy - iResolution.xy/2.0) / min(iResolution.y,iResolution.x);\n//\tv = surfacePosition;\n\tfloat zt = fract(iTime*.01);\n    zt=1.0-2.*min(zt,1.0-zt);\n    vec2 center = vec2(-0.39075330, 0.30274829);\n\tfloat zoom = (1.0+zt*16.)*.02374716/1.33333333;\n\tv*=zoom;v+=center; // sets initial point of interest\n\n\tvec2 m;// = mouse;\nm = vec2(0.42, 0.6); // uncomment this to mess with brightness + contrast\n\n\nvec2 z = v;\n    vec2 c = vec2(0.4, -.325);\n    float iter = 1.;\n    vec3 sum = vec3(0.0);\n    vec3 sum2;\n    float M = 200000.;\n    float M2=M*M;\n    #define N 60\n    for( int i=1;i<N;++i)\n    {\n        iter = float(i);\n        float angle = atan(z.y, z.x);\n        sum2 = sum;\n        sum  += sin(angle*vec3(7,9,6))*.5 + .5;\n        if(dot(z,z)>M2) break;\n        z = vec2(z.x*z.x - z.y*z.y, z.x*z.y + z.y*z.x) + c;\n    }\n    sum/=iter;\n    sum2/=iter-1.0;\n// thanks to iq for following mixing scheme...\n    float f = -log2(log(length(z))/log(M2));\n//\tif(FragCoord.x<iMouse.x) f=1.;\n    sum = mix(sum2, sum, clamp(f, 0. , 1.));\n    \n    vec3 color = sum*vec3(1.0,.9,.82);\n    color = (color - m.x)*(m.y*10.+1.);\n    if(dot(z,z)<M) color=vec3(0);\n    FragColor.rgb = color;\n    FragColor.a=1.0;\n}","name":"Image","description":"","type":"image"}]}