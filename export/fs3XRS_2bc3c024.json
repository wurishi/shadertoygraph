{"ver":"0.1","info":{"id":"fs3XRS","date":"1633401156","viewed":61,"name":"Experimenting With Circles","username":"mark_mckenna","description":"Floppy gears that never quite touch!","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["sdf","experiment","circle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.141592736;\n\n// cosine wave, normalized across (0..1) as phase moves across (0..1).\nfloat normCos(in float phase) {\n    return .5 + cos(2. * PI * phase)/2.;\n}\n\nvec2 normCos(in vec2 phase) {\n    return .5 + cos(2. * PI * phase)/2.;\n}\n\n// A radius that is sinusoidally modulated with the given strength and frequency.\nfloat lobed(vec2 pos, float radius, float minorRadius, float lobeCount, float orientation) {\n    return radius + minorRadius*cos(atan(pos.y,pos.x)*lobeCount + orientation);\n}\n\n// equation defining a circle based on its distance from the centre of the screen.\nfloat circle(vec2 pos) {\n    return length(pos);\n}\n\nfloat floppyGearShape(vec2 pos, float radius, float lobeCount, float orientation) {\n    float r = lobed(pos, radius, .05, lobeCount, orientation); // radius of underlying circle\n    return smoothstep(r,r+0.01, circle(pos));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1, based in lower-left)\n    vec2 p = fragCoord/iResolution.xy;\n    // Pixel coordinates based in the centre of the screen\n    vec2 q = p - vec2(.5,.5);\n    // Mouse cursor relative to centre of screen (while button is depressed)\n    vec2 mouse = iMouse.xy/iResolution.xy - vec2(.5, .5);\n\n    vec3 color = vec3(1, .4, .2); // main drawing colour\n    \n    // stack a few shapes\n    color *= floppyGearShape(q-vec2(0.25,0.), 0.2, 7., p.x*mouse.x*50. + mouse.y*50.);\n    color *= floppyGearShape(q+vec2(0.25,0.), 0.2, 7., -1.*p.x*mouse.x*50. + -1.*mouse.y*50. - 0.5);\n    color -= q.xxy;\n\n    // Output to screen\n    fragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}]}