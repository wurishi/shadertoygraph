{"ver":"0.1","info":{"id":"MccfRf","date":"1733326082","viewed":210,"name":"Akashic Resonance","username":"wyatt","description":"I can feel your energy from two planets away","likes":20,"published":3,"flags":32,"usePreview":0,"tags":["waves"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"Main {\n\n    Q = A(U)/float(iFrame);\n    Q = .8*atan(3.*Q);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define R iResolution.xy\n#define Main void mainImage(out vec4 Q, in vec2 U)\n#define A(U) texelFetch(iChannel0,ivec2(U),0)\n#define B(U) texelFetch(iChannel1,ivec2(U),0)\nfloat T;\n\n#define pi 3.14159265359\n#define ei(a) mat2(cos(a),sin(a),-sin(a),cos(a))\n\n\nvec4 scene (vec2 u) {\n\n    return 3.*exp(-1e2*dot(u,u))*vec4(1,0,1,0)+\n        -.3*exp(-2e3*dot(u-vec2(.7,.5),u-vec2(.7,.5)))*vec4(1,0,1,0)+\n        .3*exp(-3e2*dot(u-vec2(.3),u-vec2(.3)))*vec4(1,0,1,0);\n\n}\nvec4 hash(vec4 p4)\n{\n    p4 = fract(p4  * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\n\nMain {\n    T = iTime;\n    if (iFrame >= 6) discard;\n    int I = iFrame % ( 1 + 2 + 1 + 2 );\n    U = floor(U);\n    vec2 u = 2.*(U-.5*R)/R.y;\n    if (I == 0) {\n        // Phase Space\n        Q = scene(u);\n        Q.x = Q.x+.5*Q.y;\n        Q.y = 0.;\n        Q.z = Q.z+.5*Q.y;\n        Q.w = 0.;\n    } else if (I == 1) {\n        // x forward pass\n        Q = vec4(0);\n        vec2 w = 2.*pi*vec2(U)/R;\n        for (float i = 0.; i < R.x; i++) {\n            vec4 a = A(vec2(i,U.y));\n            Q.xy += a.xy*ei(w.x*i);\n            Q.zw += a.zw*ei(w.x*i);\n        }\n    } else if (I == 2) {\n        // y forward pass\n        Q = vec4(0);\n        vec2 w = 2.*pi*vec2(U)/R;\n        for (float i = 0.; i < R.y; i++) {\n            vec4 a = A(vec2(U.x,i));\n            Q.xy += a.xy*ei(w.y*i);\n            Q.zw += a.zw*ei(w.y*i);\n        }\n    } else if (I == 3) {\n        // Frequency Space\n        vec2 w = 2.*pi*(fract(vec2(U)/R+.5)*2.-1.);\n        Q = A(U);\n        Q.xy *= 3.*ei(100.*dot(w,w)+650.*length(w));\n        Q.zw *= 3.*ei(100.*dot(w,w)+650.*length(w));\n    } else if (I == 4) {\n        // x reverse pass\n        Q = vec4(0);\n        vec2 w = 2.*pi*vec2(U)/R;\n        for (float i = 0.; i < R.x; i++) {\n            Q.xy += A(vec2(i,U.y)).xy*ei(-w.x*i);\n            Q.zw += A(vec2(i,U.y)).zw*ei(-w.x*i);\n        }\n        Q /= R.x;\n    } else if (I == 5) {\n        // y reverse pass\n        Q = vec4(0);\n        vec2 w = 2.*pi*vec2(U)/R;\n        for (float i = 0.; i < R.y; i++) {\n            Q.xy += A(vec2(U.x,i)).xy*ei(-w.y*i);\n            Q.zw += A(vec2(U.x,i)).zw*ei(-w.y*i);\n        }\n        Q /= R.y;\n    }\n\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"Main {\n    Q = B(U);\n    if (iFrame==5) {\n    float n =length(A(U+vec2(0,1)).xy);\n    float e =length(A(U+vec2(1,0)).xy);\n    float s =length(A(U-vec2(0,1)).xy);\n    float w =length(A(U-vec2(1,0)).xy);\n    \n    Q.xyz = normalize(vec3(e-w,n-s,.1));\n    vec2 g = vec2(dFdx(Q.z),dFdy(Q.z));\n    Q.w = 1.+R.x*R.x*dot(g,g);\n    }\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"Main {\n    Q = B(U);\n    vec2 w = 3.*vec2(14,3);\n    U+=hash(vec4(iFrame,iTime,1,1)).xy;\n    if (iFrame>=5)\n    for (float i = 0.; i < 300.; i++) {\n        vec4 h = hash(vec4(iFrame,iTime,i,1));\n        vec2 u = U+.08*R.x*(h.xy*2.-1.);\n        vec4 a = texture(iChannel0,u/R);\n        u -= .1*R.x*a.xy;\n        Q += 10.*vec4(5,2,1,4)/a.w*exp(-10./a.w*dot(U-u,U-u));\n        u -= .06*R.x*a.xy;\n        Q += 10.*vec4(1,2,3,4)/a.w*exp(-10./a.w*dot(U-u-w,U-u-w));\n        u -= .03*R.x*a.xy;\n        Q += 10.*vec4(1,3,2,4)/a.w*exp(-10./a.w*dot(U-u+w*vec2(-1,1),U-u+w*vec2(-1,1)));\n        u -= .03*R.x*a.xy;\n        Q += 10.*vec4(2,3,1,4)/a.w*exp(-10./a.w*dot(U-u+w.yx,U-u+w.yx));\n    }\n    \n}","name":"Buffer C","description":"","type":"buffer"}]}