{"ver":"0.1","info":{"id":"tsXSR4","date":"1551480383","viewed":143,"name":"Simple phong shading","username":"dzxburning","description":"a","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["phong"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGzn","filepath":"/media/a/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","previewfilepath":"/media/ap/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","type":"cubemap","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 convCoords(vec2 oldCoords)\n{\n    return (oldCoords - iResolution.xy * 0.5) / iResolution.yy * 5.0;\n}\n\nvec3 sphereColor = vec3(1.0, 0.6, 0.6);\nvec3 light = vec3(4.0, 5.0, 8.0);\nvec3 eye = vec3(0.0, 0.0, -2.0);\nfloat shininess = 90.0;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 coordXY = convCoords(fragCoord);\n    vec2 mouse = convCoords(iMouse.xy);\n    \n    vec3 col;\n    vec3 spherePos = vec3(mouse, 0.0);\n    vec2 adjustedPos = coordXY - spherePos.xy;\n    \n    vec3 intersection = vec3(coordXY, sqrt(1.0 - dot(adjustedPos, adjustedPos)));\n\n    if (intersection.z <= 1.0) {\n        vec3 lightray = normalize(light - intersection);\n        vec3 normal = intersection - spherePos;\n        vec3 eyeray = normalize(eye - intersection);\n        vec3 reflectray = reflect(eyeray, normal);\n        \n        vec3 textureColor = mix(texture(iChannel0, reflectray).xyz, vec3(1.0), 0.8);\n        float difIntensity = dot(normal, lightray) * 0.8;\n        float ambIntensity = 0.35;\n        float speIntensity = max(pow(dot(reflect(lightray, normal), eyeray), shininess), 0.0);\n        \n        if (dot(normal, lightray) < 0.0) {\n            speIntensity = 0.0;\n            difIntensity = 0.0;\n        }\n        col = textureColor * sphereColor *\n              (difIntensity + ambIntensity + speIntensity);\n    } else {\n        col = mix(texture(iChannel0, vec3(coordXY, 3.0)).rgb, vec3(1.0), 0.2);\n    }\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}