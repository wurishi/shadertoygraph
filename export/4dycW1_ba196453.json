{"ver":"0.1","info":{"id":"4dycW1","date":"1521734592","viewed":111,"name":"Audio Spectrum","username":"isak","description":"audio spectrum","likes":0,"published":1,"flags":64,"usePreview":0,"tags":["audiospectrum"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsBSDw","filepath":"https://soundcloud.com/vanilla/swept-away","previewfilepath":"https://soundcloud.com/vanilla/swept-away","type":"musicstream","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float audio_power_f( in sampler2D channel, in float f, in float p) {\n    return texture( channel, vec2(f, p) ).x; \n}\n\n#define audio_power(x) audio_power_f(iChannel3, x, 0.0)\n#define audio_power_p(x,p) audio_power_f(iChannel3, x, p)\n#define pi 3.141592\n\nvec3 freq_bar(vec2 FC) {\n    vec2 uv = FC.xy / iResolution.xy;\n    float power = audio_power(uv.x);\n    \n \treturn smoothstep(power, 0.0, uv.y)*vec3(power,0.5,0.5);\n}\n\nvec3 freq_circle(vec2 FC) {\n \tvec2 uv = FC.xy - 0.5*iResolution.xy;\n    uv *= 2.0/iResolution.y;\n   \n    float angle = sign(uv.x)*atan(uv.x,uv.y);\n    \n    float power, power_c;\n    power_c = 1.0 - audio_power_p(angle/pi, 1.0) ;\n    power = audio_power( angle/pi );\n    \n    uv = 0.2*uv/(1.0- (1.7 + 0.3*power_c)*length(uv));\n    \n    \n\t\n    float ref_size = 0.2;\n    vec3 color;\n    float shade;\n    shade = smoothstep(0.2,power*0.8 + 0.25, length(uv));\n    shade *= smoothstep(0.0, 0.2+ 0.5*power, (1.0 - length(uv)));\n    \n    color = vec3(power*power_c, power*0.5 + 0.5, power_c + 0.4);\n    return shade*color;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 FC ) {\n    \n    \n    fragColor = vec4(freq_bar(FC), 1.0);\n    fragColor = vec4(freq_circle(FC), 1.0);\n    \n}","name":"Image","description":"","type":"image"}]}