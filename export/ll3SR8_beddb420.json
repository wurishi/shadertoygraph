{"ver":"0.1","info":{"id":"ll3SR8","date":"1478027171","viewed":370,"name":"1D wave","username":"rory618","description":"Use the mouse to pluck this string like one dimensional wave.\nThe left side is closed and reflects an opposite signal, and the right side is open and reflects the same signal.","likes":21,"published":1,"flags":32,"usePreview":0,"tags":["physics","greyscale","multipass"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 fx(float x){\n    \n    float a = texture(iChannel0, vec2(x-1., iResolution.y/2.) / iResolution.xy).x;\n    float b = texture(iChannel0, vec2(x, iResolution.y/2.) / iResolution.xy).x;\n    float c = texture(iChannel0, vec2(x+1., iResolution.y/2.) / iResolution.xy).x;\n    return vec2(b, (c-a)/2.);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 z = fragCoord-vec2(0., iResolution.y/2.);\n    float x = z.x;\n    vec2 fxv;\n    \n    float d = length(z-vec2(x,fx(x).x));\n    for(int i = 0; i < 5; i++){\n    \tfxv = fx(x);\n    \tx += (z.y-fxv.x+(z.x-x)/fxv.y)/(fxv.y+1./fxv.y);\n        \n    \td = min(d, length(z-vec2(x,fx(x).x)));\n    }\n    \n    \n    fragColor = vec4(d);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 t;\n    if(abs(fragCoord.y-iResolution.y/2.)<2.){\n        \n        vec4 l = texture(iChannel0, (fragCoord-vec2(2.5,0))/iResolution.xy);\n        t = texture(iChannel0, fragCoord/iResolution.xy);\n        vec4 r = texture(iChannel0, (fragCoord+vec2(2.5,0))/iResolution.xy);\n        \n        t = mix(t,(l+r)/2.,.01);\n        \n\t\tfloat DL = l.x-t.x;\n\t\tfloat DR = r.x-t.x;\n        t.y += (DL+DR)/2.;\n        t.x += t.y;\n        t.y *= .999;\n        fragColor = vec4(t.x,t.y,0,1);\n        \n    } else {\n    \tfragColor = vec4(1);\n    }\n    if(iMouse.z>0.){\n        float d = .5*exp(-.2*abs(fragCoord.x-iMouse.x));\n        float p = fragColor.x;\n        fragColor.x = mix(fragColor.x, (iMouse.y-iResolution.y/2.), d);\n    \tfragColor.y = mix(fragColor.y, fragColor.x-p, d);\n    }\n    if(fragCoord.x<1.){\n        fragColor.x = 0.;\n    \tfragColor.y = 0.;\n    }\n    if(iFrame == 0 && iResolution.y < 300.) {\n        fragColor.x = 10.*sin(fragCoord.x/30.);\n        fragColor.y = cos(fragCoord.x/30.);\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 t;\n    if(abs(fragCoord.y-iResolution.y/2.)<2.){\n        \n        vec4 l = texture(iChannel0, (fragCoord-vec2(2.5,0))/iResolution.xy);\n        t = texture(iChannel0, fragCoord/iResolution.xy);\n        vec4 r = texture(iChannel0, (fragCoord+vec2(2.5,0))/iResolution.xy);\n        \n        t = mix(t,(l+r)/2.,.01);\n        \n\t\tfloat DL = l.x-t.x;\n\t\tfloat DR = r.x-t.x;\n        t.y += (DL+DR)/2.;\n        t.x += t.y;\n        fragColor = vec4(t.x,t.y,0,1);\n        \n    } else {\n    \tfragColor = vec4(1);\n    }\n    if(iMouse.z>0.){\n        float d = .5*exp(-.2*abs(fragCoord.x-iMouse.x));\n        float p = fragColor.x;\n        fragColor.x = mix(fragColor.x, (iMouse.y-iResolution.y/2.), d);\n    \tfragColor.y = mix(fragColor.y, fragColor.x-p, d);\n    }\n    if(fragCoord.x<1.){\n        fragColor.x = 0.;\n    \tfragColor.y = 0.;\n    }\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 t;\n    if(abs(fragCoord.y-iResolution.y/2.)<2.){\n        \n        vec4 l = texture(iChannel0, (fragCoord-vec2(2.5,0))/iResolution.xy);\n        t = texture(iChannel0, fragCoord/iResolution.xy);\n        vec4 r = texture(iChannel0, (fragCoord+vec2(2.5,0))/iResolution.xy);\n        \n        t = mix(t,(l+r)/2.,.01);\n        \n\t\tfloat DL = l.x-t.x;\n\t\tfloat DR = r.x-t.x;\n        t.y += (DL+DR)/2.;\n        t.x += t.y;\n        fragColor = vec4(t.x,t.y,0,1);\n        \n    } else {\n    \tfragColor = vec4(1);\n    }\n    if(iMouse.z>0.){\n        float d = .5*exp(-.2*abs(fragCoord.x-iMouse.x));\n        float p = fragColor.x;\n        fragColor.x = mix(fragColor.x, (iMouse.y-iResolution.y/2.), d);\n    \tfragColor.y = mix(fragColor.y, fragColor.x-p, d);\n    }\n    if(fragCoord.x<1.){\n        fragColor.x = 0.;\n    \tfragColor.y = 0.;\n    }\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 t;\n    if(abs(fragCoord.y-iResolution.y/2.)<2.){\n        \n        vec4 l = texture(iChannel0, (fragCoord-vec2(2.5,0))/iResolution.xy);\n        t = texture(iChannel0, fragCoord/iResolution.xy);\n        vec4 r = texture(iChannel0, (fragCoord+vec2(2.5,0))/iResolution.xy);\n        \n        t = mix(t,(l+r)/2.,.01);\n        \n\t\tfloat DL = l.x-t.x;\n\t\tfloat DR = r.x-t.x;\n        t.y += (DL+DR)/2.;\n        t.x += t.y;\n        fragColor = vec4(t.x,t.y,0,1);\n        \n    } else {\n    \tfragColor = vec4(1);\n    }\n    if(iMouse.z>0.){\n        float d = .5*exp(-.2*abs(fragCoord.x-iMouse.x));\n        float p = fragColor.x;\n        fragColor.x = mix(fragColor.x, (iMouse.y-iResolution.y/2.), d);\n    \tfragColor.y = mix(fragColor.y, fragColor.x-p, d);\n    }\n    if(fragCoord.x<1.){\n        fragColor.x = 0.;\n    \tfragColor.y = 0.;\n    }\n}","name":"Buffer D","description":"","type":"buffer"}]}