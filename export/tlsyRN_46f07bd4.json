{"ver":"0.1","info":{"id":"tlsyRN","date":"1591591265","viewed":138,"name":"2.5D Water Progress Bar 2","username":"salvicode","description":"Forked from https://www.shadertoy.com/view/Mddfzr.\nMade it like progress bar is being filled with liquied.\nAdded background video and filling texture.","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["2d","reflection","simple","pixel","water","progress","waving"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsX3Rn","filepath":"/media/a/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","previewfilepath":"/media/ap/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec4 drawWater(vec4 water_color, sampler2D color, sampler2D background, float transparency, float height, float angle, float wave_strength, float wave_ratio, vec2 uv);\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    \n    float WATER_HEIGHT = abs(sin(iTime * 0.5));\n    vec4 WATER_COLOR = vec4(0.5, 0.5, 0.53, 1.0);\n    float WAVE_STRENGTH = 3.0;\n    float WAVE_FREQUENCY = 8.0;\n    float WATER_TRANSPARENCY = 0.4;\n    float WATER_ANGLE = 2.0;\n    \n    fragColor = drawWater(WATER_COLOR, iChannel0, iChannel1, WATER_TRANSPARENCY, WATER_HEIGHT, WATER_ANGLE, WAVE_STRENGTH, WAVE_FREQUENCY, uv);\n}\n\nvec4 drawWater(vec4 water_color, sampler2D color, sampler2D background, float transparency, float height, float angle, float wave_strength, float wave_frequency, vec2 uv)\n{\n    angle *= uv.y/height+angle/1.5; //3D effect\n    wave_strength /= 1000.0;\n    float wave = sin(10.0*uv.y+10.0*uv.x+wave_frequency*iTime)*wave_strength;\n    wave += sin(20.0*-uv.y+20.0*uv.x+wave_frequency*1.0*iTime)*wave_strength*0.5;\n    wave += sin(15.0*-uv.y+15.0*-uv.x+wave_frequency*0.6*iTime)*wave_strength*1.3;\n    wave += sin(3.0*-uv.y+3.0*-uv.x+wave_frequency*0.3*iTime)*wave_strength*10.0;\n    \n    if(uv.y - wave <= height)\n        return mix(\n                    mix(\n                        texture(background, vec2(uv.x, ((1.0 + angle)*(height + wave) - angle*uv.y + wave))), water_color,\n                        0.6-(0.3-(0.3*uv.y/height))\n                    ),\n        \t\ttexture(color, vec2(uv.x + wave, uv.y - wave)),\n        \t\ttransparency-(transparency*uv.y/height)\n        );\n    else\n        return texture(background, uv);\n}","name":"Image","description":"","type":"image"}]}