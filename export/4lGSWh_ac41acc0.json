{"ver":"0.1","info":{"id":"4lGSWh","date":"1483994397","viewed":447,"name":"Spectrum Spiral","username":"XRNZ","description":"spiral made of circles of increasing radius, with circle color varying with time and distance to circle center","likes":15,"published":1,"flags":0,"usePreview":0,"tags":["procedural","2d","spectrum","spiral"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//spiral made of circles of increasing radius\n//with circle color varying with time and distance to circle center\n\n// Falloff : attenuation en fonction de la distance\n// x : distance\n// r : distance limite\n// a : coefficient de ponderation\nfloat Falloff(in float x,in float r,in float a)\n{\n    if (x<r)\n    {\n        float t = x / r;\n        return a*(1.0-t*t)*(1.0-t*t)*(1.0-t*t);\n    }\n    else\n    {\n        return 0.0;\n    }\n}\n\n// Cercle\n// c  : Centre\n// r  : Rayon\n// uv : position pixel\n// old : ancienne couleur\nvec4 Circle(in vec2 c,in float r, in vec2 uv)\n{\n  float L=length(uv-c);\n \n  // Dans le cercle si distance < rayon\n  if (L<r)\n  {  \n      //chaque couleur varie en fonction de la distance au centre L\n      //et en fonction du temps, avec desynchronisation\n      \n       float red = 0.5*sin((-iTime*1.0+10.0*L)+1.0);\n       float green = 0.5*sin((-iTime*2.0+20.0*L)+1.0);\n       float blue = 0.5*sin((-iTime*3.0+30.0*L)+1.0);\n     \n    return Falloff(L,r,1.0)*vec4(red, green, blue, 1.0);\n  }\n  // Else ancienne couleur\n  else\n  {\n    return vec4(0.0);\n  }\n}\n\n\n// Image\nvoid mainImage( out vec4 col, in vec2 p )\n{\n\n  //parametre :\n    \n  const float circle_size = 0.01;\n    \n  //spirale de cercles de rayon croissant\n    \n  vec2 uv = (p.xy-iResolution.xy/vec2(2.0)) / iResolution.y;\n    \n  vec4 circ = vec4(.0,.0,.0,1.);\n\n  for (int k=0;k<int(1.0/circle_size);k++)\n  {\n  \tvec2 q=(circle_size*float(k))*vec2(cos(0.5*float(k)),sin(0.5*float(k)));\n   \n \t circ += Circle(q,circle_size*float(k),uv);\n  }\n    \n  col = circ; \n}","name":"Image","description":"","type":"image"}]}