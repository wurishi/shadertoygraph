{"ver":"0.1","info":{"id":"tdB3RD","date":"1548269226","viewed":69,"name":"Test Icone Rotatif","username":"IvanK","description":"Test icones rotatif (animation d'attente)","likes":2,"published":1,"flags":16,"usePreview":0,"tags":["animation","shader","icone","etoile"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n*\n*\n*\n*\n*/\n\n// nombre de branche\n#define NB_BR 15.0\n\n// delta temp de l'anim 01 (effet de rotation des branche)\n#define DT_1  0.5\n// delta temp de l'anim 02 (effet de variation de volume des branches)\n#define DT_2  0.9\n// delta temp de l'anim 03 (unused) \n#define DT_3 -0.5\n// delta temp de l'anim 04 (unused) \n#define DT_4  0.5\n//\n#define R_A  0.15\n#define R_B  0.3\n//#define DT_2  0.5\n//#define DT_2  0.5\n//#define DT_2  0.5\n//#define DT_2  0.5\n#define DT03 -0.5\n#define DT04  0.9\n\n\n\n\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n     // parametre\n    float nf = NB_BR; // nombre de branche\n    vec4  dt = vec4(DT_1, DT_2, DT_3, DT_4 );\n    \n    \n    float dx = 0.1;\n    float iratio = iResolution.y/iResolution.x; // ratio de l'ecran\n    float delta = 0.01; // smooth du bord de l'étoile\n    float dy = 0.5;\n    float dyb = 0.75;\n    //float seuil0 = 0.3;\n    float seuil1 = 0.3;\n    \n    \n    // Normalized pixel coordinates (from 0 to 1)\n    //vec2 uv = fragCoord/iResolution.xy;\n    vec2 uv = (2.0*fragCoord - iResolution.xy) / iResolution.y;\n    \n\n      \n\t// orange colors\n    vec3 col = vec3(0.8, 0.2, 0.0);\n    \n    mediump vec4 tex0 = (texture( iChannel0, uv ));\n    \n    // calcul vecteur par rapport centre de l'image\n    vec2 dec = uv /*- .5*/; // racourci d'écriture\n    // vecteur a ratio corrigé\n    vec2 dec1 = vec2(dec.x, dec.y*iratio);\n    vec2 dec2 = vec2(dec.x*iratio, dec.y);\n    \n    vec2 decb = dec - dyb*vec2(cos(iTime/dt.w), sin(iTime/dt.w)); \n    //vec2 decb = vec2(dec.x-dyb*sin(iTime/dt2), dec.y-dyb*cos(iTime/dt2)/**iratio*/);\n    //\n   \n    //float atn = atan(deca.x, deca.y);\n    float atn1 = atan(dec.y, dec.x);\n    //float atni1 = atan(dec.y, dec.x);\n                     \n    //float atn2 = atan(dec.y, dec.x);\n    //float atni2 = atan(dec.y, dec.x)+ iTime/dt3;\n                     \n    float atn3 = atan(decb.y, decb.x);\n    //float atni3 = atan(decb.y, decb.x);\n    //float atn4 = atan(decb.y, decb.x)+ iTime/dt1;\n    //float atni4 = atan(decb.y, decb.x)+ iTime/dt1;\n    \n    float varn = nf/*+cos(atni1+sin((iTime/dt1)))*/;\n    float varb = cos(atn1+iTime/dt.y)+dy/*dec.y*iratio*/;;\n    // calcul de la distance appartenant a l'étoile\n    //float r = 0.15 + ( 0.106*length((cos(atn1*(varn)+ iTime/dt3)+ varb)*dec1));\n    float r = R_B + R_A*(cos(atn1*(varn)+ iTime/dt.x)+ varb);\n    \n    //float r = 0.15 + 0.03*(cos(atn1*nf+iTime/dt1))*(cos(iTime/dt2)*cos(atn1)+dy);\n    //float r = 0.15 + 0.015*(cos(atn2*nf)/*/(atn1*dx)*/);\n    \n    // generation etoile\n    float bord = length(dec) - r;\n    col*=  smoothstep(delta, 0.0, bord/fwidth(bord) );\n    //col*=  smoothstep(r, r-delta, length(dec));\n    //\n    float mag = distance(vec3(0.0,0.0,0.0), col);\n    //float mag = distance(0.0, col); // ne marche pas !\n    \n    //col*= uv.y;\n    //test affichage étoile ou fond d'ecran\n    if(mag >= seuil1)\n    { \n        col = col;\n    }\n    else\n    { \n        col = tex0.xyz; \n    }\n        \n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}