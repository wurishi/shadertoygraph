{"ver":"0.1","info":{"id":"Nljfzd","date":"1652631948","viewed":104,"name":"2d ellipse","username":"jorge2017a2","description":"2d ellipse","likes":5,"published":1,"flags":8,"usePreview":0,"tags":["2d","2dellipse"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//por jorge2017a2\n\n//referencia\n//https://iquilezles.org/articles/distfunctions2d\n///\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n#define S(d,b) smoothstep(antialiasing(0.8),b,d)\n#define S2(d,b) smoothstep(8.0*antialiasing(2.0),b,d)\n#define PI     3.14159265\n#define TWO_PI 6.28318530\n\nfloat opRep1D( float p, float c )\n\t{ float q = mod(p+0.5*c,c)-0.5*c; return  q ;}    \n\nfloat intersectSDF(float distA, float distB)\n\t{ return max(distA, distB);}\nfloat unionSDF(float distA, float distB)\n\t{ return min(distA, distB);}\nfloat differenceSDF(float distA, float distB)\n\t{ return max(distA, -distB);}\n\n\nvec3 DrawFigBorde(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S2( distObj,0.0));\n  colOut = mix(colOut,vec3(0.0) ,S2(abs( distObj)-0.005,0.0));\n  return colOut;\n}\n\nvec2 rotatev2(vec2 p, float ang)\n{   float c = cos(ang);\n    float s = sin(ang);\n    return vec2(p.x*c - p.y*s, p.x*s + p.y*c);\n}\n\nfloat sdBox( in vec2 p, in vec2 b )\n{ vec2 d = abs(p)-b;  return length(max(d,0.0)) + min(max(d.x,d.y),0.0);  }\n\nfloat sdCircle( vec2 p, float r )\n{ return length(p) - r;}\n\n//por jorge\nfloat sdEllipseMia( vec2 p,vec2 pos,vec2 foco , float r )\n{ \n    return (p.x-pos.x)*(p.x-pos.x)/foco.x + (p.y-pos.y)*(p.y-pos.y)/foco.y  - r;\n}\n\nvec3 RostroBasico(vec2 uv, vec3 colOut)\n{\n    vec3 col=colOut;\n    float t=iTime;\n    float dOjoIzqa= sdEllipseMia(uv,vec2(-2.0,3.0),vec2(1.,2.0-1.5*abs(sin(t))) , 1.5 );\n    float dOjoIzqb= sdEllipseMia(uv,vec2(-2.0,3.0),vec2(1.,2.0-1.5*abs(sin(t))) , 1.2 );\n    float dPupilaIzqa= sdEllipseMia(uv,vec2(-2.0,3.0),vec2(1.0,2.0) , 0.125 );\n    \n    \n    float dOjoDera= sdEllipseMia(uv,vec2(2.0,3.0),vec2(1.,2.0-1.5*abs(sin(t))) , 1.5 );\n    float dOjoDerb= sdEllipseMia(uv,vec2(2.0,3.0),vec2(1.,2.0-1.5*abs(sin(t))) , 1.2 );\n    float dPupilaDera= sdEllipseMia(uv,vec2(2.0,3.0),vec2(1.0,2.0) , 0.125 );\n    \n    //oreja\n    float dOrejaIzqa= sdEllipseMia(rotatev2(uv-vec2(2.5,1.5),-45.),vec2(0.0,6.0),vec2(2.0,3.0) , 1.0 );\n    float dOrejaIzqb= sdEllipseMia(rotatev2(uv-vec2(2.5,1.5),-45.),vec2(0.0,6.0),vec2(2.0,3.0) , 0.6 );\n    \n    float dOrejaDera= sdEllipseMia(rotatev2(uv-vec2(-2.5,1.5),45.),vec2(0.0,6.0),vec2(2.0,3.0) , 1.0 );\n    float dOrejaDerb= sdEllipseMia(rotatev2(uv-vec2(-2.5,1.5),45.),vec2(0.0,6.0),vec2(2.0,3.0) , 0.6 );\n    //Nariz\n    float dNarizDer= sdEllipseMia(uv,vec2(-0.5,2.0),vec2(0.25,0.5) , 0.5 );\n    float dNarizIzq= sdEllipseMia(uv,vec2( 0.5,2.0),vec2(0.25,0.5) , 0.5 );\n    //rostro\n    float dRostroa= sdEllipseMia(uv,vec2(0.0,3.0),vec2(7.5,4.0) , 1.5 );\n    float dRostrob= sdEllipseMia(uv,vec2(0.0,0.0),vec2(8.5,3.0) , 1.5 );\n    \n    float dBocaa= sdEllipseMia(uv,vec2(0.0),vec2(2.5,0.505+0.5*sin(t)) , 2.0 );\n    float dBocab= sdEllipseMia(uv,vec2(0.0),vec2(2.5,0.505+0.5*sin(t)) , 1.7 );\n    \n    col= DrawFigBorde(vec3(0.5), col, dOrejaIzqa);\n    col= DrawFigBorde(vec3(0.0), col, dOrejaIzqb);\n    col= DrawFigBorde(vec3(0.5), col, dOrejaDera);\n    col= DrawFigBorde(vec3(0.0), col, dOrejaDerb);\n    \n    col= DrawFigBorde(vec3(0.5), col, dRostroa);\n    col= DrawFigBorde(vec3(0.8), col, dRostrob);\n    \n    col= DrawFigBorde(vec3(0.0), col, dNarizDer);\n    col= DrawFigBorde(vec3(0.0), col, dNarizIzq);\n    \n    col= DrawFigBorde(vec3(0.0), col, dOjoIzqa);\n    col= DrawFigBorde(vec3(1.0), col, dOjoIzqb);\n    col= DrawFigBorde(vec3(0.0), col, dPupilaIzqa);\n    \n    col= DrawFigBorde(vec3(0.0), col, dOjoDera);\n    col= DrawFigBorde(vec3(1.0), col, dOjoDerb);\n    col= DrawFigBorde(vec3(0.0), col, dPupilaDera);\n    \n    col= DrawFigBorde(vec3(0.0,0.0,0.0), col, dBocaa);\n    col= DrawFigBorde(vec3(1.0,0.0,0.0), col, dBocab);\n    return col;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = -1.0 + 2.0 * fragCoord.xy/iResolution.xy;\n\tuv.x *= iResolution.x/iResolution.y;\n    uv-=vec2(0.0,-0.5);\n    float esc=8.0;\n    uv*=esc;\n    vec2 uv0=uv;\n    vec3 col=vec3(1.0);\n    \n    float t=iTime*7.0;\n    //uv.y+=iTime*7.0;\n    \n    vec2 uvnew3=uv*4.0-vec2(0.5,1.2-t);\n    uvnew3.x= opRep1D(uvnew3.x, 10. );\n    uvnew3.y= opRep1D(uvnew3.y, 12.5 );\n    col= RostroBasico(uvnew3,col);    \n    \n    vec2 uvnew2=uv*2.0-vec2(0.5,1.2+t*0.5);\n    uvnew2.x= opRep1D(uvnew2.x, 10. );\n    uvnew2.y= opRep1D(uvnew2.y, 12.5 );\n    col= RostroBasico(uvnew2,col);    \n    \n    vec2 uvnew=uv+vec2(0.0,t);\n    uvnew.x= opRep1D(uvnew.x, 10. );\n    uvnew.y= opRep1D(uvnew.y, 12.5 );\n    \n    col= RostroBasico(uvnew,col);    \n    \n    col=pow(col,  vec3(0.554545));\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"//por jorge2017a2\n///referencia\n///----https://www.shadertoy.com/view/7t3XRl----Created by gaz in 2021-12-15\n\n// 音源関係\n#define PI acos(-1.)\n#define PIH (PI*.5)\n#define TAU (PI*2.)\n#define osc_sin(x)sin((x)*TAU)\n#define osc_saw(x)(1.-fract(x)*2.)\n#define osc_sqr(x)sign(0.5-fract(x))\n#define osc_tri(x)(asin(sin((x)*PI))/PIH)\n \nfloat noize(float t,  float a, float b){\n    float g=fract(cos(t*exp2(a))*exp2(b))+6.0;\n    return exp(-0.08*g*g) *40.0-1.;\n}\n\nfloat kick(float t)\n{\n    return clamp(1.5*asin(cos(320.0*t-30.0*exp(-40.0*t))),-1.,1.)*exp(-4.*t);\n}\n\nfloat snare(float t)\n{\n    float n=noize(t,10.,10.)*exp(-t*10.), f=t*160.,a=.3*osc_tri(1.2*f)*exp(-t*3.);\n    float b=.05*osc_sin(10.*f+a)*exp(-t*3.);\n    float c=osc_sin(f+b)*exp(-t*15.), z;\n    return n+c;\n}\n\nfloat hihat(float t){\n    return noize(t,10.,18.)*exp(-t*15.);\n}\n\nfloat piano(float t,float f){\n    float g=0.,a,b=0.;\n    f*=t;\n    for(float j=1.;j<5.;j++){\n        b+=a=exp(-j*.5);\n        g+=a*osc_sin(f*j)*exp(-t*1.8/(2.-j*.1));\n    }\n    g*=1.+1.2*exp(-5.*t);\n    return g/b;\n}\n\nfloat lead(float t,float f)\n{\n    f *= t;\n    return clamp((\n        8.0*osc_saw(f)\n        + 2.0*osc_sin(f*2.0)\n        + osc_tri(f*3.0)\n    )/3.0,-1.,1.)*exp(-3.*t);\n}\n\nfloat base(float t,float f){\n    f *= t;\n    return clamp((\n        8.0*osc_sqr(f)\n        + 3.0*osc_saw(f*2.0)\n        + osc_sin(f*3.0)\n    )/2.0,-1.,1.)*exp(-4.*t);\n}\n\n// シーケンスのマクロ\n\n#define C3  60\n#define Cs3 61\n#define D3  62\n#define Ds3 63\n#define E3  64\n#define F3  65\n#define Fs3 66\n#define G3  67\n#define Gs3 68\n#define A3  69\n#define As3 70\n#define B3  71\n#define C4  72\n#define Cs4 73\n#define D4  74\n#define Ds4 75\n#define E4  76\n#define F4  77\n#define Fs4 78\n#define G4  79\n#define Gs4 80\n#define A4  81\n#define As4 82\n#define B4  83\n\n\nvec2 mainSound( int samp, float time )\n{\n      float t1=mod(time, 2.0);\n    float t2=mod(time, 0.5);\n    \n    \n    float t3a=mod(time, 4.5);\n    float t3b=mod(t3a, 3.5);\n    float t3c=mod(t3b, 2.5);\n    float t3d=mod(t3a+t3c, 2.5);\n    \n    \n    float k1=kick(t1);\n    float s1= snare(t2);\n    \n    float l1= lead(t3a,200.0);\n    float l2= lead(t3b,250.0);\n    float l3= lead(t3c,500.0);\n    float l4= lead(t3d,600.0);\n    float ltot=(l1+l2+l3+l4)/3.0;\n    \n    \n    return vec2(k1+s1+ltot)*0.25;\n    \n}","name":"Sound","description":"","type":"sound"}]}