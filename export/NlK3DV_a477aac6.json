{"ver":"0.1","info":{"id":"NlK3DV","date":"1700544713","viewed":23,"name":"PlaneTestTest","username":"caorenxxy","description":"Plane","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["plane"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI \t\t\t3.14159265359\n\n#define FOV \t\t60.0\n#define EPSILON\t\t0.001\n#define MAX_STEPS\t1000\n#define MAX_DIST\t1000.0\n#define PLANE\t\tvec4 (0.0, 1.0, 0.0, 2.5)\n\n\n#define WIDTH 1000.0\n#define HEIGHT 200.0\n\nfloat sdPlane (vec3 pt, vec4 pl) {\n\treturn dot (pl.xyz, pt) + pl.w;\n}\n\n\nfloat map (vec3 pt) { \n\treturn sdPlane(pt, PLANE);\n}\n\nfloat march (vec3 ro, vec3 rd) {\n\tfloat t = 0.0;\n\tfloat d = 0.0;\n\tvec3 pt = vec3 (0.0);\n\tfor (int i = 0; i < MAX_STEPS; ++i) {\n\t\tpt = ro + rd * t;\n\t\td = map (pt); \n\t\tif (d < EPSILON || t + d >= MAX_DIST) {\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\tt += d;\n\t}\n\t\n\treturn d <= EPSILON ? t : MAX_DIST;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n  \n\tvec3 ro = vec3( 0.0, 0.0, 1.0 );\n    vec3 ta = vec3(0, 0, 0);\n    vec3 ww = normalize( ta - ro );\n    vec3 uu = normalize( cross(ww,vec3(0.0,1.0,0.0) ) );\n    vec3 vv = normalize( cross(uu,ww));\n    \n    \n    float focusDis = 10.0;\n    float fov = radians(45.0);\n    vec2 p = (-iResolution.xy + 2.0*fragCoord)/iResolution.y;\n    vec3 rd = normalize( p.x*uu + p.y*vv + 1.5*ww );\n    \n    float t = march(ro, rd);\n    vec3 isectP = ro + rd * t;\n    if(t > 0.0 && t < 100.0 && isectP.x > -4.5 && isectP.x < 4.5 && isectP.z > -8.5){\n        fragColor = vec4(1, 1, 1, 1);\n    }\n    else {\n        fragColor = vec4(0, 0, 0, 1);\n    }\n}","name":"Image","description":"","type":"image"}]}