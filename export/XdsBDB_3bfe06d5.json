{"ver":"0.1","info":{"id":"XdsBDB","date":"1497929706","viewed":1092,"name":"liquid marble","username":"duvengar","description":"Playing around noise and fbm.","likes":37,"published":1,"flags":0,"usePreview":0,"tags":["noise","fbm","texture","liquid","marble"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//// COLORS ////\n\nconst vec3 ORANGE = vec3(1.0, 0.6, 0.2);\nconst vec3 PINK   = vec3(0.7, 0.1, 0.4); \nconst vec3 BLUE   = vec3(0.0, 0.2, 0.9); \nconst vec3 BLACK  = vec3(0.0, 0.0, 0.2);\n\n///// NOISE /////\n\nfloat hash( float n ) {\n    //return fract(sin(n)*43758.5453123);   \n\treturn fract(sin(n)*75728.5453123); \n}\n\n\nfloat noise( in vec2 x ) {\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n    f = f*f*(3.0-2.0*f);\n    float n = p.x + p.y*57.0;\n    return mix(mix( hash(n + 0.0), hash(n + 1.0), f.x), mix(hash(n + 57.0), hash(n + 58.0), f.x), f.y);\n}\n\n////// FBM ////// \n\nmat2 m = mat2( 0.6, 0.6, -0.6, 0.8);\nfloat fbm(vec2 p){\n \n    float f = 0.0;\n    f += 0.5000 * noise(p); p *= m * 2.02;\n    f += 0.2500 * noise(p); p *= m * 2.03;\n    f += 0.1250 * noise(p); p *= m * 2.01;\n    f += 0.0625 * noise(p); p *= m * 2.04;\n    f /= 0.9375;\n    return f;\n}\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    \n    // pixel ratio\n    \n\tvec2 uv = fragCoord.xy / iResolution.xy ;  \n    vec2 p = - 1. + 2. * uv;\n    p.x *= iResolution.x / iResolution.y;\n \t\n    // domains\n    \n    float r = sqrt(dot(p,p)); \n    float a = cos(p.y * p.x);  \n           \n    // distortion\n    \n    float f = fbm( 5.0 * p);\n    a += fbm(vec2(1.9 - p.x, 0.9 * iTime + p.y));\n    a += fbm(0.4 * p);\n    r += fbm(2.9 * p);\n   \t\n    // colorize\n    \n    vec3 col = BLUE;\n    \n    float ff = 1.0 - smoothstep(-0.4, 1.1, noise(vec2(0.5 * a, 3.3 * a)) );        \n    col =  mix( col, ORANGE, ff);\n       \n    ff = 1.0 - smoothstep(.0, 2.8, r );\n    col +=  mix( col, BLACK,  ff);\n    \n    ff -= 1.0 - smoothstep(0.3, 0.5, fbm(vec2(1.0, 40.0 * a)) ); \n    col =  mix( col, PINK,  ff);  \n      \n    ff = 1.0 - smoothstep(2., 2.9, a * 1.5 ); \n    col =  mix( col, BLACK,  ff);  \n                                           \n    fragColor = vec4(col, 1.);\n}\n","name":"Image","description":"","type":"image"}]}