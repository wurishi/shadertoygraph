{"ver":"0.1","info":{"id":"wlfBzS","date":"1597424895","viewed":77,"name":"kikyoumon with ripples","username":"surffer3d","description":"Playong with SDF","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["test"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float box(vec2 uv, vec2 sz) {\n    vec2 a = abs(uv) - sz;\n    return max(a.x, a.y);\n}\n\n\nfloat circle(vec2 uv, float r) {\n    return length(uv) - r;\n}\n\n\nfloat polygon(vec2 uv, float r, float sides) {\n    float sect = 2.0*3.14159 / sides;\n    float angle = sides * (atan(uv.y, uv.x) / 6.2831 + 0.5);\n    float fangle = fract(angle);\n    float d = length(uv);\n    float L = r * (1.0 - 2.0 * cos(sect*0.5));\n    float D = L / tan(sect*0.5);\n    float H = D * tan(abs(fangle-0.5)*sect);\n    float d2 = sqrt(H*H+D*D);\n    return d - d2;\n}\n\nfloat flower(vec2 uv, float r, float sides) {\n    float sect = 2.0*3.14159 / sides;\n    float angle = sides * (atan(uv.y, uv.x) / 6.2831 + 0.5);\n    float fangle = fract(angle);\n    float d = length(uv);\n    float L = r * (1.0 - 2.0 * cos(sect*0.5));\n    float D = L / tan(sect*0.5);\n    float H = D * tan(abs(fangle-0.5)*sect);\n    float d2 = sqrt(H*H+D*D);\n    \n    float u = 1.0-abs(fangle-0.5)*2.0;\n    u = max(u-0.5, 0.0)/0.5;\n    float m = pow(u,2.5)*0.15;\n    \n    return d - d2 + m;\n}\n\n\nfloat plot(float uv, float v) {\n    float w = 0.005 + fwidth(uv);\n    return smoothstep(v-w, v, uv) - smoothstep(v, v+w, uv);\n}\n\nfloat merge(float A, float B) {\n    return min(A, B);\n}\n\nfloat intersect(float A, float B) {\n    return max(A, B);\n}\n\nfloat substract(float A, float B) {\n    return intersect(A,-B);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    uv.x *= iResolution.x / iResolution.y;\n    uv *= 5.0;\n    vec2 fuv = fract(uv);\n\n    // Time varying pixel color    \n    uv = fragCoord/iResolution.xy;\n    uv = uv*2.0 - 1.0;\n    uv.x *= iResolution.x / iResolution.y;\n    \n    float c = cos(iTime*0.2);\n    float s = sin(iTime*0.2);\n    c = cos(-3.14159/2.0);\n    s = sin(-3.14159/2.0);\n    uv = mat2(c,-s,s,c) * uv;\n    \n    \n    \n    // Modify uv to make ripple effect\n    vec2 vpos[] = vec2[]( vec2(0.65,0.7), vec2(-0.65, 0.5), vec2(-0.75, -0.4));\n    float vstrength[] = float[]( 0.958, 0.675, 0.875 );\n    float waveMod = 1.0 + (0.5*sin(iTime*0.437)+0.5)*2.0;\n    for (int i=0; i<3; i++) {\n        const int N = 8;\n        for (int j=0; j<N; j++) {\n            vec2 dir = uv - vpos[i];\n            float rd = length(dir);\n            float duration = vstrength[i]*2.0;\n            float rr = mod((iTime+duration)*0.25, duration);\n            float ff = duration - rr;\n            float fd = vstrength[i] * 0.5;\n            float wave = waveMod*0.025 + float(j)*0.001;\n            float waved = 0.075+0.0025*float(j);\n            uv = uv - smoothstep(wave, 0.0, abs(rd-max(rr-waved*float(N-j),0.0))) * normalize(dir)*fd*ff/float(1+N);\n        }\n    }\n    \n    \n    float d = 0.0;\n    d = circle(uv, 0.6);\n    d = substract(d, circle(uv, 0.55));\n    d = merge(d, flower(uv, 0.5, 5.0));\n    d = substract(d, circle(uv, 0.075));\n    for (int i=0; i<5; i++) {\n        vec2 st = uv;\n        c = cos(float(i)*3.15159*2.0/5.);\n        s = sin(float(i)*3.15159*2.0/5.);\n        st = mat2(c,-s,s,c) * st;\n        st -= vec2(0.25, 0.0);\n        d = substract(d, box(st,vec2(0.2,0.02)));\n        \n        st = uv;\n        c = cos((float(i)+0.5)*3.15159*2.0/5.);\n        s = sin((float(i)+0.5)*3.15159*2.0/5.);\n        st = mat2(c,-s,s,c) * st;\n        st -= vec2(0.05, 0.0);\n        d = substract(d, box(st,vec2(0.1,0.01)));\n    }\n    \n    d = merge(d, circle(uv, 0.05));\n    \n    \n    //vec3 col = vec3(1.0) * plot(d, 0.0);\n    vec3 col = vec3(1.0) * (1.0-smoothstep(0.0, 0.0+fwidth(d), d));\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}