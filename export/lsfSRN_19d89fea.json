{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#define CLOCK_BORDER 2.0\n#define POINTER_WIDTH 2.0\n\n#define EPS 2.\n#define PI 3.14159\n#define D2R(_d) ((_d)*PI/180.0)\n\nfloat draw_pointer(vec2 rel_pos,float angle,float pt_len)\n{\n\tfloat r=length(rel_pos);\n\tvec2 pt_axis=vec2(cos(angle),sin(angle));\n\tvec2 pt_perp_axis=vec2(-sin(angle),cos(angle));\n\t\n\tif(dot(rel_pos,pt_axis)>0.)\n\t{\n\t\tfloat d=abs(dot(rel_pos,pt_perp_axis));\n\t\treturn smoothstep(pt_len+EPS,pt_len,r)*\n\t\t\tsmoothstep(POINTER_WIDTH+EPS,POINTER_WIDTH,d);\n\t}\n\treturn 0.;\n}\n\nfloat draw_circle(float R,float border,float r)\n{\n\treturn smoothstep(border+EPS,border,abs(r-R));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tfloat CLOCK_R=0.4*min(iResolution.x,iResolution.y);\n\tfloat CLOCK_CX=0.5*iResolution.x,CLOCK_CY=0.5*iResolution.y;\n\n\tvec2 rel_pos=fragCoord.xy-vec2(CLOCK_CX,CLOCK_CY);\n\tfloat r=length(rel_pos);\n\tfloat scale=0.;\n\tvec4 color=vec4(0.);\n\t\n\tif((scale=draw_circle(CLOCK_R,CLOCK_BORDER,r))>0.)\n\t\tcolor = vec4( 1.0, 0.0, 0.0, 1.0 );\n\telse\n\t{\n\t\tfloat t=iDate.w;\n\t\tfloat h=t/3600.0;\n\t\tt-=floor(h)*3600.0;if(h>12.0) h-=12.0;\n\t\tfloat m=t/60.0;\n\t\tfloat s=t-floor(m)*60.0;\n\t\tfloat h_angle=90.0-h*360.0/12.0;\n\t\tfloat m_angle=90.0-m*6.0;\n\t\tfloat s_angle=90.0-s*6.0;\n\t\t\n\t\tif((scale=draw_pointer(rel_pos,D2R(s_angle),0.9*CLOCK_R))>0.)\n\t\t\tcolor = vec4( 0.0, 1.0, 0.0, 1.0 );\n\t\telse if((scale=draw_pointer(rel_pos,D2R(m_angle),0.7*CLOCK_R))>0.)\n\t\t\tcolor = vec4( 0.0, 1.0, 1.0, 1.0 );\n\t\telse if((scale=draw_pointer(rel_pos,D2R(h_angle),0.5*CLOCK_R))>0.)\n\t\t\tcolor = vec4( 1.0, 1.0, 1.0, 1.0 );\n\t}\n\t\n\tfragColor=scale*color;\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lsfSRN","date":"1397451685","viewed":294,"name":"clock 4","username":"jun","description":"my first shader!!","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["2d","time","clock"],"hasliked":0,"parentid":"","parentname":""}}