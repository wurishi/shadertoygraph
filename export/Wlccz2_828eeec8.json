{"ver":"0.1","info":{"id":"Wlccz2","date":"1609454322","viewed":190,"name":"pdf scan transformation","username":"lil_chickehh","description":"i tried to do what those scanning apps do where they transform the selected part of the screen into a rectangle. I wonder if its right.\nClick and drag the bottom left corner to change the transformation","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["transformation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// corners of quadrilateral abcd\nvec2 a = vec2(0.15,0.24);\nvec2 b = vec2(0.95,0.24);\nvec2 c = vec2(0.85,0.64);\nvec2 d = vec2(0.45,0.74);\nvec4 point_color=vec4(1.,1.,1.,0.);\n\n//from iq's website\nfloat sdSegment( in vec2 p, in vec2 a, in vec2 b )\n{\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // 0<x<2, 0<y<1\n    vec2 uv = (fragCoord)/iResolution.xy;\n    uv.x*=2.;\n    \n    //control vertex a w mouse\n    a=iMouse.xy/iResolution.xy;\n    a.x*=2.;\n    \n    //split screen in half\n    if(floor(uv.x)==0.){\n    //left side\n        fragColor = texture(iChannel0,uv).xyzw;\n    } else {\n    //right side\n        vec2 tuv=fract(uv);\n        //this is the formula i came up with\n        vec2 t= a+(b-a)*tuv.x+((d-a)*(1.-tuv.x)+(c-b)*(tuv.x))*tuv.y;\n        \n        fragColor = texture(iChannel0,t).xyzw;\n    }\n    //draw lil box\n    fragColor*=(smoothstep(0.01,0.011,sdSegment(uv,a,b)))*point_color;\n    fragColor*=(smoothstep(0.01,0.011,sdSegment(uv,b,c)))*point_color;\n    fragColor*=(smoothstep(0.01,0.011,sdSegment(uv,c,d)))*point_color;\n    fragColor*=(smoothstep(0.01,0.011,sdSegment(uv,d,a)))*point_color;\n}","name":"Image","description":"","type":"image"}]}