{"ver":"0.1","info":{"id":"lXyXW3","date":"1720555006","viewed":193,"name":"rejection sampling","username":"FabriceNeyret2","description":"generating a sampling according to a density map.\nref: [url]https://en.wikipedia.org/wiki/Rejection_sampling[/url]","likes":10,"published":3,"flags":32,"usePreview":0,"tags":["rng","rejectionsampling"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// display sampling over texture\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n    vec2 U = u/R;       \n    O = mix( fract(iTime/2.)<.5? T0(U) : vec4(1), // background\n             vec4(1,0,0,0), \n             T1(U).x ) ;                          // sampling\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// choose texture\n\nvoid mainImage( out vec4 O, vec2 u ) { O = T0(u/R).rrrr; }\n","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"#define H(p)  fract(sin( (p) * vec2(12.9898, 78.233 )) * 3758.5453)\n\nfloat M = 1.;     // the larger the better quality ?\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n    vec2 U = u/R;\n                       \n    O = .99*T1(U);                      // previous state, with fading\n    \n    for(float i; i<500.; i++ ) {        // try random samples Y. Here, with g() = Uniform\n       vec2 Y = H(i+iTime+.5);\n       if( H(i+iTime).x < T0(Y).r / M ) // rejection test: uniform < f(y)/Mg(y) â†’ keep\n           O.x = mix(O.x, 1., .5*smoothstep( 1.5/R.y,0.,length((U-Y)*R/R.y)-.005) );\n    }\n    \n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define R      iResolution.xy\n#define T0(U)  texture(iChannel0, U )\n#define T1(U)  texture(iChannel1, U )","name":"Common","description":"","type":"common"}]}