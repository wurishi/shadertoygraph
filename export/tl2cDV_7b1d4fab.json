{"ver":"0.1","info":{"id":"tl2cDV","date":"1595448771","viewed":74,"name":"v3-Spectrum2.glsl","username":"jorge2017a1","description":"v3Spectrum2.glsl","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["v3spectrum2glsl"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    const int rep = 12;\n    vec3 spectrum=vec3(0.0);\n\n    vec2 p = fragCoord.xy;\n    vec3 sp = spectrum * vec3(2.0, 8.0, 256.0);\n    vec3 c;\n\n    if (p.x < 1.0)\n    {\n        // the first column is used for storing history\n        vec3 prev = texture(iChannel0, vec2(p.x, p.y - 1.0) / iResolution.xy).rgb;\n        c = mix(sp, prev, min(1.0, p.y + 0.25));\n    }\n    else\n    {\n        p /= iResolution.xy;\n        c = vec3(0);\n\n        for (int i = 0; i < rep; i++)\n        {\n            float i01 = float(i) * 1.0 / float( rep);\n\n            // sample the history column\n            sp = texture(iChannel0, vec2(0.0, float(i) * 2.0 / iResolution.y)).xyz;\n\n            // three points curve\n            float px = p.x * 3.0 - i01 * 0.25;\n            float lv = mix(sp.x, sp.y, smoothstep(0.0, 1.5, px));\n            lv = mix(lv, sp.z, smoothstep(1.5, 3.0, px));\n\n            lv = step(p.y - i01 * 0.25, lv);\n            c += lv * 1.2 / float(rep) * vec3(1.0, 1.0 - i01, i01);\n        }\n    }\n\n    fragColor = vec4(c, 1.0);\n}\n\n","name":"Image","description":"","type":"image"}]}