{"ver":"0.1","info":{"id":"wtSBzG","date":"1599187502","viewed":92,"name":"MrMr-14723.2","username":"jorge2017a1","description":"MrMr-14723.2","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["mrmr147232"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//MrMr\n//http://www.youtube.com/watch?v=Z8j_XEn9b_8\n//Autor desconocido\n\nfloat iGlobalTime ;\n\n\nvec2 Tube(vec2 pa, vec2 ba){//from iq (mod)\n\tfloat t=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);\n\treturn vec2(length(pa-ba*t),t);\n}\n\nvec2 pt[9];\n\nfloat DE(vec2 p){\n\tfloat d=100.0;\n\tp.y+=0.02;\n\tif(p.x<0.0)p.x+=0.33;\n\tif(p.x>0.0 && p.x<0.3){\n\t\tvec2 p0=vec2(0.0);\n\t\tfor(int i=0;i<9;i++){\n\t\t\td=min(d,Tube(p-p0,pt[i]-p0).x);\n\t\t\tp0=pt[i];\n\t\t}\n\t}else d=abs(p.y);\n\treturn d;\n}\nvec2 path(float t){\n\tvec2 p=vec2(t,0.0);\n\tif(t<0.0)t+=0.33;\n\tif(t>0.0 && t<0.3){\n\t\tvec2 p0=vec2(0.0);\n\t\tfor(int i=0;i<9;i++){\n\t\t\tif(t>p0.x && t<pt[i].x)p.y=mix(p0.y,pt[i].y,(t-p0.x)/(pt[i].x-p0.x));\n\t\t\tp0=pt[i];\n\t\t}\n\t}\n\tp.y-=0.02;\n\treturn p;\n}\nmat3 lookat(vec3 fw,vec3 up){\n\tfw=normalize(fw);vec3 rt=normalize(cross(fw,up));return mat3(rt,cross(rt,fw),fw);\n}\nvec3 ro,rd,N;\nfloat refl=1.0;\nvec2 n;\nvec3 WallColor(vec2 p){\n\tfloat y=p.y;\n\tp=mod(p,0.333)-0.1666;\n\tn=sign(p)*(0.1666-abs(p));\n\tn=n*n*n*15.0;\n\tp=abs(p);\n\tfloat d=min(p.x,p.y);\n\tvec3 col=mix(vec3(0.8,1.0,0.9),vec3(0.0,0.3,0.6),clamp(d*40.0,0.0,1.0));\n\tcol*=smoothstep(0.15,0.175,y);\n\treturn col;\n}\nvec2 Seg(vec3 pS, vec3 pD, float r){//mod from iq's\n\tpS=pS-ro;\n\tfloat d=dot(rd,pD),t=clamp((dot(rd,pS)*d-dot(pS,pD))/(dot(pD,pD)-d*d),0.0,1.0);\n\tpS+=pD*t;N=pS;\n\tfloat b=dot(pS,rd);\n\tif(b<0.0)return vec2(0.0);\n\tfloat h=b*b-dot(pS,pS)+r*r;\n\treturn vec2(h,b-sqrt(h));\n}\nvec2 Box(vec3 z,vec3 bs){\n\tz-=ro;\n\tvec3 t0=(-bs-z)/rd,t1=(bs-z)/rd;\n\tvec3 nr=min(t0,t1),fr=max(t0,t1);\n\tfloat tmin=max(nr.x,max(nr.y,nr.z)),tmax=min(fr.x,min(fr.y,fr.z));\n\treturn vec2(tmax-tmin,-tmax);\n}\nvec4 scene2(){\n\tvec2 t2=Box(vec3(0.0),vec3(1.0,1.25,3.0));\n\tro+=rd*t2.y;\n\tif(abs(ro.x)>0.99)N=vec3(-sign(ro.x),0.0,0.0);\n\telse if(abs(ro.y)>1.24)N=vec3(0.0,-sign(ro.y),0.0);\n\telse N=vec3(0.0,0.0,-sign(ro.z));\n\tvec3 scol=vec3(0.2),L=vec3(0.3,0.8,0.1);\n\tif(N.z>0.5){\n\t\tvec2 p=ro.xy;\n\t\tfloat d=min(abs(p.x)-0.01,abs(p.y-0.1)-0.05);\n\t\tscol=mix(scol,vec3(1.0,0.2,0.4),smoothstep(0.0,0.02,d));\n\t\tp.x=abs(p.x)-0.5;p.y+=0.69;\n\t\tp=abs(p);\n\t\td=max(p.x-0.24,p.y-0.26);\n\t\tfloat t=min(1.0,10.0+10.0*sin(iGlobalTime+sin(iGlobalTime*3.0)*2.0));\n\t\tscol=mix(t*vec3(1.5,1.2,1.0),scol,smoothstep(0.0,t*0.1,d));\n\t}\n\tscol*=(0.5+0.5*dot(N,L));\n\trd=reflect(rd,N);\n\tscol+=vec3(1.0,0.2,0.7)*pow(max(0.0,dot(rd,L)),3.0);\n\treturn vec4(scol,max(0.5-length(scol),0.0));\n}\nvec3 scene(){\n\tfloat tF=-ro.y/rd.y,tW=(5.0-ro.z)/rd.z,tS=(4.0-ro.x)/rd.x;\n\tif(rd.x<0.0)tS=20.0;\n\tif(rd.y>0.0)tF=20.0;\n\tif(rd.z<0.0)tW=20.0;\n\tvec3 L=vec3(0.2,0.4,-0.7),col=vec3(0.0);\n\tfloat lit=max(0.0,Seg(vec3(3.0+sin(floor(iGlobalTime*0.2))*3.0,0.0,-7.5),vec3(0.0,5.0,0.0),1.0).x);\n\tN=vec3(0.0,1.0,0.0);\n\tif(tW<tF && tW<tS){\n\t\tro+=rd*tW;\n\t\tcol=WallColor(ro.xy);\n\t\tN=-N.xzy+vec3(n,0.0);\n\t}else if(tS<tW && tS<tF){\n\t\tro+=rd*tS;\n\t\tcol=WallColor(ro.zy);\n\t\tN=N.yxz+=vec3(0.0,n.yx);\n\t}else if(tF<20.0){\n\t\tro+=rd*tF;\n\t\tN+=sin(ro.z*10.0+ro.x*5.0)*vec3(0.002,0.0,0.002);\n\t\tvec2 p=abs(mod(vec2(ro.x+ro.z,ro.x-ro.z),2.0)-1.0)-0.5;\n\t\tfloat d=smoothstep(-1.0,1.0,sign(p.x*p.y)*pow(abs(p.x*p.y),0.25));\n\t\td=min(d,smoothstep(5.0,4.9,ro.z));\n\t\td=min(d,smoothstep(4.0,3.9,ro.x));\n\t\tcol=vec3(d);\n\t}\n\tN=normalize(N);\n\tcol*=0.5+0.5*dot(N,L);\n\tcol+=10.0*lit*vec3(1.0,0.2,0.7);\n\trd=reflect(rd,N);\n\tcol+=vec3(1.0,0.2,0.7)*pow(max(0.0,dot(rd,L)),5.0);\n\trefl*=0.3*max(abs(N.x),max(abs(N.y),abs(N.z)));\n\treturn col;\n}\nbool chr(float n, vec2 p) {//by movAX13h (mod.)\n\tp=floor(p*vec2(4.0,-4.0)+2.5);\n\treturn (clamp(p.x,0.0,3.0)==p.x && clamp(p.y,0.0,4.0)==p.y && (int(mod(n/(exp2(p.x + 4.0*p.y)), 2.0)) == 1));\n}\n\nvec3 overlay(vec2 p, vec3 col){\n\tvec2 c=p-vec2(-0.63,0.54);\n\tconst vec3 W=vec3(1.0);\n\tfloat d=dot(c,c);\n\tif(d<0.002){\n\t\tcol=vec3(0.0);\n\t\tif(d<0.001)col=vec3(0.75,0.1,0.0);\n\t}\n\tc=p-vec2(-0.63,-0.54);\n\td=dot(c,c);\n\tif(d<0.00225){\n\t\tif(d>0.00075)col=vec3(0.0);\n\t\tif(c.x>-0.01 && abs(c.y)<0.01)col=vec3(0.0); \n\t\tif(c.y>-0.01 && abs(c.x)<0.01)col=vec3(0.0); \n\t}\n\tif(d<0.00175){\n\t\tif(d>0.00125)col=vec3(1.0);\n\t\tif(c.x>-0.005 && abs(c.y)<0.005)col=W; \n\t\tif(c.y>-0.005 && abs(c.x)<0.0025)col=W; \n\t}\n\tc=p-vec2(-0.5,0.54);\n\tif(chr(612247.0,c*17.0))col=W;//7+144+1792+20480+589824\n\tc.x-=0.07;\n\tif(chr(988959.0,c*17.0))col=W;//15+16+1792+4096+983040\n\tc.x-=0.07;\n\tif(chr(921886.0,c*17.0))col=W;//14+16+256+4096+917504\n\t\n\tc=p-vec2(0.4,0.54);\n\tif(chr(921886.0,c*17.0))col=W;//7+144+1792+20480+589824\n\tc.x-=0.07;\n\tif(chr(630678.0,c*17.0))col=W;//6+144+3840+36864+589824\n\tc.x-=0.07;\n\tif(chr(349530.0,c*17.0))col=W;//10+80+1280+20480+327680\n\t\n\tif(max(abs(c.x-0.035)-0.006,abs(c.y+0.01)-0.03)<0.0)col=W;\n\tc.x-=0.14;\n\td=139810.0;//2+32+512+8192+131072;\n\tfloat t=mod(iGlobalTime,30.0);\n\tif(t>5.0)d=149647.0;//15+128+2048+16384+131072;\n\tif(t>10.0)d+=1543.0;//-9+16+512+1024;\n\tif(t>15.0)d=493191.0;//7+128+1536+32768+458752;\n\tif(t>20.0)d-=61425.0;//16+4096-1-65536;\n\tif(t>25.0)d+=128.0;//256-128;\n\tif(chr(d,c*17.0))col=W;\n\treturn col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    iGlobalTime=iTime;\n    \n\tvec2 uv=1.5*(2.0*gl_FragCoord.xy-iResolution.xy)/iResolution.x;\n\tpt[0]=vec2(0.01,0.0);pt[1]=vec2(0.07,0.13);pt[2]=vec2(0.08,0.0);\n\tpt[3]=vec2(0.15,0.13);pt[4]=vec2(0.16,-0.04);pt[5]=vec2(0.22,0.07);\n\tpt[6]=vec2(0.26,0.07);pt[7]=vec2(0.2625,0.0);pt[8]=vec2(0.3,0.0);\n\tvec3 col=vec3(0.0);\n\tfloat itim=mod(iGlobalTime,100.0);\n\tif(abs(uv.y)<0.63 && itim>1.0 && itim<10.0){\n\t\tfloat tim=(itim-1.0)*0.75;\n\t\tcol=vec3(0.2,0.0,0.2);\n\t\tvec2 p=abs(fract(uv*15.0)-0.5);\n\t\tfloat d=min(p.x,p.y);\n\t\tcol+=vec3(0.2,0.1,0.2)*exp(-d*15.0);\n\t\td=DE(uv);\n\t\tfloat t=tim-2.0;\n\t\tp=path(t)-uv;\n\t\tt=p.x;\n\t\tif(t<0.0)t=100.0;\n\t\tt=clamp(2.0-pow(t*16.0,0.25),0.25,2.0)*4.0;\n\t\tcol=max(col,t*vec3(1.0,0.3,0.8)*exp(-d*200.0));\n\t\tcol+=4.0*vec3(1.0,0.3,0.7)*exp(-length(p)*60.0);\n\t\tcol*=min(1.0,min(tim,3.75-tim));\n\t\tcol*=max(0.0,1.0-0.75*length(uv));\n\t}else if(itim>10.0 && itim<40.0){\n\t\tvec2 p=pow(abs(uv*vec2(0.9,1.0)),vec2(4.0));\n\t\tfloat scrn=dot(p,p)*8.0;\n\t\tif(scrn<1.0){\n\t\t\tvec2 pt=uv;\n\t\t\tfloat rnd=sin(iGlobalTime+2.0*sin(iGlobalTime)*3.3);\n\t\t\tpt+=max(0.0,rnd-0.75)*2.0*sin(uv*vec2(1900.0,30.0)+iGlobalTime*1000.0)*max(0.0,sin(uv.y*5.0+4.0*rnd)-0.5);\n\t\t\tpt.y+=sin(max(0.0,rnd-0.75)*50.0)*0.01;\n\t\t\tfloat c=floor(iGlobalTime*0.2);\n\t\t\tvec3 fw=vec3(0.1+sin(c)*0.5,-0.1+sin(c*2.0)*0.125,1.0);\n\t\t\tro=vec3(2.0+sin(c*2.0),1.0+abs(sin(c*2.3)),-3.0+abs(sin(c)*5.0));\n\t\t\trd=lookat(fw,vec3(-0.05,0.95,0.05))*normalize(vec3(pt,1.75));\n\t\t\tcol=scene();\n\t\t\tcol+=scene()*refl;\n\t\t\tcol*=clamp(1.0-scrn,0.0,1.0)*(1.0-clamp(rnd-0.75,0.0,1.0));\n\t\t\tcol=overlay(uv,col);\n\t\t}\n\t}else if(itim>40.0 && itim<50.0){\n\t\tfloat st=sin(iGlobalTime);\n\t\tro=vec3(st*0.5,0.0,st);\n\t\trd=lookat(vec3(st*0.2,0.0,1.0),vec3(sin(st*0.25),cos(st*0.25),0.0))*normalize(vec3(uv,1.75));\n\t\tvec4 c=scene2();\n\t\tc+=scene2()*c.w;\n\t\tc+=scene2()*c.w;\n\t\tcol=c.rgb;\n\t\tcol*=min(itim-40.0,min(1.0,50.0-itim));\n\t}else if(itim>50.0 && itim<60.0){\n\t\tcol=vec3(1.0);\n\t\tro=vec3(-itim*2.0,1.0,itim*0.2);\n\t\trd=lookat(vec3(0.3+sin(itim)*0.2,-0.65,0.3),vec3(0.0,1.0,0.0))*normalize(vec3(uv,1.75));\n\t\tfloat t=-ro.y/rd.y;\n\t\tvec3 srd=rd;\n\t\tvec2 c=floor(ro.xz+rd.xz*t);\n\t\tfloat a=(c.x+c.y+sin(c.x)+cos(c.y))*2.0;\n\t\ta+=sin(a)*itim*10.0;\n\t\tc+=vec2(0.4,0.45)+sin(c.yx*2.0)*0.15;\n\t\tvec3 ang=vec3(cos(a),0.0,sin(a))*0.3;\n\t\tvec3 pS=vec3(c.x,0.05,c.y)-ang*0.5,L=vec3(0.3,0.8,0.1);\n\t\tro+=rd*t;rd=L;\n\t\tvec2 t2=Seg(pS,ang,0.1);\n\t\tcol*=smoothstep(0.007,0.0,t2.x);\n\t\trd=srd;ro=vec3(-itim*2.0,1.0,itim*0.2);\n\t\tt2=Seg(pS,ang,0.1);\n\t\tif(t2.x>0.0){\n\t\t\tN=normalize(rd*t2.y-N);\n\t\t\tt=distance(pS,ro+rd*t2.y);\n\t\t\tvec3 scol=mix(vec3(1.0,0.0,0.0),vec3(1.0),smoothstep(0.16,0.17,t));\n\t\t\tscol*=(0.5+0.5*dot(N,L));\n\t\t\tscol+=vec3(1.0,0.2,0.7)*pow(max(0.0,dot(reflect(rd,N),L)),3.0);\n\t\t\tcol=mix(col,scol,smoothstep(0.0,0.003,t2.x));\n\t\t\tt=t2.y;\n\t\t}\n\t\tcol*=exp(-0.1*t*t);\n\t\tcol*=min(itim-50.0,min(1.0,60.0-itim));\n\t}else if(itim>60.0 && itim<70.0){\n\t\tcol=vec3(0.8)*min(abs(itim-65.0),min(itim-60.0,min(1.0,70.0-itim)));\n\t\tvec2 p=uv*(1.5+uv.x*0.37);\n\t\tfloat d;\n\t\tif(itim<65.0){\n\t\t\td=min(length(p+vec2(0.68,0.81)),length(p+vec2(-0.7,0.61)));\n\t\t\td=min(d,min(length(p+vec2(0.7,-0.06)),length(p+vec2(-0.6,-0.21))));\n\t\t\td=min(d,length(p+vec2(0.0,0.2)));\n\t\t\td+=abs(sin(p.y*24.0)*0.08+sin(p.x*5.0+sin(-p.x*3.0)*17.0)*0.47);\n\t\t\tfloat t=min((itim-62.0)*0.1,0.31);\n\t\t\tcol*=smoothstep(t,t+0.23,d);\n\t\t\tp=uv*(1.5+uv.x*0.37);\n\t\t\tp=cos(0.2)*p+sin(0.2)*vec2(p.y,-p.x);\n\t\t\tfloat x=abs(p.x)-0.9;\n\t\t\td=Tube(vec2(x,p.y-0.48),vec2(0.0,-0.96)).x;\n\t\t\td*=d;\n\t\t\tif(abs(p.x)<1.0){\n\t\t\t\tp=sin(vec2(p.x,-p.x)*2.0)*0.5-p.yy;\n\t\t\t\td=min(d,min(p.x*p.x,p.y*p.y));\n\t\t\t}\n\t\t}else{\n\t\t\tp=mod(p+vec2(iGlobalTime)+sin(p.yx*vec2(2.0,1.0)+vec2(iGlobalTime*4.0))*0.1,0.5);\n\t\t\td=min(max(p.x,p.y)-0.25,abs(abs(abs(p.x-p.y)-0.3125)-0.125)-0.075);\n\t\t\td=max(d,min(p.x,p.y)-0.25);\n\t\t\td+=0.05;\n\t\t}\n\t\tcol*=smoothstep(0.025,0.05,d);\n\t}else if(itim>70.0 && itim<80.0){\n\t\tcol=vec3(1.0);\n\t\tro=vec3(-2.0+sin(iGlobalTime),2.0,-2.0);\n\t\trd=lookat(vec3(0.0,0.7,0.0)-ro,vec3(0.0,1.0,0.0))*normalize(vec3(uv,1.75));\n\t\tvec3 srd=rd;\n\t\tfloat t=-ro.y/rd.y;\n\t\tcol*=exp(-0.1*t*t);\n\t\tvec3 L=vec3(0.3,0.8,0.1);\n\t\tro+=rd*t;rd=L;\n\t\tvec2 t2;\n\t\tif(itim<75.0){t=-0.6;t2=Seg(vec3(0.0,1.0,0.0),vec3(0.0),1.0);}\n\t\telse {t=-0.1;t2=Box(vec3(0.0,0.75,0.0),vec3(0.75));}\n\t\tcol*=smoothstep(0.5,t,t2.x);\n\t\trd=srd;ro=vec3(-2.0+sin(iGlobalTime),2.0,-2.0);\n\t\tif(itim<75.0)t2=Seg(vec3(0.0,1.0,0.0),vec3(0.0),1.0);\n\t\telse t2=Box(vec3(0.0,0.75,0.0),vec3(0.75));\n\t\tif(t2.x>0.0){\n\t\t\tfloat stx=t2.x;\n\t\t\tN=normalize(rd*t2.y-N);\n\t\t\tfloat sh=(0.5+0.5*dot(N,L));\n\t\t\tvec3 scol=vec3(1.0,0.0,0.0);\n\t\t\tif(itim<75.0){\n\t\t\t\tfloat a1=atan(N.z,N.x),a2=atan(N.y,length(N.xz));\n\t\t\t\ta2-=mod(a2,0.1);\n\t\t\t\ta1-=mod(a1,(3.1416+2.0*abs(a2))*0.029);\n\t\t\t\ta1+=0.053;a2+=0.037;\n\t\t\t\tvec2 t3=Seg(vec3(cos(a1)*cos(a2),sin(a2),sin(a1)*cos(a2))*0.98+vec3(0.0,1.0,0.0),vec3(0.0),0.0);\n\t\t\t\tN=normalize(rd*t2.y-N);\n\t\t\t}else{\n\t\t\t\tscol=vec3(0.15);\n\t\t\t\tro+=rd*t2.y;ro.y-=0.75;\n\t\t\t\tsrd=mod(ro,0.5)-vec3(0.25);\n\t\t\t\tsrd=sign(srd)*(vec3(0.25)-abs(srd));\n\t\t\t\tsrd=-srd*srd*srd*25.0;\n\t\t\t\tif(ro.x<-0.749)N=vec3(1.0,srd.yz);\n\t\t\t\telse if(ro.y>0.749)N=vec3(srd.x,1.0,srd.z);\n\t\t\t\telse {\n\t\t\t\t\tN=vec3(srd.xy,-1.0);\n\t\t\t\t\tscol=mix(scol,vec3(1.0,0.4,0.5),smoothstep(0.26,0.18,length(srd.xy)));\n\t\t\t\t}\n\t\t\t\tsh=1.0;\n\t\t\t}\n\t\t\tscol*=(0.5+0.5*dot(N,L))*sh;\n\t\t\tscol+=vec3(1.0,0.2,0.7)*pow(max(0.0,dot(reflect(rd,N),L)),3.0)*sh*2.0;\n\t\t\tcol=mix(col,scol,smoothstep(0.0,0.05,stx));\n\t\t}\n\t\tcol*=min(abs(itim-75.0),min(itim-70.0,min(1.0,80.0-itim)));\n\t}else if(itim>80.0 && itim<90.0){\n\t\tvec2 pt=uv;\t\n\t\tif(itim<85.0){\n\t\t\tpt*=vec2(0.5-pt.y*0.18,1.0)*1.5;\n\t\t\tpt-=floor(sin(vec2(iGlobalTime*2.0,iGlobalTime*1.3))*2.0)*0.1;\n\t\t\tpt-=vec2(0.62,0.74);\n\t\t\tvec2 c=pt;\n\t\t\tfloat r=length(pt);\n\t\t\tpt=abs(pt);if(pt.y>pt.x)pt=pt.yx;\n\t\t\tpt-=vec2(0.66,0.275);\n\t\t\tfloat t=length(pt);\n\t\t\tfloat a=atan(pt.y,pt.x)-0.38;\n\t\t\tfloat d=abs(t-0.19)-0.01;\n\t\t\tpt=abs(pt);if(pt.y>pt.x)pt=pt.yx;\n\t\t\tpt-=vec2(0.13,0.19);\n\t\t\td=max(d,-abs(length(pt)-0.12)+0.03);\n\t\t\td=min(d,min(1.0-r,abs(r-0.19)));\n\t\t\td=max(d,-abs(r-1.25)+0.05);\n\t\t\tcol=vec3(0.8)*smoothstep(0.0,0.05,d);\n\t\t\tt=clamp(1.0-min(a*a*t+t*0.3,c.y*c.y*length(c)*0.19+abs(c.x)*0.3),0.0,1.0);\n\t\t\tcol+=vec3(1.0)*pow(t,8.0);\n\t\t\tc-=vec2(-1.5,0.75);\n\t\t\tc.x=clamp(c.x,-0.11,0.11)*2.0-c.x;\n\t\t\tpt=Tube(c,vec2(0.02*sin(iGlobalTime*10.0),-2.25));\n\t\t\tif(col.r<0.75)col+=(0.5+0.25*sin(pt.y*70.0+0.3))*smoothstep(0.04,0.0,pt.x+sin(pt.y*70.0)*0.02);\n\t\t}else{\n\t\t\tpt-=vec2(0.36,0.0);\n\t\t\tfloat r=length(pt),focus=0.01-sin(iGlobalTime)*0.04;\n\t\t\tfloat d=min(1.25-r,abs(1.1-r)-0.1);\n\t\t\td=min(d,r-0.05+sin(r*71.0)*0.04);\n\t\t\td=min(d,abs(r-0.9)-0.005);\n\t\t\tfloat a=atan(pt.y,-pt.x);\n\t\t\tfloat ang=clamp((iGlobalTime-88.0)*100.0,-1.57,1.57)+sin(iGlobalTime*1000.0)*0.1;\n\t\t\tvec2 p=vec2(-cos(ang),sin(ang))*0.9;\n\t\t\td=min(d,Tube(pt,p).x-0.01);\n\t\t\tif(abs(a)<2.55){\n\t\t\t\tfloat b=fract(a)-0.5;\n\t\t\t\td=min(d,max(abs(b)-0.01,abs(r-0.8)-0.1));\n\t\t\t\tb=mod(a+0.25,0.5)-0.25;\n\t\t\t\td=min(d,max(abs(b)-0.0075,abs(r-0.85)-0.05));\n\t\t\t\tb=mod(a+0.05,0.1)-0.05;\n\t\t\t\td=min(d,max(abs(b)-0.005,abs(r-0.875)-0.025));\n\t\t\t}\n\t\t\tcol=vec3(1.0)*smoothstep(-focus,focus,d);\n\t\t}\n\t\tcol+=vec3(1.0)-min(abs(itim-85.0),min(itim-80.0,min(1.0,90.0-itim)));\n\t}else if(itim>90.0 && itim<100.0){\n\t\tro=vec3(0.0,0.0,-2.0);\n\t\trd=normalize(vec3(uv,1.75));\n\t\tvec3 L=vec3(0.3,0.7,-0.3),LC=vec3(1.0,0.2,0.7)*2.0;\n\t\tfloat focus=0.004+sin(iGlobalTime)*0.003;\n\t\tcol=vec3(-rd.x+rd.y*0.3,0.3,0.6);\n\t\tif(itim<95.0){\n\t\t\tfloat w=0.025,s=0.5,a=0.4+sin(iGlobalTime*2.0)*0.1;\n\t\t\tvec3 p=vec3(-2.25,-1.0,0.0),dr=vec3(4.0*vec2(cos(a),sin(a)),0.5);\n\t\t\tfor(int i=1;i<4;i++){\n\t\t\t\tvec2 t2=Seg(p,dr,w);\n\t\t\t\tif(t2.x>0.0){\n\t\t\t\t\tN=normalize(rd*t2.y-N);\n\t\t\t\t\tfloat sh=max(0.0,dot(N,L));\n\t\t\t\t\tvec3 scol=vec3(1.0)*(0.5+0.5*dot(N,L))*sh;\n\t\t\t\t\tscol+=LC*pow(max(0.0,dot(reflect(rd,N),L)),3.0)*sh;\n\t\t\t\t\tcol=mix(col,scol,smoothstep(0.0,focus,t2.x/float(i*i)));\n\t\t\t\t}\n\t\t\t\tdr*=s;\n\t\t\t\ts+=0.25;\n\t\t\t\tw+=0.1;\n\t\t\t}\n\t\t}else{\n\t\t\tro.z-=2.0;\n\t\t\tfloat t=-ro.z/rd.z;\n\t\t\tvec3 p=ro+rd*t;\n\t\t\tt=p.y+iTime;\n\t\t\tfloat d=0.0;\n\t\t\tif(abs(p.x)>1.5){d=sign(p.x)*3.5;t+=1.0;}\n\t\t\tvec3 dr=vec3(0.42+sin(t*8.0+sin(t*4.9))*0.14,0.0,0.0);\n\t\t\tvec2 t2=Seg(vec3(d-dr.x*0.5,p.y,0.0),dr,dr.x*0.5);\n\t\t\tif(t2.x>0.0){\n\t\t\t\tN=normalize(rd*t2.y-N+vec3(0.0,-p.x*p.x*0.5,0.0));\n\t\t\t\tfloat sh=max(0.0,dot(N,L));\n\t\t\t\tvec3 scol=vec3(1.5,0.3,0.5)*(0.5+0.5*dot(N,L))*sh;\n\t\t\t\tscol+=LC*pow(max(0.0,dot(reflect(rd,N),L)),3.0)*sh;\n\t\t\t\tcol=mix(col,scol,smoothstep(0.0,focus,t2.x*0.31));\n\t\t\t}\n\t\t}\n\t\tcol*=min(abs(itim-95.0),min(itim-90.0,min(1.0,100.0-itim)));\n\t}\n\t\n\tfragColor=vec4(clamp(col,0.0,1.0),1.0);\n}\n\n","name":"Image","description":"","type":"image"}]}