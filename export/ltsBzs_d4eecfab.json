{"ver":"0.1","info":{"id":"ltsBzs","date":"1513029202","viewed":165,"name":"Water_001","username":"7_chars","description":"Water surface whith progressing waves.","likes":5,"published":1,"flags":32,"usePreview":0,"tags":["2d","waves","interactive","water"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 o_c = vec3(0.0,0.0,0.0);\nvec3 w_c = vec3(0.09,0.07,0.02);\nvec2 dr = vec2(0.0,0.0);\nfloat q_s = 20.0;\nfloat m = 1000.0;\nfloat w_m = 10.0;\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec3 b_c = texture(iChannel0, uv).rgb;\n    o_c = vec3(iMouse.w/600.0,b_c.r,b_c.r);\n    \n    for(int i=-1;i<2;i++)\n        {\n        \tfor(int j=-1;j<2;j++)\n            {\n                vec2 r_p = vec2(float(i),float(j));\n                float c_i = 1.0/length(vec3(r_p,1.0));\n            \tfloat a_c = texture(iChannel0, (r_p + fragCoord.xy) / iResolution.xy).r*c_i - 0.5;\n                dr += r_p*a_c;\n            }\n        }\n    vec2 p_p = fragCoord.xy;\n    p_p += dr*m;\n    o_c = texture(iChannel1, p_p / iResolution.xy).rgb;\n    float dis = length(dr);\n    o_c = (o_c+w_c*dis*w_m)/(1.0+dis*w_m);\n    \n    if (fragCoord.x > iResolution.x*0.5-q_s)\n        \t{\n            \tif (fragCoord.y > iResolution.y*0.5-q_s)\n        \t\t{\n                \tif (fragCoord.x < iResolution.x*0.5+q_s)\n        \t\t\t{\n        \t\t\t\tif (fragCoord.y < iResolution.y*0.5+q_s)\n        \t\t\t\t{\n        \t\t\t\t\to_c = vec3(0.0,0.0,0.0);\n       \t\t\t\t\t}\n       \t\t\t\t}\n        \t\t\n        \t\t}\n        \t}\n    \n\tfragColor = vec4(o_c,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\nvec3 o_c = vec3(0.0,0.0,0.0);\nvec3 a_c = vec3(0.0,0.0,0.0);\nfloat q_s = 20.0;\nfloat inta = 0.99; \nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    if (iTime < 2.0) \n    {\n    \to_c = vec3(0.5,0.5,0.5);\n    }\n    else\n    {\n    \tfor(int i=-1;i<2;i++)\n        {\n        \tfor(int j=-1;j<2;j++)\n            {\n                vec2 r_p = vec2(float(i),float(j));\n                float c_i = 1.0/length(vec3(r_p,1.0));\n            \ta_c += texture(iChannel0, (r_p + fragCoord.xy) / iResolution.xy).rgb*c_i;\n            }\n        }\n        vec3 p_c = texture(iChannel0, uv).rgb;\n        a_c -= p_c;\n        a_c = a_c  / 5.1378;\n        float demp = a_c.r;\n        a_c -= 0.5;\n        p_c -= 0.5;\n        vec3 rgb_d = a_c-p_c;\n        p_c.g += (rgb_d.r-p_c.r*0.02)*inta;\n        p_c.r += p_c.g*inta;\n        p_c.r -= p_c.r*0.0006;\n        p_c += 0.5;\n        p_c.r = (9.0*p_c.r+demp)/10.0;\n        o_c = p_c;\n        \n         if (iMouse.z > 0.0)\n   \t\t{\n            if (fragCoord.x > iMouse.x-q_s*0.1)\n        \t{\n            \tif (fragCoord.y > iMouse.y-q_s*0.1)\n        \t\t{\n                \tif (fragCoord.x < iMouse.x+q_s*0.1)\n        \t\t\t{\n        \t\t\t\tif (fragCoord.y < iMouse.y+q_s*0.1)\n        \t\t\t\t{\n        \t\t\t\t\to_c.rg = vec2(1.0,0.5);\n       \t\t\t\t\t}\n       \t\t\t\t}\n        \t\t\n        \t\t}\n        \t}\n      \t\t\n    \t}\n       \n        \n        \n        if (fragCoord.x > iResolution.x*0.5-q_s)\n        \t{\n            \tif (fragCoord.y > iResolution.y*0.5-q_s)\n        \t\t{\n                \tif (fragCoord.x < iResolution.x*0.5+q_s)\n        \t\t\t{\n        \t\t\t\tif (fragCoord.y < iResolution.y*0.5+q_s)\n        \t\t\t\t{\n        \t\t\t\t\to_c.rg = vec2(0.5,0.5);\n       \t\t\t\t\t}\n       \t\t\t\t}\n        \t\t\n        \t\t}\n        \t}\n        \n    }\n\tfragColor = vec4(o_c,1.0);\n}","name":"Buf A","description":"","type":"buffer"}]}