{"ver":"0.1","info":{"id":"mtVfRV","date":"1702322225","viewed":58,"name":"Voxel mountain ","username":"ZoldLeo","description":"Voxel","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["voxel"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","previewfilepath":"/media/ap/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define STEPL .01\n#define STEPD 2.\n#define VOXELS .015\n\nfloat height(vec2 uv) {\n    uv /= 10.;\n    float n = texture(iChannel0, uv).x;\n    n += texture(iChannel0, uv*2.).x/2.;\n    n += texture(iChannel0, uv*4.).x/4.;\n    n += texture(iChannel0, uv*8.).x/8.;\n    n *= max(1.-abs(length(uv*20.)),0.);\n    return n;\n}\n\nvec4 hCol(float h) {\n    if (h<.05) return vec4(0,1,0,1);\n    if (h<.1) return vec4(0,.9,0,1);\n    if (h<.2) return vec4(0,.8,0,1);\n    if (h<.4) return vec4(0,.6,0,1);\n    if (h<.6) return vec4(.8,.6,.6,1);\n    if (h<.8) return vec4(.8,.8,.8,1);\n    return vec4(1);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = (fragCoord*2.-iResolution.xy)/iResolution.x;\n    float st = sin(.5*iTime);\n    float ct = cos(.5*iTime);\n    vec3 ro = vec3(ct,.2,st);\n    vec3 rd = vec3(uv.xy,1);\n    rd = vec3(-rd.x*st-rd.z*ct,rd.y,rd.x*ct-rd.z*st);\n    float h;\n    int l = int(STEPD/STEPL);\n    fragColor = vec4(0,1,1,1);\n    for (int i=0;i<l;i++) {\n        ro += rd*STEPL;\n        h = height(floor(ro.xz/VOXELS)*VOXELS);\n        if (floor(ro.y/VOXELS)*VOXELS<=h/4.) {\n            fragColor = hCol(h);\n            break;\n        }\n    }\n}","name":"Image","description":"","type":"image"}]}