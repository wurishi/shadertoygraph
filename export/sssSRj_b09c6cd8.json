{"ver":"0.1","info":{"id":"sssSRj","date":"1618897387","viewed":86,"name":"Sierpiński Carpet Ride","username":"adamjmurray","description":"Sierpiński Carpet with movement\n\nSee also: https://www.shadertoy.com/view/sdsXzH","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["tiles"],"hasliked":0,"parentid":"sdfSDn","parentname":"Sierpiński Carpet (Better)"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"bool aa = true; // antialiased. Change to false for better performance\n\nvec3 draw(vec2 p, float start, float end, float iterations) \n{    \n    float iter = min(20., iterations);\n    float len = end - start;\n    float x = p.x - start;\n    float y = p.y - start;\n    \n    float thresh = 0.03; \n    float pct = 0.;\n    \n    float i;\n    for(i=0.; i<iter+1.; i++) {\n        len /= 3.;       \n        float xd = mod(x/len-1.-20.*sin(iTime*0.11), 6.+5.*cos(iTime*0.5));\n        float yd = mod(y/len-1.-4.*cos(iTime*0.14), 6.+5.*sin(iTime*0.4));\n        if (xd < 1. && yd < 1.) {\n            pct = (smoothstep(0.,thresh,xd) - smoothstep(1.-thresh,1.,xd))\n                * (smoothstep(0.,thresh,yd) - smoothstep(1.-thresh,1.,yd));\n            if (i>iter) {\n                pct *= (1.-(i-iter)); // fade in partial iterations\n            }\n            break;  \n        }\n    }\n    \n    return mix(vec3(0.1,0.1,0.1), vec3(1.-i/iter, 1.-i/(iter+5.), 1.), pct);    \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) \n{\n    vec3 color = vec3(0,0,0);\n    \n    float samples = 0.;\n    float sampStart = 0.;\n    float sampEnd = 0.1;\n    if (aa) {\n        sampStart = -0.33;\n        sampEnd = 0.34;\n    }        \n    \n    for (float x=sampStart; x<sampEnd; x+=0.33) {\n        for (float y=sampStart; y<sampEnd; y+=0.33) {\n            vec2 p = (2.*(fragCoord + vec2(x,y)) - iResolution.xy)/iResolution.y; // [-1,1] vertically    \n            float iterations = 6. - 1200./iResolution.x + (aa ? 1. : 0.);\n            color += draw(p, -1., 1., iterations);\n            samples++;\n        }\n    }\n    fragColor = vec4(color/samples,1);\n}","name":"Image","description":"","type":"image"}]}