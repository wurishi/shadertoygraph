{"ver":"0.1","info":{"id":"mlKBzh","date":"1701857174","viewed":55,"name":"sdf_box_noise","username":"yufengjie","description":"anxiety and desire","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["noise","sdfbox"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"precision mediump float;\n\nfloat PI = 3.1415926;\nfloat pix;\n\nfloat rand(float x) {\n  return fract(sin(x));\n}\n\nfloat noise(float x) {\n  float i = floor(x);\n  float f = fract(x);\n  return mix(rand(i), rand(i+1.), smoothstep(0.,1.,f));\n}\n\nfloat sdBox(in vec2 p, in vec2 b) {\n  vec2 d = abs(p) - b;\n  return length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n}\n\nvec3 palette(float t) {\n  vec3 a = vec3(1.000,0.500,0.500);\n  vec3 b = vec3(0.500,0.500,0.500);\n  vec3 c = vec3(0.750,1.000,0.667);\n  vec3 d = vec3(0.800,1.000,0.333);\n  return a + b * cos(6.28318 * (c * t + d));\n}\n\n\nvec2 rotate(vec2 p, float a) {\n  float s = sin(a);\n  float c = cos(a);\n  mat2 matrix = mat2(c,-s,s,c);\n  return p * matrix;\n}\n\nvec3 createBox(vec2 st, float seed) {\n  float i = (noise(iTime+seed))*10.;\n\n  float theta = sin(noise(iTime+i)) * PI*4.;\n  st = rotate(st, theta);\n  float size = abs(sin(noise(iTime+i)));\n  float xoff = (sin(noise(iTime+i)))/10.;\n  float yoff = (sin(noise(iTime+i)))/10.;\n  st += vec2(xoff,yoff);\n  vec3 color = palette(noise(iTime*i));\n\n  float box = sdBox(st,vec2(size,size));\n  float smoothStart = abs(sin(noise(iTime * i)))*10.*pix;\n  float smoothEnd = abs(sin(noise(iTime * i)))*40.*pix;\n  float b = 1. - smoothstep(smoothStart,smoothEnd,abs(box-0.1));\n\n  return b*color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n  vec2 st = (fragCoord.xy * 2. - iResolution.xy) / min(iResolution.x, iResolution.y);\n  pix = 1./iResolution.y;\n  vec3 fin_c = vec3(0., 0., 0.);\n\n  for(float i=0.;i<10.;i++) {\n    vec3 box = createBox(st, i*0.01);\n    fin_c += box;\n  }\n\n  fragColor = vec4(fin_c, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}