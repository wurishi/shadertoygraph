{"ver":"0.1","info":{"id":"wlB3RV","date":"1560228210","viewed":230,"name":"actual metaball","username":"cdhanna92","description":"hooray for metaballs","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["metaball"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float falloff(float x){\n\tx = clamp(0., 1., x);\n    return pow(1. - pow(x, 2.), 2.);\n}\n\nvec2 getOrigin(vec2 id, float t){\n\treturn vec2(.5) + vec2(sin(t + id.x * 23.338 * id.y * 89.993 + id.y*5.), cos(t + id.y*79.33 + id.x));\n}\n\nvec3 getColor(vec2 id, float t) {\n    return vec3(cos(t + id.x * 23.33), sin(t + 47.77), sin(t + id.y * 13.99))*.33 + .7;\n}\n\nvec3 MetaballLayer(vec2 uv, float t, float s){\n    vec3 m = vec3(0);\n    vec3 col = vec3(0);\n    vec2 gv = fract(uv * s);\n    for (float x = -2.; x <= 2. ; x++){\n        for (float y = -2.; y <= 2. ; y ++){\n            vec2 offset = vec2(x, y);\n     \n            vec2 id = ((uv * s) - gv) + offset;\n\t\n            vec2 o = getOrigin(id, t);\n            vec2 d = (gv - offset) - o;\n            float r = length(d);\n            r = falloff(r * 1.3 + .2 * cos(id.x * id.y));\n\t\t\tm += getColor(id, t * .2) * r;\n       }\n    }\n    col = m;\n    if (length(m) > .5) {\n     \tcol = normalize(m);   \n    } else {\n        // uncomment to use remove glow\n     \t//col = vec3(0.);   \n    }\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-.5*iResolution.xy) / iResolution.y;\n\n    vec3 col = vec3(0.);\n    \n    float t= .5 * iTime;\n\tfloat size= 4. + 2. * cos(t * .2);\n\t\n    float c= cos(t * .5);\n    float s= sin(t * .5);\n    mat2 rot = mat2(c, s, -s, c);\n    \n    col = 1.3 * MetaballLayer(uv * rot, t, size);\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}