{"ver":"0.1","info":{"id":"Xsy3R3","date":"1455491895","viewed":112,"name":"Reflective World (LAG WARNING) ","username":"VoidChicken","description":"A world that has reflections.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["ray","displacement","lighting"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdXGzr","filepath":"/media/a/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg","previewfilepath":"/media/ap/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define time iTime\n#define sky vec3(0)\n//vec3(\t135.0/255.0,\t206.0/255.0,235.0/255.0)\nvec4  s = vec4(0, 2, 0, 4);\nfloat g =             -2.0;\n\nbool j_c(vec3 v) {\n\tif (length(s.xyz-v)<s.w) { return true; }\n    if (v.y<g) { return true;   }   \n    return false;\n}\nbool col_c(vec3 v, out vec3 col, out vec3 norm) {\n    if (length((s.xyz+(normalize(v-s.xyz)*texture(iChannel1, v.xy/10.0).r))-v)<s.w) { col = texture(iChannel1, v.xy/10.0).rgb; norm = vec3(7); return true; }\n    if (v.y<g+texture(iChannel0, v.xz/10.0).r) { norm = vec3(0, 1, 0); col = texture(iChannel0, v.xz/10.0).rgb; return true;   }\n    return false;\n}\n\nvec3 ray (vec3 rs, vec3 rd, float res) {\n    vec3 v = rs;\n    vec3 ad = normalize(rd);\n    vec3 final = sky;\n    float t = 1.0;\n    for (int i = 0; i < 1000; i ++) {\n\t\tv+=ad/res;\n        vec3 c;\n        float a = float(i)/1000.0;\n        a=1.0-a;\n        vec3 n;\n        if (col_c(v, c, n)) {\n        \tc = c*a;\n            final += c/(t);\n            if (n==vec3(7)) return final/t;\n            t+=1.0/t;\n           \tad= reflect(rd, n);\n        }\n    }\n    return final/t;\n}\nvec3 dir (vec2 v) {\n    return vec3(v.x-(0.5), v.y-0.25, 1);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 vu = fragCoord.xy / iResolution.xx;\n\tfragColor = vec4(ray(vec3(0, 1, -25.0+sin(time)*2.5), dir(vu), 20.0),1.0);\n}","name":"Image","description":"","type":"image"}]}