{"ver":"0.1","info":{"id":"7tdGWr","date":"1636074994","viewed":166,"name":"Plant microstructures","username":"sinvec","description":"Simple pattern based on [url=https://archive.bridgesmathart.org/2018/bridges2018-39.pdf]this article[/url].","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["2d","sdf","truchet","pattern","multiscale"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159\n#define R (iResolution.xy)\n#define s(v,l) smoothstep(l/R.y,0.,v) // AA\n#define ro(a) (mat2(cos(a),sin(a),-sin(a),cos(a))) // 2d rotation matrix\n\nfloat hash21(vec2 p) {\n    p = fract(p*vec2(123.34, 456.21));\n    p += dot(p, p+45.32);\n    return fract(p.x*p.y);\n}\n\nfloat cir (vec2 p, vec2 c, float r, float w) {return abs(length(p-c)-r)- w;}\n\nvoid mainImage(out vec4 O, in vec2 E) {\n   \n    vec2 o = (E - R*.5) / R.x;\n    o *= 5.;\n    o += vec2(iTime * .1);\n    \n    vec3 col = vec3(1.);\n    vec3 oc = col;\n    vec2 u;\n    \n    float id, aa;\n    \n    vec2 gr, ce;\n    for (float g = 0.; g < 3.; g++){\n        for (float i = 0.; i < 1. ; i+=.5) {\n            for (float j = 0.; j < 1.; j+=.5) {\n                u = o + vec2(i, j);\n            \n                gr = floor(u);\n                id = hash21(gr);\n                if (id * g > .25) continue;\n                \n                ce = (u - gr - .5) * 2.;\n                ce *= ro((PI / 2.) * floor(id * 10.));\n    \n                vec3 c1 = mod(g, 2.) == 0. ? oc : vec3(.6,.9,.6);\n                vec3 c2 = mod(g, 2.) == 0. ? vec3(.7,.95,.5) : oc;\n                vec3 c3 = mod(g, 2.) == 0. ? vec3(.6,.95,.8) : oc;\n                vec3 c4 = mod(g, 2.) == 0. ? vec3(.7,.9,.7) : vec3(1.,1.,.8);\n                \n                aa = 2. * (g * 2. + 2.);\n               \n                col = mix(col, c1, s(cir(ce, vec2(0.), .0, .5), aa));\n                col = mix(col, c2, s(cir(ce, vec2(0.), .0, .11), aa));\n                col = mix(col, c1, s(cir(ce, vec2(0.), .0, .05), aa));\n                col = mix(col, c4, s(cir(ce, vec2(0.), .0, .02), aa));\n                \n                col = mix(col, c1, s(cir(ce, vec2( .5, .5), .0, 1. / 3.), aa));\n                col = mix(col, c1, s(cir(ce, vec2(-.5, .5), .0, 1. / 3.), aa));\n                col = mix(col, c1, s(cir(ce, vec2( .5,-.5), .0, 1. / 3.), aa));\n                col = mix(col, c1, s(cir(ce, vec2(-.5,-.5), .0, 1. / 3.), aa));\n\n                col = mix(col, c2, s(cir(ce, vec2( .5, .5), .0, 1. / 4.), aa));\n                col = mix(col, c2, s(cir(ce, vec2(-.5, .5), .0, 1. / 4.), aa));\n                col = mix(col, c2, s(cir(ce, vec2( .5,-.5), .0, 1. / 4.), aa));\n                col = mix(col, c2, s(cir(ce, vec2(-.5,-.5), .0, 1. / 4.), aa));\n\n                col = mix(col, c3, s(cir(ce, vec2( .5, .5), .0, 1. / 5.), aa));\n                col = mix(col, c3, s(cir(ce, vec2(-.5, .5), .0, 1. / 5.), aa));\n                col = mix(col, c3, s(cir(ce, vec2( .5,-.5), .0, 1. / 5.), aa));\n                col = mix(col, c3, s(cir(ce, vec2(-.5,-.5), .0, 1. / 5.), aa));\n \n                col = mix(col, c4, s(cir(ce, vec2( .5, .5), .0, 1. / 6.1), aa));\n                col = mix(col, c4, s(cir(ce, vec2(-.5, .5), .0, 1. / 6.1), aa));\n                col = mix(col, c4, s(cir(ce, vec2( .5,-.5), .0, 1. / 6.1), aa));\n                col = mix(col, c4, s(cir(ce, vec2(-.5,-.5), .0, 1. / 6.1), aa));\n                \n                col = mix(col, c1, s(cir(ce, vec2( .5, .5), .0, 1. / 12.1), aa));\n                col = mix(col, c1, s(cir(ce, vec2(-.5, .5), .0, 1. / 12.1), aa));\n                col = mix(col, c1, s(cir(ce, vec2( .5,-.5), .0, 1. / 12.1), aa));\n                col = mix(col, c1, s(cir(ce, vec2(-.5,-.5), .0, 1. / 12.1), aa));\n                \n                col = mix(col, c3, s(cir(ce, vec2(-.18, .18), .0, 1. / 9.), aa));\n                col = mix(col, c3, s(cir(ce, vec2( .18,-.18), .0, 1. / 9.), aa));\n                col = mix(col, c1, s(cir(ce, vec2(-.18, .18), .0, 1. / 18.), aa));\n                col = mix(col, c1, s(cir(ce, vec2( .18,-.18), .0, 1. / 18.), aa));\n\n                col = mix(col, c3, s(cir(ce, vec2(-.5, .0), .0, 1. / 6.1), aa));\n                col = mix(col, c3, s(cir(ce, vec2( .5, .0), .0, 1. / 6.1), aa));\n                col = mix(col, c3, s(cir(ce, vec2( .0,-.5), .0, 1. / 6.1), aa));\n                col = mix(col, c3, s(cir(ce, vec2( .0, .5), .0, 1. / 6.1), aa));\n                \n                col = mix(col, c2, s(cir(ce, vec2(-.5, .0), .0, 1. / 9.), aa));\n                col = mix(col, c2, s(cir(ce, vec2( .5, .0), .0, 1. / 9.), aa));\n                col = mix(col, c2, s(cir(ce, vec2( .0,-.5), .0, 1. / 9.), aa));\n                col = mix(col, c2, s(cir(ce, vec2( .0, .5), .0, 1. / 9.), aa)); \n         \n                if (ce.y > -(1. / .6) && ce.y < .5 && ce.x < .5)\n                    col = mix(col, c2, s(cir(ce, vec2(.5), .5, 1. /  20.), aa));\n                if (ce.y <  (1. / .6) && ce.y >-.5 && ce.x >-.5) \n                    col = mix(col, c2, s(cir(ce, vec2(-.5), .5, 1. / 20.), aa)); \n                \n                col = mix(col, c1, s(cir(ce, vec2(-.147,-.147), .0, 1. / 40.), aa));\n                col = mix(col, c1, s(cir(ce, vec2(-.25,-.065), .0, 1. / 40.), aa));\n                col = mix(col, c1, s(cir(ce, vec2(-.065,-.25), .0, 1. / 40.), aa));\n                \n                col = mix(col, c1, s(cir(ce, vec2( .147, .147), .0, 1. / 40.), aa));\n                col = mix(col, c1, s(cir(ce, vec2( .25, .065), .0, 1. / 40.), aa));\n                col = mix(col, c1, s(cir(ce, vec2( .065, .25), .0, 1. / 40.), aa));\n            }\n        }\n        // magic formula (works only for g < 3.), i gonna fix this in the near future\n        o += pow(1./8., g + 1.) * (g * 7. + 1.);\n        o *= 2.;\n    }\n    \n    O = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}