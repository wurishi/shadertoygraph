{"ver":"0.1","info":{"id":"wtdSzl","date":"1581977149","viewed":164,"name":"Undertale - Waterfall 2","username":"rmccampbell7","description":"Undertale \"Waterfall\" (original by Toby Fox, arranged by Manel NÃ¡vola)\nImproved version of my original (https://www.shadertoy.com/view/Wly3Ww), this has polyphony and more precise timing. From https://musescore.com/minecraftvideosr/scores/1355971","likes":4,"published":1,"flags":8,"usePreview":0,"tags":["sound","undertale"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float[256] heart = float[256](\n    0., 0., 1., 1., 0., 0., 0., 0., 0., 0., 0., 0., 1., 1., 0., 0.,\n    0., 1., 1., 1., 1., 1., 0., 0., 0., 0., 1., 1., 1., 1., 1., 0.,\n    1., 1., 1., 1., 1., 1., 1., 0., 0., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 0., 0., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    0., 0., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 0., 0.,\n    0., 0., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 0., 0.,\n    0., 0., 0., 0., 1., 1., 1., 1., 1., 1., 1., 1., 0., 0., 0., 0.,\n    0., 0., 0., 0., 1., 1., 1., 1., 1., 1., 1., 1., 0., 0., 0., 0.,\n    0., 0., 0., 0., 0., 0., 1., 1., 1., 1., 0., 0., 0., 0., 0., 0.,\n    0., 0., 0., 0., 0., 0., 1., 1., 1., 1., 0., 0., 0., 0., 0., 0.\n);\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));\n\n    ivec2 pix = ivec2(floor(vec2(1,-1)*(fragCoord-iResolution.xy/2.)/10.)) + 8;\n    if (min(pix.x, pix.y) >= 0 && max(pix.x, pix.y) < 16) {\n        col *= heart[pix.x+pix.y*16];\n    } else {\n        col = vec3(0);\n    }\n\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"const float tau = 6.2831855;\nconst float bps = 2.5;\nconst float dt = 1.0/bps;\nconst float vol = .1;\n\n\nfloat midi2freq(int note)\n{\n    return note > 0 ? 440.0 * pow(2.0, float(note - 69) / 12.0) : 0.;\n}\n\n// from https://www.shadertoy.com/view/lsfSW2\nfloat music_box(float freq, float time)\n{\n    float y = 0.0;\n    y += 0.35*sin(1.00*tau*freq*time);\n    y += 0.22*sin(3.00*tau*freq*time);\n    y += 0.14*sin(5.00*tau*freq*time);\n    y += 0.07*sin(7.00*tau*freq*time);\n    y += 0.03*sin(9.00*tau*freq*time);\n    y *= exp(-2.*time);\n\treturn y;\n}\n\n#define N(n, d) t -= float(d)*dt; if (t >= 0.) s += music_box(midi2freq(n), t);\n\nvec2 mainSound( in int samp,float time)\n{\n    float t = mod(time, 288.*dt);\n    float s = 0.;\n/*\n    // Alternate arrangement from https://musescore.com/user/6817806/scores/1612901\n    N(67,0) N(71,0) N(52,0) N(64,0) N(59,1) N(71,1) N(76,0) N(64,0);\n    N(79,2) N(76,2) N(45,0) N(52,1) N(69,1) N(78,0) N(57,0) N(71,1);\n    N(79,0) N(72,1) N(81,0) N(51,0) N(63,0) N(69,1) N(78,0) N(71,1);\n    N(79,0) N(52,0) N(59,1) N(64,1) N(78,1) N(52,1) N(76,1) N(74,0.5);\n    N(72,0.5) N(48,0) N(55,1) N(69,1) N(78,0) N(60,0) N(71,1) N(79,0);\n    N(72,1) N(81,0) N(47,0) N(59,0) N(74,1) N(83,0) N(71,1) N(79,0);\n    N(52,0) N(59,1) N(71,1) N(78,0) N(67,0) N(71,2) N(52,0) N(64,0);\n    N(69,2) N(72,0) N(76,0) N(48,0) N(55,1) N(69,1) N(74,0) N(60,0);\n    N(55,1) N(72,1) N(64,0) N(66,2) N(74,0) N(47,0) N(64,1) N(72,0);\n    N(54,0) N(62,1) N(71,0) N(59,0) N(62,1) N(69,0) N(47,1) N(76,1);\n    N(67,1) N(71,0) N(48,0) N(55,1) N(64,1) N(66,1) N(67,1) N(50,0);\n    N(62,0) N(72,1) N(67,1) N(71,0) N(52,0) N(59,1) N(71,1) N(76,0);\n    N(64,0) N(59,1) N(76,1) N(79,0) N(67,0) N(69,2) N(76,0) N(45,0);\n    N(52,1) N(69,1) N(78,0) N(57,0) N(71,1) N(79,0) N(72,1) N(81,0);\n    N(51,0) N(63,0) N(69,1) N(78,0) N(71,1) N(79,0) N(52,0) N(59,1);\n    N(67,1) N(78,1) N(52,1) N(64,0) N(76,1) N(74,0.5) N(72,0.5) N(48,0);\n    N(55,1) N(69,1) N(78,0) N(60,0) N(71,1) N(79,0) N(72,1) N(81,0);\n    N(47,0) N(59,0) N(74,1) N(83,0) N(71,1) N(79,0) N(52,0) N(59,1);\n    N(71,1) N(78,0) N(67,0) N(71,2) N(52,0) N(64,0) N(69,2) N(72,0);\n    N(76,0) N(48,0) N(55,1) N(69,1) N(74,0) N(64,0) N(55,1) N(72,1);\n    N(60,0) N(55,1) N(66,1) N(74,0) N(47,0) N(64,1) N(72,0) N(54,0);\n    N(62,1) N(71,0) N(59,0) N(62,1) N(69,0) N(54,0) N(59,1) N(76,1);\n    N(54,0) N(67,1) N(71,0) N(48,0) N(55,1) N(60,1) N(78,1) N(79,1);\n    N(47,0) N(59,0) N(78,1) N(71,1) N(76,0) N(81,0) N(52,0) N(64,0);\n    N(59,1) N(71,1) N(76,0) N(81,0) N(67,0) N(52,2) N(64,0) N(81,1);\n    N(69,1) N(78,0) N(45,0) N(52,1) N(78,1) N(57,0) N(79,1) N(60,0);\n    N(78,1) N(52,0) N(79,1) N(67,1) N(71,0) N(78,0) N(48,0) N(55,1);\n    N(60,1) N(62,1) N(80,1) N(64,0) N(81,0.15) N(55,0.85) N(72,1) N(76,0);\n    N(50,0) N(57,1) N(62,1) N(78,1) N(79,1) N(47,0) N(59,0) N(78,1);\n    N(71,1) N(76,0) N(81,0) N(52,0) N(59,1) N(71,1) N(76,0) N(81,0);\n    N(67,0) N(59,1) N(64,1) N(81,1) N(69,1) N(78,0) N(45,0) N(52,1);\n    N(78,1) N(57,0) N(79,1) N(52,0) N(78,1) N(60,0) N(79,1) N(67,1);\n    N(71,0) N(78,0) N(48,0) N(55,1) N(60,1) N(64,1) N(80,1) N(55,0);\n    N(81,0.15) N(48,0.85) N(72,1) N(76,0) N(50,0) N(57,1) N(62,1) N(78,1);\n    N(79,1) N(47,0) N(59,0) N(78,1) N(71,1) N(76,0) N(81,0) N(52,0);\n    N(64,0) N(71,2) N(76,0) N(81,0) N(64,0) N(59,1) N(67,1) N(81,1);\n    N(69,1) N(78,0) N(45,0) N(57,0) N(52,1) N(78,1) N(57,0) N(79,1);\n    N(60,0) N(78,1) N(52,0) N(79,1) N(67,1) N(71,0) N(78,0) N(48,0);\n    N(55,1) N(60,1) N(62,1) N(80,1) N(64,0) N(81,0.15) N(55,0.85) N(72,1);\n    N(76,0) N(50,0) N(57,0) N(62,0) N(69,2) N(78,0) N(71,1) N(79,0);\n    N(72,1) N(81,0) N(41,2) N(53,0) N(84,4) N(86,1) N(88,1) N(86,2);\n    N(84,2) N(83,2) N(40,0) N(52,0);\n*/\n    // Notes transcribed from https://musescore.com/minecraftvideosr/scores/1355971\n    N(64,0) N(71,1) N(78,1) N(74,1) N(76,1) N(71,1) N(67,1) N(71,1);\n    N(64,1) N(71,1) N(78,1) N(79,1) N(81,1) N(79,1) N(78,1) N(74,1);\n    N(64,1) N(71,1) N(78,1) N(74,1) N(76,1) N(71,1) N(67,1) N(71,1);\n    N(64,1) N(71,1) N(78,1) N(79,1) N(81,1) N(79,1) N(78,1) N(74,1);\n    N(64,1) N(24,0) N(71,1) N(78,1) N(74,1) N(76,1) N(71,1) N(67,1);\n    N(71,1) N(64,1) N(23,0) N(71,1) N(78,1) N(79,1) N(81,1) N(79,1);\n    N(78,1) N(74,1) N(64,1) N(28,0) N(71,1) N(78,1) N(74,1) N(76,1);\n    N(71,1) N(67,1) N(71,1) N(64,1) N(71,1) N(78,1) N(79,1) N(81,1);\n    N(79,1) N(78,1) N(74,1) N(64,1) N(59,0) N(40,0) N(71,1) N(76,1);\n    N(64,0) N(74,1) N(76,1) N(67,0) N(71,1) N(69,1) N(64,0) N(45,0);\n    N(71,1) N(66,1) N(57,0) N(66,0) N(71,1) N(59,0) N(67,0) N(72,1);\n    N(60,0) N(69,0) N(39,0) N(69,1) N(57,0) N(66,0) N(64,1) N(67,0);\n    N(40,0) N(71,1) N(76,1) N(74,1) N(66,0) N(76,1) N(71,1) N(64,0);\n    N(62,0.5) N(69,0.5) N(60,0) N(36,0) N(71,1) N(66,1) N(57,0) N(66,0);\n    N(71,1) N(59,0) N(67,0) N(75,1) N(69,0) N(35,0) N(60,0) N(78,1);\n    N(71,0) N(63,0) N(64,1) N(64,0) N(40,0) N(71,1) N(76,1) N(66,0);\n    N(74,1) N(76,1) N(59,0) N(71,1) N(69,1) N(59,0) N(64,0) N(36,0);\n    N(71,1) N(66,1) N(57,0) N(62,0) N(71,1) N(69,1) N(55,0) N(60,0);\n    N(71,1) N(66,1) N(62,0) N(35,0) N(54,0) N(69,1) N(60,0) N(52,0);\n    N(74,1) N(50,0) N(59,0) N(76,1) N(57,0) N(78,1) N(74,1) N(64,0);\n    N(54,0) N(76,1) N(36,0) N(55,0) N(59,0) N(71,1) N(69,1) N(71,1);\n    N(54,0) N(66,1) N(57,0) N(38,0) N(67,1) N(60,0) N(64,1) N(59,0);\n    N(40,0) N(71,1) N(76,1) N(64,0) N(74,1) N(76,1) N(67,0) N(71,1);\n    N(69,1) N(64,0) N(45,0) N(71,1) N(66,1) N(57,0) N(66,0) N(71,1);\n    N(59,0) N(67,0) N(72,1) N(60,0) N(69,0) N(39,0) N(69,1) N(57,0);\n    N(66,0) N(64,1) N(67,0) N(40,0) N(71,1) N(76,1) N(74,1) N(66,0);\n    N(76,1) N(71,1) N(64,0) N(62,0.5) N(69,0.5) N(60,0) N(36,0) N(71,1);\n    N(66,1) N(57,0) N(66,0) N(71,1) N(59,0) N(67,0) N(75,1) N(69,0);\n    N(35,0) N(60,0) N(78,1) N(71,0) N(63,0) N(64,1) N(64,0) N(40,0);\n    N(71,1) N(76,1) N(66,0) N(74,1) N(76,1) N(59,0) N(71,1) N(69,1);\n    N(59,0) N(64,0) N(36,0) N(71,1) N(66,1) N(57,0) N(62,0) N(71,1);\n    N(69,1) N(55,0) N(60,0) N(71,1) N(66,1) N(62,0) N(35,0) N(54,0);\n    N(69,1) N(60,0) N(52,0) N(74,1) N(50,0) N(59,0) N(76,1) N(57,0);\n    N(78,1) N(74,1) N(64,0) N(54,0) N(76,1) N(36,0) N(55,0) N(59,0);\n    N(71,1) N(69,1) N(78,1) N(71,0) N(54,0) N(79,1) N(66,0) N(57,0);\n    N(38,0) N(78,1) N(67,0) N(60,0) N(76,1) N(81,0) N(64,0) N(28,0);\n    N(71,1) N(76,1) N(81,0) N(69,0) N(35,0) N(71,1) N(67,1) N(31,0);\n    N(76,1) N(81,0) N(71,0) N(72,1) N(78,0) N(64,0) N(33,0) N(71,1);\n    N(74,1) N(78,0) N(69,0) N(38,0) N(76,1) N(79,0) N(71,0) N(74,1);\n    N(78,0) N(74,0) N(35,0) N(76,1) N(79,0) N(71,0) N(72,1) N(78,0);\n    N(64,0) N(36,0) N(71,1) N(69,1) N(31,0) N(76,1) N(81,0) N(71,0);\n    N(67,1) N(33,0) N(71,1) N(71,1) N(76,0) N(64,0) N(38,0) N(71,1);\n    N(69,1) N(33,0) N(78,1) N(71,0) N(79,1) N(67,0) N(35,0) N(78,1);\n    N(71,0) N(76,1) N(81,0) N(64,0) N(28,0) N(71,1) N(76,1) N(81,0);\n    N(69,0) N(35,0) N(71,1) N(67,1) N(31,0) N(76,1) N(81,0) N(71,0);\n    N(72,1) N(78,0) N(64,0) N(33,0) N(71,1) N(74,1) N(78,0) N(69,0);\n    N(38,0) N(76,1) N(79,0) N(71,0) N(74,1) N(78,0) N(74,0) N(35,0);\n    N(76,1) N(79,0) N(71,0) N(72,1) N(78,0) N(64,0) N(36,0) N(71,1);\n    N(69,1) N(31,0) N(76,1) N(81,0) N(71,0) N(67,1) N(33,0) N(71,1);\n    N(71,1) N(76,0) N(64,0) N(38,0) N(71,1) N(69,1) N(33,0) N(78,1);\n    N(71,0) N(79,1) N(67,0) N(35,0) N(78,1) N(71,0) N(76,1) N(81,0);\n    N(64,0) N(28,0) N(71,1) N(76,1) N(81,0) N(69,0) N(35,0) N(71,1);\n    N(67,1) N(31,0) N(76,1) N(81,0) N(71,0) N(72,1) N(78,0) N(64,0);\n    N(33,0) N(71,1) N(74,1) N(78,0) N(69,0) N(38,0) N(76,1) N(79,0);\n    N(71,0) N(74,1) N(78,0) N(74,0) N(35,0) N(76,1) N(79,0) N(71,0);\n    N(72,1) N(78,0) N(64,0) N(36,0) N(71,1) N(69,1) N(31,0) N(76,1);\n    N(81,0) N(71,0) N(67,1) N(33,0) N(71,1) N(71,1) N(76,0) N(64,0);\n    N(38,0) N(71,1) N(69,1) N(33,0) N(78,1) N(71,0) N(79,1) N(67,0);\n    N(35,0) N(78,1) N(71,0) N(76,1) N(81,0) N(64,0) N(28,0) N(71,1);\n    N(76,1) N(81,0) N(69,0) N(35,0) N(71,1) N(67,1) N(31,0) N(76,1);\n    N(81,0) N(71,0) N(72,1) N(78,0) N(64,0) N(33,0) N(71,1) N(74,1);\n    N(78,0) N(69,0) N(38,0) N(76,1) N(79,0) N(71,0) N(74,1) N(78,0);\n    N(74,0) N(35,0) N(76,1) N(79,0) N(71,0) N(72,1) N(78,0) N(64,0);\n    N(36,0) N(71,1) N(69,1) N(31,0) N(76,1) N(81,0) N(71,0) N(67,1);\n    N(33,0) N(71,1) N(71,1) N(76,0) N(64,0) N(38,0) N(71,1) N(69,1);\n    N(33,0) N(76,1) N(71,0) N(69,1) N(77,0) N(67,0) N(35,0) N(71,1);\n    N(79,0) N(71,0) N(72,1) N(81,0) N(29,6) N(72,2) N(74,1) N(76,1);\n    N(74,2) N(72,2) N(71,2) N(28,0);\n\n    return vol*vec2(s);\n}\n","name":"Sound","description":"","type":"sound"}]}