{"ver":"0.1","info":{"id":"dtlyR2","date":"1690973282","viewed":211,"name":"Field flow 3","username":"ChunderFPV","description":"And another one.","likes":14,"published":1,"flags":0,"usePreview":0,"tags":["grid","flow","field","points","transform","magnetic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define H(a) (cos(vec3(0,1,2)+(a)*6.3)*.5+.5)  // hue\n#define QP(v) P(u.v, l, t, R.y/1e3)*.8         // quick points\n#define QG(v) G(u.v, t, s)*.1                  // quick grid\n\n// points: xy, overlap, value, size\nvec3 P(vec2 u, float l, float t, float r)\n{\n    float i = 0., f = i;\n    vec2 w = fwidth(u), p;\n    vec3 c = vec3(0);\n    for (; i++<l;)\n    {\n        p.x = round((u.x-i)/l)*l+i;\n        f = sin(6.2832*p.x*t);\n        p.y = round(u.y-f)+f;\n        c = max(c, r/length((u-p)/w));\n        p.y = f;\n        c = max(c, r/length((u-p)/w)*2.);\n    }\n    return c/max(1., abs(u.x));\n}\n\n// grid: xy, value, scale\nfloat G(vec2 u, float t, float s)\n{\n    vec2 l, g, v;\n    l = max(vec2(0), 1.-abs(fract(u+.5)-.5)/fwidth(u)/1.5);\n    g = 1.-abs(sin(3.1416*u));\n    v = (l + g*.5) * max(vec2(0), 1.-abs(sin(3.1416*round(u)*t))*s);\n    return max(v.x, v.y)/max(1., sqrt(abs(u.x)));\n}\n\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    float s = 15., // scale\n          l = 10., // overlap loop (detail)\n          t = iTime/60.;\n    vec2 R = iResolution.xy,\n         m = (iMouse.xy-.5*R)/R.y*4.;\n    vec3 u = vec3((U-.5*R)/R.y, 1)*s,\n         c = vec3(.01);\n    if (iMouse.z < 1.) m = vec2(cos(t*6.2832)*2., sin(t*6.2832*2.));\n    m *= s;\n    u.xy = (u.xy*u.xy + u.yx*u.yx + m.x) / abs(u.xy) + m;\n    u /= abs(u.yzx);\n    c += QP(xz) + QP(yz) + QP(xy) + QP(zy) + QP(yx) + QP(zx);\n    c += QG(xy) + QG(yz) + QG(zx);\n    c += H(u.z+t)*c;\n    C = vec4(c, 1);\n}","name":"Image","description":"","type":"image"}]}