{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"const int numPoints = 4;\nconst float rotations = 3.;\n\nfloat rand( vec2 n ) {\treturn fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }\n\nstruct Ray\n{\n\tvec2 point;\n\tvec2 direction;\n};\n\nfloat noise(vec2 n) {\n\tconst vec2 d = vec2(0.0, 1.0);\n\tvec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n\treturn mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n}\n\nvec2 noise2(vec2 n){ return vec2(noise(vec2(n.x+0.2, n.y-0.6)), noise(vec2(n.y+3., n.x-4.)));}\n\nRay GetRay(float i)\n{\n\tvec2 position = noise2(vec2(i*6.12+iTime*0.1, i*4.43+iTime*0.1));\n\treturn Ray(\n\t\tposition,\n\t\tnormalize(noise2(vec2(i*7.+iTime*0.05, i*6.))*2.0-1.0));\t\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\t\n\tvec2 uv = fragCoord.xy / min(iResolution.x,iResolution.y);\n\tvec2 kaleidoscopePoint = noise2(vec2(iTime*0.5,-iTime*0.3))*\n\t\tmax(iResolution.x,iResolution.y)/min(iResolution.x,iResolution.y);\n\tvec2 curPos = uv-kaleidoscopePoint;\n\t\n\tfloat angle=atan(curPos.y, curPos.x);\n\tfloat dist =length(curPos);\n\t\n\tangle = angle*rotations;\n\tcurPos.x=cos(angle)*dist;\n\tcurPos.y=sin(angle)*dist;\n\tcurPos += kaleidoscopePoint;\t\t\t\t\n\t\t\t\n\tfor(int i=0;i<numPoints;i++)\n\t{\n\t\tRay ray=GetRay(float(i+1)*3.);\t\n\t\tfloat offset=dot(curPos-ray.point, ray.direction);\n\t\tif(offset<0.)\n\t\t{\n\t\t\tcurPos -= ray.direction*offset*2.0;\n\t\t}\n\t}\n\t\n\tfragColor.rgb = texture( iChannel0, vec2(curPos.x,curPos.y) ).xyz;\t\n\tfragColor.a = 1.0;\t\t\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XdsGz7","date":"1366231141","viewed":300,"name":"Kaleidoscope TvÃ¥","username":"mfagerlund","description":"Another kaleidoscope - this one has radial symmetry. Some kind of rythmic cycles would probably be nicer than the noise I'm using...","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["2d","kaledoscope","radialsymmetry"],"hasliked":0,"parentid":"","parentname":""}}