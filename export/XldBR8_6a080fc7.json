{"ver":"0.1","info":{"id":"XldBR8","date":"1538610987","viewed":444,"name":"MattC's Radial Gradient","username":"mchiasson","description":"Six parameter dual circle multi-step radial gradient. ","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["radial","gradient","focal","html5"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/**\n * This shader genrates the same exact output than the following HTML5 code: \n *\n *     var ctx = document.getElementById('canvas').getContext('2d');\n *\n *     var rad = ctx.createRadialGradient(375,300,75,300,225,200);\n *     rad.addColorStop(0, 'red');\n *     rad.addColorStop(0.33, 'yellow');\n *     rad.addColorStop(0.66, 'lime');\n *     rad.addColorStop(1.0, 'blue');\n *\n *     ctx.fillStyle = rad;\n *     ctx.fillRect(0, 0, 800, 600);\n *\n * https://codepen.io/mchiasson/pen/RerXXe\n *\n * Enjoy!\n *\n **/\n\n\n// Hardcoded 4 Color Stops as a demonstration.\nvec4 color0 = vec4(1,0,0,1);\nvec4 color1 = vec4(1,1,0,1);\nvec4 color2 = vec4(0,1,0,1);\nvec4 color3 = vec4(0,0,1,1);\nfloat colorStop0 = 0.0;\nfloat colorStop1 = 0.33;\nfloat colorStop2 = 0.66;\nfloat colorStop3 = 1.0;\n    \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Center point and radius\n    //float cx = iMouse.x;\n    //float cy = iResolution.y - iMouse.y;\n    float cx = 375.0;\n    float cy = 300.0;\n    float cr = 75.0;\n\n    // Focal point and radius\n    //float fx = iMouse.x;\n    //float fy = iResolution.y - iMouse.y;\n    float fx = 300.0;\n    float fy = 225.0;\n    float fr = 200.0;\n\n    vec2 center = vec2(cx, iResolution.y - cy);\n    vec2 focal = vec2(fx, iResolution.y - fy);\n\n    float x = focal.x - fragCoord.x;\n    float y = focal.y - fragCoord.y;\n    float dx = focal.x - center.x;\n    float dy = focal.y - center.y;\n    float r0 = fr;\n    float dr = cr - fr;\n    float a = dx * dx + dy * dy - dr * dr;\n    float b = -2.0 * (y * dy + x * dx + r0 * dr);\n    float c = x*x + y*y - r0*r0;\n    float t = 0.5 * (1.0/a) * (-b + sqrt(b*b - 4.0*a*c));\n    t = 1.0 - t;\n\n    vec4 color;\n    color = mix(color0, color1, clamp((t - colorStop0)/(colorStop1 - colorStop0), 0.0, 1.0));\n    color = mix(color,  color2, clamp((t - colorStop1)/(colorStop2 - colorStop1), 0.0, 1.0));\n    color = mix(color,  color3, clamp((t - colorStop2)/(colorStop3 - colorStop2), 0.0, 1.0));\n    fragColor = color;\n}","name":"Image","description":"","type":"image"}]}