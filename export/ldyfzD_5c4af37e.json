{"ver":"0.1","info":{"id":"ldyfzD","date":"1527777631","viewed":743,"name":"Kaleido lights","username":"NuSan","description":"Hypnotic patterns with lights and mirrors","likes":24,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define KALEIDO 1\n#define LIGHTCOUNT 100\n\n#define v2Resolution iResolution\n#define out_color fragColor\n#define time iTime\n\n#define pi 3.141592\n\n\nvec2 r2(vec2 uv) {\n  return fract(sin(uv*vec2(1236.512,2975.233)+uv.yx*vec2(4327.135,6439.123)+vec2(1234.93,1347.367))*vec2(4213.523744,974.93242));\n}\n\nvec2 r2(int i) {\n  return fract(sin(float(i)*vec2(1236.512,2975.233)+vec2(1234.93,1347.367))*vec2(4213.523744,974.93242));\n}\n\nmat2 rot(float a) {\n  float ca=cos(a);\n  float sa=sin(a);\n  return mat2(ca,sa,-sa,ca);\n}\n\nvec2 mir(vec2 uv, float a) {\n\n  mat2 ra=rot(a);\n  uv *= ra;\n  uv.y=abs(uv.y);\n  uv *= ra;\n\n  return uv;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  vec2 uv = vec2(fragCoord.x / v2Resolution.x, fragCoord.y / v2Resolution.y);\n  uv -= 0.5;\n  uv /= vec2(v2Resolution.y / v2Resolution.x, 1);\n\n  float mt=time*0.2;\n#if KALEIDO\n  uv = mir(uv, mt*0.2);\n  uv = mir(uv, -mt*0.4);\n  uv = mir(uv, mt*0.6);\n  uv = mir(uv, -mt*0.9);\n#endif\n\n  float ht=time*0.2;\n  uv += abs(vec2(sin(ht),cos(ht)))*(sin(time*0.3)*0.5+0.5)*0.3;\n\n  vec3 tcol=mix(vec3(0.8,0.2,0.2),vec3(0.2,0.8,0.9),sin(1234.12134+time*vec3(0.5,1.3,2.8)));\n  float pt=time*0.1;\n  float pulse = abs(fract(pt*floor(abs(fract(pt*4.0)*4.0-0.5)*2.0))-0.5)*2.0;\n\n  float st=time*0.2;\n\n  float d=10000.0;\n  vec3 col = vec3(0);\n  for(int i=0; i<LIGHTCOUNT; ++i) {\n\n    vec2 rr=r2(i*10);\n    float a=rr.x*pi*2.0 + st + sin(st*0.6+rr.y)*1.3 + sin(st*0.2+rr.y)*0.6;\n    vec2 p = uv+(r2(i)-0.5)*0.5 + vec2(cos(a),sin(a))*0.2;\n    float lp=length(p);\n    d=min(d,lp-0.01);\n\n    vec3 lcol=mix(vec3(0.8,0.2,0.2),vec3(0.2,0.8,0.9),sin(rr.y*100.0*vec3(0.5,1.3,2.8)));\n    lcol = mix(lcol,tcol,pulse);\n    float bd = 0.0015/lp;\n    col += lcol*bd;\n\n  }\n\n  //col = vec3(0.003)/max(0.001,d);\n  float gt=time*0.2;\n  vec3 lcol=mix(vec3(0.8,0.2,0.2),vec3(0.2,0.8,0.9),sin(time*vec3(0.5,1.3,2.8)));\n  col += abs(fract(gt*floor(abs(fract(gt*4.0)*4.0)-0.5)*2.0)-0.5)*2.0*lcol*pow(abs(fract(d*30.0-time*1.0)-0.5)*2.0,8.0)*max(0.0,0.6 / length(uv)-0.9);\n\n  out_color = vec4(col,0);\n}","name":"Image","description":"","type":"image"}]}