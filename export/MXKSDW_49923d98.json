{"ver":"0.1","info":{"id":"MXKSDW","date":"1719978039","viewed":66,"name":"HW2_Random Lasers","username":"EurekaChen","description":"Random Lasers","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const int LaserCount = 4;\nconst float T = 1.0;\n\nfloat rand(in float seed, in float minn, in float maxx)\n{\n    return fract(sin(seed * 614.357) * 865.39) * (maxx - minn) + minn;\n}\nfloat sdLine(in vec2 p, in vec3 k, float r)\n{\n    return abs(p.x * k.x + p.y * k.y + k.z) / sqrt(k.x * k.x + k.y * k.y) - r / 2.0;\n}\n\n//  Function from IÃ±igo Quiles\n//  ref: https://www.shadertoy.com/view/MsS3Wc\nvec3 hsb2rgb( in vec3 c ){\n    vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),\n                             6.0)-3.0)-1.0,\n                     0.0,\n                     1.0 );\n    rgb = rgb*rgb*(3.0-2.0*rgb);\n    return c.z * mix(vec3(1.0), rgb, c.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (2.0*fragCoord-iResolution.xy) / iResolution.y;\n    vec3 col = vec3(0.0);\n\n\tfor( int i = 1; i <= LaserCount; i++ )\n    {\n        float timer = mod(iTime , T);\n        float seed = floor(iTime + float(i) * 2.0);\n        vec2 RandPos = vec2(rand(seed, -1.0, 1.0), rand(seed * 52.21, -1.0, 1.0));\n        vec3 RandDir = vec3(rand(seed * 321.45, -10.0, 10.0), rand(seed * 6.87, -10.0, 10.0), rand(seed * 94.312, -0.5, -0.5));\n\n        float r = 0.4 * rand(seed * 6.954, 0.9, 1.1) ;\n        float f = sdLine(uv - RandPos, RandDir, r - sqrt(timer));\n        vec3 laser = vec3(1) - vec3(smoothstep(0.0, 0.4, f));\n\n\n        vec3 White = vec3(1, 1, 1);\n        vec3 colorA = hsb2rgb(vec3(rand(seed * seed, 0.0, 1.0), rand(seed * 8.98, 0.5, 1.0), 1.0));\n        vec3 Black = vec3(0, 0, 0);\n        vec3 color = mix(colorA, Black, f / r);\n\n        col += color * laser ;\n    }\n\n\tfragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}