{"ver":"0.1","info":{"id":"WljcDt","date":"1595782518","viewed":136,"name":"XOR Doughnut LOL","username":"970037201","description":"The kaleidoscopic Doughnut from a non euclidean universe. My first official Shadertoy project.","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["euclidean"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 donut(float inner_diam, float outer_diam, float blur, vec2 uv){\n    //create smoothstep off of length from origin, creating smooth circle\n\tvec3 val = vec3(smoothstep(outer_diam, outer_diam - blur, length(uv)));\n    //multiply circle by inverse of another, smaller circle\n    vec3 donut = val * smoothstep(inner_diam - blur, inner_diam, length(uv));\n    //get an integer location of uv in range 256.\n    ivec2 xoruv = abs(ivec2(floor(uv*256.)));\n    //multiply donut color by xor pattern\n    donut *= vec3((xoruv.x ^ xoruv.y)%256)/256.;\n\treturn donut;\n}\n//generate pseudo random 3 parta vector from 2 part vector\nvec3 hash23(vec2 p) {\n\tp = fract(p * vec2(5.3983, 5.4427));\n    p += dot(p.yx, p.xy +  vec2(21.5351, 14.3137));\n\treturn fract(vec3(p.x * p.y * 95.4337, p.x * p.y * 97.597, p.x * p.y * 203.597));\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  \tvec2 uv = (fragCoord * 2. - iResolution.xy ) / iResolution.y;\n    float t = iTime * .25;\n    uv.x += sin(t)*.75;\n    t *= .5+cos(t)*0.01;\n    float curvature = cos(uv.y) * cos(uv.x);//curvature of the universe, positive or negative?\n    vec2 nuv = uv * mix(1./curvature, curvature, cos(t*2.));//say yay to derivative of tan!\n    nuv *= mat2(sin(t),-cos(t),cos(t),sin(t));\n    nuv *= 5.;\n    nuv += t * 5.;\n    vec2 boxes = fract(nuv*2.)*2. - 1.;\n    \n    //for each spot render donut\n    vec3 col = donut(.45,1.,.2, boxes);\n    col *= hash23(floor(nuv));\n    //multiply by big donut\n    col *= donut(0.35,1.,.05,uv);\n    // Output to screen\n    fragColor = vec4(col,1.);\n}","name":"Image","description":"","type":"image"}]}