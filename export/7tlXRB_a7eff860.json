{"ver":"0.1","info":{"id":"7tlXRB","date":"1626512075","viewed":254,"name":"Mandelbrot 001 orbit trap 2","username":"RiceFields","description":"Mandelbrot","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["mandelbrot","fractals","orbittrap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define B 4.0\n#define N 200\n#define PERIOD 1.0/15.0\n#define LINE vec2(1.0, 1.0)\n#define C_MUL(a,b) vec2(a.x*b.x - a.y*b.y, a.x*b.y+a.y*b.x)\n\nfloat line_trap(vec2 p, vec2 a, vec2 b) {\n\tvec2 pa = p - a;\n    vec2 lvec = pa - dot(pa, b) / dot(b, b) * b;\n\treturn dot(lvec, lvec); \n}\n\nfloat trap(vec2 z) {\n    return line_trap(abs(sin(z)), abs(cos(z)), LINE);\n}\n\n\nfloat mandelbrot_pert(vec2 c, vec2 dc) {\n   vec2 z = vec2(.0);\n   vec2 dz = vec2(.0);\n   \n   float dist = 10e5;\n   for(int i = 0; i < N; ++i) {\n     // p(Z) = 2*Z*dz + dz^2 + c \n     dz = C_MUL((2.0*z+dz),dz) + dc;\n     // f(z) = z^2 + c\n     z = C_MUL(z, z) + c; \n     // check if perturbation escapes\n     if( dot(dz,dz)>(B*B) ) break;\n     dist = min(dist, trap(z+dz));\n   }\n   return dist;\n}\n\nvec3 image(vec2 fragCoord) {\n    vec2 uv = (fragCoord / iResolution.xy) * 2.0 - 1.0; // remap uv to [-1, 1]\n    uv.x *= iResolution.x / iResolution.y;\n        \n    // calculate and apply zoom\n    float zoom = .62 + .38*cos(iTime/PERIOD);\n    zoom = pow(zoom, 12.5);\n    vec2 c = vec2(-.745,.186);\n    vec2 dc = uv*zoom;\n    \n    float f = mandelbrot_pert(c, dc);\n    f = .5*log(f)/27.0;\n    \n    // calculate color\n    vec3 col = vec3(f*f);;\n\n    return (f*f*(100.0 - 1.0*f))*col;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\t// anti-aliasing\n\tfragColor = vec4(image(fragCoord.xy + vec2(0,0)), 1.0f);\n\tfragColor.rgb += image(fragCoord.xy + vec2(.5,.0));\n\tfragColor.rgb += image(fragCoord.xy + vec2(.0,.5));\n\tfragColor.rgb += image(fragCoord.xy + vec2(.5,.5));\n    fragColor.rgb += image(fragCoord.xy + vec2(.25,.25));\n\tfragColor.rgb += image(fragCoord.xy + vec2(.75,.25));\n\tfragColor.rgb += image(fragCoord.xy + vec2(.25,.75));\n\tfragColor.rgb += image(fragCoord.xy + vec2(.75,.75));\n\tfragColor.rgb /= 8.0;\n}","name":"Image","description":"","type":"image"}]}