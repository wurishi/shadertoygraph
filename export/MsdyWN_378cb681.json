{"ver":"0.1","info":{"id":"MsdyWN","date":"1519066057","viewed":270,"name":"Circular Buffer","username":"Lucanio","description":"Circular Buffer Visualization","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["ring"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Luke Craig 2/19/2018\n#define PI 3.1415926535897932384\n//#define radius 0.3\n//#define warped\n//#define stress\n\n\nfloat ringSmooth(vec2 c, vec2 uv, float r, float width){\n    float d = distance(uv,c);\n    float b = abs(d-r);\n    float edge = (b-width);\n    float edgewidth= 0.004;\n    return smoothstep(-edgewidth,edgewidth,-edge);\n}\n\nfloat circleSmooth(vec2 p,vec2 hk, float r){    \n    float d = length(p-hk);\n    float t = (r-d); \n    float edgewidth= 0.002;\n    return smoothstep(-edgewidth,edgewidth,t);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n#ifdef stress\n    for(int i =0;i<100000000;i++){\n#endif\n\tvec2 uv = (fragCoord - (iResolution.xy*0.5))/iResolution.y;\n        float radius = 0.25+(sin(iTime*0.1)+1.0)*0.1;\n    #ifdef warped\n\tuv=mix(uv,uv*uv.x,0.25);\n    #endif\n    vec3 col = vec3(0.196,0.243,0.262);\n    float increment = iTime*.5;\n    float dwp = 0.0;\n    float drp = 0.0;\n    float predelay = 0.01;\n    dwp += increment;\n\tfloat lfo_freq = 1.0;\n    drp += increment-((sin(iTime*lfo_freq)+1.0)*.2)-predelay;\n\t\n    vec2 circleWritePos = vec2(cos(dwp*2.0*PI),sin(dwp*2.0*PI))*radius;\n    vec2 circleReadPos = vec2(cos(drp*2.0*PI),sin(drp*2.0*PI))*radius;\n    float ring1 = ringSmooth(vec2(0.0),uv,radius,0.01);    \n        \n    vec2 midpoint = normalize(cross((vec3(circleWritePos,1.0)),(vec3(circleReadPos,1.0))).xy)*radius;\n    float distanceFromMidPoint = dot(normalize(uv),normalize(midpoint) );\n    float distanceFromRead = dot(normalize(midpoint),normalize(circleReadPos) );      \n    float a = -floor(distanceFromRead-distanceFromMidPoint);\n    a = clamp(a,0.0,1.0);\n    float uv_distFromWrite = dot(normalize(uv),normalize(circleWritePos));\n    vec3 bluering = mix(vec3(ring1),vec3(ring1)*(vec3(0.0,0.5,0.8)*vec3(uv_distFromWrite)),a);\n    col+=bluering;         \n\t\n    float circleWrite = circleSmooth(circleWritePos,uv, 0.03);\n    col=mix(col,vec3(0.247,0.592,0.714),circleWrite);\t\n    float circleRead = circleSmooth(circleReadPos,uv, 0.03);\n    col=mix(col,vec3(0.0,0.0,0.01),circleRead);\n    \n    fragColor = vec4(col,1.0);\n#ifdef stress\n    }\n#endif\n}","name":"Image","description":"","type":"image"}]}