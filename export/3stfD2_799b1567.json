{"ver":"0.1","info":{"id":"3stfD2","date":"1606053862","viewed":104,"name":"minimal raymarch","username":"dnkorbut","description":"minimal raymarch sphere","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["raymarch","minimal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define MAX_MARCH 64\n#define MAX_DST 100.\n#define MIN_DST .00032\n\nfloat map(vec3 p) {\n    return length(p) - 1.;\n}\n\nfloat march(vec3 start, vec3 dir) {\n    float ret = 0.;\n    int i;\n    float dst;\n    vec3 p;\n    \n    for(i = 0; i < MAX_MARCH; i++) {\n        p = start + dir * ret;\n        dst = map(p);\n        ret += dst;\n        if(ret > MAX_DST || dst < MIN_DST) {\n           break; \n        }\n    }\n    return ret;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord - .5 * iResolution.xy) / iResolution.y;\n\n    vec3 col = vec3(.0, .0, .0);\n    vec3 cam = vec3(.0, .0, -5.);\n    vec3 dir = vec3(uv, 1.);\n    \n    float dst = march(cam, dir);\n    \n    col = vec3(dst / -5. + 1.) * 5.;  \n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}