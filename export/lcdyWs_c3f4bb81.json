{"ver":"0.1","info":{"id":"lcdyWs","date":"1731369583","viewed":36,"name":"BALL TEST","username":"moka","description":"A B","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["b"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float opSmoothUnion(float d1, float d2, float k) {\n    float h = clamp(0.5 + 0.5 * (d2 - d1) / k, 0.0, 1.0);\n    return mix(d2, d1, h) - k * h * (1.0 - h);\n}\n\nfloat sdSphere(vec3 p, float s) {\n    return length(p) - s;\n}\n\nfloat map(vec3 p) {\n    float d = 2.0;\n    for (int i = 0; i < 8; i++) { // Reduced iteration count\n        float fi = float(i);\n        float time = iTime * (fract(fi * 412.531 + 0.513) - 0.5) * 2.0;\n        d = opSmoothUnion(\n            sdSphere(p + sin(time + fi * vec3(52.5126, 64.62744, 632.25)) * vec3(2.0, 2.0, 0.8),\n            mix(0.5, 1.0, fract(fi * 412.531 + 0.5124))),\n            d, 0.4\n        );\n    }\n    return d;\n}\n\nvec3 calcNormal(in vec3 p) {\n    const float h = 1e-5;\n    const vec2 k = vec2(1, -1);\n    return normalize(\n        k.xyy * map(p + k.xyy * h) +\n        k.yyx * map(p + k.yyx * h) +\n        k.yxy * map(p + k.yxy * h) +\n        k.xxx * map(p + k.xxx * h)\n    );\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord / iResolution.xy;\n    vec3 rayOri = vec3((uv - 0.5) * vec2(iResolution.x / iResolution.y, 1.0) * 6.0, 3.0);\n    vec3 rayDir = vec3(0.0, 0.0, -1.0);\n   \n    float depth = 0.0;\n    vec3 p;\n   \n    for (int i = 0; i < 32; i++) { // Reduced iteration count\n        p = rayOri + rayDir * depth;\n        float dist = map(p);\n        depth += dist;\n        if (dist < 1e-6) break;\n    }\n   \n    depth = min(6.0, depth);\n    vec3 n = calcNormal(p);\n    float b = max(0.0, dot(n, vec3(0.577)));\n    vec3 col = vec3(0.5 + 0.5 * b); // Simplified color computation\n    col *= exp(-depth * 0.15);\n   \n    fragColor = vec4(col, 1.0 - (depth - 0.5) / 2.0);\n}","name":"Image","description":"","type":"image"}]}