{"ver":"0.1","info":{"id":"wsyXDz","date":"1573910730","viewed":326,"name":"2dMountainscape","username":"ircss","description":"A mountain scape done with Triangular waves.","likes":20,"published":1,"flags":0,"usePreview":0,"tags":["2d","triangularwaves","mountainscape"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SkyColorTop         vec3(39,  98,  176) /255.\n#define SkyColorButtom      vec3(140, 185, 245) /255.\n#define MountainOneBCol     vec3(140, 95,  84 ) /255.\n#define MountainOneSCol     vec3(189, 178, 149) /255.\n#define MountainTwoBCol     vec3(150, 87,  60 ) /255.\n#define MountainTwoSCol     vec3(209, 166, 119) /255.\n#define MountainThreeBCol   vec3(158, 107, 55 ) /255.\n#define MountainThreeSCol   vec3(214, 127, 64 ) /255.\n#define MountainFourBCol    vec3(112, 37,  0  ) /255.\n#define MountainFourSCol    vec3(227, 77,  27 ) /255.\n#define PoltColorBase       vec3(112, 37,  0  ) /255.\n#define PoltColorSecond     vec3(227, 77,  27 ) /255.\n#define BushesBase          vec3(82,  56,  0  ) /255.\n#define BushesSecond        vec3(130, 85,   0 ) /255.\n\n\n#define std           uvCoordinate, col\n#define mountainOne   MountainOneBCol,   MountainOneSCol,   0.5, 0.4,  0.2,  0.0085, 1.\n#define mountainTwo   MountainTwoBCol,   MountainTwoSCol,   0.3, 0.3,  0.35, 0.02,   13.\n#define mountainThree MountainThreeBCol, MountainThreeSCol, 0.2, 0.09, 0.25, 0.1,    7.\n#define mountainFour  MountainFourBCol,  MountainFourSCol,  0.1, 0.1,  0.2,  0.3,    22.\n\n// HELPERS -----------------------------------------------\nfloat rand(float seed){\n    return fract(sin(seed *512.)*42.1);\n}\n\n\n// =======================================================\n// DRAWING -----------------------------------------------\n\nfloat tWave(float x, float amplitude, float frequency){\n      return abs((fract(x*frequency) *2.)-1.) * amplitude;   \n}\n\nvoid sky(in vec2 coord, inout vec3 color){\n    color = mix(SkyColorButtom, SkyColorTop, coord.y);\n}\n\n\n\nvoid mountain(in vec2 coord, inout vec3 color,\n              in vec3 col1, in vec3 col2, float beginingHeight, \n              float baseFrecuqncy, float baseAmplitude, float scrollSpeed, float seed ){\n    \n    \n    coord.x += iTime*scrollSpeed;\n    float f  = beginingHeight ;\n    float d  = 0.  ;\n    \n    for(float i = 1.; i<10.; i++){\n      \n        f +=  tWave( coord.x + rand(i+seed),baseAmplitude / pow(1.95,i) ,baseFrecuqncy * pow(1.95,i));\n        \n    }\n    \n        for(float i = 1.; i<4.; i++){\n      \tfloat t  = tWave( coord.x+ rand(i+seed),baseAmplitude / pow(1.95,i) ,baseFrecuqncy * pow(1.95,i));\n              d +=  tWave(coord.x+ rand(i+seed)- coord.y*(t-0.5)*(4.+rand(i+seed)),baseAmplitude / pow(1.95,i) ,baseFrecuqncy * pow(1.95,i));\n    }\n    \n          d    = smoothstep(-0.0015,0.0015, dFdx(d));\n       \n          f    = 1.-step(f , coord.y);\n    \n    vec3 cTemp = mix(col2,col1 , d);\n         color = mix(color, cTemp, f);\n}\n\nvoid Pols(in vec2 coord, inout vec3 color){\n    \n    coord.x += iTime *1.8;\n    float f  = smoothstep(0.015, 0.05, fract(coord.x*0.5));\n    vec3  c  = mix(PoltColorBase, PoltColorSecond, smoothstep(0.2, 0.4, f));\n       color = mix(c,  color, f);\n    \n}\n\nvoid Bushes(in vec2 coord, inout vec3 color){\n    \n    coord.x += iTime *3.8;\n    \n     \n    float baseAmplitude = 1.;\n    float baseFrecuqncy = .1;\n    \n    float t = 0.;\n    float stripes =0.;\n       for(float i = 1.; i<8.; i++){\n      \n        float yC = tWave( coord.y + rand(i),baseAmplitude / pow(1.95,i) ,baseFrecuqncy * pow(1.95,i));\n        t +=  tWave( coord.x +yC*10.+ rand(i),baseAmplitude / pow(1.95,i) ,baseFrecuqncy * pow(1.95,i));\n        stripes +=tWave( coord.x *yC*10.+ rand(i),baseAmplitude / pow(1.95,i) ,baseFrecuqncy * pow(1.95,i));\n    }\n    \n    float d = (fract(coord.x*1.)-0.5)/0.5;\n    float f  = 1. -smoothstep(t, t+ 0.05, abs(d));\n   \n    float f1 = 1. -smoothstep(stripes, stripes+ 0.05, abs((fract(coord.x*1.)-0.5)/0.5));\n    \n          f  *= 1.-step(t-0.5, coord.y);\n    vec3  c  = mix(BushesBase, BushesSecond, coord.y);\n       color = mix(color,  c, mix(f, f*f1, step(0.,d)));\n    \n}\n\n// =============================================================\n// MAIN --------------------------------------------------------\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // ---------------------------------------------------------\n    // ---COORDINATE SETUP\n    \n    vec2  uvCoordinate    =  fragCoord/iResolution.xy;\n    float aCorreection    =  iResolution.x/iResolution.y;\n    \n          uvCoordinate.x *=  aCorreection;\n    \t \n    // ---------------------------------------------------------\n\n    vec3 col = vec3(0.,0.,0.);\n\n    \n    sky(std);\n    mountain(std, mountainOne  );\n    mountain(std, mountainTwo  );\n    mountain(std, mountainThree);\n    mountain(std, mountainFour );\n    \n    Pols(std);\n    Bushes(std);\n    \n    //day night stuff\n    //col = mix(PoltColorBase, col, vec3(sin(iTime*0.1),sin(iTime*0.1+0.12),sin(iTime*0.1+0.1)));\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}