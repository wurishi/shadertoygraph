{"ver":"0.1","info":{"id":"XdVyDh","date":"1521932205","viewed":154,"name":"CollatzRGB","username":"gPlatl","description":"Drawing Collatz loop count as RGB values. Searching for patterns ... senseless?\nCan we use it to get random numbers ?\n","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["numbers","loop","collatz"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n// CollatzRGB.glsl\n\n// see Collatz and Self Similarity by Inigo Quilez\n//   https://www.youtube.com/watch?v=GJDz4kQqTV4\n\n#define MAX_COUNT 800\n\nint CollatzInt (int x)  // get Collatz loop count (integer)\n{\n  for (int k = 0; k < MAX_COUNT; k++) \n  { if ((x & 1) == 0) x /= 2;         // odd?\n    else              x = 3 * x + 1;  // even\n    if (x <= 2) return k;\n  }\n  return MAX_COUNT;\n}\n\nint CollatzFloat (float x)  // get Collatz loop count (float)\n{\n  for (int k = 0; k < MAX_COUNT; k++) \n  { if (mod(x, 2.0) <= 0.0)   x /= 2.0;           // odd ? \n    else                      x = 3.0 * x + 1.0;  // even\n    // x = floor(x);\n    if (x <= 2.0) return k;\n  }\n  return MAX_COUNT;\n}\n\nvec3 HSB2RGB(float h, float s, float b) // Hue-Saturation-Brightness to Red-Green-Blue\n{\n  return b*(1.0-s)+(b-b*(1.0-s))*clamp(abs(abs(6.0*(h-vec3(0,1,2)/3.0))-3.0)-1.0,0.0,1.0); \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 uv )\n{\n  float d = 24.*iTime + abs(uv.y*iResolution.x + uv.x);\n  float cv = 0.0;\n  if (iMouse.z < 0.5)       // mousePressed ?\n       cv = float(CollatzInt(int(d))) / 180.;\n//  else cv = float(CollatzFloat(trunc(d))) / 180.;\n  else cv = float(CollatzFloat(d)) / 180.;\n    \n  vec3 rgb = HSB2RGB(cv, 1.0, 1.0);\n  fragColor = vec4(rgb, 1.0);\n  //fragColor = vec4(cv,cv,cv, 1.0);  // B+W\n}","name":"Image","description":"","type":"image"}]}