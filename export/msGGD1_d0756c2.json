{"ver":"0.1","info":{"id":"msGGD1","date":"1678450516","viewed":331,"name":"Mountains  and rainforest","username":"guil","description":"Mountains and rainforest\nUsing Yonatan clouds/mountains combined field","likes":15,"published":3,"flags":0,"usePreview":0,"tags":["clouds","mountains"],"hasliked":0,"parentid":"fddSzl","parentname":"Mountains at dawn 2"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n// Created by S. Guillitte 2021\n \n\nmat2 rot(float a) {\n\treturn mat2(cos(a),sin(a),-sin(a),cos(a));\t\n}\n\nvec3 l = vec3(1.);\n\n//Yonatan clouds/mountains combined field\nvec3 field(in vec3 p) {\n\t\n\tfloat s=2.,e,f,o;\t\n\tfor(e=1.2-p.y,f=p.y;s<8e2;s*=1.7)\n            p.xz*=rot(1.),\n            e+=abs(dot(sin(p*s)/s,.8*l)),\n            f+=abs(dot(sin(p.xz*s*.4)/s,l.xz));\n    o = 1.- .15*(f>.001?e:-exp(-f*f));\n    return vec3(max(o,0.),min(f,max(e,.05)),f);\n}\n\n\nvec3 raycast( in vec3 ro, vec3 rd )\n{\n    float t = 2.5;\n    float dt = .035;\n    vec3 col= vec3(0.);\n    for( int i=0; i<100; i++ )\n\t{                \n        vec3 v = field(ro+t*rd);  \n        float c=v.x, f=v.y, d=v.z;\n        t+=dt*f;\n        dt *= 1.036;\n        d=1.-exp(-d*d);\n        col = .95*col+ .04*vec3(c*c*c*d, c*c*(d-c+1.2), c*d)*(.1+.8*t);\t\n    }\n    \n    return col;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat t = iTime;\n    vec2 q = fragCoord.xy / iResolution.xy;\n    vec2 p = -1.0 + 2.0 * q;\n    p.x *= iResolution.x/iResolution.y;\n    \n\n    // camera\n\n    vec3 ro = vec3(.3,3.,.3);   \n    ro.yz*=rot(-.6); \n    ro.xz*=rot(0.1*t);\n    \n    vec3 ta = vec3( 0.0 , 2.0, 0.0 );\n    vec3 ww = normalize( ta - ro );\n    vec3 uu = normalize( cross(ww,vec3(0.0,1.0,0.0) ) );\n    vec3 vv = normalize( cross(uu,ww));\n    vec3 rd = normalize( p.x*uu + p.y*vv + 4.0*ww );\n    ro.x -=t*.4;\n\n\t// raymarch \n    \n    vec3 col = raycast(ro,rd);\n    \n\t\n\t// shade\n    \n    col =  .5 *(log(1.+col));\n    col = clamp(col,0.,1.);\n    fragColor = vec4( col, 1.0 );\n\n}\n","name":"Image","description":"","type":"image"}]}