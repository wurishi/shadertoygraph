{"ver":"0.1","info":{"id":"432GWd","date":"1709403045","viewed":69,"name":"Hue remap","username":"moshe","description":"Re-color the texture by shifting hue","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["hue","hsl","remap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","previewfilepath":"/media/ap/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec3 hueRemap(in vec3 color, float hue) {\n    if(hue == 0.0)\n        return color;\n    \n    // https://stackoverflow.com/questions/8507885/shift-hue-of-an-rgb-color\n    float SQRT_1_3 = sqrt(1.0 / 3.0);\n    float PI = 3.141592653589793238462643383279502884197;\n    float cosA = cos(hue * PI / 180.0);\n    float sinA = sin(hue * PI / 180.0);\n    mat3 matrix = mat3(\n        cosA + (1.0 - cosA) / 3.0, 1.0/3.0 * (1.0 - cosA) - SQRT_1_3 * sinA, 1.0/3.0 * (1.0 - cosA) + SQRT_1_3 * sinA,\n        1.0/3.0 * (1.0 - cosA) + SQRT_1_3 * sinA, cosA + 1.0/3.0* (1.0 - cosA), 1.0/3.0 * (1.0 - cosA) - SQRT_1_3 * sinA,\n        1.0/3.0 * (1.0 - cosA) - SQRT_1_3 * sinA, 1.0/3.0 * (1.0 - cosA) + SQRT_1_3 * sinA, cosA + 1.0/3.0 * (1.0 - cosA)\n    );\n    vec3 shifted = matrix * color;\n    return vec3(clamp(shifted.x, 0.0f, 1.0f), clamp(shifted.y, 0.0f, 1.0f), clamp(shifted.z, 0.0f, 1.0f));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec3 col = hueRemap(texture(iChannel0, uv).rgb, 0.5*(cos(iTime)+1.0)*360.0);\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}