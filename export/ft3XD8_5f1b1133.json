{"ver":"0.1","info":{"id":"ft3XD8","date":"1638981768","viewed":147,"name":"kusa (kaze)","username":"gyabo","description":"Kusa to kaze. 草風。","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","glsl"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//2021 gyabo //https://www.shadertoy.com/view/ft3XD8\n#define time iTime\n#define rot(a) mat2(cos(a), -sin(a), sin(a), cos(a))\n\n//#define KUSAKAZE\n\nfloat box(vec3 p) {\n    p.xz *= rot(time);\n    p.zy *= rot(time);\n    p = abs(p) - 0.02;\n\treturn max(p.x, max(p.y, p.z));\n}\n\nfloat tm;\n\nfloat map(vec3 p) {\n    vec3 tmp = p;\n    p = p.xzy;\n#ifdef KUSAKAZE\n    float t  = box(p - mix(vec3(0.450000, 0.100000, 0), vec3(0.150000, 0.150000, 0), tm));\n    t = min(t, box(p - mix(vec3(0.450000, 0.150000, 0), vec3(0.300000, 0.150000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.450000, 0.200000, 0), vec3(0.650000, 0.150000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.050000, 0.250000, 0), vec3(0.850000, 0.150000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.100000, 0.250000, 0), vec3(0.150000, 0.200000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.150000, 0.250000, 0), vec3(0.250000, 0.200000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.200000, 0.250000, 0), vec3(0.300000, 0.200000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.250000, 0.250000, 0), vec3(0.350000, 0.200000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.300000, 0.250000, 0), vec3(0.400000, 0.200000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.350000, 0.250000, 0), vec3(0.450000, 0.200000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.400000, 0.250000, 0), vec3(0.650000, 0.200000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.450000, 0.250000, 0), vec3(0.800000, 0.200000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.500000, 0.250000, 0), vec3(0.850000, 0.200000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.550000, 0.250000, 0), vec3(0.150000, 0.250000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.600000, 0.250000, 0), vec3(0.450000, 0.250000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.650000, 0.250000, 0), vec3(0.500000, 0.250000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.700000, 0.250000, 0), vec3(0.550000, 0.250000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.750000, 0.250000, 0), vec3(0.600000, 0.250000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.800000, 0.250000, 0), vec3(0.650000, 0.250000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.850000, 0.250000, 0), vec3(0.750000, 0.250000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.450000, 0.300000, 0), vec3(0.850000, 0.250000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.800000, 0.300000, 0), vec3(0.200000, 0.300000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.200000, 0.350000, 0), vec3(0.450000, 0.300000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.450000, 0.350000, 0), vec3(0.600000, 0.300000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.700000, 0.350000, 0), vec3(0.750000, 0.300000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.200000, 0.400000, 0), vec3(0.850000, 0.300000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.250000, 0.400000, 0), vec3(0.200000, 0.350000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.300000, 0.400000, 0), vec3(0.450000, 0.350000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.350000, 0.400000, 0), vec3(0.750000, 0.350000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.400000, 0.400000, 0), vec3(0.200000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.450000, 0.400000, 0), vec3(0.300000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.500000, 0.400000, 0), vec3(0.350000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.550000, 0.400000, 0), vec3(0.400000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.600000, 0.400000, 0), vec3(0.450000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.650000, 0.400000, 0), vec3(0.500000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.700000, 0.400000, 0), vec3(0.550000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.200000, 0.450000, 0), vec3(0.600000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.700000, 0.450000, 0), vec3(0.700000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.200000, 0.500000, 0), vec3(0.200000, 0.450000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.700000, 0.500000, 0), vec3(0.300000, 0.450000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.200000, 0.550000, 0), vec3(0.450000, 0.450000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.250000, 0.550000, 0), vec3(0.600000, 0.450000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.300000, 0.550000, 0), vec3(0.700000, 0.450000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.350000, 0.550000, 0), vec3(0.200000, 0.500000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.400000, 0.550000, 0), vec3(0.300000, 0.500000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.450000, 0.550000, 0), vec3(0.450000, 0.500000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.500000, 0.550000, 0), vec3(0.600000, 0.500000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.550000, 0.550000, 0), vec3(0.700000, 0.500000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.600000, 0.550000, 0), vec3(0.200000, 0.550000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.650000, 0.550000, 0), vec3(0.300000, 0.550000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.700000, 0.550000, 0), vec3(0.350000, 0.550000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.200000, 0.600000, 0), vec3(0.400000, 0.550000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.700000, 0.600000, 0), vec3(0.450000, 0.550000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.200000, 0.650000, 0), vec3(0.500000, 0.550000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.250000, 0.650000, 0), vec3(0.550000, 0.550000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.300000, 0.650000, 0), vec3(0.600000, 0.550000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.350000, 0.650000, 0), vec3(0.700000, 0.550000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.400000, 0.650000, 0), vec3(0.200000, 0.600000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.450000, 0.650000, 0), vec3(0.450000, 0.600000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.500000, 0.650000, 0), vec3(0.700000, 0.600000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.550000, 0.650000, 0), vec3(0.200000, 0.650000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.600000, 0.650000, 0), vec3(0.300000, 0.650000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.650000, 0.650000, 0), vec3(0.350000, 0.650000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.700000, 0.650000, 0), vec3(0.400000, 0.650000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.750000, 0.650000, 0), vec3(0.450000, 0.650000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.200000, 0.700000, 0), vec3(0.700000, 0.650000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.700000, 0.700000, 0), vec3(0.200000, 0.700000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.300000, 0.750000, 0), vec3(0.500000, 0.700000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.600000, 0.750000, 0), vec3(0.550000, 0.700000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.050000, 0.800000, 0), vec3(0.600000, 0.700000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.100000, 0.800000, 0), vec3(0.700000, 0.700000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.150000, 0.800000, 0), vec3(0.200000, 0.750000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.200000, 0.800000, 0), vec3(0.550000, 0.750000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.250000, 0.800000, 0), vec3(0.700000, 0.750000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.300000, 0.800000, 0), vec3(0.200000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.350000, 0.800000, 0), vec3(0.250000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.400000, 0.800000, 0), vec3(0.300000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.450000, 0.800000, 0), vec3(0.350000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.500000, 0.800000, 0), vec3(0.400000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.550000, 0.800000, 0), vec3(0.450000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.600000, 0.800000, 0), vec3(0.500000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.650000, 0.800000, 0), vec3(0.550000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.700000, 0.800000, 0), vec3(0.600000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.750000, 0.800000, 0), vec3(0.650000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.800000, 0.800000, 0), vec3(0.700000, 0.800000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.850000, 0.800000, 0), vec3(0.400000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.300000, 0.850000, 0), vec3(0.450000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.600000, 0.850000, 0), vec3(0.500000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.800000, 0.850000, 0), vec3(0.550000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.300000, 0.900000, 0), vec3(0.600000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.350000, 0.900000, 0), vec3(0.700000, 0.400000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.600000, 0.900000, 0), vec3(0.200000, 0.450000, 0), tm)));\n    t = min(t, box(p - mix(vec3(0.650000, 0.900000, 0), vec3(0.300000, 0.450000, 0), tm)));\n#else //KUSAKAZE\n    float t  = box(p - vec3(0.450000, 0.100000, 0));\n    t = min(t, box(p - vec3(0.450000, 0.150000, 0)));\n    t = min(t, box(p - vec3(0.450000, 0.200000, 0)));\n    t = min(t, box(p - vec3(0.050000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.100000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.150000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.200000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.250000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.300000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.350000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.400000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.450000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.500000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.550000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.600000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.650000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.700000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.750000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.800000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.850000, 0.250000, 0)));\n    t = min(t, box(p - vec3(0.450000, 0.300000, 0)));\n    t = min(t, box(p - vec3(0.800000, 0.300000, 0)));\n    t = min(t, box(p - vec3(0.200000, 0.350000, 0)));\n    t = min(t, box(p - vec3(0.450000, 0.350000, 0)));\n    t = min(t, box(p - vec3(0.700000, 0.350000, 0)));\n    t = min(t, box(p - vec3(0.200000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.250000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.300000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.350000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.400000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.450000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.500000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.550000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.600000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.650000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.700000, 0.400000, 0)));\n    t = min(t, box(p - vec3(0.200000, 0.450000, 0)));\n    t = min(t, box(p - vec3(0.700000, 0.450000, 0)));\n    t = min(t, box(p - vec3(0.200000, 0.500000, 0)));\n    t = min(t, box(p - vec3(0.700000, 0.500000, 0)));\n    t = min(t, box(p - vec3(0.200000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.250000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.300000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.350000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.400000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.450000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.500000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.550000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.600000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.650000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.700000, 0.550000, 0)));\n    t = min(t, box(p - vec3(0.200000, 0.600000, 0)));\n    t = min(t, box(p - vec3(0.700000, 0.600000, 0)));\n    t = min(t, box(p - vec3(0.200000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.250000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.300000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.350000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.400000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.450000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.500000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.550000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.600000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.650000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.700000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.750000, 0.650000, 0)));\n    t = min(t, box(p - vec3(0.200000, 0.700000, 0)));\n    t = min(t, box(p - vec3(0.700000, 0.700000, 0)));\n    t = min(t, box(p - vec3(0.300000, 0.750000, 0)));\n    t = min(t, box(p - vec3(0.600000, 0.750000, 0)));\n    t = min(t, box(p - vec3(0.050000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.100000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.150000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.200000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.250000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.300000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.350000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.400000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.450000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.500000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.550000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.600000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.650000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.700000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.750000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.800000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.850000, 0.800000, 0)));\n    t = min(t, box(p - vec3(0.300000, 0.850000, 0)));\n    t = min(t, box(p - vec3(0.600000, 0.850000, 0)));\n    t = min(t, box(p - vec3(0.800000, 0.850000, 0)));\n    t = min(t, box(p - vec3(0.300000, 0.900000, 0)));\n    t = min(t, box(p - vec3(0.350000, 0.900000, 0)));\n    t = min(t, box(p - vec3(0.600000, 0.900000, 0)));\n    t = min(t, box(p - vec3(0.650000, 0.900000, 0)));\n#endif //KUSAKAZE\n    p = tmp;\n    t = min(t, 0.01 + dot(p, vec3(0, 1, 0)));\n\treturn t;\n}\n\nvec3 getnor(vec3 p) {\n    float t = map(p);\n    vec2 d = vec2(0.001, 0.0);\n    return normalize(vec3(\n        t - map(p + d.xyy),\n        t - map(p + d.yxy),\n        t - map(p + d.yyx)));\n        \n}\n\nfloat getao(float eps, vec3 N, vec3 p) {\n    return map(p + -N * eps) / eps;\n}\n\nvec4 getcol( vec2 fragCoord ) {\n\tvec2 uv = (2.0 *  fragCoord.xy - iResolution.xy ) / min(iResolution.x, iResolution.y);\n\tvec3 dir = normalize(vec3(uv + vec2(cos(time * 4.2), sin(time * 3.3)) * 0.02, 1.0));\n    vec3 pos = vec3(0.45, 0.5, 0.25);\n    dir.yz *= rot(1.2);\n\tfloat t = 0.0;\n\tfor(int i = 0; i < 7; i++)\n\t\tt += map(dir * t + pos);\n    vec3 ip = dir * t + pos;\n    vec3 N = getnor(ip);\n    float ao = getao(0.05, N, ip) + getao(0.02, N, ip) + getao(0.01, N, ip);\n    vec3 L = normalize(vec3(1,-2,3));\n    float D = max(0.0, dot(L, N));\n#ifdef KUSAKAZE\n    vec3 b = mix(vec3(1,7.0 - tm * 3.0,2), vec3(7,2,3) + vec3(0,0,tm * 10.0), D);\n#else //KUSAKAZE\n    vec3 b = mix(vec3(1,7.0,2), vec3(7,2,3), D);\n#endif //KUSAKAZE\n    vec3 ret = t * b * ao * 0.03;\n    return vec4(ret, 1.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    tm = clamp(sin(time * 0.5) * 1.25, -1.0, 1.0) * 0.5 + 0.5;\n\tfragColor = getcol(fragCoord );\n}\n\n","name":"Image","description":"","type":"image"}]}