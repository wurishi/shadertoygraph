{"ver":"0.1","info":{"id":"4d33D7","date":"1449935749","viewed":314,"name":"005[F]  Game field","username":"pawsiem","description":"I add grass and map rotation. It's very near to completed :D.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["grass","wood","wind","gamedev","rotate2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"//future uniform\nconst float uAngle = 0.5233; //30degres\n\n\n//utils\nfloat noise(vec2 p){\n    return texture(iChannel0,fract(p)).r;\n}\nvec2 rotate(vec2 vector,float angle){\n    float s = sin(angle),\n          c = cos(angle);\n    \n    return vector*mat2(c,s,-s,c);\n    \n    //r = v *|cosA   -sinA|\n    //       |sinA    cosA|\n}\n\n\nvec4 wood(vec2 p){\n    vec3 color = vec3(0.21, 0.11, 0.05);\n    float m =mod(p.y+sin(p.x)/20.+sin(p.x+p.y*0.5)/10.,3.5);\n    float wood = fract(pow(m-1.8,2.))+0.26;\n    return m<0.1?vec4(0.03):vec4(color-vec3(0.14, 0.07, 0.0)*wood,1.);\n}\n\n\n\n//Wind funtion(with some modyfications) created by bjarkeck. Thank You so much:).\n//https://www.shadertoy.com/view/ls33W7\nfloat wind(vec2 p, in float t)\n{\n    p += vec2(1.4 + cos(t + p.x * 3.33), 1.5 + sin(t * 0.2 + p.y * 4.)) * 0.003;\n    return mix(1.,1.9,noise(p)); \n}\nvec3 grass(vec2 p){\n    return mix(\n        vec3(0.11,0.62,0.),\n        vec3(0.10,0.47,0.),\n        noise(p)\n    );\n}\n\n\nvoid mainImage(out vec4 o, vec2 p)\n{\n    vec3 R = iResolution;\n    p=(p-R.xy/2.)/min(R.x,R.y);\n    p.y*=-1.;\n    p.y+=2.8;\n                      \n    float a = atan(p.x,p.y);\n    float r = length(p);\n    float ab = abs(a);\n                      \n    \n    if(r>3.25)\n        o = wood(rotate(p*15.,uAngle)+3.)*1.4;//o = vec4(0.439, 0.20, 0.075,1.);\n    else{\n        o = vec4(vec3(0.),1.);\n        if(ab<0.2589)\n            o.rgb += .5;\n    \telse if(ab>0.261)\n        \to.rgb += .3;\n        \n    \to.rgb*=grass(p)*wind(p*2.5, iTime * 2.);\n        if(r<2.4) o.rgb*=0.6;\n     }\n    \n    \n    //borders\n    if(abs(r-3.25)<0.003)\n        o.rgb *=0.;\n    else if(abs(r-2.4)<0.005){\n        o.rgb *= 0.7;\n    }\n}","name":"","description":"","type":"image"}]}