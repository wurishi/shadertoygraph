{"ver":"0.1","info":{"id":"7stfDl","date":"1657484246","viewed":105,"name":"Dazzling Cells","username":"mathfigure","description":"Some random function with some pseudo-lighting.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["dazzling"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// by mathfigure 2022.07.10\n\nfloat zfunc(vec2 v)\n{\n\tfloat t = iTime;\n\tfloat x1 = v.x * iResolution.x / iResolution.y;\n\tfloat y1 = 1.0-v.y;\n\tfloat x = sin(x1*4.0-cos(y1*2.0-sin(x1-t)-t)-t)*4.0;\n\tfloat y = sin(y1*4.0-sin(x1*2.0-cos(y1-t)-t)-t)*4.0;\n\tfloat r = sin((x*x+y*y)/4.0)*(x*x+y*y);\n\treturn r;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat t = iTime/2.0;\n\n\tvec2 dx = vec2(1.0/iResolution.x,0)*2.0;\n\tvec2 dy = vec2(0,1.0/iResolution.y)*2.0;\n\tvec2 xy = (2.0*fragCoord - iResolution.xy) / iResolution.xy; // vertex position (x,y)\n\n\t// vertex position (z)\n\tfloat z = zfunc(xy);\n\tfloat z1 = zfunc(xy+dx);\n\tfloat z2 = zfunc(xy+dy);\n\n    // some lighting\n    vec3 vp = vec3(xy,z);\n\tvec3 lp = vec3(cos(t),sin(2.0*t),2.0);\n\tvec3 ep = vec3(0.0,0.0,5.0);\n\n\tvec3 nv = normalize( vec3(z-z1,z2-z,1.0/8.0) );\n\tvec3 lv = normalize(lp-vp);\n\tvec3 ev = normalize(ep-vp);\n\n\tfloat costh = dot(nv,lv);\n\tvec3 hv = normalize(ev+lv);\n\tfloat cosa = dot(nv,hv);\n\tvec3 vr = -reflect(ev,nv);\n\n\tfloat Kd = 0.25;\n\tfloat Ks = 1.00;\n\tint n=30;\n\n\t// helpers\n\tfloat h1 = xy.x*xy.x-xy.y*xy.y;\n\tfloat h2 = 2.0*xy.x*xy.y;\n\n\tvec4 Cd = (sin(vec4(h1+t,h2+t*1.1,length(xy)+t*1.2, 1.0))+1.0)/2.0;\n\tvec4 Cs = vec4(1.0);\n\n\tfragColor = Kd*Cd*costh + Ks*Cs*pow(cosa,float(n));\n}","name":"Image","description":"","type":"image"}]}