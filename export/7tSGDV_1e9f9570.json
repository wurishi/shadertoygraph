{"ver":"0.1","info":{"id":"7tSGDV","date":"1624798328","viewed":1568,"name":"Drop shadow","username":"Abvadabra","description":"Faking text shadow from PS","likes":5,"published":1,"flags":32,"usePreview":1,"tags":["blur","dropshadow"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n\nfloat normpdf(in float x, in float sigma)\n{\n\treturn 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\n}\n\nvec4 getBlur(in sampler2D tex, in vec2 uv, in vec2 resolution) {\n    const float Pi = 3.14159265359;\n    const float Pi2 = Pi * 2.0;\n    const float directions = 15.0;\n    const float quality = 5.0;\n    const float size = 8.0;\n    vec2 radius = size / iResolution.xy;\n    \n    vec4 color = texture(tex, uv);\n    float total = 1.0;\n    for(float d = 0.0; d < Pi2; d += Pi2 / directions) {\n        for(float i = 1.0 / quality; i <= 1.0; i += 1.0 / quality) {\n            float w = i;\n            total += w;\n            color += texture(tex, uv + vec2(cos(d), sin(d)) * radius * i) * w; \n        }\n    }\n    color = color / total;\n    \n    return color;\n}\n\n\nvec4 blend(in vec4 src, in vec4 dst) {\n    return src * src.a + dst * (1.0 - src.a);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec4 shadow = getBlur(iChannel0, uv, iResolution.xy);\n    shadow *= vec4(0.0, 0.0, 0.0, 1.0);\n\n    if(fragCoord.x < iMouse.x) {\n        shadow *= 0.0;\n    }\n\n    vec4 background = vec4(1.0);\n    vec4 original = texture(iChannel0, uv); \n    \n    vec4 result = blend(shadow, background);\n    result = blend(original, result);\n    fragColor = result;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec4 char(vec2 p, int C) {\n    if (p.x<0.|| p.x>1. || p.y<0.|| p.y>1.) return vec4(0,0,0,1e5);\n    \n    return textureGrad( iChannel0, p/16. + fract( vec2(C, 15-C/16) / 16. ), dFdx(p/16.),dFdy(p/16.) );\n}\n\nvoid printWord(inout float f, in vec2 uv) {\n    f += char(uv, 72).x; uv.x -= .5;\n    f += char(uv, 101).x; uv.x -= .5;\n    f += char(uv, 108).x; uv.x -= .5;\n    f += char(uv, 108).x; uv.x -= .5;\n    f += char(uv, 111).x; uv.x -= .5;\n    f += char(uv, 32).x; uv.x -= .5;\n    f += char(uv, 87).x; uv.x -= .5;\n    f += char(uv, 111).x; uv.x -= .5;\n    f += char(uv, 114).x; uv.x -= .5;\n    f += char(uv, 108).x; uv.x -= .5;\n    f += char(uv, 100).x; uv.x -= .5;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.y;\n    uv = uv * 2.0 - 1.0;\n   \n    float f = 0.0;\n    printWord(f, (uv - vec2(-0.5, 0.0)) * 3.0);\n    printWord(f, (uv - vec2(-0.1, -0.2)) * 5.0);\n    printWord(f, (uv - vec2(0.1, -0.4)) * 8.0);\n    \n    \n    fragColor = vec4(vec3(1.0, 0.5, 0.5) * f, f);\n}","name":"Buffer A","description":"","type":"buffer"}]}