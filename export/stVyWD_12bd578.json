{"ver":"0.1","info":{"id":"stVyWD","date":"1661520597","viewed":118,"name":"Tangled hair","username":"Flopine","description":"I offer you: the shader of when you have a lot of hair in your sink :P ","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["2d","animation","hexagon","truchet","pattern"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Code by Flopine\n\n// Thanks to wsmind, leon, XT95, lsdlive, lamogui, \n// Coyhot, Alkama,YX, NuSan, slerpy, wwrighter \n// BigWings, FabriceNeyret and Blackle for teaching me\n\n// Thanks LJ for giving me the spark :3\n\n// Thanks to the Cookie Collective, which build a cozy and safe environment for me \n// and other to sprout :)  \n// https://twitter.com/CookieDemoparty\n\n\n#define hr vec2(1.,sqrt(3.))\n\n#define AAstep(thre, val) smoothstep(-.7,.7,(val-thre)/min(0.07,fwidth(val-thre)))\n#define circle(p,s) (length(p)-s)\n\nvec4 hgrid (vec2 uv)\n{\n    vec2 ga = mod(uv,hr)-hr*.5, gb = mod(uv-hr*.5,hr)-hr*.5,\n    guv = (dot(ga,ga)<dot(gb,gb)) ? ga:gb,\n    gid = uv-guv;\n    return vec4(guv,gid);\n}\n\nfloat truchet (vec2 uv, float w, float seed)\n{\n    vec4 hg = hgrid(uv);\n    vec2 uu = hg.xy, hid = hg.zw;\n    \n    float noise = textureLod(iChannel0, (hid*.13)+seed, 0.).x;\n    if (noise>.5) uu.x *= -1.;\n    float diag = AAstep(w*2., abs(abs(uu.x*sqrt(3.)+uu.y)-w*3.));\n    float s = (uu.x*sqrt(3.) > -uu.y) ? 1.:-1.;\n    uu -= vec2(1.,1./sqrt(3.))*s*.5;\n    \n    float contour = AAstep(w, abs(abs(circle(uu,sqrt(3.)/6.))-w*1.5));\n    return contour*diag;    \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n    \n    float t1 = truchet(uv*1.5+vec2(iTime,0.), 0.019, 3.449),\n    t2 = truchet((uv*3.)+hr+vec2(0., iTime), 0.018, 6.164),\n    t3 = truchet((uv*6.)-hr-vec2(iTime,0.), 0.016, 4.1564);\n    \n    vec3 col = vec3(t1*(t2+.03)*(t3+.06));\n    \n    fragColor = vec4(sqrt(clamp(col,0.,1.)),1.0);\n}","name":"Image","description":"","type":"image"}]}