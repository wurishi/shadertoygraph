{"ver":"0.1","info":{"id":"ldVBDD","date":"1528962830","viewed":1100,"name":"Electronic clock","username":"Uiharu","description":"It's loaded slowly, and I'm trying to fix it.","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["time","clock","led","date"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    //font size:\n    const float k = 0.1;\n    //font weight:\n    const float R = 0.03;\n    //shaking center:\n    const vec2 O = vec2(1.0, 2.0);\n    vec2 pos = (2.0 * fragCoord - iResolution.xy ) / iResolution.y;\n    float num[6], point[4], T[6], t[6], light = 0.0;\n    T[0] = 1.0; T[1] = 10.0; T[2] = 60.0; T[3] = 600.0; T[4] = 3600.0; T[5] = 36000.0;\n    t[0] = 10.0; t[1] = 6.0; t[2] = 10.0; t[3] = 6.0; t[4] = 24.0; t[5] = 2.4;\n    vec2 P[6];\n    vec3 col = vec3(0.4, 0.2, 1.0) * 0.1;\n    for(int i = 0; i < 6; i++)\n    {\n        P[i] = (pos - vec2(1.0 - 5.0*k * float(i), 0.0) - k*O) * rot(0.1 * sin(0.05 / (pow(0.5, float(i)) * T[i] * fract(iDate.w / T[i])) )) + k*O;\n    \tnum[i] = draw_num(P[i] / k, R / k, int(mod(iDate.w / T[i], t[i])));\n    \tlight += num[i];\n    }\n    for(int i = 0; i < 2; i++)\n    {\n        point[2*i] = max(1.0 / abs(length(pos - vec2(1.0 - (6.25 + 10.0 * float(i)) * k, 1.0 * k)) - R) - 1.0 / k, 0.0);\n        point[2*i+1] = max(1.0 / abs(length(pos - vec2(1.0 - (6.25 + 10.0 * float(i)) * k, 3.0 * k)) - R) - 1.0 / k, 0.0);\n    \tlight += k * (point[2*i] + point[2*i+1]) * mod(floor(iDate.w), 2.0);\n    }\n    col *= light;\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float d_seg(vec2 position, vec2 start_p, vec2 end_p, float R)\n{\t//线段函数\n\tvec2 AP = position - start_p;\n\tvec2 AB = end_p - start_p;\n\tfloat h = clamp(dot(AP, AB) / dot(AB, AB), 0.0, 1.0);\n\tfloat seg = abs(length(AP - AB * h) - R);\n\treturn max(1.0 / seg - 1.0, 0.0);\n}\n\nmat2 rot(float a)\n{\n    vec2 r = vec2(cos(a), sin(a));\n    return mat2(r.x, r.y, -r.y, r.x);\n}\n\nfloat get_ch_0(vec2 pos, float R)\n{\n\tfloat line = d_seg(pos, vec2(0.0, 0.0), vec2(0.0, 2.0), R);\n\tline += d_seg(pos, vec2(0.0, 2.0), vec2(0.0, 4.0), R);\n\tline += d_seg(pos, vec2(0.0, 4.0), vec2(2.0, 4.0), R);\n\tline += d_seg(pos, vec2(2.0, 4.0), vec2(2.0, 2.0), R);\n\tline += d_seg(pos, vec2(2.0, 2.0), vec2(2.0, 0.0), R);\n\treturn line += d_seg(pos, vec2(2.0, 0.0), vec2(0.0, 0.0), R);\n}\n\nfloat get_ch_1(vec2 pos, float R)\n{\n\tfloat line = d_seg(pos, vec2(2.0, 0.0), vec2(2.0, 2.0), R);\n\treturn line += d_seg(pos, vec2(2.0, 2.0), vec2(2.0, 4.0), R);\n}\n\nfloat get_ch_2(vec2 pos, float R)\n{\n\tfloat line = d_seg(pos, vec2(0.0, 4.0), vec2(2.0, 4.0), R);\n\tline += d_seg(pos, vec2(2.0, 4.0), vec2(2.0, 2.0), R);\n\tline += d_seg(pos, vec2(2.0, 0.0), vec2(0.0, 0.0), R);\n\tline += d_seg(pos, vec2(0.0, 0.0), vec2(0.0, 2.0), R);\n\treturn line += d_seg(pos, vec2(0.0, 2.0), vec2(2.0, 2.0), R);\n}\n\nfloat get_ch_3(vec2 pos, float R)\n{\n\tfloat line = d_seg(pos, vec2(0.0, 4.0), vec2(2.0, 4.0), R);\n\tline += d_seg(pos, vec2(2.0, 4.0), vec2(2.0, 2.0), R);\n\tline += d_seg(pos, vec2(2.0, 2.0), vec2(2.0, 0.0), R);\n\tline += d_seg(pos, vec2(2.0, 0.0), vec2(0.0, 0.0), R);\n\treturn line += d_seg(pos, vec2(0.0, 2.0), vec2(2.0, 2.0), R);\n}\n\nfloat get_ch_4(vec2 pos, float R)\n{\n\tfloat line = d_seg(pos, vec2(2.0, 4.0), vec2(2.0, 2.0), R);\n\tline += d_seg(pos, vec2(2.0, 2.0), vec2(2.0, 0.0), R);\n\tline += d_seg(pos, vec2(0.0, 2.0), vec2(0.0, 4.0), R);\n\treturn line += d_seg(pos, vec2(0.0, 2.0), vec2(2.0, 2.0), R);\n}\n\nfloat get_ch_5(vec2 pos, float R)\n{\n\tfloat line = d_seg(pos, vec2(0.0, 4.0), vec2(2.0, 4.0), R);\n\tline += d_seg(pos, vec2(2.0, 2.0), vec2(2.0, 0.0), R);\n\tline += d_seg(pos, vec2(2.0, 0.0), vec2(0.0, 0.0), R);\n\tline += d_seg(pos, vec2(0.0, 2.0), vec2(0.0, 4.0), R);\n\treturn line += d_seg(pos, vec2(0.0, 2.0), vec2(2.0, 2.0), R);\n}\n\nfloat get_ch_6(vec2 pos, float R)\n{\n\tfloat line = d_seg(pos, vec2(0.0, 4.0), vec2(2.0, 4.0), R);\n\tline += d_seg(pos, vec2(2.0, 2.0), vec2(2.0, 0.0), R);\n\tline += d_seg(pos, vec2(2.0, 0.0), vec2(0.0, 0.0), R);\n\tline += d_seg(pos, vec2(0.0, 0.0), vec2(0.0, 2.0), R);\n\tline += d_seg(pos, vec2(0.0, 2.0), vec2(0.0, 4.0), R);\n\treturn line += d_seg(pos, vec2(0.0, 2.0), vec2(2.0, 2.0), R);\n}\n\nfloat get_ch_7(vec2 pos, float R)\n{\n\tfloat line = d_seg(pos, vec2(0.0, 4.0), vec2(2.0, 4.0), R);\n\tline += d_seg(pos, vec2(2.0, 4.0), vec2(2.0, 2.0), R);\n\treturn line += d_seg(pos, vec2(2.0, 2.0), vec2(2.0, 0.0), R);\n}\n\nfloat get_ch_8(vec2 pos, float R)\n{\n\tfloat line = d_seg(pos, vec2(0.0, 4.0), vec2(2.0, 4.0), R);\n\tline += d_seg(pos, vec2(2.0, 4.0), vec2(2.0, 2.0), R);\n\tline += d_seg(pos, vec2(2.0, 2.0), vec2(2.0, 0.0), R);\n\tline += d_seg(pos, vec2(2.0, 0.0), vec2(0.0, 0.0), R);\n\tline += d_seg(pos, vec2(0.0, 0.0), vec2(0.0, 2.0), R);\n\tline += d_seg(pos, vec2(0.0, 2.0), vec2(0.0, 4.0), R);\n\treturn line += d_seg(pos, vec2(0.0, 2.0), vec2(2.0, 2.0), R);\n}\n\nfloat get_ch_9(vec2 pos, float R)\n{\n\tfloat line = d_seg(pos, vec2(0.0, 4.0), vec2(2.0, 4.0), R);\n\tline += d_seg(pos, vec2(2.0, 4.0), vec2(2.0, 2.0), R);\n\tline += d_seg(pos, vec2(2.0, 2.0), vec2(2.0, 0.0), R);\n\tline += d_seg(pos, vec2(2.0, 0.0), vec2(0.0, 0.0), R);\n\tline += d_seg(pos, vec2(0.0, 2.0), vec2(0.0, 4.0), R);\n\treturn line += d_seg(pos, vec2(0.0, 2.0), vec2(2.0, 2.0), R);\n}\n\nfloat draw_num(vec2 pos, float R, int ch)\n{\n\tfloat line = 0.0;\n    ch -= int(10.0 * floor(0.1 * float(ch)));\n\tif (ch < 8)\n\t\tif (ch < 4)\n\t\t\tif (ch < 2)\n\t\t\t\tif (ch < 1)\tline = get_ch_0(pos, R);\n\t\t\t\telse\tline = get_ch_1(pos, R);\n\t\t\telse\n\t\t\t\tif (ch < 3)\tline = get_ch_2(pos, R);\n\t\t\t\telse\tline = get_ch_3(pos, R);\n\t\telse\n\t\t\tif (ch < 6)\n\t\t\t\tif (ch < 5)\tline = get_ch_4(pos, R);\n\t\t\t\telse\tline = get_ch_5(pos, R);\n\t\t\telse\n\t\t\t\tif (ch < 7)\tline = get_ch_6(pos, R);\n\t\t\t\telse\tline = get_ch_7(pos, R);\n\telse\n\t\tif (ch < 9)\tline = get_ch_8(pos, R);\n\t\telse\tline = get_ch_9(pos, R);\n\treturn line;\n}","name":"Common","description":"","type":"common"}]}