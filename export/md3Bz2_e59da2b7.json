{"ver":"0.1","info":{"id":"md3Bz2","date":"1697390910","viewed":424,"name":"iOS 17 share contact effect ","username":"Rahiche","description":"Draft version - iOS 17 contact sharing effect \nCredit to for the metal version of the shader: https://gist.github.com/dkun7944/2f793643e469029fb4e7d700f0645ffc","likes":4,"published":1,"flags":0,"usePreview":1,"tags":["blur","ios"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 6.28318530718;\nconst float DYNAMIC_OFFSET_Y = 0.46;\nconst float MOD_TIME_LIMIT = 3.0;\nconst float EXPLOSION_LIGHT_INTENSITY = 0.16;\nconst float EXPLOSION_LIGHT_2_INTENSITY = 0.14;\nconst float EXPLOSION_LIGHT_SHIFT = 8.0;\nconst float EXPLOSION_LIGHT_2_SHIFT = 8.0;\nconst float EXPLOSION_LIGHT_Y_OFFSET = 0.4;\nconst float EXPLOSION_LIGHT_2_Y_OFFSET = 0.4;\nconst float NUM_DIRS = 60.0;\nconst float QUALITY = 10.0;\nconst float BLUR_RAD_MULTIPLIER = 0.5;\nconst float BLUR_RAD_LIGHT_MULTIPLIER = 0.05;\nconst float GLOW_1_INTENSITY = 0.25;\nconst float GLOW_2_INTENSITY = 0.5;\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    float limitedTime = mod(iTime, MOD_TIME_LIMIT); \n    float timeSq = limitedTime * limitedTime;\n    float timeCu = limitedTime * timeSq;\n\n   vec2 normalizedUv = fragCoord / iResolution.xy;\n    vec2 distortedUv = vec2(\n        normalizedUv.x + (normalizedUv.x - 0.5) * pow(normalizedUv.y, 6.0) * timeCu * 0.1,\n        (normalizedUv.y * (normalizedUv.y * pow((1.0 - timeSq * 0.01), 8.0)) + (1.0 - normalizedUv.y) * normalizedUv.y) \n    );\n    distortedUv = mix(normalizedUv, distortedUv, smoothstep(1.1, 1.0, limitedTime));\n\n    vec4 color = texture(iChannel0, distortedUv);\n    vec2 explosionShift = vec2(0.0);\n    float explosionLight = 0.0;\n\n    if (limitedTime >= 1.0) {\n        float adjustedTime = limitedTime - 1.0;\n        normalizedUv -= 0.5;\n        normalizedUv.x *= iResolution.x / iResolution.y;\n        normalizedUv.x -= 0.1;\n\n        vec2 uvExplode = vec2(normalizedUv.x + 0.1, normalizedUv.y + DYNAMIC_OFFSET_Y);\n        explosionLight = (adjustedTime * EXPLOSION_LIGHT_INTENSITY) / length(uvExplode);\n        explosionLight = smoothstep(0.09, 0.05, explosionLight) *\n            smoothstep(0.04, 0.07, explosionLight) *\n            (normalizedUv.y + 0.05);\n        explosionShift = vec2(-EXPLOSION_LIGHT_SHIFT * explosionLight * normalizedUv.x,\n            -4.0 * explosionLight * (normalizedUv.y - EXPLOSION_LIGHT_Y_OFFSET)) * 0.1;\n\n        float explosionLight2 = ((adjustedTime - 0.085) * EXPLOSION_LIGHT_2_INTENSITY) / length(uvExplode);\n        explosionLight2 = smoothstep(0.09, 0.05, explosionLight2) *\n            smoothstep(0.04, 0.07, explosionLight2) *\n            (normalizedUv.y + 0.05);\n        explosionShift += vec2(-EXPLOSION_LIGHT_2_SHIFT * explosionLight2 * normalizedUv.x,\n            -4.0 * explosionLight2 * (normalizedUv.y - EXPLOSION_LIGHT_2_Y_OFFSET)) * -0.02;\n    }\n\n    vec2 finalUv = distortedUv + explosionShift;\n    color = texture(iChannel0, finalUv);\n    color += explosionLight * 500.0 * smoothstep(1.05, 1.1, limitedTime);\n\n    float blurRad = timeSq * 0.1 * pow(normalizedUv.y, 6.0) * BLUR_RAD_MULTIPLIER;\n    blurRad *= smoothstep(1.3, 0.9, limitedTime);\n    blurRad += explosionLight * BLUR_RAD_LIGHT_MULTIPLIER;\n\n    for(float angle = 0.0; angle < PI; angle += PI / NUM_DIRS) {\n        for(float i = 1.0 / QUALITY; i <= 1.0; i += 1.0 / QUALITY) {\n            vec2 blurPosition = finalUv + vec2(cos(angle), sin(angle)) * blurRad * i;\n            color += texture(iChannel0, blurPosition);\n        }\n    }\n    color /= QUALITY * NUM_DIRS;\n\n   \n    fragColor = color;\n}\n","name":"Image","description":"","type":"image"}]}