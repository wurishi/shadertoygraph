{"ver":"0.1","info":{"id":"Wds3zn","date":"1544739241","viewed":115,"name":"RM2012","username":"gyabo","description":"My raymaching experiment in 2012","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["raymarching"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define TIME iTime\n\nfloat map(vec3 p) {\n\tfloat k = length(mod(p, 32.0) - 16.0) - 15.0;\n    k = mix(-k, cos(p.x) + cos(p.y) + cos(p.z), cos(TIME * 0.5));\n\tk = min(k, length(mod(p.xy + vec2(3.0), 20.0) - 10.0) - 5.0);\n\tk = mix(k, length(mod(p.xz, 20.0) - 10.0) - 5.0, cos(TIME * 0.03));\n\tk = mix(k, length(mod(p.xy, 10.0) - 5.0) - 2.0, sin(TIME * 0.25));\n\treturn k;\n}\n\nvec2 rot(vec2 p, float k) {\n\tfloat c = cos(k);\n\tfloat s = sin(k);\n\treturn vec2(\n\t\tc * p.x - s * p.y,\n\t\ts * p.x + c * p.y);\n}\n\nvec3 nml(vec3 p) {\n\tvec2 d = vec2(0.1, 0.0);\n\tfloat k = map(p);\n\treturn normalize(\n\t\tvec3(map(p + d.xyy) - k, map(p + d.yxy) - k, map(p + d.yyx) - k)\n\t);\n\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = ( fragCoord.xy / iResolution.xy) * 2.0 - 1.0;\n\tuv.x *= iResolution.x / iResolution.y;\n\tvec3 dir = normalize(vec3(uv, 1.0)) / 4.0;\n\tfloat btm = iTime * 0.1;\n\tfloat frtm = fract(btm);\n\tfloat fltm = floor(btm);\n\tdir.xy = -rot(dir.xy, fltm + smoothstep(0.2, 0.8, frtm));\n\tdir.yz = -rot(dir.yz, fltm + smoothstep(0.2, 0.8, frtm));\n\tvec3 pos = vec3(0, 0, btm * 50.0);\n\tfloat t = 0.0;\n\tfloat act = 5.0;\n\tfor(int i = 0; i < 30; i++) {\n\t\tfloat k = map(dir * t + pos);\n\t\tif(abs(k) < 0.1) break;\n\t\tt += act;\n\t\tact *= 1.05;\n\t}\n\tvec3 ip = dir * t + pos;\n\tvec3 col = vec3(t * 0.0005) + nml(ip);\n\tfragColor = vec4(col - map(ip - 1.0), 1.0);\n\n}\n","name":"Image","description":"","type":"image"}]}