{"ver":"0.1","info":{"id":"XdcSWB","date":"1461113476","viewed":183,"name":"Star Function","username":"wixman","description":"Adapted from the star function in Procedural Modelling and Texturing. Created as a learning exercise. ","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["2d","star","learning"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415926\n\n// returns rotation matrix\nmat2 rotate(float angle){\n    return mat2(cos(angle),-sin(angle),\n                sin(angle),cos(angle));\n}\n\n\nfloat star(vec2 p, float npoints, float rmin, float rmax)\n{   \n    // to polar coords\n    float pol_a = atan(p.x, p.y); // -PI to PI\n    float pol_r = length(p);\n    \n    float starAngle = PI * 2.0/npoints; // angle of each point\n        \n    pol_a = mod(pol_a, starAngle); // make each repetition segment 0->starAngle\n        \n    if(pol_a>=starAngle/2.0) \n        pol_a = starAngle - pol_a; // reflect segment to go from 0->starAngle/2->0\n    \n    vec3 maxPt = vec3(rmax, 0.0, 0.0); // tip of the star point\n    vec3 minPt = rmin * vec3(cos(starAngle/2.0), sin(starAngle/2.0), 0.0); // min radius point\n    \n    vec3 maxToMin = minPt - maxPt; // vector from tip to min point\n  \tvec3 maxToP = pol_r * vec3(cos(pol_a), sin(pol_a), 0.0) - maxPt; // vector from tip to P\n    \n    vec3 cr = cross(maxToMin, maxToP); // negative Z values lie outside star\n    \n\tfloat starColor = smoothstep(0.0, 0.001, cr.z);\n                      \n    return starColor;\n    \n}\n\n  \nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 p = uv - vec2(0.5);\n\tp.x *= iResolution.x/iResolution.y; \n    p *= rotate(iTime); // rotate\n    \n    float starColor = star(p, 1.0 + (sin(iTime*2.0)/2.0 + 0.5)* 12.0, 0.25, 0.4);\n\n    vec3 color = mix(vec3(0.2, 0.2, 0.2), vec3(0.7, 0.9, 1.0), starColor);\n    \n    fragColor = vec4(vec3(color), 1.0);\n}","name":"Image","description":"","type":"image"}]}