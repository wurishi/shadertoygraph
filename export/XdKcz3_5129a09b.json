{"ver":"0.1","info":{"id":"XdKcz3","date":"1522785756","viewed":547,"name":"Cubemap Viewer","username":"Assossa","description":"For developing custom sky functions. The current cubemap is just an example.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["cubemap","tool","viewer","util"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGzn","filepath":"/media/a/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","previewfilepath":"/media/ap/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","type":"cubemap","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Set to 0 to use the custom sky function\n#define EXAMPLE 1\n\n#if EXAMPLE\n\nvec3 sky(vec3 dir) {\n    return texture(iChannel0, dir).rgb;\n}\n\n#else\n\nvec3 sky(vec3 dir) {\n    const vec3 skyColor = vec3(162, 200, 206) / 255.;\n    \n    float brightness = dot(dir, vec3(0,1,0)) * 0.5 + 0.5;\n    brightness = pow(brightness, 2.0);\n    \n    return skyColor * brightness;\n}\n\n#endif\n\nmat3 lookAt(vec3 pos, vec3 focus) {\n    mat3 finalMat = mat3(1);\n    \n    finalMat[2] = normalize(focus - pos);\t\t\t\t\t\t\t// Forward - Z Axis\n    finalMat[0] = normalize(cross(finalMat[2], vec3(0, 1, 0))); \t// Right - X Axis\n    finalMat[1] = normalize(cross(finalMat[0], finalMat[2])); \t\t// Up - Y Axis\n    \n    return finalMat;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 mAng = (iMouse.xy / iResolution.xy) * 6.2832;\n    vec2 uv = (2. * fragCoord - iResolution.xy) / iResolution.y;\n    \n    vec3 pos = normalize(vec3(cos(mAng.x), cos(mAng.y * .5), sin(mAng.x)));\n    vec3 dir = lookAt(pos, vec3(0)) * normalize(vec3(uv, 1));\n    \n    fragColor = vec4(sky(dir), 1);\n}","name":"Image","description":"","type":"image"}]}