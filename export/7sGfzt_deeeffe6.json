{"ver":"0.1","info":{"id":"7sGfzt","date":"1658681705","viewed":102,"name":"4D Raymarcher WIP","username":"gcgac","description":"4D raymarcher. You're seeing a certain 3d slice of the 4D plane at any given time.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["ray","raymarcher","4d","marcher"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 rgb;\nfloat sde;\nvec4 pos;\nfloat maxl = 10000.0;\nfloat t;\n\n\nfloat sphere_sde(vec4 ray, vec4 position, float radius, vec3 col){\n    if (length(position-ray)-radius < sde){\n        rgb = col;\n        sde = length(position-ray)-radius;\n    }\n    return length(position-ray)-radius;\n}\n\n \nfloat calc_sdf(vec4 ray){\n    sde = maxl;\n    float d1 = sphere_sde(ray,vec4 (-20.0,0.0,80.0,10.0),20.0, vec3 (1,0,0));\n    float d2 = sphere_sde(ray,vec4 (0.0,0.0,80.0,-20.0),20.0, vec3 (0,0,1));\n    float d3 = sphere_sde(ray,vec4 (-10.0,15.0,85.0,30.0),30.0, vec3(0,1.0,0.5));\n    return sde;\n}\n\n\nvec4 raycol(vec4 orig, vec4 dir, float ml){\n    float len = 0.0;\n    float sde = ml;\n    float steps = 0.0;\n    pos = orig;\n\n    while (len < ml && sde > 0.1){\n        sde = calc_sdf(pos);\n        pos += dir*sde;\n        len += sde;\n        steps += 1.0;\n    }\n    return vec4(rgb,steps);\n}\n \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n    vec4 pos = vec4(0.0,0.0,-1.0,cos(iTime)*20.0);\n    vec4 direction = normalize(vec4(uv.x,uv.y,1,0.1));\n    vec4 o;\n    float steps;\n    o = raycol(pos,direction,1000.0);\n    if (sde <= 0.1){\n        steps = o.w;\n        rgb = o.xyz;\n        rgb /= steps/2.0;\n        fragColor = vec4(rgb,1.0);\n    }else{\n        fragColor = vec4(0,0,0,1.0);\n    }\n}","name":"Image","description":"","type":"image"}]}