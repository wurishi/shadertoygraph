{"ver":"0.1","info":{"id":"4tSSRV","date":"1444869566","viewed":1015,"name":"Face distort","username":"c64cosmin","description":"bump map -> normal map","likes":10,"published":1,"flags":2,"usePreview":1,"tags":["normalmappingwebcamdistort"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"float rnd(int i){\n\treturn fract(cos(float(i)*564.5))+cos(iTime*0.1+20.0*float(i));\n}\nfloat map(vec2 p){\n\tfloat color = 0.0;\n\tfor(int i=0;i<10;i++){\n\tcolor+=cos(50.0*distance(vec2(rnd(i),rnd(20-i)),p))*0.01;\n\t}\n\t//color+=cos(distance(vec2(0.0,0.0),p)*50.0+iTime)*0.01;\n    color+=sin(acos(distance(vec2(0.0,0.0)/2.,p)*2.))*10.0;\nreturn color*0.1;}\nvec3 norm(vec2 p){\n\tfloat r=0.01;\n\tfloat c=map(p);\n\tfloat x=map(p+vec2(r,0.0));\n\tfloat y=map(p+vec2(0.0,r));\n\tvec3 cc=vec3(p.x,  p.y,  c);\n\tvec3 xx=vec3(p.x+r,p.y,  x)-cc;\n\tvec3 yy=vec3(p.x,  p.y+r,y)-cc;\n\treturn normalize(cross(xx,yy).xyz);\n}\nfloat light(vec3 norm){\n\tvec3 light=vec3(cos(iTime),sin(iTime),0.5);\nlight=normalize(light);\n\tfloat lum=dot(norm,light);\n\treturn lum*0.5+0.5;\n}\nvec3 tex(vec2 p){\n    //return texture(iChannel0,norm(p).xy+p+vec2(0.5,0.5)).xyz;\n    vec3 n=norm(p);\n    vec2 pp;\n    pp.x=atan(n.z,n.x);\n    pp.y=atan(n.z,n.y);\n    vec2 sp=norm(pp).xy*0.5+0.5;\n    vec2 goodUV=3.0-pp;\n    return texture(iChannel0,goodUV*0.3).xyz;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n \tvec2 uv = fragCoord.xy / iResolution.xy - vec2(0.5);\n    uv=vec2(uv.x*(iResolution.x/iResolution.y),uv.y);\n    \n    vec3 color=vec3(light(norm(uv)));\n    color=tex(uv);\n\tfragColor = vec4( color, 1.0 );\n}\n","name":"","description":"","type":"image"}]}