{"ver":"0.1","info":{"id":"XlVyRh","date":"1535061110","viewed":182,"name":"Eternal wheel","username":"frozenshady","description":"Simple modulation of angular velocity creates constantly changing patterns.","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["2d","polar"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define PI 3.14159265359\n#define PI_2 (PI * 2.0)\n\nfloat atan2(in float y, in float x)\n{\n    return mod(atan(y, x) + PI_2, PI_2);\n}\n\nfloat smoothStep2(in float edge, in float x)\n{\n    const float fadeWidth = 0.004;\n    return smoothstep(edge - fadeWidth, edge + fadeWidth, x);\n}\n\nfloat arc(in vec2 uv, in float rMin, in float rMax, in float aMin, in float aMax)\n{\n    float r = length(uv);\n    float a = atan2(uv.y, uv.x);\n    aMin = mod(aMin, PI_2);\n    aMax = mod(aMax, PI_2);\n    float minGtMax = step(aMax, aMin);\n    a += step(a, aMax) * minGtMax * PI_2;\n    aMax += minGtMax * PI_2;\n    return smoothStep2(rMin, r) * smoothStep2(r, rMax) * step(aMin, a) * step(a, aMax);\n}\n\nconst float rBegin = 0.05;\nconst float ringWidth = 0.04;\nconst float gapWidth = 0.01;\nconst int ringCount = 18;\n\nfloat gapFunc(in float i)\n{\n    float mul = 1.0;\n    return gapWidth * mul;\n}\n\nfloat aBeginFunc(in float i)\n{\n    return 0.0 + i * iTime * 0.16 + iTime + 0.2 * sin(iTime);\n}\n\nfloat aEndFunc(in float i)\n{\n    return PI + i * iTime * 0.16 + iTime + 0.21 * sin(iTime * 1.1);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord/iResolution.xy) * 2.0 - vec2(1.0);\n    uv.x *= (iResolution.x / iResolution.y);\n\n    float c = 0.0;\n    float rMin = rBegin;\n    for (int i = 0; i < ringCount; ++i)\n    {\n        float gap = gapFunc(float(i));\n        rMin += ringWidth + gap;\n        c += arc(uv, rMin, rMin + ringWidth, aBeginFunc(float(i)), aEndFunc(float(i)));\n    }\n    \n    // Output to screen\n    fragColor = vec4(vec3(c),1.0);\n}\n","name":"Image","description":"","type":"image"}]}