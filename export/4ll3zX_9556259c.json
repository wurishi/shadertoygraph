{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"float rand(vec2 n) { \n\treturn fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n}\n\nfloat noise(vec2 n) {\n\tconst vec2 d = vec2(0.0, 1.0);\n\tvec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n\treturn mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n}\n\nfloat fbm(vec2 n) {\n\tfloat total = 0.0, amplitude = 0.5;\n    \n\tfor (int i = 0; i <4; i++) {\n        total += noise(n ) * amplitude;\n\t\tn += n;\n\t\tamplitude *= 0.5;\n\t}\n\treturn total;\n}\n\n\nvec2 field(vec2 uv) {\n    vec2 dir = uv-vec2(0.5, 0.5);\n    vec2 dir2 = vec2(dir.y, -dir.x);\n    float l = length(dir);\n    vec2 a0 = l > 0.3 ? dir/(0.1+(l-0.3)*20.) : dir2*5.;\n    return a0*3. + dir2*l*0.9;\n}\n\n\nfloat getColor(vec2 uv) {\n    return fbm(uv*5.);   \n}\n\nvec2 calcNext(vec2 uv, float t) {\n    vec2 k1 = field(uv);\n    vec2 k2 = field(uv + k1*t/2.);\n    vec2 k3 = field(uv + k2*t/2.);\n    vec2 k4 = field(uv + k3*t);\n       \n    return uv + t/6.*(k1+2.*k2+2.*k2+k3);\n}\n\nvec4 getColor(vec2 uv, float cf, float per) {\n    float t1 = per * cf;\n    float t2 = t1 + per;\n    \n    float k1 = 0.4;\n    float k2 = 0.4;\n    \n    vec2 uv1 = calcNext(uv, t1 * k1 + k2);\n    vec2 uv2 = calcNext(uv, t2 * k1 + k2);\n    \n    float c1 = getColor(uv1);\n    float c2 = getColor(uv2);\n    \n    return vec4(mix(c2, c1, cf));\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord.xy + (iResolution.yx - iResolution.xx)/2.)/iResolution.y;\n\n    float per = 2.;\n    \n    float cf = fract(iTime / per);\n    vec4 c = getColor(uv,cf, per);\n    float l = length(field(uv));\n    c =  1. - (abs(c-0.5)*5.);\n    \n    \n    // some empirical coefficients\n    c *= 0.5*vec4(0.3, 0.6, 1.1, 1.)*pow(l,-0.3);\n    c += 0.25*vec4(1.0, 0.6, 0.2, 1.)*pow(abs(l-0.35),-0.7);\n    c*=0.8;\n\n\tfragColor = c;\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4ll3zX","date":"1423862597","viewed":619,"name":"Worm-hole","username":"andregc","description":"Something similar to tunnel through space","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["procedural","2d","noise"],"hasliked":0,"parentid":"","parentname":""}}