{"ver":"0.1","info":{"id":"wlBcDK","date":"1595356938","viewed":705,"name":"Circuits II","username":"Kali","description":"Coded during Flashparty 2020 online music compos ","likes":44,"published":1,"flags":0,"usePreview":0,"tags":["2d","fractal","fake3d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nmat2 rot(float a) {\n\tfloat s=sin(a), c=cos(a);\n    return mat2(c,s,-s,c);\n}\n\nvec3 fractal(vec2 p) \n{\n   \tp=vec2(p.x/p.y,1./p.y);\n\tp.y+=iTime*sign(p.y);\n    p.x+=sin(iTime*.1)*sign(p.y)*4.;\n    p.y=fract(p.y*.05);\n    float ot1=1000., ot2=ot1, it=0.;\n\tfor (float i=0.; i<10.; i++) {\n    \tp=abs(p);\n        p=p/clamp(p.x*p.y,0.15,5.)-vec2(1.5,1.);\n        float m=abs(p.x);\n        if (m<ot1) {\n        \tot1=m+step(fract(iTime*.2+float(i)*.05),.5*abs(p.y));\n            it=i;\n        }\n        ot2=min(ot2,length(p));\n    }\n    \n    ot1=exp(-30.*ot1);\n    ot2=exp(-30.*ot2);\n    return hsv2rgb(vec3(it*.1+.5,.7,1.))*ot1+ot2;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy-.5;\n    uv.x*=iResolution.x/iResolution.y;\n    float aa=6.;\n    uv*=rot(sin(iTime*.1)*.3);\n    vec2 sc=1./iResolution.xy/(aa*2.);\n    vec3 c=vec3(0.);\n    for (float i=-aa; i<aa; i++) {\n        for (float j=-aa; j<aa; j++) {\n\t\t    vec2 p=uv+vec2(i,j)*sc;\n        \tc+=fractal(p);\n        }\n    }\n    fragColor = vec4(c/(aa*aa*4.)*(1.-exp(-20.*uv.y*uv.y)),1.);\n}","name":"Image","description":"","type":"image"}]}