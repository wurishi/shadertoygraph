{"ver":"0.1","info":{"id":"DslGDX","date":"1666891432","viewed":180,"name":"What is that in the water","username":"LuncyTB","description":"A moveing solid in the water.(Trick)","likes":12,"published":1,"flags":32,"usePreview":0,"tags":["water","multibuffer"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGRn","filepath":"/media/a/cd4c518bc6ef165c39d4405b347b51ba40f8d7a065ab0e8d2e4f422cbc1e8a43.jpg","previewfilepath":"/media/ap/cd4c518bc6ef165c39d4405b347b51ba40f8d7a065ab0e8d2e4f422cbc1e8a43.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4df3Rr","filepath":"/media/a/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","previewfilepath":"/media/ap/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n * Copyright (c) 2022 LuncyTB. All rights reserved.\n */\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 pzz = texture(iChannel0, uv);\n    vec4 piz = texture(iChannel0, uv - vec2(-1.0, 0.0) / iResolution.xy);\n    vec4 ppz = texture(iChannel0, uv - vec2(1.0, 0.0) / iResolution.xy);\n    vec4 pzi = texture(iChannel0, uv - vec2(0.0, -1.0) / iResolution.xy);\n    vec4 pzp = texture(iChannel0, uv - vec2(0.0, 1.0) / iResolution.xy);\n    \n    vec3 nor = cross(vec3(-1.0, 0.0, piz.r - pzz.r), vec3(0.0, 1.0, pzp.r - pzz.r)) + \n        cross(vec3(0.0, 1.0, pzp.r - pzz.r), vec3(1.0, 0.0, ppz.r - pzz.r)) + \n        cross(vec3(1.0, 0.0, ppz.r - pzz.r), vec3(0.0, -1.0, pzi.r - pzz.r)) + \n        cross(vec3(0.0, -1.0, pzi.r - pzz.r), vec3(-1.0, 0.0, piz.r - pzz.r));\n    nor *= vec3(1.0, 1.0, 0.09);\n    nor = -normalize(nor);\n    \n    vec4 sky = vec4(0.77, 0.88, 0.99, 1.0);\n\n    // Output to screen\n    fragColor = texture(iChannel1, (fragCoord * 1.0 + nor.xy * 1200.0) / iResolution.xy) * \n        vec4(0.5, 0.7, 1.0, 1.0) * 1.5;\n    fragColor = mix(fragColor, vec4(0.9, 0.91, 0.99, 1.0) * sky, \n        pow(pzz.r * texture(iChannel2, uv * 12.0).r * 1.2, 0.5));\n    \n    vec2 mpos = boat(iTime, iResolution.xy);\n    if (distance(mpos, fragCoord) < 5.0)\n    {\n        fragColor = vec4(0.3, 0.4, 0.31, 1.0) * 1.1 * sky;\n    }\n    else if (distance(mpos, fragCoord) < 7.0)\n    {\n        vec2 offset = normalize(fragCoord - mpos);\n        fragColor = vec4(0.3, 0.4, 0.31, 1.0) * \n            (0.8 + 0.45 * max(0.0, dot(offset, normalize(vec2(1.0, 0.4))))) *\n            sky;\n    }\n    else if (distance(mpos - vec2(1.0, 0.4) * 3.2, fragCoord) < 12.0)\n    {\n        vec2 offset = normalize(fragCoord - mpos);\n        fragColor *= 0.5 + 0.5 * vec4(1.0) * \n            pow(distance(mpos - vec2(1.0, 0.4) * 3.2, fragCoord) / 12.0, 0.7);\n    }\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"/*\n * Copyright (c) 2022 LuncyTB. All rights reserved.\n */\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    vec2 mpos = boat(iTime, iResolution.xy);\n    \n    if (distance(mpos, fragCoord) < 5.0)\n    {\n        fragColor = vec4(1.0 * (0.7 + cos(iTime * 520.0) * 0.3));   \n        return;\n    }\n    \n    if (distance(iMouse.zw, fragCoord) < 5.0)\n    {\n        fragColor = vec4(1.0);   \n        return;\n    }\n    \n    vec4 sum = vec4(0.0);\n    float base = 0.0;\n    for (float r = 0.0; r < 6.28; r += 0.1)\n    {\n        for (float l = 0.1; l < 1.0; l += 0.1)\n        {\n            vec4 s = texture(iChannel0, uv + toScreenScale(vec2(cos(r) * l, sin(r) * l) * 0.005, iResolution.xy));\n            float p = sigmod(l);\n            base += p;\n            sum += s * p;\n        }\n    }\n    \n    fragColor = sum / base * 0.98;\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"/*\n * Copyright (c) 2022 LuncyTB. All rights reserved.\n */\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec4 col = texture(iChannel0, uv);\n    \n    fragColor = col;\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"/*\n * Copyright (c) 2022 LuncyTB. All rights reserved.\n */\n\nvec2 toScreenScale(vec2 a, vec2 size)\n{\n    return a / size.xy * size.x;\n}\n\nfloat sigmod(float a)\n{\n    return 1.0 - cos(clamp(a, 0.0, 3.141592654)) * 0.5;\n}\n\nvec2 boat(float time, vec2 res)\n{\n    return vec2(cos(time), sin(time)) * \n        cos(time * 0.5 + sin(time * 0.3)) * 200.0 + vec2(0.5) * res;\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"Xsf3Rr","filepath":"/media/a/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","previewfilepath":"/media/ap/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"/*\n * Copyright (c) 2022 LuncyTB. All rights reserved.\n */\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n\n    fragColor = texture(iChannel0, uv);\n    \n    vec4 wave = texture(iChannel1, uv * 6.0 + vec2(0.044, -0.053) * iTime);\n    wave = mix(wave, texture(iChannel1, uv * 6.0 * 0.56 + vec2(-0.052, 0.047) * iTime), 0.5);\n    \n    fragColor += mix(vec4(0.0), wave * 4.0, pow(fragColor.r, 0.95) + 0.001);\n}","name":"Buffer C","description":"","type":"buffer"}]}