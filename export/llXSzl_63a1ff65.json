{"ver":"0.1","info":{"id":"llXSzl","date":"1438852869","viewed":337,"name":"Cubemap Cutscene","username":"jackdavenport","description":"An attempt to make a cutscene-like effect with the Jean Claude Van Damme video, independant of iGlobalTime. To see the progress of the video playing, uncomment \"#define DEBUG_PROGRESS_BAR\"","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["chroma","video","camera","greenscreen","cut","keying","jcvd","cutscene"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGzn","filepath":"/media/a/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","previewfilepath":"/media/ap/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","type":"cubemap","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"#define DEBUG_PROGRESS_BAR\n\nconst float videoLength = 136.;\n\nfloat getVideoProgress(float time) {\n \n    return time / videoLength;\n    \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tvec3 ray = vec3(-1.0 + 2.0 * uv,-1);\n    \n    float timestamp = getVideoProgress(iChannelTime[0]);\n   \n    // keyframes\n    if(timestamp > getVideoProgress(4.45) && timestamp < getVideoProgress(10.)) {\n     \n        ray = ray.zyx;\n        \n    } else if(timestamp > getVideoProgress(10.) && timestamp < getVideoProgress(12.3)) {\n     \n        ray = ray.xyz;\n        \n    } else if(timestamp > getVideoProgress(11.3)) {\n     \n        ray = ray.zyx;\n        \n    }\n    \n    vec3 key = vec3(0.,1.,0.);\n    vec3 jcvd = texture(iChannel0,uv).xyz;\n    \n    vec3 diff = jcvd - key;\n    \n    if(dot(diff,diff) > 0.6) {\n     \n        fragColor = vec4(jcvd.xyz,1.);\n        \n    } else {\n     \n        fragColor = texture(iChannel1,ray);\n        \n    }\n    \n    #ifdef DEBUG_PROGRESS_BAR\n    \t\n    \tfloat x = (iResolution.x * timestamp) / iResolution.x;\n    \tfloat y = (iResolution.y * 0.05) / iResolution.y;\n    \n    \tif(uv.x > 0. && uv.y > 0. && uv.x < x && uv.y < y) {\n        \n            fragColor = vec4(1.,0.,0.,1.);\n            \n    \t}\n    \n    #endif\n    \n}","name":"","description":"","type":"image"}]}