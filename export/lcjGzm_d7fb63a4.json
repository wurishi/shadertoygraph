{"ver":"0.1","info":{"id":"lcjGzm","date":"1704134884","viewed":177,"name":"Spectral flower 2","username":"ChunderFPV","description":".","likes":17,"published":1,"flags":32,"usePreview":0,"tags":["blur","spiral","buffer","fraction","cosmic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// radial blur\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    vec2 u = U/R;\n    vec3 c = texture(iChannel0, u).rgb*.7, k;\n    float l = 70.,  // loop size\n          j = 1./l, // increment size\n          a = length((U+U-R)/R.y*3.), // mipmap aa\n          b = j*9., // brightness\n          p = sign(M.y/R.y-.5),\n          i = j;\n    \n    for (; i<=1.; i+=j)\n          k = texture(iChannel0, mix(u, vec2(.5), p-i*p), a).rgb,\n          c += b * H(i+.2) * sqrt(i) * (k + .1 - i*.1);\n    \n    c.r += .2-a*.1;\n    C = vec4(tanh(c*c), 1);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// fraction spiral\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    float s = 500., // scale\n          l = 30.,  // detail loop\n          wr = 2.5, // warp radius (frame scale)\n          t = 9. + pow(1. + iTime/60., 2.),\n          a = -sqrt(t*s*2.)*6.2832, // rotation\n          i = 0., f = i, n, r, w, h;\n    \n    vec2 m = (M.xy-R/2.)/R.y*4.,\n         u = (U-R/2.)/R.y,\n         q, v;\n    \n    vec3 c = H(length(u))/25.;\n    \n    n = N(clamp(-m.y, -1.8, 1.8)); // root from mouseY\n    u *= pow(s, n)*wr; // apply zoom\n    \n    r = exp(log(length(u))/n); // root radius\n    q = fwidth(u); // pixel size\n    w = R.y/6e2; // point size\n    for (; i++<l;) // cell overlap loop\n        h = max(0., round((r-i)/l))*l+i, // rounded radius\n        f = max(f, w/length((u-cos(6.2832*sqrt(t*h*2.)+a-vec2(0, 1.5708))*pow(h, n))/q));\n    c += min(f, 1.) * min(1., s/r);\n    \n    v = abs(fract(U/R+.5)-.5);    // vignette\n    c = min(c, min(v.x, v.y)*5.); // darken screen edges\n    \n    C = vec4(c, 1);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define R iResolution.xy\n#define M iMouse\n#define H(a) (cos(radians(vec3(0, 60, 120))+(a)*6.2832)*.5+.5)  // hue\n#define N(r) ((abs(r) > 1.) ? 1./(2.*sign(r)-(r)): r)  // range +/-2 to value on number line","name":"Common","description":"","type":"common"}]}