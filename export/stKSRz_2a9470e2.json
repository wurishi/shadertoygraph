{"ver":"0.1","info":{"id":"stKSRz","date":"1640102524","viewed":303,"name":"soap bubbles","username":"4eckme","description":"soap bubbles","likes":3,"published":1,"flags":34,"usePreview":0,"tags":["mouse","water","bubble","soap","soapbubble"],"hasliked":0,"parentid":"7dy3W3","parentname":"cool plasma"},"renderpass":[{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 rgba, in vec2 xy )\n{\n    vec2 r=iResolution.xy; vec4 t=vec4(\n        iTime,\n        -sin(iTime/2.+1.57/2.)*r.x/4.,\n        cos(iTime+1.57/2.)*r.y/3.,\n        2.\n    );\n    if (iMouse.x+iMouse.y>0.) rgba=bubble(xy,iMouse,iResolution,t,iChannel0,430.);\n    else rgba=bubble(xy,iMouse,iResolution,t,iChannel1,430.);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 rgba, in vec2 xy )\n{\n    vec2 r=iResolution.xy;\n    rgba=bubble(xy,iMouse,iResolution,vec4(\n        iTime,\n        sin(iTime/2.)*r.x/3.,\n        sin(iTime)*r.y/3.,\n        -2.\n    ),iChannel0,460.);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 rgba, in vec2 xy )\n{\n    vec2 r=iResolution.xy;\n    rgba=bubble(xy,iMouse,iResolution,vec4(\n        iTime,\n        cos(iTime/2.)*r.x/4.,\n        cos(iTime+1.57)*r.y/4.,\n        -1.\n    ),iChannel0,520.);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"void mainImage( out vec4 rgba, in vec2 xy )\n{\n    vec2 r=iResolution.xy;\n    rgba=bubble(xy,iMouse,iResolution,vec4(\n        iTime,\n        -cos(iTime/2.)*r.x/4.,\n        sin(-iTime+1.57)*r.y/4.,\n        0.\n    ),iChannel0,490.);\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"void mainImage( out vec4 rgba, in vec2 xy )\n{\n    vec2 r=iResolution.xy;\n    rgba=bubble(xy,iMouse,iResolution,vec4(\n        iTime,\n        sin(-iTime/2.)*r.x/4.,\n        cos(-iTime+1.57/2.+1.57)*r.y/3.,\n        1.\n    ),iChannel0,560.);\n}","name":"Buffer D","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"vec4 bubble(vec2 xy,vec4 iMouse,vec3 iResolution,vec4 t,sampler2D iChannel,float zoom)\n{\n    vec4 rgba;//output\n    vec2 r=iResolution.xy,m,o;//helpers\n    //mouse move\n    if(iMouse.x+iMouse.y>0.){m=iMouse.xy;}\n    else {m=r/2.;//default mouse position in screen center\n        m.x-=t.y; //move default mouse.x by time\n        m.y-=t.z; //move default mouse.y by time\n    }m+=4.*vec2(sin(t.x*6.),cos(t.x*6.));o=xy-m;//end mouse move\n    float angle=(atan(-o.y,-o.x));//radians\n    rgba=texture(iChannel,xy/r.xy/1.);//attach texture\n    float k=min(r.x,r.y)/zoom;//bubble size factor\n    //o+=0.8*(abs(sin(t.x*8.+(degrees(angle))/12.)))*k;//bubble warp\n    o*=.006*(201.5-(t.w+sin(t.x*8.+(degrees(angle/12.)))+cos(t.x*8.+(degrees(angle/12.)))));//bubble warp\n    vec2 safe=o;if(length(o/k)<100.){//if bubble\n        o*=pow(sin(1.0*(length(o/k)/60.)),2./3.)*1.5;//bubble distort\n        rgba=texture(iChannel,(o+m)/r.xy/1.);//disort texture\n        vec4 rainbow=vec4(sin(angle-1.2),sin(angle),sin(angle+1.2),0);//rainbow\n        rgba*=1.-rainbow/3.0*length(o/k*2.0)*sin(length(o/k)/48.+0.5)/100.;//bubble rainbow\n        if(length(safe/k)>0.0)rgba*=1.+(pow(length(safe/k-0.),0.25))*vec4(0.33,0.66,1,0)/6.28;//water shadow\n        if(length(safe/k)>94.)rgba*=1.+(length(safe/k)-94.)/10.;//outline 1\n        if(length(safe/k)>97.)rgba*=1.+(length(safe/k)-97.)/10.;//outline 2\n        if(length(safe/k)>99.)rgba+=abs(99.-length(safe/k))/4.;//smooth in edges\n        //patch of reflected light\n        if(sqrt(pow(o.x/k-50.,2.)+pow(o.y/k-50.0,2.0))<50.){\n            rgba/=clamp(sqrt(pow(o.x/k-50.,2.0)+pow(o.y/k-50.0,2.0))/50.,0.2,1.);\n    }}if(length(o/k)<102.&&length(safe/k)>98.)rgba+=(102.-length(safe/k))/4.;//smooth edges\n    return rgba;\n}","name":"Common","description":"","type":"common"}]}