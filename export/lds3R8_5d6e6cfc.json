{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"channel":1,"type":"video","id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"const int nSamples = 64;\r\n\r\n\r\nvec2 rotate(vec2 v,float t)\r\n{\r\n\tfloat ct = cos(t);\r\n\tfloat st = sin(t);\r\n\treturn vec2(ct*v.x-st*v.y,st*v.x+ct*v.y);\r\n}\r\n\t\t\r\nvec2 transform(float time, vec2 offset)\r\n{\r\n\tvec2 mid = vec2(0.5, 0.5);\r\n\treturn rotate(vec2(cos(time*1.07)*0.2, sin(time)*0.2) + offset - mid, sin(time/10.0)*5.00)*(cos(time*0.87)/2.0+1.0) + mid;\r\n}\r\n\r\nconst float TIMESHIFT = 1.0;\r\n\t\r\nconst float TIME0 = 0.0/60.0;\r\nconst float TIME1 = 3.0/60.0;\r\nconst float TIME2 = 6.0/60.0;\r\nconst float TIME3 = 9.0/60.0;\r\nconst float TIME4 = 12.0/60.0;\r\n\r\nconst float WEIGHT01 = 2.0;\r\nconst float WEIGHT12 = 3.0;\r\nconst float WEIGHT23 = 2.0;\r\nconst float WEIGHT34 = 1.0;\r\n\r\nconst vec3 LUMINANCE = vec3(0.213, 0.715, 0.072);\r\n\r\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\r\n{\r\n\tvec2 offset = fragCoord.xy / iResolution.xy;\r\n\r\n\tvec3 timeTex = texture(iChannel1,offset).xyz;\r\n\tfloat timeOffset = iTime+dot(LUMINANCE,timeTex)*TIMESHIFT;\r\n\r\n\toffset.y -= 0.5;\r\n\toffset.y *= iResolution.y / iResolution.x;\r\n\toffset.y += 0.5;\r\n\t\r\n\t// time offsets \r\n\tvec2 uv0 = transform(timeOffset-TIME0, offset);\r\n\tvec2 uv1 = transform(timeOffset-TIME1, offset);\r\n\tvec2 uv2 = transform(timeOffset-TIME2, offset);\r\n\tvec2 uv3 = transform(timeOffset-TIME3, offset);\r\n\tvec2 uv4 = transform(timeOffset-TIME4, offset);\r\n\tvec2\tdelta01 = uv1-uv0;\r\n\tvec2\tdelta12 = uv2-uv1;\r\n\tvec2\tdelta23 = uv3-uv2;\r\n\tvec2\tdelta34 = uv4-uv3;\r\n\r\n\tdelta01 /= float(nSamples/4);\r\n\tdelta12 /= float(nSamples/4);\r\n\tdelta23 /= float(nSamples/4);\r\n\tdelta34 /= float(nSamples/4);\r\n\t\r\n\tvec3 col01 = texture(iChannel0,uv0).xyz;\r\n\tfor(int i=1; i<nSamples/4; i++)\r\n\t{\r\n\t\tuv0 += delta01;\r\n\t\tcol01 += texture(iChannel0,uv0).xyz;\r\n\t}\r\n\r\n\tvec3 col12 = texture(iChannel0,uv1).xyz;\r\n\tfor(int i=1; i<nSamples/4; i++)\r\n\t{\r\n\t\tuv1 += delta12;\r\n\t\tcol12 += texture(iChannel0,uv1).xyz;\r\n\t}\r\n\r\n\tvec3 col23 = texture(iChannel0,uv2).xyz;\r\n\tfor(int i=1; i<nSamples/4; i++)\r\n\t{\r\n\t\tuv2 += delta23;\r\n\t\tcol23 += texture(iChannel0,uv2).xyz;\r\n\t}\r\n\t\r\n\tvec3 col34 = texture(iChannel0,uv3).xyz;\r\n\tfor(int i=1; i<nSamples/4; i++)\r\n\t{\r\n\t\tuv3 += delta34;\r\n\t\tcol34 += texture(iChannel0,uv3).xyz;\r\n\t}\r\n\r\n\tvec3 col = col01*WEIGHT01 + col12*WEIGHT12 + col23*WEIGHT23 + col34*WEIGHT34;\r\n\tcol /= (WEIGHT01+WEIGHT12+WEIGHT23+WEIGHT34)*float(nSamples/4);\r\n\t\r\n\tfragColor = vec4(mix(col,timeTex,dot(LUMINANCE,col)),1.0);\r\n}\r\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lds3R8","date":"1362840919","viewed":669,"name":"motion","username":"xenit","description":"Motion blur, 64 samples per pixel (4 x 16 piecewise linear samples). The luminance of the secondary texture/animation shifts time.\nDisclaimer: first shader.","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["motionblur","timeshift"],"hasliked":0,"parentid":"","parentname":""}}