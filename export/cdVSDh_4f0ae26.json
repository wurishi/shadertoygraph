{"ver":"0.1","info":{"id":"cdVSDh","date":"1715366685","viewed":19,"name":"Heart bombs","username":"leprixon","description":"frsfs","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["pp"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SPARKS 7.f\n#define SPEED 0.002f\n#define PI 3.1415\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n                         vec2(12.9898,78.233)))*\n        43758.5453123);\n}\n\nfloat getTime(float x, float t)\n{\n    return 150.f * sin(2.3f * t) * 1.0f/ max(0.5f, fract(sin(5.7f * x * (1.0f - 0.5f*x) + PI /365.0f)));\n}\n\nfloat hearts(vec2 v, float angle)\n{\n    angle = -angle;\n    float x = abs(dot(v, vec2(cos(angle), -sin(angle))));\n    float y = dot (v, vec2(sin(angle), cos(angle)));\n\n    return x * x + pow(1.2f * y - x * (0.2f - x) / 0.2f, 2.f);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    vec3 col = vec3(0.f);\n\n    for (int i = 1; i < int(SPARKS); i++)\n    {\n        float x = abs(uv.x - float(i) / SPARKS) + 0.005f;\n        float time = getTime(float(i) / SPARKS, mod(iTime, PI / 2.0f));\n        float mhightime = getTime(float(i) / SPARKS, PI / 4.f);\n        \n        float mhigh = SPEED * mhightime;\n        float high = SPEED * time;\n        \n        if (mod(iTime, PI / 2.0f) < PI / 4.0f)\n        {\n            if (length(uv - vec2(float(i) / SPARKS, high)) <= 0.02f)\n            {\n                col = vec3(1.f);\n            }\n        }\n        else\n        {\n            for (int j = 0; j<6; j++)\n            {\n                float angle = 2.0f * PI / 5.0f * float(j);\n                vec2 force = vec2(cos(angle), sin(angle)) * SPEED - vec2(0.0f, 0.008f * abs(mod(iTime, PI / 2.0f) - PI / 3.5f));\n                vec2 pos = vec2(float(i) / SPARKS, mhigh) + 0.8f * force * getTime(float(i) / SPARKS, abs(mod(iTime, PI / 2.0f) - PI / 4.0f));\n                vec2 nf = 0.8f * force * getTime(float(i) / SPARKS, abs(mod(iTime, PI / 2.0f) - PI / 4.0f));\n\n                float dist = hearts(uv - pos, atan(nf.y / SPEED / 0.8f, nf.x / SPEED / 0.8f));\n                if (dist <= 0.0005f)\n                {\n                    col = vec3(0.65f, 0.85f, 0.95f) * (1.f - pow(length(nf), 1.0f/3.0f));\n                    col.r *= 1.0f - pow(nf.x, 2.0f/6.0f);\n                    col.g *= 1.0f - pow(nf.y, 2.0f/6.0f);\n                    col.b *= abs(uv.x - pow(uv.x, 1.0f / 5.0f)) / length(uv);\n                }\n            }\n        }\n    }\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}