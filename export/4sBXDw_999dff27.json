{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#ifdef GL_ES\n#define LOWP lowp\nprecision mediump float;\n#else\n#define LOWP \n#endif\n\nfloat hash(vec2 p)\n{\n    return fract(sin(dot(p,vec2(127.1,311.7))) * 43758.5453123);\n}\n\nfloat noise(vec2 p)\n{\n    vec2 i = floor(p), f = fract(p); \n\tf *= f*(3.-2.*f);\n    return mix(mix(hash(i + vec2(0.,0.)), \n                   hash(i + vec2(1.,0.)), f.x),\n               mix(hash(i + vec2(0.,1.)), \n                   hash(i + vec2(1.,1.)), f.x), f.y);\n}\n\nfloat fbm(in vec2 p)\n{\n\treturn\t.5000 * noise(p)\n\t\t   +.2500 * noise(p * 2.)\n\t\t   +.1250 * noise(p * 4.)\n\t\t   +.0625 * noise(p * 8.);\n}\n\n#define NUM_LAYERS 12\n#define LAYER_DEPTH 5.0\n#define ALTSCALE 3.0\n#define DROPOFF 15.0\n#define DROPBIAS 0.2\n#define ANGLE 0.8\n\nLOWP vec4 lightColor = vec4(1,0,0,1);\nLOWP vec4 darkColor = vec4(0,1,0,1);\nLOWP vec4 fogColor = vec4(0,0,1,0);\n\nvec4 slopecolor(float x, float y, float z, float layer)\n{\n    float slope = fbm(vec2(x+y,y+layer));\n    float fog = 1.0 - LAYER_DEPTH/(LAYER_DEPTH+z);\n    return mix(fogColor, mix(darkColor, lightColor, slope), fog);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfragColor = vec4(0,0,0,0);\n    float t = iTime*1.0;\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    for (int i=0; i<NUM_LAYERS; i++)\n    {\n\t    float z = (fract(-t) + float(i)) * LAYER_DEPTH;\n        float layer = float(i) + floor(t);\n\t    float x = (uv.x-0.5)*z;\n\t    float y = uv.y*z + DROPOFF/(DROPBIAS+z) - z*ANGLE;\n   \t\tfloat alt = fbm(vec2(x,layer)) * ALTSCALE;\n        if (y < alt)\n        {\n            fragColor = slopecolor(x-alt,y,z,layer+alt);\n            break;\n        }\n    }\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4sBXDw","date":"1412809225","viewed":255,"name":"2.5D Terrain","username":"sehugg","description":"Simple flat layered terrain","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["fractal","terrain","mountains"],"hasliked":0,"parentid":"","parentname":""}}