{"ver":"0.1","info":{"id":"fdXSDS","date":"1619129540","viewed":243,"name":"fake parula and heatmap","username":"iradicator","description":"Heatmap (left) goes from \"cold\" to \"hot\" according to (approximately) the luminance\n\n\"fake parula\" (right) inspired by https://www.mathworks.com/help/matlab/ref/parula.html\n\nThe top bar at the bottom is the heatmap and the one below is fake parula","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d","color","transformation","heatmap","auxiliary","parula"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float luminance(in vec3 c)\n{\n  return dot(vec3(0.299, 0.587, 0.114), c);\n}\n\nfloat cheaplobe(in float x, in float m, in float w)\n{\n  return smoothstep(m - w, m, x) * smoothstep(m + w, m, x);\n}\n\nvec3 heatmap(in float c) \n{\n  return pow(0.5 * (1.0 + cos(3.1 * c - vec3(2.7, 1.3, -0.2))), vec3(3.0,3.0,4.0));\n}\nvec3 heatmap(in vec3 c) \n{\n  return pow(0.5 * (1.0 + cos(3.1 * c - vec3(2.7, 1.3, -0.2))), vec3(3.0,3.0,4.0));\n}\n\nvec3 parula(in vec3 c) \n{\n  float l = luminance(c);\n  vec3 d = vec3(\n      -0.1 + 0.22*cheaplobe(l,0.83,0.19) - 0.07*cheaplobe(l,0.55,0.16),\n      0.02 - 0.21*cheaplobe(l,0.83,0.26) - 0.23*cheaplobe(l,-0.02,0.14) - 0.03*cheaplobe(l,0.59,0.12),\n           - 0.11*cheaplobe(l,0.57,0.2)\n  );\n  vec3 w = vec3(0.52,0.5,0.53) + vec3(0.52,0.52,0.45) * sin(vec3(2.80,2.80,2.04) * (c-vec3(0.4,0.4,-0.63)));\n  vec3 p = vec3(mix(0.7,0.8,c.r),mix(0.3,0.7,c.g),mix(2.9,2.2,c.b));\n  return pow(d + pow(w, p), vec3(1.5));\n}\nvec3 parula(in float c) \n{\n  vec3 d = vec3(\n      -0.1 + 0.22*cheaplobe(c,0.83,0.19) - 0.07*cheaplobe(c,0.55,0.16),\n      0.02 - 0.21*cheaplobe(c,0.83,0.26) - 0.23*cheaplobe(c,-0.02,0.14) - 0.03*cheaplobe(c,0.59,0.12),\n           - 0.11*cheaplobe(c,0.57,0.2)\n  );\n  vec3 w = vec3(0.52,0.5,0.53) + vec3(0.52,0.52,0.45) * sin(vec3(2.80,2.80,2.04) * (vec3(c)-vec3(0.4,0.4,-0.63)));\n  vec3 p = vec3(mix(0.7,0.8,c),mix(0.3,0.7,c),mix(2.9,2.2,c));\n  return pow(d + pow(w, p), vec3(1.5));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec3 col = texture(iChannel0, uv).rgb;\n    \n    float l = uv.x - (0.5*sin(1.23*iTime)+0.5);\n    col = mix(heatmap(col), parula(col),smoothstep(0.0,2.0/iResolution.x,l));\n    col = mix(vec3(0.0),col,smoothstep(0.0,2.0/iResolution.x,abs(l)));\n    \n    if (uv.y < 0.10) col = heatmap(vec3(uv.x));\n    if (uv.y < 0.05) col = parula(vec3(uv.x));\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}