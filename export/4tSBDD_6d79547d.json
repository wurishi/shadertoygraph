{"ver":"0.1","info":{"id":"4tSBDD","date":"1515736429","viewed":196,"name":"Thing_0","username":"balkhan","description":"thing","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["3d","thing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sfGRr","filepath":"/media/a/27012b4eadd0c3ce12498b867058e4f717ce79e10a99568cca461682d84a4b04.bin","previewfilepath":"/media/ap/27012b4eadd0c3ce12498b867058e4f717ce79e10a99568cca461682d84a4b04.bin","type":"volume","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define FUDGE .5\n\nvec3\tcam(vec2 u);\nfloat\tscene(vec3 p);\nfloat\tmylength(vec2 p);\nfloat\tmylength(vec3 p);\nvoid rotate(inout vec2 v, float angle);\n\nvec3\th;\nvec3\tret_col;\n\nvoid mainImage( out vec4 o, in vec2 f )\n{\n    h = vec3(0.);\n    ret_col = vec3(.0);\n\tvec2 R = iResolution.xy, u = (f.xy-R.xy*.5) / R.yy;\n    o = vec4(0.);\n    vec3\tcm = cam(u);\n    vec2\tdist = vec2(0.);\n    vec3\tpos = vec3(.0,.0,3.);\n    vec3\tp;\n    float\tii = 0.;\n    for (float i = 0.; i < 200.; i++)\n    {\n        p = dist.y * cm + pos;\n    \tdist.x = scene(p);\n        dist.y += dist.x * FUDGE;\n        if (log(dist.y*dist.y/dist.x/1e5) > 0. || dist.x < .0001 || dist.y > 150. )\n            break;\n        ++ii;\n    }\n   \n    o.w = 1.;\n\to.xyz = ret_col*(dist.y*1.3-3.*ii/50.+.5 ); \n    o.xyz += h;\n}\n\nfloat\tscene(vec3 p)\n{\n    float\tret = 1e5;\n    float\tll = 1e5;\n    p.z-=1.*sin(iTime)-0.;\n    rotate(p.zy, 0.*.7+iTime*.4);\n    rotate(p.zx, 0.*.35-iTime*.25);\n    vec3\tap = p;\n    p.xz *= mat2(cos(iTime*.75), sin(iTime*.75), -sin(iTime*.75), cos(iTime*.75) );\n    p.zy *= mat2(cos(iTime*.75), -sin(iTime*.75), sin(iTime*.75), cos(iTime*.75) );\n\n    vec3\top = p;\n    p.x = mylength(op.yz)-.75;\n    p.y = mylength(op.xz)-.75;\n    p.z = mylength(op.zx)-.75;\n    \n    p = abs(p)-.4;\n    rotate(p.zx, iTime*1.);\n    p = abs(p)-.06125;\n    rotate(p.zy, iTime*.5);\n    p = abs(p)-.06125;\n    \n    ret = mylength(p )-.03522125;\n    float lm = length(op.yz)+.01;\n    lm = min(lm, length(op.zx)+.01 );\n    lm = min(lm,\n             max(mylength(op)-.125, .01251)\n             );\n    ll = min(ll, mylength(abs(ap.zx)-2.5 )-.125);\n    ll = min(ll, mylength(abs(ap.yz)-2.5 )-.125);\n    ll = min(ll, mylength(abs(ap.yx)-2.5 )-.125);\n    \n    ret = min(ret, lm);\n    float\twall = 1e5;\n    wall = min(wall, ap.x+5.);\n    wall = max(wall, -ap.x -5.);\n    wall = min(wall, ap.y+5.);\n    wall = max(wall, -ap.y -5.);\n    wall = min(wall, ap.z+5.);\n    wall = max(wall, -ap.z -5.);\n    wall = min(wall, -ap.x+5.);\n    wall = max(wall, ap.x -5.);\n    wall = min(wall, -ap.y+5.);\n    wall = max(wall, ap.y -5.);\n    wall = min(wall, -ap.z+5.);\n    wall = max(wall, ap.z -5.);\n    ret = min(ret, wall);\n    ret = min(ret, ll);\n    ret_col = (ret == wall && ret != lm) ? .1*vec3(.410,.2510,.210) : vec3(.4,.4,.2) ;\n    ret_col = (ret == ll ) ? .12*vec3(.2310,.510,.310) : ret_col ;\n    h += .00051*vec3(.97, .5, .29)*1./(lm*lm + .01);\n    h -= .00051*vec3(.25, .25, .5)*1./(ret*ret + .051);\n    h -= .00051*vec3(.25, .31, .30)*1./(ll*ll + .0251);\n    float\tcl = (texture(iChannel0, ap*.08-.75*vec3(-iTime*.3, iTime*.251, .0) ).x );\n    vec3\tpp = (fract(ap*.0625-cl*.5)-.5);\n    cl = max(abs(pp.x) , max(abs(pp.y) , abs(pp.z) ))-.25*0.-cl*.75;\n    cl = max(cl, -(max(abs(ap.x) , max(abs(ap.y) , abs(ap.z) ) )-2.55));\n    cl = max(cl, (max(abs(ap.x) , max(abs(ap.y) , abs(ap.z) ))-5.));\n    cl = max(abs(cl), .021);\n    ret = min(ret, cl);\n    ret_col = (ret == cl ) ? .0*vec3(.310,.352510,.310) : ret_col ;\n\th += vec3(.25, .4, .5)*.000251/((cl) *(cl) + .021);\n\treturn ret;\n}\n\nvec3\tcam(vec2 u)\n{\n    vec3\tret;\n    \n    vec3\t\tforw  = vec3(0.0, 0.0, -1.0);\n\tvec3    \tright = vec3(1.0, 0.0, 0.0);\n\tvec3    \tup    = vec3(0.0, 1.0, 0.0);\n    ret = normalize(forw * 1. + right * u.x + up * u.y);\n    return ret;\n}\n\nvoid rotate(inout vec2 v, float angle)\n{\n\tv = vec2(cos(angle)*v.x+sin(angle)*v.y,-sin(angle)*v.x+cos(angle)*v.y);\n}\n\nfloat\tmylength(vec2 p)\n{\n\tfloat\tret;\n\n    ret = max( abs(p.x)+.5*abs(p.y), abs(p.y)+.5*abs(p.x) );\n    \n    return ret;\n}\n\nfloat\tmylength(vec3 p)\n{\n\tfloat\tret;\n\n    ret = max( abs(p.x)+.5*abs(p.y), abs(p.y)+.5*abs(p.x) );\n    ret = max( ret, abs(p.z)+.5*abs(p.x) );\n    return ret;\n}\n","name":"Image","description":"","type":"image"}]}