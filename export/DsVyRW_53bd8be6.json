{"ver":"0.1","info":{"id":"DsVyRW","date":"1695839525","viewed":26,"name":"Wave but bug","username":"Qwer643","description":"EPILEPTIC WARNING!!!\nI tried to simulate the propagation of waves by a cellular automaton, but I got a beautiful bug","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["wave","bug"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// pause and rewind time to 0.0\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = fragCoord.xy / iResolution.xy;    \n    vec4 draw = texture(iChannel0, uv);\n    fragColor = draw;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = fragCoord.xy / iResolution.xy;    \n    vec2 pix = vec2(1.0, 1.0) / iResolution.xy;\n     \n    vec4 previous = texture(iChannel0, uv);\n    float avg = texture(iChannel0, uv + vec2(pix.x, 0.0)).r;\n    \n    avg += texture(iChannel0, uv + vec2(-pix.x, 0.0)).r;    \n    avg += texture(iChannel0, uv + vec2(0.0, pix.y)).r;\n    avg += texture(iChannel0, uv + vec2(0.0, -pix.y)).r;    \n    avg /= 4.0;\n    \n    //r=heig, g=spd\n    float spd = (avg - previous.r); // can be negative    \n    if (spd < 0.0){\n        previous.g += -spd; //green - negative    \n    } else {\n        previous.b += spd; //positive    \n    }\n    spd = (previous.b - previous.g); //actual spd    \n    \n    // save to next frame\n    if (spd < 0.0){        \n        previous.g = -spd;\n    } else {        \n        previous.b = spd;\n    }    \n    previous.r += spd;    \n    fragColor = previous;    \n    // initial wave?    \n    if (iFrame < 2){\n        fragColor.r = sin(uv.x * 142.0) * cos(uv.y * 42.0) - iTime;    \n    }\n}","name":"Buffer A","description":"","type":"buffer"}]}