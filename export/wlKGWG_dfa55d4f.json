{"ver":"0.1","info":{"id":"wlKGWG","date":"1579781907","viewed":128,"name":"Wrapping UVs around gaps","username":"meteotrix","description":"I'm trying to figure out math for how to get one of my 2D fire shader to wrap around objects","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["domaindistortion"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float height_field(float x, float y)\n{\n    x *= 3.14159;\n    y *= 3.14159;\n    return sin(x*2.4)*sin(y*2.5)*4.0;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n\n    //version 1\n/*\tfloat disp_u = (uv.x < 0.5 ? -1.0 : 1.0) *3.0*pow(abs(0.5-uv.y),2.0);    \n    float mod_interval = 0.1;    \n    vec3 col = vec3(mod(uv.x + disp_u, mod_interval),mod(uv.y, mod_interval),0) * (1.0/mod_interval);\n*/\n    \n    //version 2    \n    float delta = 0.001;\n    float height = height_field(uv.x, uv.y);\n    float dx = height_field(uv.x +delta, uv.y) - height;\n    float dy = height_field(uv.x, uv.y +delta) - height;\n    vec2 disp = vec2(dx,dy)*3.0;    \n    float mod_interval = 1.0;\n    vec2 distorted_uv = vec2(mod(uv.x + disp.x, mod_interval),mod(uv.y + disp.y, mod_interval));\n    vec3 col = vec3(distorted_uv.x, distorted_uv.y,0) * (1.0/mod_interval);\n    \n    col = texture(iChannel0, distorted_uv + iTime*vec2(0.0,1.0)).rgb;\n    \n    fragColor = vec4(col,1.0);\n}\n\n\n\n","name":"Image","description":"","type":"image"}]}