{"ver":"0.1","info":{"id":"wltGz7","date":"1575970600","viewed":140,"name":"infinite trax","username":"StrangerintheQ","description":"simple truchet pattern","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["truchet"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float rand(vec2 xy) {\n    return fract(sin(133.+xy.x*13.+xy.y*45.) * 43758.5453123);\n}\n\nfloat dist(float d) {\n    float size = 0.01;\n    vec2 s = vec2(0.5 + size, 0.5 - size);\n    return 1. - min( smoothstep(d, s.x, s.y), \n                     smoothstep(d, s.y, s.x) );\n}\n\nfloat ring(vec2 uv) {\n    return dist(sqrt(dot(uv, uv)));\n}\n\nvec3 hsl2rgb(vec3 c){\n    vec3 rgb = clamp(abs(mod(\n        c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0);\n    return c.z + c.y * (rgb-0.5)*(1.0-abs(2.0*c.z-1.0));\n}\n\nfloat truchet(vec2 uv) {\n    float cellRand = rand(floor(uv));\n    vec2 cellUv = fract(uv)-0.5;\n    if (cellRand < 0.9) {      \n        float a = floor(cellRand*4.)*1.57075;\n        \n        if (cellRand < 0.1)\n        \ta += iTime;\n        \n        vec2 sc = vec2(sin(a), cos(a));\n        cellUv = mat2(sc.y, -sc.x, sc.x, sc.y) * cellUv;\n        \n        if (sqrt(dot(cellUv,cellUv)) > 0.5)\n    \t\treturn 0.;\n        else\n        \treturn ring(cellUv - 0.5) + ring(cellUv + 0.5);\n\n    } \n    return min(1., dist(cellUv.x + 0.5) + dist(cellUv.y + 0.5));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 shift = vec2(cos(iTime/3.)*3., sin(iTime/9.)*5.);\n    vec2 uv = fragCoord/66. + shift;\n    float result = truchet(fragCoord/66. + shift);\n    vec3 color = hsl2rgb(vec3( fract(uv).x +fract(uv).y ,0.9,0.7));\n    fragColor = vec4(color*result, 1.);\n}","name":"Image","description":"","type":"image"}]}