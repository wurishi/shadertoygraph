{"ver":"0.1","info":{"id":"slXXW4","date":"1625678319","viewed":3378,"name":"Aspect Ratio Tutorial","username":"MichaelPohoreski","description":"Click and drag the mouse from left to right to change the quantization level","likes":18,"published":1,"flags":0,"usePreview":0,"tags":["aspectratio","circle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Copyleft (C) 2021 Michaelangel007 aka Michael Pohoreski\n//\n// LESSON on apply aspect ratio to draw a circle without distortion with any resolution of canvas\n// 0 Naive Draw circle at bottom left of canvas\n// 1 Naive Draw circle at center\n// 2 Naive Draw circle at center with correct aspect ratio so top/bottom touches canvas edge\n// 3 Naive Draw circle at center with correct aspect ratio so left/right touches canvas edge\n// 4 Naive Same as 2 but can hold left mouse down and scrub to change quantization level\n// 5 Optimized Same as 2 but simpler and faster\n// 6 Optimized Same as 3 but simpler and faster\n#define LESSON 5\n\n// How NOT to do aspect ratio correction\n// * https://stackoverflow.com/questions/67039308/how-to-draw-a-circle-instead-of-an-ellipse-when-your-monitor-screen-resolution-i\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2  uv = fragCoord     / iResolution.xy;\n    float AR = iResolution.x / iResolution.y;\n\n#if LESSON == 1\n    uv -= 0.5; // Move to center of canvas\n#endif\n\n#if LESSON == 2\n    uv -= 0.5;\n    uv.x *= AR; // Top/Bottom touch canvas edge\n#endif\n\n#if LESSON == 3\n    uv -= 0.5;\n    uv.y *= 1.0/AR; // Left/Right touch canvas edge (clipping is normal if width > height)\n#endif\n\n#if LESSON == 4 // quantize resolution\n    float SCALE = (iMouse.z > 0.5) && (iMouse.x >= 0.0)\n                ? 1.0 + floor(512.0 * iMouse.x / iResolution.x)\n                : 0.5;\n    fragCoord = round(fragCoord / SCALE) * SCALE;\n    uv = fragCoord/iResolution.xy;\n    uv -= 0.5;\n    uv.x *= AR; // Top/Bottom touch canvas edge\n#endif\n\n#if LESSON == 5 // Simpler and Faster with correct aspect ratio so top/bottom touches canvas edge\n    uv = fragCoord - iResolution.xy*0.5;\n    uv /= iResolution.y;\n#endif\n\n#if LESSON == 6 // Simpler and Faster with correct aspect ratio so left/right touches canvas edge\n    uv = fragCoord - iResolution.xy*0.5;\n    uv /= iResolution.x;\n#endif\n\n\n    float g = dot(uv,uv);\n    g = (g < 0.25)\n      ? 1.0\n      : 0.0;\n\n    vec3 fg = vec3(0.0, 0.5, 1.0); // sky blue\n    vec3 bg = vec3(1.0, 1.0, 1.0); // white\n    fragColor = vec4( mix(bg,fg,g), 1.0);\n}","name":"Image","description":"","type":"image"}]}