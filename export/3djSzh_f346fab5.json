{"ver":"0.1","info":{"id":"3djSzh","date":"1552923936","viewed":164,"name":"Polygon repeat","username":"flyingrub","description":"Play with the parameters defined at the begining","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265359\n#define TAU 6.28318530718\n#define pixel_width 50.*repeat*3./max(iResolution.y,iResolution.x)\n\n#define repeat 0.05\n#define speed 0.1\n#define sides 3.\n#define width 1.\n#define rotation_speed 0.1\n\nfloat stroke(float d, float size) {\n\treturn smoothstep(pixel_width,0.0,abs(d-size)-width/2.);\n}\n\nvec2 rotate(vec2 _uv, float _angle){\n    _uv =  mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle)) * _uv;\n    return _uv;\n}\n\nfloat polygonSDF(vec2 _uv) {\n\t// Angle and radius from the current pixel\n\tfloat a = atan(_uv.x,_uv.y)+PI;\n\tfloat r = TAU/float(floor(sides));\n\n\treturn cos(floor(.5+a/r)*r-a)*length(_uv);\n}\n\n// From https://www.shadertoy.com/view/tsBGDD\nfloat smoothmodulo(float a) {\n\treturn abs( mod(a, 2.) - 1.);\n}\n\nvoid mainImage( out vec4 O, vec2 u )\n{\n    vec2 R = iResolution.xy;\n    vec2 U = ( 2.*u - R ) / R.y;\n    U = rotate(U,iTime*rotation_speed);\n    U *= repeat*50.;\n    float c = stroke(smoothmodulo(polygonSDF(U)+iTime*10.*speed),1.);\n    O = vec4(vec3(c),1.);                                       \n}","name":"Image","description":"","type":"image"}]}