{"ver":"0.1","info":{"id":"Nsyczt","date":"1655349796","viewed":93,"name":"TriangleSDF","username":"Chango","description":"Simple code calculate Triangle's SDF in 2D space","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["sdf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat len2(float x)\n{\n    return x*x;\n}\n\nbool Is01(float x)\n{\n\n    return x>0.0f&&x<1.0f;\n}\n\nfloat cross2D(vec2 v1,vec2 v2)\n{\n    return v1.x*v2.y-v1.y*v2.x;\n}\n\nfloat SDFTriangle2D(vec2 p,vec2 A,vec2 B, vec2 C)\n{\n    vec2 AB = B-A;\n    vec2 BC = C-B;\n    vec2 CA = A-C;\n    vec2 ap = p-A;\n    vec2 bp = p-B;\n    vec2 cp = p-C;\n    float lenAB = length(AB);\n    float lenBC = length(BC);\n    float lenCA = length(CA);\n    \n    float k1 = dot(ap,AB)/len2(lenAB);\n    float k2 = dot(bp,BC)/len2(lenBC);\n    float k3 = dot(cp,CA)/len2(lenCA);\n    \n    float c1 = cross2D(ap,AB);\n    float c2 = cross2D(bp,BC);\n    float c3 = cross2D(cp,CA);\n    \n    float lenap = length(ap);\n    float lenbp = length(bp);\n    float lencp = length(cp);\n    \n    if(Is01(k1)&&c1>0.0f)\n    {\n        return sqrt(len2(lenap) - len2(k1*lenAB));\n    }\n    if(Is01(k2)&&c2>0.0f)\n    {\n        return sqrt(len2(lenbp) - len2(k2*lenBC));\n    }\n    if(Is01(k3)&&c3>0.0f)\n    {\n        return sqrt(len2(lencp) - len2(k3*lenCA));\n    }\n    \n    if(c1<0.0f&&c2<0.0f&&c3<0.0f)\n    {\n        return 0.0f;\n    }\n   \n    //return 0.0f;\n    return min(min(lenap,lenbp),lencp);\n    \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec2 screen = vec2(640.0f,360.0f);\n    vec2 B=vec2(0.2f,0.3f)*screen;\n    vec2 C=vec2(0.8f,0.4f)*screen;\n    vec2 A=vec2(0.5f,0.6f)*screen;\n    vec2 p = uv*screen;\n    float d = SDFTriangle2D(p,A,B,C);\n\n    d*=0.01f;\n    // Output to screen\n    fragColor = vec4(d,d,d,1.0);\n}","name":"Image","description":"","type":"image"}]}