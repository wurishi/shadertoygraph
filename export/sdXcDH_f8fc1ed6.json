{"ver":"0.1","info":{"id":"sdXcDH","date":"1642019567","viewed":283,"name":"date & time & timezone & ticking","username":"4eckme","description":"move bottom line to set timezone\nclick center to get your time","likes":4,"published":1,"flags":40,"usePreview":0,"tags":["mouse","time","retro","clock","day","date","year","seconds","minutes","hours","month","timezone","ticking","utc"],"hasliked":0,"parentid":"ftGSRt","parentname":"retro clock with time settings"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 R=iResolution.xy;\n    vec2 o=fragCoord-R/2.;\n    \n    int x=int(float(32)-mod(float(fragCoord.x-iResolution.x/2.0),float(64)));\n    int y=int(float(32)-mod(float(fragCoord.y-iResolution.y/2.0),float(64)));\n    int xx=int(float(32)-mod(float(fragCoord.x-iResolution.x/2.0),float(64)));\n    int yy=int(float(32)-mod(float(fragCoord.y-iResolution.y/2.0),float(64)));\n    \n    float d=mod(iDate.w-UTC*60.0*60.0,3600.0*24.0);//iDate.w;\n    vec2 m=vec2(0.0,0.0);if(abs(iMouse.x-iResolution.x/2.0)<=320.0&&abs(iMouse.y-iResolution.y/2.0+132.0)<36.0){\n        m.x=floor(clamp(iMouse.x-iResolution.x/2.0,-260.0,260.0));\n        d=mod(d+(m.x)*60.0*6.0,3600.0*24.0);\n    }\n    \n    fragColor=vec4(0);\n    if(abs(o.x)<320.-32.0&&abs(x-1)!=abs(y)&&abs(x)!=abs(y)){\n        if(abs(o.y)<=64.0&&abs(xx)>16&&(abs(x)>16||abs(y)>16)&&x*x>=y*y){\n            fragColor=vec4(235.0/256.0);\n            if(o.x<-160.0)fragColor*=abc(o,0,int(d/3600.0/10.0),iTime);\n            else if(o.x<-32.0)fragColor*=abc(o,0,int(mod(d/3600.0,10.0)),iTime);\n            else if(o.x<160.0)fragColor*=abc(o,0,int(mod(d,3600.0)/60.0/10.0),iTime);\n            else if(o.x>160.0)fragColor*=abc(o,0,int(mod(mod(d,3600.0)/60.0,10.0)),iTime);\n        }if(mod(abs(o.x),128.0)>64.0&&abs(o.y)<=80.0&&abs(yy)>16&&(abs(x)>16||abs(y)>16)&&x*x<=y*y){\n            fragColor=vec4(1.0);\n            if(o.x<-160.0)fragColor*=abc(o,1,int(d/3600.0/10.0),iTime);\n            else if(o.x<-32.0)fragColor*=abc(o,1,int(mod(d/3600.0,10.0)),iTime);\n            else if(o.x<160.0)fragColor*=abc(o,1,int(mod(d,3600.0)/60.0/10.0),iTime);\n            else if(o.x>160.0)fragColor*=abc(o,1,int(mod(mod(d,3600.0)/60.0,10.0)),iTime); \n        }\n    }\n    \n    if(abs(o.y+180.0-48.0)<1.0&&(int(abs(o.x))>=265&&int(abs(o.x))<275||abs(o.x-m.x)<=6.0||abs(o.x)<5.0)){\n        if(abs(o.x-m.x)<=6.0)fragColor=vec4(0,1,1,1);\n    }\n    \n    //top line fix\n    vec4 rgba=vec4(0,1,1,1);\n    if(o.x>0.0)o.x-=48.0;else o.x-=20.0;\n    if(o.x>100.0){o.x-=92.0;if(o.x<100.0)o.x=0.0;}\n    if(o.x>-100.0&&o.x<0.0)o.x+=7.0;\n    \n    \n    vec2 fc1=(o-vec2(96.5-R.x/18.0,135.5-R.y/18.0))/R*8.0;\n    vec2 fc2=(o-vec2(-96.5-R.x/18.0,135.5-R.y/18.0))/R*8.0;\n    fragColor+=texture(iChannel1,(fc1)).xyzw*rgba;\n    fragColor+=texture(iChannel0,(fc2)).xyzw*rgba;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"vec2 mainSound(int samp, float time){\n    \n    float t = time;\n    \n    vec2 tt=vec2(\n        abs(sin(t*radians(180.0)+0.0)),\n        abs(sin(t*radians(180.0)+1.0))\n    );\n    \n    vec2 res=vec2(\n        sin(6.2831*640.0*t*float(tt.x<0.025)),\n        sin(6.2831*320.0*t*float(tt.y<0.025))\n    );\n    \n    return res;\n}","name":"Sound","description":"","type":"sound"},{"inputs":[],"outputs":[],"code":"#define UTC 0.0\n\nfloat abc(vec2 xy, int pos, int n, float t){\n    if(abs(xy.x)>16.5){\n        if(n==9)return float(0==pos&&(mod(abs(xy.x+32.0),128.0)<64.0||mod(abs(xy.x+32.0),128.0)>64.0&&xy.y>0.0)||pos==1);\n        if(n==7)return float(0==pos&&mod(abs(xy.x+32.0),128.0)<64.0||1==pos&&xy.y>16.0);\n        if(n==8)return float(abs(xy.x)>32.0);\n        if(n==6)return float(0==pos&&(mod(abs(xy.x+32.0),128.0)<64.0&&xy.y<0.0||mod(abs(xy.x+32.0),128.0)>64.0)||pos==1);\n        if(n==5)return float(0==pos&&(mod(abs(xy.x+32.0),128.0)<64.0&&xy.y<0.0||mod(abs(xy.x+32.0),128.0)>64.0&&xy.y>0.0)||pos==1);\n        if(n==4)return float(0==pos&&(mod(abs(xy.x+32.0),128.0)<64.0||mod(abs(xy.x+32.0),128.0)>64.0&&xy.y>0.0)||pos==1&&abs(xy.y)<16.0);\n        if(n==3)return float(0==pos&&mod(abs(xy.x+32.0),128.0)<64.0||pos==1);\n        if(n==2)return float(0==pos&&(mod(abs(xy.x+32.0),128.0)>64.0&&xy.y<0.0||mod(abs(xy.x+32.0),128.0)<64.0&&xy.y>0.0)||pos==1);\n        if(n==1)return float(0==pos&&(mod(abs(xy.x+32.0),128.0)<64.0));\n        if(n==0)return float((0==pos||1==pos&&abs(xy.y)>16.0)&&n==0);\n    } return float(int(mod(t*2.0,2.0))==0&&xy.y<0.0||int(mod(t*2.0,2.0))==1&&xy.y>0.0);\n}\n\nfloat days(float y, float m){\n    if(mod(y,4.0)==0.0&&m==2.0) return 29.0;\n    if(m==2.0) return 28.0;\n    if(m==4.0||m==6.0||m==9.0||m==11.0)return 30.0;\n    return 31.0;\n}\nvec4 ymd(vec4 iDate,vec3 iResolution,vec4 iMouse){\n    float Y=iDate.x;float m=iDate.y+1.0;float d=iDate.z;float s=mod(iDate.w-UTC*60.0*60.0,3600.0*24.0);\n    \n    if(iDate.w-UTC*60.0*60.0<0.0)d-=1.0;\n    if(iDate.w-UTC*60.0*60.0>=3600.0*24.0)d+=1.0;\n    if(d==0.0){\n        m-=1.0;\n        if(m==0.0){\n            m=12.0;\n            Y-=1.0;\n        }\n        d=days(Y,m);\n    }\n    if(d==days(Y,m)+1.0){\n        d=1.0;\n        m+=1.0;\n        if(m==13.0){\n           m=1.0;\n           Y+=1.0;\n        }\n    }\n    vec2 mm=vec2(0,0);if(abs(iMouse.x-iResolution.x/2.0)<=320.0&&abs(iMouse.y-iResolution.y/2.0+132.0)<36.0){\n        mm.x=clamp(iMouse.x-iResolution.x/2.0,-270.0,270.0);\n        float ss=s+mm.x*60.0*6.0;\n        if(ss>=3600.0*24.0){\n            d+=1.0;\n        } else if(ss<0.0) {\n            d-=1.0;\n        }\n        if(d==0.0){\n            m-=1.0;\n            if(m==0.0){\n                m=12.0;\n                Y-=1.0;\n            }\n            d=days(Y,m);\n        }\n        if(d==days(Y,m)+1.0){\n            d=1.0;\n            m+=1.0;\n            if(m==13.0){\n                m=1.0;\n                Y+=1.0;\n            }\n        }\n        if(ss>=3600.0*48.0){\n            d+=1.0;\n        } else if(ss<-3600.0*24.0) {\n            d-=1.0;\n        }\n        if(d==0.0){\n            m-=1.0;\n            if(m==0.0){\n                m=12.0;\n                Y-=1.0;\n            }\n            d=days(Y,m);\n        }\n        if(d==days(Y,m)+1.0){\n            d=1.0;\n            m+=1.0;\n            if(m==13.0){\n                m=1.0;\n                Y+=1.0;\n            }\n        }\n    }\n    return vec4(Y,m,d,0);\n}","name":"Common","description":"","type":"common"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragCoord/=7.0/8.0;\n    fragCoord+=vec2(-16.0,16.0);\n    vec2 o=fragCoord-iResolution.xy/2.0;\n    \n    int x=int(float(32)-mod(float(fragCoord.x-iResolution.x/2.0),float(64)));\n    int y=int(float(32)-mod(float(fragCoord.y-iResolution.y/2.0),float(64)));\n    int xx=int(float(32)-mod(float(fragCoord.x-iResolution.x/2.0),float(64)));\n    int yy=int(float(32)-mod(float(fragCoord.y-iResolution.y/2.0),float(64)));\n    \n    fragColor=vec4(0);\n    vec4 date=ymd(iDate,iResolution,iMouse);\n    float Y=date.x;float m=date.y;float d=date.z;\n    \n    if(abs(o.x)>16.5&&abs(o.x)<320.-32.0){\n        if(abs(o.y)<=64.0&&abs(xx)>16&&(abs(x)>16||abs(y)>16)&&x*x>=y*y){\n            fragColor=vec4(245.0/256.0);\n            if(o.x<-160.0)fragColor*=abc(o,0,int(mod(Y,10000.0)/1000.0),Y);\n            else if(o.x<-32.0)fragColor*=abc(o,0,int(mod(Y,1000.0)/100.0),Y);\n            else if(o.x<160.0)fragColor*=abc(o,0,int(mod(Y,100.0)/10.0),Y);\n            else if(o.x>160.0)fragColor*=abc(o,0,int(mod(Y,10.0)),Y);\n        }if(mod(abs(o.x),128.0)>64.0&&abs(o.y)<=80.0&&abs(yy)>16&&(abs(x)>16||abs(y)>16)&&x*x<=y*y){\n            fragColor=vec4(1.0);\n            if(o.x<-160.0)fragColor*=abc(o,1,int(mod(Y,10000.0)/1000.0),Y);\n            else if(o.x<-32.0)fragColor*=abc(o,1,int(mod(Y,1000.0)/100.0),Y);\n            else if(o.x<160.0)fragColor*=abc(o,1,int(mod(Y,100.0)/10.0),Y);\n            else if(o.x>160.0)fragColor*=abc(o,1,int(mod(Y,10.0)),Y); \n        }\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragCoord/=7.0/8.0;\n    fragCoord+=vec2(-16.0,16.0);\n    vec2 o=fragCoord-iResolution.xy/2.0;\n    \n    int x=int(float(32)-mod(float(fragCoord.x-iResolution.x/2.0),float(64)));\n    int y=int(float(32)-mod(float(fragCoord.y-iResolution.y/2.0),float(64)));\n    int xx=int(float(32)-mod(float(fragCoord.x-iResolution.x/2.0),float(64)));\n    int yy=int(float(32)-mod(float(fragCoord.y-iResolution.y/2.0),float(64)));\n    \n    fragColor=vec4(0);\n    vec4 date=ymd(iDate,iResolution,iMouse);\n    float Y=date.x;float m=date.y;float d=date.z;\n\n    if(abs(o.x)>16.5&&abs(o.x)<320.-32.0){\n        if(abs(o.y)<=64.0&&abs(xx)>16&&(abs(x)>16||abs(y)>16)&&x*x>=y*y){\n            fragColor=vec4(245.0/256.0);\n            if(o.x<-160.0)fragColor*=abc(o,0,int(mod(d,100.0)/10.0),d);\n            else if(o.x<-32.0)fragColor*=abc(o,0,int(mod(d,10.0)),d);\n            else if(o.x<160.0)fragColor*=abc(o,0,int(m/10.0),d);\n            else if(o.x>160.0)fragColor*=abc(o,0,int(mod(m,10.0)),d);\n        }if(mod(abs(o.x),128.0)>64.0&&abs(o.y)<=80.0&&abs(yy)>16&&(abs(x)>16||abs(y)>16)&&x*x<=y*y){\n            fragColor=vec4(1.0);\n            if(o.x<-160.0)fragColor*=abc(o,1,int(mod(d,100.0)/10.0),d);\n            else if(o.x<-32.0)fragColor*=abc(o,1,int(mod(d,10.0)),d);\n            else if(o.x<160.0)fragColor*=abc(o,1,int(m/10.0),d);\n            else if(o.x>160.0)fragColor*=abc(o,1,int(mod(m,10.0)),d); \n        }\n    }\n}","name":"Buffer B","description":"","type":"buffer"}]}