{"ver":"0.1","info":{"id":"ttXczS","date":"1592331501","viewed":308,"name":"Day 179 - Maxwell equations","username":"jeyko","description":"potato","likes":2,"published":3,"flags":32,"usePreview":0,"tags":["mdtmjvm"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// References used: \n// https://www.youtube.com/watch?v=sxv_L4rscL0  and  https://www.shadertoy.com/view/tsB3Rz \n\n// I am using some of https://www.shadertoy.com/user/wyatt/'s naming conventions, because they work very well.\n\n\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    vec2 uv = U/iResolution.xy;\n    vec2 uvn = (U - 0.5*iResolution.xy)/iResolution.y;\n    C-=C;\n    \n    C += 0.5 + sin( length((T2(U)*1. + 2.*T(U)).xyxy)*15. - vec4(0.6,0.2,0.1,0.)-2.8 );\n    C /= 1. + C;\n    \n    C = smoothstep(0.,1.,C*1.4);\n    \n    C = pow(max(C,0.),vec4(0.45454));\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// electric\n\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    vec2 uv = U/iResolution.xy;\n    vec2 uvn = (U - 0.5*iResolution.xy)/iResolution.y;\n \tNeighborhood;   \n    \n    \n    \n    C.xyz = mix(T(U).xyz,avg.xyz,diffusion) - dt*curl/permutivity;\n\t\n    \n    // mouse\n    C.xy = mix(C.xy,0.5*sin(uv*240.),smoothstep(1.,0.,length(((iMouse.xy - U - 0.5)/iResolution.y))*90.)*float(iMouse.z>0.4) );\n    \n    \n\tif(iFrame < 2){\n\t\tC -= C;\t\n\t\t//C.xy += (sin(uv*48.+1.2))*exp(-length(uvn)*9.);\t\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"// magnetic\n\nvoid mainImage( out vec4 C, in vec2 U )\n{\n    vec2 uv = U/iResolution.xy;\n    vec2 uvn = (U - 0.5*iResolution.xy)/iResolution.y;\n \tNeighborhood;   \n \n    C.xyz = mix(T(U).xyz,avg.xyz,diffusion)+ dt*curl/permiability;\n\t    \n\tif(iFrame < 2){\n\t\tC -= C;\t\n    }\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define dt 1.\n  \n\n#define grad(j) vec2(e.j - w.j, n.j - s.j)\n#define div 0.25*(n.y-s.y+e.x-w.x)\n\n#define l inversesqrt(2.)\n#define inv l\n#define curl (cross(vec3(1,0,0),oe.xyz)+cross(vec3(-1,0,0),ow.xyz)+cross(vec3(0,1,0),on.xyz)+cross(vec3(0,-1,0),os.xyz))/4.\n//cross(vec3(inv,inv,0),one.xyz)+cross(vec3(-inv,-inv,0),osw.xyz)+cross(vec3(-inv,inv,0),onw.xyz)+cross(vec3(inv,-inv,0),osw.xyz)  )/8.\n\n    \n#define avg 0.15*(e+n+s+w)\n        \n#define diffusion 0.006    \n    \n#define permutivity 1.\n#define permiability 0.4\n\n#define rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n\n#define R iResolution.xy\n\n#define T(j) texture(iChannel0,(j)/R)\n#define T2(j) texture(iChannel1,(j)/R)\n\n\n#define Neighborhood \\\nvec4 n = T(U + vec2(0.,1.));vec4 s = T(U - vec2(0.,1.));vec4 e = T(U + vec2(1.,0.));vec4 w = T(U - vec2(1.,0.));\\\nvec4 se = T(U + vec2(1.,-1.));vec4 sw = T(U - vec2(-1.,-1.));vec4 ne = T(U + vec2(1.,1.));vec4 nw = T(U + vec2(-1.,1.));\\\nvec4 on = T2(U + vec2(0.,1.));vec4 os = T2(U - vec2(0.,1.));vec4 oe = T2(U + vec2(1.,0.));vec4 ow = T2(U - vec2(1.,0.));\\\nvec4 ose = T2(U + vec2(1.,-1.));vec4 osw = T2(U - vec2(-1.,-1.));vec4 one = T2(U + vec2(1.,1.));vec4 onw = T2(U + vec2(-1.,1.));\n    \n\n  ","name":"Common","description":"","type":"common"}]}