{"ver":"0.1","info":{"id":"csGBDG","date":"1698595776","viewed":77,"name":"Stairy night sky","username":"FrederikJA","description":"Stairy night sky","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["nightsky"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define STAR_SEED 5.0\n#define STAR_COUNT 100\n#define STAR_TIPS 6.0\n#define STAR_BRIGHTNESS 2.5\n#define STAR_SIZE_MIN 500.0\n#define STAR_SIZE_MAX 1000.0\n#define STAR_COLOR1 vec3(0.8, 0.90, 1.0)\n#define STAR_COLOR2 vec3(1.0, 0.70, 0.6)\n\n#define SKY_COLOR vec4(0.01, 0.02, 0.1, 1.0)\n\nfloat rand(float co) { return fract(sin(co*(91.3458)) * 47453.5453); }\nfloat rand(vec2 co){ return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); }\nfloat rand(vec3 co){ return rand(co.xy+rand(co.z)); }\n\nfloat genStarSize(int i) {\n    float s = float(i) * STAR_SEED * 2.0;\n    float r = rand(s);\n    return log(r + 1.0) * STAR_SIZE_MAX + STAR_SIZE_MIN;\n}\n\nvec2 genStar(int i) {\n    float s = float(i) * STAR_SEED *  2.0;\n    float x = rand(s * 3.0);\n    float r = rand(s * 5.0);\n    return vec2(x, r);\n}\n\nvec3 genStarColor(int i) {\n    float s = float(i) * STAR_SEED * 2.0;\n    float r = rand(s);\n    return mix(STAR_COLOR1, STAR_COLOR2, r);\n}\n\nvec3 genSingleStar(vec2 uv, int i) {\n    vec2 star = genStar(i);\n    \n    vec2 p = -uv + star;\n    \n    float an = mod(atan(p.y, p.x) + 6.2831 / 3.0, 6.2831 / 6.0) - 6.2831 / 3.0;\n    p = vec2(cos(an), sin(an)) * pow(length(p), 1.5);\n    \n    float br = 250.0 * pow(1.0 / max(10.0, genStarSize(i) * (sqrt(abs(p.x)) + sqrt(abs(p.y)))), STAR_BRIGHTNESS);\n    return vec3(br) * genStarColor(i);\n}\n\nvec3 getStarMap(vec2 pos) {\n    vec3 color = vec3(0, 0, 0);\n    for (int i = 1; i <= STAR_COUNT; i++) {\n        color += genSingleStar(pos, i);\n    }\n    return color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y + vec2(0.5);\n    \n    vec3 starMap = getStarMap(uv);\n    \n    fragColor = SKY_COLOR + vec4(starMap, 1.0);\n    if (uv.x < 0.0 || uv.x > 1.0) fragColor = vec4(0, 0, 0, 1);\n}","name":"Image","description":"","type":"image"}]}