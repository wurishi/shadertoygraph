{"ver":"0.1","info":{"id":"lc2fWh","date":"1724886442","viewed":33,"name":"Basic Simple Ray Tracing","username":"MountainLabs","description":"This is just a simple raytracer.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["raytracing","first"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Get normalized coordinates\n    vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;\n    \n    // Define camera parameters\n    vec3 camPos = vec3(0.0, 0.0, 5.0);  // Camera position (you can change it)\n    vec3 camDir = normalize(vec3(0.0, 0.0, -1.0));  // Camera direction (facing towards -z by default)\n    vec3 camUp = vec3(0.0, 1.0, 0.0);  // Camera up vector\n    vec3 camRight = normalize(cross(camUp, camDir));  // Camera right vector\n\n    // Construct the ray from the camera through the pixel\n    vec3 rayDir = normalize(camDir + uv.x * camRight + uv.y * camUp);\n\n    // Sphere properties\n    vec3 sphereCenter = vec3(0.0, 0.0, 0.0);  // Sphere at the origin\n    float sphereRadius = 1.0;  // Radius of the sphere\n\n    // Ray-sphere intersection\n    vec3 oc = camPos - sphereCenter;\n    float b = dot(oc, rayDir);\n    float c = dot(oc, oc) - sphereRadius * sphereRadius;\n    float h = b * b - c;\n\n    if (h < 0.0) {\n        fragColor = vec4(0.0);  // Background color\n    } else {\n        // Compute the intersection distance t\n        h = sqrt(h);\n        float t = -b - h;\n        if (t < 0.0) t = 0.0;  // Consider only positive distances\n        \n        // Compute intersection point\n        vec3 intersectionPoint = camPos + t * rayDir;\n\n        // Compute normal at intersection\n        vec3 normal = normalize(intersectionPoint - sphereCenter);\n\n        // Simple shading: use the normal to color the sphere\n        vec3 color = 0.5 + 0.5 * normal;\n\n        fragColor = vec4(color, 1.0);  // Output color\n    }\n}\n","name":"Image","description":"","type":"image"}]}