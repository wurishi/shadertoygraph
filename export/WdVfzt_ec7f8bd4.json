{"ver":"0.1","info":{"id":"WdVfzt","date":"1607734195","viewed":315,"name":"hoeled_gears","username":"hoeled","description":"Modified and animated the gear shape from The Book of Shaders.\n\nTiming was fun, time*1.4286 seems to hold the tempo for a few minutes at least.","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["gears","gear"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"mat2 Rot(float a) {\n\tfloat s=sin(a), c=cos(a);\n    return mat2(c, -s, s, c);\n}\n\nfloat GearMedium(vec2 pos) {\n    float r = length(pos)*4.0;\n    float a = atan(pos.y, pos.x);\n    float f = smoothstep(-.8, 1., cos(a*10.))*0.2+0.5;\n    float aa = fwidth(r-f);\n    float mediumGear = 1.-smoothstep(f, f+aa, r);\n    return mediumGear;\n}\n\nfloat GearSmall(vec2 pos) {\n    float r = length(pos)*6.0;\n    float a = atan(pos.y, pos.x);\n    float f = smoothstep(-.9,1., cos(a*7.))*0.25+0.5;\n    float aa = fwidth(r-f);\n    float smallGear = 1.-smoothstep(f, f+aa, r);\n    return smallGear;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n    uv.x -= .07;\n    uv.y += .03;\n    vec3 col = vec3(0.0);\n    float aa = 1.5 / iResolution.y;\n    \n    float speed = .9;\n    \n    // medium gear\n    vec2 pos = uv;\n    pos *= Rot(iTime*speed);\n    float mediumGear = GearMedium(pos);\n    mediumGear *= smoothstep(.075, .075+aa, length(pos));\n    col.rg += mediumGear;\n    \n    // small gear\n    pos = uv;\n    pos.x += .229;\n    pos.y -= .1422;\n    pos *= Rot(-iTime*1.42858*speed);\n    float smallGear = GearSmall(pos);\n    smallGear *= smoothstep(.03, .03+aa, length(pos));\n    col += vec3(smallGear);\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}