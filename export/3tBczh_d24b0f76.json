{"ver":"0.1","info":{"id":"3tBczh","date":"1594073364","viewed":177,"name":"Mellifera I","username":"sl2c","description":"Apparently this construction on a right-angled polyhedron with 14 faces was one of the first hyperbolic 3-manifolds known.","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["circles","hyperbolic","horosphere"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Copyright 2020 Google LLC\n// SPDX-License-Identifier: Apache-2.0\n// NOT an official Google project; see Google Open Source guidelines for more info on copyright transfer\n// written by William Cadegan-Schlieper \n\nfloat tau = 6.283185307179586;\n\nbool flip(inout vec3 z, inout float ds, in vec2 c, in float r, inout float t) {\n    z -= vec3(c,0.0);\n    bool res = (dot(z,z) < r*r) ^^ (r < 0.0);\n    if (res) {\n        ds *= r * r / dot(z,z);\n        z *= r * r / dot(z,z);\n    }\n    t = min(t, (dot(z,z)-r*r)/(2.0 * r * ds));\n    z += vec3(c,0.0);\n    return res;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3[3] colorizers = vec3[](\n        vec3(0.25,0.0,0.0),\n        vec3(0.0,0.3,0.0),\n        vec3(-0.13)\n    );\n    int[14] m = int[](3,0,1,2,0,1,2,0,2,1,0,2,1,3);\n    \n    vec2 z = 2.0 * (fragCoord - iResolution.xy * 0.5)/iResolution.y;\n    float ds = 1.0 / iResolution.y;\n    z *= 10.0; ds *= 10.0;\n    vec3 zh = vec3(z, 1.0);\n    \n    vec2[14] c; float[14] r;\n    float r1 = sqrt(sqrt(3.0) - sqrt(2.0));\n    r[0] = r1; c[0] = vec2(0.0);\n    float r2 = r1;\n    float x2 = sqrt(r1*r1+r2*r2);\n    float r3 = r2 / ( x2 * x2 - r2 * r2);\n    float x3 = -x2 / ( x2 * x2 - r2 * r2);\n    for (int i=0; i<6; i++) {\n        float theta = tau * float(i) / 6.0;\n        vec2 eit = vec2(cos(theta), sin(theta));\n        r[i+1] = r2;\n        c[i+1] = x2 * eit;\n        r[i+7] = r3;\n        c[i+7] = x3 * eit.yx;\n    }\n    float r4 = -1.0 / r1;\n    r[13] = r4; c[13] = vec2(0.0);\n    \n    \n    float period = -8.0 * log(r1);\n    float d = mod(iTime * 0.2, period) - period * 0.5;\n    zh *= exp(-d); ds *= exp(-d);\n\t\n    bool[4] flips=bool[](false,false,false,false);\n    float[4] ts=float[](1.0,1.0,1.0,1.0);\n    for (int i=0; i<6; i++) {\n        for (int j=0; j<14; j++) {\n            flips[m[j]] = flips[m[j]] ^^ flip(zh, ds, c[j], r[j], ts[m[j]]);\n        }\n    }\n    vec3 col = vec3(0.5);\n    if (flips[3]) {\n        ts[3] = -ts[3];\n    }\n    for (int i=0; i<3; i++) {\n        if (flips[i]) {\n            ts[i] = -ts[i];\n        }\n        col += colorizers[i] * ts[i] * ts[3];\n    }\n    fragColor = vec4(col,1.0);\n    fragColor = pow(fragColor, vec4(1.0/2.2));\n}","name":"Image","description":"","type":"image"}]}