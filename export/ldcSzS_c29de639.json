{"ver":"0.1","info":{"id":"ldcSzS","date":"1459918668","viewed":578,"name":"shallow water","username":"roenyroeny","description":"dogs","likes":5,"published":1,"flags":32,"usePreview":0,"tags":["cats"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"bool mask(vec2 uv)\n{\n    return abs(uv.x - 0.5) < 0.1 && \n       abs(uv.y - 0.5) < 0.1;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    \n    vec4 l = texture(iChannel0, uv + vec2(-1.0, 0.0) / iResolution.xy);\n    vec4 u = texture(iChannel0, uv + vec2(0.0, 1.0) / iResolution.xy);\n    vec4 r = texture(iChannel0, uv + vec2(1.0, 0.0) / iResolution.xy);\n    vec4 d = texture(iChannel0, uv + vec2(0.0,-1.0) / iResolution.xy);\n    \n    vec3 N = normalize(vec3(l.x-r.x, u.x-d.x, 1.0));\n        \n   \tvec3 refr = refract(N, vec3(0.0, 0.0, 1.0), 1.0 / 1.3);\n    vec3 refl = vec3(N.xy, N.z);\n    \n    float ndotl = pow(max(dot(refl, normalize(vec3(1,1,1))), 0.0), 32.0);\n    \n    vec4 col = texture(iChannel1, uv + refr.xy);\n    \n    if(mask(uv))\n        col = vec4(0.0);\n       \n    col.xyz += ndotl;\n    fragColor = col;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"bool mask(vec2 uv)\n{\n    return abs(uv.x - 0.5) < 0.1 && \n       abs(uv.y - 0.5) < 0.1;\n}\n\nvec4 get(vec2 uv)\n{\n    if(uv.x < 0.0 && uv.y < 0.0 && uv.x > 1.0 && uv.y > 1.0) return vec4(0.0);\n    if(mask(uv))\n            return vec4(0.0);\n\treturn texture(iChannel0, uv);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float stepsize = 3.0;\n    vec2 p = fragCoord.xy / iResolution.xx;\n    vec2 uv = fragCoord / iResolution.xy;\n    vec4 state = texture(iChannel0, uv);\n    \n    if(iTime <= 0.1)\n    {        \n\t   \tstate.x = max(state.x, texture(iChannel1, uv).x) * 0.01;\n        state = vec4(0.0);\n    }else{      \n        vec4 m = iMouse / iResolution.xxxx;\n        if(m.z > 0.0)\n        {\n            state.y += smoothstep(0.001,0.0, length(m.xy - p) / 10.0);\n        }\n    \tvec4 l = get(uv + vec2(-stepsize, 0.0) / iResolution.xy);\n    \tvec4 u = get(uv + vec2( 0.0, stepsize) / iResolution.xy);\n    \tvec4 r = get(uv + vec2( stepsize, 0.0) / iResolution.xy);\n    \tvec4 d = get(uv + vec2( 0.0,-stepsize) / iResolution.xy);\n    \n    \tfloat h = l.x + u.x + r.x + d.x; h *= 0.25;    \n    \n    \tstate.y += (h - state.x) * 0.1;\n    \tstate.x += state.y;\n    \tstate.y *= 0.99;\n    \tstate.x *= 0.999;\n        if(mask(uv))\n            state.x = 0.0;\n    }\n    fragColor = state;\n}","name":"Buffer A","description":"","type":"buffer"}]}