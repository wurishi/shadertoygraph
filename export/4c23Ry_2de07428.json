{"ver":"0.1","info":{"id":"4c23Ry","date":"1704412920","viewed":52,"name":"Musicvisual","username":"mrnuqname","description":"?","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["2d","music"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGzn","filepath":"/media/a/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","previewfilepath":"/media/ap/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","type":"music","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define ITER 20.0\n\nfloat sdShape(in vec2 p, in vec2 a, in vec2 b)\n{\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    float segment = length( pa - ba*h );\n    float s = smoothstep(0.0, 0.005, segment - 0.005);\n    float c = smoothstep(0.0, 0.005, length(p - b) - 0.03); // circle\n    return min(s,c);\n}\n\nvec3 palette(in float t)\n{\n    vec3 a = vec3(0.610, 0.498, 0.650);\n    vec3 b = vec3(0.388, 0.498, 0.350);\n    vec3 c = vec3(0.530, 0.498, 0.620);\n    vec3 d = vec3(3.438, 3.012, 4.025);\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // vec2 uv = (2.0*fragCoord-iResolution.xy)/iResolution.y;\n    vec2 uv = fragCoord/iResolution.xy; // 0..1\n    float asp = iResolution.x/iResolution.y; // aspect ratio of screen\n    uv.x *= asp;\n    \n    float d = 1.0;\n    float s = asp/ITER;\n    for(float i = 0.0; i < ITER; i++)\n    {\n        float amp = texture(iChannel0, vec2(i/ITER, 0.0)).x;\n        d = min(d, sdShape(uv, vec2(i*s + s/2.0,0.1), vec2(i*s + s/2.0, 0.1 + amp)));\n    }\n    vec3 col = palette(uv.x);\n    col = mix(col, vec3(0.0), d);\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}