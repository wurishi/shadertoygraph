{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#define TAU 6.283185307179586\n#define UNIT 1.3\n\nfloat scale(float l0, float r0, float l1, float r1, float x) {\n\treturn (x - l0) / (r0 - l0) * (r1 - l1) + l1;\n}\n\nvec2 shear(float theta, vec2 p) {\n\treturn vec2(p.x - p.y / tan(theta), p.y / sin(theta));\n}\n\nvec2 unshear(float theta, vec2 p) {\n\tfloat y = p.y * sin(theta);\n\tfloat x = p.x + y / tan(theta);\n\treturn vec2(x, y);\t\n}\n\nfloat rand(vec2 p){\n\treturn fract(sin(dot(p.xy, vec2(1.3295, 4.12))) * 493022.1);\n}\n\nfloat timestep(float duration, float t) {\n\treturn floor(t / duration) * duration;\n}\n\nvec2 polar(vec2 p) {\n\treturn vec2(atan(p.y, p.x), length(p));\n}\n\nvec2 cartesian(vec2 p) {\n\treturn vec2(p.y * cos(p.x), p.y * sin(p.x))\t;\n}\n\nvec3 eyes(float t, vec2 coord) {\n\tvec2 p0 = 2.0*(coord - 0.5 * iResolution.xy) / iResolution.xx;\n\t\n\tfloat unit = UNIT;\n\tfloat d_step0 = 1.1544 * unit;\n\tfloat d_step1 = 1.823 * unit;\n\tfloat d_step2 = 2.32 * unit;\n\tfloat d_step3 = 2.9757 * unit;\n\tfloat d_step4 = 1.21 * unit;\n\tfloat d_step5 = 0.93354 * unit;\n\t\n\tfloat t_step0 = timestep(d_step0, t);\n\tvec2 p0_rot = cartesian(polar(p0) + vec2(scale(0.0, 1.0, 0.0, TAU, rand(vec2(0.0, sqrt(t_step0)))), 0.0));\n\tvec2 p0_step = p0_rot + vec2(\n\t\tscale(0.0, 1.0, -1.0, 1.0, rand(vec2(t_step0, 0.0))),\n\t\tscale(0.0, 1.0, -1.0, 1.0, rand(vec2(0.0, t_step0)))\n\t);\n\tfloat theta = TAU/4.0 + scale(0.0, 1.0, -1.0, 1.0, rand(vec2(0.0, timestep(d_step1, t))));\n\n\tfloat k_p1 = scale(0.0, 1.0, 2.0, 5.0, rand(vec2(timestep(d_step2, t), 0.0)));\n\tvec2 p1 = k_p1 * (p0_step /*+ 0.125*/);\n\t\t\n\tvec2 p2 = shear(theta, p1);\n\t\n\tfloat d_move = 0.4;\n\tvec2 p_c = floor(p2) + 0.5 + scale(0.0, 1.0, -d_move, d_move, rand(vec2(timestep(d_step3, t), 0.0)));\n\tvec2 p3 = unshear(theta, p_c);\n\t\t\n\tfloat radius = scale(0.0, 1.0, 0.3, 0.6, rand(vec2(-42.0, timestep(0.21 * unit, t))));//0.25;\n\tfloat rings = floor(scale(0.0, 1.0, 1.0, 4.0, rand(vec2(0.0, timestep(d_step4, t)))));\n\tfloat dist = distance(p3, p1);\n\tfloat ring_i = floor(dist/radius * rings);\n\tfloat ring_i2 = floor(dist / radius * 2.0 * rings);\n\tfloat ring_pos = fract(dist / radius * rings);\n\tfloat ring_pos2 = fract(dist / radius * 2.0 * rings);\n\tfloat r_pupil = radius / scale(0.0, 1.0, 1.5, 2.0, rand(vec2(timestep(0.322*unit, t), 0.0)));\n\t\n\tbool in_pupil = dist < r_pupil;\n\tbool in_iris = dist < radius;\n\t\n\tfloat bright = 1.0 - 0.75 * ring_i/rings * radius;\n\tfloat k_light = scale(0.0, 1.0, 0.76, 1.25, rand(vec2(-42.0, timestep(0.267*unit, t))));\n\tfloat light = k_light * bright * scale(0.0, 1.0, 0.5, 1.0, ring_pos);\n\tvec3 color = vec3(light, light, light);\n\tif(in_pupil) {\n\t\tcolor = vec3(0.0, 0.0, 0.0);\n\t} else if(in_iris) {\n\t\tvec3 iris0 = vec3(\n\t\t\tscale(-1.0, 1.0, 0.2, 0.96, sin(timestep(0.2*unit, 0.6654*t))),\n\t\t\tscale(0.0, 1.0, 0.0, 0.6, rand(floor(p2) * vec2(timestep(0.33*unit, .5*t + 53.0*floor(p2.x+p2.y)), -3211.1))),\n\t\t\tscale(-1.0, 1.0, 0.1, 0.7, sin(timestep(0.115*unit, 0.533*t)))\n\t\t);\n\n\t\tvec3 iris1 = iris0 * 0.7;\n\t\t\n\t\tcolor = mix(iris0, iris1, ring_pos2);\n\t}\n\tcolor *= scale(0.0, 1.0, 0.3, 1.0, rand(floor(p2) + vec2(timestep(1.0*unit, t), 0.1222)));\n\t\n\treturn color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat t_0 = iTime;\n\tfloat t_1 = t_0 + UNIT*1.7;\n\tfloat mod_offset = 0.0;\n\tfloat mod0 = fract(iTime / UNIT);\n\tfloat mod_t = scale(-1.0, 1.0, 0.3, 0.7, sin(5.55 * iTime));\n\t\n\tvec3 color = eyes(t_0, fragCoord);\n\tif(rand(fragCoord.xy + vec2(0.0, timestep(0.125 * UNIT, iTime))) < mod_t) {\n\t\tcolor = eyes(t_1, fragCoord);\t\n\t}\n\t\n\tfragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MsBGWd","date":"1400512325","viewed":210,"name":"Ever Watchful","username":"ahihi","description":"\"paranoia on parasta viihdettÃ¤\"","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""}}