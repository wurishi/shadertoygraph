{"ver":"0.1","info":{"id":"wltyWj","date":"1609954303","viewed":132,"name":"wang 2-corner mask","username":"madware","description":"visualization for wang 2-corner tiles","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["wangtilesmasking"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGRn","filepath":"/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","previewfilepath":"/media/ap/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sfGRn","filepath":"/media/a/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","previewfilepath":"/media/ap/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const int UP_LEFT = 0x01;\nconst int UP_RIGHT = 0x02;\nconst int DOWN_RIGHT = 0x04;\nconst int DOWN_LEFT = 0x08;\n\nfloat wang_tile_2_corner(in vec2 uv, in int tile_id)\n{   \n    float ul = uv.x * uv.y;\n    float ur = (1.0 - uv.x) * uv.y;\n    float dl = uv.x * (1.0 - uv.y);\n    float dr = (1.0 - uv.x) * (1.0 - uv.y);\n    \n    return (1.0 - texture(iChannel2, uv).x * 0.25 * sin(iTime)) *\n        (float((tile_id & UP_LEFT) > 0) * ul +\n        float((tile_id & UP_RIGHT) > 0) * ur +\n        float((tile_id & DOWN_LEFT) > 0) * dl +\n        float((tile_id & DOWN_RIGHT) > 0) * dr);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy * 4.0;\n    uv.x = 4.0 - uv.x;\n    float edge = max(step(0.99, fract(uv.x)), step(0.99, fract(uv.y)));\n    \n    int x = int(trunc(uv.x));\n    int y = int(trunc(uv.y));\n    int tile_id = y * 4 + x;\n    float mask = smoothstep(\n        0.5, \n        0.51, \n        1.0 - wang_tile_2_corner(fract(uv), tile_id)\n    );\n    \n    vec3 col = mix(\n        texture(iChannel0, fragCoord/iResolution.xy).xyz,\n        texture(iChannel1, fragCoord/iResolution.xy * 4.0).xyz,\n        mask\n    );\n    fragColor = vec4(col + vec3(edge),1.0);\n}","name":"Image","description":"","type":"image"}]}