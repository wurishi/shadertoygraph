{"ver":"0.1","info":{"id":"ls3GD8","date":"1449251459","viewed":252,"name":"squarepathways","username":"vortex","description":"Tiled motion, the two colors represent opposite direction.","likes":24,"published":1,"flags":0,"usePreview":0,"tags":["tiles"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"const float th=0.08;\nfloat pass=0.0;\nfloat C(vec2 x, vec2 c, float r, float dir)\n{\n    float r2=dot(x-c,x-c);\n    bool k=(r2>(r-th)*(r-th)&&r2<(r+th)*(r+th));\n    if (k&&abs(fract((atan((x-c).y,(x-c).x)/(2.0*3.1415927)*16.0*r\n                      +iTime*dir))-0.5)<0.2) pass=1.0;\n    return k?-1.0:1.0;\n}\n\nfloat L(vec2 x, vec2 c, vec2 d,float dir)\n{\n    float a=dot(x-c,d);\n    bool k=(a>-th&&a<th);\n    if (k&&abs(fract(dot(vec2(-d.y,d.x),x-c)*2.0-iTime*dir)-0.5)<0.2)\n        pass=1.0;\n    return k?-1.0:1.0;\n}\n\nfloat R(vec2 x)\n{\n    return fract(0.985*x.x+0.751*x.x*x.x\n        +1.241*x.y-0.541*x.y*x.y+0.412137*x.x*x.y+0.7532)>0.5?1.0:-1.0;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 x = (fragCoord.xy-3.0*iMouse.xy)/30.0+iTime*vec2(0.4,0.03);\n    vec2 X = floor(x);\n    float c=R(X);\n    float r=c*R(X+vec2(1,0));\n    float u=c*R(X+vec2(0,1));\n    float l=c*R(X+vec2(-1,0));\n    float d=c*R(X+vec2(0,-1));\n    \n    vec2 uv=x-X-vec2(0.5);\n    float a=c;\n    if (max(abs(uv.x),abs(uv.y))>0.47) a=-0.2;\n    if (r*l>0.0&&u*d>0.0&&u*r>0.0&&r<0.0)\n    {\n    \ta*=C(uv,vec2(0.0),0.25,-c);\n    }\n    else\n    {\n        if (r>0.0)\n        {\n            if      (u>0.0) a*=C(uv,vec2(0.5,0.5),0.25,c);\n            else if (l>0.0) a*=L(uv,vec2(0.0,0.25),vec2(0,1),c);\n\t\t\telse if (d>0.0) a*=C(uv,vec2(0.5,-0.5),0.75,-c);\n            else            a*=uv.x>0.0?\n                (L(uv,vec2(0.0,0.25),vec2(0,1),c)*\n                 L(uv,vec2(0.0,-0.25),vec2(0,-1),c))\n                :C(uv,vec2(0.0,0.0),0.25,-c);\n\t\t}\n        if (u>0.0)\n        {\n            if      (l>0.0) a*=C(uv,vec2(-0.5,0.5),0.25,c);\n            else if (d>0.0) a*=L(uv,vec2(-0.25,0.0),vec2(-1,0),c);\n\t\t\telse if (r>0.0) a*=C(uv,vec2(0.5,0.5),0.75,-c);\n            else            a*=uv.y>0.0?\n                (L(uv,vec2(0.25,0.0),vec2(1,0),c)*\n                 L(uv,vec2(-0.25,0.0),vec2(-1,0),c))\n                :C(uv,vec2(0.0,0.0),0.25,-c);\n\t\t}\n        if (l>0.0)\n        {\n            if      (d>0.0) a*=C(uv,vec2(-0.5,-0.5),0.25,c);\n            else if (r>0.0) a*=L(uv,vec2(0.0,-0.25),vec2(0,-1),c);\n\t\t\telse if (u>0.0) a*=C(uv,vec2(-0.5,0.5),0.75,-c);\n            else            a*=uv.x<0.0?\n                (L(uv,vec2(0.0,0.25),vec2(0,1),c)*\n                 L(uv,vec2(0.0,-0.25),vec2(0,-1),c))\n                :C(uv,vec2(0.0,0.0),0.25,-c);\n\t\t}\n        if (d>0.0)\n        {\n            if      (r>0.0) a*=C(uv,vec2(0.5,-0.5),0.25,c);\n            else if (u>0.0) a*=L(uv,vec2(0.25,0.0),vec2(1,0),c);\n\t\t\telse if (l>0.0) a*=C(uv,vec2(-0.5,-0.5),0.75,-c);\n            else            a*=uv.y<0.0?\n                (L(uv,vec2(0.25,0.0),vec2(1,0),c)*\n                 L(uv,vec2(-0.25,0.0),vec2(-1,0),c))\n                :C(uv,vec2(0.0,0.0),0.25,-c);\n\t\t}\n    }\n    fragColor=vec4(mix(vec3(0.5,0.7,0.6)+a*vec3(0.5,0.2,0.4),\n                       mix(vec3(0.99,0.1,0.4),vec3(0.88,0.99,0.1),c*0.5+0.5),pass),1.0);\n}","name":"","description":"","type":"image"}]}