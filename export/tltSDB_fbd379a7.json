{"ver":"0.1","info":{"id":"tltSDB","date":"1581655672","viewed":236,"name":"Penrose Infinite Zoom","username":"rory618","description":"Zooming infinitely using periodicity of the \"Sun\" penrose tiling","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["2d","tiling"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define R iResolution\n#define pi 3.14159\n#define tao 6.28318\n#define phi 1.6180339\n#define rot20(x) cos((x)*tao/20. - vec2(0,pi/2.))\n\nfloat sdLine(vec2 uv, vec2 a, vec2 abn){\n    vec2 x = uv-a;\n    vec2 r = abn.yx*vec2(-1,1);\n    return dot(r, x - abn * dot(x, abn));\n}\n\nfloat penrose(vec2 uv){\n    int type = 0;\n    \n    float angle = atan(uv.y,uv.x);\n    angle = mod(angle + tao/10.,tao/5.) - tao/10.;\n    angle = abs(angle);\n    uv = length(uv) * cos(angle - vec2(0,pi/2.));\n    float r = 0.;\n    if(sdLine(uv, rot20(2.), rot20(6.)) > 0. ){\n    \n        for(int i = 0; i < 16; i++){\n            float d0 = sdLine(uv, vec2(1./phi,0), rot20(8.) );\n            float d1 = sdLine(uv, vec2(1./phi,0), rot20(3.) );\n            float d2 = sdLine(uv, rot20(2.), rot20(9.));\n            float d3 = sdLine(uv, rot20(2.), rot20(4.));\n\n            if(d0 > 0.){\n                type = 1;\n                uv.y = d0 * phi;\n                uv.x = d1 * phi;\n            } else {\n                type = 0;\n                uv.x = d2 * phi;\n                uv.y = abs(d3) * phi;\n            }\n            \n    \t\tr += float(type) / pow(1.2,float(i)) / 6.;\n        }\n    \n    }\n    return r;\n}\n\nvoid mainImage( out vec4 o, in vec2 i )\n{\n    float s = 2./R.y;\n    vec2 uv0 = (i*2.-R.xy)/R.y / pow(1.6180339, mod(iTime,4.))/2.2;\n    vec2 uv1 = (i*2.-R.xy)/R.y / pow(1.6180339, 4.+ mod(iTime,4.))/2.2;\n    o = vec4(.5+.5*sin(vec4(8,5,12,0)*((iTime/1.67e1 - .1*log(length((i*2.-R.xy)/R.y))) + 2.*mix(penrose(uv1),penrose(uv0),  mod(iTime,4.)/4. ))));\n}","name":"Image","description":"","type":"image"}]}