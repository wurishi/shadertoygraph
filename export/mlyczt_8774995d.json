{"ver":"0.1","info":{"id":"mlyczt","date":"1700544369","viewed":24,"name":"terrain test #78476453","username":"manthrax","description":"test","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["test"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRn","filepath":"/media/a/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","previewfilepath":"/media/ap/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsX3Rn","filepath":"/media/a/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","previewfilepath":"/media/ap/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":3,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec3 blendFac(float alpha,float start,float stop,float width){\n    float ss0=smoothstep(start,stop-width,alpha);\n    float ss1=smoothstep(stop,start+width,alpha);\n    return vec3(ss0,ss1,min(ss0,ss1));\n}\n\n\nfloat tblend(float alpha,float mask,float start,float stop,float width){\n    vec3 bf0=blendFac(alpha,start,stop,width);\n    return min(max(1.-mask,1.-bf0.x),bf0.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    float aspect = iResolution.x/iResolution.y;\n    uv.x=(uv.x-.5)*aspect+.5;\n    // Time varying pixel color\n    float riverDist = uv.x;\n    float mixRockDirt = smoothstep(.1,.2,uv.x);\n    float mixDirtGrass = smoothstep(.8,.9,uv.x);\n    vec4 vrocks=texture(iChannel0,uv);\n    vec4 vdirt=texture(iChannel1,uv);\n    vec4 vgrass=texture(iChannel2,uv).grba;\n    \n    \n    //float pebblemask=dot(texture(iChannel3,uv),vec4(.21,.72,0.7,0.));\n    float pebblemask=dot(vdirt,vec4(.21,.72,0.7,0.));\n    float hardPebbleMask = smoothstep(.05,.1,pebblemask);\n    \n    float rockmask=dot(vrocks,vec4(.21,.72,0.7,0.));\n    float hardrockMask = smoothstep(.05,.1,rockmask);\n    \n    float rockDirtBlend = mixRockDirt-min(1.-mixDirtGrass,rockmask);\n    vec4 col=mix(mix(vrocks,vdirt,rockDirtBlend),vgrass,min(hardPebbleMask,mixDirtGrass));\n    // Output to screen\n    fragColor = vec4(col.rgb,1.0);\n    //fragColor = vec4(vec3(smoothstep(.05,.1,pebblemask)),1.0);\n\n//    fragColor = vec4(vec3(pebblemask),1.0);\n\n //   fragColor = vec4(vec3(rockDirtBlend),1.0);\n \n    //vec3 bf0=blendFac(uv.x,.1,.3,.1);\n    //float pebbleStrength=min(bf0.z,1.-hardrockMask);\n    //fragColor = vec4(min(max(1.-hardrockMask,1.-bf0.x),bf0.y));\n    \n //   vdirt=vec4(1.,0.,0.,1.);\n //   vrocks=vec4(0.,1.,0.,1.);\n //   vgrass=vec4(0.,0.,1.,1.);\n    \n    \n    fragColor = vec4(mix(vgrass.rgb,vdirt.rgb,tblend(uv.x,1.-hardPebbleMask,.7,.9,.1)),1.);\n    fragColor = vec4(mix(fragColor.rgb,vrocks.rgb,tblend(uv.x,1.-hardrockMask,.1,.3,.1)),1.);\n    \n    \n  //  fragColor = vec4(tblend(uv.x,hardrockMask,.7,.9,.1));\n    \n    //fragColor = vec4(tblend(uv.x,1.-hardPebbleMask,.1,.3,.1));\n}","name":"Image","description":"","type":"image"}]}