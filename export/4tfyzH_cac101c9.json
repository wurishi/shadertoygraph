{"ver":"0.1","info":{"id":"4tfyzH","date":"1503471530","viewed":175,"name":"polar map 2","username":"zhaxiu3","description":" try polar map","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["basic","polar"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define PI 3.141592653\nvec2 polar(vec2 uv)\n{\n    float angle = atan(uv.y,uv.x);\n    float radius = length(uv);\n    \n    return vec2(radius, angle);\n}\n\nfloat polarCircle(vec2 uv, float r, float angle, float size)\n{\n    float dist = uv.x*uv.x+r*r-2.0*uv.x*r*cos(angle-uv.y);\n    //return 0.00002/dist;\n    return smoothstep(size/iResolution.x,0.0,dist);\n    \n}\n\n\nvec2 color2(vec2 uv)\n{\n    vec2 col= vec2(0.0);\n    float r = fract(iTime)*0.4+0.1;\n    \n    for(float i = 0.0; i <2.0*PI; i+=0.1*PI)\n    {\n    col +=vec2(polarCircle(uv,r,i,0.05));\n    }\n    col.y = smoothstep(0.0,1.0,1.0-fract(iTime)*1.2);\n    col.x *= col.y;\n    return col;\n}\n\nvec2 color3(vec2 uv, float angle, float dir, float start)\n{\n    vec2 col = vec2(0.0);\n    float r =0.04;\n    vec2 offset = vec2(0.5*dir*pow((fract(iTime)-0.2)*2.0,3.0),0.0);\n    \n    vec2 pos = vec2(uv.x*cos(uv.y),uv.x*sin(uv.y));\n    vec2 diff = pos+(offset);\n    vec2 polardiff = polar(diff);\n    \n    for(float i = start*2.0; i <6.0; i+=2.0)\n    {\n        col += vec2(polarCircle(polardiff,r*i,angle,0.8));\n    }\n    col.y = smoothstep(0.0,0.3,pow(1.0-fract(iTime),2.0));\n    col.x *= col.y;\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{   \n    float mx = max(iResolution.x, iResolution.y);\n\tvec2 uv = polar((2.0*fragCoord.xy - iResolution.xy)/mx);    \n    \n    fragColor.y=1.0;\n    \n    vec2 col= color2(uv);\n    col += color3(uv,0.25*PI,1.0,0.0);\n    col += color3(uv,-0.25*PI,1.0,1.0);\n    col += color3(uv,1.25*PI,-1.0,0.0);\n    col += color3(uv,PI-0.25*PI,-1.0,1.0);\n    col.x = smoothstep(0.0,1.0,col.x);\n\tfragColor = vec4(col.x);\n}","name":"Image","description":"","type":"image"}]}