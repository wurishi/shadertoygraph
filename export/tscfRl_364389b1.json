{"ver":"0.1","info":{"id":"tscfRl","date":"1605747757","viewed":122,"name":"disco balls maybe","username":"slackmage","description":"disco balls maybe","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["sphere"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float remap01(float a, float b, float t)\n{\n\treturn (t-a)/(b-a);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-0.5*iResolution.xy)/iResolution.y;\n\n\tvec3 col = vec3(0);\n    \n    \n    vec3 ro = vec3(sin(0.623 + iTime * 0.31) / 0.9, \n                   cos(0.723 + iTime * 0.21) / 0.9, \n                   sin(iTime) / 0.9);\n    //ro = vec3(0);\n    vec3 rd = normalize(vec3(uv.x + sin(0.346 + iTime * 1.0) *0.2, \n                             uv.y + cos(0.213 + iTime * 1.0) *0.2, \n                             1));\n    \n    float num_spheres = 20.0;\n    for(int idx =0; idx < int(100); idx++)\n    {\n        float i = float(idx);\n        float sphere_frac = i / num_spheres;\n        float freq = sphere_frac * iTime * 0.3;\n        vec3 s = vec3(sin(i + freq) * sphere_frac * 1.0 + 0.1, \n                      cos(i + freq), \n                      4);\n    \t\n    \n    \tfloat t = dot(s-ro, rd);\n    \tvec3 p = ro + rd * t;\n    \n    \tfloat y = length(s-p);\n        \n        float r = sphere_frac * 0.3 + 0.1;\n        //r = sin(y*10.0);\n        //r += y;\n    \n\t\t//\tif hit\n    \tif( y < r)\n    \t{\n        \tfloat x = sqrt(r*r - y*y);\n        \tfloat front_hit_t = t-x;\n        \tfloat back_hit_t = t+x;\n    \t\tvec3 hp = ro + rd * front_hit_t;\n        \n        \tvec3 ray_to_hit = normalize(hp - ro);\n        \tvec3 sphere_to_hit = normalize(s - hp);\n            float drs = dot(ray_to_hit, sphere_to_hit);\n        \tcol += drs;\n            \n            //\tadd grid texture based on angle of hit\n            col *= step(mod(s.x-hp.x,0.1),0.05);\n            col *= step(mod(s.y-hp.y,0.1),0.05);\n            col *= step(mod(s.z-hp.z,0.1),0.05);\n            col *= 5.0;\n            \n            \n    \t}\n    }\n\n        \n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}