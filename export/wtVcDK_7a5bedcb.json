{"ver":"0.1","info":{"id":"wtVcDK","date":"1611823567","viewed":160,"name":"Fractal 07_gaz","username":"gaz","description":"3d","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["fractal"],"hasliked":0,"parentid":"WtKcDV","parentname":"Fractal 02_gaz"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define rot(a) mat2(cos(a),sin(a),-sin(a),cos(a))\nfloat orbit;\n\nfloat map(vec3 p){\n\tp.yz*=rot(iTime*0.1+2.);\n    p.xz*=rot(iTime*0.2+2.);\n\tp=abs(p)-3.5;\n\tif(p.x<p.z)p.xz=p.zx;\n\tif(p.y<p.z)p.yz=p.zy;\n \tif(p.x<p.y)p.xy=p.yx;\n \tfloat s=3.;\n\tvec3  p0=p*1.2;\n\tfor(float i=0.;i<5.;i++){\n\t\tp=1.-abs(p-1.);\n  \t\tfloat k=-6.5*clamp(.5*max(1.8/dot(p,p),.8),0.,1.);\n    \ts*=abs(k);\n   \t\tp*=k;\n        p+=p0;\n    \tp.yz*=rot(-1.0);\n    }\n\torbit = log2(s);\n\tfloat a=3.;\n\tp.xy-=clamp(p.xy,-a,a);\n\treturn length(p.xy)/s;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv=(2.*fragCoord-iResolution.xy)/iResolution.y;\n\tvec3 ro=vec3(0,0,-20);\n    vec3 rd=normalize(vec3(uv,3));\n    float h=0.,d,i;\n\tfor(i=1.;i<100.;i++)\n    {\n        d=map(ro+rd*h);\n        if(d<.001)break;\n        h+=d;\n\t}\n    fragColor.xyz+=20.*(cos(vec3(9,5,12)+orbit*3.)*.5+.5)/i;\n}\n","name":"Image","description":"","type":"image"}]}