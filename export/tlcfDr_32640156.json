{"ver":"0.1","info":{"id":"tlcfDr","date":"1612556042","viewed":100,"name":"Playing around with Voronoi","username":"Atchafalaya","description":"First time playing around with voronoi in shadertoy","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 hash2(vec2 p)\n{\n    float t =  iTime;\n\treturn textureLod(iChannel0, (p + 0.5) / 256.0 + 0.01 * vec2(sin(t), cos(t)), 0.0).xy;\n}\n\nfloat voronoi(in vec2 x)\n{\n    ivec2 p = ivec2(floor(x));\n    vec2  f = fract(x);\n\n    float res = 10.;\n    vec2 mr;\n    ivec2 mb;\n    \n    for(int j = -1; j <= 1; j++)\n    for(int i = -1; i <= 1; i++)\n    {\n        ivec2 b = ivec2(i, j);\n        vec2  r = vec2(b) - f + hash2(vec2(p + b));\n        float d = dot(r, r);\n\n        if(d < res)\n        {\n            res = d;\n            mr = r;\n            mb = b;\n        }\n    }\n    res = 10.;\n    for(int j = -2; j <= 2; j++)\n    for(int i = -2; i <= 2; i++)\n    {\n        ivec2 b = mb + ivec2(i, j);\n        vec2  r = vec2(b) - f + hash2(vec2(p + b));\n        float d = dot(0.5*(mr+r), normalize(r-mr));\n        res = min(d, res);\n    }\n    \n\n    return res;\n}\n\nfloat getEdge(vec2 uv)\n{\n    uv *= 7.;\n    float dist = voronoi(uv);\n    return dist;\n}\n\nvec3 palette(float edge)\n{\n    vec3 col = vec3(sin(60. * edge));\n    col = mix(col, vec3(0.9, 0.5, 0.05), exp(-12. * edge));\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.y ;\n    \n    vec3 col = palette(getEdge(uv));\n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}