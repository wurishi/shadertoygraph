{"ver":"0.1","info":{"id":"ltXyWs","date":"1506947181","viewed":163,"name":"toon shader thingy","username":"dascandy","description":"Postprocessing filter that plays with clamping the Y value of the yuv colors","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["postprocessingfilter"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"uniform sampler2D tex;\n\nivec2 arr[] = ivec2[](\n    ivec2(-1, -1), \n    ivec2(-1, 0), \n    ivec2(-1, 1), \n    ivec2(-1, 2), \n    ivec2(0, -1), \n    ivec2(0, 0), \n    ivec2(0, 1), \n    ivec2(0, 2), \n    ivec2(1, -1), \n    ivec2(1, 0), \n    ivec2(1, 1), \n    ivec2(1, 2), \n    ivec2(2, -1), \n    ivec2(2, 0), \n    ivec2(2, 1), \n    ivec2(2, 2)\n);\n\nfloat score(float dist, vec4 color, vec4 otherColor) {\n    return dist*dist + dot(color-otherColor, color-otherColor);\n}\n\nvec2 chop(vec2 uv, ivec2 delta) {\n    return vec2(ivec2(uv * vec2(8, 8)) + delta) / 8.0f;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec4 color = texture(tex, uv),\n         bestColor = vec4(1, 0, 1, 0);\n    float bestScore = 9000.0;\n    for (int i = 0; i < 16; i++) {\n        vec2 nc = chop(uv, arr[i]);\n        float dist = dot(uv-nc, uv-nc);\n        vec4 ncol = texture(tex, nc);\n        float scr = score(dist, color, ncol);\n        bestColor = (scr < bestScore) ? ncol : bestColor;\n        bestScore = (scr < bestScore) ? scr : bestScore;\n    }\n    fragColor = bestColor;\n}","name":"Image","description":"","type":"image"}]}