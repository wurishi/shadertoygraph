{"ver":"0.1","info":{"id":"wd3BWN","date":"1605093514","viewed":151,"name":"chamber sdf AA","username":"bradjamesgrant","description":"sdf","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["sdf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define segments 6.\n#define PI 3.14195265359\n#define tau 6.2831853\n#define r .27\n#define percentC 1./4.5\n#define AA 3.\n\nvec3 palette(float d){\n    float q =d*40.;\n    q = fract(q+iTime);\n    \n    if(d<0.)\n        return vec3(.1+q*.1);\n    \n    return vec3(q+.4,.4,0.6+d);\n}\nvec3 chamberSDF(vec2 uv){\n\tvec3 col;\n    float angPerSegment = (tau)/segments;    \n    float ang = atan(uv.y,uv.x)+pow(fract(iTime*.3),10.);\n    float ang0PI = (ang+PI);\n    ang0PI*=(segments/(tau));\n    ang0PI = fract(ang0PI);\n    ang0PI*=((tau)/segments);\n    uv = vec2(cos(PI+ang0PI),sin(PI+ang0PI))*length(uv);\n    float ang0SegN = ang0PI/angPerSegment;\n    float angN = ang0PI/(tau);\n    float angSegSigned = (ang0SegN-.5);\n    float angSeguSigned = abs(angSegSigned);\n\n    float hs = (angPerSegment)/2.;\n    float cs = hs+sign(angSegSigned)*(percentC)*angPerSegment;\n    vec2 cPos = vec2(cos(-PI+hs),sin(-PI+hs))*r;\n    vec2 ccornerPos = vec2(cos((-PI)+cs),sin((-PI)+cs))*r;\n    float lr = length(cPos-ccornerPos);\n\n    float dC = length(uv)-r;\n    float dc = -(length(uv-cPos)-lr);\n\n    if(angSeguSigned>percentC) {\n\n        return palette(max(dc,dC));\n        \n    }\n\n    if(dC>0.){\n        dC = length(uv-ccornerPos);   \n        return palette(dC);\n        \n    }\n    return palette(max(dc,dC));\n\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n \n    vec3 col = vec3(0.);\n    for(float m = 0.;m<AA;m++){\n    \tfor(float n = 0.;n<AA;n++){\n    \t\tvec2 uv = (fragCoord+(vec2(m,n)/AA)-(iResolution.xy*.5))/iResolution.x;\n            col+=chamberSDF(uv);\n            \n    \t}\n    }\n    col/=AA*AA;\n\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}