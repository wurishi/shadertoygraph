{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"void mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    fragColor = vec4(texelFetch(iChannel0, ivec2(fragCoord), 0).xyz, 1.0);\n}","name":"Image","description":"","type":"image"},{"outputs":[{"channel":0,"id":"4dXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"vec3 cell(in ivec2 p) {\n    ivec2 r = ivec2(textureSize(iChannel0, 0));\n    p = (p+r) % r;\n    return texelFetch(iChannel0, p, 0 ).xyz;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    ivec2 px = ivec2(fragCoord);\n    vec3 col = vec3(0.);\n\n    if (iFrame == 0) {col = genmap(px);} else {\n        vec3 c = cell(px);\n        col = c;\n\n        bool f = iFrame % 2 == 0;\n\n        if (empty(c)) {\n            if (f && cell(px+ivec2(-1,0)).x == 1.) {col = R; return;}                \n            if (!f && cell(px+ivec2(0,-1)).z == 1.) {col = B; return;}\n        }\n        if (f && c.x == 1. && empty(cell(px+ivec2(1,0)))) { col = D; return; }\n        if (!f && c.z == 1. && empty(cell(px+ivec2(0,1)))) { col = D; return; }\n    }\n    \n\tfragColor = vec4(col, 1.0 );\n}","name":"Buffer A","description":"","type":"buffer"},{"outputs":[],"inputs":[],"code":"#define R vec3(1., 0., 0.)\n#define B vec3(0., 0., 1.)\n#define D vec3(0.)\n\n\nvec3 genmap(ivec2 ico){\n    vec2 co = vec2(float(ico.x), float(ico.y))/1000.;\n    float f = fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n    if (f > .2 && f < .215) return R;\n    if (f > .1 && f < .115) return B;\n    else return D;\n}\n\nbool empty(vec3 c) { return c.x == 0. && c.z == 0.; }\n","name":"Common","description":"","type":"common"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":true,"mFlagMusicStream":false},"info":{"id":"mly3zD","date":"1683672321","viewed":21,"name":"traffic simulator","username":"suwqymncwec","description":"buffer","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["2d","simulation","automata"],"hasliked":0,"parentid":"XstGRf","parentname":"GameOfLife"}}