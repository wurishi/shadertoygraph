{"ver":"0.1","info":{"id":"ssSfRt","date":"1646837930","viewed":144,"name":"raytracing coded by a noob","username":"Gravechest","description":"simpel","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["raytracing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"int obj;\n\nfloat intersect(vec3 ro,vec3 rd,float ra){\n    float b = dot(ro,rd);\n    float c = dot(ro,ro) - ra*ra;\n    float h = b*b - c;\n    if(h<0.0){\n        return 999999.0;\n    }\n    return -b-sqrt(h);\n}\n\nfloat pintersect(vec3 ro,vec3 rd,vec4 pl){\n    return -(dot(ro,pl.xyz)+pl.w)/dot(rd,pl.xyz);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 angle = vec2(1.0,3.0);\n    vec3 bpos  = vec3(1.0,1.5,-0.2);\n    vec3 pos   = bpos;\n    vec4 dir = vec4(cos(angle.x),sin(angle.x),sin(angle.y),cos(angle.y));\n    vec2 pixelOffset = fragCoord.xy/iResolution.xy*2.0-1.0;\n    pixelOffset.x *= 1.69;\n    vec3 vec;\n    vec.x = (dir.x * dir.w - dir.x * dir.z * pixelOffset.y) - dir.y * pixelOffset.x;\n    vec.y = (dir.y * dir.w - dir.y * dir.z * pixelOffset.y) + dir.x * pixelOffset.x;\n    vec.z = dir.z + dir.w * pixelOffset.y;\n    vec3 ang = normalize(vec);\n    float td = intersect(pos,ang,1.0);\n    float td2 = intersect(pos-vec3(1.0,0.0,0.0),ang,1.0);\n    if(td < td2){\n        obj = 1;\n    }\n    else{\n        obj = 2;\n    }\n    switch(obj){\n    case 1:\n        break;\n    }\n    if(td != 999999.0){\n        pos += td * ang;\n        float sh = intersect(pos,vec3(0.0,0.0,1.0),1.0);\n        if(sh == -1.0){\n            sh = 1.0;\n        }\n        else{\n            sh = sh*0.5+1.0;\n        }\n        ang = reflect(ang,normalize(pos));\n        float pd = pintersect(pos,ang,vec4(0.0,0.0,1.0,-1.0));\n        if(pd < 0.0){\n            fragColor.rgb = vec3(-ang.y*0.5,ang.z*0.5+0.5,ang.z*0.5+1.0);\n            pos += vec3(99999999.0);\n        }\n        else{\n            fragColor.rgb = vec3(-ang.y*0.5,ang.z*0.5+0.5,ang.z*0.5+1.0);\n            pos += pd * ang;\n        }\n        if(fract(floor(pos.x)/2.0+floor(pos.y)/2.0) < 0.5){\n            fragColor.rgb = mix(vec3(0.3,0.3,0.3)*sh,fragColor.rgb,clamp(pow(distance(pos,bpos),0.4)/5.0,0.0,1.0));\n        }\n        else{\n            fragColor.rgb = mix(vec3(0.6,0.6,0.6)*sh,fragColor.rgb,clamp(pow(distance(pos,bpos),0.4)/5.0,0.0,1.0));\n        }\n        return;\n    }\n    float pd = pintersect(pos,ang,vec4(0.0,0.0,1.0,-1.0));\n    if(pd < 0.0){\n        fragColor.rgb = vec3(-ang.y*0.5,ang.z*0.5+0.5,ang.z*0.5+1.0);\n        pos += vec3(99999999.0);\n    }\n    else{\n        fragColor.rgb = vec3(-ang.y*0.5,ang.z*0.5+0.5,ang.z*0.5+1.0);\n        pos += pd * ang;\n    }\n    float sh = intersect(pos,vec3(0.0,0.0,1.0),1.0);\n    if(sh == 999999.0){\n        sh = 1.0;\n    }\n    else{\n        sh = sh+2.0;\n    }\n    if(fract(floor(pos.x)/2.0+floor(pos.y)/2.0) < 0.5){\n        fragColor.rgb = mix(vec3(0.3,0.3,0.3)*sh,fragColor.rgb,clamp(pow(distance(pos,bpos),0.4)/5.0,0.0,1.0));\n    }\n    else{\n        fragColor.rgb = mix(vec3(0.6,0.6,0.6)*sh,fragColor.rgb,clamp(pow(distance(pos,bpos),0.4)/5.0,0.0,1.0));\n    }\n    \n}","name":"Image","description":"","type":"image"}]}