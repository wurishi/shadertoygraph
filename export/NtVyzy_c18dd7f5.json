{"ver":"0.1","info":{"id":"NtVyzy","date":"1661746490","viewed":340,"name":"Transit [271 Chars]","username":"Xor","description":"I wanted to make a train shader.\nThis is what I came up with.","likes":27,"published":1,"flags":0,"usePreview":0,"tags":["golf","trains"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n    \"Transit\" by @XorDev\n\n    I wanted to make a train shader.\n    This is what I came up with.\n    \n    <300 chars playlist: https://www.shadertoy.com/playlist/fXlGDN\n\n*/\nvoid mainImage(out vec4 O, vec2 I)\n{\n    //Resolution for scaling\n    vec3 r = iResolution,\n    //Ray direction for raymarching\n    d = (vec3(roundEven(I),r*.3)-r*.5)/r.x,\n    //Ray origin position\n    p = d+8.,\n    //Animation time\n    t = iTime/r/r/.1,\n    //Pseudo random vector\n    v;\n    \n    \n    //Raymarcher loop\n    for(;\n    //Loop 400 times\n    r.z++<4e2;\n    //Basic box SDF with repetition and domain warping\n    p += d*(length(max(abs(mod(p+t*v+cos(p.zxy*.1), 8.) - 4.) - vec3(++v.xy,3), 0.)-.4)-.6))\n        //Randomize with xy cells\n        v = cos(ceil(p/8.)*8. * mat3(3,5,0, 6,9,0, 8,9,0));\n    //Generate colors from deriviative\n    O.gbr = fwidth(p);\n}","name":"Image","description":"","type":"image"}]}