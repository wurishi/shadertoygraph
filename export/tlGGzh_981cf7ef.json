{"ver":"0.1","info":{"id":"tlGGzh","date":"1578254712","viewed":61,"name":"Smile!","username":"pbc278","description":"My first Shader, following the tutorial by Martijn Steinrucken aka BigWings\n[url=https://www.youtube.com/watch?v=ZlNnrpM0TRg]https://www.youtube.com/watch?v=ZlNnrpM0TRg[/url]\n\nWow, pretty difficult Shader Programming! \n\n","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["smiley","emoji"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// \"Smile!\" by Boudewijn Corbach aka pbc278 - 2020\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n// Email:pbc278@gmail.com\n\n// My first Shader following the tutorial \"Creating the Smiley - Part 1\" by Martijn Steinrucken aka BigWings\n// https://www.youtube.com/watch?v=ZlNnrpM0TRg\n\n\n#define S(a, b, t) smoothstep(a, b, t)\n#define B(a, b, blur, t) S(a-blur, a+blur, t)*S(b+blur, b-blur, t)\n#define sat(x) clamp(x, 0., 1.)\n\nfloat remap01 (float a, float b, float t){\n    return sat((t-a) / (b-a));\n}\nfloat remap(float a, float b, float c, float d, float t){\n   return sat((t-a) / (b-a)) * (d-c) + c;\n\n}\n\nvec2 within(vec2 uv, vec4 rect){\n    return (uv-rect.xy)/(rect.zw-rect.xy);\n}\n\nvec4 Eye(vec2 uv){\n    uv -= .5;\n    vec4 col = vec4(0.4471, 0.1922, 0.0353, 0.0);\n    float d1 = length(uv);\n    float s1 = S(.12, .09, d1);\n    float d2 = length(uv-vec2(.0, -.12)*.6);\n    float s2 = S(.11, .09, d2);\n\n    float d3 = length(uv-vec2(.00, -.12)*.6);\n    float s3 = S(.12, .09, d3);\n    float eyeMask = sat(s1-s2);\n    vec4 eyeCol = vec4(1.);\n    eyeCol.rgb = vec3(0.4471, 0.1922, 0.0353);\n    eyeCol.rgb *=1.-S(.067, .107, d1) ;\n    col.rgb= mix(col.rgb, eyeCol.rgb, S(.8, .9, eyeMask));\n    col.a= mix(col.a, eyeCol.a, S(.8, .9, eyeMask));\n    col.rgb= mix(col.rgb, vec3(.0,.0,.0), S(0.02, 0.4, s3));\n    \n    return col;\n}\n\nvec4 Mouth(vec2 uv){\n    uv -= .5;\n    vec4 col = vec4(.0);\n    \n    float d1 = length(uv);\n    float s1 = S(.12, .16, d1);\n    float d2 = length(uv-vec2(0.0, -.04)*1.8);\n    float s2 = S(.11, .15, d2);\n    float d3 = length(uv-vec2(0.0,-.065))*0.49; //tooth shade\n    float s3 = S(.071, .064, d3);\n\n    float mouthMask = 1.+(s1-s2);\n    vec4 mouthCol = vec4(0.9);\n    mouthCol.rgb = vec3(.5, .18, .05);\n    col.rgb = mix(col.rgb, mouthCol.rgb, S(.6, .15, mouthMask));\n\n    col.a = mix(col.a, mouthCol.a, S(0.11, .01, mouthMask));\n\n    float tongueDistance = length(uv-vec2(0.0, .16));\n    col.rgb = mix(col.rgb, vec3(0.8863, 0.1451, 0.0941), S(.13, .07, tongueDistance));\n\n    float teethDistance = length(uv+vec2(0.0, -.013));\n    vec3 toothCol = vec3(1.);\n    col.rgb = mix(col.rgb, toothCol, S(.084, .08, teethDistance));\n    col.rgb = mix(col.rgb, vec3(.0,.0,.0), s3);\n\n    return col;\n}\n\nvec4 Head(vec2 uv){\n    \n    vec4 col = vec4(.9, .65, .1 , 1. );\n    float d = length(uv);\n\n    col.a = S(.3,.29, d);\n    float edgeShade = remap01(.2, .3 ,d);\n    edgeShade *= edgeShade;\n    col.rgb *= 1.-edgeShade*.6;\n\n    col.rgb = mix(col.rgb, vec3(.6, .3, .1), S(.285, .29, d));\n\n    float highlight = S(.25, .245, d);\n    highlight *= remap(.25, -.1, .75, 0., uv.y);\n    col.rgb = mix(col.rgb, vec3(1.), highlight);\n\n    d = length(uv-vec2(.15, .01));\n    float cheek = S(.1,.01,d)*.5;\n    cheek *= S(.095, .07, d);\n    col.rgb = mix(col.rgb, vec3(1.0, .1, .1), cheek);\n    return col;\n}\n\nvec4 Smiley(vec2 uv){\n    vec4 col = vec4(.0, .0, .0 , 1. );\n    vec4 mouth = Mouth(within(uv, vec4(-.6, .6, .6, -.6)));    \n    uv.x = abs(uv.x);\n    vec4 head = Head(uv);\n    vec4 eye = Eye(within(uv, vec4(-.2, -.22, .37, .35)));\n\n    col = mix(col, head, head.a);\n    col = mix(col, eye, eye.a);\n    col = mix(col, mouth, mouth.a);\n\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    uv -= .5;\n    uv.x *= iResolution.x / iResolution.y ;\n\n    fragColor = Smiley(uv/1.5);\n}","name":"Image","description":"","type":"image"}]}