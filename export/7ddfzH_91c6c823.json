{"ver":"0.1","info":{"id":"7ddfzH","date":"1656088165","viewed":124,"name":"Pac-man","username":"Markitok","description":"Is pac-man","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["pacman"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const vec2 pixel_size = vec2(1.0/10.0);\n\nfloat distance_sqr(vec2 p1, vec2 p2) {\n    vec2 d = p1 - p2;\n    return d.x * d.x + d.y * d.y;\n}\n\nfloat pacman(vec2 position) {\n    const float pacman_radius = 20.0;\n    const float eye_radius = pacman_radius * 0.2;\n    vec2 pacman_pos = iResolution.xy * 0.5 + vec2(-200.0, 0.0);\n    vec2 eye_pos = vec2(pacman_pos.x + pacman_radius * -2.0, \n                        pacman_pos.y + pacman_radius * 4.0);\n    float mouth_opening = mix(0.77, 1.0, sin(iTime * 10.0) * 0.5 + 0.5);\n    \n    vec2 uv = floor(position * pixel_size);\n    vec2 dir_from_center = pacman_pos * pixel_size - uv;\n    float distance_from_center = length(dir_from_center);\n    dir_from_center /= distance_from_center;\n    \n    float pacman = 1.0 - step(pacman_radius, distance_from_center);\n    float eye = 1.0 - step(eye_radius * eye_radius, distance_sqr(uv, eye_pos * pixel_size));\n    float mouth = step(mouth_opening, dot(vec2(-1.0, 0.0), dir_from_center));\n    pacman = max(pacman - eye - mouth, 0.0);\n    \n    return pacman;\n}\n\nfloat cocos(vec2 position) {\n    const float coco_size = 3.0;\n    \n    float cocos_delta_pos = mod(iTime * 400.0, 250.0);\n    \n    float coco1 = 450.0 - cocos_delta_pos;\n    float coco2 = 700.0 - cocos_delta_pos;\n    float coco3 = 950.0 - cocos_delta_pos;\n    \n    vec2 uv = floor(position.xy * pixel_size);\n    \n    float dist_coco1 = distance_sqr(uv, vec2(coco1, 225.0) * pixel_size);\n    float dist_coco2 = distance_sqr(uv, vec2(coco2, 225.0) * pixel_size);\n    float dist_coco3 = distance_sqr(uv, vec2(coco3, 225.0) * pixel_size);\n    \n    float coco = 1.0 - step(coco_size * coco_size, min(min(dist_coco1, dist_coco2), dist_coco3));\n    \n    return coco;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec3 pacman_color = vec3(1.0, 1.0, 0.0);\n    vec3 coco_color = vec3(1.0);\n    float is_pacman = pacman(fragCoord.xy);\n    float is_coco = (1.0 - is_pacman) * cocos(fragCoord.xy);\n    \n    vec3 final_color = is_pacman * pacman_color + is_coco * coco_color;\n\n    fragColor = vec4(final_color,1.0);\n}","name":"Image","description":"","type":"image"}]}