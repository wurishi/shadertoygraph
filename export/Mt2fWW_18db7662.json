{"ver":"0.1","info":{"id":"Mt2fWW","date":"1515879008","viewed":225,"name":"Kagami Mochi Visualizer","username":"novogrammer","description":"Kagami Mochi Visualizer","likes":4,"published":1,"flags":64,"usePreview":0,"tags":["visualizer","kagamimochi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"MsSSRw","filepath":"https://soundcloud.com/lucua_life/never-end-keizomahine-feat-mademoiselle-yulia","previewfilepath":"https://soundcloud.com/lucua_life/never-end-keizomahine-feat-mademoiselle-yulia","type":"musicstream","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat freq(sampler2D channel, float f){\n    return texture(channel,vec2(f,0.25)).x;\n}\n\nfloat circle(vec2 uv,vec2 position,float radius){\n    return distance(uv,position)-radius;\n}\nfloat box(vec2 uv,vec2 position,vec2 size){\n    vec2 diff=uv-position;\n    vec2 absDiff=abs(diff);\n    vec2 distanceSurface=absDiff-size*0.5;\n    return max(distanceSurface.x,distanceSurface.y);\n}\nfloat mochi(vec2 uv,vec2 position,vec2 size){\n    float boxDistance=box(uv,position,size);\n    float circleADistance=circle(uv,position-vec2(size.x*0.5,0),size.y*0.5);\n    float circleBDistance=circle(uv,position+vec2(size.x*0.5,0),size.y*0.5);\n    return min(boxDistance,min(circleADistance,circleBDistance));\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 normalizedUv=(uv*2.0-vec2(1.0))*vec2(iResolution.x/iResolution.y,1.0);\n    float bass=freq(iChannel3,0.01);//100khz as bass\n    float melody=freq(iChannel3,0.05);//500khz as melody\n    float snare=freq(iChannel3,0.2);//2khz as snare\n    if(\n        circle(normalizedUv,vec2(0.0,0.5-0.1),snare)<0.0\n    ){\n        fragColor=vec4(1.0,0.5,0.0,1.0);\n    }else if(\n        mochi(normalizedUv,vec2(0.0,0.0-0.1),vec2(melody))<0.0 ||\n        mochi(normalizedUv,vec2(0.0,-0.5-0.1),vec2(bass))<0.0\n        \n      ){\n        fragColor=vec4(1.0);\n    }else{\n        if(texture(iChannel3,vec2(uv.x,0.25)).x-uv.y>0.0){\n            fragColor=vec4(1.0,0.0,0.0,1.0);\n        }else{\n        \tfragColor = vec4(uv,0.5+0.5*sin(iTime),1.0);\n        }\n        //fragColor = texture(iChannel3,uv);\n        //fragColor = vec4(uv,0.5+0.5*sin(iTime),1.0);\n    }\n}","name":"Image","description":"","type":"image"}]}