{"ver":"0.1","info":{"id":"7ll3RN","date":"1621695448","viewed":57,"name":"Mono-Eye","username":"kithy","description":"mapping2D  eye texture to 3D sphere.\neye based on this shaderâ†“\nhttps://www.shadertoy.com/view/XsjXz1","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","fbm","polarcoordinate"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define ITR 32\n#define EPS 0.001\n#define SCALE 5.0\n#define PI 3.141592\n#define TWO_PI 6.2831\n#define GREEN vec3(0.2,0.9,0.7)\n\nmat2 rot(float a){\n\tfloat s=sin(a);\n\tfloat c=cos(a);\n\treturn mat2(c,-s,s,c);\n}\n\nvec3 hash3(vec2 p){\n\tvec3 q=vec3(dot(p,vec2(127.1,311.7)),\n\t\t\t\tdot(p,vec2(269.5,183.3)),\n\t\t\t\tdot(p,vec2(419.2,371.9)));\n\treturn fract(sin(q)*43758.5453);\n}\n\nfloat iqnoise(in vec2 x,float u,float v){\n\tvec2 p=floor(x);\n\tvec2 f=fract(x);\n\n\tfloat k=1.0+63.0*pow(1.0-v,4.0);\n\n\tfloat va=0.0;\n\tfloat wt=0.0;\n\n\tfor(int j=-2;j<=2;j++)\n\t\tfor(int i=-2;i<=2;i++)\n\t\t{\n\t\t\tvec2 g=vec2(float(i),float(j));\n\t\t\tvec3 o=hash3(p+g)*vec3(u,u,1.0);\n\t\t\tvec2 r=g-f+o.xy;\n\t\t\tfloat d=dot(r,r);\n\t\t\tfloat ww=pow(1.0-smoothstep(0.0,1.414,sqrt(d)),k);\n\t\t\tva+=o.z*ww;\n\t\t\twt+=ww;\n\t\t}\n\t\treturn va/wt;\n}\n\nfloat noise(vec2 x){\n\treturn iqnoise(x,0.0,1.0);\n}\n\nmat2 m=mat2(0.8,0.6,-0.6,0.8);\n\nfloat fbm(vec2 p){\n\tfloat f=0.0;\n\tf+=0.5000*noise(p);\n\tp*=m*2.02;\n\tf+=0.2500*noise(p);\n\tp*=m*2.03;\n\tf+=0.1250*noise(p);\n\tp*=m*2.01;\n\tf+=0.0625;\n\tp*=m*2.04;\n\tf/=0.9375;\n\treturn f;\n}\n\n\n\nfloat sdSphere(vec3 p){\n\treturn length(p)-1.2;\n}\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord){\n\tvec2 uv=(2.0*fragCoord.xy-iResolution.xy)/iResolution.y;\n\n\tvec3 ro=vec3(0.0,0.0,-10.0);\n\tvec3 lookat=vec3(0.0,0.0,0.0);\n\tfloat zoom=5.0;\n\n\tvec3 f=normalize(lookat-ro);\n\tvec3 r=normalize(cross(vec3(0.0,1.0,0.0),f));\n\tvec3 u=cross(f,r);\n\tvec3 c=ro+f*zoom;\n\tvec3 i=c+uv.x*r+uv.y*u;\n\tvec3 rd=normalize(i-ro);\n\n\tfloat dS,dO;\n\tvec3 p;\n\n\t//raymarching\n\tfor(int i=0;i<ITR;i++){\n\t\tp=ro+rd*dO;\n\t\tdS=sdSphere(p);\n\t\tif(dS<EPS)break;\n\t\tdO+=dS;\n\t}\n\n\n    //animate\n\tp.xy*=rot(cos(iTime*5.0));\n\tp.xz*=rot(sin(iTime*3.0)*0.5);\n\tp.yz*=rot(sin(iTime*2.0)*0.3);\n\n\tvec3 col=vec3(0.5);\n\n\tfloat x=atan(p.x+TWO_PI,p.y);\n\tfloat y=length(p.xy);\n\n\n\t//polar coordinate\n\tif(dS<EPS){\n\t\t\n\t\t//2D texture\n\t\tcol=vec3(0.8,0.1,0.1);\n\t\tfloat f=fbm(5.0*p.xy);\n\t\tcol=mix(col,vec3(1.0,0.0,0.0),f);//red\n\n\t\tf=1.0-smoothstep(0.2,0.4,y);\n\t\tcol=mix(col,vec3(0.70,0.44,0.12),f);//yellow\n\n\t\tx+=0.05*fbm(20.0*p.xy);\n\n\t\tf=smoothstep(0.2,1.0,fbm(vec2(5.0*y,20.0*x)));//yellow highlight\n\t\tcol=mix(col,vec3(1.0),f);\n\n\t\tf=smoothstep(0.9,0.9,fbm(vec2(5.0*y,10.0*x)));//dark highlight\n\t\tcol*=1.0-f;\n\n\t\tf=smoothstep(0.55,0.7,y);//dark at edges\n\t\tcol*=1.0-f*0.5;\n\n\t\tf=1.0-smoothstep(0.0,0.5,length(p.xy-vec2(0.1,0.1)));//light\n        col+=vec3(1.0,0.9,0.8)*f*0.75;       \n\n\t\tf=smoothstep(0.75,0.8,y);\n\t\tcol=mix(col,vec3(1.0),f);\n\n\t}\n\t\n\tfragColor=vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}