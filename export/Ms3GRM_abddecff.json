{"ver":"0.1","info":{"id":"Ms3GRM","date":"1505992077","viewed":149,"name":"gradient_cone","username":"lorcan","description":"Conical gradient","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"vec2 cross2(vec2 a, vec2 b)\n{\n    return vec2(a.x * b.y, - a.y * b.x);\n}\n\nconst float pi = 3.14159265359;\nconst float pi2_inv = 0.15915494309;\nconst float pi_inv = 0.31830988618;\n\nfloat get_angle(vec2 a, vec2 b)\n{\n    float n = 1.0 / (length(a) * length(b));\n    \n    float s = length(cross2(a,b)) * n;\n    float c = dot(a,b) * n;\n    \n    return atan(s, c) * pi_inv;\n}\n\nfloat sd_disk(vec2 a, float r)\n{\n    return length(a) - r;\n}\n\nfloat period(float x, float turns)\n{\n    float p = 1.0 / turns;\n    \n   \treturn 0.5 * abs((mod(x, p) - 0.5 * p) * 4.0 * turns);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float turns = 1.0;\n    \n    float tau = 1.1;\n    float t = mod(iTime, tau) / tau;\n    //t = 0.0;\n    vec2 v_base = 5.0 * vec2(sin(2.0 * pi * t), cos(2.0 * pi * t));\n    //v_base = vec2(10.0, 10.0);\n    \n    vec2 p = fragCoord.xy;\n    vec2 c = iResolution.xy * 0.5;\n    vec2 v = p -c;\n\tvec2 uv = p / iResolution.xy;\n    \n    float a = get_angle(v, v_base);\n    //a = period(a, turns);\n    float r1 = 150.0;\n    float e = 30.0;\n    float r0 = r1 - e;\n    \n    float d0 = sd_disk(v, r0);\n    float d1 = sd_disk(v, r1);\n    float d01 = max(-d0, d1);\n    float d = smoothstep(0.0, 2.0, d01);\n    \n    vec4 ca = vec4(1, 0, 0, 1);\n    vec4 cb = vec4(0, 1, 0, 1);\n    vec4 cd = vec4(0, 0, 0, 1);\n    \n#if 0\n    ca = vec4(1);\n    cb = vec4(vec3(0), 1);\n#endif \n    \n    fragColor = mix(mix(ca, cb, a), cd, d);    \n}\n\n","name":"Image","description":"","type":"image"}]}