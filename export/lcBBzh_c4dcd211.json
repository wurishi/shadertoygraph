{"ver":"0.1","info":{"id":"lcBBzh","date":"1724692640","viewed":23,"name":"Lambert w","username":"Refurio","description":"Complex phase portrait of truncated power series for Lambert's w function. The function is defined inside a disk centered at the origin with radius 1, and diverges to +oo on the outside.","likes":4,"published":3,"flags":0,"usePreview":0,"tags":["maths"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 center = vec2(0.,0.);\nfloat radius = 1.5;\nfloat angle = radians(0.);\n\nconst float pi = radians(180.);\n\nfloat abs2(vec2 z) {\n  return dot(z,z);\n}\nfloat arg(vec2 z) {\n  return atan(z.y, z.x);\n}\nvec2 cmul(vec2 a, vec2 b) {\n  return vec2(a.x*b.x-a.y*b.y, a.x*b.y+a.y*b.x);\n}\nvec2 cdiv(vec2 a, vec2 b) {\n  return vec2(dot(a,b),a.y*b.x-a.x*b.y)/abs2(b);\n}\n\n// https://github.com/hughsk/glsl-hsv2rgb/blob/master/index.glsl\nvec3 hsv2rgb(in vec3 c) {\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec2 f(vec2 z0) {\n  int n = int(40.*(1.-sin(iTime))/2.);\n  vec2 z = z0;\n  vec2 q = z0;\n  for(int i=0; i<n; ++i) {\n    q = cmul(q, z0);\n    z = z + cdiv(q, vec2(1,0) - q);\n  }\n  return z;\n}\n\n// coloring:\nvec4 phase(vec2 z) {\n  return hsv2rgb(vec3(arg(z)/pi, 1., 1.)).xyzz;\n}\nvec4 axies(vec2 z) {\n  float t = arg(z)/pi;\n  float a = mod(2.*t+2., 2.)-1.;\n  a = abs(2.*a)-1.;\n  a = asin(a)/pi+.5;\n  return vec4(a,a,a, 1.);\n}\n\nvec2 p2c(vec2 p) {\n  vec2 wh2 = iResolution.xy/2.;\n  float pr = min(wh2.x, wh2.y);\n  vec2 c = (p - wh2)/pr;\n  vec2 r = radius * vec2(cos(angle), sin(angle));\n  return cmul(r,c) + center;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n  vec2 z = p2c(fragCoord);\n  vec2 w = f(z);\n  fragColor = axies(w);\n}\n","name":"Image","description":"","type":"image"}]}