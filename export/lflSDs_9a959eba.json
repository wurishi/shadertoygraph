{"ver":"0.1","info":{"id":"lflSDs","date":"1705933099","viewed":80,"name":"十字星光","username":"lbl","description":"十字星光","likes":0,"published":1,"flags":0,"usePreview":0,"tags":[],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float random(vec2 par){\n   return fract(sin(dot(par.xy,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec2 random2(vec2 par){\n\tfloat rand = random(par);\n\treturn vec2(rand, random(par+rand));\n}\n\nfloat sdCircle(vec2 p,float r)\n{\n    float s=length(p)-r;\n    return s;\n}\n\n/* 十字星 */\nfloat star0(vec2 uv,float t) {\n    float r = 0.;\n    const float flare = 1.;\n    float x = sqrt( (pow(abs(uv).x,.6) + pow(abs(uv).y,.6))/2.);\n    x = clamp(x,0.,1.);\n    r=  pow(1. - x ,  4.) *flare*10. * (1.414-dot(uv,uv));\n    float s = sdCircle(uv,.0);\n    float l2 = (1. - smoothstep(0.5*t,0.5*t + 0.5,s)) / 6.;\n    r += l2;\n    return r * t;\n}\n\n/* 圆星 */\nfloat star1(vec2 uv,float t) {\n    float s = sdCircle(uv,0.);\n    float l = 1. - smoothstep(.15 + .15*t,.15 + .15 * t + 0.08,s);\n    float l2 = ( 1. - smoothstep(.3 * t,.3 * t + 0.8,s) );\n    l += l2;\n    l*=t;\n    l = clamp(l,0.,1.);\n    return l;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    float t = iTime ;\n \n    float light = 0.;\n \n \n    \n    vec2 center = vec2(0.5, 0.5);\n\n    vec2 UV = fragCoord/iResolution.xy - center;\n\n    vec2 uv = UV * 10.;\n    \n    vec2 id = floor(uv);\n    \n    vec2 seed =  id;    \n    vec2 guv = (fract(uv) - 0.5) * 2.;\n    float sparkle = clamp( (random2(seed).x - .7 )/.3, 0.,1.)  * (sin(t + random2(seed).x * 99.9 )*0.5 + 0.5);\n    vec2 pos = 0.5 * (random2(seed) - 0.5);\n    light = star0(2. * (guv + pos),sparkle);\n     \n    uv = (UV+vec2(.3,.7)) * 20.;\n    id = floor(uv);\n    seed =  id+ 89.;  \n    guv = (fract(uv) - 0.5) * 2.;\n    sparkle = clamp( (random2(seed).x - .7 )/.3, 0.,1.)  * (sin(t + random2(seed).x * 99.9 )*0.5 + 0.5);\n    pos = 0.5 * (random2(seed) - 0.5);\n    light += star1(2. * (guv + pos),sparkle);\n    \n    vec3 col = vec3(.99,.9,.7);\n    col *= light;\n     \n    fragColor = vec4( col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}