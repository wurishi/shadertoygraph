{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"#define time (iTime * 0.2 + 1.0)\n\n// ---- change here ----\nconst int max_iterations = 4;\n\n// pattern -1.0 : 1.0\nfloat map( vec2 p ) {\n\tfloat v = 1.0 - max( length( p ) - 1.0 / 6.0, 0.0 );\n\treturn pow( v, 16.0 );\n}\n\nfloat fractal( vec2 p ) {\n\tp *= 0.8;\n\tfloat v = 0.0;\n\tfloat att = 1.0;\n\tvec2 vel = vec2( cos( time ), sin( time ) ) * 0.5;\n\tfor ( int i = 1; i <= max_iterations; i++ ) {\n\t\tp -= vel;\n\t\tvel *= 1.5;\n\t\tp = fract( p * 1.5 + 1.5 ) * 2.0 - 1.0;\n\t\tatt *= sin( time * 4.0 ) * 0.5 + 0.3;\n\t\tv = max( map( p ) * ( 1.0 - att ), v );\n\t}\n\treturn v;\n}\n\nvec2 deform( float fov, vec2 p ) {\n\tvec2 angle = p * 0.5 * ( fov / 180.0 * 3.1415926 );\n\n\tvec2 c = cos( angle );\n\tvec2 s = sin( angle );\n\t\n\tvec3 v = normalize( vec3( c.y * s.x, s.y, -c.y * c.x ) );\n\t\n\treturn v.xy / -v.z;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 control = mix( iResolution.xy * 0.5, iMouse.xy, 1.0 - step( iMouse.z, 0.0 ) );\n\tvec2 uv = ( fragCoord.xy - control ) / min( iResolution.x, iResolution.y );\n\tuv = deform( 100.0, uv );\n\n\tfloat len = length( uv );\n\tfloat k_att = 1.0 / ( len * len + 1.0 );\n\tvec4 color = texture( iChannel0, vec2( iTime * 0.2, 9.5 ) / 256.0 );\n\tcolor *= color;\n\t//color = vec4( 0.8, 0.2, 0.5, 0.0 );\n\tfragColor = 1.0 - min( fractal( uv ) * k_att, 1.0 ) * ( 1.0 - color );\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lsjGzm","date":"1385543175","viewed":336,"name":"Menger Disc","username":"gltracy","description":"variations of Menger Sponge, drag mouse to look around.\nyou can change the number of iterations.","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["fractal","menger"],"hasliked":0,"parentid":"","parentname":""}}