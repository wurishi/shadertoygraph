{"ver":"0.1","info":{"id":"wstyzj","date":"1601315574","viewed":585,"name":"Gawr Gura","username":"Dijkstra","description":"a\n\nI should maybe animate the mouth.","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["2d","a","manga","gura","kawai"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"mat2 rot(float rad){\n\tfloat c = cos(rad);\n\tfloat s = sin(rad);\n\treturn mat2(c, -s, s, c);\n}\n\nvec3 face(vec2 uv, vec3 color){\n    uv+=.5;\n    if(uv.y<(smoothstep(-0.112,1.688,abs(uv.x-0.5)))*1.284+0.168){\n        color = mix(vec3(0.761,0.569,0.541),vec3(.843, .675, .647), clamp(0.,1.,-uv.y*12.728+1.328)); \n        if(uv.y<pow(abs(uv.x*7.608-3.800),11.088)*9.120+-0.080){\n            color = vec3(.518, .561, .671);\n        }\n    } \n    uv.x-=.5;\n    float start = 0.216;\n    float height = 0.968;\n    float offset = -0.512;\n    uv.x=abs(uv.x);\n    if(uv.x>start && uv.y*height<pow(abs(uv.x*3.360+offset),3.192)*1.836+0.256){\n        color = vec3(.518, .561, .671);\n    }\n    \n    return color;\n}\n\nvec3 mouth(vec2 uv, vec3 color){\n    if(abs(uv.x)<0.07 && distance(uv.y+0.19,pow(abs(uv.x*1.680),1.864))<0.003){\n        color -= vec3(.6);\n    }\n    return color;\n}\n\nvec3 eyebrows(vec2 uv, vec3 color){\n    vec3 browcolor = vec3(.722,.757,.792);\n    float brow = -pow(abs(uv.x*0.896+0.264),2.024)*1.+0.200;\n    if(distance(uv.y,brow)<mix(0.004,0.,uv.x*2.680+0.744) && abs(uv.x+0.208)<0.120){ //left\n        color = browcolor;\n    }\n    brow = -pow(abs(-uv.x*0.896+0.264),2.024)*1.+0.200;\n    if(distance(uv.y,brow)<mix(0.004,0.,-uv.x*2.680+0.744) && abs(-uv.x+0.208)<0.120){ //right\n        color = browcolor;\n    }\n    return color;\n}\n\nvec3 bangs(vec2 uv, vec3 color){\n    vec3 bangsColorBase = vec3(.953);\n    float hairLimit = -pow(abs(uv.x*0.736),2.)*1.+0.184;\n    \n    float pic0 = -pow(abs(uv.x*8.160-sin(uv.y*6.672+-2.544)+0.984),1.032)*1.+0.304;\n    float pic1 = -pow(abs(uv.x*8.160-sin(uv.y*4.552+-2.256)+1.360),0.712)*1.+0.248;\n    float pic2 = -pow(abs(uv.x*4.688-sin(uv.y*3.512+-2.200)-0.240),1.048)*1.+0.328;\n    float pic3 = -pow(abs(uv.x*8.160-sin(uv.y*4.360+-2.776)-0.090),1.032)*1.+0.254;\n    float pic4 = -pow(abs(uv.x*10.208-sin(uv.y*3.912+-5.776)+0.894),0.816)*1.+0.310;\n    float pic5 = -pow(abs(uv.x*10.208-sin(uv.y*3.912+-5.776)+0.414),0.816)*1.+0.358;\n    float pic6 = -pow(abs(uv.x*1.112-sin(uv.y*0.152+-2.136)-0.994),0.688)*1.+0.262;\n    float pic7 = -pow(abs(uv.x*6.472-sin(uv.y*3.752+-9.200)-1.858),0.816)*1.+0.358;\n    float pic8 = -pow(abs(uv.x*4.104-sin(uv.y*3.048+-11.008)+0.006),0.824)*1.+0.246;\n    float pic9 = -pow(abs(uv.x*8.080-sin(uv.y*3.504+-11.192)-1.298),0.824)*1.+0.302;\n    \n    float col0 = -pow(abs(uv.x*5.928-sin(uv.y*2.944+-2.632)-0.480),1.048)*1.+0.488;\n    float col1 = -pow(abs(uv.x*7.152-sin(uv.y*3.488+-2.240)+0.976),1.048)*1.+0.488;\n    float col2 = -pow(abs(uv.x*5.928-sin(uv.y*2.944+-5.152)+-0.664),1.048)*1.+0.416;\n    \n    float bangLimit = max(hairLimit,max(max(max(max(max(max(max(max(max(pic0,pic1),pic2),pic3),pic4),pic5),pic6),pic7),pic8),pic9));\n    float shadow = max(max(max(max(max(max(max(max(max(pic0,pic1),pic2),pic3),pic4),pic5),pic6),pic7),pic8),pic9);\n    if (uv.y > bangLimit){\n        color = mix(bangsColorBase,vec3(.855,.82,.824),1.-clamp(0.,1.,distance(bangLimit,uv.y*3.280+0.048)));\n        color = mix(color,vec3(0.116,0.344,1.000), 1.-clamp(0.,1.,distance(col0,uv.y*1.568+0.528)));\n        color = mix(color,vec3(0.133,0.697,1.000), 1.-clamp(0.,1.,distance(col1,uv.y*1.672+0.736)));\n        color = mix(color,vec3(0.383,0.795,1.000), 1.-clamp(0.,1.,distance(col2,uv.y*1.784+0.552)));\n    }\n    if (uv.y < shadow && uv.y>hairLimit && distance(shadow,uv.y)<0.384*uv.y+-0.040){\n        //color = vec3(1.,0.,0.);\n        color -= vec3(.2,.3,.3);\n    }\n    return color;\n}\n\nvec3 righteye(vec2 uv,vec3 color, float move, float close){\n    uv.x=-uv.x;\n    vec2 uvold = uv;\n    float thickness = 0.008;\n    float bottomLimit = pow(abs(uvold.x*0.752-0.016),1.912)-0.205;\n    float leftLimit = pow(abs(uvold.y*-1.152+0.224),1.744)+-0.432;\n    float topLimit = -pow(abs(uvold.x*0.936+0.144),1.920)+0.208;\n    float rightLimit = (-pow(abs(uvold.y*-6.744-0.272),2.112)+2.744)/10.;\n    float underEyeLimit=0.024;\n    bottomLimit+=close*0.144; // 0.144\n    topLimit+=-close*0.232; // 0.232\n    underEyeLimit+=close*0.144; // 0.144\n\n    if(uv.x<rightLimit && uv.x > leftLimit && uv.y < topLimit && uv.y > bottomLimit){\n        color = mix(vec3(1.), vec3(0.), uv.y+0.032);//white shade\n    }\n    uv.x+=move;\n    uv*=rot(-0.104); // rotation\n    uv.y *= 0.764; // oval\n    if(length(uv)<.2 && uvold.y > bottomLimit && uvold.y < topLimit && uvold.x<rightLimit && uvold.x > leftLimit){ // eyeball\n        color = mix(vec3(.584, .737, .834), vec3(.216, .271, .408), uv.y*6.616+0.368);\n        uv = uvold;\n        uv.x+=move;\n\t\tuv.y *= 0.764; // oval\n        if(length(uv+vec2(-0.020,0.030))<0.072){ // iris\n        \tcolor =  mix(vec3(.412, .784, .90), vec3(0.324,0.405,0.550), uv.y*9.128+0.584);\n        }\n\t\tuv.y *= 0.764;\n        if(length(uv+vec2(-0.029,0.027))<0.016){ // iris\n        \tcolor = vec3(.1);\n        }\n        uv = uvold;\n        uv.x+=move;\n        if(length(uv+vec2(0.140,-0.030))<0.008){ //glow 1\n            color = vec3(1.);\n        }\n        uv.x*=0.506;\n        if(length(uv+vec2(0.040,-0.040))<0.016){ //glow2\n            color = vec3(1.);\n        }\n    }\n    uv = uvold;\n    if(abs(uv.x+underEyeLimit)<0.190 && distance(uv.y,bottomLimit)<thickness*1.-length(uv.x*0.032)){ // under eye\n        color = vec3(.2);\n    }\n    if(abs(uv.x+0.096)<0.350 && distance(uv.y,topLimit)<smoothstep(-2.540,20.772,-uv.x) && uvold.x>leftLimit){ // top eye\n        color = vec3(.2);\n    }\n    if(uv.x< pow(abs(uvold.y*0.488-0.048),2.)-0.360 && uv.x>leftLimit && uv.y<topLimit){ // left eye\n        color = vec3(.2);\n    }\n    \n    return color;\n}\n\nvec3 lefteye(vec2 uv,vec3 color, float move, float close){\n    vec2 uvold = uv;\n    float thickness = 0.008;\n    float bottomLimit = pow(abs(uvold.x*0.752-0.016),1.912)-0.205;\n    float leftLimit = pow(abs(uvold.y*-1.152+0.224),1.744)+-0.432;\n    float topLimit = -pow(abs(uvold.x*0.936+0.144),1.920)+0.208;\n    float rightLimit = (-pow(abs(uvold.y*-6.744-0.272),2.112)+2.744)/10.;\n    float underEyeLimit=0.024;\n    bottomLimit+=close*0.144; // 0.144\n    topLimit+=-close*0.232; // 0.232\n    underEyeLimit+=close*0.144; // 0.144\n\n    if(uv.x<rightLimit && uv.x > leftLimit && uv.y < topLimit && uv.y > bottomLimit){\n        color = mix(vec3(1.), vec3(0.), uv.y+0.032);//white shade\n    }\n    uv.x+=move;\n    uv*=rot(-0.104); // rotation\n    uv.y *= 0.764; // oval\n    if(length(uv)<.2 && uvold.y > bottomLimit && uvold.y < topLimit && uvold.x<rightLimit && uvold.x > leftLimit){ // eyeball\n        color = mix(vec3(.584, .737, .834), vec3(.216, .271, .408), uv.y*6.616+0.368);\n        uv = uvold;\n        \n    \tuv.x+=move;\n\t\tuv.y *= 0.764; // oval\n        if(length(uv+vec2(-0.020,0.030))<0.072){ // iris\n        \tcolor =  mix(vec3(.412, .784, .90), vec3(0.324,0.405,0.550), uv.y*9.128+0.584);\n        }\n\t\tuv.y *= 0.764;\n        if(length(uv+vec2(-0.029,0.027))<0.016){ // iris\n        \tcolor = vec3(.1);\n        }\n        uv = uvold;\n        \n   \t\tuv.x+=move;\n        if(length(uv+vec2(-0.140,-0.030))<0.008){ //glow1\n            color = vec3(1.);\n        }\n        uv.x*=0.506;\n        if(length(uv+vec2(-0.040,-0.040))<0.016){ //glow2\n            color = vec3(1.);\n        }\n    }\n    uv = uvold;\n    if(abs(uv.x+underEyeLimit)<0.190 && distance(uv.y,bottomLimit)<thickness*1.-length(uv.x*0.032)){ // under eye\n        color = vec3(.2);\n    }\n    if(abs(uv.x+0.096)<0.350 && distance(uv.y,topLimit)<smoothstep(-2.540,20.772,-uv.x) && uvold.x>leftLimit){ // top eye\n        color = vec3(.2);\n    }\n    if(uv.x< pow(abs(uvold.y*0.488-0.048),2.)-0.360 && uv.x>leftLimit && uv.y<topLimit){ // left eye\n        color = vec3(.2);\n    }\n    \n    return color;\n}\n\nvec3 nose(vec2 uv, vec3 color){\n    uv.y-=-0.072;\n    uv.x*=1.744;\n    color-=1.-clamp(0.,1.,length(uv*5.360)+0.920);\n    if(length(uv)<0.004){\n        color -= vec3(.1);\n    }\n    return color;\n}\n\nvec3 sharkHat(vec2 uv, vec3 color){\n    vec2 olduv=uv;\n    uv.x*=0.440*(2.464+uv.y);\n    uv.y+=-0.104;\n    vec2 uv2 = olduv;\n    \n    uv2.y+=-0.088;\n    uv2.x*=0.456*(2.464+uv.y);\n    if(length(uv)>0.508 && length(uv2)<0.604){\n        color = mix(vec3(0.795,0.795,0.795),vec3(1.),clamp(0.,1.,length(olduv+vec2(0.,-0.170))*2.944+-0.600));\n        if(length(uv)<0.515){\n            color = vec3(0.655,0.655,0.655);\n        }\n        color = mix(vec3(0.855,0.855,0.855), color, clamp(0.,1.,uv.y*9.872+5.192));\n        vec2 uuvv = olduv; // boucle\n        uuvv.x*=0.728;\n        uuvv.y+=0.456;\n        if (length(uuvv)>0.044 && length(uuvv)<0.050 && uuvv.x >0.){\n            color = vec3(0.490,0.490,0.490);\n        }\n        if(length(olduv-vec2(0.,-.456))<0.02){\n            color = vec3(0.245,0.245,0.245);\n        }\n    }\n    if (length(uv)>0.604){ // color shark out\n        color = vec3(.204,.451,.62);\n    }\n   \n    float tooth0 = pow(abs(uv.x*5.736-sin(uv.y*4.424+3.184)+1.608),1.080)*0.344+0.176;\n    float tooth1 = pow(abs(uv.x*5.736-sin(uv.y*4.424+2.176)+1.712),1.080)*0.192+0.256;\n    float tooth2 = pow(abs(uv.x*5.736-sin(uv.y*4.424+2.176)+0.776),1.080)*0.184+0.336;\n    float tooth3 = pow(abs(uv.x*5.736-sin(uv.y*4.424+2.336)-0.112),1.080)*0.160+0.400;\n    float tooth4 = pow(abs(uv.x*5.736-sin(uv.y*-2.560+5.864)-0.992),1.080)*0.200+0.414;\n    float tooth5 = pow(abs(-uv.x*5.736-sin(uv.y*4.424+3.184)+1.608),1.080)*0.344+0.176;\n    float tooth6 = pow(abs(-uv.x*5.736-sin(uv.y*4.424+2.176)+1.712),1.080)*0.192+0.256;\n    float tooth7 = pow(abs(-uv.x*5.736-sin(uv.y*4.424+2.176)+0.776),1.080)*0.184+0.336;\n    float tooth8 = pow(abs(-uv.x*5.736-sin(uv.y*4.424+2.336)-0.112),1.080)*0.160+0.400;\n    float teeth = min(min(min(min(min(min(min(min(tooth0,tooth1),tooth2),tooth3),tooth4),tooth5),tooth7),tooth6),tooth8);\n \t\n    float t0 = -pow(abs(uv.x*5.736-sin(uv.y*4.408+0.304)+0.472),1.080)*0.360+-0.376;\n    float t1 = -pow(abs(uv.x*5.736-sin(uv.y*4.408+0.600)+0.032),1.080)*0.248+-0.408;\n    float t2 = -pow(abs(uv.x*5.736-sin(uv.y*4.408+0.328)-0.472),1.080)*0.232+-0.440;\n    float t3 = -pow(abs(uv.x*5.736-sin(uv.y*3.368+-0.032)-0.992),1.080)*0.232+-0.440;\n    float t4 = -pow(abs(-uv.x*5.736-sin(uv.y*4.408+0.304)+0.472),1.080)*0.360+-0.376;\n    float t5 = -pow(abs(-uv.x*5.736-sin(uv.y*4.408+0.600)+0.032),1.080)*0.248+-0.408;\n    float t6 = -pow(abs(-uv.x*5.736-sin(uv.y*4.408+0.328)-0.472),1.080)*0.232+-0.440;\n    float tt = max(max(max(max(max(max(t0,t1),t2),t3),t4),t5),t6);\n    \n    if(length(uv)<0.508){ //inside\n\t\tif (uv.y<teeth && distance(teeth,uv.y)<0.112*uv.y+0.000 || length(uv-vec2(0.000,-0.060))>0.508){ //shadow\n        \tcolor -= vec3(0.300,0.248,0.239);\n    \t}\n        if(uv.y>teeth){ //top teeth\n\t\t\tcolor = vec3(1.);\n    \t}\n        if(uv.y<tt){ //bottom teeth\n        color = mix(vec3(1.),vec3(.7),clamp(0.,1.,distance(0.,uv.x*0.880)));\n    \t}\n    }\n    \n    return color;\n}\n\nvec3 sideHair(vec2 uv, vec3 color){\n    vec2 olduv = uv;\n    float h1 = pow(abs(uv.x*8.184-sin(uv.y*6.056+-2.488)+1.688),0.936)*1.520+-0.040;\n    uv*=rot(-0.184);\n    float h2 = pow(abs(uv.x*10.032+(uv.y*uv.y*-4.160)+3.912),1.592)*0.752+-0.608;\n    uv = olduv;\n    uv*=rot(-0.960);\n    float h3 = pow(abs(uv.x*10.032+(uv.y*uv.y*-10.024)+2.704),0.960)*0.728+-0.184;\n    uv = olduv;\n    uv*=rot(-0.376);\n    float h4 = pow(abs(uv.x*11.152+(uv.y*uv.y*-10.928)+3.552),0.936)*2.032+-0.400;\n    uv = olduv;\n    \n    float hairLimit = -pow(abs(uv.x*0.736),2.)*1.+0.184;\n    float side = min(min(min(h1,h2),h3),h4);\n    vec2 uv2 = olduv;\n    uv2.x*=0.440*(2.464+uv2.y);\n    uv2.y+=-0.104;\n    if(uv.y<hairLimit && uv.y>side && length(uv2)<0.508 || uv.y<hairLimit && uv.y>side && uv.y <-0.120){\n        color = mix(vec3(0.870,0.870,0.870),vec3(0.680,0.680,0.680),clamp(0.,1.,uv.x*6.008+2.320));\n        color = mix(vec3(0.406,0.568,1.000),color ,clamp(0.,1.,length(uv+vec2(0.010,0.850)*1.208)));\n    }\n    \n    return color;\n}\n\n// https://iquilezles.org/articles/functions\nfloat cubicPulse( float c, float w, float x )\n{\n    x = abs(x - c);\n    if( x>w ) return 0.0;\n    x /= w;\n    return 1.0 - x*x*(3.0-2.0*x);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    uv-=.5;\n    uv.x *= iResolution.x/iResolution.y;\n\n    \n    //uv*=1.488;\n\tvec3 blush = vec3(1.,.78, .729);    \n    vec3 skintone = vec3(1.,.937,.875);\n    vec3 color = skintone;\n    vec2 uvold = uv;\n    uv.x*=0.536;\n    uv.x = abs(uv.x);\n    color=mix(blush,skintone,clamp(0.,1.,length((uv-vec2(0.128,-0.064))*11.232)+-0.128));\n    uv=uvold;\n    color = face(uv,color);\n    color = nose(uv,color);\n    color = mouth(uv,color);\n    float move = 0.;\n    if(mod(iTime,7.) < 3.14){\n     \tmove = sin(mod(iTime*2.,7.))*0.05;\n    }\n    float close = cubicPulse(1.,.2,mod(iTime,10.));\n    color = lefteye((uv-vec2(-0.183,0.043))*3.7,color,move, close);\n    color = righteye((uv-vec2(0.183,0.043))*3.7,color,-move, close);\n    color = eyebrows(uv,color);\n\tcolor = bangs(uv, color);\n\tcolor = sharkHat(uv,color);\n    color = sideHair(uv,color);\n    uv.x=-uv.x;\n    color = sideHair(uv,color);\n    \n    fragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}]}