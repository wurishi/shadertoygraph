{"ver":"0.1","info":{"id":"4dccR2","date":"1519487100","viewed":117,"name":"light2d","username":"Fililip","description":"first light :)\ndrag anywhere","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["yay"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//filip to ciota :)\n\n#define LIGHT_COUNT 2\n\nstruct light\n{\n    vec2 pos;\n    vec4 col;\n    float inte;\n};\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    light g[LIGHT_COUNT];\n    \n    g[0].col = vec4(1.0);\n    g[1].col = vec4(1.0, 1.0, 0.2, 1.0);\n    \n    g[0].inte = 0.2;\n    g[1].inte = 0.9;\n    \n\tvec3 lightAttenuation = vec3(0.1, 0.0001, 0.00005);\n    \n    vec2 uv = fragCoord.xy;\n    \n    g[0].pos = iMouse.xy;\n    g[1].pos = vec2(iResolution.x, iResolution.y);\n    \n    for (int i = 0; i < LIGHT_COUNT; i++)\n    {\n    \tfloat dist = distance(g[i].pos, uv.xy);\n    \tfloat attenuation = 1.0 / (lightAttenuation.x + lightAttenuation.y * dist + lightAttenuation.z * dist * dist);\n    \tg[i].col *= vec4(attenuation, attenuation, attenuation, 1.0) * g[i].inte;\n    }\n    \n    vec4 t = texture(iChannel0, uv.xy / iResolution.xy);\n    \n    vec4 added = vec4(0.0);\n    \n    for (int i = 0; i < LIGHT_COUNT; i++)\n    {\n    \tadded += g[i].col;\n    }\n    \n    fragColor = t * added;\n}","name":"Image","description":"","type":"image"}]}