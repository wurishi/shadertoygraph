{"ver":"0.1","info":{"id":"cdKXzR","date":"1680640791","viewed":156,"name":"Basic 2D Shadows","username":"lucysir","description":"Very basic 2D shadow casting.\nMove the light source with your mouse.","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["2d","shadow","light","cast"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"struct Circle {\n    vec2 pos;\n    float radius;\n};\n\n#define CIRCLE_COLOR vec3(255. / 255., 189. / 255., 66. / 255.)\n#define CIRCLES 6\n\n// Check if ray intersects with circle\nbool intersect_circle(vec2 pos, vec2 light, Circle circle) {\n    vec2 origin = light;\n    vec2 direction = normalize(pos - light);\n    \n    vec2 l = circle.pos - origin;\n    float dc = dot(l, direction);\n    if (dc < 0.0) return false;\n    \n    float d2 = dot(l, l) - dc * dc;\n    if (d2 > circle.radius * circle.radius) return false;\n    return true;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord / iResolution.y;\n    float aspect = iResolution.x / iResolution.y;\n\n    vec2 light = iMouse.xy / iResolution.xy * vec2(aspect, 1.0);\n    \n    // Initialize circles\n    Circle[CIRCLES] circles = Circle[](\n        Circle(vec2(0.2, 0.2), 0.05),\n        Circle(vec2(0.8, 0.23), 0.03),\n        Circle(vec2(1.2, 0.19), 0.04),\n        Circle(vec2(0.5, 0.5), 0.01),\n        Circle(vec2(0.45, 0.65), 0.03),\n        Circle(vec2(1.35, 0.7), 0.15)\n    );\n    \n    fragColor = vec4(1.0);\n    \n    // Draw shadows\n    for (int i = 0; i < CIRCLES; i++) {\n\n            if (intersect_circle(uv, light, circles[i])) {\n                if (distance(circles[i].pos, light) <= distance(uv, light))\n                    fragColor *= vec4(0.0);\n            }\n            else\n                fragColor *= vec4(1.0);\n       \n    }\n    \n    // Draw circles\n    for (int i = 0; i < CIRCLES; i++) {\n        if (distance(uv, circles[i].pos) < circles[i].radius)\n            fragColor = vec4(CIRCLE_COLOR, 1.0);\n    }\n}","name":"Image","description":"","type":"image"}]}