{"ver":"0.1","info":{"id":"3s2GWK","date":"1550010236","viewed":522,"name":"weird alien planes","username":"Emil","description":"Projected planes and some experimentation regarding multiple samples at different height","likes":17,"published":1,"flags":0,"usePreview":0,"tags":["parallax","weird","perspective"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4df3Rr","filepath":"/media/a/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","previewfilepath":"/media/ap/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 viewDir = normalize(vec3((fragCoord-iResolution.xy*0.5)/iResolution.y, 0.65+sin(iTime*0.2)*0.2));\n    viewDir = mix(cross(viewDir, vec3(sin(iTime*0.6)*0.6,cos(iTime*0.15)*0.2,sin(iTime*0.2)*0.3)), viewDir, 4.6+sin(iTime*0.14));\n\tvec3 camRay;\n    vec4 groundPlane = vec4(0.0);\n    \n    float oldLength = 0.0;\n    float absviewDirY = abs(viewDir.y);\n    for(float i = -0.4; i < 1.0; i+=0.01){\n\t\tcamRay = viewDir/(absviewDirY+float(i)*0.4*absviewDirY);\n        \n        vec4 newSample = texture(iChannel0, (camRay.xz + vec2(0.4, iTime))*0.01);\n        float heightSample = texture(iChannel1, (camRay.xz + vec2(0.4, iTime))*0.1).r;\n        float heightSample_o = texture(iChannel1, (camRay.xz + vec2(0.4, iTime))*0.1 + vec2(0.0, 0.01)).r;\n        float zDelta = heightSample - heightSample_o;\n        if(smoothstep(i, 1.0, heightSample+0.3)>0.45){\n            float newLength = 1.0/length(camRay);\n            if(newLength>oldLength){\n                oldLength = newLength;\n                groundPlane = newSample*(i*1.5+1.0);\n                groundPlane *= vec4(0.8)-vec4(zDelta*-4.0+0.9)*(newLength+0.2)+smoothstep(0.5,0.0,absviewDirY);\n                \n            }\n        }\n    }\n    \n    fragColor = groundPlane+vec4(0.1,0.3,0.5,0.0)*oldLength;\n}","name":"Image","description":"","type":"image"}]}