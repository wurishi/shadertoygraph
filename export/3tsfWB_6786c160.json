{"ver":"0.1","info":{"id":"3tsfWB","date":"1597635022","viewed":163,"name":"open_your_eyes","username":"caogtaa","description":"Open your eyes","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["eye"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// 08/23, simplify code according to FabriceNeyret2's advise.\n// still in progress ..\n\n#define PI 3.141592653589793\n\nfloat Circle(vec2 uv, vec2 origin, float r2, float blur) {\n    vec2 len = uv - origin;\n    float d2 = dot(len, len);\n    return smoothstep(r2 + blur, r2 - blur, d2);\n}\n\n/*float Band(float v, float start, float end, float blur) {\n    float up = smoothstep(start - blur, start + blur, v);\n    float down = smoothstep(end + blur, end - blur, v);\n    return up * down;\n}*/\n\nfloat SymmetricBand(float v, float top, float blur) {\n    return smoothstep(top + blur, top - blur, abs(v));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    // vec2 uv = fragCoord/iResolution.xy;\n    // uv = uv * 2.0 - 1.0;\n    // uv.x *= iResolution.x / iResolution.y;\n    vec2 uv = (fragCoord * 2. - iResolution.xy) / iResolution.y;\n    float blur = 2. / iResolution.y;\n\n    vec3 col = vec3(0.0);\n    float t = mod(iTime, 2.5*PI);\n    \n    float T1 = clamp(t, 0., PI);\n    float T2 = clamp(t, PI, 2.*PI);\n    float T3 = clamp(t, 2.*PI, 2.5*PI);\n\n    // part1, open\n    float part1 = sin(T1 * 0.5);\n\n    // part2，breath\n    float part2 = -sin(T2 * 2.0) * 0.05;\n\n    // part3，move forward\n    float part3 = sin(T3);\n    float scale = 1.0 + sin(T3) * 6.;\n\n    // float amp = abs(sin(u_time * 0.500));\n    float amp = part1 + part2 + part3;\n    amp *= scale;\n\n    float top = sin(uv.x / scale + PI / 2.0) * 0.5 * amp;\n    // float mask = Band(uv.y, -top, top, 0.01);\n    float mask = SymmetricBand(uv.y, top, blur);\n    \n    mask -= Circle(uv, vec2(0.), 0.25 * scale * scale, blur);\n    col.rgb = vec3(mask);\n\n    fragColor = vec4(col, 1.0 - mask);\n}","name":"Image","description":"","type":"image"}]}