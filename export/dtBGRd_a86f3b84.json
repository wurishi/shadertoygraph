{"ver":"0.1","info":{"id":"dtBGRd","date":"1673724979","viewed":322,"name":"kuwahara minimal","username":"lalaoopybee","description":"neat effect in a very simple way","likes":15,"published":1,"flags":0,"usePreview":1,"tags":["kuwahara","painting","npr"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define K 4//int(iMouse.x/iResolution.x*8.)\n\n#define KERN_TEX(a, b) texture(iChannel0, (fragCoord+vec2(i-a, j-b))/iResolution.xy).rgb\n\n#define GRAY(a) dot(a, vec3(.299, .587, .114))\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    float sectorSz=float(K*K+2*K+1);\n    \n    vec3 u0=vec3(0.), u1=u0, u2=u0, u3=u0;\n    for(int i=0;i<=K;i++){\n        for(int j=0;j<=K;j++){\n            u0+=KERN_TEX(K, K);\n            u1+=KERN_TEX(0, K);\n            u2+=KERN_TEX(K, 0);\n            u3+=KERN_TEX(0, 0);\n        }\n    }\n    u0/=sectorSz, u1/=sectorSz, u2/=sectorSz, u3/=sectorSz;\n    vec4 u=vec4(GRAY(u0), GRAY(u1), GRAY(u2), GRAY(u3));\n    \n    vec4 std=vec4(0.);\n    for(int i=0;i<=K;i++){\n        for(int j=0;j<=K;j++){\n            vec4 v=vec4(\n                GRAY(KERN_TEX(K, K)),\n                GRAY(KERN_TEX(0, K)),\n                GRAY(KERN_TEX(K, 0)),\n                GRAY(KERN_TEX(0, 0))\n            )-u;\n            std+=v*v;\n        }\n    }\n    \n    float m=min(std.x, min(std.y, min(std.z, std.w)));\n    fragColor=vec4(\n        m==std.x ? u0 :\n        m==std.y ? u1 : \n        m==std.z ? u2 :\n        m==std.w ? u3 :\n        (u0+u1+u2+u3)*.25,\n        1.\n    );\n}","name":"Image","description":"","type":"image"}]}