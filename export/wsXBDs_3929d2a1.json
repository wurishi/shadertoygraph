{"ver":"0.1","info":{"id":"wsXBDs","date":"1589268159","viewed":625,"name":"catacaustic of a circle","username":"matthen","description":"catacaustic of a circle","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["circle","cardioid","caustic","catacaustic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec2 p(in float theta, in float t) {\n    return vec2(-1., 0.) + vec2(\n        cos(theta),\n        sin(theta)\n     ) * min(t, abs(sin(2. * theta) / sin(theta)));\n}\n\nvec2 p2(in float theta) {\n    return p(theta, 2.);\n}\n\nvec2 p3(in float theta, in float t) {\n    float c = sin(2. * theta) / sin(theta);\n\tt = max(0., min(t - abs(c), c));\n    return p2(theta) + t * vec2(\n        cos(theta) * (1. - 2. * cos(2. * theta)),\n        - (sin(2. * theta) + sin(4. * theta)) / (2. * cos(theta)));\n}\n\nfloat line(vec2 p, vec2 a, vec2 b) {\n    vec2 pa = p - a;\n    vec2 ba = b - a;\n    float h = clamp(dot(pa, ba) / dot(ba, ba), 0., 1.);\n    return length(pa - ba * h);\n}\n\nfloat mixLine(float light, vec2 p, vec2 a, vec2 b, float d0) {\n    vec2 pa = p - a;\n    float lineMask = smoothstep(\n         0.02, 0.0,\n         line(p, a, b)\n     );\n    return light + lineMask * 0.03;\n    \n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = (fragCoord  - 0.5 * iResolution.xy) / iResolution.y;\n    uv *= 2.2;\n    \n    float light = 0.;\n   \n    float t = 0.001 + abs(iTime);\n    vec2 a = vec2(-1., 0.);\n   \t\n    for (float theta = -1.57; theta < 1.57; theta += 0.005) {\n        vec2 b = p(theta, t);\n        vec2 c = p2(theta);\n        vec2 d = p3(theta, t);\n        \n        light = mixLine(\n        \tlight, uv, a, b, 0.\n        );\n        float d0 = length(a - c);\n        if (t > d0) {\n            light = mixLine(\n                light, uv, c, d, d0\n            );\n        }\n    }\n    \n    light += smoothstep(0.02, 0., abs(length(uv) - 1.));\n    \n    fragColor.rgb = vec3(light);\n\t\n}","name":"Image","description":"","type":"image"}]}