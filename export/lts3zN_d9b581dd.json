{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#define DOTS\nconst float LN2 = 0.693147181;\t// natural log of 2 used to convert Log2 to LogE\nconst float SourceMag = 2.55;\nconst float SinkMag = -SourceMag;\nconst float divs = 50.0;\n    \nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 div = vec2( divs, divs*iResolution.y/iResolution.x );\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    uv -= 0.5;\t\t\t\t\t\t\t\t\t// center on screen\n    vec2 p = div*uv;\n   \tvec2 q; \n    vec2 d = vec2( 8.0, 0.0 );\n    \n\t// Velocity Potential in x, Stream fn in y, \n    vec2 S;\n    \n    // init with position to get horizontal flow\n    S = p;\t\n\tS.x -= iTime*5.0;\t\t\t\t\t\t// animate stream\n    \n    // Source\n    q = p + d;\n    S.x += SourceMag*log2(dot(q,q))*LN2*0.5;\n\tS.y += SourceMag*atan(q.y,q.x);\n\n    // Sink\n    q = p - d;\n    S.x += SinkMag*log2(dot(q,q))*LN2*0.5;\n\tS.y += SinkMag*atan(q.y,q.x);\n\n//\tCorner flow\n//\tS.x = (p.x + p.y)*(p.x - p.y)*0.5;\t\t\t// \"velocity potential\"\n//\tS.y = p.x*p.y;\t\t\t\t\t\t\t\t// stream function\n\n\tvec2 sxy;\n    float a;\n#ifdef DOTS\n    sxy = abs( sin(3.14159265*S) );\n    a = sxy.x * sxy.y;\t\t\t\t\t\t\t// combine sine waves using product\n    float b = length(fwidth(sxy))*0.7071;\t\t// jacobian magnitude\n    float t = 0.8;\t\t\t\t\t\t\t\t// threshold\n\ta = smoothstep( t-b, t+b, a );\t\t\t\t// blend across threshold\n//\ta = mix( t-b, t+b, a );\n#else\n\tsxy = sin(3.14159*S);\n    vec2 b = fwidth(sxy)*0.7071;\t\t\t\t// jacobian\n\tsxy = smoothstep( -b, b, sxy );\n    sxy = 2.0*sxy - 1.0;\t\t\t\t\t\t// remap to [-1..1]\n    a = 0.5*(sxy.x * sxy.y) + 0.5;\t\t\t\t// combine sine waves and remap to [0..1]\n#endif\n    \n    float c = sqrt( a );\t\t\t\t\t\t// correct for gamma\n\tfragColor = vec4(c, c, c, 1.0);\n//\tfragColor = vec4(c, sxy.x, sxy.y, 1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lts3zN","date":"1427521212","viewed":473,"name":"Flow Body","username":"KazimirO","description":"Potential flow around a Rankine body.  Undefine DOTS to see the checker grid.","likes":17,"published":1,"flags":0,"usePreview":0,"tags":["flow","dipole","potential","rankinebody"],"hasliked":0,"parentid":"","parentname":""}}