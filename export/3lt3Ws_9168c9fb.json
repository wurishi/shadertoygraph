{"ver":"0.1","info":{"id":"3lt3Ws","date":"1577980919","viewed":362,"name":"Improved matrix rain","username":"nyctef","description":"Based on thebookofshaders.com: https://thebookofshaders.com/edit.php#08/matrix.frag","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["rain","matrix","thebookofshaders"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float random(in float x){\n    return fract(sin(x)*43758.5453);\n}\n\nfloat random(in vec2 st){\n    return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453);\n}\n\nfloat rchar(in vec2 ipos,in vec2 fpos){\n    // num of pixels in individual characters\n    float grid=5.;\n    // size of black borders to overlay on characters\n    vec2 margin=vec2(.2,.05);\n    float seed=23.;\n    // mask for character borders\n    vec2 borders=step(margin,fpos)*step(margin,1.-fpos);\n    \n    // randomly choose each character pixel to be on or off\n    float chardata=random(ipos*seed+floor(fpos*grid));\n    return step(.5,chardata)*borders.x*borders.y;\n}\n\n// st ranges from 0.0-1.0\nvec3 matrix(in vec2 st){\n    float rows=50.;\n    \n    // ipos: which character we're displaying\n    vec2 ipos=floor(st*rows);\n    \n    // pick a random brightness\n    vec2 ipos2=ipos+vec2(.0,floor((iTime+200.)*10.*random(ipos.x+1.)));\n    // mix square and sawtooth waves\n    float bright=-(abs((sin(ipos2.y/10.+2.))))*(ipos2.y/10.-floor(ipos2.y/10.))*.7+.2;\n    \n    // fpos: the position within the character\n    vec2 fpos=fract(st*rows);\n    vec2 center=(.5-fpos);\n    float glow=(1.-dot(center,center)*3.)*2.;\n    // glow = 1.0;\n    \n    return vec3(rchar(ipos,fpos)*bright*glow);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 st = fragCoord/min(iResolution.x, iResolution.y);\n  \n    vec3 color=matrix(st)*vec3(.2,1.,.2);\n    fragColor=vec4(color,1.);\n}","name":"Image","description":"","type":"image"}]}