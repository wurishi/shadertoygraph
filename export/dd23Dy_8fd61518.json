{"ver":"0.1","info":{"id":"dd23Dy","date":"1668096587","viewed":63,"name":"C'sGoL w/ a twist","username":"murf","description":"Another game of life\n\nR to reset\nWASD to become lord of the flock","likes":5,"published":1,"flags":48,"usePreview":0,"tags":["gameoflife"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nivec2 offset = ivec2(0.0);\n\nvoid mainImage( out vec4 fragColor, in vec2 c ) {\n    offset += getOffset(iChannel1);        \n    ivec2 fragCoord = ivec2(c);\n    vec4 v = texelFetch(iChannel0, fragCoord+offset, 0);\n    fragColor = vec4(v.xyz,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"const vec3 colOn = vec3(1.0);\nconst vec3 colOff = vec3(0.0);\n\nfloat hash13(vec3 p3) {\n\tp3  = fract(p3 * .1031);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nivec2 offset = ivec2(0.0);\n    \nvoid mainImage( out vec4 fragColor, in vec2 c ) {\n    ivec2 fragCoord = ivec2(c);\n    vec4 v = texelFetch(iChannel0, fragCoord+offset, 0);\n    vec3 col = v.xyz;   \n    offset += getOffset(iChannel1);   \n        \n    if(iFrame==0 || keyPressed(82,iChannel1) > 0.5) {\n        uvec2 V = uvec2(fragCoord);\n        float h = hash13( vec3(fragCoord,iFrame) );\n\n        col = colOff;\n        if(h>0.5 && length(c/iResolution.xy-0.5)<=0.2)\n            col = colOn;            \n    }\n    else {   \n        int total = 0;\n        for(int i = -1; i <= 1; i++)\n        for(int j = -1; j <= 1; j++)\n            if(!(i==0 && j==0))\n                if(texelFetch(iChannel0, fragCoord+offset+ivec2(i,j), 0).r > 0.5)\n                 total++;\n\n        if(v.r<0.5 && total==3)\n            col = colOn;\n        else if(v.r>0.5 && (total < 2 || total > 3))\n            col = colOff;            \n    }\n        \n    fragColor = vec4(col,1.0);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"float keyPressed(int keyCode, sampler2D ch) \n{ return texture(ch, vec2((float(keyCode) + 0.5) / 256., .5/3.)).r; }\n\nivec2 getOffset(sampler2D ch)\n{\n    ivec2 offset = ivec2(0.0);\n    if(keyPressed(87,ch) > 0.5) //w\n        offset += ivec2(0.0,-1.0);\n    if(keyPressed(65,ch) > 0.5) //a\n        offset += ivec2(1.0,0.0);\n    if(keyPressed(83,ch) > 0.5) //s\n        offset += ivec2(0.0,1.0);\n    if(keyPressed(68,ch) > 0.5) //d\n        offset += ivec2(-1.0,0.0);\n    return offset;\n}","name":"Common","description":"","type":"common"}]}