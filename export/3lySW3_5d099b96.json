{"ver":"0.1","info":{"id":"3lySW3","date":"1583674165","viewed":260,"name":"rock paper scissors automaton","username":"vegardno","description":"https://twitter.com/AndrewM_Webb/status/1236274167437197320","likes":11,"published":1,"flags":32,"usePreview":0,"tags":["automaton"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// https://twitter.com/AndrewM_Webb/status/1236274167437197320\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texelFetch(iChannel0, ivec2(fragCoord), 0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// https://stackoverflow.com/a/4275343\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    if (iFrame < 10) {\n        float r = floor(3. * rand(fragCoord));\n        fragColor = vec4(float(r == 0.), float(r == 1.), float(r == 2.), 0.);\n        return;\n    }\n        \n    vec4 old = texelFetch(iChannel0, ivec2(fragCoord), 0);\n    \n    vec4 neighbours = vec4(0);\n    neighbours += texelFetch(iChannel0, ivec2(fragCoord) + ivec2(-1, -1), 0);\n    neighbours += texelFetch(iChannel0, ivec2(fragCoord) + ivec2(-1,  0), 0);\n    neighbours += texelFetch(iChannel0, ivec2(fragCoord) + ivec2(-1,  1), 0);\n    neighbours += texelFetch(iChannel0, ivec2(fragCoord) + ivec2( 0, -1), 0);\n    //neighbours += texelFetch(iChannel0, ivec2(fragCoord) + ivec2( 0,  0), 0);\n    neighbours += texelFetch(iChannel0, ivec2(fragCoord) + ivec2( 0,  1), 0);\n    neighbours += texelFetch(iChannel0, ivec2(fragCoord) + ivec2( 1, -1), 0);\n    neighbours += texelFetch(iChannel0, ivec2(fragCoord) + ivec2( 1,  0), 0);\n    neighbours += texelFetch(iChannel0, ivec2(fragCoord) + ivec2( 1,  1), 0);\n\n    \n    vec4 new = old;\n    \n    if (old.r == 1.) {\n        if (neighbours.b >= 3.)\n            new = vec4(0, 0, 1, 0);\n    } else if (old.g == 1.) {\n        if (neighbours.r >= 3.)\n            new = vec4(1, 0, 0, 0);\n    } else if (old.b == 1.) {\n        if (neighbours.g >= 3.)\n            new = vec4(0, 1, 0, 0);\n    }\n\n    fragColor = vec4(new.rgb, 1.);\n}","name":"Buffer A","description":"","type":"buffer"}]}