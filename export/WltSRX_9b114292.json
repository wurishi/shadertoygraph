{"ver":"0.1","info":{"id":"WltSRX","date":"1581457639","viewed":315,"name":"Cloud Impression","username":"ruojake","description":"Playing around with domain warping. A blending oversight(?) resulted in a super fluid painterly look which pleases me greatly.","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["fbm","warping","artistic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// (C) Kristian Sivonen 2020\n\nfloat hash(vec2 p)\n{\n    return fract(sin(dot(p, vec2(11.21, 13.0092)) * (p.x * .87 - p.y + 31.43)) * 233.1);\n}\n\nconst vec2 o = vec2(1.,0.);\n\nfloat noise(vec2 p)\n{\n    vec2 pi = floor(p);\n    vec2 pf = smoothstep(0., 1., p - pi);\n    return mix(\n        mix(hash(pi), \t   hash(pi+o), pf.x), \n        mix(hash(pi+o.yx), hash(pi+o.xx), pf.x), \n        pf.y);\n}\n\nfloat fbm(vec2 p)\n{\n\treturn (noise(p) * 8. + noise(p * 2.) * 4. + noise(p * 4.) * 2. + noise(p * 8.) * .5) / 7.25 - 1.;\n}\n\nvec2 fbm2(vec2 p)\n{\n    float a = fbm(p) * 3.1415927;\n\treturn sin(vec2(a + 1.5707963, a)) * .4;\n}\n\nfloat h(vec2 p, float t)\n{\n\tfloat t0 = t * .01;\n    float t1 = t * -.025;\n    float t2 = t * .035;\n    return fbm(t0 + p - fbm2(t1 + p + fbm2(t2 + p)));\n}\n\nvec3 h3d(vec2 p, float t)\n{\n\treturn vec3(p * .25, smoothstep(-1., 1., h(p, t)));\n}\n\nconst vec3 lightDir = vec3(.44022545316, -.88045090632, -.176090181264);\nconst vec3 light = vec3(1., .95, .9);\nconst vec3 shade = vec3(.3, .325, .5);\n\nvec4 clouds(vec2 uv, float t, float a)\n{\n    vec3 p = h3d(uv, t);\n    float alpha = smoothstep(.4, .8, p.z - a);\n    vec2 eps = vec2(.01 + p.z * .2, 0.);\n    vec3 n = normalize(cross(h3d(uv + eps.yx, t) - p, h3d(uv + eps, t) - p));\n    float l = dot(n, lightDir);\n    return vec4(mix(shade, light, \n              smoothstep(-1., 1., l)),alpha);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.y * 3.;\n    \n    float t = iTime;\n    vec4 col = vec4(0.);\n    vec3 fog = vec3(.05, .2, .4);\n    for (float i = .0; i < 1. && col.w < 1.; i += .066)\n    {\n    \tuv += 10.;\n        vec4 c = clouds(uv * (1. + i * 5.) + iTime * .05 * (1. - i), t, .2 - sin(i * 3.1415927) * .2);\n        c.xyz = mix(c.xyz, fog, i * (2. - i));\n        col.xyz = mix(c.xyz, col.xyz, col.w);\n        col.w = clamp(c.w + col.w, 0., 1.);\n    }\n    col.xyz = mix(fog * .7, col.xyz, col.w);\n    col.w = 1.;\n    fragColor = col;\n}","name":"Image","description":"","type":"image"}]}