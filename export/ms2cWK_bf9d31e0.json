{"ver":"0.1","info":{"id":"ms2cWK","date":"1688208887","viewed":39,"name":"Freezing","username":"Xecutor","description":"A bit more randomized filtering.","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["filter","ice","rng"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    ivec2 uv = ivec2(int(fragCoord.x), int(fragCoord.y));\n    vec3 col = texelFetch(iChannel0, uv, 0).rgb;\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float hash21(vec2 p)\n{\n    p = fract(p*vec2(13.34, 456.21));\n    p += dot(p, p+45.32);\n    return fract(p.x*p.y);\n}\n\nfloat unrealhash(vec2 p) {\n    vec2 pos = mod(p-.5, 128.) + vec2(-64.340622, -72.465622);\n    return fract(dot(pos.xyx * pos.xyy, vec3(20.390625, 60.703125, 2.4281209)));\n}\n\nfloat rnd(vec2 p) {\n    return (abs(hash21(p))+abs(unrealhash(p))) / 2.0;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    if(iFrame == 0) {\n        if(rnd(fragCoord+iDate.yz)<0.003) {\n            fragColor = vec4(0.00,0.01,0.02,1.0);\n        } else {\n            fragColor = vec4(0.0,0.0,0.0,1.0);        }\n    } else {\n        ivec2 v = ivec2(int(fragCoord.x),int(fragCoord.y));\n        int w = int(iResolution.x);\n        int h = int(iResolution.y);\n        vec4 c = texelFetch(iChannel0, v,0);//vec4(0.0);\n        float r = c.r;\n        for(int y=-1;y<2;++y) {\n            for(int x=-1;x<2;++x) {\n                c += texelFetch(iChannel0, ivec2((v.x+x+w)%w,(v.y+y+h)%h),0);\n            }\n        }\n        c/=10.0;\n        if(c.b>0.0)c.b=max(c.b,0.02);\n        c.r=r;\n        if(c.b>0.0 && rnd(fragCoord+vec2(sin(iTime), cos(iDate.z)))<0.30) {\n            if(r==0.0) {\n                c.gb += vec2(0.01, 0.02);\n            } else {\n                c.gb -= vec2(0.01,0.02);\n            }\n            if(c.b>0.9 && r==0.0) {\n                c.r=0.01;\n            } else if(c.b<0.1 && r!=0.0) {\n                c.r=0.0;\n            }\n        }\n        c=clamp(c,0.0,1.0);\n        fragColor = c;\n    }\n}","name":"Buffer A","description":"","type":"buffer"}]}