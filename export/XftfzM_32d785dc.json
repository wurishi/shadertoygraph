{"ver":"0.1","info":{"id":"XftfzM","date":"1732852187","viewed":78,"name":"Shadow Realm Effect","username":"__zenofthestars","description":"Cool emboss effect.","likes":0,"published":3,"flags":0,"usePreview":0,"tags":["2d","edge","emboss","normal","smooth","difference","findedges","direction"],"hasliked":0,"parentid":"dtfSz4","parentname":"Smooth Normal Map"},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdXGzn","filepath":"/media/a/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","previewfilepath":"/media/ap/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":3,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const vec4 embossColor = vec4(0.33, 0.1, 1., 1.);\nconst float TAU = 6.28318;\nconst float dirSteps = 16.0;\nconst float contrast = 3.0;\nconst float NoiseThreshold = 0.3;\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) \n{\n    float DrugStrength = iMouse.x / iResolution.x;\n    \n    vec2 coords = fragCoord / iResolution.xy;\n        // Col is the normal screen in this case\n    vec4 col = texture(iChannel0, coords);\n\n        // Contrast it so that the emboss looks better on it\n    vec4 contrastCol = ((col - 0.75) * max(3., 0.)) + 1.;\n\n        // Mix the mask layer with some noise\n    vec2 NoisePos = vec2(iTime * 1.2, iTime / 5.);\n    float mask = (mix(texture(iChannel1, coords).r, texture(iChannel3, coords + NoisePos).r, NoiseThreshold) - NoiseThreshold) * 20.;\n    mask = clamp(mask, 0., 1.) * DrugStrength;\n    \n        // Correct aspect ratio\n    vec2 aspect = 1.0 / iResolution.xy;\n\n    vec2 dirAvg = vec2(0.);\n\n    for (float i = 0.0; i < TAU; i += TAU / dirSteps)\n    {\n\n            // Find color difference in all directions\n        vec2 dir = vec2(sin(i), cos(i));\n\n            // Offset Coords\n        vec2 altCoords = coords + dir * aspect;\n\n            // Sample textures like a motherfucker\n        vec4 emboss = texture(iChannel0, altCoords);\n        vec4 maskedEmboss = texture(iChannel2, altCoords); // This is for the masked texture, in this case the 'boss'\n\n            // Add the samples to the average\n        dirAvg += dir * distance(contrastCol, emboss) / 2.; // Darken this one so the masked layer is more promenent\n        dirAvg += dir * distance(contrastCol, maskedEmboss);\n    }\n\n        // Brighten (to make eyes hurt)\n    dirAvg *= 3.0;\n    dirAvg.x = sin(iTime * 2.) * dirAvg.x;\n    dirAvg.y = cos(iTime * 2.) * dirAvg.y;\n        // Add the emboss layer to the base screen\n    fragColor = (col - (mask * 0.2)) + (((dirAvg.x * embossColor) + (dirAvg.y * embossColor)) * mask);\n}","name":"Image","description":"","type":"image"}]}