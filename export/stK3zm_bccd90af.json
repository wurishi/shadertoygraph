{"ver":"0.1","info":{"id":"stK3zm","date":"1637589460","viewed":96,"name":"SimpleKeyBoardInput","username":"liaozixin","description":"simulate handle operation.\nyou can press left arrow key to simulate press A key, right arrow key to simulate press B key, up arrow key to simulate press  select key, down arrow key to simulate press start key. 'w, A, S, D' to operate left rocker.","likes":3,"published":1,"flags":16,"usePreview":0,"tags":["sdf","keyboard"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define LEFT_KEY 37\n#define RIGHT_KEY 39\n#define UP_KEY 38\n#define DOWN_KEY 40\n#define W_KEY 87\n#define S_KEY 83\n#define A_KEY 65\n#define D_KEY 68\n\n\nfloat sdBox(vec2 p, vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdCircle(vec2 p, float r)\n{\n    return length(p) - r;\n}\n\nvec4 ABKeys(vec2 uv)\n{\n    float fillet = 0.04;\n    vec4 col = vec4(0);\n    \n    vec2 centra = uv - vec2(0.44, -0.05);\n    vec2 key_a_centra = centra - vec2(-0.1, 0.);\n    vec2 key_b_centra = centra - vec2(0.1, 0.);\n    \n    float margin_a = sdBox(key_a_centra, vec2(0.04, 0.04));\n    if (margin_a < fillet)\n        col = mix(col, vec4(0.7, 0.7, 0.7, 1.), 1.);\n    \n    float margin_b = sdBox(key_b_centra, vec2(0.04, 0.04));\n    if (margin_b < fillet)\n        col = mix(col, vec4(0.7, 0.7, 0.7, 1.), 1.);\n    \n    float key_a = sdCircle(key_a_centra, 0.06);\n    if (key_a <= 0.)\n    {\n        if (texelFetch(iChannel0, ivec2(LEFT_KEY, 0), 0).x > 0.)\n            col = mix(col, vec4(0.53, 0.23, 0.23, 1.), 1.);\n        else\n            col = mix(col, vec4(0.73, 0.23, 0.23, 1.), 1.);\n    }\n    \n    float key_b = sdCircle(key_b_centra, 0.06);\n    if (key_b <= 0.)\n    {\n        if (texelFetch(iChannel0, ivec2(RIGHT_KEY, 0), 0).x > 0.)\n            col = mix(col, vec4(0.53, 0.23, 0.23, 1.), 1.);\n        else\n            col = mix(col, vec4(0.73, 0.23, 0.23, 1.), 1.);\n    }\n    return col;\n}\n\nvec4 MenuKeys(vec2 uv)\n{\n    vec4 col = vec4(0);\n    vec2 centra = uv - vec2(0, -0.06);\n    vec2 key_1_centra = centra - vec2(-0.08, 0.);\n    vec2 key_2_centra = centra - vec2(0.08, 0.);\n    float fillet1 = 0.06;\n    float fillet2 = 0.02;\n    \n    float margin = sdBox(centra, vec2(0.1, 0.001));\n    if (margin < fillet1)\n        col = mix(col, vec4(0.7, 0.7, 0.7, 1.), 1.);\n    \n    float key_1 = sdBox(key_1_centra, vec2(0.03, 0.0001));\n    if (key_1 < fillet2)\n    {\n        if (texelFetch(iChannel0, ivec2(UP_KEY, 0), 0).x > 0.)\n            col = mix(col, vec4(0.07, 0.07, 0.07, 1.), 1.);\n        else\n            col = mix(col, vec4(0.16, 0.16, 0.16, 1.), 1.);\n    }\n        \n    float key_2 = sdBox(key_2_centra, vec2(0.03, 0.0001));\n    if (key_2 < fillet2)\n    {\n        if (texelFetch(iChannel0, ivec2(DOWN_KEY, 0), 0).x > 0.)\n            col = mix(col, vec4(0.07, 0.07, 0.07, 1.), 1.);\n        else\n            col = mix(col, vec4(0.16, 0.16, 0.16, 1.), 1.);\n    }\n        \n    return col;\n}\n\nvec4 Rocker(vec2 uv)\n{\n    vec4 col = vec4(0);\n    vec2 centra = uv - vec2(-0.44, -0.03);\n    vec2 centra_rocker = centra;\n    \n    float margin = sdCircle(centra, 0.2);\n    if (margin <= 0.)\n        col = mix(col, vec4(0.7, 0.7, 0.7, 1.), 1.);\n    \n    if (texelFetch(iChannel0, ivec2(W_KEY, 0), 0).x > 0.)\n    {\n        if (texelFetch(iChannel0, ivec2(A_KEY, 0), 0).x > 0.)\n            centra_rocker = centra - vec2(-0.1, 0.1);\n        else if (texelFetch(iChannel0, ivec2(D_KEY, 0), 0).x > 0.)\n            centra_rocker = centra - vec2(0.1, 0.1);\n        else\n            centra_rocker = centra - vec2(0, 0.1);\n    }\n    else if (texelFetch(iChannel0, ivec2(S_KEY, 0), 0).x > 0.)\n    {\n        if (texelFetch(iChannel0, ivec2(A_KEY, 0), 0).x > 0.)\n            centra_rocker = centra - vec2(-0.1, -0.1);\n        else if (texelFetch(iChannel0, ivec2(D_KEY, 0), 0).x > 0.)\n            centra_rocker = centra - vec2(0.1, -0.1);\n        else\n            centra_rocker = centra - vec2(0, -0.1);\n    }\n    else if (texelFetch(iChannel0, ivec2(A_KEY, 0), 0).x > 0.)\n    {\n        if (texelFetch(iChannel0, ivec2(W_KEY, 0), 0).x > 0.)\n            centra_rocker = centra - vec2(-0.1, 0.1);\n        else if (texelFetch(iChannel0, ivec2(S_KEY, 0), 0).x > 0.)\n            centra_rocker = centra - vec2(-0.1, -0.1);\n        else\n            centra_rocker = centra - vec2(-0.1, 0);\n    }\n    else if (texelFetch(iChannel0, ivec2(D_KEY, 0), 0).x > 0.)\n    {\n        if (texelFetch(iChannel0, ivec2(W_KEY, 0), 0).x > 0.)\n            centra_rocker = centra - vec2(0.1, 0.1);\n        else if (texelFetch(iChannel0, ivec2(S_KEY, 0), 0).x > 0.)\n            centra_rocker = centra - vec2(0.1, -0.1);\n        else\n            centra_rocker = centra - vec2(0.1, 0);\n    }\n        \n    float rocker = sdCircle(centra_rocker, 0.1);\n    if (rocker <= 0.)\n        col = mix(col, vec4(0.16, 0.16, 0.16, 1.), 1.);\n    \n    return col;\n}\n\nvec4 Background(vec2 uv)\n{\n    float fillet = 0.04;\n    vec4 col = vec4(0);\n    \n    float d = sdBox(uv, vec2(0.7, 0.3));\n    if (d < fillet)\n        col = mix(col, vec4(0.7, 0.7, 0.7, 1.), 1.);\n    \n    d = sdBox(uv, vec2(0.65, 0.25));\n    if (d < fillet)\n        col = mix(col, vec4(0.28, 0.28, 0.28, 1.), 1.);\n        \n    return col;\n}\n\nvec4 Handle(vec2 uv)\n{\n    vec4 col = vec4(0);\n    \n    vec4 bg_col = Background(uv);\n    vec4 keys_col_1 = ABKeys(uv);\n    vec4 keys_col_2 = MenuKeys(uv);\n    vec4 keys_col_3 = Rocker(uv);\n    \n    col = mix(col, bg_col, bg_col.a);\n    col = mix(col, keys_col_1, keys_col_1.a);\n    col = mix(col, keys_col_2, keys_col_2.a);\n    col = mix(col, keys_col_3, keys_col_3.a);\n    \n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    uv -= 0.5;\n    uv.x *= iResolution.x / iResolution.y;\n    float d = sdBox(uv, vec2(0.7, 0.3));\n    vec4 col = vec4(0);\n    \n    col = Handle(uv);\n    fragColor = col;\n}","name":"Image","description":"","type":"image"}]}