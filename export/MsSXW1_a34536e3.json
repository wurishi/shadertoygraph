{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"vec3 rotateX(float a, vec3 v) {\n   return vec3(v.x, cos(a) * v.y + sin(a) * v.z, cos(a) * v.z - sin(a) * v.y);\n}\n\nvec3 rotateY(float a, vec3 v) {\n   return vec3(cos(a) * v.x + sin(a) * v.z, v.y, cos(a) * v.z - sin(a) * v.x);\n}\n\nfloat map(in vec3 p) {\n        \n    vec3 q = rotateY(iTime, p);\n \tfloat d1 = length(q) - 1.0;\n    \n    d1 += 0.1*sin(10.0*q.x)*sin(10.0*q.y + iTime )*sin(10.0*q.z);\n    \n \tfloat d2 = p.y + 1.0;\n        \n    float k = 1.0;\n    float h = clamp(0.5 + 0.5 *(d1-d2)/k, 0.0, 1.0);\n        \n    return mix(d1, d2, h) - k*h*(1.0-h);\n}\n\nvec3 calcNormal(in vec3 p) {\n    vec2 e = vec2(0.0001, 0.0);\n     \n    return normalize(vec3( map(p+e.xyy) - map(p-e.xyy),\n                           map(p+e.yxy) - map(p-e.yxy),\n                           map(p+e.xyx) - map(p-e.xyx)));\n\t\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 p = -1.0 + 2.0 * uv;\n    \n    p.x *= iResolution.x / iResolution.y;\n    \n    vec3 ro = vec3(0.0, 0.0, 3.0);\n    vec3 rd = normalize(vec3(p, -1.0));\n    \n    vec2 angs = vec2(1.0-iMouse.y * 0.003, 1.0-iMouse.x * 0.01);\n\t\n\t//ro = rotateY(angs.y, ro) + vec3(0.0, 0.6, 0.0);\n\t//rd = rotateY(angs.y, rotateX(angs.x, rd));\n\n    vec3 col = vec3(0.0);\n    \n    float tmax = 20.0;\n\tfloat h = 1.0;\n    float t = 0.0;\n    for (int i=0; i<100; i++) {\n    \t\n        if (h < 0.0001 || t > tmax) break;\n        \n        h = map(ro + t*rd);   \n        t += h;\n    }\n    \n    vec3 lig = vec3(0.5773);\n\n    if (t<tmax) {\n        vec3 pos = ro + t*rd;\n        vec3 nor = calcNormal(pos);\n    \tcol = vec3(1.0);\n        col = vec3(1.0, 0.8, 0.5)*clamp(dot(nor, lig), 0.0, 1.0);\n        col += vec3(0.2, 0.3, 0.4)*clamp(nor.y, 0.0, 1.0);\n        col += 0.1;\n        col *= exp(-0.1*t);\n    }\n    \n    fragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MsSXW1","date":"1411417632","viewed":196,"name":"Rotating GpuTechConf example","username":"ga2arch","description":"rotating gputechconf example","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["mix","techconf"],"hasliked":0,"parentid":"","parentname":""}}