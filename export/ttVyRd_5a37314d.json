{"ver":"0.1","info":{"id":"ttVyRd","date":"1611609984","viewed":69,"name":"fork-Musicbox-v3","username":"jorge2017a1","description":"fork-Musicbox-v3","likes":1,"published":1,"flags":8,"usePreview":0,"tags":["forkmusicboxv3"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//ref https://www.shadertoy.com/view/wtKczt\n//por jorge2017a1\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord - .5 * iResolution.xy) / iResolution.y;\n    uv *= 20.;\n\n    float x = 0.;\n    float y=0.1;\n    for (int i = 0; i < 10; ++i) {\n        float t = float(i) * mod( iTime , 10.);\n        x += cos(cos(t) * radians( float( i+80)  ) * uv.y + sin(t) * radians(360.) * uv.x);\n        y+=sin(t+uv.y);\n        \n    }\n   \n    vec3 col1 = vec3(1.+x+y) * (.5 + .5 * x+y);\n    vec3 col2 = vec3(1.+x+y);\n    \n    vec3 col=mix(col1, col2, sin(x-y+iTime));\n    fragColor = vec4(col, 1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"\n//https://www.shadertoy.com/view/XdsXD2\n//Created by ztri in 2014-08-02\n//modificado por jorge.flores.p.\n\n\n#define C  32.703\n#define CS 34.648\n#define D  36.708\n#define DS 38.891\n#define E  41.203\n#define F  43.654\n#define FS 46.249\n#define G  48.999\n#define GS 51.913\n#define A  55.0\n#define AS 58.270\n#define B  61.735\n#define _  0.0\n#define X  200.0\n    \n\nfloat cycle(float time,float duration){\n\tfloat t = duration-mod(time,duration);\n    t = t*(1.0/duration);\n    return clamp(t,0.0,1.0); \n} \n\n\n\nfloat tb303(float time, float note){\n\n    float s = abs(sin(time*2.0)+1.0)*0.2;\n \tfloat a = pow(cycle(time,1.0/4.0),0.3);   \n    \n    float osc = sin(note*4.40*time);\n    osc = pow(osc,pow(1000.0,s+(a*0.5)));\n  \tosc = clamp(osc*a,-1.0,1.0);    \n    return pow(osc,1.0); \n}\n\n\nfloat tb304(float time, float note){\n\n    float s = abs(sin(time*0.3+6.0)+1.0)*0.5;\n \tfloat a = cycle(time,1.0/4.0);   \n    \n    float osc = sin(note*4.40*time);\n    osc = pow(osc,pow(10000.0,clamp(s+(a*0.2),0.001,100.0)));\n  \tosc = clamp(osc*a,-1.0,1.0);    \n    return osc; \n}\n\n\nfloat pad(float time, float note){\n    float osc = smoothstep(-0.1,0.8,sin(note*4.35*time*6.0) * sin(note*4.40*time*4.0) * sin(note*4.40*time*6.0));\n  \tosc = smoothstep(-0.5,1.0,pow(osc,2.0));    \n    return osc; \n}\n\n\n\n\nfloat kick(float time, float note){\n    float a = clamp(1.0-time,0.0,1.0);\n    float osc = sin(pow(a,5.0)*1.0*note);\n    return osc*pow(a,2.0); \n}\n\n\nfloat hat(float time, float note){\n    float n = fract(sin(time * 110.082) * 19871.8972);\n    float a = clamp(1.0-time,0.0,1.0);\n  \tfloat osc = clamp(pow(n,1.0),-1.0,1.0)*pow(a,5.0+note);    \n    return osc; \n}\n\n\nfloat clap(float time, float note){\n    float n = fract(sin(time * 110.082 * note) * 19871.8972);\n    float a = clamp(1.0-time*0.5,0.0,1.0);\n  \tfloat osc = n*pow(a,3.0);\n    \t  osc *= (sin(a*a*note*10.0)*pow(a,3.0));\n    return clamp(osc,-1.0,1.0); \n}\n\n\n\n\n\nfloat pat(float time,float p1,float p2,float p3,float p4,float p5,float p6,float p7,float p8){\n    float t = mod(time,8.0);\n    float sc=2.0;\n\tif(t>7.0) return p8*sc;    \n\tif(t>6.0) return p7*sc;    \n\tif(t>5.0) return p6*sc;    \n\tif(t>4.0) return p5*sc;    \n\tif(t>3.0) return p4*sc;    \n\tif(t>2.0) return p3*sc;    \n\tif(t>1.0) return p2*sc;    \n\tif(t>0.0) return p1*sc;    \n\treturn 0.0;\n}\n\n\nvec2 mainSound( in int samp,float time)\n{  \n\n    // Bass\n    float trans = pat(time*0.25,0.0,0.0,1.0,1.0,1.0,1.0,2.0,2.0);\n    float note  = pat(time,C,_,G,A,C,_,D,F);    \n    float bass  = tb303(time,note*trans);\n\n    // Pad\n    float trans1 = pat(time*0.25,1.0,1.0,0.5,0.5,1.0,1.0,2.0,2.0);\n    //float note1  = pat(time,C,C,G,G,C,C,A,F);    \n    float note1  = pat(time,A,C,G,G,A,F,A,E);    \n    float pads    = pad(time,note1*trans1);\n\n    \n    // Synth\n    float trans2 = pat(time*0.25,1.0,1.34,1.0,1.0,2.0,2.0,1.0,1.0);\n    float note2  = pat(time*4.0,C,D,G,A,C*2.0,D*2.0,A*2.0,C*2.0);    \n    float synth  = tb304(time*2.0,note2*trans2)*0.2*sin(time);\n\n    \n\t// Drums    \n    float t16   = time*4.0;\n    float hats  = hat( mod(t16,1.0),pat(t16,C,C,_,X,X,A,_,X));\n    float kicks = kick(mod(t16,1.0),pat(t16,C,C,_,_,_,C,_,_));\n    float claps = clap(mod(t16,1.0),pat(t16,_,_,C,_,_,_,C,X));\n\n       \n    // Mix\n    vec2 drums = vec2(0.7,0.5)*hats + vec2(0.6,0.6)*kicks + vec2(0.2,0.5)*claps + vec2(0.1,0.2)*pads;\n    drums = smoothstep(-0.8,0.8,drums);\n     vec2 sound = vec2(0.7,0.5)*synth + pads*vec2(0.5,0.3)+drums*vec2(0.5,0.6);\n     \n     sound+=  pads*vec2(0.5,0.3);\n    \n    \n    float vol = smoothstep(0.0,3.0,time)*smoothstep(60.0,50.0,time);;\n    return vec2(smoothstep(-1.0,1.0,sound))*vol;\n    \n}\n","name":"Sound","description":"","type":"sound"}]}