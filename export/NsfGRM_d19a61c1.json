{"ver":"0.1","info":{"id":"NsfGRM","date":"1615639306","viewed":77,"name":"My smiley test","username":"tonynogo","description":"Smiley test based on the tutorial of \"The art of code\"\nhttps://www.youtube.com/watch?v=ZlNnrpM0TRg","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["circle","smoothstep","smiley"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define s(a,b,t) smoothstep(a,b,t)\n#define sat(x) clamp(x, 0., 1.)\n\nvec4 BACKGROUND_COLOR = vec4(0.,0.,0.,1.);\nvec3 HEAD_COLOR = vec3(0.9, .7, .3);\nvec3 OUTLINE_COLOR = vec3(.6,.1,.3);\nvec3 CHEEK_COLOR = vec3(1.,.1,.1);\nvec3 EYE_COLOR = vec3(1.);\nvec3 IRIS_COLOR = vec3(.3,.5,1.);\nvec3 MOUTH_COLOR = vec3(.5,.18,.05);\nvec3 TONGUE_COLOR = vec3(1.,.5,.5);\n\nfloat remap01(float a, float b, float t)\n{\n    return sat((t-a)/(b-a));\n}\n\nfloat remap(float a, float b, float c, float d, float t)\n{\n    return sat((t-a)/(b-a) * (d-c) + c);\n}\n\nvec2 within(vec2 uv, vec4 rect)\n{\n    return (uv-rect.xy)/(rect.zw-rect.xy);\n}\n\nvec4 Eye(vec2 uv, float xsign, vec2 mouse)\n{\n    uv-=.5;\n    float d = length(uv);\n    \n    float eyemask = s(.5,.49,d);\n    vec4 col= vec4(EYE_COLOR, eyemask);\n\n    mouse.x *= xsign;\n    float md = length(uv - mouse *.5);\n    \n    float irismask = s(.3,.20,md);\n    col.rgb = mix(col.rgb, IRIS_COLOR,irismask);\n    \n    md = length(uv - mouse *.65);\n    \n    float eye = s(0.1,0.09,md);\n    col.rgb = mix(col.rgb, vec3(0.), eye);\n    \n    float circ = s(.45,.5,d);\n    col.rgb = mix(col.rgb, vec3(0.), circ);\n    \n    return col;\n}\n\nvec4 Mouth(vec2 uv)\n{\n    uv-=.5;\n    uv.y *=1.5;\n    uv.y -= uv.x*uv.x*2.;\n    float d = length(uv);\n    \n    float mouthmask = s(0.4,.39 ,d);\n    vec4 col= vec4(MOUTH_COLOR, mouthmask);\n    \n    float td = length(uv- vec2(0.,-.3));\n    float tonguemask = s(0.3,0.29,td);\n    col.rgb = mix(col.rgb, TONGUE_COLOR, tonguemask);\n    return col;\n}\n\nvec4 Head(vec2 uv)\n{\n    float d = length(uv);\n    float r = .5;\n    float edge = .4;\n    float outline = .02;\n    float blur = .005;\n    \n    vec4 col = vec4(HEAD_COLOR, s(r, r-blur, d));\n    \n    float edgemask = remap01(r-edge,r,d);\n    float edgefactor = 1. - (edgemask*edgemask) *.6;\n    col.rgb *= edgefactor;\n    \n    float outlinemask = s(r,r-outline, d);\n    col.rgb = mix(OUTLINE_COLOR, col.rgb, outlinemask);\n    \n    float highhlightmask = s(.41, .405, d);\n    float highlightfactor = highhlightmask * remap(-.1, .41, 0.,.75, uv.y);\n    col.rgb = mix(col.rgb, vec3(1.), highlightfactor);\n    \n    d = length(uv - vec2(.25,-.2));\n    float cheekmask = s(.15,.07, d)*.3;\n    col.rgb = mix(col.rgb, CHEEK_COLOR, cheekmask);\n    \n    return vec4(col);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy; // 0 <> 1\n    uv -= 0.5; // -0.5 <> 0.5\n    uv.x *= iResolution.x/iResolution.y; // ratio\n    vec2 mouse = iMouse.xy/iResolution.xy - .5;\n    float xsign = sign(uv.x);\n    uv.x = abs(uv.x);\n    vec4 head = Head(uv);\n    vec4 eye = Eye(within(uv, vec4(.05,-.05,.35,.25)), xsign, mouse);\n    vec4 mouth = Mouth(within(uv, vec4(-.3,-.45,.3,-.15)));\n    vec4 col = mix(BACKGROUND_COLOR, head, head.a);\n    col = mix(col, eye, eye.a);\n    col = mix(col, mouth, mouth.a);\n    fragColor = col;\n}","name":"Image","description":"","type":"image"}]}