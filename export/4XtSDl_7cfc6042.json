{"ver":"0.1","info":{"id":"4XtSDl","date":"1719790835","viewed":71,"name":"Pixel art edge detection","username":"NoodlesOfWrath","description":"edge detection to make pixel art\nthere is a weird bug when you use this on textures","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["pixelart"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float SCALING_FACTOR = 128.0;\nconst int COLORS = 5;\n\nvec4 roundedTexture(vec2 uv){\n    uv = round(uv * SCALING_FACTOR) / SCALING_FACTOR;\n    \n    vec4 color = round(texture(iChannel0, uv) * float(COLORS)) / float(COLORS);\n    \n    return color;\n}\n\nvec2 derivative(vec2 uv) {\n    float originalValue = length(roundedTexture(uv));\n    float increment = 1.0 / SCALING_FACTOR;\n    vec2 rightUv = uv + vec2(increment, 0.0);\n    float rightValue = length(roundedTexture(rightUv));\n    vec2 upUv = uv + vec2(0.0, increment);\n    float upValue = length(roundedTexture(upUv));\n    return abs(vec2(rightValue - originalValue, upValue - originalValue));\n}\n\n\n\nvoid mainImage(out vec4 fragColor, vec2 fragCoord)\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    \n   \n\tfloat edgeStrength = \n        length(derivative(uv));\n            \n    if (iMouse.z < 0.5) {\n        if (edgeStrength > 0.13) {\n            fragColor = vec4(vec3(0.0), 1.0);\n        }\n        else {\n            fragColor = roundedTexture(uv);\n            //uv = round(uv * SCALING_FACTOR) / SCALING_FACTOR;\n            //fragColor = texture(iChannel0, uv);\n        }\n    }\n    else {\n        fragColor = texture(iChannel0, fragCoord / iResolution.xy);\n    }\n}","name":"Image","description":"","type":"image"}]}