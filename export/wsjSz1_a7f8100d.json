{"ver":"0.1","info":{"id":"wsjSz1","date":"1552985361","viewed":196,"name":"maskColor","username":"waterriver1","description":"maskColor","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["mask"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4df3zn","filepath":"/media/a/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","previewfilepath":"/media/ap/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// modified from https://www.ddd.online/mall/detail/SACqgL1Y-qgJE8q94-QYfULPbY-nhn8OPFl\n\nfloat uStripeParams[5];\nfloat mask[6];\n\nvoid makeStripeInfo () {\n    vec2 uStripRes = vec2(2.0 / iResolution.x, 2.0 / iResolution.y);\n    highp vec2 hA = gl_FragCoord.xy * uStripRes - vec2(1.0, 1.0);\n    hA.x = hA.x + 0.25 * hA.y;\n    mask[0] = step(hA.x, uStripeParams[0]);\n    mask[1] = step(hA.x, uStripeParams[1]);\n    mask[2] = step(hA.x, uStripeParams[2]);\n    mask[3] = step(hA.x, uStripeParams[3]);\n    mask[4] = step(hA.x, uStripeParams[4]);\n    mask[5] = 1.0 - mask[4];\n    mask[4] -= mask[3];\n    mask[3] -= mask[2];\n    mask[2] -= mask[1];\n    mask[1] -= mask[0];\n}\nvec3 maskColor(vec3 uv, vec3 normal, vec3 albedo, vec3 specular, vec3 shininess, vec3 shading) {\n    vec3 color = mask[0] * uv +\n    \n    mask[1] * normal +\n    \n    mask[2] * albedo +\n    \n    mask[3] * specular +\n    \n    mask[4] * shininess +\n    \n    mask[5] * shading;\n    return color;\n}\n\nfloat plot (vec2 st, float pct) {\n    vec2 texel = (100.0 + 0.15 * 50.0) / iResolution.xy;\n    float width = texel.x * texel.y;\n    return smoothstep( pct - width, pct, st.y)-\n    \n    smoothstep( pct, pct + width, st.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    uStripeParams[0] = -0.6667;\n    uStripeParams[1] = -0.3333;\n    uStripeParams[2] = 0.0;\n    uStripeParams[3] = 0.3333;\n    uStripeParams[4] = 0.6667;\n    vec2 varyUV = fragCoord/iResolution.xy;\n    \n    vec3 uvMap = texture(iChannel0, varyUV).xyz;\n    vec3 normal = texture(iChannel1, varyUV).xyz;\n    vec3 albedo = texture(iChannel2, varyUV).yzx;\n    vec3 specular = texture(iChannel3, varyUV).xyz;\n    vec3 shininess = texture(iChannel0, varyUV).xxx;\n    vec3 shading = texture(iChannel1, varyUV).xzy;\n\n    makeStripeInfo();\n    vec3 color =  maskColor(uvMap, normal, albedo, specular, shininess, shading);\n\n    vec2 st = varyUV * 2.0 - vec2(1.0, 1.0);\n    float pct0 = - 4.0 * (st.x - uStripeParams[0]);\n    float pct1 = - 4.0 * (st.x - uStripeParams[1]);\n    float pct2 = - 4.0 * (st.x - uStripeParams[2]);\n    float pct3 = - 4.0 * (st.x - uStripeParams[3]);\n    float pct4 = - 4.0 * (st.x - uStripeParams[4]);\n    float lineMask = plot(st, pct0) + plot(st, pct1) + plot(st, pct2) + plot(st, pct3) + plot(st, pct4);\n    \n    fragColor = vec4(color * (1.0-lineMask) + lineMask * vec3(1.0, 0.5, 0.5), 1.0);\n}","name":"Image","description":"","type":"image"}]}