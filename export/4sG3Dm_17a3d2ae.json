{"ver":"0.1","info":{"id":"4sG3Dm","date":"1454693498","viewed":525,"name":"Oh no a gate to hell on my table","username":"Emil","description":"Experiment with quick fluids.., kinda neat effect","likes":31,"published":1,"flags":32,"usePreview":0,"tags":["hell","burning","isometric","hole"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","previewfilepath":"/media/ap/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float val = texture(iChannel0, fragCoord/iResolution.xy).b;\n    vec4 wall = texture(iChannel1, (fragCoord/iResolution.xy));\n    //if(val>0.0){\n        for(float x = -1.5;x<1.5;x+=0.5){\n            for(float y = -1.5;y<1.5;y+=0.5){\n        \t\twall += texture(iChannel1, (fragCoord/iResolution.xy+0.01*vec2(x-1.0,y+0.5)*val));\n                wall *= 0.5;\n            }\n        }\n    //}\n\t//fragColor = vec4(clamp(val,0.0,2.8)*0.6)*0.5+(1.0-clamp(val,0.0,1.0))*wall;\n    //fragColor = vec4(wall)*0.6*(1.5-clamp(0.0,1.0,val))+vec4(val*.2,val*.8,val*1.2,1.0)*0.3;\n    fragColor = wall* vec4(1.0,1.0,1.0,1.0)-1.1*(vec4(val*0.3,val*0.2,val*0.8,1.0)*0.5);\n    fragColor.r = clamp(fragColor.r,0.0,1.0);\n    fragColor.g = clamp(fragColor.g,0.0,1.0);\n    fragColor.b = clamp(fragColor.b,0.0,1.0);\n    fragColor += 0.06*vec4(val,val*0.3,val*0.1,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float random()\n{\n\treturn fract(sin(dot(gl_FragCoord.xy, vec2(12.9898,78.233))) * 43758.5453);  \n}\n\nvec4 get_pixel(float x_offset, float y_offset)\n{\n\treturn texture(iChannel0, (gl_FragCoord.xy / iResolution.xy) + (vec2(x_offset, y_offset) / iResolution.xy));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // r and g for xvelocity and yvelocity\n    float xvel = get_pixel(0.0, 0.0).r;\n    float yvel = get_pixel(0.0, 0.0).g;\n    // b for pressure\n    float press = 0.0;\n    // a for vorticity (spin) +=clockwise -=counterclockwise\n    float spin = 0.0;\n    \n    //// advection:\n    press += get_pixel(xvel,yvel).b;\n    spin += get_pixel(xvel,yvel).a;\n    //\\\\ end advection\n    \n    //// gravity?:\n    yvel += 0.08*smoothstep(0.0,1.0,press-5.0);\n    //yvel += 0.02;\n    //\\\\ end gravity?\n    \n    ////// vorticity:\n    float vortAmount = 0.03;\n    xvel += (get_pixel(0.0,-1.0).a)*vortAmount;\n    xvel -= (get_pixel(0.0,1.0).a)*vortAmount;\n    yvel += (get_pixel(-1.0,0.0).a)*vortAmount;\n    yvel -= (get_pixel(1.0,0.0).a)*vortAmount;\n    \n    spin += get_pixel(0.0,-1.0).r;\n    spin -= get_pixel(0.0,1.0).r;\n\tspin += get_pixel(-1.0,0.0).g;\n    spin -= get_pixel(1.0,0.0).g;\n    //\\\\\\\\ end vorticity\n    \n\t//// diffusion:\n    float diffAmount = -0.003;\n    xvel -= (get_pixel(-1.0,0.0).b-press)*diffAmount;\n    xvel += (get_pixel(1.0,0.0).b-press)*diffAmount;\n    yvel -= (get_pixel(0.0,-1.0).b-press)*diffAmount;\n    yvel += (get_pixel(0.0,1.0).b-press)*diffAmount;\n    //\\\\ end diffusion\n    \n    //// random:\n    press *= 0.98+(0.02*random());\n    //\\\\ end random\n    \n    if(mod(iTime,63.0)<=13.0){\n        press += 2.0*smoothstep(1.0,0.0,length(fragCoord.xy-iResolution.xy*0.5)*0.02);\n    }\n    if (iMouse.z > 0.0){\n        press += 2.0*smoothstep(1.0,0.0,length(fragCoord.xy-iMouse.xy)*0.02);\n    }\n    \n        \n    fragColor.r = xvel*0.99;\n    fragColor.g = yvel*0.95;\n    fragColor.b = press*1.025;\n    fragColor.a = spin*0.9;\n    if(mod(iTime,63.0)>=58.0){\n        fragColor.b = press*0.995;\n    }\n    if(mod(iTime,63.0)>=62.0){\n        fragColor = vec4(0.0);\n    }\n}","name":"Buf A","description":"","type":"buffer"}]}