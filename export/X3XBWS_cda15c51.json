{"ver":"0.1","info":{"id":"X3XBWS","date":"1728809491","viewed":29,"name":"gamma test checkerboard","username":"aaaidan","description":"Demonstrating how you need to transfer colors to sRGB space to output correct luminosity.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["test","gamma"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"precision mediump float;\nuniform vec2 u_resolution;\n\nconst float CHECKER_SIZE = 1.0;\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec2 st = gl_FragCoord.xy / iResolution.xy;\n    \n    const float CHECKER_SIZE_2 = CHECKER_SIZE * 2.0;\n    // start out with a checkerboard pattern\n    vec3 color = vec3(\n      mod(\n        step(mod(gl_FragCoord.x + 0.5, CHECKER_SIZE_2) / (CHECKER_SIZE_2), 0.499) +\n        step(mod(gl_FragCoord.y + 0.5, CHECKER_SIZE_2) / (CHECKER_SIZE_2), 0.499)\n      , 2.0)\n    );\n    \n    if (st.x > 0.2 && st.x < 0.4) {\n        // LEFT band.\n        // half gray \"should\" look the same\n\t\tcolor = vec3( (0.0 + 1.0) / 2.0 );\n        // but this is naive. we have calculated\n        // the halfway point using linear math\n        // but it needs to be converted to sRGB to\n        // look correct.\n    }\n    \n    float GAMMA = 2.2;\n    if (iMouse.z > 0.0) {\n        // if dragging, use mouse position for gamma (left-right, 1-3)\n        GAMMA = map(iMouse.x / iResolution.x, 0.0, 1.0, 1.0, 3.0);\n    }\n    \n    if (st.x > 0.6 && st.x < 0.8) {\n\t\t// RIGHT band.\n        // let's do the sRGB conversion\n        // to sRGB space.\n\t\tcolor = vec3(0.5);\n        color = pow(color, vec3(1.0 / GAMMA));\n        \n        // or, if you prefer, skip the middleman:\n        //color = vec3(0.7297400528);\n    }\n\n    fragColor = vec4(color,1.0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}","name":"Common","description":"","type":"common"}]}