{"ver":"0.1","info":{"id":"ft3cz4","date":"1659301998","viewed":246,"name":"Torus Wave [332 chars]","username":"harry7557558","description":"I don't know why I have the mood to write a golfed shader this afternoon.\nInspired by active code golfers on this platform like Xor and FabriceNeyret2, This is my first (and hopefully also my last) code golfing activity this year.","likes":15,"published":1,"flags":0,"usePreview":0,"tags":["wave","torus","signal","golf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define v vec3\nfloat s(v p) {\n    p.yz *= .1*mat2(5,9,-9,5);                          // rotate\n    return length(vec2(length(p.xy)-.5,p.z))-.2;        // torus SDF\n}\nvoid mainImage( out vec4 c, vec2 p ) {\n    c -= c;                                             // do this to be safe\n    v q = v(0,0,2),                                     // -ro\n      d = v(-.5+.3*mat2(9,2,-2,9)*p/iResolution.x,2);   // rd with rotation\n\n    for (float t=.1,                              // raymarching distance\n               u=t, g;                            // torus SDF and line gradient\n         t<3.&&u>0.;                              // not too far or inside\n         t+=.1*u+.01                              // small nonzero step\n    ) g = abs(\n            (u=s(d*t-q))                          // evaluate SDF\n            -s(d*(t-.01)-q)                       // finite difference line gradient\n          ),\n      c.xyz += 2e-5*v(2,5,8)/g                    // blue glow, bright when g->0\n             + v(90,40,20)*g*step(u,0.);          // torus color\n\n    c=tanh(c);                                    // prevent overexposure\n}\n","name":"Image","description":"","type":"image"}]}