{"ver":"0.1","info":{"id":"4t2XWc","date":"1446955378","viewed":217,"name":"Raymarch Spirals","username":"Swax97","description":"Spirals!","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["3d","raymarched","spiral"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","previewfilepath":"/media/ap/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"float dist(vec3 p){\n    p.y += sin(dot(vec2(70.0, 40.0),  floor(p.xz * 0.25))) * iTime;\n    p.y *= 2.0;\n    \n    p.xz = fract(p.xz * 0.25) * 4.0 - 2.0;\n    \n \tp.x += 0.5 * cos(p.y);\n    p.z += 0.5 * sin(p.y);\n    return  length(p.xz) - 0.5;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = - (2.0 * fragCoord - iResolution.xy) / iResolution.x;\n    \n    \n    vec3 p = vec3(0.0, 0.0, iTime);\n    vec3 d = normalize(vec3(uv, 1.0));\n   \n    float m, l = 0.0;\n    \n    for (int i = 0; i < 200; i++){\n        m = dist(p + d * l);\n     \tl += m * 0.5;\n        if (m < 0.01 || l > 25.0) break;\n    }\n    \n    p = p + d * l;\n    \n    if (m < 0.01){\n        vec2 eps = vec2(0.01, -0.01);\n        vec3 n = normalize(dist(p + eps.xxx) * eps.xxx +\n                           //dist(p + eps.xxy) * eps.xxy + \n                           //dist(p + eps.xyx) * eps.xyx + \n                           //dist(p + eps.yxx) * eps.yxx + \n                           dist(p + eps.yyx) * eps.yyx + \n                           dist(p + eps.yxy) * eps.yxy + \n                           dist(p + eps.xyy) * eps.xyy);\n                           //dist(p + eps.yyy) * eps.yyy);\n\n        vec3 light = normalize(vec3(cos(iTime) * 0.6180339 * 0.5, sin(iTime) * 0.5, -1.0));\n        \n        float b = dot(n, light);\n        b*= (1.0 - l/25.0);\n        \n        vec3 color = texture(iChannel0, n.xy * 0.5).xyz;\n        \n        \n        fragColor = vec4(color * b, 1.0);\n    } else {\n        fragColor = vec4(0.0);\n    }\n}","name":"","description":"","type":"image"}]}