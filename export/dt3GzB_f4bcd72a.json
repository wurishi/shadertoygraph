{"ver":"0.1","info":{"id":"dt3GzB","date":"1682618483","viewed":255,"name":"Smokey Disco Godrays","username":"timmaffett","description":"Disco Godrays\" by @kishimisu (2023) - https://www.shadertoy.com/view/Dt33RS\nchanged texture and sampling to get 'smoke rings fill the air' effect..","likes":5,"published":3,"flags":0,"usePreview":1,"tags":["raymarching","ray","rays","fog","rotation","god","neon","short","density","golf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdXGzr","filepath":"/media/a/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg","previewfilepath":"/media/ap/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Fork of \"Disco Godrays [483 chars]\" by kishimisu. https://shadertoy.com/view/Dt33RS\n// 2023-04-27 17:51:23\n\n/* \"Disco Godrays\" by @kishimisu (2023) - https://www.shadertoy.com/view/Dt33RS\n\n   These are \"fake\" godrays made without tracing any additional ray.\n   The maximum raymarching step size is set to 0.1 in order to sample the scene\n   frequently (very inneficient) and some blue noise is added to reduce artefacts.\n*/\n#define iTime (iTime*0.75)\n\n#define r(p) mat2(cos(round((atan(p.y,p.x)+k)/f)*f-k + vec4(0,33,11,0)))\n\nvoid mainImage(out vec4 O, vec2 F) {\n\n\n    float f = .2856, d = f, k = iTime*f, t;\n    vec4  p, a = O *= t = 0.;\n    vec2 R = iResolution.xy;\n    vec2 textSamp =  F/1024.+fract(k/20.);\n    vec4 sv = normalize(vec4((F+F-R)/R.y, 1, 0));\n    \n    for (float i=0.;i<6e1;i++) {\n        if(d <= .01) break;\n        p.z -= 2.;\n        p.zx *= r(p.xz);\n        p.yx *= r(p.xy);\n        \n        a += smoothstep(.02, .0, length(p.yz) - .05) *\n             smoothstep( 1., .0, length(p)    -  1.) *\n             (1. + cos(k+k + t+t + vec4(0,1,2,0)));\n             \n        t += d = min(max(length(p) - 1., .05 - length(p.yz)),\n                 .1 + texture(iChannel0, textSamp).r*.026);\n        p = t*sv;\n    }\n                 \n    O = .5*mix(O+.3, a, exp(-t*.1));\n}","name":"Image","description":"","type":"image"}]}