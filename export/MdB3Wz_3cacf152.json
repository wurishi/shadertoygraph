{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n\n//parameters\n\nconst int iterations=50;\nconst float bailout=1e5;\nconst float brightness=.85;\nconst float saturation=.6;\nconst float zoom=1.;\n\n\n//------------------ ------------------------------------------\n// complex number operations\nvec2 cadd( vec2 a, float s ) { return vec2( a.x+s, a.y ); }\nvec2 cmul( vec2 a, vec2 b )  { return vec2( a.x*b.x - a.y*b.y, a.x*b.y + a.y*b.x ); }\nvec2 cdiv( vec2 a, vec2 b )  { float d = dot(b,b); return vec2( dot(a,b), a.y*b.x - a.x*b.y ) / d; }\nvec2 cinv( vec2 z)  { float d = dot(z,z); return vec2( z.x, -z.y ) / d; }\nvec2 csqr( vec2 a ) { return vec2(a.x*a.x-a.y*a.y, 2.0*a.x*a.y ); }\nvec2 csqrt( vec2 z ) { float m = length(z); return sqrt( 0.5*vec2(m+z.x, m-z.x) ) * vec2( 1.0, sign(z.y) ); }\nvec2 conj( vec2 z ) { return vec2(z.x,-z.y); }\nvec2 cpow( vec2 z, float n ) { float r = length( z ); float a = atan( z.y, z.x ); return pow( r, n )*vec2( cos(a*n), sin(a*n) ); }\nvec2 cexp( vec2 z) {  return exp( z.x )*vec2( cos(z.y), sin(z.y) ); }\nvec2 clog( vec2 z) {  float d = dot(z,z);return vec2( 0.5*log(d), atan(z.y,z.x)); }\nvec2 csin( vec2 z) { float r = exp(z.y); return 0.5*vec2((r+1.0/r)*sin(z.x),(r-1.0/r)*cos(z.x));}\nvec2 ccos( vec2 z) { float r = exp(z.y); return 0.5*vec2((r+1.0/r)*cos(z.x),-(r-1.0/r)*sin(z.x));}\n//------------------------------------------------------------\n\nvec2 z0;\nvec2 zavg;\nvec2 zn;\n\n//formulas\n\nvec2 f1( vec2 x ){return csqr(x) + z0  ;}//Mandelbrot\nvec2 f2( vec2 x ){return (csqr(x+z0)- x+ z0)*0.5  ;}\nvec2 f3( vec2 x ){return cinv(x+z0)+ x-z0  ;}//Infinity\nvec2 f4( vec2 x ){return (x+cinv(x)+ z0+cinv(z0))*-.5  ;}\nvec2 f5( vec2 x ){return (csqr(x-z0)+ x+z0)  ;}\n\n\n\nvec2 f( vec2 x ){float t = 0.5+0.5*cos(0.1*iTime);return (f1(x)*t+f3(x)*(1.0-t));}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 color=vec3(0.);\n    vec2 p=(fragCoord.xy-iMouse.xy)/ iResolution.xy - 0.5;\n    p.x*=iResolution.x/iResolution.y;\n    p/=zoom*0.5;\n    float avg=0.;\n    zavg=vec2(0.);\n    zn=normalize(p);\t\t\t\n    vec2 z=p;\n    z0=p;\n    for (int i=0; i<iterations; i++) {\n\n\tz=f(z);\n\t\t\t\t\n\tfloat l=length(z-zavg);\n        l= max(l,1.0/l);\n        if(l>bailout){\n            float k = sqrt(sqrt(bailout/l))/float(i+1);\n            zn=k*normalize(z)+(1.-k)*zn;\n            break;\n        }\n\t\t\t\t                          \n        float k = 1./float(i+1);\n        avg = k*l+(1.-k)*avg;\n        zavg=k*z+(1.-k)*zavg;\n        zn=k*normalize(z)+(1.-k)*zn;\n        \t\t\t\n    }\n\t\t   \n    color=0.2+abs(vec3(zn.x*zn.x,zn.x*zn.x,zn.y));\n    if(avg>1.)avg=1./avg;\n    color*=1.0-avg;\t\n    color=mix(vec3(length(color)),color,saturation)*brightness;\t\n    fragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MdB3Wz","date":"1386000080","viewed":235,"name":"Fractaverage","username":"guil","description":"Just playing with averages","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["2d","fractal","average"],"hasliked":0,"parentid":"","parentname":""}}