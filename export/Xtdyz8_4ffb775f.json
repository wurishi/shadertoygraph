{"ver":"0.1","info":{"id":"Xtdyz8","date":"1531521096","viewed":227,"name":"Lively Flowers","username":"neo_virtual","description":"Starting out with pixel shaders.","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["flowers"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float pi =3.141592653589793;\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.y;\n\n    fragColor = vec4(1.0);\n    vec3 originalBackground = fragColor.xyz; \n    for (float j = -1.7;j<1.7;j=j+0.30)\n    {\n        for (float i = 0.0;i<1.7;i=i+0.15)\n        {\n            vec2 pos = vec2(i+j,i/1.6);\n            float size = rand(vec2(i,j))*0.1;\n            vec2 q = uv - pos;\n\t\t\tif (length(q) < size)  // avoid computation for this flower if we are outside its area\n            {\n                float numberOfPetals = 6.0;\n                float rotationSpeed =  iTime*30.*(0.1+rand(vec2(j,i))/2.0);\n                float rd = size/2.0 + size/2.0*sin(atan(q.y,q.x)*numberOfPetals +rotationSpeed);\n                vec3 flowerColor = vec3(rand(pos),rand(pos*2.0),rand(pos*3.0));\n                float s = smoothstep(rd-0.01,rd,distance(uv,pos));\n                \n                float s2 = smoothstep(rd-0.02,rd-0.01,distance(uv,pos));\n                \n                fragColor.xyz = fragColor.xyz * s + ( flowerColor * (1.0-s)) ;\n                fragColor.xyz = fragColor.xyz * s2 + ( originalBackground * (1.0-s2)) ;\n                \n                size = size / 1.5*abs(sin(iTime));\n                numberOfPetals = 10.0;\n                rotationSpeed =  -iTime*90.*(0.1+rand(vec2(j,i)));\n                rd = size/2.0 + size/2.0*sin(atan(q.y,q.x)*numberOfPetals +rotationSpeed);\n                flowerColor = vec3(rand(pos/1.0),rand(pos*2.5),rand(pos*3.2));\n                s = smoothstep(rd-0.01,rd,distance(uv,pos));\n                \n                s2 = smoothstep(rd-0.02,rd-0.01,distance(uv,pos));\n                originalBackground = fragColor.xyz;\n                fragColor.xyz = fragColor.xyz * s + ( flowerColor * (1.0-s)) ;\n                fragColor.xyz = fragColor.xyz * s2 + ( originalBackground * (1.0-s2)) ;\n            }\n        }\n    }\n\n}\n","name":"Image","description":"","type":"image"}]}