{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"vec2 toUv(vec2 p) {\n\tvec2 uv = ((p / iResolution.xy) * vec2(1.,1.)) + vec2(-0.5,-0.5);\n\tuv.x *= iResolution.x/iResolution.y;\n\t\n    // uv.x = [roughly -0.5, roughly 0.5]\n\t// uv.y = [-0.5, 0.5]\n\treturn uv;\n}\n\nvec3 eye = vec3(0.,0.,100.);\nvec3 light = vec3(-0.1, 1., 0.1);\nvec3 lightColor = vec3(0.7,0.9,0.5);\nvec3 ambientColor = vec3(0.35,0.25,0.21);\nvec3 backgroundColor = vec3(0.3,0.4,0.4);\n\nvec4 sphere(vec3 center, float minRadius, float maxRadius, float speed, vec2 fragCoord) {\n\tvec2 frag = toUv(fragCoord.xy);\n\t\n\tvec3 ray = normalize(vec3(frag,0.) - eye);\n\tvec3 eye_to_center = center - eye;\n\tvec3 closest = eye + (ray * dot(ray,eye_to_center));\n\tfloat dist = distance(closest, center);\n\t\n\tfloat radius = minRadius + (maxRadius-minRadius)*((sin(iTime*speed)+1.)/2.);\n\tif (dist > radius) return vec4(0.,0.,0.,0.);\n\t\n\tvec3 p = closest - (ray * sqrt(pow(radius,2.) - pow(dist,2.)));\n\t//vec3 p_to_light = normalize(light - p);\n\tvec3 center_to_p = normalize(p - center);\n\t\n\tvec3 p_to_light = (light - p) * inversesqrt(pow(distance(light,p),2.));\n\t\n\tfloat cos_of_aoi = dot(p_to_light,center_to_p);\n\tfloat attn = (sin(iTime*0.5)+1.)/4.;\n\tvec3 attLightColor = lightColor * (1. / ( 1.0 + attn *distance(light,p)));\n\tvec3 surfaceColor = vec3(1.,1.,1.);\n\t\t\t\t\n\treturn vec4(max(ambientColor, clamp(surfaceColor * attLightColor * cos_of_aoi, vec3(0.,0.,0.), vec3(1.,1.,1.))), p.z);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tlight = vec3(sin(iTime*0.5), 2.+sin(iTime*0.3)*10., 2.);\n\tvec3 p1 = vec3(-0.2,0.,0.);\n\tvec4 s1 = sphere(p1,0.3,0.35,1.,fragCoord);\n\tvec3 p2 = p1 + vec3(cos(iTime*3.),0.,sin(iTime*3.))*0.5;\n\tvec4 s2 = sphere(p2,0.02,0.1,10.,fragCoord);\n\t\n\tvec3 rgb = s1.rgb + s2.rgb;\n\tfloat z = 0.;\n\tif (rgb == vec3(0.,0.,0.)) {\n\t\trgb = backgroundColor;\n\t} else if (s1.rgb * s2.rgb != vec3(0.,0.,0.)) {\n\t\tvec4 s = s1.w > s2.w ? s1 : s2;\n\t\tz = s.w;\n\t\trgb = s.rgb;\n\t}\n\tfragColor = vec4(rgb, 1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MsjGWD","date":"1388551048","viewed":162,"name":"Newb spheres","username":"kk123","description":"Newb spheres","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["sphere","newb"],"hasliked":0,"parentid":"","parentname":""}}