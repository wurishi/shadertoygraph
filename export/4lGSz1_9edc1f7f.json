{"ver":"0.1","info":{"id":"4lGSz1","date":"1482765248","viewed":214,"name":"quick sketch 9sd7","username":"public_int_i","description":"quick sketch, Buf A is where everything happens.\nPaint with mouse","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["sketch","quick","9sd7"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Ethan Alexander Shulman 2016\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec4 v = texture(iChannel0, fragCoord.xy / iResolution.xy)*2.-1.;\n    v *= v.w;\n\tfragColor = pow(v,vec4(1.0/2.2))\n        \t\t*sign(v);\n    \t\t    //;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"//Ethan Alexander Shulman 2016\n\n#define EXTENT 2\n#define EXTENT_LENGTH length(vec2(EXTENT))\n\nfloat D(vec2 v) {\n    return fract(abs(dot(cos(v),vec2(252.7984,96635.98274))));\n}\n\n#define R(spos) (texture(iChannel0, spos)*2.-1.)\n#define W(wval) fract(wval*.5+.5)\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 tnoise = cos(iDate.w/4096.+uv*256.2985+cos(iDate.w*uv*.1))*1024.;\n    \n    if (iFrame < 120 || (iMouse.w > 0. && length(iMouse.xy/iResolution.xy-uv) < 0.05)) {\n        //init with texture\n        fragColor = vec4(texture(iChannel1,uv).xyz,length(texture(iChannel1,1.-uv).xyz));\n        return;\n        \n        //init with noise\n        uv += tnoise;\n        fragColor += vec4(D(uv),\n                         D(uv+vec2(-.9842,.81284)),\n                         D(uv+vec2(.2198,.44687)),\n                         D(uv+vec2(.354,-.847)));\n        return;\n    }\n    \n    \n    vec4 v = R(uv),\n         o = v;\n    //try changing sum bias when using mean variation\n    float sum = .5;\n    \n    for (int x = -EXTENT; x < EXTENT+1; x++) {\n        for (int y = -EXTENT; y < EXTENT+1; y++) {\n            if (x == 0 && y == 0) continue;\n            \n            vec2 s = vec2(x,y);\n            vec4 q = R(fract(abs(uv+s/iResolution.xy)));\n            //variation: enable interaction of channels\n            q = mix(q,q.yzxw,D(tnoise+uv*127.3984+q.xy*234.24+s*3.982734)*.5);\n            \n            float a = max(0.,EXTENT_LENGTH*2.-length(s))/(EXTENT_LENGTH*4.)*\n                //variation: dot vs diff-dot vs noisy dot vs noisy diff dot\n                //max(0.,1.+dot(q,v));\n            \t//max(0.,length(q-v)-dot(q,v));\n                //max(0.,D(tnoise+uv*127.3984+q.xy*234.24+s*3.982734)+dot(q,v));\n                max(0.,(length(q-v)+D(tnoise+uv*127.3984+q.xy*234.24+s*3.982734)*.05)-dot(q,v));\n            o += a*q;\n            sum += a;\n        }\n    }\n    \n    //variation: normalize vs mean vs both\n    o /= sum;\n    o = normalize(o);\n    \n    fragColor = W(o);\n    //fragColor = vec4(1.);\n}","name":"Buf A","description":"","type":"buffer"}]}