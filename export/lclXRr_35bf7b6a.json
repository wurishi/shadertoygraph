{"ver":"0.1","info":{"id":"lclXRr","date":"1706029977","viewed":56,"name":"Screen shader","username":"Skelly","description":"Renders a texture with individual RGB pixels made from 3x3 screen pixels.\nAlso has a 1 pixel black line between virtual pixels to simulate screen door effect.\nAs 1 4x4 section can only have a maximum brightness of 3 pixels, the screen is 3/16th brightness","likes":1,"published":1,"flags":0,"usePreview":1,"tags":["postprocessing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4df3zn","filepath":"/media/a/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","previewfilepath":"/media/ap/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"# define pixelate 1 // 0 is false, 1 is true\n# define brightness .1875 // .1875 is maximum before loss of image quality\n\nvec3 ar_reproject(vec2 uv, int channel)\n{\n    float scr_ratio = iResolution.x/iResolution.y;\n    float img_ratio = iChannelResolution[channel].x/iChannelResolution[channel].y;\n    \n    vec2 img_uv = (uv - vec2(.5)) *\n        vec2(max(1., scr_ratio/img_ratio), max(1., img_ratio/scr_ratio)) + \n        vec2(.5);\n    bool on_screen = img_uv.x >= 0. && img_uv.x <= 1. && img_uv.y >= 0. && img_uv.y <= 1.;\n    \n    return vec3(img_uv, on_screen? 1. : 0.);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv;\n\n    # if pixelate\n    {\n        uv = round(fragCoord/4.)*4./iResolution.xy;\n    }\n    # else\n    {\n        uv = fragCoord/iResolution.xy;\n    }\n    # endif\n    vec3 ruv = ar_reproject(uv, 0);\n    uv = ruv.xy;\n    \n    vec4 sampledTexture = texture(iChannel0, uv);\n    \n    float xmod = mod(fragCoord.x, 4.);\n    if (xmod > 1. && mod(fragCoord.y, 4.) > 1. && !(ruv.z < .5))\n    {\n        if (xmod < 2.)\n            fragColor = vec4(sampledTexture.r * 5.333 * brightness, 0., 0., 1.);\n        else if (xmod < 3.)\n            fragColor = vec4(0., sampledTexture.g * 5.333 * brightness, 0., 1.);\n        else\n            fragColor = vec4(0., 0., sampledTexture.b * 5.333 * brightness, 1.);\n    }\n    else\n    {\n        fragColor = vec4(0.);\n    }\n}","name":"Image","description":"","type":"image"}]}