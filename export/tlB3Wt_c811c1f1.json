{"ver":"0.1","info":{"id":"tlB3Wt","date":"1561479211","viewed":492,"name":"Thermo Cube","username":"kasari39","description":"Thermo Cube","likes":24,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","palettes"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"precision highp float;\n\nmat2 rotate(float a) {\n    float c = cos(a), s = sin(a);\n    return mat2(c, s, -s, c);\n}\n\nfloat box(vec3 p, vec3 s) {\n    vec3 d = abs(p) - s;\n    return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\n}\n\nfloat ifsBox(vec3 p) {\n    for (int i=0; i<4; i++) {\n        p = abs(p) - 1.0;\n        float a = 0.05+0.12*sin(1.6*iTime);\n        p.xy *= rotate(a);\n        p.xz *= rotate(a);\n    }\n    vec3 scale = vec3(0.5, 0.5, 0.5);\n\treturn box(p, scale);\n}\n\nconst float pi = acos(-1.0);\n\nfloat map(vec3 p) {\n    p.xy *= rotate(0.12*sin(iTime));\n    p.xz *= rotate(pi*0.5 + 0.16*sin(0.7*iTime));\n    return ifsBox(p);\n}\n\n// Palettes https://www.shadertoy.com/view/ll2GD3 by iq\nvec3 pal( in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d ) {\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 p = (fragCoord.xy * 2.0 - iResolution.xy) / min(iResolution.x, iResolution.y);\n\n\tvec3 cPos = vec3(0, 0, 12);\n    vec3 ray = normalize(vec3(p.xy, -1));\n\n\tfloat depth = 0.0;\n\tfloat d = 0.0;\n\tvec3 pos = vec3(0);\n    vec3 colAcc = vec3(0);\n\tfor (int i=0; i<99; i++) {\n\t\tpos = cPos + ray * depth;\n\t\td = map(pos);\n\t\tif (d < 0.0001 || pos.z > 50.0) break;\n        colAcc += exp(-d*2.0) * pal(length(pos)*0.2, vec3(0.5,0.5,0.5),vec3(0.5,0.2,0.2),vec3(1.0,1.0,1.0),vec3(0.0,0.3,0.4) );\n        // colAcc += exp(-d*2.0) * pal(length(pos)*0.2, vec3(0.5,0.5,0.8),vec3(0.5,0.2,0.2),vec3(1.0,1.0,1.0),vec3(0.0,0.3,0.5) );\n\t\tdepth += d*0.2;\n\t}\n\n\tvec3 col = colAcc * 0.03;\n\tfragColor = vec4(col, 1);\n}","name":"Image","description":"","type":"image"}]}