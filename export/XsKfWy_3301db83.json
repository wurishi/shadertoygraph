{"ver":"0.1","info":{"id":"XsKfWy","date":"1530623984","viewed":193,"name":"Voronoi by example","username":"ThibaultTricard","description":"Click to refresh the sampling","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    //use click to refresh the texture sampling\n\t//when the texture or the resolution change\n    \n    bool showCell = false;\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 color = texture(iChannel0,uv);\n    \n    fragColor= texture(iChannel2, color.xy);\n    \n    if(showCell){\n    vec2 uv1 = (fragCoord + vec2(1.0,0.0))/iResolution.xy;\n    vec4 color1 = texture(iChannel0,uv1);\n    vec2 uv2 = (fragCoord + vec2(-1.0,0.0))/iResolution.xy;\n    vec4 color2 = texture(iChannel0,uv2);\n    vec2 uv3 = (fragCoord + vec2(0.0,1.0))/iResolution.xy;\n    vec4 color3 = texture(iChannel0,uv3);\n    vec2 uv4 = (fragCoord + vec2(0.0,-1.0))/iResolution.xy;\n    vec4 color4 = texture(iChannel0,uv4);\n    \n    if(color1.r != color2.r || color3.g != color4.g)\n        fragColor= vec4(0.0);  \n    }\n    \n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233)) + 30.0) * 43758.5453);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n      \n    \n\tint n = 20;\n    \n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 col = texture(iChannel0,uv);\n    \n    float l = col.r *0.2126f + col.g*0.7152f + col.b*0.722f;\n    col = col / l;\n    int li = int(l*255.0);\n    li = li / (255/n);\n    li = li * (255/n);\n    l = float(li)/255.0f;\n    \n    \n    float r = rand(uv);\n    fragColor = vec4(0.0,0.0,0.0,1.0);\n    if(r > pow(l,1.0/10.0))\n        fragColor = vec4(uv,-1.0,0.0);\n    \n}\n\n","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 color = texture(iChannel0,uv);\n    vec4 color5 = texture(iChannel1,uv);\n    \n    \n    \n    vec2 uv1 = (fragCoord + vec2(1.0,0.0))/iResolution.xy;\n    vec4 color1 = texture(iChannel1,uv1);\n    float d1 = length(color1.xy - uv);\n    vec2 uv2 = (fragCoord + vec2(-1.0,0.0))/iResolution.xy;\n    vec4 color2 = texture(iChannel1,uv2);\n    float d2 = length(color2.xy - uv);\n    vec2 uv3 = (fragCoord + vec2(0.0,1.0))/iResolution.xy;\n    vec4 color3 = texture(iChannel1,uv3);\n    float d3 = length(color3.xy - uv);\n    vec2 uv4 = (fragCoord + vec2(0.0,-1.0))/iResolution.xy;\n    vec4 color4 = texture(iChannel1,uv4);\n    float d4 = length(color4.xy - uv);\n    if(color.b == 0.0){ \n        if(color.x == uv.x && color.y == uv.y){\n        \tfragColor = vec4(color.xy,0,1.0);\n        }else{\n            fragColor = vec4(2.0,2.0,4.0,1.0);\n        }\n    }\n    else{\n    \tfragColor = color5;\n    }\n    \n    if(iMouse.w >0.0 || iFrame < 15){\n    \tfragColor  = color;\n        \n    }\n    \n    if(fragColor.b > d1){\n        fragColor = vec4(color1.xy,d1,1.0);\n    }\n    if(fragColor.b > d2){\n        fragColor = vec4(color2.xy,d2,1.0);\n    }\n    if(fragColor.b > d3){\n        fragColor = vec4(color3.xy,d3,1.0);\n    }\n    if(fragColor.b > d4){\n        fragColor = vec4(color4.xy,d4,1.0);\n    }\n    \n    \n    \n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n\t//use this buffer to select the example texture\n\tvec2 uv = fragCoord/iResolution.xy;\n    vec4 col = texture(iChannel0,uv);\n    fragColor = col;\n}","name":"Buffer C","description":"","type":"buffer"}]}