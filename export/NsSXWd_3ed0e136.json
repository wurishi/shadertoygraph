{"ver":"0.1","info":{"id":"NsSXWd","date":"1621246495","viewed":501,"name":"ShaderShowDown02_Outline","username":"louis_C","description":"Visual made during the Outline's Shadershowdown 2021.","likes":30,"published":1,"flags":40,"usePreview":0,"tags":["livedcoding"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0,fragCoord/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"mat2 rot(float t){ float c =cos(t); float s = sin(t); return mat2(c,-s,s,c);}\nfloat bl(vec2 p , vec2 b){vec2 q =abs(p)-b;\n  return length(max(q,vec2(0.)))+min(0.,max(q.x,q.y));}\n  float l1;\n  float map(vec3 p){\n    p.y += sin(p.z/40.*3.14)*2.;\n    p.xy *= rot(sin(p.z*0.02)*sin(iTime));\n    p.x = abs(p.x);\n    vec3 p2 = p;\n    p.x -= clamp(p.x,-10.,10.);\n    vec3 dn = vec3(10.,8.,8.);\n    p.x += dn.x*0.5;\n    if(p.x<p.y)p.xy=p.yx;\n    if(p.x<p.z)p.xz=p.zx;\n    if(p.y<p.z)p.yz=p.zy;\n    p.xy *= rot(clamp(p.y*0.1,5.,8.));\n    p = mod(p+0.5*dn,dn)-0.5*dn;\n    float d1 = bl(p.zy,vec2(1.));\n    d1 = min(d1, bl(p.xy,vec2(0.5,0.5)));\n    d1 = min(d1, bl(p.xz,vec2(0.5)));\n    float d2 = length(p2.xy-vec2(20.,1.))-2.5;\n    l1 = d2;\n    return min(d2,d1);\n  }\n  vec3 nor(vec3 p){vec2 e = vec2(0.01,0.); return normalize(map(p)-vec3(map(p-e.xyy),map(p-e.yxy),map(p-e.yyx)));}\n  float hs(vec2 p){ return fract(sin(dot(p,vec2(152.,95.)))*7845.236);}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 uc = uv;\n\tuv -= 0.5;\n  uv *=2.;\n\tuv /= vec2(iResolution.y / iResolution.x, 1);\n  vec3 p = vec3 (0.,4.+sin(iTime*3.14)*2.,-iTime*40.);\n  vec3 r = normalize(vec3(uv,1.));\n  r.xz *=  rot(iTime);\n  float dd = 0.;\n  for (int  i =0 ; i < 64 ; i++){\n    float d = map(p);\n    if(d<0.01){break;}\n    p += r*d;\n    dd +=d;\n  }\n  vec3 n = nor(p);\n  float fr = pow(1.-clamp(dot(n,-r),0.,1.),0.8)*0.2;\n  float m = 1.-abs(n.x);\n  float s = smoothstep(150.,0.,dd);\n  float lz = distance(0.5,fract(p.z*0.05+iTime*2.));\n  float lm  = max(smoothstep(0.25,0.2,lz),smoothstep(0.5,0.,lz));\n  float li = (smoothstep(15.,0.,l1)*m+smoothstep(5.,0.,l1))*lm;\n  li += fr;\n  li *= mix(0.8,1.2,hs(uv));\n  li*=s;\n  li = clamp(li,0.,1.2);\n \n  float th = step(0.5,fract(iTime*0.5));\n  float b = sqrt(24.);float c = 0.;\n  float d = pow(length(uv.y),1.5)*0.02+0.0005;\n  for(float i = -0.5*b ; i<=0.5*b ; i +=1.)\n  for(float j = -0.5*b ; j<=0.5*b ; j +=1.){\n    c += texture(iChannel0,uc+vec2(i,j)*d).a;\n  }\n  c/= 24.;\n  vec3 c1 = mix(vec3(1.),3.*abs(1.-2.*fract(c*0.2+mix(0.4,0.9,th)+vec3(0.,-1./3.,1./3.)))-1.,mix(0.5,0.7,th))*c;\n  vec3 c2 = pow(c1,vec3(mix(0.7,1.5,length(uv.y))));\n    fragColor = vec4(c2,li);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"mat2 rot(float t){ float c =cos(t); float s = sin(t); return mat2(c,-s,s,c);}\nfloat rd(float t){ return fract(sin(dot(floor(t),45.67))*7845.236);}\nfloat no(float t){return mix(rd(t), rd(t+1.),smoothstep(0.,1.,fract(t)));}\nfloat it(float t){float r= 0.;float a = 0.5;for(int  i = 0 ; i < 4 ; i++){\nr += no(t/a)*a; a*=0.5;}return r;}\nvec2 mainSound( int samp, float time )\n{\n    float fd = distance(0.5,fract(time*5.));\n    float fi = mix(50.,100.,sin(time)*0.5+0.5); \n    vec2 s1 = vec2(it(pow(fd,0.15)*fi),it(pow(fd,0.05)*fi))*0.1;\n    vec2 s2 = vec2(it(time*40.+sin(time*3.14)*2.),it(time*20.+sin(time*3.14)*2.));\n    s1 *= rot(time);\n    s2 *= rot(time);\n    vec2 th = vec2(it(pow(fract(time),0.05)*60000.),it(pow(fract(time),0.05)*50000.))*0.3;\n    th *= rot(time);\n    return vec2(max(s1+s2*0.6,th));\n}","name":"Sound","description":"","type":"sound"}]}