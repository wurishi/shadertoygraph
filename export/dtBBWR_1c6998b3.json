{"ver":"0.1","info":{"id":"dtBBWR","date":"1693922794","viewed":89,"name":"Glitched","username":"twixuss","description":".","likes":3,"published":1,"flags":0,"usePreview":1,"tags":["procedural","noise","post","random","effect","glitch"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nuint rand(uint x) {\n    const uint k = 3282017729u; // random odd number\n    x *= k; x ^= k;\n    //x *= k; x ^= k;\n    //x *= k; x ^= k;\n    //x *= k; x ^= k;\n    return x;\n}\n\nuint rand(uvec2 x) {\n    return rand(x.x) * (rand(x.y) ^ 0xAAAAAAAAu);\n}\nfloat u2f(uint x) {\n    x >>= 9;\n    x |= 0x3f800000u;\n    return uintBitsToFloat(x) - 1.0;\n}\nfloat frand(float f) {\n    return u2f(rand(uint(f)));\n}\nfloat timedRand(float t, float d) {\n    float r = u2f(rand(uint(t)));\n    if (d < 0.5)\n        r = r * d * 2.;\n    else\n        r = mix(r, 1., d*2.-1.); \n    return float(fract(t) > r);\n}\nfloat blockRand(vec2 uv, int octaves, float time) {\n    float r = 0.0;\n    float d = 0.0;\n    float s = 1.0;\n    for (int i = 0; i < octaves; ++i) {\n        r += u2f(rand(uvec2(uv / s) * uint(floor(time)))) * s;\n        d += s;\n        s *= 0.5;\n    }\n    \n    return r / d;\n}\nfloat pow2(float x) { return x*x; }\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 cuv = uv;\n    cuv.x *= iResolution.x / iResolution.y;\n\n    float x = u2f(rand(uvec2(fragCoord * float(iFrame))));\n\n    float k = x*2.-1.;\n    k *= k;k *= k;k *= k;\n\n    float t = iTime + sin(iTime);\n    \n    float mt = t * 0.345f;\n    float m = blockRand(cuv, 4, mt) * pow(1.-fract(mt), 8.);\n      \n    vec4 tex = mix(textureLod(iChannel0, uv - vec2(floor(m*4.)/4.*0.025,0), m*6.), vec4(x), pow2(k*(0.5 + sin(t) * 0.5)));\n\n    float gr = blockRand(cuv / vec2(16,1) + iTime * 8., 8, iTime);\n    vec4 glitch1 = vec4(fract(sin(gr*123.456)), fract(sin(gr*234.567)), fract(sin(gr*345.678)), 1);\n    \n    gr = mix(gr, blockRand(cuv * vec2(1024,1) + iTime * 8., 8, iTime), 0.01);\n    vec4 glitch2 = vec4(fract(sin(gr*123.456)), fract(sin(gr*234.567)), fract(sin(gr*345.678)), 1);\n    \n    vec4 glitch = sqrt(glitch1*glitch2);\n    \n    float br = blockRand(cuv / vec2(16,1) * 8., 8, t);\n    float mask = float(br > 0.8 + floor(sin(t)*2.)*0.05);\n    \n    float li = fragCoord.y * iResolution.x + fragCoord.x;\n    float lt = fract(li/(iResolution.x*iResolution.y) + iTime);\n    vec4 l = vec4(lt, fract(lt*256.), fract(lt*65536.), 1.);\n        \n    fragColor = mix(tex, mix(mix(tex, tex*l+l, 0.1), tex*x + glitch, mask), timedRand(t*1.414, 0.5));\n}","name":"Image","description":"","type":"image"}]}