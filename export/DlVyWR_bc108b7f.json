{"ver":"0.1","info":{"id":"DlVyWR","date":"1700097644","viewed":30,"name":"voronoi study wangqy 1","username":"wangqiuyan","description":"https://www.youtube.com/watch?v=l-07BXzNdPw&list=PLGmrMu-IwbguU_nY2egTFmlg691DN7uE5&index=21","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["noisestudy"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 N22(vec2 p)\n{\n    vec3 a=fract(p.xyx*vec3(123.34,234.34,345.65));\n    a+=dot(a,a+34.45);\n    return fract(vec2(a.x*a.y,a.y*a.z));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   \n    vec2 uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n\n    float m=0.;\n    float t=iTime;\n    \n    float cellIndex=0.;\n    \n    float maxlen=100.;\n    vec3 col = vec3(0);\n\n    if(false){\n    for(float i=0.;i<50.;i++)\n    {\n        vec2 n=N22(vec2(i));\n        vec2 p=sin(n*t);\n        float d=length(uv-p);\n       \n        \n        if(d<maxlen)\n        {\n            maxlen=d;\n            cellIndex =i;\n        }\n\n       // m+=smoothstep(.05,.03,d);\n    }\n   }\n    else{\n        uv*=3.;\n        vec2 gv=fract(uv)-.5;\n        vec2 id=floor(uv);\n        vec2 cid=vec2(0.);\n        for(float y=-1.; y<=1.;y++){\n            for(float x=-1.; x<=1.;x++){\n                vec2 offs=vec2(x,y);\n                \n                vec2 n=N22(vec2(id+offs));\n                vec2 p=offs+sin(n*t)*.5;\n                p=gv-p;\n                //gv到周围9领域格子里任一点的距离取最小值                \n                float d=length(p);\n                float k=1.99;\n                float sd=pow(pow(p.x,k)+pow(p.y,k),1./k);\n                float md=abs(p.x)+abs(p.y);\n                d=mix(md,d,sin(iTime*1.)*.5+.5);\n                //d=mix(md,d,.9);\n                if(d<maxlen)\n                {\n                    maxlen=d;\n                    cid=id+offs;\n                    //cellIndex =i;\n                }\n            }\n        }\n        col+=maxlen;\n        col.rg*=(cid+3.)/3.;\n        if(gv.x>0.49||gv.y>0.49) col+=1.;\n    }\n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}