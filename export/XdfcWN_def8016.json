{"ver":"0.1","info":{"id":"XdfcWN","date":"1488155633","viewed":263,"name":"HS Talk - MUD","username":"allanlavell","description":"mud","likes":1,"published":1,"flags":2,"usePreview":0,"tags":["mud"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","previewfilepath":"/media/ap/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Created by inigo quilez - iq/2014\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    // sample zbuffer (in linear eye space) at the current shading point\t\n\tfloat zr = 1.0-texture( iChannel0, fragCoord.xy / iResolution.xy ).x;\n\n    // sample neighbor pixels\n\tfloat ao = 0.0;\n\tfor( int i=0; i<8; i++ )\n\t{\n        // get a random 2D offset vector\n        vec2 off = -1.0 + 2.0*texture( iChannel1, (fragCoord.xy + 23.71*float(i))/iChannelResolution[1].xy ).xz;\t\n        // sample the zbuffer at a neightbor pixel (in a 16 pixel radious)        \t\t\n        float z = 1.0-texture( iChannel0, (fragCoord.xy + floor(off*16.0))/iResolution.xy ).x;\n        // accumulate occlusion if difference is less than 0.1 units\t\t\n\t\tao += clamp( (zr-z)/0.1, 0.0, 1.0);\n\t}\n    // average down the occlusion\t\n    ao = clamp( 1.0 - ao/8.0, 0.0, 1.0 );\n\t\n\tvec3 col = vec3(ao);\n\t\n    // uncomment this one out for seeing AO with actual image/zbuffer\t\n\t\n    //(Blend > 0.5) * (1 - (1-Target) * (1-2*(Blend-0.5))) + (Blend <= 0.5) * (Target * (2*Blend))\n    //col *= texture( iChannel0, uv ).xyz;\n    vec3 og = texture(iChannel0, uv).xyz;\n\t\n    vec3 one = vec3(1.);\n    vec3 two = vec3(2.);\n    vec3 point5 = vec3(0.5);\n    col = col.x > 0.5 ? one - (one - og) * (one - two * (col - point5)) : col * two * og;\n    \n    // hard light\n    col.r = col.r > 0.5 ? 1. - (1. - og.r) * (1. - 2. * (col.r - 0.5)) : col.r * 2. * og.r;\n    col.g = col.g > 0.5 ? 1. - (1. - og.g) * (1. - 2. * (col.g - 0.5)) : col.g * 2. * og.g;\n    col.b = col.b > 0.5 ? 1. - (1. - og.b) * (1. - 2. * (col.b - 0.5)) : col.b * 2. * og.b;\n    \n\tfragColor = vec4(col/*mix(col, texture(iChannel0, uv).xyz, 0.75)*/,1.0);\n}","name":"Image","description":"","type":"image"}]}