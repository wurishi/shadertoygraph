{"ver":"0.1","info":{"id":"ll23W3","date":"1433260768","viewed":1461,"name":"Hair idea","username":"TroyOfEarth","description":"a hair idea, most code is directly pasted from iq","likes":24,"published":1,"flags":0,"usePreview":1,"tags":["hair"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGRn","filepath":"/media/a/cd4c518bc6ef165c39d4405b347b51ba40f8d7a065ab0e8d2e4f422cbc1e8a43.jpg","previewfilepath":"/media/ap/cd4c518bc6ef165c39d4405b347b51ba40f8d7a065ab0e8d2e4f422cbc1e8a43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"float curl = 20.0;\n\n\n// Created by inigo quilez - iq/2013\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\nfloat T = 1.;\nfloat hash( float n )\n{\n    return fract(sin(n)*43758.5453);\n}\n\nfloat noise( in vec2 x )\n{\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n    f = f*f*(3.0-2.0*f);\n    float n = p.x + p.y*57.0;\n    return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),\n               mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);\n}\n\nvec2 map( vec2 p, in float offset )\n{\n\n    float a = 0.;\n    float b = 1.57;\n       \n   \tfloat alpha = (-p.y + 1.0) * 0.5;\n   \ta = 3.14159*(0.5 + sin(p.y*curl)*0.167 + sin(iTime)*0.55*min(alpha,0.5));\n    a = mix(b,a,alpha);\n   \n\treturn vec2( cos(a), sin(a) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = fragCoord.xy/1. / iResolution.xy;\n    \n    p.x += sin(iTime-1.2)*0.05;\n    \n\tvec2 uv = -1.0 + 2.0*p;\n\tuv.x *= iResolution.x / iResolution.y;\n\t\t\n    float offset = T+fragCoord.x/iResolution.x;\n    \n\tfloat acc = 0.0;\n\tvec3  col = vec3(0.0);\n\n    float ycut = sin(iTime);\n    vec2 uv2 = uv;\n    \n    vec2 dir;\n    \n\tfor( int i=0; i<32; i++ )\n\t{\n\t\tdir = map( uv, offset );\n\t\t\n\t\tfloat h = float(i)/32.0;\n\t\tfloat w = 4.0*h*(1.0-h);\n\t\t\n\t\tvec3 ttt = w*texture( iChannel0, uv * vec2(1,1.0) ).xyz;\n\t\tttt *= mix( vec3(0.6,0.7,0.7), vec3(1.0,0.95,0.9), 0.5 - 0.5*dot( reflect(vec3(dir,0.0), vec3(1.0,0.0,0.0)).xy, vec2(0.707) ) );\n\t\tcol += w*ttt;\n\t\tacc += w;\n        col *= smoothstep(1.0, 0.0, (-clamp(uv.y,-1.0,-0.8) - 0.8) * 5.0);\n\n        uv2 = uv;\n        uv2.y -= ycut * (uv.x) *0.1;\n        uv2.y -= abs(uv.x)*0.1;\n        \n        if (uv2.x < -0.5 || uv2.x > 0.5 || uv2.y < -0.44)\n        {\n            float f = \thash(floor(uv.x*64.));\n            f +=\t \thash(floor(uv.x*64.) + 1.);\n            f +=\t \thash(floor(uv.x*64.) - 1.);\n            f += \t\thash(floor(uv.x*64.) + 2.)*0.5;\n            f += \t\thash(floor(uv.x*64.) - 2.)*0.5;\n\n            if (uv2.y < -0.7)\n            {\n                acc += smoothstep(0., f*0.25, -(uv2.y - -0.7) / 0.3)*10.0 ;\n            }\n\n            if (abs(uv.x) > 0.5)\n            {\n                acc += smoothstep(0., 1.0, 2.0*clamp(abs(uv.x) - 0.5, 0., 0.4)/0.6) * 10.0;\n            }\n    \t}\n\t\tuv += 0.008*dir;\n    }\n    \n    uv -= 0.008*dir;\n\n    uv.y -= ycut * (uv.x) *0.5;\n\n    if (abs(uv.x) > 0.5)\n    {\n        acc += smoothstep(0., 1.0, 2.0*clamp(abs(uv.x) - 0.5, 0., 0.5)/0.5) * 1000.0;\n    }\n\n    if (uv2.y < -0.50)\n    {\n        float f = \thash(floor(uv.x*64.));\n        f += \t\thash(floor(uv.x*64.) + 1.);\n        f += \t\thash(floor(uv.x*64.) - 1.);\n        f += \t\thash(floor(uv.x*64.) + 2.)*0.5;\n        f += \t\thash(floor(uv.x*64.) - 2.)*0.5;\n        acc += smoothstep(0., pow(clamp(f*0.25,0.0,1.0), 0.5), -(uv2.y - -0.50) / 1.0)*1000.0 ;\n    }    \n    col /= acc;\n    \n\tfloat gg = dot( col, vec3(0.333) );\n\tvec3 nor = normalize( vec3( dFdx(gg), 0.5, dFdy(gg) ) );\n\tcol += vec3(0.4)*dot( nor, vec3(0.7,0.01,0.7) );\n\n\tvec2 di = map( uv, offset );\n\tcol *= 0.65 + 0.35*dot( di, vec2(0.707) );\n\tcol *= 0.20 + 0.80*pow( 4.0*p.x*(1.0-p.x), 0.1 );\n\tcol *= 1.7;\n\n\tfragColor = vec4( col, 1.0 );\n    \n}\n","name":"","description":"","type":"image"}]}