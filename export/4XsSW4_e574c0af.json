{"ver":"0.1","info":{"id":"4XsSW4","date":"1709524599","viewed":101,"name":"Bytebeat-fork-sound","username":"jorge2017a2","description":"Bytebeat-fork-sound\n////https://www.shadertoy.com/view/3dd3DX\n// Bytebeat w/ display\n","likes":6,"published":1,"flags":8,"usePreview":0,"tags":["sound","fork","bytebeat"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//por jorge2017a2\n\n//referencia\n//https://iquilezles.org/articles/distfunctions2d\n///\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n\n#define S(d,b) smoothstep(antialiasing(1.5),0. , d - (b) )\n#define S2(d,b) smoothstep(8.0*antialiasing(1.5),0.,d - (b) )\n\n\n#define PI     3.14159265\n#define TWO_PI 6.28318530\n\n\nvec3 DrawFigDelgado(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S2( distObj-0.001,0.0)); return colOut; }\n\n\nvec3 paredIzqDer(vec2 uv, vec3 col)\n{\n    float t=iTime;\n    float d1=sin(uv.y+t)+uv.x+8.0;\n    float d2=sin(uv.y-t)+uv.x+8.0;\n    d2=16.0-d2;\n    \n    col= DrawFigDelgado(vec3(0.0), col,d1);\n    col= DrawFigDelgado(vec3(0.0), col,d2);\n    \n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec2 uv = -1.0 + 2.0 * fragCoord.xy/iResolution.xy;\n\tuv.x *= iResolution.x/iResolution.y;\n    uv-=vec2(0.0,-0.5);\n    float esc=8.0;\n    uv*=esc;\n    vec2 uv0=uv;\n    vec3 col=vec3(1.0);\n    \n    float t=iTime;\n    float d1=sin(uv.y+t)+uv.x;\n    float d2=sin(uv.y+3.141516*t)+uv.x;\n    d1=abs(d1)-0.1;\n    d2=abs(d2)-0.1;\n    col= DrawFigDelgado(vec3(0.0), col,d1);\n    col= DrawFigDelgado(vec3(0.0), col,d2);\n    col= paredIzqDer(uv,col);\n    \n    col=pow(col,  vec3(0.554545));\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"///modificado por jorge2017a2\n\n////https://www.shadertoy.com/view/3dd3DX\n// Bytebeat w/ display\n//y referencia gaz\n\nconst float vSampleRate = 8000.;\nconst float bass1[4] = float[](3.,3.,4.8,2.);\nconst float bass2[8] = float[](5.,4.,6.,4.,6.,5.,4.,5.);\n\nconst float PI = 3.1415926;\nconst float TAU = 6.28318530;\n#define PIH (PI*.5)\n\n\n//gaz\n#define osc_sin(x)sin((x)*TAU)\n#define osc_saw(x)(1.-fract(x)*2.)\n#define osc_sqr(x)sign(0.5-fract(x))\n#define osc_tri(x)(asin(sin((x)*PI))/PIH)\n\n\nfloat kick(float t)\n{  return clamp(1.5*asin(cos(320.0*t-30.0*exp(-40.0*t))),-1.,1.)*exp(-4.*t);}\n\nfloat kick2(float t)\n{ return clamp(1.5*asin(cos(620.0*t-30.0*exp(-40.0*t))),-1.,1.)*exp(-4.*t); }\n\n\nfloat noize(float t,  float a, float b)\n{\n    float g=fract(cos(t*exp2(a))*exp2(b))+6.0;\n    return exp(-0.08*g*g) *40.0-1.;\n}\n\n\nfloat snare(float t)\n{   float n=noize(t,10.,10.)*exp(-t*10.);\n    float f=t*160.,a=.3*osc_tri(1.2*f)*exp(-t*3.);\n    float b=.05*osc_sin(10.*f+a)*exp(-t*3.);\n    float c=osc_sin(f+b)*exp(-t*15.), z;\n    return n+c;\n}\n\n\nint chaosTheory(int t)\n{\n    float ft = float(t);\n    int w = t>>9;\n    int p = w/32&3; \n    float y=bass2[p]*ft/4.;\n    float s=mod(y*.98,80.)+mod(y,80.);\n \n    return int(clamp(s+112., 0., 255.));\n}\n\nint chaosTheoryB(int t)\n{\n    float ft = float(t);\n    int w = t>>9;\n    int p = w/32&3; \n    float y=bass1[p]*ft/4.;\n    float s=mod(y*.98,80.)+mod(y,80.);\n \n    return int(clamp(s+112., 0., 255.));\n}\n\n\nfloat SoundK(int t, float t2)\n{\n    float y;\n    float t3=mod(t2+abs(sin(t2*2.0+1.0)),1.5);\n    float t4=mod(t2+abs(sin(t2*3.0+1.0)),1.5);\n    y=snare(mod(t2,1.0));\n    y=snare(mod(t4,1.0));\n    y+= kick(mod(t2,1.5));\n    y+=kick2(t3);    \n    return y*0.6;\n}\n\n\nfloat beatF(int t, float t2) \n{\n    int s;\n    if(mod(float(t),8000.0)<4000.0)\n        s = chaosTheory(t);\n    else\n        s=chaosTheoryB(t);\n    return float(s&255)/255.;\n}\n\n\nvec2 mainSound( in int samp, float time ) {\n    float fx;\n    float  s1;\n    s1=.2*(beatF(int(time*vSampleRate), time)*2.-1.);\n    fx=float(s1);\n    \n    fx+=SoundK(int(time*vSampleRate), time)*0.5;\n    \n    return vec2(fx);\n}","name":"Sound","description":"","type":"sound"}]}