{"ver":"0.1","info":{"id":"wlcczS","date":"1609340252","viewed":92,"name":"Celtic Knot-Style Ripples","username":"mherreshoff","description":"Celtic Knot-style ripples.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["ripple","knot","celtic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159\n#define hue(v) ( .6 + .6 * cos( 2.*PI*(v) + vec4(0,-2.*PI/3.,2.*PI/3.,0) ) )\n\nint ring (vec2 U, vec2 center,\n        float speed, float spacing, float bandW, int m) {\n    float x = max(0.0, (iTime*speed)-length(U-center))/spacing;\n    if (abs(fract(x)-0.5) < 0.5*bandW/spacing) {\n        int q = m + (int(floor(x)) % 2 == 1 ? 6 : 0);\n        return q == 0 ? 12 : q;\n    } else {\n        return 0;\n    }\n}\n\nvec4 color(int q) {\n    int x = q%6;\n    vec4 r = hue(float(x)/6.0);\n    if (q > 6) r = mix(r, vec4(1), 0.5);\n    return r;\n}\n\nvoid mainImage( out vec4 O, in vec2 U )\n{\n    vec2 R = iResolution.xy, uv = (2.0*U - R)/R.y;\n    int x = ring(uv, vec2(0.5, 0), 0.1, 0.15, 0.04, 0);\n    int y = ring(uv, vec2(-.25, 0.43), 0.1, 0.15, 0.03, 2);\n    int z = ring(uv, vec2(-.25, -0.43), 0.2, 0.4, 0.025, 4);\n    int numRings = int(x!=0) + int(y!=0) + int(z!=0);\n    \n    if (numRings == 3) {\n        O = vec4(1);\n    } else if (numRings == 2) {\n        int a = (x > y ? (x > z ? x : z) : (y > z ? y : z));\n        int b = (x+y+z) - a; // The one that isn't the max is zero.\n        if ((12+a-b) % 12 < 6) O = color(a);\n        else O = color(b);\n    } else if (numRings == 1) {\n        O = color(x + y + z); // two of them are zero :)\n    } else {\n        O = vec4(0);\n    }\n}","name":"Image","description":"","type":"image"}]}