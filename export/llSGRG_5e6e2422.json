{"ver":"0.1","info":{"id":"llSGRG","date":"1429819326","viewed":3140,"name":"Black Hole (edit)","username":"Harha","description":"My edited version of the amazing shader @ https://www.shadertoy.com/view/XdjXDy by bloodnok\n\nI just quickly made it look as good as I could for my own taste, I dno then.","likes":36,"published":1,"flags":0,"usePreview":0,"tags":["hole","black","edit"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdXGzn","filepath":"/media/a/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","previewfilepath":"/media/ap/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsfGzn","filepath":"/media/a/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","previewfilepath":"/media/ap/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","type":"cubemap","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"// My edit of https://www.shadertoy.com/view/XdjXDy\n// So yeah, thank bloodnok for this brilliant shader, not me\n// The original one just had some visual problems which I corrected\n// Or I should probably say; 'corrected' to fit my own taste\n// So don't praise me, praise bloodnok\n\nconst float pi = 3.1415927;\n\nfloat sdSphere( vec3 p, float s )\n{\n  return length(p)-s;\n}\n\nfloat sdCappedCylinder( vec3 p, vec2 h )\n{\n  vec2 d = abs(vec2(length(p.xz),p.y)) - h;\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0));\n}\n\nfloat sdTorus( vec3 p, vec2 t )\n{\n  vec2 q = vec2(length(p.xz)-t.x,p.y);\n  return length(q)-t.y;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 pp = fragCoord.xy/iResolution.xy;\n\tpp = -1.0 + 2.0*pp;\n\tpp.x *= iResolution.x/iResolution.y;\n\n\tvec3 lookAt = vec3(0.0, -0.1, 0.0);\n    \n    float eyer = 2.0;\n    float eyea = (iMouse.x / iResolution.x) * pi * 2.0;\n    float eyea2 = ((iMouse.y / iResolution.y)-0.24) * pi * 2.0;\n    \n\tvec3 ro = vec3(\n        eyer * cos(eyea) * sin(eyea2),\n       eyer * cos(eyea2),\n        eyer * sin(eyea) * sin(eyea2)); //camera position\n    \n    \n\tvec3 front = normalize(lookAt - ro);\n\tvec3 left = normalize(cross(normalize(vec3(0.0,1,-0.1)), front));\n\tvec3 up = normalize(cross(front, left));\n\tvec3 rd = normalize(front*1.5 + left*pp.x + up*pp.y); // rect vector\n    \n    \n    vec3 bh = vec3(0.0,0.0,0.0);\n    float bhr = 0.1;\n    float bhmass = 5.0;\n   \tbhmass *= 0.001; // premul G\n    \n    vec3 p = ro;\n    vec3 pv = rd;\n    float dt = 0.02;\n    \n    vec3 col = vec3(0.0);\n    \n    float noncaptured = 1.0;\n    \n    vec3 c1 = vec3(0.5,0.46,0.4);\n    vec3 c2 = vec3(1.0,0.8,0.6);\n    \n    \n    for(float t=0.0;t<1.0;t+=0.005)\n    {\n        p += pv * dt * noncaptured;\n        \n        // gravity\n        vec3 bhv = bh - p;\n        float r = dot(bhv,bhv);\n        pv += normalize(bhv) * ((bhmass) / r);\n        \n        noncaptured = smoothstep(0.0, 0.666, sdSphere(p-bh,bhr));\n        \n        // Texture for the accretion disc\n        float dr = length(bhv.xz);\n        float da = atan(bhv.x,bhv.z);\n        vec2 ra = vec2(dr,da * (0.01 + (dr - bhr)*0.002) + 2.0 * pi + iTime*0.005 );\n        ra *= vec2(10.0,20.0);\n        \n        vec3 dcol = mix(c2,c1,pow(length(bhv)-bhr,2.0)) * max(0.0,texture(iChannel1,ra*vec2(0.1,0.5)).r+0.05) * (4.0 / ((0.001+(length(bhv) - bhr)*50.0) ));\n        \n        col += max(vec3(0.0),dcol * smoothstep(0.0, 1.0, -sdTorus( (p * vec3(1.0,25.0,1.0)) - bh, vec2(0.8,0.99))) * noncaptured);\n        \n        //col += dcol * (1.0/dr) * noncaptured * 0.001;\n        \n        // Glow\n        col += vec3(1.0,0.9,0.85) * (1.0/vec3(dot(bhv,bhv))) * 0.0033 * noncaptured;\n        \n    }\n    \n    // BG\n    //col += pow(texture(iChannel0, pv).rgb,vec3(3.0)) * noncaptured;\n    \n    // FInal color\n    fragColor = vec4(col,1.0);\n}","name":"","description":"","type":"image"}]}