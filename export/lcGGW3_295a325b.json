{"ver":"0.1","info":{"id":"lcGGW3","date":"1713425827","viewed":66,"name":"CFA","username":"silvarna","description":"权重vec3 weight = vec3(0.299, 0.587, 0.114);\n得灰度float grey = ( col.r * weight.r + col.g * weight.g + col.b * weight.b);\nfragColor = vec4(grey,grey,grey,1.0);","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["gray","grey"],"hasliked":0,"parentid":"lfS3zy","parentname":"灰度"},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const int RGGB = 1;\nconst int RCCB = 2;\nconst int RCCC = 3;\nconst int Mono = 4;\n\nvec4 CFA(int pattern, vec3 col)\n{\n    //vec3 weight = vec3(0.299, 0.587, 0.114);\n    vec3 weight = vec3(.5, 1, .5);\n    float magic = 1.0;\n    \n    float C = ( col.r * weight.r + col.g * weight.g + col.b * weight.b);\n    float CC = magic * C;\n    switch(pattern)\n    {\n    case RGGB:\n        return vec4(col.rgb, 1.0);\n    case RCCB:\n        return vec4(col.r, CC, col.b, 1.0);\n    case RCCC:\n        return vec4(col.r, CC, CC, 1.0);\n    case Mono:\n        return vec4(CC, CC, CC, 1.0);\n    default:\n        return vec4(col.rgb, 1.0);\n    }\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;    \n    vec3 col = texture(iChannel0, uv).rgb;\n    \n    fragColor = CFA(Mono, col);\n}","name":"Image","description":"","type":"image"}]}