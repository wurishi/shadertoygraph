{"ver":"0.1","info":{"id":"WdlyD4","date":"1584809885","viewed":110,"name":"Yuv color index","username":"JasonLee","description":"Index color on yuv map , why not work?","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["yup","index"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdXGzr","filepath":"/media/a/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg","previewfilepath":"/media/ap/8979352a182bde7c3c651ba2b2f4e0615de819585cc37b7175bcefbca15a6683.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"mat3 yuv2rgb = mat3(\n    1, 0, 1.13983,\n    1, -0.39465, -0.58060,\n    1, 2.03211, 0\n);\n\nmat3 rgb2yuv = mat3(\n    0.299, 0.587, 0.114,\n    -0.14713, -0.28886, 0.436,\n    0.615, -0.51499, -0.10001\n);\n\nfloat dotSqar(vec2 st, vec2 p, float size)\n{\n    vec2 uv = st - vec2(0.5) + vec2(size/2.0);\n    vec2 bl = step(uv-p,vec2(size));\n    vec2 bl2 = vec2(1.0) - step(uv-\tp +vec2(size),vec2(size));\n    bl = bl2 * bl;\n    return bl.x * bl.y;\n}\n\nfloat yuvMap(vec2 uv, vec3 image, float size)\n{\n    vec2 tp = (image * rgb2yuv).yz ;// vec2(0.5);\n    return dotSqar(uv, tp, size);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec3 yuv = vec3(abs(sin(iTime * 0.5)),uv - vec2(0.5));\n    \n    \n    vec3 col = yuv * yuv2rgb;\n    \n    float size = 22.;\n    //col = floor(col * size) / size ;\n    \n    vec3 ct1 = vec3(0.8,0.8,0.0);\n    vec3 ct2 = vec3(0.6,0.0,0.03);\n    vec3 ct3 = vec3(0.0,0.2,0.9);\n    \n    vec2 p1 = (ct1 * rgb2yuv).yz;\n    vec2 p2 = (ct2 * rgb2yuv).yz;\n    vec2 p3 = (ct3 * rgb2yuv).yz;\n    \n    //col += dotSqar(uv, p1, 0.01);\n   // col += dotSqar(uv, p2, 0.01);\n    //col += dotSqar(uv, p3, 0.01);\n    \n    vec3 image = texture(iChannel0, uv).rgb;\n    \n    image = pow(image, vec3(sin(iTime*2.6541),cos(iTime*25.6541),cos(iTime*1.6541)));\n    \n    vec2 st = fragCoord / (yuv.yz + vec2(0.5)) / 1000.;\n    \n    \n    col += yuvMap(st,image,0.1) ;\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}