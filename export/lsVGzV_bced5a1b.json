{"ver":"0.1","info":{"id":"lsVGzV","date":"1455473565","viewed":163,"name":"My love for you is like...","username":"onidaito","description":"Ray marched heart that follows the equation here:\nhttp://archive.section9.co.uk/misc/heart.html","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["raymarch","heart"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n\n// The formula for a heart\n\nfloat heartFormula(vec3 pos){\n  float EPISLON = 0.000001;\n\n  float a = (pos.x * pos.x) + (9.0/4.0 * pos.z * pos.z) + pos.y * pos.y - 1.0;\n  a = a * a * a;\n  float b = pos.x * pos.x * pos.y * pos.y * pos.y;\n  float c = 9.0/80.0 * pos.z * pos.z * pos.y * pos.y * pos.y;\n  float d = a - b - c;\n\n  return d - EPISLON;\n}\n\n// Given an origin and a normalized direction, shoot off a ray and raymarch\n\nfloat castRay(vec3 rayOrigin, vec3 rayDirection ){\n\n  float prevdist = 0.0;\n  for( float t = 0.001; t < 4.0; t += 0.07) {\n\n    vec3 p = rayOrigin + rayDirection * t;\n\n    vec3 translate = vec3(sin(iTime), 0.0, cos(iTime) / 2.5 );\n\n    float dist = heartFormula(p - translate);\n\n    if (dist < 0.0 && prevdist > 0.0){\n      return t;\n    }\n\n    prevdist = dist;\n  }\n  return 100.0;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n\n  // Convert the frag coord into its -1 to 1 representation\n\n  vec2 q = gl_FragCoord.xy / iResolution.xy;\n  vec2 p = -1.0 + 2.0 * q;\n  p.x *= iResolution.x/iResolution.y;\n\n\n  // We assume the screen is at 0 in distance and our camera is behind it\n  float xp = 0.0;\n  float zp = -1.5;\n\n  vec3 camera = vec3(xp,0.0,zp);\n  vec3 screen = vec3(p.x-xp,p.y,-1.1);\n\n  // A quick optimisation to make sure the ray starts at the screen\n\n  vec3 diff = screen - camera;\n  vec3 dir = normalize(diff);\n  float dist = length(diff);\n\n  float val = castRay(camera + dir * dist, dir);\n\n  val = clamp(1.0 - val,0.0,1.0);\n\n  fragColor = vec4( val,0.1,0.1, val );\n   \n}","name":"Image","description":"","type":"image"}]}