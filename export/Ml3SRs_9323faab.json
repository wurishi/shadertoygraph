{"ver":"0.1","info":{"id":"Ml3SRs","date":"1481140354","viewed":1666,"name":"Winter Snow Effect","username":"twitchingace","description":"What can I say? I'm Canadian and it's wintertime.\nI try to do some parallax layers and vaguely Depth of Field type stuff.\n\nInspired by bleedingtiger2's Simple Snow and Blizzard.","likes":15,"published":1,"flags":0,"usePreview":0,"tags":["2d","parallax","effect","snow","weather","blizzard"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// This is probably way too many layers/flakes for full-screen. Play around with them\n#define _NUMSHEETS 10.\n#define _NUMFLAKES 400.\n\nvec2 uv;\n\n// The classic GLSL random function\nfloat rnd(float x)\n{\n    return fract(sin(dot(vec2(x+47.49,38.2467/(x+2.3)), vec2(12.9898, 78.233)))* (43758.5453));\n}\n\n// From https://www.shadertoy.com/view/MscXD7\nfloat drawFlake(vec2 center, float radius)\n{\n    return 1.0 - sqrt(smoothstep(0.0, radius, length(uv - center)));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    uv = fragCoord.xy / iResolution.x;\n    vec3 col = vec3(0.63, .85, .95);\n    for (float i = 1.; i <= _NUMSHEETS; i++){\n        for (float j = 1.; j <= _NUMFLAKES; j++){\n            // We want fewer flakes as they get larger\n            if (j > _NUMFLAKES/i) break;\n            \n            // Later sheets should have, on average, larger and faster flakes\n            // (to emulate parallax scrolling)\n            float size = 0.002 * i * (1. + rnd(j)/2.);            \n            float speed = size * .75 + rnd(i) / 1.5;\n            \n            // The two terms randomize the x pos and spread it out enough that we don't\n            // get weird hard lines where no snow passes.\n            // The last term gives us some side-to-side wobble\n            vec2 center = vec2(0., 0.);\n            center.x = -.3 + rnd(j*i) * 1.4 + 0.1*cos(iTime+sin(j*i));\n            center.y = fract(sin(j) - speed * iTime) / 1.3;\n            \n            // TODO: Add in some kind of z-axis wobble\n            \n            // As the sheets get larger/faster/closer, we fade them more.\n            col += vec3( (1. - i/_NUMSHEETS) * drawFlake(center, size));\n        }\n    }\n\tfragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}