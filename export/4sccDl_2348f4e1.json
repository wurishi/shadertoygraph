{"ver":"0.1","info":{"id":"4sccDl","date":"1520502582","viewed":413,"name":"Embroidery","username":"velorom","description":"Transforms image into embroidery.","likes":6,"published":1,"flags":2,"usePreview":0,"tags":["webcam","embroidery"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Size of cell\nfloat stitching_size = 8.0;\n//Invert embroidery cells\nbool invert = false;\n\nvec4 PostFX(sampler2D tex, vec2 uv)\n{\n    vec4 c = vec4(0.0);\n    float size = stitching_size;\n    vec2 cPos = uv;\n    vec2 tlPos = floor(cPos/size)*size;\n    int remX = int(mod(cPos.x, size));\n    int remY = int(mod(cPos.y, size));\n    if (remX == 0 && remY == 0)\n        tlPos = cPos;\n    vec2 blPos = tlPos;\n    blPos.y += (size - 1.0);\n    if ((remX == remY) || (((int(cPos.x) - int(blPos.x)) == (int(blPos.y) - int(cPos.y)))))\n    {\n        if (invert)\n            c = vec4(0.2, 0.15, 0.05, 1.0);\n        else\n            c = texture(tex, tlPos * vec2(1.0/iResolution.x, 1.0/iResolution.y)) * 1.2;\n    } else {\n        if (invert)\n            c = texture(tex, tlPos * vec2(1.0/iResolution.x, 1.0/iResolution.y)) * 1.2;\n        else\n            c = vec4(0.0, 0.0, 0.0, 1.0);\n    }\n    return c;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    invert = iMouse.z > 0.0f;\n    fragColor = PostFX(iChannel0, fragCoord);\n}","name":"Image","description":"","type":"image"}]}