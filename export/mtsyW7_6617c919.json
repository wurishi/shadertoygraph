{"ver":"0.1","info":{"id":"mtsyW7","date":"1691774471","viewed":46,"name":"#015","username":"jvincent","description":"A field of circle segments that rotate around their boxes to combine into macro-shapes","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["fractal","truchet","rainbow","breathing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define pi 3.14159265359\n#define tpi (2.0*pi)\n#define angle(p) mod(atan(p.x, p.y)/tpi, 1.0)\n#define color(offset) abs(sin(offset + vec3(3, 7, 11) * pi/6.0))\n\nfloat hash21(vec2 i)\n{\n    i = fract(i * vec2(27.526, 61.341));\n    i += dot(i, i + 50.659);\n    return fract(i.x * i.y);\n}\n\nfloat truchet(vec2 uv)\n{\n    vec2 id = vec2(floor(uv));\n    vec2 gv = fract(uv) - 0.5;\n    \n    float n = hash21(id + 0.000001*(iTime));\n    \n    if(n < 0.5) gv.x *= -1.0;\n    \n    vec2 cv = gv - sign(gv.x + gv.y + 0.001) * 0.5;\n    \n    float cd = length(cv) - 0.5;\n    \n    float blur = 0.01;\n    float width = 0.1;\n    \n    float mask = smoothstep(blur, -blur, abs(cd) - width);\n    \n    float checker = mod(id.x + id.y, 2.0) * 2.0 - 1.0;\n    float angle = atan(cv.x, cv.y);\n    float flow = sin(iTime + angle * checker);\n    \n    return mask;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = 5.0*(fragCoord-0.5*iResolution.xy)/iResolution.y;\n    vec3 col = vec3(0.0);\n    \n    float t = 0.25*iTime;\n    mat2 rotate = mat2(cos(t), sin(t), -sin(t), cos(t));\n    \n    col += truchet(uv);\n    \n    col *= color(0.1*(uv.x + uv.y) + iTime);\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}