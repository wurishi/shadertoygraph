{"ver":"0.1","info":{"id":"tdBfWh","date":"1589911503","viewed":227,"name":"ShATI - Vent","username":"Flopine","description":"My former school named ATI decided to launch an everyday challenge from 4th may to 24th may, here is the 16th subject: wind :)","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","blackandwhite","distorsion","wind"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Code by Flopine\n\n// Thanks to wsmind, leon, XT95, lsdlive, lamogui, \n// Coyhot, Alkama,YX, NuSan and slerpy for teaching me\n\n// Thanks LJ for giving me the spark :3\n\n// Thanks to the Cookie Collective, which build a cozy and safe environment for me \n// and other to sprout :)  https://twitter.com/CookieDemoparty\n\n// Shader made for Everyday ATI challenge\n\n#define TAU 6.2831853071\n#define dt mod(iTime,TAU)\n\nmat2 rot (float a)\n{return mat2(cos(a),sin(a),-sin(a),cos(a));}\n\nvoid moda(inout vec2 p, float rep)\n{\n    float per = TAU/rep;\n    float a = mod(atan(p.y,p.x), per)-per*0.5;\n    p = vec2(cos(a),sin(a))*length(p);\n}\n\nvoid mo (inout vec2 p, vec2 d)\n{\n    p = abs(p)-d;\n    if (p.y>p.x) p = p.yx;\n}\n\nfloat cyl (vec3 p, float r, float h) \n{\n    return max(length(p.xy)-r,abs(p.z)-h);\n}\n\nfloat prim1 (vec3 p)\n{\n    float width = 0.05;\n    p.xz *= rot(p.y*8.); \n    mo(p.xz, vec2(0.1)); \n    moda(p.xz, 5.);\n    p.x -= width*2.5;\n    return cyl(p.xzy, width, 6.);\n}\n\nfloat SDF (vec3 p)\n{\n    p.yz *= rot(TAU/4.);\n    p.xz *= rot(sin(p.y*1.5+dt));    \n    mo(p.xz, vec2(.7));\n    moda(p.xz, 6.);\n    p.x -= 0.1+(p.y+3.);\n    return prim1(p);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n\n    vec3 ro = vec3(uv*4.,-20.),\n        rd = vec3(0.,0.,1.),\n        p = ro,\n        col = vec3(0.);\n\n    float shad,d=0.;\n    bool hit = false;\n\n    for (float i=0.; i<64.;i++)\n    {\n        d = SDF(p);\n        if (d<0.01)\n        {\n            hit = true;\n            shad = i/64.;\n            break;\n        }\n        p += d*rd*0.3;\n    }\n\n    if (hit)\n    {\n        col = vec3(smoothstep(0.7,0.8,1.-shad));\n    }\n    // Output to screen\n    fragColor = vec4(sqrt(col),1.0);\n}","name":"Image","description":"","type":"image"}]}