{"ver":"0.1","info":{"id":"NdXcDf","date":"1642782270","viewed":185,"name":"Rainbow curve","username":"beneboe","description":"An experiment with curves","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["curves"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define M_PI     3.14159265358\n#define M_TWO_PI 6.28318530718\n\nconst float speed = 0.5;\n\nfloat curve(vec2 uv, float shift)\n{\n    // Could be constants\n    float amplitude = 0.25;\n    float brightness = 0.6;\n    \n    float y = amplitude*sin(3.141592*(uv.x + shift + speed*iTime));\n    float cy = 0.5*(y+1.0);\n    \n    // Distance between sin curve and y coordinate\n    float ydist = cy-uv.y;\n    // Gradient below curve\n    float e = 1.0-ydist;\n    // Cutoff above curve\n    float f = 1.0-smoothstep(0.0,0.05,-ydist);\n    return brightness * pow(e, 10.0) * f;\n}\n\nvec3 background(vec2 uv)\n{\n    float t1 = iTime;\n    float t2 = iTime-M_PI;\n\n    float g1 = 0.2*sin(speed*(t1+0.0))+0.3;\n    float b1 = 0.2*sin(speed*(t1+1.5))+0.3;\n    \n    float g2 = 0.2*sin(speed*(t2+0.0))+0.3;\n    float b2 = 0.2*sin(speed*(t2+1.5))+0.3;\n    \n    return uv.y * vec3(0.0, g1, b1) + (1.0-uv.y) * vec3(0.0, g2, b2);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n\n    float frequency = 3.0;\n    \n    float a = curve(uv, 0.00);\n    float b = curve(uv, 0.05);\n    float c = curve(uv, 0.10);\n    \n    // Add colors\n    vec3 col = background(uv);\n    col += a * vec3(1.0,0.0,0.0);\n    col += b * vec3(0.0,1.0,0.0);\n    col += c * vec3(0.0,0.0,1.0);\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}