{"ver":"0.1","info":{"id":"wt2yRW","date":"1593878721","viewed":131,"name":"Wavy Boy","username":"metabog","description":"Wavey!\nRe-factored slightly from my original jammy codel by FabriceNeyret","likes":9,"published":1,"flags":32,"usePreview":0,"tags":["raytracing","organic","waving"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor=texture(iChannel0, fragCoord/iResolution.xy); \n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float nrays = 12.;\n\n#define hash(p) ( -1. + 2.*fract(sin( (p) * mat2( 127.1,311.7 , 269.5,183.3) )*43758.5453123) )\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    vec2   R = iResolution.xy,\n       coord = U/R.y;\n    O = .5* texture(iChannel0, U/R);     \n    \n    for(float i = 0.; i < nrays; i++)\n    {\n        vec2 spoint = vec2(0, i/nrays/100. + .5),\n                h = hash(spoint);\n        float ang = 0., len = 1e5, ns_here,\n              inc = clamp(abs(h.x), .5 , 1.);\n       \tvec4 colo = clamp( vec4(h,.3,1) + .5, 0., 1. );\n        bool done = false;\n        for(int j=0; j<50; j++)\n        {\n         \tns_here = texture(iChannel1, spoint*.5 + iTime*.03).x -.5; \n            spoint += .035*inc*vec2(cos(ang),sin(ang));\n            ang += ns_here*.5;\n            len = length(spoint-coord);\n            if (len<.015)\n            {\n                done = true;\n                break;   \n            }\n        }\n        if (len<.015)  O += (1. - len/.015) * 3.0 * colo * clamp(ns_here,.25,1.);  \n        if(done)\n            break;\n    }\n}","name":"Buffer A","description":"","type":"buffer"}]}