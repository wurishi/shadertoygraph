{"ver":"0.1","info":{"id":"XtKfWw","date":"1542761383","viewed":136,"name":"noise distortion trace thing","username":"khlorghaal","description":" ","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["noise","conetrace"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define ETA 1e-5\n\n#define PI 3.14159265359\n#define TAU (PI*2.)\n\n#define time float(iTime)\n\n#define ITERS 32\n\nprecision highp float;\n\nvec3 sumv(vec2 v){ return vec3(dot(v,vec2(1))); }\nvec3 sumv(vec3 v){ return vec3(dot(v,vec3(1))); }\nvec3 sumv(vec4 v){ return vec3(dot(v,vec4(1))); }\nfloat sums(vec2 v){ return dot(v,vec2(1)); }\nfloat sums(vec3 v){ return dot(v,vec3(1)); }\nfloat sums(vec4 v){ return dot(v,vec4(1)); }\n\n#define CA vec4(\\\n    3411.23,\\\n    3415.23,\\\n    3421.34,\\\n    3401.34)\n#define CB vec4(\\\n    5061.11,\\\n    5021.43,\\\n    5043.13,\\\n    5051.13)\nfloat rand4_1(vec4 x){\n    return fract(\n        sin(sin(dot(x,CB))*CA.x)\n    );\n}\n\nvec4 psmooth(vec4 x){\n\treturn x*x*(3.-2.*x);\n    //return x;\n}\n\nfloat noise(vec4 p, vec4 g){\n\t//multiline edit permutations <3\n\t\n\tp/= g;\n\tvec4 fp= floor(p);\n    vec4 d= psmooth(fract(p));\n\tfloat dx= d.x;\n\tfloat dy= d.y;\n\tfloat dz= d.z;\n\tfloat dw= d.w;\n\n\t//count [0-1111]\n\tfloat r_0000= rand4_1(fp+vec4(0,0,0,0));\n\tfloat r_0001= rand4_1(fp+vec4(0,0,0,1));\n\tfloat r_0010= rand4_1(fp+vec4(0,0,1,0));\n\tfloat r_0011= rand4_1(fp+vec4(0,0,1,1));\n\tfloat r_0100= rand4_1(fp+vec4(0,1,0,0));\n\tfloat r_0101= rand4_1(fp+vec4(0,1,0,1));\n\tfloat r_0110= rand4_1(fp+vec4(0,1,1,0));\n\tfloat r_0111= rand4_1(fp+vec4(0,1,1,1));\n\tfloat r_1000= rand4_1(fp+vec4(1,0,0,0));\n\tfloat r_1001= rand4_1(fp+vec4(1,0,0,1));\n\tfloat r_1010= rand4_1(fp+vec4(1,0,1,0));\n\tfloat r_1011= rand4_1(fp+vec4(1,0,1,1));\n\tfloat r_1100= rand4_1(fp+vec4(1,1,0,0));\n\tfloat r_1101= rand4_1(fp+vec4(1,1,0,1));\n\tfloat r_1110= rand4_1(fp+vec4(1,1,1,0));\n\tfloat r_1111= rand4_1(fp+vec4(1,1,1,1));\n\n\t//...0,...1\n\tfloat mw_000 = mix(r_0000, r_0001, dw);\n\tfloat mw_001 = mix(r_0010, r_0011, dw);\n\tfloat mw_010 = mix(r_0100, r_0101, dw);\n\tfloat mw_011 = mix(r_0110, r_0111, dw);\n\tfloat mw_100 = mix(r_1000, r_1001, dw);\n\tfloat mw_101 = mix(r_1010, r_1011, dw);\n\tfloat mw_110 = mix(r_1100, r_1101, dw);\n\tfloat mw_111 = mix(r_1110, r_1111, dw);\n\n\t//..0,..1\n\tfloat mz_00 = mix(mw_000, mw_001, dz);\n\tfloat mz_01 = mix(mw_010, mw_011, dz);\n\tfloat mz_10 = mix(mw_100, mw_101, dz);\n\tfloat mz_11 = mix(mw_110, mw_111, dz);\n\n\t//.0,.1\n\tfloat my_0 = mix(mz_00, mz_01, dy);\n\tfloat my_1 = mix(mz_10, mz_11, dy);\n\n\t//0,1\n\tfloat m = mix(my_0, my_1, dx);\n    \n    return m;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv= fragCoord/iResolution.xy;\n    vec2 uvn= uv*2.-1.;\n    uvn.x*= iResolution.x/iResolution.y;\n    \n    vec2 xy= uvn;\n    float a= 0.;\n    \n    for(int i=1; i!=ITERS+1; i++){\n        float t= float(i)/10.;\n        t= pow(2.,float(i)-1.);\n        vec3 p= vec3(xy,1.)*t;\n        //p.z+= mod(time*.01,10.);\n        p.x+= mod(time*.1,10.);\n        \n        vec3 wind= vec3(\n        \tnoise( vec4(p,time   ),vec4(.2,.1,.1,1.)),\n            noise( vec4(p,time+4.),vec4(.2,.1,.1,1.)),\n            noise( vec4(p,time+8.),vec4(.2,.1,.1,1.))\n        );\n        p+= wind*.2;\n        \n        float f= noise(vec4(p,0.), vec4(vec2(.1)*p.z*p.z, .01, 2.));//xyzt\n        float cut= .9;\n        //n= sin(n*1.)*.5+.5;\n        f= max(0., f-cut)/(1.-cut);\n    \ta+= f*.5;\n    }\n    //a/=float(ITERS);\n    \n    vec3 bgcol=vec3(0.);\n    vec3 sandcol= vec3(.9,.83, .72);\n    vec3 col= mix(bgcol,sandcol, a);\n    \n    fragColor= vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}