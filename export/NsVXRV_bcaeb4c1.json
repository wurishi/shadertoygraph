{"ver":"0.1","info":{"id":"NsVXRV","date":"1634934795","viewed":117,"name":"fork gaziya5-sound","username":"jorge2017a2","description":"//fork gaziya5\n///https://qiita.com/gaziya5/items/e58f8c1fce3f3f227ca7","likes":7,"published":1,"flags":8,"usePreview":0,"tags":["fork","gaziya5"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"///modificado por jorge2017a1\n//fork\n//https://www.glslsandbox.com/e#76070.0\nmat2 rot(float ang)\n{\n\tfloat c = cos(ang);\n\tfloat s = sin(ang);\n\treturn mat2(c,-s,s,c);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n\tvec2 position = 6.* (2.* fragCoord.xy -  iResolution.xy )/ iResolution.x;\n\tfloat k =1.;\n    \n    position*=0.8;\n    \n    float angt=8.41+iTime/5.0;\n    \n\tvec2 a = vec2(cos(angt),sin(angt));\n    \n\tfor(int i =0;i<20;i++){\n\t\t\n\t\t\tposition.x = abs(position.x)+k/2.;\n\t\tposition-=2.*a*min(0.,dot(a,position));\n\t\t\t\tposition=abs(position)-vec2(k);\n\t\t\n        position *= rot(radians(37.45));\n\n\t\tk/=2.;\n\t}\n\t\t\n\tfloat color = exp(-1e5*dot(position,position));\n\n\tfragColor = vec4(vec3(color), 1.0 );\n\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"///modificado por jorge2017a1\n//fork gaziya5\n///https://qiita.com/gaziya5/items/e58f8c1fce3f3f227ca7\n#define A 0.125\n#define PI 3.141592654\n\nfloat noise(float time)\n{\n    return  (fract(sin(time*99.)*50000.0)*2.0-1.0);\n}\n\nfloat kick(float time) \n{\n    return sin(6.283 * 50.0 * time - 10.0 * exp( -70.0 * time ))*exp(-time*1.6); \n}\n\n\n///modificado por jorge fp\nfloat bass(float time) \n{\n    return sin(6.283 * 60.0 * time - 10.0 * exp( -70.0 * time ))*exp(-time*0.56); \n}\n\n\n\nfloat snare(float time) {\n  return noise(time)*max(0.0,1.0-min(0.85,time*4.25)-(time-0.25)*0.3);\n}\n\nfloat hihat(float time) {\n  return noise(time)*exp(-time*150.0);\n}\n\nfloat saw(float phase) \n{\n    float s = 0.0;\n    for (int k = 1; k <= 8; k++) {\n    s += (sin(2.0*PI*float(k)*phase) / float(k));\n    }\n    return (1.0/2.0) - (1.0/PI)*s - 0.5;\n}\n\nfloat sawNota(float time,  float freq )\n{\n    /// Fm\n    return  saw(time*freq) *exp(-3.*time);\n}   \n\n\nfloat sequence(int s,float time)\n{\n  float n =mod(time,A);\n  for(int i=0;i<16;i++){\n    if((s>>(int(time/A)-i)%16&1)==1)break;\n    n+=A;\n  }\n  return n;\n}\n\nvec2 mainSound( in int samp, float time )\n{\n    \n    float t1=mod(time,3.0);\n    float t2=mod(time,6.0);\n    \n    float t1a=mod(time,6.0);\n    float t2a=mod(time,12.0);\n    \n    \n    float s1,s2;\n    \n    if(t1a<t2a)\n    {\n        s1=0.2 * sawNota(sequence(0x1505,time+t1a),440.0);\n        s1+=0.2 * sawNota(sequence(0x8505,time),600.0);\n        s1+=0.2 * sawNota(sequence(0x0225,time),750.0);\n        s1/=2.0;\n    }\n    else\n    {\n        \n        s1+=0.2 * sawNota(sequence(0x3895,time),40.0 );\n        s1+=0.2 * sawNota(sequence(0x5465,time),140.0 );\n        s1/=2.0;\n    }\n    \n    if(t1<t2)\n        s2=0.2 * bass(sequence(0x1505,time));\n    else\n        s2=0.2 * bass(sequence(0x4895,time));\n    \n    return vec2(\n                 s1 + s2+\n                 0.2 * snare(sequence(0x1010,time))+\n                 0.4 * kick(sequence(0x4082,time))+\n                 0.2 * hihat(sequence(0x5555,time))\n                 );\n}","name":"Sound","description":"","type":"sound"}]}