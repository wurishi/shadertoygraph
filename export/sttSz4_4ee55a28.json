{"ver":"0.1","info":{"id":"sttSz4","date":"1638811341","viewed":373,"name":"Chess Set in BW. 430 chars","username":"Artleet","description":"Chess set. The part of some inner jam, final version. There are a board and a complete set of chess.","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","golf","golfing"],"hasliked":0,"parentid":"slVGDV","parentname":"ChessSet3"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//some further compression is possible\n//chess figures are stylized and abstract so do not judge too strict :)\n//Thanks to Fabrice (https://www.shadertoy.com/user/FabriceNeyret2) for all those cool hints in the comments\n//Thanks to Xor (https://www.shadertoy.com/user/Xor) for all crazy tricks in the comments\n//Thanks to iapafoto (https://www.shadertoy.com/user/iapafoto) for his tips\n//Please read comments to appreciate all participants\n\n/**/ //[430] Ipafoto update with Fabrice's integrated loop and some math changing\n\n#define M(a,b) min(abs(a-abs(b)),\nvoid mainImage(out vec4 o, vec2 F)\n{\n    for(float k=2.,s=k,d=k,i=k,y;++i<5e2 && s>.01;) {\n        vec3 f,z,p = vec3(d*F*k/iResolution.x,20)-d;\n        y = p.y += 8.;\n        p.xz*=mat2(cos(iTime/k-vec4(0,11,8,0)));\n        f=floor(p/k);\n        o=vec4(y>.1?p.z>k:int(f+f.z)%2!=0)/k+9./i;\n        d+=s=min( ( min(z=abs(p),8.1)!=z?--o,k:z.z>6.?\n                      z-=k,\n                      M(28.,s=f.x*8.+y+k)\n                      M(6.,s/k)\n                      M(4.,.4-s)\n                      M(s,4.)\n                      -.4+M(y/k,.2)\n                      k)))))\n                      :M(y,1.)y/k-.2)\n                ) + length(vec2(z.z-5.,--p-f*k))-.4, y)/6.;\n        }\n}\n\n\n\n/** //[442] Xor and Ipafoto update\n\n#define M(a,b) min(abs(a-abs(b)),\nvoid mainImage(out vec4 o, vec2 F)\n{\n    float k=2.,s=k,d=k,i=k,y;\n    for(vec3 p,f,z;\n      ++i<5e2 && s>1e-3;\n      p=vec3(0,8,20)-vec3(d-d*F*k/iResolution.x,d),\n      p.xz*=mat2(cos(iTime/k-vec4(0,11,33,0))),\n      f=floor(p/k),\n      y=p.y,\n      o=vec4(y>.1?p.z>k:int(f+f.z)%2!=0)/k+20./i,\n      d+=s=min( ( min(z=abs(p),8.1)!=z?--o,k:z.z>6.?\n                      z-=k,\n                      M(28.,s=f.x*8.+y+k)\n                      M(6.,s/k)\n                      M(4.,.4-s)\n                      M(s,4.)\n                      -.4+M(y/k,.3)\n                      k)))))\n                      :M(y,1.)+y/k-.3)\n                ) + length(vec2(z.z-5.,--p-f*k))-.4, y)/9. \n      );\n}\n\n/** //[450] version from Ipafoto (alternative geometry)\n\n#define M(a,b) min(abs(a-abs(b)),\nvoid mainImage(out vec4 o, vec2 F)\n{\n    float k=2.,s=k,d=k,i=k,y;\n    for(vec3 p,R=iResolution,f,z;\n      ++i<5e2 && s>1e-3;\n      p=d*vec3(F*k-R.xy,R)/R.x+vec3(0,4,-20),\n      p.xz*=mat2(cos(iTime/k-vec4(0,11,33,0))),\n      f=floor(p/k),\n      y=p.y,\n      o=vec4(y>.1?p.z>k:int(f+f.z)%2!=0)/k+20./i,\n      d+=s=min( ( min(z=abs(p),8.1)!=z?--o,k:z.z>6.?\n                      z-=k,\n                      M(28.,s=f.x*8.+y+k)\n                      M(6.,s/k)\n                      M(4.,.4-s)\n                      M(s,4.)\n                      -.4+M(y/k,.3)\n                      k)))))\n                      :M(y,1.)+y/k-.3)\n                ) + length(vec2(z.z-5.,--p-f*k))-.4, y)/9. \n      );\n}\n\n/** //[452] Last version with original angle and geometry:\n\n#define M(a,b) min(abs(a-abs(b)) -.5,\nvoid mainImage(out vec4 o, vec2 F)\n{\n    float k=2.,s=k,d=k,i=k,y;\n    for(vec3 p,R=iResolution,f,z;\n      ++i<5e2 && s>1e-3;\n      p=vec3(0,4,20)-d*vec3(R.xy-F*k,R)/R.x,\n      p.xz*=mat2(cos(iTime/k+vec4(0,11,33,0))),\n      f=floor(p/k),\n      y=p.y,\n      o=vec4(y>.1?p.z>k:int(f+f.z)%2!=0)/k+20./i,\n      d+=s=min( ( min(z=abs(p),8.1)!=z?--o,k:z.z>6.?\n                      z-=k,\n                      M(28.,s=f.x*8.+y+k)\n                      M(6.,s/k)\n                      M(4.,.5-s)\n                      M(s,4.)\n                      -.5+M(y/k,.2)\n                      k)))))*.8\n                      :M(y,1.)+y/k-.7)\n                ) + length(vec2(z.z-5.,--p-f*k)), y)/9. \n      );\n}\n\n\n/** //[514] Original:\n\n#define M(a,b) max(h-abs(a-abs(b))+0.\nvoid mainImage(out vec4 o, vec2 F)\n{\n    float c,s,d,i,e=.5,h=e,y,z,t=iTime*h,u=cos(t),v=sin(t);\n    for(vec3 p,R=iResolution,f;\n      ++i<5e2&&e>1e-3;\n      p=d*normalize(vec3(F/h-R.xy,R))+vec3(v,5,-20),p.xz*=mat2(u,v,-v,u),\n      f=floor(p*h),\n      y=p.y,z=abs(p.z),\n      c=y>.01?p.z>h?h:0.:mod(dot(vec2(1),f.xz),2.)*h,\n      s=abs(p.x)>8.1||y>4.||z>8.1?c=-2.:z>6.?\n          M(y*h,.2)+h,\n          M(14.,s=f.x*4.+y),\n          M(3.,s*h),\n          M(2.,h-s),\n          M(s,2.)*(z-=7.),\n          -h)))))*.8\n          :M(y,1.)*(z-=5.),.7-y*h),\n        d+=e=min(y,length(vec2(p.x-=f.x/h+1.,z))-s)*.15\n      );\n    o+=20./i+c;\n}\n\n/**/","name":"Image","description":"","type":"image"}]}