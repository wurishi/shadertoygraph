{"ver":"0.1","info":{"id":"XdXfWj","date":"1498013259","viewed":674,"name":"Magic Marble","username":"duvengar","description":"More fun with fbm and colors.","likes":23,"published":1,"flags":0,"usePreview":0,"tags":["noise","fbm","marble"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//// COLORS ////\n\nconst vec3 ORANGE = vec3(1.0, 0.6, 0.2);\nconst vec3 PINK   = vec3(0.7, 0.1, 0.2); \nconst vec3 BLUE   = vec3(0.4, 0.2, 0.9);\nconst vec3 GREEN  = vec3(0.1, 0.9, 0.4); \nconst vec3 BLACK  = vec3(0.0, 0.0, 0.3);\n\n///// NOISE /////\n\nfloat hash( float n ) {\n    return fract(sin(n)*43758.5453123);   \n}\n\n\nfloat noise( in vec2 x ){\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n    f = f * f * (3.0 - 2.0 * f);\n    float n = p.x + p.y * 57.0;\n    return mix(mix( hash(n + 0.0), hash(n + 1.0), f.x), mix(hash(n + 57.0), hash(n + 58.0), f.x), f.y);\n}\n\n////// FBM ////// \n\nmat2 m = mat2( 0.6, 0.6, -0.6, 0.8);\nfloat fbm(vec2 p){\n \n    float f = 0.0;\n    f += 0.5000 * noise(p); p *= m * 2.02;\n    f += 0.2500 * noise(p); p *= m * 2.03;\n    f += 0.1250 * noise(p); p *= m * 2.01;\n    f += 0.0625 * noise(p);\n    f /= 0.9375;\n    return f;\n}\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    \n    // pixel ratio\n    \n\tvec2 uv = fragCoord.xy / iResolution.xy;   \n    vec2 p = - 1. + 2. * uv;  \n    p.x *= iResolution.x / iResolution.y ;\n    \n    // ZOOM\n    \n    p *= abs(cos(iTime  * 0.17));\n    \n    // domains\n    \n    float r = sqrt(dot(p,p)); \n    float tetha = atan(p.x, p.y)  ;   \n     \n    float alpha = r * 0.2 + atan(dot(0.5, pow(abs(p.x), p.y)), dot(0.5, pow(abs(p.x),p.y))) - (iTime * 0.1); \n    tetha += - (iTime * 0.2);\n                  \n    // distortion\n     \n    alpha +=  1.4 + fbm( 1.7 * p) ;\n   \n  \t\n    // colorize\n    \n    vec3 col = BLACK;\n    \n    float ff = 1.0 - smoothstep( 0.2, 0.5, fbm(vec2( alpha * 20.0 , r * 3.)));        \n    col =  mix( col, ORANGE, ff );\n    \n    ff = smoothstep(0.5, 0.9, fbm(vec2(alpha * 20.0 , r * 3.0)));  \n    col =  mix( col, BLUE, ff); \n    \n    ff = smoothstep(0.4, 0.9, fbm(vec2(alpha * 8.0 , r )));  \n    col =  mix( col, PINK, ff ); \n    \n    ff = smoothstep(0.6, 0.7, fbm(vec2(alpha * 18.0 , r / 2. )));  \n    col =  mix( col, GREEN, ff * 0.6 ); \n    \n    ff = smoothstep(0.3, 0.6, fbm(vec2(alpha * 100.0 , r * 7. )));  \n    col *=  1.8 - ff ; \n    \n    \n    \n    ff = smoothstep(0.9, 0.0, length(p - vec2(0.4,0.4)));  \n    col =  mix( col, vec3(1.), ff * 0.6);\n    \n    ff = smoothstep(0.5, 0.0, length(p - vec2(0.4,0.4)));  \n    col =  mix( col, vec3(1.), ff * 0.6 );\n    \n    ff = smoothstep(0.2, 0.0, length(p - vec2(0.4,0.4)));  \n    col =  mix( col, vec3(1.), ff * 0.3);   \n    \n    ff = smoothstep(0.3, 1.6, fbm(vec2(tetha * 6., 3.)));  \n    col +=  mix( BLACK, col, ff * 0.3);\n    \n    ff = smoothstep(0.3, 1.6, fbm(vec2(tetha * 56., r *10.)));  \n    col +=   ff * 0.2;\n   \n    ff = smoothstep(0.7, 0.99, length(p));  \n    col *=  mix(col, vec3(0.), ff);\n    \n    ff = smoothstep(0.7, 0.9, length(p - vec2(0.4,0.4)));  \n    col *=  mix(col, vec3(0.), ff*0.6  );\n\n    fragColor = vec4(col, 1.);\n}","name":"Image","description":"","type":"image"}]}