{"ver":"0.1","info":{"id":"3t3GDl","date":"1577876385","viewed":274,"name":"Smoke Simulation","username":"typler","description":"Look at name","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["simulation","particles","smoke","physic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    vec4 col = texture(iChannel0, uv);\n    \n    fragColor = col;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec4 prevColor(vec2 coord)\n{\n    return texture(iChannel0, coord);\n}\n\nvec4 relPrev(vec2 source, float x, float y)\n{\n    return prevColor(vec2(source.x + x, source.y + y));\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    vec2 mouseUv;\n    if(iMouse.z > 0.0 && iMouse.w > 0.0) mouseUv = iMouse.xy / iResolution.xy;\n    else mouseUv = vec2(-1.0, -1.0);\n    float uvX = 1.0 / iResolution.x;\n    float uvY = 1.0 / iResolution.y;\n    vec4 prev = prevColor(uv);\n    vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n    float dis = sqrt((mouseUv.x - uv.x)*(mouseUv.x - uv.x) + (mouseUv.y - uv.y)*(mouseUv.y - uv.y));\n    \n    if(dis < 0.025)\n    {\n        fragColor = prev + 0.1;\n    }\n    else\n    {\n        vec4 lCol = relPrev(uv, -uvX, 0.0);\n        vec4 rCol = relPrev(uv, uvX, 0.0);\n        vec4 tCol = relPrev(uv, 0.0, uvY);\n        vec4 dCol = relPrev(uv, 0.0, -uvY);\n        \n        float factor = 10.07 * 0.016 * (lCol.r + rCol.r + tCol.r * 1.5  + dCol.r * 2.7  - (4.0 * color.r));\n\n        color.rgb +=factor;\n        fragColor = color;\n    }\n}","name":"Buffer A","description":"","type":"buffer"}]}