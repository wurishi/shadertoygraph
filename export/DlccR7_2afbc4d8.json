{"ver":"0.1","info":{"id":"DlccR7","date":"1698979586","viewed":296,"name":"Light spirals","username":"felipetovarhenao","description":"Light spirals","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["light","spirals"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\nAuthor: Felipe Tovar-Henao [www.felipe-tovar-henao.com]\nTitle: Light spirals\n*/\n\n\n#define PI 3.14159265359\n#define TWO_PI 6.28318530718\n#define NUM_ITER 15.\n\nvec2 adjustViewport(in vec2 uv,in vec2 r){\n\treturn(uv*2.-r)/(r.x<r.y?r.x:r.y);\n}\n\nfloat rand(in float x,in int s){\n    return fract(sin(x+float(s))*43758.5453123);\n}\n\nfloat rand(in float x){\n    return rand(x,0);\n}\n\nfloat rand(in vec2 uv,in int seed){\n    return fract(sin(dot(uv.xy,vec2(12.9898,78.233))+float(seed))*43758.5453123);\n}\n\nfloat rand(in vec2 uv){\n    return rand(uv,0);\n}\n\nfloat noise(in float x,in int s){\n    float xi=floor(x);\n    float xf=fract(x);\n    return mix(rand(xi,s),rand(xi+1.,s),smoothstep(0.,1.,xf));\n}\n\nfloat noise(in float x){\n    return noise(x,0);\n}\n\nfloat noise(in vec2 p,in int s){\n    vec2 pi=floor(p);\n    vec2 pf=fract(p);\n    \n    float bl=rand(pi,s);\n    float br=rand(pi+vec2(1.,0.),s);\n    float tl=rand(pi+vec2(0.,1.),s);\n    float tr=rand(pi+vec2(1.),s);\n    \n    vec2 w=smoothstep(vec2(0.),vec2(1.),pf);\n    \n    float t=mix(tl,tr,w.x);\n    float b=mix(bl,br,w.x);\n    \n    return mix(b,t,w.y);\n}\n\nfloat noise(in vec2 p){\n    return noise(p,0);\n}\n\nfloat scale(in float x,in float a,in float b,in float c,in float d){\n\treturn(x-a)/(b-a)*(d-c)+c;\n}\n\nvec3 gradient(in float t,in vec3 a,in vec3 b,in vec3 c,in vec3 d){\n\treturn a+b*cos(TWO_PI*(c*t+d));\n}\n\nconst vec3 c1=vec3(.5);\nconst vec3 c2=vec3(.5);\nconst vec3 c3=vec3(.1);\nconst vec3 c4=vec3(.6,.7,.8);\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n\tvec2 uv=adjustViewport(fragCoord.xy,iResolution.xy);\n\tfloat t=iTime*.5;\n\tfloat mag=length(uv);\n\tuv*=.5;\n\tuv.y-=t*.1+100.;\n\tfloat d=0.;\n\tvec3 col=vec3(0.);\n\tfor(float i=0.;i<NUM_ITER;i++){\n\t\tfloat h=i+1.;\n\t\tfloat ph=t+noise(uv.y);\n\t\tfloat amp=pow(1.333,i);\n\t\tfloat fq=uv.y*TWO_PI*h;\n\t\tfloat sig=sin(fq+ph*h)*(.333/amp);\n\t\td=uv.x+sig;\n\t\td=abs(d);\n\t\tfloat gap=cos(fq*.4+t);\n\t\tfloat a=abs(gap);\n\t\ta=pow(a,5.);\n\t\td+=a;\n\t\tfloat lum=scale(sin(ph*h),-1.,1.,.003,.007)*(NUM_ITER*.25/h);\n\t\td=lum/abs(d);\n\t\tcol+=d*gradient(h+t,c1,c2,c3,c4);\n\t}\n\tcol+=mag*.125;\n\t\n\tfragColor=vec4(col,1.);\n}","name":"Image","description":"","type":"image"}]}