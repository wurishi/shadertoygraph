{"ver":"0.1","info":{"id":"Wsd3RM","date":"1568086705","viewed":667,"name":"simple line drawing ","username":"zzggbb","description":"click and drag the mouse to draw lines. everything is erased when you stop dragging.","likes":1,"published":3,"flags":32,"usePreview":0,"tags":["drawing","stateful"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 col = texelFetch(REGIONS, ivec2(fragCoord.xy), 0);\n    fragColor = vec4(col);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define REGIONS iChannel0\n#define STATE iChannel1\n\nfloat sdLine(vec2 p, vec2 a, vec2 b) {\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    bool mouse_down = int(iMouse.z) > 0 && int(iMouse.w) > 0;\n    \n    float shade;\n    vec2 p = vec2(fragCoord.xy);\n    \n    if (mouse_down) {\n        vec2 mouse_p = vec2(texelFetch(STATE, ivec2(0,0), 0).xy);\n        vec2 mouse_n = vec2(texelFetch(STATE, ivec2(1,0), 0).xy);\n        float r = length(mouse_p - mouse_n);\n        \n        if (sdLine(p, mouse_n, mouse_p) < 1.0) {\n        \tshade = 1.0;\n        } else {\n        \tshade = texelFetch(REGIONS, ivec2(fragCoord.xy), 0).x;\n        }\n    } else {\n    \tshade = 0.0;\n    }\n    \n    fragColor = vec4(vec3(shade), 1.0);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage(out vec4 fragColor, in vec2 fragCoord ) {\n    if (ivec2(fragCoord) == ivec2(0,0))\n    \t\tfragColor = texelFetch(STATE, ivec2(1, 0), 0);\n        \n    if (ivec2(fragCoord.xy) == ivec2(1, 0))\n        \tfragColor = vec4(ivec2(iMouse.xy), 0, 0);\n    \n}","name":"Buffer B","description":"","type":"buffer"}]}