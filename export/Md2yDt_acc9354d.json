{"ver":"0.1","info":{"id":"Md2yDt","date":"1494496582","viewed":167,"name":"Dots image","username":"Loeizd","description":"dots based on lightness\ndidn't manage to remove the lightness form to colors (maybe using HSV?)\n+ need to have dot size matching luminosity.","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["dot"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n// check floor for right luminosity, maybe exp the luma)\n\nvec4 toYCbCr(vec4 rgb)\n{\n    rgb = rgb * 255.;\n    float r = rgb.r;\n    float g = rgb.g;\n    float b = rgb.b;  \n\treturn vec4(0.299*r+0.587*g+0.114*b,\n               128.-0.168736*r-0.331264*g+0.5*b,\n               128.+0.5*r-0.418688*g-0.081312*b,\n               1.);\n}\n    \n\nvec4 toRGB(vec4 ybr)\n{\n    float y = ybr.x;\n    float b = ybr.y;\n    float r = ybr.z;  \n\treturn vec4(y+1.402*(r-128.),\n               y-0.344136*(b-128.)-0.714136*(r-128.),\n               y+1.772*(b-128.),\n               1.)\n        \t\t/255.;\n}\n\nfloat desaturate(vec4 tex, vec2 uv)\n{\n \tvec3 col = texture(iChannel0, uv).xyz;\n\treturn dot(col, vec3(0.3,0.6,0.1));   \n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    \n     \n    float tiles = 40.;   \n    \n    vec2 uvsample = floor(uv*tiles)/tiles;\n    \n    float london;// = desaturate(texture(iChannel0, uvsample),uv); //deaturate\n    london = toRGB(toYCbCr(texture(iChannel0, uvsample))).x;//Y from YCbCr\n\n    uv = fract(uv*tiles);///tiles;\n    \n    vec4 justcolor = toRGB(vec4(toYCbCr(vec4(texture(iChannel0, uvsample).xyz,1.)).xyz,1.));\n    \n    \n    float a;\n    vec2 uv2 = uv* 2. - 1.;\n    a = uv2.x*uv2.x+uv2.y*uv2.y;\n    \n    float final = distance(0.5, uv.x)+distance(0.5, uv.y);\n    final = 1.-length(0.5 - uv);\n    final = floor(final+london);\n    \n    \n    \n    \n    \n\tfragColor = vec4(final)*justcolor;//(uv,0.5+0.5*sin(iTime),1.0);\n\t\n    /*\n    // debug just color\n    vec4 tex = texture(iChannel0, uvsample);\n    tex = tex - desaturate(tex, uvsample);\n    //tex = 1.-tex;\n    vec4 ybr = toYCbCr(tex);\n    fragColor = toRGB(ybr);\n*/\n}","name":"Image","description":"","type":"image"}]}