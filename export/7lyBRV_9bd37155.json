{"ver":"0.1","info":{"id":"7lyBRV","date":"1664829298","viewed":311,"name":"MagnetsField","username":"sindrezoth","description":"Three colored magnets moving around. Field show wich magnet will attract object from that started point on the field.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["fractal","patterns","field","glslart"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"precision mediump float;\n\nconst int ITER = 25;\nconst int pnum= 3 ;\n\nvec3 drawpoint(vec2 uv, vec2 pos, float r, vec3 col, vec3 col1) {\n vec3 rescol;\n\n rescol= mix( col, col1, step(distance(uv, pos), r));\n rescol=mix(rescol, vec3(1.), smoothstep(r*.7,r*.04,distance(uv,pos)));\n\n return rescol;\n}\n\nvec3 magnets (vec2 p, vec2 pp[pnum], vec3 pc[pnum]) {\n\n float grcnst = .3;\n vec2 force = vec2(0.);\n vec2 sp = vec2(0.);\n\n  float d[pnum];\n\n for(int i = 0;i<ITER;i++){\n  for(int j=0; j<pnum; j++){\n\n   d[j] = distance(p, pp[j]);\n     force += grcnst*(pp[j]-p)/(d[j]*d[j]);\n\n    }\n\n    p+= force;\n  }\n\n  vec3 result;\n  float dmin = 10000.;\n  int index =0;\n  for(int i =0;i<pnum;i++){\n   if(dmin>d[i]){\n    dmin=d[i];\n     index=i;\n     }\n  }\n\n  result =pc[index];\n\n return result;\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n vec2 uv = fragCoord/iResolution.xy;\n uv *= 2.0;\n uv -= 1.0;\n uv *= iResolution.xy/min(iResolution.x, iResolution.y);\n\n\n  uv *= 1.5;\n  float tpos= (iDate.x + iDate.y + iDate.z + iDate.w)*.1 + 10.;\n  float tcamzoom=(iDate.x + iDate.y + iDate.z + iDate.w)*.1 + 7.47;\n  float tcampos = (iDate.x + iDate.y + iDate.z + iDate.w)*.1 + 7.47;\n  float camzoom=.1+(1.+sin(tcamzoom))*.5;\n  tcampos -= camzoom;\n  uv *= camzoom;\n  uv += camzoom * vec2(sin(tcampos), cos(tcampos));\n\n\n  vec3 col = vec3(0.0);\n\n  vec2 pp[pnum];\n  pp[0] =\n   vec2(0. + sin(tpos * 0.15), .5 + 2.* sin(tpos * .1));\n  pp[1] =\n   vec2(0. + .8* sin(tpos*.8),-.5 - 2.3*sin (tpos*.29));\n  pp[2] =\n   vec2(0.5+ .5 * sin(tpos * 0.39), -.5 + 1.3*sin(tpos * 0.7));\n  //pp[3] = vec2(0.);\n  vec3 pc[pnum];\n  pc[0]= vec3(.3,.2,.4);\n  pc[1]= vec3(.0,.6,.7);\n  pc[2]= vec3(.3,.3,.6);\n  //pc[3]=vec3(.0);\n\n\n  vec3 mg = magnets(uv,pp,pc);\n  col = mg;\n  for(int i=0; i<pnum;i++){\n   col = drawpoint(uv, pp[i], .03, col, pc[i]);\n  }\n fragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}