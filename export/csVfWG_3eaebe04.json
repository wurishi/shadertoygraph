{"ver":"0.1","info":{"id":"csVfWG","date":"1698603905","viewed":34,"name":"around stare shining","username":"chenxianming","description":"shining","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["shining"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define I iResolution\n\nmat2 k( float a )\n{\n\tfloat b = sin( a ), c = cos( a ); return(mat2( c, b, -b, c ) );\n}\n\n\nfloat n( float a )\n{\n\treturn(clamp( a, 0., 1. ) );\n}\n\n\nfloat u( float a, float b, float c )\n{\n\tfloat d = clamp( .5 + .5 * (b - a) / c, 0., 1. ); return(mix( b, a, d ) - c * d * (1. - d) );\n}\n\n\nfloat v( float a, float b, float c )\n{\n\treturn(-u( -a, -b, c ) );\n}\n\n\nfloat r( vec3 a )\n{\n\tfloat b = abs( a.y ) - .3; b = abs( b ); return(max( length( a.xz ) - .5 * b, abs( a.y ) - .3 ) );\n}\n\n\nvec3 s( vec3 a )\n{\n\tfor ( float b = 0.; b < 3.; b++ )\n\t\ta.xy = abs( a.xy ), a.xy *= k( 3.141593 * b / 3. );\n\treturn(a);\n}\n\n\nfloat g( vec3 a )\n{\n\ta.xy *= k( iTime ), a.xz *= k( cos( iTime ) * .22 ); float b = .1; vec3 c = a, d = a; a = s( a ), c.xz *= k( 1.570796 ), c = s( c ), d.yz *= k( 1.570796 ), d = s( d ), b = min( b, r( a ) ), b = v( b, -(length( a ) - .18), .05 ); float e = length( a ) - .8; b += mix( b, a.y / 2. + .5, e ) * .1; return(b);\n}\n\n\nvec3 h( in vec3 b )\n{\n\tvec2 a = vec2( 1, -1 ) * .5773; return(normalize( a.xyy * g( b + a.xyy * 5e-4 ) + a.yyx * g( b + a.yyx * 5e-4 ) + a.yxy * g( b + a.yxy * 5e-4 ) + a.xxx * g( b + a.xxx * 5e-4 ) ) );\n}\n\n\nfloat t( in vec3 f, in vec3 i, in float j, in float o, int p )\n{\n\tfloat b = 1., c = j, e = 1e+10; for ( int l = 0; l < 32; l++ )\n\t{\n\t\tfloat a = g( f + i * c ); if ( p == 0 )\n\t\t\tb = min( b, 10. * a / c );\n\t\telse{ float d = a * a / (2. * e), q = sqrt( a * a - d * d ); b = min( b, 10. * q / max( 0., c - d ) ), e = a; } c += a; if ( b < 1e-4 || c > o )\n\t\t\tbreak;\n\t}\n\tb = clamp( b, 0., 1. ); return(b * b * (3. - 2. * b) );\n}\n\n\nvec3 w( vec3 f )\n{\n\tvec3 i = vec3( 0, 0, -1 ), c, a; float d, b, e; for (; e < 64.; e++ )\n\t\ta = i + f * d, b = g( a ), d += b;\n\tif ( b < 1e-3 )\n\t{\n\t\tfloat j = n( dot( h( a ), vec3( .5, 1, -1 ) ) ); c = vec3( .2 * j ) + reflect( h( a ), normalize( a ) );\n\t}\n\treturn(c);\n}\n\n\nvoid mainImage( out vec4 i, in vec2 j )\n{\n\tvec2 l = (j * 2. - I.xy) / I.y; vec3 b, a, y = vec3( 0, 0, -1 ), o = vec3( l * .5, 1 ); float p; b = vec3( .88, .73, .97 ); float d = 1e+10, e = 0., c = 0.; for ( int q = 0; q < 64; q++ )\n\t\ta = y + o * p, c = g( a ), p += c, d = c < d ? c : d;\n\tif ( c < 1e-3 )\n\t{\n\t\tfloat f = n( dot( h( a ), vec3( .5, 1, -1 ) ) ); b = vec3( .2 * f ) + reflect( h( a ), normalize( a ) ) * pow( f, 2. ); float z = t( a, vec3( .5, 1, -1 ), .1, .5, 0 ) * f; b += z * .5, b += w( reflect( h( a ), o + abs(o) * o.y ) );\n\t}\n    i = vec4( b, 1 );\n}\n\n\n\n","name":"Image","description":"","type":"image"}]}