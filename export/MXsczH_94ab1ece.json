{"ver":"0.1","info":{"id":"MXsczH","date":"1725884746","viewed":83,"name":"marching tetrahedra redirect msg","username":"jt","description":"When experiencing performance issues with [url=https://www.shadertoy.com/view/MXXyz8]marching tetrahedra voxel hybrid[/url], switch from angle to opengl and (unfortunately) use Chrome instead of Firefox. Chrome cfg: [url]chrome://flags/#use-angle[/url].","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["3d","raymarch","voxels","sdf","cubes","marching","tetrahedra","field","dda","hybrid","polygonise","bufferless"],"hasliked":0,"parentid":"MXXyz8","parentname":"marching tetrahedra voxel hybrid"},"renderpass":[{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// https://www.shadertoy.com/view/MXsczH marching tetrahedra redirect msg\n// using https://www.shadertoy.com/view/7lVfRW render string of text\n\n// marching tetrahedra compile-time / performance warning\n\n// When experiencing performance issues with\n// [url=https://www.shadertoy.com/view/MXXyz8]marching tetrahedra voxel hybrid[/url],\n// switch from angle to opengl and (unfortunately) use Chrome instead of Firefox.\n// Chrome cfg: [url] chrome://flags/#use-angle[/url].\n\n// On windows, if you want to try to switch from angle to opengl:\n// Firefox: about:config webgl.disable-angle\n// Chrome: chrome://flags/#use-angle\n\n// The marching tetrahedra shader is unlisted until performance issues can be solved. \n\n\n// Font generator by otaviogood https://github.com/otaviogood/shader_fontgen/blob/master/codepage_gen.html\n// Text rendering originally from https://www.shadertoy.com/view/MsSfzc [SH17C] Anisotropic Filtering by Klems\n// Rewritten for readability & usability.\n// Renders (alpha & border) a string of text given by an array of (ascii-)code into a given rectangle.\n\n// This work is licenced under a CC0 1.0 Universal License\n// https://creativecommons.org/publicdomain/zero/1.0/\n\n// tags: ascii, char, chars, distance, render, string, text\n\n// define letter codes for convenience https://en.wikipedia.org/wiki/ASCII\n// texture index (here ASCII but could change depending on texture)\n#define SPACE 32\n#define EXCLAMATION 33\n#define DOUBLEQUOTES 34\n#define HASH 35\n#define COMMA 44\n#define POINT 46\n#define COLON 58\n\n#define A  65\n#define B  66\n#define C  67\n#define D  68\n#define E  69\n#define F  70\n#define G  71\n#define H  72\n#define I  73\n#define J  74\n#define K  75\n#define L  76\n#define M  77\n#define N  78\n#define O  79\n#define P  80\n#define Q  81\n#define R  82\n#define S  83\n#define T  84\n#define U  85\n#define V  86\n#define W  87\n#define X  88\n#define Y  89\n#define Z  90\n\n#define a  97\n#define b  98\n#define c  99\n#define d 100\n#define e 101\n#define f 102\n#define g 103\n#define h 104\n#define i 105\n#define j 106\n#define k 107\n#define l 108\n#define m 109\n#define n 110\n#define o 111\n#define p 112\n#define q 113\n#define r 114\n#define s 115\n#define t 116\n#define u 117\n#define v 118\n#define w 119\n#define x 120\n#define y 121\n#define z 122\n\n//const int[] string = int[](H,e,l,l,o,COMMA,W,o,r,l,d,EXCLAMATION);\nconst int[] string =\n    int[]\n    (\n        m,a,r,c,h,i,n,g,SPACE,t,e,t,r,a,h,e,d,r,a,SPACE,v,o,x,e,l,SPACE,h,y,b,r,i,d,\n        c,u,r,r,e,n,t,l,y,SPACE,u,n,l,i,s,t,e,d,SPACE,u,n,t,i,l,SPACE,p,r,o,b,l,e,m,\n        w,i,t,h,SPACE,p,e,r,f,o,r,m,a,n,c,e,SPACE,h,a,s,SPACE,b,e,e,n,SPACE,s,o,l,v,e,d,\n        u,n,t,i,l,SPACE,t,h,e,n,SPACE,i,t,SPACE,c,a,n,SPACE,b,e,SPACE,f,o,u,n,d,SPACE,h,e,r,e,POINT\n        //m,a,r,c,h,i,n,g,SPACE,t,e,t,r,a,h,e,d,r,a,SPACE,r,e,d,i,r,e,c,t,COLON,\n        //SPACE,SPACE,\n        //L,O,N,G,SPACE,C,O,M,P,I,L,E,SPACE,T,I,M,E,S,SPACE,A,H,E,A,D,EXCLAMATION,\n        //SPACE,SPACE,\n        //c,o,n,s,i,d,e,r,SPACE,s,w,i,t,c,h,i,n,g, SPACE,t,o,SPACE,O,p,e,n,G,L,SPACE,SPACE,\n        //i,n,s,t,e,a,d,SPACE,o,f,SPACE,a,n,g,l,e,POINT\n    );\n\n// undefine letter codes so one-letter variables can be used again\n#undef SPACE\n#undef EXCLAMATION\n#undef DOUBLEQUOTES\n#undef HASH\n#undef COMMA\n#undef POINT\n\n#undef A\n#undef B\n#undef C\n#undef D\n#undef E\n#undef F\n#undef G\n#undef H\n#undef I\n#undef J\n#undef K\n#undef L\n#undef M\n#undef N\n#undef O\n#undef P\n#undef Q\n#undef R\n#undef S\n#undef T\n#undef U\n#undef V\n#undef W\n#undef X\n#undef Y\n#undef Z\n\n#undef a\n#undef b\n#undef c\n#undef d\n#undef e\n#undef f\n#undef g\n#undef h\n#undef i\n#undef j\n#undef k\n#undef l\n#undef m\n#undef n\n#undef o\n#undef p\n#undef q\n#undef r\n#undef s\n#undef t\n#undef u\n#undef v\n#undef w\n#undef x\n#undef y\n#undef z\n\n//#define WIDTH 29\n#define WIDTH 32\n#define HEIGHT (string.length()/WIDTH)\n\nvec4 text(vec2 pixelpos, vec2 start, vec2 end)\n{\n    pixelpos = (pixelpos - start) / (end - start);\n    pixelpos.x *= float(WIDTH);\n    pixelpos.y *= float(HEIGHT);\n\n    float alias = length(fwidth(pixelpos)) * 0.4; // (I still don't understand fwidth correctly)\n    ivec2 tile = ivec2(floor(pixelpos));\n    tile.y = HEIGHT - 1 - tile.y;\n    vec2 local = fract(pixelpos);\n    local.x = (local.x * 0.5 + 0.25); // skip gaps between chars\n    local.y = (local.y * 0.75 + 0.125); // skip gaps between chars\n    vec3 color = vec3(0);\n    float opacity = 0.0;\n    if(tile.x >= 0 && tile.x < WIDTH && tile.y >= 0 && tile.y < HEIGHT)\n    {\n        int char = string[tile.x + WIDTH * tile.y];\n        int column = char & 0xf;\n        int row = 15 - (char >> 4);\n        float dist = texture(iChannel0, ((vec2(column, row) + local) * 64.0) / 1024.0).w;\n        float border = 0.05; // must be a positive value\n        opacity = smoothstep(+alias,-alias, dist - 0.5 - border);\n        color += smoothstep(+alias,-alias, dist - 0.5);\n    }\n\n    return vec4(color, opacity);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    //vec2 uv = 2.0 * fragCoord.xy / iResolution.xy - 1.0;\n    vec2 uv = fragCoord.xy / iResolution.xy;\n\n    {\n        vec4 string = text(uv, vec2(0.2, 0.4), vec2(0.8, 0.6));\n        fragColor.rgb = mix(vec3(0, 0, 0.5), string.rgb, string.a);\n    }\n\n    fragColor.rgb = pow(fragColor.rgb, vec3(1.0 / 2.2));\n}\n","name":"Image","description":"","type":"image"}]}