{"ver":"0.1","info":{"id":"ddlSDX","date":"1669666779","viewed":222,"name":"Debanding with Mips and Noise","username":"LVutner","description":"You can move the slider with mouse. \nHLSL(Reshade) version can be found here: https://gist.github.com/LVutner/80c51b8ff65fdaa0e031bcac017766dc","likes":7,"published":1,"flags":32,"usePreview":1,"tags":["dither","meme","gpmipmap","deband"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsBSR3","filepath":"/media/a/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","previewfilepath":"/media/ap/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","type":"texture","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float blur_radius = 0.035; //Blur radius, tweak it ;)\n\n//Get some what eye-friendly deband\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n\tfloat mouseCoordx = (iMouse.x == 0.0) ? iResolution.x * 0.5 : iMouse.x;\n\n\tif(abs(fragCoord.x - mouseCoordx) < 1.0)\n    {\n\t\tfragColor.xyz = vec3(0.0);\n        return;\n    }\n    \n    vec2 texcoord = fragCoord / iResolution.xy;\n\n\tvec3 center_color = textureLod(iChannel0, texcoord, 0.0).xyz;\n\n    //Debanding\n    if(fragCoord.x < mouseCoordx)\n    {\n        vec4 blue_noise = texelFetch(iChannel1, ivec2(gl_FragCoord.xy) % 1024, 0);\n\n        vec2 offset = fract(vec2(0.61803398875, 0.38196601125) * float(iFrame % 1024) + blue_noise.xy) - 0.5;\n        vec3 sampled_color = textureLod(iChannel0, blur_radius * offset + texcoord, 3.0).xyz;\n\n        vec3 deviation = sampled_color - center_color;\n        deviation = max(vec3(0.0), sqrt(deviation * deviation));\n\n        bvec3 blend_factor = lessThan(deviation, vec3(0.02945917622));\n\n        center_color = mix(center_color, sampled_color, vec3(blend_factor));\n    }\n\n\tfragColor = vec4(center_color.xyz, 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"//Destroy video quality.\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 texcoord = fragCoord.xy / iResolution.xy;\n\n    vec3 center_color = texture(iChannel0, texcoord).xyz;\n    \n    center_color = floor(center_color * 43.3343365936) * 0.0230763888; //Approx, 6 bits\n\n    fragColor = vec4(center_color, 1.0);\n}","name":"Buffer A","description":"","type":"buffer"}]}