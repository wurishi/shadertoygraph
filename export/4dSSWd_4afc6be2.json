{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"// First shader-toy test: render slice of the mandelbulb-fractal\n// written 2014 by Jakob Thomsen (jakobthomsen@gmx.de)\n\n//#define MaxIter 128\n#define MaxIter 16\nconst vec3 Center = vec3(0.0, 0.0, 0.0);\nconst float Scale = 0.5;\nconst float n = 8.0;\n\nconst vec4 InsideColor = vec4(0,0,0,1);\nconst vec4 OutsideColor1 = vec4(0,0,1,1);\nconst vec4 OutsideColor2 = vec4(0,1,0,1);\n\nvec4 mandelbulb_slice(vec3 Pos)\n{\n    float R;\n    \n    float x = Pos.x / Scale - Center.x;\n    float y = Pos.y / Scale - Center.y;\n    float z = Pos.z / Scale - Center.z;\n\n    int Iter2 = 0;\n    for(int Iter = 0; Iter < MaxIter; ++Iter)\n    {\n        // source of formula: skytopia.com mandelbulb\n        // also see: fractalforums.com\n        float r = sqrt(x * x + y * y + z * z);\n        float theta = atan(sqrt(x * x + y * y), z);\n        float phi = atan(y, x);\n\n        if(r > 2.0)\n        {\n            R = r;\n            Iter2 = Iter;\n            break;\n        }\n\n        float r_pow_n = pow(r, n);\n\n        float newx = x + r_pow_n * sin(theta * n) * cos(phi * n);\n        float newy = y + r_pow_n * sin(theta * n) * sin(phi * n);\n        float newz = z + r_pow_n * cos(theta * n);\n        x = newx;\n        y = newy;\n        z = newz;\n    }\n\n    vec4 OutsideColor = mix(OutsideColor1, OutsideColor2, fract(float(Iter2) * 0.05));\n    vec4 Color = mix(InsideColor, OutsideColor, step(2.0, R));\n\n    return Color;\n}\n\n#define PI 3.1415926\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (fragCoord.xy - iResolution.xy / 2.0) / min(iResolution.x, iResolution.y);\n\n    fragColor = mandelbulb_slice(vec3(uv, 0.5 * sin(2.0 * PI * iTime / 10.0)));\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4dSSWd","date":"1416958622","viewed":167,"name":"mandelbulbslice2d","username":"jt","description":"Render a slice through the mandelbulb fractal","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["fractal","mandelbulb"],"hasliked":0,"parentid":"","parentname":""}}