{"ver":"0.1","info":{"id":"wsXGzf","date":"1547023874","viewed":88,"name":"TracePlane","username":"Sevapp","description":"TracePlane","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["raytracing","plane"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float distToPlane(vec3 rayPos, vec3 rayVec, vec3 planePos, vec3 planeNormal)\n{\n\tfloat  dist = dot(rayPos - planePos, planeNormal) / dot(rayVec, planeNormal);\n\treturn dist;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec4 pixelColor  = vec4(0.0);  \n    vec2 pixelPos    = fragCoord.xy;\n    \n    vec3 camPos = vec3(\n        iResolution.x / 2.0, \n        iResolution.y / 2.0, \n        300.0\n    );\n    \n    vec3 rayVec = normalize(vec3(pixelPos, 0.0) - camPos);\n    \n    vec3 planeNormal = vec3(cos(iTime) / 10.0,  1.0,  0.0);\n    vec3 planePos    = vec3(cos(iTime) * 200.0, iResolution.y - 70.0 + cos(iTime) * 100.0, iTime * 200.0);\n\n    float dist = distToPlane(camPos, rayVec, planePos, planeNormal);\n    if (dist > 1.0)\n    {\n        vec3 point = camPos - planePos + rayVec * dist;\n        //pixelColor = vec4(1.0 - dist * 0.0001);\n        \n        pixelColor = texture(iChannel0, point.xz * 0.003) - dist * 0.0001;\n    }\n\n    fragColor = pixelColor;\n}","name":"Image","description":"","type":"image"}]}