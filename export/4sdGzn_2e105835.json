{"ver":"0.1","info":{"id":"4sdGzn","date":"1447735679","viewed":512,"name":"random superellipse grid","username":"RenoM","description":"superellipse","likes":14,"published":1,"flags":32,"usePreview":0,"tags":["grid","colors","superellipse"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"#define SCALE 33.\n\nfloat isInSuperellipse(vec2 p, vec2 o, float r, float n)\n{\n    float s = pow(abs((p.x - o.x) / r), n) + pow(abs((p.y - o.y) / r), n);\n    return (s <= 1. ? sqrt(1. - s) : .0);\n}\n\nvoid mainImage( out vec4 O, in vec2 U )\n{\n    vec2 R = iResolution.xy,\n         p = U / R.y * SCALE;\n    float d = length(p);\n    //p *= pow(scale / d, 2.);\n    vec2 f = fract(p);\n    p = floor(p);\n    vec4 info = texture(iChannel0, (.5 + p) / R);\n    float s = isInSuperellipse(f, vec2(.5), .5, 4. * info.w);\n\tvec3 c =  info.xyz * s;\n    O = vec4(c/*d/SCALE*/, 1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define SCALE 33.\n\nfloat hash12(vec2 p)\n{\n    return  fract(sin(dot(p.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 hash32(vec2 p)\n{\n\tvec3 p3 = fract(vec3(p.xyx) * vec3(443.8975,397.2973, 491.1871));\n    p3 += dot(p3, p3.yxz+19.19);\n    return fract(vec3((p3.x + p3.y)*p3.z, (p3.x+p3.z)*p3.y, (p3.y+p3.z)*p3.x));\n}\n\nvoid mainImage( out vec4 O, in vec2 U )\n{\n    U = floor(U);\n    vec2 R = iChannelResolution[0].xy;\n    float r = R.x / R.y;\n    if(U.y > SCALE || U.x > ceil(r * SCALE)) discard;\n    O = vec4(hash32(U), hash12(U * ceil(iTime)));\n}","name":"Buf A","description":"","type":"buffer"}]}