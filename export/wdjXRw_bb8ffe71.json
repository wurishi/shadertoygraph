{"ver":"0.1","info":{"id":"wdjXRw","date":"1553282656","viewed":166,"name":"whys and hows of shirley jones 2","username":"elenzil","description":"Displacing texture sample position by rotation based on brightness.\nMore or less.","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["shirley","jones","selfreferential"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4df3zn","filepath":"/media/a/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","previewfilepath":"/media/ap/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n\n\tDisplacing texture sample position by rotation based on brightness.\n    More or less.\n\n*/\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uvo   = fragCoord/iResolution.xy;\n    vec2 uv = uvo;\n\n    const int   num  = 100;\n    const float numf = 1.0 / float(num);\n    \n    float accum = 0.0;\n    for (int n = 0; n < num; ++n) {\n        float step = 0.1;\n        vec2 samp = vec2(0.0);\n        float a = 0.0;\n        a += texture(iChannel0, uv).r;\n        a -= texture(iChannel0, vec2(0.5)).r;\n\n        a *= numf;\n        a *= 1.0 - clamp(length(uv - 0.5) * 2.0, 0.0, 1.0);\n        \n        accum += a;\n        \n        a *= 1.1;\n        \n        uv -= 0.5;\n        uv *= mat2(cos(a), -sin(a), sin(a), cos(a));\n        uv += 0.5;\n\t}\n    \n    vec3  col = texture(iChannel0, uv).xyz;\n    col.b = (col.b - 0.5) + accum + 0.5;\n    \n    // vignette\n    float v   = clamp(length(uvo * 2.0 - 1.0), 0.0, 1.0);\n    v *= v * v;\n    col *= (1.0 - v) * 0.3 + 0.7;\n    \n    fragColor = vec4(col,1.0);\n}\n\n\n","name":"Image","description":"","type":"image"}]}