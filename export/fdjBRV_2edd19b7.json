{"ver":"0.1","info":{"id":"fdjBRV","date":"1646675487","viewed":112,"name":"Sphere fractal","username":"lwswl","description":"Sphere Fractal\nmouse to move","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["fractal","sphere"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float E=0.0001;\n#define rot(x) mat2(cos(x),-sin(x),sin(x),cos(x));\nfloat dist(vec3 p){\n    p.xz*=rot(iMouse.x*0.1);\n    p.yz*=rot(iMouse.y*0.1);\n    \n    float time=iTime+1.0;\n    vec3 o=vec3(1)*0.0;\n    float r=0.5;\n    float d=length(p)-r;\n    float I=0.0;\n    while(I<16.){\n        vec3 on;\n        float rn;\n        float f;\n        vec3 k=vec3(r*1.5,r*sin(time+1.67),r*sin(time));\n        f=length(p+o+k.xyz)-r;if(f<d+E){d=f;on=o+k.xyz;rn=0.5;}\n        f=length(p+o-k.xyz)-r;if(f<d+E){d=f;on=o-k.xyz;rn=0.5;}\n        f=length(p+o+k.yxz)-r;if(f<d+E){d=f;on=o+k.yxz;rn=0.5;}\n        f=length(p+o-k.yxz)-r;if(f<d+E){d=f;on=o-k.yxz;rn=0.5;}\n        f=length(p+o+k.zyx)-r;if(f<d+E){d=f;on=o+k.zyx;rn=0.5;}\n        f=length(p+o-k.zyx)-r;if(f<d+E){d=f;on=o-k.zyx;rn=0.5;}\n        \n        I++;\n        if(o==on)break;\n        o=on;\n        r*=rn;\n    }\n    return d;\n}\nvec3 norm(vec3 p){\n    float f=dist(p);\n    return normalize(vec3(dist(vec3(p.x+0.01,p.yz)),dist(vec3(p.x,p.y+0.01,p.z)),dist(vec3(p.xy,p.z+0.01))));\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec3 o=vec3(0,0,5);\n    vec2 uv=(fragCoord)/iResolution.xy-0.5;\n    uv*=normalize(iResolution.xy);\n    vec3 d=normalize(vec3(uv,-1));\n    fragColor.rgb=vec3(0.7)*d.y;\n    float t=0.01;\n    {\n        float x=1000.0;\n        while(x>E&&t<1000.0){\n            x=dist(o+d*t);\n            t+=x;\n        }\n    }\n    if(t<1000.0){\n        vec3 N=norm(o+d*t);\n        float l=dot(N,vec3(0,1,1));\n        fragColor.rgb*=vec3(0.2,0.3,0.6)*l;\n        fragColor.rgb+=pow(l,5.)*0.2;\n    }\n}","name":"Image","description":"","type":"image"}]}