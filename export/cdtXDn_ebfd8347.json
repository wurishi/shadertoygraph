{"ver":"0.1","info":{"id":"cdtXDn","date":"1679644163","viewed":105,"name":"Alien goo","username":"yolandi","description":"alright","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["simulation","fluid","convolution","2tweets","golf"],"hasliked":0,"parentid":"7t3SDf","parentname":"Simplest detailed fluid"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 r, vec2 u) {\n    r = 1.-A(u).zzzz;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"const float c = 3.; // kernel radius\nconst float self_attraction = 0.1;\nconst float eps = 1e-6;\n\nfloat gaussian(float sigma, vec2 i) {\n    i /= sigma;\n    return exp(-.5 * dot(i,i)) / (6.28 * sigma*sigma);\n}\n\nvoid mainImage(out vec4 r, vec2 u) {\n    r *= 0.;\n    for(vec2 i = vec2(-c); ++i.x < c;) for(i.y = -c; ++i.y < c;) {\n        vec4 T = A(u+i); // prev\n        vec2 v = T.xy;   // velocity\n        float m = T.z;   // mass\n        r += m * gaussian(0.7, i+v) // wtf\n           * vec4(mix(v+self_attraction*i, v, m),1,1);\n    }\n    r.xy /= r.z + eps;\n    \n    if (iMouse.z>0.) {\n        r.z += 2.0/(dot(u - iMouse.xy, u - iMouse.xy) + eps);\n    }\n}\n","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define A(i) texelFetch(iChannel0,ivec2(i),0)","name":"Common","description":"","type":"common"}]}