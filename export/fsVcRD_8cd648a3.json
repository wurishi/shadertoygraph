{"ver":"0.1","info":{"id":"fsVcRD","date":"1674476237","viewed":240,"name":"Mario Water","username":"Nieb","description":"Super Mario Sunshine/Galaxy water effect.","likes":13,"published":1,"flags":0,"usePreview":0,"tags":["water"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sfGRn","filepath":"/media/a/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","previewfilepath":"/media/ap/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsBSR3","filepath":"/media/a/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","previewfilepath":"/media/ap/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//////////////////////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////////////////////\n#define OPTION 0\n\n#define INPUT_MOUSE 0\n\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////////////////////\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 WaterUV;\n    WaterUV.x = fragCoord.x/iResolution.x;\n    WaterUV.y = fragCoord.y/iResolution.y;\n\n    WaterUV.y = tan(WaterUV.y-2.63)-2.0;\n    WaterUV.x = (WaterUV.x-0.5) * (5.0 + WaterUV.y);\n\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////////////////////\n#if OPTION == 0\n    float Scale = 0.001875;\n    float s0 =  6.9*Scale;\n    float s1 = 10.1*Scale;\n    float s2 =  8.5*Scale;\n    float s3 =  7.7*Scale;\n\n    float TimeScale = 0.1875;\n    float t0 =  6.9*iTime*Scale*TimeScale;\n    float t1 = 10.1*iTime*Scale*TimeScale;\n    float t2 =  8.5*iTime*Scale*TimeScale;\n    float t3 =  7.7*iTime*Scale*TimeScale;\n\n    float TexSample0 = texture(iChannel0, vec2( WaterUV.x*s0+t0,  WaterUV.y*s0+t0)).r;\n    float TexSample1 = texture(iChannel0, vec2(-WaterUV.x*s1+t1, -WaterUV.y*s1+t1)).g;\n    float TexSample2 = texture(iChannel0, vec2(-WaterUV.x*s2+t2,  WaterUV.y*s2+t2)).b;\n    float TexSample3 = texture(iChannel0, vec2( WaterUV.x*s3+t3, -WaterUV.y*s3+t3)).a;\n\n    float Water = (TexSample0 + TexSample1 + TexSample2 + TexSample3) * 0.27;\n    Water = Water * Water * Water * Water;\n\n    Water = Water < 0.09 || Water > 0.48 ? Water : 0.0;\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////////////////////\n#elif OPTION == 1\n    float Scale = 0.001875;\n    float s0 =  6.9*Scale;\n    float s1 = 10.1*Scale;\n    float s2 =  8.5*Scale;\n    float s3 =  7.7*Scale;\n\n    float TimeScale = 0.1875;\n    float t0 =  6.9*iTime*Scale*TimeScale;\n    float t1 = 10.1*iTime*Scale*TimeScale;\n    float t2 =  8.5*iTime*Scale*TimeScale;\n    float t3 =  7.7*iTime*Scale*TimeScale;\n\n    float TexSample0 = texture(iChannel0, vec2( WaterUV.x*s0+t0,  WaterUV.y*s0+t0)).r;\n    float TexSample1 = texture(iChannel0, vec2(-WaterUV.x*s1+t1, -WaterUV.y*s1+t1)).g;\n    float TexSample2 = texture(iChannel0, vec2(-WaterUV.x*s2+t2,  WaterUV.y*s2+t2)).b;\n    float TexSample3 = texture(iChannel0, vec2( WaterUV.x*s3+t3, -WaterUV.y*s3+t3)).a;\n\n    float Water = (TexSample0 + TexSample1 + TexSample2 + TexSample3) * 0.2;\n    Water = Water * Water * Water;\n\n    //Water = Water < 0.09 || Water > 0.9 ? Water : 0.0;\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////////////////////\n#elif OPTION == 2\n    float Scale = 0.01;\n    float s0 =  6.9*Scale;\n    float s1 = 10.1*Scale;\n    float s2 =  8.5*Scale;\n    float s3 =  7.7*Scale;\n\n    float TimeScale = 0.1875;\n    float t0 =  6.9*iTime*Scale*TimeScale;\n    float t1 = 10.1*iTime*Scale*TimeScale;\n    float t2 =  8.5*iTime*Scale*TimeScale;\n    float t3 =  7.7*iTime*Scale*TimeScale;\n\n    float TexSample0 = texture(iChannel2, vec2( WaterUV.x*s0+t0,  WaterUV.y*s0+t0)).r;\n    float TexSample1 = texture(iChannel2, vec2(-WaterUV.x*s1+t1, -WaterUV.y*s1+t1)).g;\n    float TexSample2 = texture(iChannel2, vec2(-WaterUV.x*s2+t2,  WaterUV.y*s2+t2)).b;\n    float TexSample3 = texture(iChannel2, vec2( WaterUV.x*s3+t3, -WaterUV.y*s3+t3)).g;\n\n#if INPUT_MOUSE\n    float AAA = iMouse.x/iResolution.x;\n    float BBB = iMouse.y/iResolution.y*2.0+1.0;\n    float Water = (TexSample0 + TexSample1 + TexSample2 + TexSample3) * AAA;\n    Water = pow(Water, BBB);\n#else\n    float Water = (TexSample0 + TexSample1 + TexSample2 + TexSample3) * 0.333;\n    Water = Water * Water * Water;\n#endif\n\n    Water = Water < 0.09 || Water > 0.5 ? Water : 0.0;\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////////////////////\n#elif OPTION == 3\n    float Scale = 0.0025;\n    float s0 =  6.9*Scale;\n    float s1 = 10.1*Scale;\n    float s2 =  8.5*Scale;\n    float s3 =  7.7*Scale;\n\n    float TimeScale = 0.1875;\n    float t0 =  6.9*iTime*Scale*TimeScale;\n    float t1 = 10.1*iTime*Scale*TimeScale;\n    float t2 =  8.5*iTime*Scale*TimeScale;\n    float t3 =  7.7*iTime*Scale*TimeScale;\n\n    float TexSample0 = texture(iChannel0, vec2( WaterUV.x*s0+t0,  WaterUV.y*s0+t0)).r;\n    float TexSample1 = texture(iChannel0, vec2(-WaterUV.x*s1+t1, -WaterUV.y*s1+t1)).g;\n    float TexSample2 = texture(iChannel0, vec2(-WaterUV.x*s2+t2,  WaterUV.y*s2+t2)).b;\n    float TexSample3 = texture(iChannel0, vec2( WaterUV.x*s3+t3, -WaterUV.y*s3+t3)).a;\n\n    float Water = (TexSample0 * TexSample1 * TexSample2 * TexSample3);\n    Water = Water * Water;\n    Water = Water * 1.5;\n    Water = Water + 0.015;\n\n    //Water = Water < 0.09 || Water > 0.9 ? Water : 0.0;\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////////////////////\n#else\n    WaterUV *= 0.01875;\n\n    float TimeA = mod(iTime*2.0, 2.0)*2.0;\n    float TimeB = mod(iTime*2.0, 0.5)*2.0;\n    TimeB = iDerpSmoothStep(TimeB, 1.5);\n\n    float Water = 0.0;\n    if      (TimeA < 1.0) { Water = mix( texture(iChannel0, WaterUV).a, texture(iChannel0, WaterUV).r, TimeB ); }\n    else if (TimeA < 2.0) { Water = mix( texture(iChannel0, WaterUV).r, texture(iChannel0, WaterUV).g, TimeB ); }\n    else if (TimeA < 3.0) { Water = mix( texture(iChannel0, WaterUV).g, texture(iChannel0, WaterUV).b, TimeB ); }\n    else                  { Water = mix( texture(iChannel0, WaterUV).b, texture(iChannel0, WaterUV).a, TimeB ); }\n\n    Water = Water * Water * Water * Water;\n\n    Water = Water < 0.1 || Water > 0.7 ? Water : 0.0;\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////////////////////\n#endif\n\n#if 0\n    vec3 Color = vec3(Water);\n#else\n    vec3 Color = mix(vec3(0.38,0.87,0.95), vec3(0.01,0.38,0.57), fragCoord.y/iResolution.y) + Water;\n#endif\n\n    fragColor = vec4(Color,1.0);\n}\n\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float iDerpSmoothStep(float x, float p) {\n    float y = round(mod(x-0.5, 1.0)) * pow(2.0*x, 1.0/p)*0.5 + round(mod(x, 1.0)) * ( -pow(2.0*(-x)+2.0, 1.0/p)*0.5 + 1.0 );\n    return y;\n}\n","name":"Common","description":"","type":"common"}]}