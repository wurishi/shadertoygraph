{"ver":"0.1","info":{"id":"NdS3WK","date":"1617931037","viewed":455,"name":"Image Morph Bleed Effect","username":"_bm","description":"morphing one image into another only by swapping random pixels every frame\nBuffer A iChannel1 is the source image, it morphs into iChannel3","likes":6,"published":1,"flags":32,"usePreview":0,"tags":["experiment","glitch","morph"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0, fragCoord / iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":3,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsX3Rn","filepath":"/media/a/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","previewfilepath":"/media/ap/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// Max distance of pixel swap, increase to converge faster\n#define DIST 8.0\n\n// Texture coordinate to pixel coordinate\nvec2 p_pos(vec2 texCoord) {\n    return texCoord * iResolution.xy;\n}\n\n// Pixel coordinate to texture coordinate\nvec2 t_pos(vec2 pixCoord) {\n    return pixCoord / iResolution.xy;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 bg = texture(iChannel3, t_pos(fragCoord));\n    vec4 color = texture(iChannel0, t_pos(fragCoord));\n    float amnt = DIST * distance(bg, color);\n    vec2 v1 = (texture(iChannel2, t_pos(fragCoord + iTime * 1.93937174e6)).xy - 0.5) * amnt;\n    vec4 c1 = texture(iChannel0, t_pos(fragCoord + v1));\n    vec2 v2 = (texture(iChannel2, t_pos(fragCoord + iTime * 1.12380517e5)).xy - 0.5) * amnt;\n    vec4 c2 = texture(iChannel0, t_pos(fragCoord + v2));\n    vec2 texp = t_pos(fragCoord);\n    float a = distance(c1, bg);\n    float b = distance(c2, bg);\n    if (a < 0.5 && a < b) {\n        color = mix(c1, color, a * 2.0);\n    } else if (b < 0.5 && b < a) {\n        color = mix(c2, color, b * 2.0);\n    } else {\n        //color = mix(color, bg, 0.01);\n    }\n    \n    // Initial state\n    if (iFrame <= 3) {\n        color = texture(iChannel1, t_pos(fragCoord));\n    }\n    \n    fragColor = color;\n}","name":"Buffer A","description":"","type":"buffer"}]}