{"ver":"0.1","info":{"id":"XldSz7","date":"1478993954","viewed":224,"name":"Vine","username":"gaz","description":"particle","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["particle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0, fragCoord/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"mat2 rotate(float a)\n{\n    float s = sin(a), c = cos(a);\n\treturn mat2(c, s, -s, c);\t\n}\n\nvec3 hsv(float h, float s, float v)\n{\n  return mix(vec3(1.0),clamp((abs(fract(\n    h+vec3(3.0, 2.0, 1.0)/3.0)*6.0-3.0)-1.0), 0.0, 1.0),s)*v;\n}\n\nvec2 bezier(in vec2 a, in vec2 b, in vec2 c, in float t){\n  return mix(mix(a,b,t),mix(b,c,t),t);\n}\n\nfloat hash( vec2 p )\n{\n\tfloat h = dot(p,vec2(127.1,311.7));\n    return -1.0 + 2.0*fract(sin(h)*43758.5453123);\n}\n\nvec2 vine(in vec2 a, in vec2 b, in float t)\n{\n    const int STEP = 30;\n    float theta = (hash(a)-0.5)*0.3;\n    theta += sign(theta)*0.05;    \n    vec2 v = normalize(b-a);\n    float len = length(b-a);\n    len = min(0.2,len);\n    vec2 p;\n    b=a;\n    for (int i = 0; i < STEP; i++)\n    {\n        if (hash(b)>0.9) theta *= -1.0;\n        if(float(i)/float(STEP)>t) break;\n        a = b;\n        p = a + v * len / 2.0;\n        b = a + rotate(theta)*v*len;\n        v = normalize(b-p);\n        len *= 0.9;\n    }\n    return bezier(a,p,b,fract(t*float(STEP)));\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 p = (fragCoord.xy *2.0-iResolution.xy)/iResolution.y;\n    vec3 col=vec3(0);\n    col = texture(iChannel0, fragCoord/iResolution.xy).xyz*0.995; \n    float t;\n    vec2 pos;\n    vec2 o = vec2(0);\n    for (int i = 0; i < 20; i++)\n    {\n        t = iTime + hash(vec2(0.22558, sin(float(i)*0.55688)+2.558))*3.0;\n        t *= 0.3;\n        float r = floor(t);\n    \tt = fract(t);\n        o = vec2(hash(normalize(vec2(float(i)*0.458878,r*358.22))),\n                hash(normalize(vec2(float(i)*0.445578,r*5899.22))));\n        o += sign(o)*0.6;\n    \tpos = vine(o,rotate(radians(360.)*hash(normalize(vec2(sin((float(i)+0.33)*0.445578),sin(r*358.22)))))*vec2(0.2,0),t);\n        col = mix(col, hsv(hash(o), 0.5, 0.6), smoothstep(0.02*(1.1-t), 0.01*(1.1-t), length(p-pos)));\n    }\n\tfragColor = vec4(col, 1.0);\n}","name":"Buf A","description":"","type":"buffer"}]}