{"ver":"0.1","info":{"id":"lfBcRd","date":"1722825069","viewed":42,"name":"church-2d","username":"jorge2017a2","description":"church","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["church"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//por jorge2017a2\n//church-2d\n//--4-ago-2024-\n//referencia\n//https://iquilezles.org/articles/distfunctions2d\n///\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n#define S(d,b) smoothstep(antialiasing(1.5),0. , d - (b) )\n#define S2(d,b) smoothstep(8.0*antialiasing(1.5),0.,d - (b) )\n#define S3(d,b) smoothstep(0.5/antialiasing(0.5),0. , d - (b) )\n\n\n#define opU2(d1, d2) ( d1.x < d2.x ? d1 : d2 )\n\n\n#define PI     3.14159265\n#define TWO_PI 6.28318530\n\n\n//iq\nfloat dot2( in vec2 v ) { return dot(v,v); }\nfloat dot2( in vec3 v ) { return dot(v,v); }\nfloat ndot( in vec2 a, in vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nvec3 c1=vec3(0.996,0.396,0.020);\nvec3 c2=vec3(0.631,0.890,0.976);\nvec3 c3=vec3(0.980,0.996,0.373);\nvec3 c4=vec3(0.890,0.804,0.506);\nvec3 c5=vec3(0.376,0.812,0.016);\nvec3 c6= vec3(0.9397,0.42937,0.97667);\nvec3 c7= vec3(0.53716,0.71948,0.6178);\nvec3 c8= vec3(0.48131,0.76608,0.52897);\nvec3 c9= vec3(0.88087,0.8425,0.70398);\nvec3 c10= vec3(0.78091,0.67732,0.13804);\nvec3 c11= vec3(0.20125,0.16775,0.38857);\nvec3 c12= vec3(0.79225,0.88799,0.92104);\nvec3 c13= vec3(0.68056,0.04861,0.06521);\nvec3 c14= vec3(0.74747,0.04664,0.82484);\nvec3 c15= vec3(0.44765,0.2527,0.77403);\nvec3 c16= vec3(0.8968,0.57733,0.09272);\nvec3 c17= vec3(0.81731,0.06627,0.16021);\nvec3 c18= vec3(0.52114,0.85489,0.81358);\nvec3 c19= vec3(0.36548,0.19906,0.60378);\nvec3 c20= vec3(0.96345,0.97397,0.08332);\nvec3 c21= vec3(0.90937,0.27124,0.08577);\nvec3 c22= vec3(0.21824,0.17827,0.49192);\nvec3 c23= vec3(0.78068,0.89294,0.87267);\nvec3 c24= vec3(0.26625,0.86813,0.39943);\nvec3 c25= vec3(0.77362,0.00762,0.10957);\nvec3 c26= vec3(0.91192,0.5154,0.04387);\nvec3 c27= vec3(0.03063,0.40024,0.15093);\nvec3 c28= vec3(0.22672,0.70559,0.95214);\nvec3 c29= vec3(0.52486,0.0072,0.55834);\n\n\n\nfloat opRep1D( float p, float c )\n\t{ float q = mod(p+0.5*c,c)-0.5*c; return  q ;}    \n\n\nfloat Sdf_I(float distA, float distB)\n\t{ return max(distA, distB);}\nfloat Sdf_U(float distA, float distB)\n\t{ return min(distA, distB);}\nfloat Sdf_D(float distA, float distB)\n\t{ return max(distA, -distB);}\n\n\n\nvec3 DFB(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S3( distObj,0.0));\n  colOut = mix(colOut,vec3(0.0),S3(abs( distObj)-0.005,0.0));\n  return colOut;\n}\n\n\nvec3 DFS(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S( distObj,0.0)); return colOut;\n  return colOut;\n}\n\n///oneshade    \nvec2 Rotate(in vec2 p, in vec2 o, in float r) \n{   float c = cos(r), s = sin(r);\n    return (p - o) * mat2(c, -s, s, c) + o;\n}\n\nfloat sdBox( in vec2 p, in vec2 b )\n{ vec2 d = abs(p)-b;  return length(max(d,0.0)) + min(max(d.x,d.y),0.0);  }\n\n\n\nfloat sdCircle( vec2 p, float r )\n{ return length(p) - r;}\n\nfloat divf(float a, float b)\n{\n    //evita crash por 1/0.0 =Infinito=error, en compilar\n    if(b==0.0)\n    {b=0.00001;}\n    return a/b;\n}\n\n\nfloat sdSegment( in vec2 p, in vec2 a, in vec2 b )\n{  vec2 pa = p-a, ba = b-a;\n    float h = clamp( divf( dot(pa,ba),dot(ba,ba)), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\n\nfloat sdTrapezoid( in vec2 p, in float r1, float r2, float he )\n{\n    vec2 k1 = vec2(r2,he);\n    vec2 k2 = vec2(r2-r1,2.0*he);\n    p.x = abs(p.x);\n    vec2 ca = vec2(p.x-min(p.x,(p.y<0.0)?r1:r2), abs(p.y)-he);\n    vec2 cb = p - k1 + k2*clamp( dot(k1-p,k2)/dot2(k2), 0.0, 1.0 );\n    float s = (cb.x<0.0 && ca.y<0.0) ? -1.0 : 1.0;\n    return s*sqrt( min(dot2(ca),dot2(cb)) );\n}\n\nfloat sdTriangleIsosceles( in vec2 p, in vec2 q )\n{\n    p.x = abs(p.x);\n    vec2 a = p - q*clamp( dot(p,q)/dot(q,q), 0.0, 1.0 );\n    vec2 b = p - q*vec2( clamp( p.x/q.x, 0.0, 1.0 ), 1.0 );\n    float s = -sign( q.y );\n    vec2 d = min( vec2( dot(a,a), s*(p.x*q.y-p.y*q.x) ),\n                  vec2( dot(b,b), s*(p.y-q.y)  ));\n    return -sqrt(d.x)*sign(d.y);\n}\n\n\nvec3 templo(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.5117188,0.4160156);\nmed=vec2(0.06347656,0.2783203);\nfloat d1=sdBox(p-A,med);\n\n\nA=vec2(0.5117188,0.4472656);\nmed=vec2(0.03417969,0.046875);\nfloat d2=sdBox(p-A,med);\n\n\nA=vec2(0.5117188,0.2832031);\nmed=vec2(0.03417969,0.046875);\nfloat d3=sdBox(p-A,med);\n\n\nA=vec2(0.5117188,0.6152344);\nmed=vec2(0.03417969,0.05175781);\nfloat d4=sdBox(p-A,med);\n\n\nA=vec2(0.5136719,0.6289063);\nr1=0.03515625;\nfloat d5=sdCircle(p-A,r1);\n\n\nA=vec2(0.5136719,0.6464844);\nmed=vec2(0.03320313+0.01,0.01855469+0.01);\nfloat d6=sdBox(p-A,med);\n\n\nA=vec2(0.5136719,0.6464844-0.031);\nmed=vec2(0.03320313+0.0012,0.01855469+0.01);\nfloat d6a=sdBox(p-A,med);\n\n\nA=vec2(0.5136719-0.1387/2.0,0.6914063);\nmed=vec2(0.1386719/2.0,0.1640625);\nang=180.000 *PI/180.0;\npr = Rotate(p-A, med/2.0, ang);\nfloat d7=sdTriangleIsosceles(pr,med);\n\nA=vec2(0.5097656,0.8515625);\nB=vec2(0.5117188,0.8984375);\nfloat d8=sdSegment(p,A,B);\n\nA=vec2(0.5,0.8847656);\nB=vec2(0.5195313,0.8828125);\nfloat d9=sdSegment(p,A,B);\n\nfloat d104=Sdf_I(d5,d6);\nfloat d105=d104;\nd105=Sdf_U(d105,d6a);\n\n\ncolout= DFB( c3, colout, d1); //templo\ncolout= DFB( c2, colout, d2); //ventana\ncolout= DFB( c2, colout, d3);//ventana\ncolout= DFB(c2, colout,d105);\ncolout= DFB( c1, colout, d7); //tri\ncolout= DFB( c2, colout, d8); //cruz\ncolout= DFB( c2, colout, d9); //cruz\n    return colout;\n}\n\n\nvec3 base(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.7285156,0.0859375);\nmed=vec2(0.4462891,0.04882813);\nfloat d1=sdBox(p-A,med);\n\nA=vec2(0.24375,0.0703125);\nmed=vec2(0.0673438,0.03320313);\nfloat d2=sdBox(p-A,med);\n\nA=vec2(1.224609,0.0703125);\nmed=vec2(0.05273438,0.03320313);\nfloat d3=sdBox(p-A,med);\n\nA=vec2(0.15625,0.0546875);\nmed=vec2(0.04296875,0.01855469);\nfloat d4=sdBox(p-A,med);\n\nA=vec2(1.21875,0.05473438);\nmed=vec2(0.0664063,0.01855469);\nfloat d5=sdBox(p-A,med);\n\nA=vec2(1.177734,0.0859375);\nmed=vec2(0.03320313,0.01855469);\nfloat d6=sdBox(p-A,med);\n\nfloat d100=Sdf_U(d1,d2);\nd100=Sdf_U(d100,d4);\nd100=Sdf_U(d100,d5);\n\ncolout= DFB( c4, colout, d100);\n\nreturn  colout;\n\n\n}\n\n\nvec3 templo2(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.3476563,0.2675781);\nmed=vec2(0.09765625,0.1660156);\nfloat d1=sdBox(p-A,med);\n\nA=vec2(0.3476563,0.3164063);\nmed=vec2(0.03417969,0.04980469);\nfloat d2=sdBox(p-A,med);\n\nA=vec2(0.3457031,0.2695313);\nB=vec2(0.3457031,0.3613281);\nfloat d3=sdSegment(p,A,B);\n\nA=vec2(0.3574219,0.4775391);\nmed=vec2(0.1083984,0.01757813);\nhe=4.980469E-02;\nfloat d4= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.3945313,0.4804688);\nmed=vec2(0.05078125,0.04980469);\nfloat d5=sdBox(p-A,med);\n\nfloat d100=Sdf_U(d4,d5);\ncolout= DFB( c3, colout, d1); //templo\ncolout= DFB( c5, colout, d2);//ventana\ncolout= DFB( c3, colout, d3); //linea\ncolout= DFB(c1, colout, d100);\nreturn colout;\n}\n\nvec3 templo3(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.7773438,0.2832031);\nmed=vec2(0.1972656,0.1474609);\nfloat d1=sdBox(p-A,med);\n\nA=vec2(0.6445313,0.3144531);\nmed=vec2(0.03515625,0.04882813);\nfloat d2=sdBox(p-A,med);\n\nA=vec2(0.7753906,0.3164063);\nmed=vec2(0.03515625,0.04882813);\nfloat d3=sdBox(p-A,med);\n\nA=vec2(0.9101563,0.3183594);\nmed=vec2(0.03515625,0.04882813);\nfloat d4=sdBox(p-A,med);\n\nA=vec2(0.6464844,0.2714844);\nB=vec2(0.640625,0.3652344);\nfloat d5=sdSegment(p,A,B);\n\nA=vec2(0.7773438,0.2695313);\nB=vec2(0.7773438,0.3652344);\nfloat d6=sdSegment(p,A,B);\n\nA=vec2(0.9101563,0.2734375);\nB=vec2(0.9101563,0.3613281);\nfloat d7=sdSegment(p,A,B);\n\n\nA=vec2(0.7910156,0.5175781);\nmed=vec2(0.1767578,0.02050781);\nhe=8.203125E-02;\nfloat d8= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.6835938,0.5175781);\nmed=vec2(0.1035156,0.08203125);\nfloat d9=sdBox(p-A,med);\n\n\ncolout= DFB( c3, colout, d1); //templo 3\ncolout= DFB(c5, colout, d2); //ventana\ncolout= DFB(c5, colout, d3);//ventana\ncolout= DFB(c5, colout, d4); //ventana\ncolout= DFB( c5, colout, d5); //linea\ncolout= DFB( c6, colout, d6); //linea\ncolout= DFB( c7, colout, d7);//linea\n\nfloat d100=Sdf_U(d8,d9);\ncolout= DFB( c1, colout,d100);\n\nreturn colout;\n\n}\n\nvec3 t_tdo(vec2 p, vec3 colout)\n{\n    colout=templo2(p,colout);\n    colout=templo(p,colout);\n    colout=base(p,colout);\n    \n    colout=templo3(p,colout);\n    \n    return colout;   \n}\n\n\n\n\nvec3 temploB(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(1.123047,0.78125);\nmed=vec2(0.1132813,0.078125);\nfloat d1=sdBox(p-A,med);\n\nA=vec2(1.074219,0.7324219);\nmed=vec2(0.03515625,0.03222656);\nfloat d2=sdBox(p-A,med);\n\nA=vec2(1.070313,0.7050781);\nB=vec2(1.070313,0.7636719);\nfloat d3=sdSegment(p,A,B);\n\nA=vec2(1.074219,0.8125);\nmed=vec2(0.03417969,0.01757813);\nfloat d4=sdBox(p-A,med);\n\nA=vec2(1.173828,0.8125);\nmed=vec2(0.03417969,0.01757813);\nfloat d5=sdBox(p-A,med);\n\nA=vec2(1.074219,0.796875);\nB=vec2(1.074219,0.828125);\nfloat d6=sdSegment(p,A,B);\n\nA=vec2(1.175781,0.7988281);\nB=vec2(1.173828,0.8261719);\nfloat d7=sdSegment(p,A,B);\n\nA=vec2(1.123047,0.8916016);\nmed=vec2(0.1171875,0.05566406);\nhe=3.222656E-02;\nfloat d8= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(1.220703,0.8945313);\nmed=vec2(0.01953125,0.03222656);\nfloat d9=sdBox(p-A,med);\n\nA=vec2(1.273438,0.7324219);\nmed=vec2(0.03222656,0.03222656);\nfloat d10=sdBox(p-A,med);\n\nA=vec2(1.195313,0.7773438);\nmed=vec2(0.1171875,0.05566406);\nhe=1.367188E-02;\nfloat d11= sdTrapezoid(p-A, med.x, med.y, he);\n\nvec3 c1=vec3(0.976,0.004,0.004);\nvec3 c2=vec3(0.231,0.592,0.063);\nvec3 c3=vec3(0.667,0.871,0.957);\nvec3 c4=vec3(0.412,0.188,0.012);\nvec3 c5=vec3(0.380,0.808,0.000);\nvec3 c6= vec3(0.63859,0.25692,0.70713);\nvec3 c7= vec3(0.64003,0.55925,0.64613);\nvec3 c8= vec3(0.95397,0.25779,0.17032);\nvec3 c9= vec3(0.45467,0.23754,0.45761);\nvec3 c10= vec3(0.23308,0.85803,0.61922);\nvec3 c11= vec3(0.63503,0.19517,0.015);\n\n\ncolout= DFB( c11, colout, d11);\ncolout= DFB( c1, colout, d1);\ncolout= DFB( c2, colout, d2);\ncolout= DFB( c3, colout, d3);\ncolout= DFB( c4, colout, d4);\ncolout= DFB( c5, colout, d5);\ncolout= DFB( c6, colout, d6);\ncolout= DFB( c9, colout, d9);\ncolout= DFB( c7, colout, d7);\ncolout= DFB( c8, colout, d8);\ncolout= DFB( c1, colout, d10);\n\n\n    \n    return colout;\n}\n\nvec3 pasto(vec2 p, vec3 col)\n{\n    float d1=p.y-0.75;\n    col= DFB(vec3(0.1,5,0.1)*(0.5-p.y*0.5),col, d1);\n    \n    float d2=p.y-0.45;\n    d2=abs(d2)-0.2;\n    col= DFB(vec3(0.5),col, d2);\n    \n    p.x=mod(p.x+0.5,2.0);\n    p.y-=0.45;\n    float d3= sdBox(p, vec2(0.5,0.01) );\n    col= DFB(vec3(0.0),col, d3);\n    \n    return col;\n}\n\nvec3 cmas(vec2 uv, vec3 col)\n{\n    col= pasto(uv,col);\n    col=t_tdo(uv,col);\n    col=temploB(uv,col);\n    \n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{   vec2 uv = ( 2. * fragCoord - iResolution.xy ) / iResolution.y;\n    uv-=vec2(-1.0,-0.8);\n    float esc=0.7;\n    uv*=esc;\n    vec2 uv0=uv;\n    vec3 col=vec3(0.0,0.2,0.7)*(uv.y-0.45);\n    uv.x= mod(uv.x-iTime, 2.0 );\n    col= cmas(uv,col);\n    col=pow(col,  vec3(0.554545));\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}