{"ver":"0.1","info":{"id":"MlGfD3","date":"1571957630","viewed":269,"name":"Undertale - Memory","username":"rmccampbell7","description":"Undertale \"Memory\" sound shader (music by Toby Fox)","likes":4,"published":1,"flags":8,"usePreview":0,"tags":["sound","undertale"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float[256] heart = float[256](\n    0., 0., 1., 1., 0., 0., 0., 0., 0., 0., 0., 0., 1., 1., 0., 0.,\n    0., 1., 1., 1., 1., 1., 0., 0., 0., 0., 1., 1., 1., 1., 1., 0.,\n    1., 1., 1., 1., 1., 1., 1., 0., 0., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 0., 0., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,\n    0., 0., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 0., 0.,\n    0., 0., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 0., 0.,\n    0., 0., 0., 0., 1., 1., 1., 1., 1., 1., 1., 1., 0., 0., 0., 0.,\n    0., 0., 0., 0., 1., 1., 1., 1., 1., 1., 1., 1., 0., 0., 0., 0.,\n    0., 0., 0., 0., 0., 0., 1., 1., 1., 1., 0., 0., 0., 0., 0., 0.,\n    0., 0., 0., 0., 0., 0., 1., 1., 1., 1., 0., 0., 0., 0., 0., 0.\n);\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));\n\n    ivec2 pix = ivec2(floor(vec2(1,-1)*(fragCoord-iResolution.xy/2.)/10.)) + 8;\n    if (min(pix.x, pix.y) >= 0 && max(pix.x, pix.y) < 16) {\n        col *= heart[pix.x+pix.y*16];\n    } else {\n        col = vec3(0);\n    }\n\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"const float tau = 6.2831855;\nconst float bps = 5.0;\nconst float dt = 1.0/bps;\nconst float vol = .1;\n\nint[] music = int[] (76, 00, 83, 00, 81, 00, 76, 00, 80, 00, 76, 80, 00, 00, 81, 00,\n                     00, 00, 76, 00, 81, 00, 76, 00, 80, 00, 76, 80, 00, 00, 81, 00,\n                     76, 00, 83, 00, 81, 00, 76, 00, 80, 00, 76, 80, 00, 00, 81, 00,\n                     00, 00, 76, 00, 81, 00, 85, 00, 83, 00, 00, 81, 00, 00, 83, 00);\n\nfloat midi2freq(int note)\n{\n    return note > 0 ? 440.0 * pow(2.0, float(note - 69) / 12.0) : 0.;\n}\n\n// from https://www.shadertoy.com/view/lsfSW2\nfloat music_box(float freq, float time)\n{\n    float y = 0.0;\n    y += 0.35*sin(1.00*tau*freq*time);\n    y += 0.22*sin(3.00*tau*freq*time);\n    y += 0.14*sin(5.00*tau*freq*time);\n    y += 0.07*sin(7.00*tau*freq*time);\n    y += 0.03*sin(9.00*tau*freq*time);\n    y *= exp(-3.3*time);\n\treturn y;\n}\n\nvec2 mainSound( in int samp,float time)\n{\n    int n = int(time / dt);\n    float t = mod(time, dt);\n\n    float s = 0.;\n\n    for (int i=0; i < 3; i++) {\n        int note = n-i >= 0 ? music[(n-i) % music.length()] : 0;\n        float f = midi2freq(note);\n        s += music_box(f, t+float(i)*dt);\n    }\n\n    return vol*vec2(s);\n}\n","name":"Sound","description":"","type":"sound"}]}