{"ver":"0.1","info":{"id":"4csGzB","date":"1703206914","viewed":84,"name":"sobel edge detection","username":"jonasfrey","description":"edge detection","likes":2,"published":3,"flags":0,"usePreview":0,"tags":["edgedetection"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 o_trn_nor = ( (fragCoord.xy - iResolution.xy*0.5) / iResolution.yy );\n    \n    vec2 o_scl_krnl = vec2(3.);\n    vec2 o_scl_krnl_half = floor(o_scl_krnl/2.);\n    float n_elements_krnl = o_scl_krnl.x * o_scl_krnl.y;\n    vec2 o_factor_edge = vec2(2.);\n    vec2 o_factor_nonedge = vec2(1.);\n    vec4 o_blur = vec4(0.);\n    vec4 o_sum_sobel_x = vec4(0.);\n    vec4 o_sum_sobel_y = vec4(0.);\n    for(\n        float n_trn_x = - o_scl_krnl_half.x;  \n        n_trn_x<o_scl_krnl_half.x+1.;\n        n_trn_x+=1.\n    ){  \n        for(\n            float n_trn_y = - o_scl_krnl_half.y;  \n            n_trn_y<o_scl_krnl_half.y+1.;\n            n_trn_y+=1.\n        ){\n\n            vec2 o_trn = fragCoord.xy+vec2(n_trn_x, n_trn_y);\n            vec4 o_c_b1 = texture(iChannel0, o_trn/iResolution.xy);\n            vec2 o_fctr = vec2(\n                (n_trn_y == 0.) ? n_trn_x*o_factor_edge.x : o_factor_nonedge.x*n_trn_x,\n                (n_trn_x == 0.) ? n_trn_y*o_factor_edge.y : o_factor_nonedge.y*n_trn_y\n            );\n            o_sum_sobel_x += o_c_b1*o_fctr.x;\n            o_sum_sobel_y += o_c_b1*o_fctr.y;\n            o_blur += o_c_b1;\n        }\n\n    }\n    vec4 o_prod_sobel_x = o_sum_sobel_x*o_sum_sobel_x;\n    vec4 o_prod_sobel_y = o_sum_sobel_y*o_sum_sobel_y;\n    \n    vec4 o_edges = vec4(\n        length(o_prod_sobel_x.x+o_prod_sobel_y.x),\n        length(o_prod_sobel_x.y+o_prod_sobel_y.y),\n        length(o_prod_sobel_x.z+o_prod_sobel_y.z),\n        length(o_prod_sobel_x.w+o_prod_sobel_y.w)\n    );\n\n    o_blur /= n_elements_krnl;\n    vec4 o_c_b1 = texture(iChannel0, fragCoord.xy/iResolution.xy);\n    fragColor = vec4(o_edges);//*(1.+(1./n_elements_krnl));\n    //fragColor = vec4(o_c_b1)*o_edges;//*(1.+(1./n_elements_krnl));\n    //fragColor = vec4(0.)+n*(1./n_elements_krnl);\n    fragColor = (fragColor);\n}","name":"Image","description":"","type":"image"}]}