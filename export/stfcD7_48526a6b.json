{"ver":"0.1","info":{"id":"stfcD7","date":"1648115334","viewed":156,"name":"chihiro_dancing_soot","username":"the_tanina","description":"soot from chihiro but reacting with the music","likes":8,"published":1,"flags":64,"usePreview":0,"tags":["2d","music","ghibli","chihiro"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XtfSDl","filepath":"https://soundcloud.com/mrantoinedaniel/6-envie-de-clubber?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing","previewfilepath":"https://soundcloud.com/mrantoinedaniel/6-envie-de-clubber?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define X_SPEED .5\n#define Y_SPEED .6\n#define X_AMPL .5\n#define NB_LINES 10.\n#define RADB .25\n#define RADE .09\n#define RADI .02\n#define PI 3.14159265359\n\n// la musik Ã  mettre: https://soundcloud.com/mrantoinedaniel/6-envie-de-clubber?utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing\n\nfloat antiAlias(float dis, float width, float blur)\n{\n    return 1. - clamp((dis - width)*iResolution.y/2./blur, 0., 1.);\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat circle(vec2 st, vec2 pos, float rad, float blur)\n{\n    return antiAlias(length(st - pos), rad, blur);\n}\n\nfloat dist2line(vec2 st, vec2 p1, vec2 p2)\n{\n    vec2 dir = p2 - p1;\n    float loc_line = ((st.x - p1.x) * dir.x + (st.y - p1.y) * dir.y) / dot(dir, dir);\n    float d = abs((st.x - p1.x) * dir.y - (st.y - p1.y) * dir.x) / length(dir);\n    d = mix(d, length(st - p1), step(loc_line, 0.));\n    d = mix(d, length(st - p2), step(1., loc_line));\n    return d;\n}\n\nfloat drawLine(vec2 st, vec2 p1, vec2 p2, float width, float blur)\n{\n    return antiAlias(dist2line(st, p1, p2), width, blur);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n\n    //var\n    float blur = 10.;\n    float blur_eye = 1.5;\n    float blur_hair = 3.;\n    float offset = cos(uv.x*PI)*.15;\n    int nb_hair = 40;\n\n    //funky background\n    float y_loc = uv.y - iTime*X_SPEED + sin((uv.x + iTime)*Y_SPEED) * X_AMPL;\n    vec3 col = hsv2rgb(vec3(fract(y_loc), fract(floor(y_loc * NB_LINES)/2.)/*/2.+.25*/, 1.));\n\n    //boule de suie\n        //body\n    float body = circle(uv, vec2(0.), RADB, blur);\n    col = mix(col, vec3(0.), body);\n        //eyes\n    float eye1 = circle(uv, vec2(-.11, .05), RADE, blur_eye);\n    float eye2 = circle(uv, vec2(.11, .05), RADE, blur_eye);\n    col = mix(mix(col, vec3(1.), eye1), vec3(1.), eye2);\n    float int_eye1 = circle(uv, vec2(-.09, 0.05), RADI, blur_eye);\n    float int_eye2 = circle(uv, vec2(.09, 0.05), RADI, blur_eye);\n    col = mix(mix(col, vec3(0.), int_eye1), vec3(0.), int_eye2);\n        //body hair\n    for(int i=0;i<nb_hair;i++)\n    {\n        int tx = int(float(i)/float(nb_hair)*512.);\n        float fft  = texelFetch(iChannel0, ivec2(tx,0), 0).x;\n\n        float angle = 2.*PI*float(i)/float(nb_hair);\n        vec2 dir = vec2(cos(angle), sin(angle));\n        float hair = drawLine(uv, dir * RADB, dir * (RADB + max(fft, .05)), .005, blur_hair);\n        col = mix(col, vec3(0.), hair);\n    }\n    \n    vec2 eyef = 0.02 * (1.0 - 2.0 * smoothstep(-0.2, 0.2, vec2(sin(iTime * 3.1415 * 2.0), sin(iTime * 3.1415))));\n    int_eye1 = circle(uv, vec2(-.09, 0.05) + eyef, RADI, blur_eye);\n    int_eye2 = circle(uv, vec2(.09, 0.05) + eyef, RADI, blur_eye);\n\n    fragColor = vec4(col, 1.);\n}","name":"Image","description":"","type":"image"}]}