{"ver":"0.1","info":{"id":"l3KSDc","date":"1720593169","viewed":21,"name":"Sparks_ARTS1308","username":"Reversion","description":"This shader is for a course, Fragment Shader Art (course code: ARTS1308) in ShanghaiTech University as hw7.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2d","random","sparks","hash"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// CC BY-SA 3.0\n// This shader is for a course, Fragment Shader Art (course code: ARTS1308) \n//      in ShanghaiTech University as hw7.\n// Reference: https://www.bilibili.com/video/BV1zL411R7pZ/\n\nvec2 hash12(float t){\n    float x = fract(sin(t*128.3)*1203.1);\n    float y = fract(sin(t*758.3)*753.2);\n    return vec2(x,y);\n}// return a random vec2, x y ranging from 0 to 1\n\nvec2 polarhash12(float t){\n    float theta = fract(sin(t*128.3)*1203.1)*3.1416*2.;\n    float a = fract(sin(t*758.3)*753.2);\n    return vec2(a*cos(theta), a*sin(theta));\n}// return a random vec2 in polar (but expressed in xy)\n\nfloat explosion(vec2 uv, vec2 center, float t, float sparkcnt){\n    float col = 0.0;\n    for (float i = 0.; i < sparkcnt; i++){\n        vec2 dir = polarhash12(length(center)+i+1.)*.5;\n        float r = length(uv - dir*t);\n        float brightness = mix(0.0005, 0.02, smoothstep(0.05,0.0,t));\n        brightness *= sin(20.*t+i)*.5+.5;\n        brightness *= smoothstep(1.0,0.75,t);\n        col += brightness/r;\n    }\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n    \n    vec3 col = vec3(0.);\n    float ft = floor(iTime);\n    \n    for (float i = 0.; i < 8.; i++){\n        vec3 color = sin(2.*vec3(.33,.55,.44)*ft)*.25+.75;\n        \n        vec2 offset = hash12(i+1.+ft*i)-.5;\n        offset *= vec2(2.,1.);\n\n        col += explosion(uv-offset, offset, fract(iTime), 50.+25.*sin((i+1.)*20.))*color;   \n    }\n\n    col = mix(col, vec3(0.2,0.8,0.8), 0.1);\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}