{"ver":"0.1","info":{"id":"MlcGDB","date":"1471282240","viewed":3024,"name":"Draw Line & Line Segment","username":"gPlatl","description":"Draw antialiased endless line and line segment with given thickness.\nUse mouse to define 2nd segment point.","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["2d","line","draw","antialiased","linesegment"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//\n// DrawLineAndSegment.glsl\n//--- draw antialiased endless line and line segment with given thickness ---\n\n// draw line segment from A to B\nfloat segment(vec2 P, vec2 A, vec2 B, float r) \n{\n    vec2 g = B - A;\n    vec2 h = P - A;\n    float d = length(h - g * clamp(dot(g, h) / dot(g,g), 0.0, 1.0));\n\treturn smoothstep(r, 0.5*r, d);\n}\n\n// draw endless line trough A and B\nfloat line(vec2 P, vec2 A, vec2 B, float r)\n{\n\tvec2 g = B - A;\n    float d = abs(dot(normalize(vec2(g.y, -g.x)), P - A));\n\treturn smoothstep(r, 0.5*r, d);\n}\n\nconst vec3 backColor  = vec3(0.3);\nconst vec3 lineColor1 = vec3(0.35,0.95,0.51);\nconst vec3 lineColor2 = vec3(0.95,0.95,0.10);\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;\n    vec2 mo = (iMouse.xy * 2.0 - iResolution.xy) / iResolution.y;\n    float thickness = (0.7+0.4*sin(iTime)) * 0.051;\n    vec3 color = backColor;\n\n    // draw endless line\n    float intensity = line(uv, vec2(0.0), mo, thickness*0.5);\n    color = mix(color, lineColor1, intensity);\n\n    // draw line segment\n    intensity = segment(uv, vec2(0.0), mo, thickness);\n    color = mix(color, lineColor2, intensity);\n    \n    fragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}