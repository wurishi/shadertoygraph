{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":3,"type":"buffer","id":"XdfGR8","filepath":"/media/previz/buffer03.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"// Fork of \"Voronoi points sim\" by wyatt. https://shadertoy.com/view/MfKfz1\n// 2024-12-09 22:52:07\n\nMain {\n\n    vec4 _b = B(U);\n    vec4 _c = C(U);\n    vec4 _d = D(U);\n    \n    vec4 _q1 = A(_b.xy);\n    vec4 _q2 = A(_c.xy);\n    vec4 _q3 = A(_d.xy);\n    Q = vec4(0);\n    Q.y = exp(-length(_q1.xy-_q2.xy)*P(U,_q1.xy,_q2.xy));\n    Q += exp(-.5*length(U-_q1.xy))*vec4(1);\n    \n    vec2 m = cc(_q1.xy,_q2.xy,_q3.xy);\n    Q.xy  += exp(-abs(length(U-m)-1.));\n    \n    Q += 0.5*exp(-2.*L(U,_q1.xy,_q2.xy));\n    //if (inside(m,_q1.xy,_q2.xy,_q3.xy))\n    Q += 0.5*exp(-2.*L(U,_q1.xy,_q3.xy));\n    Q += 0.5*exp(-2.*L(U,_q2.xy,_q3.xy));\n    \n    Q = 1.-Q;\n   \n}","name":"Image","description":"","type":"image"},{"outputs":[],"inputs":[],"code":"#define R iResolution.xy\n#define Main void mainImage(out vec4 Q, in vec2 U)\n#define A(U) texelFetch(iChannel0,ivec2(U),0)\n#define B(U) texelFetch(iChannel1,ivec2(U),0)\n#define C(U) texelFetch(iChannel2,ivec2(U),0)\n#define D(U) texelFetch(iChannel3,ivec2(U),0)\n\n// Perpinducular Bisector\nfloat P (vec2 p, vec2 a, vec2 b) {\n\tvec2 m = 0.5*(a+b); // midpoint\n    if (length(a-b)<1e-3) return 1e3; // ignore self\n\treturn abs(dot(p-m,b-m)/dot(b-m,b-m)); // pojection\n} \n// Line\nfloat L (vec2 p, vec2 a, vec2 b) {\n    if (length(a-b)<1e-3) return 1e3; // ignore self\n    return length(p-a-(b-a)*clamp(dot(p-a,b-a)/dot(b-a,b-a),0.,1.));\n}\n// Circumcenter\nvec2 cc (vec2 a, vec2 b, vec2 c) {\n    vec2 ab = 0.5*(a+b), ac = 0.5*(a+c);\n\tfloat m1 = (a.x-b.x)/(b.y-a.y), m2 = (a.x-c.x)/(c.y-a.y);\n    float b1 = ab.y-m1*ab.x, b2 = ac.y-m2*ac.x;\n    float x = (b1-b2)/(m2-m1);\n    vec2 m = vec2(x,m1*x+b1);\n    if (length(m)>0.) return m;\n    return vec2(0);\n}\n// Triangle\nfloat T (vec2 U, vec2 a, vec2 aa, vec2 aaa) {\n    vec2 m = cc(a,aa,aaa);\n    float v = length(a-m), w = length(U-m);\n    return w;\n}\nbool inside(vec2 m, vec2 a, vec2 b, vec2 c) {\n    // Compute the cross product for each edge with the test point\n    float cross1 = (b.x - a.x) * (m.y - a.y) - (b.y - a.y) * (m.x - a.x);\n    float cross2 = (c.x - b.x) * (m.y - b.y) - (c.y - b.y) * (m.x - b.x);\n    float cross3 = (a.x - c.x) * (m.y - c.y) - (a.y - c.y) * (m.x - c.x);\n    \n    // Check if all cross products have the same sign\n    bool hasSameSign = (cross1 >= 0.0 && cross2 >= 0.0 && cross3 >= 0.0) ||\n                       (cross1 <= 0.0 && cross2 <= 0.0 && cross3 <= 0.0);\n    \n    return hasSameSign;\n}\n","name":"Common","description":"","type":"common"},{"outputs":[{"channel":0,"id":"4dXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"vec2 F (vec2 a, vec2 b) {\n    vec2 r = b-a;\n    float l = length(r);\n    if (length(a)>1.&&length(b)>0.&&l > 1.) \n    return 1e-2*(r/l/l-(a.x/R.x+b.x/R.x)*20.*r/l/l/l);\n    return vec2(0);\n}\nMain {\n    if (length(U-(floor(U.xy/10.)*10.+.5))>0.) discard;\n    Q = A(U);\n    vec2 f = vec2(0);\n    for (float x = -2.; x<=2.; x++)\n    for (float y = -2.; y<=2.; y++) \n    {\n        vec4 _b = B(Q.xy+vec2(x,y));\n        vec4 _c = C(Q.xy+vec2(x,y));\n        vec4 _d = D(Q.xy+vec2(x,y));\n        vec4 _q1 = A(_b.xy);\n        vec4 _q2 = A(_c.xy);\n        vec4 _q3 = A(_d.xy);\n        f += F(_q1.xy,_q2.xy);\n        f += F(_q1.xy,_q3.xy);\n    }\n    Q.zw += f;\n    Q.xy += f + Q.zw;\n    \n    if (iFrame < 1) {\n    \n        Q.xy = (floor(U.xy/10.)*10.);\n        Q.zw = vec2(0);\n    \n    }\n    \n}\n","name":"Buffer A","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"XsXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"Main {\n    Q = B(U);\n    vec4 q = A(Q.xy);\n    for (float x = -2.; x<=2.; x++)\n    for (float y = -2.; y<=2.; y++) {\n        \n        vec4 b = B(U+vec2(x,y));\n        vec4 a = A(b.xy);\n        if (length(a.xy-U) < length(q.xy-U)) {\n        \n            Q = b;\n            q = a;\n        \n        }\n        \n        \n  \n    }\n    \n    if (iFrame < 1) {\n        Q.xy = U;\n    }\n}","name":"Buffer B","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"4sXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"Main {\n    Q = C(U);\n    vec4 b = B(U);\n    vec4 q1 = A(b.xy);\n    vec4 q2 = A(Q.xy);\n    for (float x = -2.; x<=2.; x++)\n    for (float y = -2.; y<=2.; y++) {\n        \n        \n        vec4 _Q = C(U+vec2(x,y));\n        vec4 _b = B(U+vec2(x,y));\n        vec4 _q1 = A(_b.xy);\n        vec4 _q2 = A(_Q.xy);\n        \n        if (length(q1.xy-q2.xy)==0. ||\n            P(U,q1.xy,q2.xy) > P(U,q1.xy,_q2.xy) ) {\n        \n            q2 = _q2;\n            Q = _Q;\n        \n        }\n        \n        if (length(q1.xy-q2.xy)==0. ||\n            P(U,q1.xy,q2.xy) > P(U,q1.xy,_q1.xy) ) {\n        \n            q2 = _q1;\n            Q = _b;\n        \n        }\n        \n  \n    }\n    if (iFrame < 1) {\n        Q.xy = U;\n    }\n\n}","name":"Buffer C","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"XdfGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":3,"type":"buffer","id":"XdfGR8","filepath":"/media/previz/buffer03.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"Main {\n    Q = D(U);\n    vec4 b = B(U);\n    vec4 c = C(U);\n    vec4 q1 = A(b.xy);\n    vec4 q2 = A(c.xy);\n    vec4 q3 = A(Q.xy);\n    for (float x = -2.; x<=2.; x++)\n    for (float y = -2.; y<=2.; y++) {\n        \n        vec4 _Q = D(U+vec2(x,y));\n        vec4 _b = B(U+vec2(x,y));\n        vec4 _c = C(U+vec2(x,y));\n        vec4 _q1 = A(_b.xy);\n        vec4 _q2 = A(_c.xy);\n        vec4 _q3 = A(_Q.xy);\n        \n        if (length(q1.xy-q3.xy)==0. ||\n            length(q2.xy-q3.xy)==0. ||\n            T(U,q1.xy,q2.xy,q3.xy) > T(U,q1.xy,q2.xy,_q3.xy) ) {\n        \n            q3 = _q3;\n            Q = _Q;\n        \n        }\n        \n        if (length(q1.xy-q3.xy)==0. ||\n            length(q2.xy-q3.xy)==0. ||\n            T(U,q1.xy,q2.xy,q3.xy) > T(U,q1.xy,q2.xy,_q2.xy) ) {\n        \n            q3 = _q2;\n            Q = _c;\n        \n        }\n        if (length(q1.xy-q3.xy)==0. ||\n            length(q2.xy-q3.xy)==0. ||\n            T(U,q1.xy,q2.xy,q3.xy) > T(U,q1.xy,q2.xy,_q1.xy) ) {\n        \n            q3 = _q1;\n            Q = _b;\n        \n        }\n        \n  \n    }\n    if (iFrame < 1) {\n        Q.xy = U;\n    }\n\n}","name":"Buffer D","description":"","type":"buffer"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":true,"mFlagMusicStream":false},"info":{"id":"lcGfRW","date":"1733784756","viewed":231,"name":"Dual Delaunay Sim","username":"wyatt","description":"sim","likes":19,"published":3,"flags":32,"usePreview":0,"tags":["sim"],"hasliked":0,"parentid":"","parentname":""}}