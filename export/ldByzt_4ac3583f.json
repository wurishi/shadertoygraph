{"ver":"0.1","info":{"id":"ldByzt","date":"1493284970","viewed":299,"name":"Thick lines with rounded ends","username":"kosmonaut","description":"Using base transformation we can draw a \"box\" that orientates itself to be between two points. We can add circles at the end points to make it rounded.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["thicklineswithroundedends"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float distanceSquared(vec2 x, vec2 y)\n{\n    return dot(x-y, x-y);\n}\n\nconst float size = 10.0;\n\nconst float sizesq = size*size;\n\nconst vec4 lineColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n#define ROUNDED\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 start = 0.5 * iResolution.xy;\n    \n\t//rotate around the middle\n    vec2 rotation = start + vec2(cos(iTime), sin(iTime)) * (iResolution.x < iResolution.y ? iResolution.x/3.0 : iResolution.y/3.0);\n    \n    vec2 end = iMouse.z > 0.0 ? iMouse.xy : rotation;\n    \n    //Draw the line\n    \n    //Create a new base\n    vec2 baseVectorDir = end - start;\n    vec2 baseVectorNormal = normalize(vec2(-baseVectorDir.y, baseVectorDir.x)); \n    float baseVectorDirLength = length(baseVectorDir);\n    \n    vec2 fragToOrigin = fragCoord - start;\n    \n    //Transform to our new base\n    vec2 fragToOriginTrafo = vec2(dot(baseVectorDir / baseVectorDirLength, fragToOrigin) / baseVectorDirLength,\n\t\t\t\t\t\t\t\t  dot(baseVectorNormal, fragToOrigin));\n    \n    //Bounds check\n    if(fragToOriginTrafo.x > 0.0 && fragToOriginTrafo.x < 1.0 && abs(fragToOriginTrafo.y) < size)\n    {\n     \tfragColor = lineColor;\n        return;\n    }\n    \n    #ifdef ROUNDED\n    \n    if(distanceSquared(fragCoord, start) < sizesq) \n    {\n        fragColor = lineColor;\n        return;\n    }\n    \n    if(distanceSquared(fragCoord, end) < sizesq) \n    {\n        fragColor = lineColor;\n        return;\n    }\n    \n    #endif\n    \n\tfragColor = vec4(0.0, 0.0, 0.0 ,1.0);\n}\n","name":"Image","description":"","type":"image"}]}