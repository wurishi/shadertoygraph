{"ver":"0.1","info":{"id":"msVyzw","date":"1695929561","viewed":61,"name":"Illusion - Rotation","username":"Gaktan","description":"Weird illusion that shows different parts of the screen rotating at different speeds and different directions.\nI think the effect changes depending on the screen refresh rate.\n\nMouse.x controls the rotation speed. Try in full screen!","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["2d","optical","illusion"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float\tZOOM   = 30.0;\nconst float CIRCLE = 0.5;\n\nvec2 rot(in vec2 uv, in float angle)\n{\n    float s = sin(angle);\n    float c = cos(angle);\n    mat2 rot_mat = mat2(c, -s, s, c);\n    \n    return rot_mat * uv;\n}\n\nfloat sdCircle(in vec2 p, in float r)\n{\n    return length(p)-r;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = (fragCoord - 0.5*iResolution.xy) / iResolution.y;\n    \n    float angle = texelFetch(iChannel0, ivec2(0, 0), 0).x;\n    uv = rot(uv, angle);\n\n    uv *= ZOOM;\n    uv += vec2(0.5, 0.5);\n    \n    // Cell coordinates\n    vec2 coord = mod(uv, 1.0);\n    coord -= vec2(0.5, 0.5);\n\n    float d = 0.0;\n    float c = sdCircle(coord, CIRCLE);\n    if (c < 0.0)\n    {\n        c = pow(abs(c), 0.3);\n        vec3 v1 = vec3(0.0, 0.0, 1.0);\n        vec3 v2 = normalize(vec3(-coord, 0.5));\n        vec3 v = normalize(mix(v1, v2, step(c, 0.56)));\n        vec3 l = normalize(vec3(0.2, -0.7, 0.3));\n        d = 0.3+dot(v, l)*0.7;\n    }\n    \n    d = pow(d, 2.2);\n\n    fragColor.rgb = vec3(d);\n    fragColor.a = 1.0;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"const float SPEED         = 100.0;\nconst float DEFAULT_SPEED = 5.0;\n\n// Smooth rotation\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texelFetch(iChannel0, ivec2(0, 0), 0);\n    if (iMouse.y <= 1.0)\n    {\n       fragColor += iTimeDelta * DEFAULT_SPEED;\n    }\n    else\n    {\n        fragColor += (iMouse.x / iResolution.x) * iTimeDelta * SPEED;\n    }\n    \n    //fragColor = mod(fragColor, 6.28318530718);\n}","name":"Buffer A","description":"","type":"buffer"}]}