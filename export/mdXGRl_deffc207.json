{"ver":"0.1","info":{"id":"mdXGRl","date":"1667129075","viewed":106,"name":"Sinusoidal waves","username":"vertex55","description":"Just 3 sinusoidal waves.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d","waves"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI2 6.2831853\n#define N 3\n\nfloat[] _center = float[N] (0.5, 0.3, 0.7);\nfloat[] _height = float[N] (0.5, 0.3, 0.4);\nfloat[] _phase = float[N] (0.0, 0.1, 0.5);\nfloat[] _frequency = float[N] (0.3, 0.1, 0.4);\nfloat[] _velocity = float[N] (0.1, 0.03, 0.06);\nfloat[] _power = float[N] (10.0, 8.0, 6.0);\nvec4[] _color = vec4[N] (\n    vec4(0.4, 0.4, 0.9, 0.9),\n    vec4(0.8, 0.2, 0.8, 0.9),\n    vec4(0.2, 0.8, 0.6, 0.9)\n);\n\nvec4 background = vec4(0.0, 0.0, 0.5, 1.0);\n\nfloat intensity(\n    float x, // [0, 1]\n    float y, // [0, 1]\n    float time, // [0, +inf)\n    float center, // [0, 1]\n    float height, // [0, 1]\n    float phase, // [0, 1]\n    float frequency, // [0, +inf)\n    float velocity, // [0, +inf)\n    float power // [0, +inf)\n) {\n    float y1 = center + (0.5 * height * sin(PI2 * (frequency * x + phase + velocity * time)));\n    float diff = abs(y1 - y);\n    return pow(1.0 - diff, power);\n}\n\nvec4 blend(vec4 c1, vec4 c2) {\n    float sumA = c1.a + c2.a;\n    if (sumA < 0.01) {\n        return vec4(0.0);\n    }\n    float a = c2.a / sumA;\n    vec3 mixed = mix(c1.rgb, c2.rgb, a);\n    float alpha = c1.a + (1.0 - c1.a) * c2.a;\n    return vec4(mixed, alpha);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord / iResolution.xy;\n\n    vec4 result = background;\n    for (int i = 0; i < N; i++) {\n        float intns = intensity(\n            uv.x, uv.y, iTime,\n            _center[i], _height[i], _phase[i],\n            _frequency[i], _velocity[i], _power[i]\n        );\n        vec4 c = vec4(_color[i].rgb, _color[i].a * intns);\n        result = blend(result, c);\n    }\n    \n    fragColor = result;\n}\n","name":"Image","description":"","type":"image"}]}