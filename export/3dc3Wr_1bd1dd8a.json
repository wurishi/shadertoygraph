{"ver":"0.1","info":{"id":"3dc3Wr","date":"1568210646","viewed":450,"name":"[phreax] strudel","username":"phreax","description":"old school spiral effect","likes":18,"published":1,"flags":0,"usePreview":0,"tags":["tunnel","spiral"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define rot(x) mat2(cos(x), sin(x), -sin(x), cos(x))\n\n// set to true for a \"fly through effect\"\n#define ROT_CAM true\n\n// bend tunnel\n#define BEND .8        \n\nfloat spiral(vec2 uv, float i) {  \n    uv *= rot(i*3.14-.4*iTime);\n    uv += .03*sin(vec2(40, 70)*uv.yx);\n\n\tfloat d = length(uv);\n    return smoothstep(1., -1., abs(d-.12)/fwidth(d)-.2);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n\n    float col = 0.;\n\t\n    for(float i=.02; i<=1.; i+=.02) {   \n        float z = fract(i-.1*iTime);\n        float fade = smoothstep(1., .8, z);\n        vec2 UV = uv;\n        if(ROT_CAM) {   \n       \t UV += sin(vec2(.3, .6)*iTime+z*BEND)*.3;\n        }\n        col += spiral(UV*z, i)*(.5/z)*fade;\n    }\n    \n    col = sqrt(col);\n\n    fragColor = vec4(vec3(col), 1.);\n}","name":"Image","description":"","type":"image"}]}