{"ver":"0.1","info":{"id":"MtyGR1","date":"1473107821","viewed":123,"name":"Moon journey","username":"dawee","description":"motion of the moon","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["flat2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const int BIT_COUNT = 8 * 4;\n\nconst int asphaltColor = 0x34495e;\nconst int midnightBlue = 0x2c3e50;\nconst int silver = 0xbdc3c7;\nconst float moonSize = 0.08;\nconst float framesByNight = 120.0;\n\n\nint modi(int x, int y) {\n    return x - y * (x / y);\n}\n\nfloat modulof(float x, float y) {\n    return x - y * float(int(x / y));\n}\n\nint and(int a, int b) {\n    int result = 0;\n    int n = 1;\n\n    for(int i = 0; i < BIT_COUNT; i++) {\n        if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n            result += n;\n        }\n\n        a = a / 2;\n        b = b / 2;\n        n = n * 2;\n\n        if(!(a > 0 && b > 0)) {\n            break;\n        }\n    }\n    return result;\n}\n\n\nvec4 hex(int hexVal) {\n    int blue256 = and(0x000000ff, hexVal);\n    int green256 = and(0x0000ff00, hexVal) / int(pow(2.0, 8.0));\n    int red256 = and(0x00ff0000, hexVal) / int(pow(2.0, 16.0));\n\n\treturn vec4(float(red256) / 255.0, float(green256) / 255.0, float(blue256) / 255.0, 1.0);\n}\n\nvec4 colorMix(vec4 color1, vec4 color2, float cursor) {\n    return vec4(\n    \tmix(color1.x, color2.x, cursor),\n    \tmix(color1.y, color2.y, cursor),\n    \tmix(color1.z, color2.z, cursor),\n        1.0\n    );\n}\n\nvec4 hexMix(int hexVal1, int hexVal2, float cursor) {\n\tvec4 color1 = hex(hexVal1);\n\tvec4 color2 = hex(hexVal2);\n\n    return vec4(\n    \tmix(color1.x, color2.x, cursor),\n    \tmix(color1.y, color2.y, cursor),\n    \tmix(color1.z, color2.z, cursor),\n        1.0\n    );\n}\n\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec4 darkNight = hex(midnightBlue);\n   \tvec4 white = vec4(1,1,1,1);\n    vec4 lightNight = colorMix(darkNight, hex(silver), 0.1);\n    vec4 darkFloorColor = hexMix(asphaltColor, 0, 0.3);\n    vec4 lightFloorColor = hexMix(asphaltColor, 0xffffff, 0.6);\n    float distanceFromHorizon = distance(fragCoord.y, iResolution.y / 3.0) / (iResolution.y / 3.0);\n\n\n    float screenMoonSize = moonSize * iResolution.x;\n    float moonAngle = radians(360.0 - modulof(( ((float(iFrame) + framesByNight) / framesByNight) * 180.0), 360.0));\n    vec2 screenMoonPos = vec2(\n    \t(cos(moonAngle) * iResolution.x / 2.0) + iResolution.x / 2.0,\n        sin(moonAngle) * iResolution.y * 3.0 / 4.0\n    );\n    float sceneLight = ((1.0 + sin(moonAngle)) / 2.0);\n    vec4 lightestFloorColor = colorMix(hex(asphaltColor), lightFloorColor, sceneLight);\n\n\n    if (distance(fragCoord, screenMoonPos) <= screenMoonSize) {\n        fragColor = hex(silver);\n    } else if (distance(fragCoord, screenMoonPos) <= screenMoonSize * 1.1) {\n        fragColor = hexMix(silver, midnightBlue, 0.6);\n    } else if (distance(fragCoord, screenMoonPos) <= screenMoonSize * 1.6) {\n        fragColor = hexMix(silver, midnightBlue, 0.8);\n    } else {\n\t    fragColor = colorMix(darkNight, lightNight, sceneLight);\n    }\n\n    if (fragCoord.y < iResolution.y / 3.0) {\n\t    fragColor = colorMix(darkFloorColor, lightestFloorColor, distanceFromHorizon);\n    }\n\n}\n","name":"Image","description":"","type":"image"}]}