{"ver":"0.1","info":{"id":"mtfBDS","date":"1693398449","viewed":39,"name":"hex tiling propagation","username":"pik","description":"sample\nreference:https://www.shadertoy.com/view/4l2cWD","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["sample"],"hasliked":0,"parentid":"DlXBDB","parentname":"automatism"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 pix=vec2(1./iResolution.xy);\n    vec2 c=texture(iChannel0,fragCoord*pix).zw;\n    vec3 col=vec3(mod(c.x*111.,7.)/7.,mod(c.x*17.,5.)/5.,mod(c.x*19.,6.)/6.)*c.y;\n    col=pow(col,vec3(0.3));\n    fragColor=vec4(col,1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define cs 2.\n#define sn 1.\n\nvec2 pix;\nconst float fade=1.2;\n\nfloat turn(float i){\n    return mod(i,6.);\n}\n\nvoid trail(vec2 Coord,float id,vec2 dir,inout vec4 T,inout int Count){\n    vec2 coloredCoord=Coord+dir;//coloredCoord:塗られてる,Coord:塗られてない\n    vec4 _S=texture(iChannel0,coloredCoord*pix);\n    if(_S.x>0.){\n        float _Sid=turn(id+2.);\n        if(_S.x>1.){\n            if(abs(_Sid-_S.y)<0.5){\n                T=vec4(_S.x-1.,_S.y,_S.z,1.);\n                Count++;\n            }\n        }\n        else{\n            float left=turn(_S.y-1.);\n            float right=turn(_S.y+1.);\n            float L=_S.z-0.005;/////////CHANGE/RANDOM\n            if(abs(_Sid-left)<0.5){\n                T=vec4(L,left,L,1.);\n                Count++;\n            }\n            else if(abs(_Sid-right)<0.5){\n                T=vec4(L,right,L,1.);\n                Count++;\n            }\n        }\n    }\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    if(fragCoord.x>iResolution.x-1. || fragCoord.y>iResolution.y-1. || fragCoord.x<1. || fragCoord.y<1.)discard;\n    pix=vec2(1./iResolution.xy);\n    vec4 S=texture(iChannel0,fragCoord*pix);\n    if(S.x==0.){\n        vec4 T=S;\n        int Count=0;\n        \n        trail(fragCoord,0.,vec2(0.,1.),T,Count);\n        trail(fragCoord,1.,vec2(-cs,sn),T,Count);\n        trail(fragCoord,2.,vec2(-cs,-sn),T,Count);\n        trail(fragCoord,3.,vec2(0,-1.),T,Count);\n        trail(fragCoord,4.,vec2(cs,-sn),T,Count);\n        trail(fragCoord,5.,vec2(cs,sn),T,Count);\n        \n        /*\n        trail(fragCoord,0.,vec2(5.,0.),T,Count);\n        trail(fragCoord,1.,vec2(0.,5.),T,Count);\n        trail(fragCoord,2.,vec2(-5.,0.),T,Count);\n        trail(fragCoord,3.,vec2(0,-5.),T,Count);\n        */\n        if(Count==1)S=T;\n    }\n    else{\n        S.x=0.;\n    }\n    //FADE\n    if(S.w>0.){\n        S.w-=fade*iTimeDelta;\n        if(S.w<0.){\n            S=vec4(0.);\n        }\n    }\n    ////MOUSE\n    if(iMouse.z>0.){\n        vec2 point=iMouse.xy+0.5-fragCoord;\n        if(dot(point,point)<0.5){\n            S=vec4(22.,5.,22.,1.);\n        }\n    }\n    fragColor=S;\n}","name":"Buffer A","description":"","type":"buffer"}]}