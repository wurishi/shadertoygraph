{"ver":"0.1","info":{"id":"MlyyWw","date":"1536522925","viewed":141,"name":"ptit koala d'amour","username":"hamsterNinja","description":"youpi","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["youpi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float hash( float n ) {\n    return fract(sin(n)*43758.5453);\n}\n\nfloat noise( in vec3 x ) { // in [0,1]\n    vec3 p = floor(x);\n    vec3 f = fract(x);\n\n    f = f*f*(3.-2.*f);\n\n    float n = p.x + p.y*57. + 113.*p.z;\n\n    return mix(mix(hash(n+  0.), hash(n+  1.),f.x),\n               mix(hash(n+ 57.), hash(n+ 58.),f.x),f.y);\n}\n\nvec3 clampcolor (vec3 color, float max){ \n    return vec3(clamp (color.r,0.,max), clamp(color.g,0.,max), clamp (color.b,0.,max));\n}\n\nvec2 Within (vec2 uv, vec4 rect){\n    return (uv-rect.xy)/(rect.zw-rect.xy);\n}\n\nvec4 Head (vec2 uv, vec2 m, float blur) {\n    uv -=.5;\n    uv.y -= uv.x*uv.x*-.5;\n    uv.y -= cos(uv.x*15.-(length(m))*10.)*.01;\n    uv.x -= sin(uv.y*15.-(length(m))*10.)*.01;\n    \n\tvec4 col = vec4 (.1, .1, 1., 1.);\n    col.a = smoothstep(.5+blur, .49, length(uv));\n    \n    col.rgb += smoothstep(1., .0, length(vec2(uv.x, uv.y-.1)))*.4; //degrade alpha\n    \n    vec4 shaddow;\n    shaddow.a = smoothstep(.4, .6, length(vec2(uv.x, uv.y-.1)));\n    shaddow.a *= noise(vec3(uv*300., 1.));\n    \n    col.rgb = mix (col.rgb, vec3 (0., .0, .0), shaddow.a);\n    \n    return col;\n}\n\nvec4 Ear(vec2 uv, vec4 head, vec2 m){\n    uv -=.5;\n    uv+= m*(.5-dot(uv, uv));\t\t//UN PEU CACA\n    uv.y -= uv.x*uv.x*-.5;\n    uv.y -= cos(uv.x*15.-(length(m))*10.+3.)*.01;\n    uv.x -= sin(uv.y*15.-(length(m))*10.+3.)*.01;\n    \n    vec4 col = vec4 (.2, .2, 1., 1.);\n    col.a  = smoothstep(.5, .48, length(vec2(uv.x, uv.y))); //1st circle\n    //col.a += smoothstep(.5, .48, length(vec2(uv.x-.3, uv.y-.3))) - 1.; \t//intersect with 2d circle\n    //col.a = clamp (col.a,0.,1.);\t\t\t\t\t\t\t\t\t\t\t//\n    col.rgb += smoothstep(.8, .0, length(vec2(uv.x-.3, uv.y-.3)))*.2; //white gradient\n    col.a *= -head.a*noise(vec3(uv*300., 1.))+1.; //outline\n\n    return col;\n}\n\nvec4 Eye (vec2 uv, float side, vec2 m) {\n    uv -=.5;\n    uv.x *= side; //unmirror\n\n    //eyelid    \n    vec2 eyelidUv = uv;\n    eyelidUv.y *= .9;\n    eyelidUv.y -= .02;\n    eyelidUv.y += (uv.x*side*uv.x*side*(-length(m)+1.))*(-length(m)+1.)*1.; //\"*side\" remirror \n    eyelidUv.y += sin(uv.x*side+3.)*.5*(length(m)); \t\t\t\n    float eyelid  = smoothstep(.5, .45, length(eyelidUv)); \t\t//1st circle\n    eyelid += smoothstep(.5, .45, length(vec2(eyelidUv.x, eyelidUv.y+.2))) - 1.; //intersect with 2d circle\n    eyelid = clamp (eyelid,0.,1.);\n    \n    vec4 colEyelid = vec4(.3, .3, 1., eyelid);\n    \n    //eyeball\n    vec2 eyeballUv = uv;\n    eyeballUv.y += (uv.x*side*uv.x*side*(-length(m)+1.))*(-length(m)+1.)*1.1; \t//parable for happiness\n    eyeballUv.y += sin(uv.x*side+3.)*1.*(length(m)); \t\t\t//sin for hapiness\n    float eyeball = smoothstep(.5, .45, length(eyeballUv)); \t//1st circle\n    eyeball += smoothstep(.5, .45, length(vec2(eyeballUv.x, eyeballUv.y+.2))) - 1.; //intersect with 2d circle\n    eyeball = clamp (eyeball,0.,1.);\n    \n    vec4 col = vec4(1., .5, .5, eyeball);\n    \n    //iris\n    if(length(m) < .3) { uv.x -= sin(uv.y*15.+iTime*10.)*.01; }\n    if(length(m) < .14) { uv.x -= cos(uv.x*20.+iTime*30.)*.01; }\n    \n    \n    vec2 irisUv = vec2( uv.x*side + .1, uv.y + .2); //\"*side\" for squint\n    float iris = smoothstep(.40, .38, length(irisUv-m*.3));\n    iris*= noise(vec3(irisUv*300., 1.));\n    \n    col.rgb = mix (col.rgb, vec3 (0., .0, .0), iris);\n    \n    iris = smoothstep(.35, .32, length(irisUv-m*.3));\n    \n    col.rgb = mix (col.rgb, vec3 (1., 0., .0), iris);\n    \n    //pupil\n    float pupil = smoothstep(.6*(-length(m)+1.)*.5, .5*(-length(m)+1.)*.5, length(irisUv-m*.4));\n    \n    col.rgb = mix (col.rgb, vec3 (0., .0, .0), pupil);\n    \n    col = mix (colEyelid, col, col.a);\n    \n    return col;\n}\n\nvec4 Mouth (vec2 uv, vec4 head, vec2 m) {\n    uv -=.5;\n\n    vec4 col = vec4 (.0, .0, .0, 1.);\n    \n    float curve = (uv.x)*(uv.x)*-10.+.2;\t\t\t\t\t\t//smile\n    curve += (uv.x*(length(m))*2.)*(uv.x*(length(m))*2.)*30.;\t//angry, depend of m\n    col.a = smoothstep (.2, .3, uv.y+curve) * smoothstep (.7, .6, uv.y+curve); //draw band\n    col.a *= head.a;\n    return col;\n}\n\nvec4 Bestiole (vec2 uv, vec2 m) {\n    vec4 col = vec4 (0.);\n    \n    float side = sign(uv.x);//to unmirror later\n    uv.x = abs(uv.x); //mirror\n\n    vec4 head = Head(Within(uv, vec4(-.27,-.26,.27,.26)), m, 0.);\n    vec4 headOutLine = Head(Within(uv, vec4(-.2,-.19,.20,.19)), m, .5);\n    vec4 ear = Ear(Within(uv, vec4(-.1,-.15,.4,.26)), headOutLine, m);\n    \tear *= smoothstep(.7, .6, length(uv));// hide CACA of my Ear\n    vec4 mouth = Mouth(Within(uv, vec4(-.3,-.24,.3,-.2)), head, m);\n    vec4 eye1 = Eye(Within(uv, vec4(.02,-.01,.2,.16)), side, m);\n    vec4 eye2 = Eye(Within(uv, vec4(.06,-.15,.24,.02)), side, m);\n    \n    col = mix(col, ear, ear.a);\n    col = mix(col, head, head.a);\n    col = mix(col, eye1, eye1.a);\n    col = mix(col, eye2, eye2.a);\n    col.w -= mouth.w;\n    \n    return col;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec2 uv = fragCoord.xy/iResolution.xy;\n\tuv -= .5;\n    uv.x *= iResolution.x/iResolution.y;\n    \n    vec2 m = iMouse.xy/iResolution.xy;\n    m -= .5;\n    uv-= m*(.15-dot(uv, uv));\n    \n    vec4 col = vec4 (.0,.0,.0,1.);//+noise(vec3(uv*100.,(iTime*12.)))-noise(vec3(uv*90.,(iTime*12.)));\n    vec4 bestiole = Bestiole(uv, m);\n    \n    col = mix (col, bestiole, bestiole.a);\n    fragColor = col;\n    \n}","name":"Image","description":"","type":"image"}]}