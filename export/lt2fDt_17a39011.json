{"ver":"0.1","info":{"id":"lt2fDt","date":"1518558968","viewed":116,"name":"sound testing","username":"ShadowX","description":"sound","likes":4,"published":1,"flags":24,"usePreview":0,"tags":["gpusound"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define Q 133\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    vec2 uv = fragCoord/iResolution.xy;\n\n\tfloat z =  texelFetch( iChannel0, ivec2(Q,1),0 ).x;\n    vec3 col;\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"#define PI 3.14159265359\n#define TPI 6.28318530718\n\n\n//0 octave notes\t\t\tC\t\tC#\t\tD\t\tD#\t\tE\t\tF\t\tF#\t\tG\t\tG#\t\tA\t\tA#\t\tB\t\t\t\t\t\t\t\nfloat[] notes = float[12](16.055, 17.01 , 18.02 , 19.09 , 20.225, 21.43 , 22.705, 24.055, 25.485, 27.00 , 28.605, 30.305);\n\n//t = time; env = envelope (attack, decay, hold, release), s = sustain\nfloat adsr(float t, vec4 env, float s)\n{\n    float a = t/env.x;\n    float d = max(s, 1.0-(t-env.x)*(1.0-s)/env.y);\n    float r = (1.0 - max(0.0,t-(env.x+env.y+env.z))/env.w);\n    return max(0.,min(a, r*d));\n}\n\n\nfloat kick (float t){\n   return exp(-t*8.) * sin(TPI *t *432. * exp(-t*40.));\n    }\n\nfloat sine (float phase, float note) {\n    return sin (TPI*notes[0]*note*phase)*exp(-3.*phase);\n    }\n\nvec2 mainSound( in int samp, float time)\n{\n    float bnote = floor(mod(time, 4.)/2.)*4.0 + floor(mod(time+2., 4.)/2.)*3.4;\n    \n    float k = max(kick(mod (time, 2.)),kick(mod (time+.25, .5)));\n    float b = sine(mod (time+.125, .25), bnote);\n    \n    k = adsr(k, vec4(1.5, 1.0, 1.0, 1.0), 1.0)*1.75;\n    k *= k;\n    b = adsr(b, vec4(0.8, 4.0, 5.0, 1.5), 1.5)*0.85;\n    b *= b*b;\n        \n    // A 440 Hz wave that attenuates quickly overt time\n    //return vec2(sine(time)*exp(-3.0*time) );\n   return vec2(max(k, b));\n}","name":"Sound","description":"","type":"sound"}]}