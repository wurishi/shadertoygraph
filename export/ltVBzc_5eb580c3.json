{"ver":"0.1","info":{"id":"ltVBzc","date":"1543519581","viewed":187,"name":"tunnel_effect","username":"CynicRus","description":"another experiment.","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["tunnel"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define MAX_ITER 66\n\nvec3 hash( vec2 p )\n{\n    vec3 q = vec3( dot(p,vec2(127.1,311.7)), \n\t\t\t\t   dot(p,vec2(269.5,183.3)), \n\t\t\t\t   dot(p,vec2(419.2,371.9)) );\n\treturn fract(sin(q)*43758.5453);\n}\n//https://www.shadertoy.com/view/Xd23Dh\n\nfloat iqnoise( in vec2 x, float u, float v )\n{\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n\t\t\n\tfloat k = 1.0+63.0*pow(1.0-v,4.0);\n\t\n\tfloat va = 0.0;\n\tfloat wt = 0.0;\n    for( int j=-2; j<=1; j++ ) \n    for( int i=-2; i<=1; i++ )\n    {\n        vec2 g = vec2( float(i),float(j) );\n\t\tvec3 o = hash( p + g )*vec3(u,u,1.0);\n\t\tvec2 r = g - f + o.xy;\n\t\tfloat d = dot(r,r);\n\t\tfloat ww = pow( 1.0-smoothstep(0.0,1.414,sqrt(d)), k );\n\t\tva += o.z*ww;\n\t\twt += ww;\n    }\n\t\n    return va/wt;\n}\n\nvec2 cf(vec2 pt) {\n    pt = 1.2*pt;\n    float l = 1./length(pt);\n    pt = pt * l - vec2(l+2.*mod(iTime,6000.),0.0);\n    vec2 cf = vec2(0.659,0.772);\n    return cf*vec2(iqnoise(5.*pt,1.,1.)+0.240*l);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = ( fragCoord - .5*iResolution.xy ) / iResolution.y;\n    vec2 sp =cf(uv);\n\tvec2 p = sp*10.0;\n\tvec2 i = p;\n\tfloat c = 1.0;\n\t\n\tfloat inten = 1.1;\n\n\tfor (int n = 0; n < MAX_ITER; n++) \n\t{\n\t\tfloat t = iTime* (1.0 - (3.0 / float(n+7)));\n\t\ti = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(t + i.x));\n\t\tc += 14.0/length(vec2(p.x / (sin(i.x+t)/inten),p.y / (cos(i.y+t)/inten)));\n\t}\n\tc /= float(MAX_ITER);\n\tc = 1.2-sqrt(c);\n\tfragColor = vec4(vec3(c*c*c*c), 5.0) + vec4(0.0, 0.3, 0.5, 1.0);\n}","name":"Image","description":"","type":"image"}]}