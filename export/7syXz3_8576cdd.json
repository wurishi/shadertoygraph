{"ver":"0.1","info":{"id":"7syXz3","date":"1635003709","viewed":246,"name":"After Effects: Tint","username":"barton","description":"Possible implementation of Tint effect from After Effects","likes":3,"published":1,"flags":0,"usePreview":1,"tags":["effect","effects","tint","aftereffects","after"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// \n// Somewhere I made full replication of some plugins/effects from After Effects.\n// All plugins are written in C++ and use Metal for rendering.\n// So, I would like to demonstrate some of them.\n//\n// This shader shows possible implementation of Tint effect from After Effects.\n//\n// Effect Inputs:\n// - Map Black To: Color\n// - Map White To: Color\n// - Amount to Tint: 0...100\n// \n// The link about effect. The video is not mine, it's just for effect demonstration.\n// https://www.youtube.com/watch?v=f7EOumHGyMs\n// \n\nconst float amountMin = 0.0;\nconst float amountMax = 100.0;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvec3 tintAdjust(vec3 color, vec3 mapBlackTo, vec3 mapWhiteTo, float amount) {\n    float luminance = dot(color, luminanceWeighting);\n    return mix(color, mix(mapBlackTo, mapWhiteTo, luminance), amount);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 c = texture(iChannel0, uv);\n\n    float value = abs(sin(iTime * 0.5));\n    float amount = mix(amountMin, amountMax, value);\n    float amountNormal = amount/(amountMax - amountMin);\n    float targetAmount = mix(0.0, 1.0, amountNormal);\n    \n    vec4 mapBlackTo = vec4(1, 0, 0, 1);\n    vec4 mapWhiteTo = vec4(0, 0, 1, 1);\n    \n    c.rgb = tintAdjust(c.rgb, mapBlackTo.rgb, mapWhiteTo.rgb, targetAmount);\n    \n    fragColor = c;\n}","name":"Image","description":"","type":"image"}]}