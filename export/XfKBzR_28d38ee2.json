{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"#define PI (radians(180.))\n#define PI2 (radians(360.))\n\n#define ROT_SPEED (3.)\n#define ZOOM_SPEED (1.)\n#define NUM_COLOURS (5.)\n\n// based on https://iquilezles.org/articles/palettes/\nvec3 palette(in float t) {\n    return vec3(.8, .1, .4) + .2 * cos(PI2 * (t + .25));\n}\n\n// https://gist.github.com/yiwenl/3f804e80d0930e34a0b33359259b556c\nvec2 rotate(in vec2 v, in float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, s, -s, c);\n\treturn m * v;\n}\n\n// Taxicab distance on rotated axes\n// https://en.wikipedia.org/wiki/Taxicab_geometry\nfloat taxi_rot(in vec2 p, in vec2 q, in float r) {\n    vec2 diff = abs(rotate(p - q, r));\n    return diff.x + diff.y;\n}\n\nfloat oct_rot(in vec2 p, in vec2 q, in float r) {\n    return min(\n        taxi_rot(p, q, r),\n        taxi_rot(p, q, r + PI / 4.)\n    );\n}\n\nfloat in_square(in vec2 p, in vec2 q, float angle, float size) {\n    return smoothstep(0., 3. / iResolution.y, oct_rot(p, q, angle) - size);\n}\n\nvec3 sq(in vec3 current, in vec3 new, in vec2 p, in vec2 q, in float size) {\n    return mix(new, current, in_square(p, q, mod(ROT_SPEED * size, PI2), size));\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 coord) {\n    vec2 uv = coord/iResolution.x;\n    \n    vec2 c = vec2(0.5, 0.5 * iResolution.y / iResolution.x);\n\n    vec3 col = vec3(0.);\n    for (int i = 40; i > 0; i--) {\n        // sqrt(1.75) obtained through trial and error\n        // attempting to make the shapes never overlap.\n        col = sq(col, palette(float(i) / NUM_COLOURS), uv, c,\n            (pow(sqrt(1.75), (float(i) + mod(iTime * ZOOM_SPEED, NUM_COLOURS))) * .001) * 0.1);\n    }\n\n    fragColor = vec4(col, 0.);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XfKBzR","date":"1733700289","viewed":47,"name":"rose spiral [mag]","username":"magnet_powered","description":"Spiral-y thing made from 16-pointed shapes. Think I'm over-tuning this so I'm going to leave it as-is for now, before I tinker too far and ruin it.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["spiral"],"hasliked":0,"parentid":"XfyfRz","parentname":"square spiral [mag]"}}