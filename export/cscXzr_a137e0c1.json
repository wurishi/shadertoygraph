{"ver":"0.1","info":{"id":"cscXzr","date":"1679285571","viewed":112,"name":"Learn Complex Flow 2","username":"Chango","description":"Use mouse to change center\n\nAnd learn complex flow from [url]https://complex-analysis.com/content/complex_potential_basic_examples.html[/url]\nSometimes ChatGPT get the right derivative,sometimes it just won't correct its error...","likes":9,"published":1,"flags":32,"usePreview":0,"tags":["flow","complex","particle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec3 col = texture(iChannel0,uv).rgb;\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"bool In01(vec2 uv)\n{\nreturn uv.x>=0.0&&uv.x<=1.0&&uv.y>=0.0&&uv.y<=1.0;\n}\n\n#define PI 3.1415926\n\n\n//### Not important, color related\n//https://www.shadertoy.com/view/4dVBzz\n#define M1 1597334677U     //1719413*929\n#define M2 3812015801U     //140473*2467*11\n#define M3 3299493293U     //467549*7057\n\n#define F0 (1.0/float(0xffffffffU))\n\n#define hash(n) n*(n^(n>>15))\n\n#define coord1(p) (p*M1)\n#define coord2(p) (p.x*M1^p.y*M2)\n#define coord3(p) (p.x*M1^p.y*M2^p.z*M3)\n\nfloat hash1(uint n){return float(hash(n))*F0;}\nvec2 hash2(uint n){return vec2(hash(n)*uvec2(0x1U,0x3fffU))*F0;}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"//Do particle draw\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.y;\n    vec3 col = texture(iChannel0,fragCoord/iResolution.xy).rgb;\n    if(int(floor(iTime*5.))%2==0)\n    {\n     vec2 pos = (hash2(uint(iFrame*1000+986612)))*(1.0,iResolution.x/iResolution.y);\n     //pos = pos-vec2(0.5);\n     //pos*=0.4;\n     //pos+=vec2(0.5);\n        if(length(uv-pos)<0.02)\n        {\n            col = vec3(hash2(uint(100000.*iTime)),0.);\n        }\n    }\n    fragColor = vec4(col,1.0);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"//Do velocity update\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.y;\n    //Update velocity\n    \n    //uv.y+=0.1*iTimeDelta;\n    \n    //float k = 0.5;\n    //uv.x+=iTimeDelta*k*uv.x;\n    //uv.y+=-iTimeDelta*k*uv.y;\n    float cx = 1.0*(1.0+sin(iTime));\n    if(iMouse.z>0.)\n    {\n    cx = iMouse.x/iResolution.y;\n    }\n    float cy = 0.5;\n    if(iMouse.z>0.)\n    {\n    cy = iMouse.y/iResolution.y;\n    }\n    uv-=vec2(cx,cy);\n    \n    float r2 = (uv.x*uv.x+uv.y*uv.y);\n    float k = 0.5/2.0/PI/r2;\n    uv.x+=-iTimeDelta*k*uv.y;\n    uv.y+=iTimeDelta*k*uv.x;\n    \n    uv+=vec2(cx,cy);\n    \n    vec3 col = vec3(0.);\n    //if(In01(uv))\n    {\n        col = texture(iChannel0,uv*iResolution.y/iResolution.xy).rgb;\n    }\n    fragColor = vec4(col,1.0);\n}","name":"Buffer B","description":"","type":"buffer"}]}