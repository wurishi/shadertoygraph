{"ver":"0.1","info":{"id":"sttGz8","date":"1635729026","viewed":110,"name":"hyperbolic df","username":"do","description":"hyperbolic df","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["log"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Hyperbola\n//2020\n//do\n\nmat2 m = mat2(0.8,0.6,-0.6,0.8);\n\nconst int seed = 1111;\n\nfloat h(float p) {\n\np = fract(p*0.1493);\np += p * (float(seed) * 0.000001); \nreturn p;\n\n}\n\nfloat n(vec2 p) {\nreturn sin(p.x)*sin(p.y);\n}\n\nfloat f6(vec2 p) {\n\n    float f = 1.;\n\n    f += 0.5      * n(p); p = m*p*2.01;\n    f += 0.25     * n(p); p = m*p*2.02;\n    f += 0.125    * n(p); p = m*p*2.04;\n    f += 0.0625   * n(p); p = m*p*2.03;\n    f += 0.0325   * n(p); p = m*p*2.06;\n    f += 0.015625 * n(p);\n    return f/0.92;    \n\n}\n\nfloat dd(vec2 p) {\n\nvec2 q = vec2(f6(p + vec2(0.0,1.0)),\n              f6(p + vec2(h(103.)*25.,1.5)));\n\nvec2 r = vec2(f6(p + 4.0 * q + vec2(h(144.)*45.,4.8)),\n              f6(p + 4.0 * q + vec2(6.8,9.1)));\n\nreturn f6(p + 4.0 * r);\n}\n\nfloat hyperbola(vec3 p) { \n\nvec2 l = vec2(length(p.xz) ,-p.y);\nfloat a = 0.5;\nfloat d = sqrt((l.x+l.y)*(l.x+l.y)- 4. *(l.x*l.y-a)) + 0.5; \nreturn (-l.x-l.y+d)/2.0;\n\n}\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord) {\n \n    vec3 col;\n    vec2 uv = -1. + 2. * fragCoord.xy / iResolution.xy; \n    uv.x *= iResolution.x/iResolution.y; \n\n    float ra = iTime*0.1;\n    mat2 r = mat2(cos(ra),sin(ra),-sin(ra),cos(ra));\n\n    float fov = 1.0;\n    float a = -0.75;\n    \n    vec3 p = vec3(0.0,-0.75,-1.0);\n\n    vec3 d = vec3(uv*fov,2.);\n    d.yz *= mat2(cos(a),sin(a),-sin(a),cos(a));\n\n    for(int i = 0; i < 100; ++i) {\n        p += d * hyperbola(p);        \n    }\n\n    float fd = 3.0;\n\n    float fs = 2.;\n    float fa = .125;\n    \n    float nl = dd(p.xz*r);\n    nl += f6(p.xz+f6(p.yx)) * dot(uv,uv)*.08;\n    col = vec3(nl * log((p.y+fd)*fs)/log((fd-fa)*fs));\n    //col = pow(col,vec3(0.4545));\n    \n    fragColor = vec4(sqrt(col),1.);\n\n}\n","name":"Image","description":"","type":"image"}]}