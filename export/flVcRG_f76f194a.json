{"ver":"0.1","info":{"id":"flVcRG","date":"1661715940","viewed":170,"name":"Bump mapping from scratch","username":"FreeFull","description":"Just an experiment in writing bump mapping from scratch","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["2d","bumpmapping"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.y * 2.0;\n\n    float height = -length(texture(iChannel0, uv)) * iResolution.y / 30.0;\n    vec2 dF = vec2(dFdx(height), dFdy(height)) - 1.0;\n    vec3 bump = normalize(vec3(dF.x + 1.0, dF.y + 1.0, 4.0)) / 2.0;\n    vec3 light = vec3(iMouse.xy / iResolution.y* 2.0, 0.1);\n    float r = distance(light, vec3(uv, 0.8));\n    vec3 dir = normalize(light - vec3(uv, 0.0));\n    vec3 col = vec3(dot(dir, bump)/(r*r));//*texture(iChannel0, uv).rgb*2.0;\n\n    // Output to screen\n    fragColor = vec4(sqrt(col),1.0);\n}","name":"Image","description":"","type":"image"}]}