{"ver":"0.1","info":{"id":"MtVfWR","date":"1542253188","viewed":286,"name":"Box Tunnel (or Pyramid)","username":"spelman7","description":"An attempt at a uniform rectangular distance field with a moving center. My first shadertoy attempt. Fun to trick your brain into thinking the center point is at a higher or lower altitude than the rest of the field. ","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["distancefield","tunnel","palette","stripes","neon"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n\n// palette generator from iq: https://www.shadertoy.com/view/ll2GD3\nvec3 palette (float t) {\n\tvec3 a = vec3(0.5,0.5,0.5);\n\tvec3 b = vec3(0.5,0.5,0.5);\n\tvec3 c = vec3(2.0,1.0,0.0);\n\tvec3 d = vec3(0.5,0.20,0.25);\n\treturn a + b*cos( 6.28318*(c*t+d) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // set up uv coordinate system\n    vec2 center = vec2(sin(iTime*0.25)/2., cos(iTime*0.31)/2.);\n\tvec2 p = ((2. * fragCoord.xy) - iResolution.xy) / iResolution.xy;\n    \n    // create uniform rectangular distance field\n\tfloat left = step(p.x, center.x);\n\tfloat bot = step(p.y, center.y);\n\tfloat pNewX1 = (p.x - center.x)/(1.0 - center.x);\n\tfloat pNewY1 = (p.y - center.y)/(1.0 - center.y);\n\tfloat pNewX2 = (p.x - center.x)/(-1.0 - center.x);\n\tfloat pNewY2 = (p.y - center.y)/(-1.0 - center.y);\n\tvec2 pNew = vec2(pNewX2*left+pNewX1*(1.0-left), pNewY2*bot+pNewY1*(1.0-bot));\n\tfloat dist = max(abs(pNew.x), abs(pNew.y));\n    \n    // generate your palette color based on the distance field\n\tvec3 palette = palette(fract(iTime*0.1+dist));\n    \n    // transform the distance field to create boxes with highlights\n\tfloat boxes = pow(dist, .3);\n\tboxes = sin(boxes * 300.) * 0.5 + 0.5;\n    boxes = smoothstep(-0.15, 0.95, boxes);\n\tfloat highlight = pow((boxes), 9.0)/2.;\n    \n    // final color\n\tvec3 color = (palette * boxes) + (palette * highlight);\n    color *= sqrt(dist);\n\tfragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}