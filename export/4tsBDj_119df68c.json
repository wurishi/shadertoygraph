{"ver":"0.1","info":{"id":"4tsBDj","date":"1513359747","viewed":291,"name":"Colored particles","username":"bytewave","description":"Colored particles","likes":9,"published":1,"flags":32,"usePreview":0,"tags":["coloredparticles"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    fragColor = texture(iChannel0,uv);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\nvec2 rand(float p)\n{\n    float x = fract(sin(p * 31.16544)*213.351654);\n    float y = fract(sin(p * 37.16584)*23.351654);\n    return vec2(x,y)-0.5;\n}\n\nfloat circle(vec2 uv,float Size)\n{\n    return clamp(  Size - length(uv)*31.,0.,1.);    \n}\n\nvec2 Turbulance(vec2 p,float freq,float amp,float iteration)\n{    \n    for(float i = 0.;i< iteration;i++)\n    {\n        p.x += sin(p.y * freq) * amp;\n        p.y += sin(p.x * freq) * amp;\n        freq *= 2.;\n        amp *= 0.5;\n    }\n    return p;\n}\n\nvec3 hsv2rgb( in vec3 c )\n{\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n\treturn c.z * mix( vec3(1.0), rgb, c.y);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 oriUv = uv;\n    \n    uv -= 0.5;\n    uv.x *= iResolution.x / iResolution.y;\n    float disto = 1.125;\n    \n    //uv = mix(Turbulance(uv,13.,.05,8.),uv,sin(iTime)*0.5+0.5);\n    \n    vec4 colo = vec4(0.);\n    float pDuration = 1.;\n    float Speed = 0.5;\n    float RandomSpeed = 1.;\n    float pStartSize = 1.4;    \n    float pEndSize = 8.0;\n    \n    \n    for(float i = 0.;i < 100.;i++)\n    {\n        float particleRId = fract((sin(32.32165465*31.06549874*i*i)*0.5+0.5) *321.654);\n        \n        float pRatio = i / 100.;\n        float Life = mod(iTime+particleRId,pDuration);\n        \n        vec2 startPos = vec2(0.,0.)*0.5;\n        vec2 r = normalize(rand(particleRId)) * 1.4f;\n        \n        \n        //r = Turbulance(r,sin(iTime),.1,1.);\n        \n        vec2 MoveUp = vec2(sin(iTime),cos(iTime)) * 1.5*Life*Speed*0.;\n        \n        vec2 ParticlePos = (uv-startPos) + r*RandomSpeed*Life - MoveUp;\n        \n        \n        float pSize = mix(pStartSize,pEndSize,Life) ;\n        float particle = circle(ParticlePos, pSize);\n        \n        colo += particle * vec4(hsv2rgb(vec3(Life*0.2+iTime*.5,1.,1.)),1.) * (1. - Life)*1.1;\n    }\n    vec4 old = texture(iChannel0,oriUv);\n       \n\tfragColor = colo*0.1 + old* 0.9;\n    \n    \n}","name":"Buf A","description":"","type":"buffer"}]}