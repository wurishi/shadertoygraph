{"ver":"0.1","info":{"id":"XXGSRy","date":"1720075442","viewed":34,"name":"HW4_Kaleidoscopic_Day","username":"EurekaChen","description":"Day night cycle + kaleidoscope","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsX3Rn","filepath":"/media/a/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","previewfilepath":"/media/ap/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4df3Rr","filepath":"/media/a/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","previewfilepath":"/media/ap/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265359\nfloat sdCircle ( in vec2 p, in vec2 pos, in float r)\n{\n    return length(p - pos)-r;\n}\n\nmat2 rotate2d(float angle){\n    return mat2(cos(angle),-sin(angle),\n                sin(angle),cos(angle));\n}\n\n//Water effect from\n//ref: https://www.shadertoy.com/view/XcKXW3\nconst float waterHeight = 0.1;\nconst vec3 waterCol = vec3(0.51, 0.74, 0.77);\nconst float waterColFactor = 0.5;\nvec2 Water(vec2 p)\n{\n    vec2 water = vec2(p.x,-p.y-waterHeight*2.);\n    water.y += sin(p.y*100.+iTime*2.)/50.;\n    //water.x += sin(p.x*100.+iTime*2.)/80.;\n    \n    \n    p = mix(water, p, clamp(sign(p.y+waterHeight),0.,1.));\n    //p.x += sin(p.y*100.)/30.;\n    return p;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (2.0*fragCoord-iResolution.xy) / iResolution.y;\n    uv = Water(uv);\n    vec4 imageDay = texture(iChannel0, uv * rotate2d(iTime / 2.0));\n    vec4 imageNight = texture(iChannel1, uv * rotate2d(iTime / 2.0));\n\n    vec3 colorA = vec3(0.426,0.902,0.926);\n    vec3 colorB = vec3(0.129,0.574,0.686);\n    vec3 colorC = vec3(0.160,0.180,0.285);\n    vec3 colorD = vec3(0.324,0.410,0.460);\n    float pct = 0.5*(sin(iTime)+1.0);\n    \n    vec3 bgDay = mix(mix(colorA, colorB, uv.y), imageDay.xyz, 0.1);\n    vec3 bgNight = mix(mix(colorC, colorD, uv.y), imageNight.xyz, 0.1);\n    vec3 col = mix(bgDay, bgNight, sin(iTime) *0.5 + 0.5);\n    \n    vec2 posSun = vec2(sin(iTime + PI/2.0), cos(iTime + PI/2.0) * 0.75);\n    vec2 posMoon = posSun * vec2(-1.0, -1.0);\n    vec4 sun = vec4(vec3(0.95,0.85,0.2),smoothstep(0.01,0.0,sdCircle(uv,posSun,0.2)));\n    vec4 moon = vec4(vec3(1.0), smoothstep(0.01,0.0, max(sdCircle(uv,posMoon,0.2), -sdCircle(uv,posMoon + vec2(0.04,0.04),0.18))));\n    \n    col = mix(col, sun.xyz, sun.w);\n    col = mix(col, moon.xyz, moon.w);\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}