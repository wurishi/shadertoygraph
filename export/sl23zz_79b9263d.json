{"ver":"0.1","info":{"id":"sl23zz","date":"1623278321","viewed":95,"name":"extrude","username":"brackets1","description":"sdf","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["sdf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat sdr_ndot(vec2 a, vec2 b) { return a.x*b.x - a.y*b.y; }\nfloat sdRhombus(in vec2 p, in vec2 b) {\n    vec2 q = abs(p);\n    float h = clamp((-2.0*sdr_ndot(q,b)+sdr_ndot(b,b))/dot(b,b),-1.0,1.0);\n    float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n    return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}vec3 rotate3d(vec3 p, vec3 a) {\n\tvec3 rv;\n\tfloat c;\n\tfloat s;\n\tc = cos(a.x);\n\ts = sin(a.x);\n\trv.x = p.x;\n\trv.y = p.y*c+p.z*s;\n\trv.z = -p.y*s+p.z*c;\n\tc = cos(a.y);\n\ts = sin(a.y);\n\tp.x = rv.x*c+rv.z*s;\n\tp.y = rv.y;\n\tp.z = -rv.x*s+rv.z*c;\n\tc = cos(a.z);\n\ts = sin(a.z);\n\trv.x = p.x*c+p.y*s;\n\trv.y = -p.x*s+p.y*c;\n\trv.z = p.z;\n\treturn rv;\n}\nconst float p_o63172_ax = 18.000000000;\nconst float p_o63172_ay = -28.000000000;\nconst float p_o63172_az = -29.000000000;\nconst float p_o63177_d = 0.430000000;\nconst float p_o63176_x = 0.000000000;\nconst float p_o63176_y = 0.000000000;\nconst float p_o63173_w = 0.300000000;\nconst float p_o63173_h = 0.290000000;\nconst float p_o63173_cx = 0.000000000;\nconst float p_o63173_cy = 0.000000000;\nconst float p_o63174_w = 0.200000000;\nconst float p_o63174_h = 0.200000000;\nconst float p_o63174_cx = 0.000000000;\nconst float p_o63174_cy = 0.000000000;\nvec2 o63178_input_sdf(vec3 p) {\nfloat o63173_0_1_sdf2d = sdRhombus((((rotate3d((p), -vec3(p_o63172_ax, p_o63172_ay, p_o63172_az)*0.01745329251)).xz+vec2(0.5))-vec2(p_o63176_x, p_o63176_y))-vec2(p_o63173_cx+0.5, p_o63173_cy+0.5), vec2(p_o63173_w, p_o63173_h));\nvec2 o63174_0_d = abs((((rotate3d((p), -vec3(p_o63172_ax, p_o63172_ay, p_o63172_az)*0.01745329251)).xz+vec2(0.5))-vec2(p_o63176_x, p_o63176_y))-0.5*vec2(p_o63174_cx+1.0, p_o63174_cy+1.0))-vec2(p_o63174_w, p_o63174_h);\nfloat o63174_0_1_sdf2d = length(max(o63174_0_d,vec2(0)))+min(max(o63174_0_d.x,o63174_0_d.y),0.0);\nfloat o63175_0_1_sdf2d = min( o63173_0_1_sdf2d, o63174_0_1_sdf2d);\nfloat o63176_0_1_sdf2d = o63175_0_1_sdf2d;\nvec2 o63177_0_w = vec2(o63176_0_1_sdf2d,abs((rotate3d((p), -vec3(p_o63172_ax, p_o63172_ay, p_o63172_az)*0.01745329251)).y)-p_o63177_d);\nfloat o63177_0_1_sdf3d = min(max(o63177_0_w.x,o63177_0_w.y),0.0)+length(max(o63177_0_w,0.0));\nfloat o63172_0_1_sdf3d = o63177_0_1_sdf3d;\n\nreturn vec2(o63172_0_1_sdf3d, 0.0);\n}\nvec2 raymarch_o63178(vec2 uv) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o63178_input_sdf(p);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o63178(vec3 p) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, 1.0);\n\t}\n\n\tfloat d = o63178_input_sdf(p).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o63178_input_sdf(p-vec3(e, 0.0, 0.0)).x,\n        o63178_input_sdf(p-vec3(0.0, e, 0.0)).x,\n        o63178_input_sdf(p-vec3(0.0, 0.0, e)).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\nfloat minSize = min(iResolution.x, iResolution.y);\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (fragCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o63178_0_d = raymarch_o63178((UV));\nfloat o63178_0_1_f = 1.0-o63178_0_d.x;\nfragColor = vec4(vec3(o63178_0_1_f), 1.0);\n}\n","name":"Image","description":"","type":"image"}]}