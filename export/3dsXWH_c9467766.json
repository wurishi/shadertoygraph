{"ver":"0.1","info":{"id":"3dsXWH","date":"1551313546","viewed":376,"name":"Colorful Cell Noise","username":"IsaacAndersen","description":"Playing around with Cell Noise from The Shader Book, trying to build some cool color patterns.","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["test"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.141592\n\nvec2 random2( vec2 p ) {\n    return fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\n}\n\nfloat cubicInOut(float t) {\n  return t < 0.5\n    ? 4.0 * t * t * t\n    : 0.5 * pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\nvoid mainImage( out vec4 O, in vec2 U) {\n\n    float t = iTime/3.0;\n    //float t2 = PI*(floor(t/5.0) + cubicInOut(fract(t/5.0)));\n    \n    vec2 R = iResolution.xy;\n    vec2 uv = 1.25*(U-0.5*R)/R.y;\n    \n    //uv *= 1.2 + 0.4*sin(t2);\n    \n    //float angle = t2;\n    \n    //uv *= mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n    uv *= 5.0;\n    \n    vec2 id = floor(uv);\n    vec2 gv = fract(uv);\n\n    vec3 col = vec3(0);\n    \n    float mD = 10.0;\n    \n    vec2 thisPoint = random2(id);\n    \n    vec2 cellID = vec2(0,0);\n    \n    for (int k = 0; k < 25; k++) {\n        vec2 offs = vec2(k%5-2,k/5-2);\n        \n        vec2 neighborPos = random2(id+offs)+offs;\n        \n        neighborPos += cos(2.0*t + 6.2831*neighborPos);\n\n        vec2 diff = gv-neighborPos;\n        \n        float d = length(diff);\n        \n        if (mD > d) {\n            mD = d;\n            cellID = fract(neighborPos);\n        }\n    }\n    \n    vec3 colorGrad = 1.5*vec3(smoothstep(-5.,5.,uv.x),\n                          0,\n                          smoothstep(5.,-5.,uv.x)); \n\n    vec3 cellGrad = vec3(0,sin(PI*cellID.y),0);\n    \n    vec3 mixStuff = colorGrad;\n    \n    vec3 mixed = mix(cellGrad, colorGrad, colorGrad); \n    \n    \n    col += smoothstep(1.5,0.,mD)*mixed;\n    \n    O = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}