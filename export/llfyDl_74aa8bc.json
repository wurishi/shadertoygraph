{"ver":"0.1","info":{"id":"llfyDl","date":"1506938221","viewed":280,"name":"Magnetic Field","username":"themasmo","description":"a Magnetic Field generated from two magnets","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["line","circle","magnetic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float _OutlineWidth = 0.02;\nfloat _LineWidth = 0.08;\nvec4 _OutlineColor = vec4(0.,0.,0.,0.);\nvec4 _Red = vec4(1.0,0.0,0.0,1.0);\nvec4 _Blue = vec4(0.0,0.0,1.0,1.0);\n\n//======================\n// Line functions\n//======================\nfloat line(vec2 pos, vec2 point1, vec2 point2, float width) {\n    vec2 dir0 = point2 - point1;\n    vec2 dir1 = pos - point1;\n    float h = clamp(dot(dir0, dir1)/dot(dir0, dir0), 0.0, 1.0);\n    float d = (length(dir1 - dir0 * h) - width * 0.5);\n    return d;\n}\nvec4 line_with_color(int colore, vec2 pos, vec2 point1, vec2 point2, float width) {   \t\t\n\n\tfloat d = line(pos, point1, point2, width);\n\tfloat w = fwidth(0.5*d) * 2.0;\n\tvec4 layer0 = vec4(_OutlineColor.rgb, 1.-smoothstep(-w, w, d - _OutlineWidth));\n\tvec4 layer1;\n\tif(colore==0)\n\t\tlayer1 = vec4(_Red.rgb, 1.-smoothstep(-w, w, d));\n\telse\n\t\tlayer1 = vec4(_Blue.rgb, 1.-smoothstep(-w, w, d));\n\t\n\treturn mix(layer0, layer1, layer1.a);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 p = 4.0*(fragCoord.xy / iResolution.xy)-2.0;\n\tvec2 m = 4.0*(iMouse.xy / iResolution.xy)-2.0;\n    \n   \tvec2 P1 = vec2(m.x,m.y); //vec2(iMouse.x,iMouse.y);\n\tvec2 P2 = vec2(1.0,0.0);\n\tvec4 F=vec4(0.0,0.0,0.0,0.0);\n    \n\tfor(float y=-2.0;y<2.0;y+=0.25)\n\t{\n\t\tfor(float x=-2.0;x<2.0;x+=0.25)\n\t\t{\n\t\t\t//\n\t\t\tfloat tdx=0.0;\n\t\t\tfloat tdy=0.0;\n\t\t\t\n\t\t\tfloat d=(P1.x-x)*(P1.x-x)+(P1.y-y)*(P1.y-y);\n\t\t\tfloat dx=P1.x-x;\n\t\t\tfloat dy=P1.y-y;\n\t\t\tif(d!=0.0)\n\t\t\t{\n\t\t\t\ttdx+=dx/d;\n\t\t\t\ttdy+=dy/d;\n\t\t\t}\n\t\t\t//\n\t\t\td=(P2.x-x)*(P2.x-x)+(P2.y-y)*(P2.y-y);\n\t\t\tdx=x-P2.x;\n\t\t\tdy=y-P2.y;\n\t\t\tif(d!=0.0)\n\t\t\t{\n\t\t\t\ttdx+=dx/d;\n\t\t\t\ttdy+=dy/d;\n\t\t\t}\n\t\t\t//\n\t\t\tfloat tan=atan(tdy,tdx);\n\t\t\t//\n\t\t\t\t\t\tvec2 pl1=vec2(x,y);\n\t\t\tvec2 pl2=vec2(x+cos(tan)/20.0,y+sin(tan)/20.0);\n\t\t\tvec2 pl3=vec2(x+cos(tan)/15.0,y+sin(tan)/15.0);\n\t\t\tvec4 linea1=line_with_color(0, p,pl1,pl2,0.04);\t\t\t\n\t\t\tvec4 linea2=line_with_color(1, p,pl2,pl3,0.04);\t\t\t\n\t\t\n\t\t\tF = mix(F,linea1,linea1.a*0.9);\n\t\t\tF = mix(F,linea2,linea2.a*0.9);\n\n            \n\t\t\t//F = mix(F,linea,linea.a*0.9);\n\t\t}\n\t}\n\n\tfloat d1=sqrt( (P1.x-p.x)*(P1.x-p.x)+(P1.y-p.y)*(P1.y-p.y) );\n\tfloat d2=sqrt( (P2.x-p.x)*(P2.x-p.x)+(P2.y-p.y)*(P2.y-p.y) );\n\t\n\tif(d1<0.05)\n\t\tF = vec4(1.0,0.0,0.0,1.0);\n\tif(d2<0.05)\n\t\tF = vec4(0.0,0.0,1.0,1.0);\n\n    fragColor = vec4(F);\n}","name":"Image","description":"","type":"image"}]}