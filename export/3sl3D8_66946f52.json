{"ver":"0.1","info":{"id":"3sl3D8","date":"1546039601","viewed":168,"name":"Wet Tunnel","username":"MasterQ32","description":"coded at UNC'18","likes":4,"published":1,"flags":64,"usePreview":0,"tags":["something"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sfGRn","filepath":"/media/a/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","previewfilepath":"/media/ap/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dX3zn","filepath":"/media/a/550a8cce1bf403869fde66dddf6028dd171f1852f4a704a465e1b80d23955663.png","previewfilepath":"/media/ap/550a8cce1bf403869fde66dddf6028dd171f1852f4a704a465e1b80d23955663.png","type":"cubemap","channel":2,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Mls3RN","filepath":"https://soundcloud.com/nailmoth/roll20-fantasy-cave-ambient","previewfilepath":"https://soundcloud.com/nailmoth/roll20-fantasy-cave-ambient","type":"musicstream","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 rotate(vec3 v, float a)\n{\n \treturn vec3(\n    \tv.x * sin(a) - v.z * cos(a),\n        v.y,\n        v.x * cos(a) + v.z * sin(a)\n    );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord /iResolution.xy;\n    \n    if(iMouse.z > 0.0)\n    {\n    \tfragColor = texture(iChannel3, uv);\n    \treturn;\n    }\n    \n    uv *= 2.0;\n    uv -= 1.0;\n    uv.x *= (iResolution.x / iResolution.y);\n    \n    uv.x += 0.5 * sin(0.7 * iTime);\n    uv.y += 0.3 * cos(0.4 * iTime);\n    \n    vec2 src = vec2(\n        atan(uv.y, uv.x) / 3.14 + 0.2 * sin(iTime) / 3.0,\n        1.0 / length(uv)        + 0.3 * iTime\n    );\n    \n    vec4 offset = texture(iChannel1, 0.5 * src);\n    \n    // Output to screen\n    fragColor = 2.0 * clamp(pow(texture(iChannel0, src + 0.25 * vec2(0, offset.x) / length(uv)), vec4(3.0)) - 0.0, vec4(0.0), vec4(1.0));\n    // fragColor.rgb = mix(fragColor.rgb, vec3(0.3, 0.2, 0), 0.5);\n    // fragColor.rgb = pow(mix(fragColor.rgb, vec3(0.5), 0.3) + vec3(0.3, 0.2, 0.0), vec3(1.9));\n    \n    fragColor.rgb *= vec3(\n    \t0.3 + 0.8 * clamp(dot(vec3(-1.0, 0.0, -1.0), rotate(vec3(1,0,0), atan(uv.y, uv.x))), 0.0, 1.0)\n        \n    );\n    \n    uv.y *= -1.0;\n    \n    fragColor.rgb *= pow(clamp(length(uv) - (0.1 + 0.03 * sin(10.3 * iTime)), 0.0, 1.0), 0.95);\n    \n    fragColor -= 0.2 * texture(iChannel2, reflect(\n        rotate(vec3(uv, 0.05), 3.3 *iTime),\n        normalize(vec3(normalize(uv), 0) + 0.4 * (fragColor.xyz - vec3(0.5)))));\n    \n    float radius = 0.75;\n    \n    radius += 0.03 * texture(iChannel3, vec2(atan(uv.y, uv.x), 0.5 + iTime)).r;\n    \n    if(length(uv) < radius)\n    {\n        fragColor.rgb *= 1.5 * vec3(0.6,0.6,0.96);\n        fragColor.rgb += 0.1 * vec3(0.6,0.6,0.96);\n    \n        // vec3(0.6,0.6,0.96)\n        fragColor.rgb += 4.0 * texture(iChannel3, vec2(0.6, 0.7)).rrr * (1.0 - clamp(\n            10.0 * fract(0.3 * iTime + texture(iChannel1, 0.2 * uv).r),\n            0.0,\n            1.0)) * \n            pow((1.0 - clamp(length(uv) - 0.1, 0.0, 1.0)), 4.3);\n        \n        fragColor.rgb += vec3(1.0, 1.0, 2.0) * texture(iChannel3, vec2(1.3 * iTime, 0)).rrr * (1.0 - clamp(\n            0.4 + 10.0 * fract(0.7 * iTime + texture(iChannel1, 0.5 * uv).r + 0.5),\n            0.3,\n            1.0)) * \n            pow((1.0 - clamp(length(uv) - 0.1, 0.0, 1.0)), 4.3);\n    }\n}\n","name":"Image","description":"","type":"image"}]}