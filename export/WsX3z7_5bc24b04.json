{"ver":"0.1","info":{"id":"WsX3z7","date":"1545382124","viewed":251,"name":"おじさんが舞降る夜","username":"TakkuMattsu","description":"おじさんが舞降る夜","likes":10,"published":1,"flags":64,"usePreview":0,"tags":["shader"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XtsGRN","filepath":"https://soundcloud.com/eddies-christmas-songs/santa-claus-is-coming-to-town","previewfilepath":"https://soundcloud.com/eddies-christmas-songs/santa-claus-is-coming-to-town","type":"musicstream","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// 参考\n// https://www.shadertoy.com/view/MscXD7\n\n#define _SnowflakeAmount 200\t// Number of snowflakes\n#define _BlizardFactor 0.2\t\t// Fury of the storm !\n\nvec2 uv;\n\nfloat rnd(float x)\n{\n    return fract(sin(dot(vec2(x+47.49,38.2467/(x+2.3)), vec2(12.9898, 78.233)))* (43758.5453));\n}\n\nfloat drawCircle(vec2 center, float radius)\n{\n    // smoothstep:エルミート補完を行う\n    return 1.0 - smoothstep(0.0, radius, length(uv - center));\n}\n\nvec3 drawCircleRGB(vec2 center, float radius)\n{\n    float v = drawCircle(center, radius);\n    return vec3(v, v, v);\n}\n\n// ↓ここから自作\n\n// center は 0,0 - 1,1, の値\n// position は 左下の場所\n// size は左下からの大きさ\nvec3 drawTexture(vec2 uv, vec2 position, float size) {\n    // position外の描画はしない\n    if (uv.x < position.x || \n        uv.y < position.y || \n        uv.x >= position.x + size || \n        uv.y >= position.y + size) {\n      return vec3(0, 0, 0);  \n    }\n    // size分にtextureを調整する\n    vec2 texCoord = (uv - position) / size;\n    vec4 tex = texture(iChannel0, texCoord);  \n    return tex.xyz;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    uv = fragCoord.xy / iResolution.x;\n    \n    fragColor = vec4(0.0, 0.0, 0.0, 1.0);\n    if (fragCoord.x > iMouse.x &&  iMouse.z>0.0)\n    {\n        // 中心におじさんを配置\n        fragColor.rgb += drawTexture(uv, vec2(0.2, 0.0), 0.5).rgb;\n    \tfloat j;\n        for(int i=0; i<_SnowflakeAmount; i++)\n        {\n            j = float(i);\n            float speed = 0.3+rnd(cos(j))*(0.7+0.5*cos(j/(float(_SnowflakeAmount)*0.25)));\n            vec2 center = vec2((0.25-uv.y)*_BlizardFactor+rnd(j)+0.1*cos(iTime+sin(j)), mod(sin(j)-speed*(iTime*1.5*(0.1+_BlizardFactor)), 0.65));\n            float radius = 0.001+speed*0.012;\n            fragColor.rgb += drawTexture(uv, center, radius * 5.0);\n        }\n    } else {\n    \tfloat j;\n        for(int i=0; i<_SnowflakeAmount; i++)\n        {\n            j = float(i);\n            float speed = 0.3+rnd(cos(j))*(0.7+0.5*cos(j/(float(_SnowflakeAmount)*0.25)));\n            vec2 center = vec2((0.25-uv.y)*_BlizardFactor+rnd(j)+0.1*cos(iTime+sin(j)), mod(sin(j)-speed*(iTime*1.5*(0.1+_BlizardFactor)), 0.65));\n            float radius = 0.001+speed*0.012;\n            fragColor.rgb += drawCircleRGB(center, radius);\n        }\n    }\n}","name":"Image","description":"","type":"image"}]}