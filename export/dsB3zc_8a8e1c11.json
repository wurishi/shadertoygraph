{"ver":"0.1","info":{"id":"dsB3zc","date":"1667945838","viewed":112,"name":"Artober - Hanabi","username":"Flopine","description":"Day 29 of the (now pass) october month :D just 2 shaders to go!","likes":11,"published":1,"flags":32,"usePreview":0,"tags":["2d","mouse","interaction","reactiondiffusion","grayscott"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Mouse drawing taken from Eybor:\n// https://www.shadertoy.com/view/WdlcWM\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 buf = texture(iChannel0, uv);\n    vec3 col = mix(vec3(0.4,0.65, 0.89 ), vec3(1.,.0, 0.), min(buf.x, buf.y));\n    fragColor = vec4(col, 1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec2 laplace (vec2 uv, vec2 current)\n{\n    vec2 r = iResolution.xy;\n    vec2 na = vec2(0.);\n    \n    na -= current;\n    na += texture(iChannel0, uv+vec2(0., 1.)/r).xy*.2;\n    na += texture(iChannel0, uv+vec2(0., -1.)/r).xy*.2;\n    na += texture(iChannel0, uv+vec2(1., 0.)/r).xy*.2;\n    na += texture(iChannel0, uv+vec2(-1., 0.)/r).xy*.2;\n    \n    na += texture(iChannel0, uv+vec2(1., 1.)/r).xy*.05;\n    na += texture(iChannel0, uv+vec2(1., -1.)/r).xy*.05;\n    na += texture(iChannel0, uv+vec2(-1., 1.)/r).xy*.05;\n    na += texture(iChannel0, uv+vec2(-1., -1.)/r).xy*.05;\n    \n    return na;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 centered_uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n \n    if (iFrame == 0)\n    {\n        fragColor = vec4(1.,  step(radius, length(centered_uv)), 0., 1.);\n        return;\n    }\n\n    vec2 cur = texture(iChannel0, uv).xy;\n    vec2 la = laplace(uv, cur);\n\n    float next_a = ( da*la.x-cur.x*cur.y*cur.y+f*(1.-cur.x) )*dt,\n    next_b = (db*la.y+cur.x*cur.y*cur.y-(k(centered_uv)+f)*cur.y) *dt;\n\n    vec3 next_agent = vec3(vec2(next_a,next_b)+cur, 1.);\n        \n    if(iMouse.z > 0.)\n    {\n        vec2 mousePos = (iMouse.xy-.5*iResolution.xy)/iResolution.y;\n        vec2 pos = (fragCoord-.5*iResolution.xy)/iResolution.y;\n\n        vec2 v = pos-mousePos;\n\n        float d = sqrt(dot(v, v));\n\n        next_agent = mix(next_agent, vec3(.5), step(d, .08));\n    }     \n        \n    fragColor = vec4(next_agent, 1.0);   \n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define da 1.\n#define db .5\n#define f 0.055\n#define k(u) mix(0.06, 0.062, abs(u.x))\n#define dt .5\n\n#define radius .2\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"vec2 laplace (vec2 uv, vec2 current)\n{\n    vec2 r = iResolution.xy;\n    vec2 na = vec2(0.);\n    \n    na -= current;\n    na += texture(iChannel0, uv+vec2(0., 1.)/r).xy*.2;\n    na += texture(iChannel0, uv+vec2(0., -1.)/r).xy*.2;\n    na += texture(iChannel0, uv+vec2(1., 0.)/r).xy*.2;\n    na += texture(iChannel0, uv+vec2(-1., 0.)/r).xy*.2;\n    \n    na += texture(iChannel0, uv+vec2(1., 1.)/r).xy*.05;\n    na += texture(iChannel0, uv+vec2(1., -1.)/r).xy*.05;\n    na += texture(iChannel0, uv+vec2(-1., 1.)/r).xy*.05;\n    na += texture(iChannel0, uv+vec2(-1., -1.)/r).xy*.05;\n    \n    return na;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 centered_uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n\n    if (iFrame == 0)\n    {\n        fragColor = vec4(1.,  step(radius, length(centered_uv)), 0., 1.);\n    }\n\n    vec2 cur = texture(iChannel0, uv).xy;\n    vec2 la = laplace(uv, cur);\n\n    float next_a = ( da*la.x-cur.x*cur.y*cur.y+f*(1.-cur.x) )*dt,\n    next_b = (db*la.y+cur.x*cur.y*cur.y-(k(centered_uv)+f)*cur.y) *dt;\n\n    vec3 next_agent = vec3(vec2(next_a,next_b)+cur, 1.);\n        \n    if(iMouse.z > 0.)\n    {\n        vec2 mousePos = (iMouse.xy-.5*iResolution.xy)/iResolution.y;\n        vec2 pos = (fragCoord-.5*iResolution.xy)/iResolution.y;\n\n        vec2 v = pos-mousePos;\n\n        float d = sqrt(dot(v, v));\n\n        next_agent = mix(next_agent, vec3(.5), step(d, .05));\n    }   \n\n    fragColor = vec4(next_agent, 1.0);   \n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"vec2 laplace (vec2 uv, vec2 current)\n{\n    vec2 r = iResolution.xy;\n    vec2 na = vec2(0.);\n    \n    na -= current;\n    na += texture(iChannel0, uv+vec2(0., 1.)/r).xy*.2;\n    na += texture(iChannel0, uv+vec2(0., -1.)/r).xy*.2;\n    na += texture(iChannel0, uv+vec2(1., 0.)/r).xy*.2;\n    na += texture(iChannel0, uv+vec2(-1., 0.)/r).xy*.2;\n    \n    na += texture(iChannel0, uv+vec2(1., 1.)/r).xy*.05;\n    na += texture(iChannel0, uv+vec2(1., -1.)/r).xy*.05;\n    na += texture(iChannel0, uv+vec2(-1., 1.)/r).xy*.05;\n    na += texture(iChannel0, uv+vec2(-1., -1.)/r).xy*.05;\n    \n    return na;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 centered_uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n      \n    if (iFrame == 0)\n    {\n        fragColor = vec4(1.,  step(radius, length(centered_uv)), 0., 1.);\n    }\n    \n    vec2 cur = texture(iChannel0, uv).xy;\n    vec2 la = laplace(uv, cur);\n\n    float next_a = ( da*la.x-cur.x*cur.y*cur.y+f*(1.-cur.x) )*dt,\n    next_b = (db*la.y+cur.x*cur.y*cur.y-(k(centered_uv)+f)*cur.y) *dt;\n\n    vec3 next_agent = vec3(vec2(next_a,next_b)+cur, 1.);\n        \n    if(iMouse.z > 0.)\n    {\n        vec2 mousePos = (iMouse.xy-.5*iResolution.xy)/iResolution.y;\n        vec2 pos = (fragCoord-.5*iResolution.xy)/iResolution.y;\n\n        vec2 v = pos-mousePos;\n\n        float d = sqrt(dot(v, v));\n\n        next_agent = mix(next_agent, vec3(.5), step(d, .05));\n    }     \n\n    fragColor = vec4(next_agent, 1.0);   \n}","name":"Buffer C","description":"","type":"buffer"}]}