{"ver":"0.1","info":{"id":"3tKcDV","date":"1611803497","viewed":102,"name":"Fractal 01_gaz","username":"gaz","description":"3d","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["farctal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float Scale;\n\nfloat map(vec3 p)\n{\n\tfloat itr=10.,r=0.;\n\tif(fract(iTime*.3)>.7)\n\t{\n\t\titr=3.+3.*step(0.,sin(3.*iTime+.5*sin(iTime*.7)));\n\t\tr=mix(.01,.002,step(5.,itr));\n\t}\n\tp=mod(p-1.5,3.)-1.5;\n\tp=abs(p)-1.3;\n\tif(p.x<p.z)p.xz=p.zx;\n\tif(p.y<p.z)p.yz=p.zy;\n \tif(p.x<p.y)p.xy=p.yx;\n\tfloat s=1.;\n\tp-=vec3(.5,-.3,1.5);\n\tfor(float i=0.;i++<itr;)\n    {\n\t\tfloat l=2./clamp(dot(p,p),.1,1.);\n\t\tp=abs(p)*l-vec3(.8,.8,7.5);\n\t\ts*=l;\n\t}\n\tScale=log2(s);\n    float a=.05*itr*itr;\n    p-=clamp(p,-a,a);\n\treturn mix(length(p),length(p.xy),step(0.,sin(2.*iTime+.3*sin(iTime*.5))))/s-r;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv=(2.*fragCoord-iResolution.xy)/iResolution.y;\n\tvec3 p,\n  \t\tro=vec3(0,0,iTime),\n  \t\tw=normalize(vec3(.3*sin(iTime*.5),.5,1)),\n  \t\tu=normalize(cross(w,vec3(cos(iTime*.1),sin(iTime*.1),0))),\n  \t\trd=mat3(u,cross(u,w),w)*normalize(vec3(uv,2));\n\tfloat h=0.,d,i;\n\tfor(i=1.;i<80.;i++)\n    {\n    \tp=ro+rd*h;\n\t\td=map(p);\n    \tif(d<.001)break;\n    \th+=d;\n\t}\n\tfragColor.xyz=12.*vec3(sin(Scale+p.yxx*.08)*.5+.5)/i;\n}\n","name":"Image","description":"","type":"image"}]}