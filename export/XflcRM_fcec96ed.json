{"ver":"0.1","info":{"id":"XflcRM","date":"1720950399","viewed":44,"name":"Vivid dots","username":"ODtian","description":"null","likes":5,"published":1,"flags":32,"usePreview":0,"tags":["noise","fbm","perlin"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415926\n#define MOD 4  // type of Perlin noise\n\n// from FabriceNeyret2\n#define rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define hash31(p) fract(sin(dot(p,vec3(127.1,311.7, 74.7)))*43758.5453123)\n// #iChannel0 \"file://l82.glsl\"\n\nfloat noise3(vec3 p) {\n    vec3 i = floor(p);\n    vec3 f = fract(p);\n    f = f * f * (3. - 2. * f);\n\n    float v = mix(mix(mix(hash31(i + vec3(0, 0, 0)), hash31(i + vec3(1, 0, 0)), f.x), mix(hash31(i + vec3(0, 1, 0)), hash31(i + vec3(1, 1, 0)), f.x), f.y), mix(mix(hash31(i + vec3(0, 0, 1)), hash31(i + vec3(1, 0, 1)), f.x), mix(hash31(i + vec3(0, 1, 1)), hash31(i + vec3(1, 1, 1)), f.x), f.y), f.z);\n    return MOD == 0 ? v : MOD == 1 ? 2. * v - 1. : MOD == 2 ? abs(2. * v - 1.) : 1. - abs(2. * v - 1.);\n}\n\nfloat fbm3(vec3 p) {\n    float v = 0., a = .5;\n    mat2 R = rot(.37);\n\n    for (int i = 0; i < 2; i++, p *= 2., a /= 2.) p.xy *= R, p.yz *= R, v += a * noise3(p);\n\n    return v;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord / iResolution.xy;\n    float asp = iResolution.x / iResolution.y;\n    vec2 pos = uv;\n    pos.y /= asp;\n\n    uv.x += smoothstep(0.4, 5.0, fbm3(vec3(uv * 0.5, iTime))) * 10.0;\n    uv.y += smoothstep(0.4, 5.0, fbm3(vec3(iTime, uv * 0.5))) * 10.0;\n\n    fragColor = texture(iChannel0, uv);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define PI 3.1415926\n\n// FabriceNeyret2\n#define hash31(p) fract(sin(dot(p,vec3(127.1,311.7, 74.7)))*43758.5453123)\n\nfloat sdCircle(vec2 p, float r) {\n    return length(p) - r;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord / iResolution.xy;\n    float asp = iResolution.x / iResolution.y;\n    vec2 pos = uv - 0.5;\n    pos.y /= asp;\n\n    float dur = 40.0, r = 0.003;\n\n    vec2 new_pos = (floor(pos * dur) + 0.5);\n    new_pos.x += hash31(vec3(0.0, new_pos.y / dur, 0.0)) * (0.5 - r * dur);\n    new_pos.y += hash31(vec3(0.0, new_pos.x / dur, 0.0)) * (0.5 - r * dur);\n    new_pos /= dur;\n\n    fragColor.rgb = vec3(smoothstep(0.0, 0.001, sdCircle(pos - new_pos, r)));\n}","name":"Buffer A","description":"","type":"buffer"}]}