{"ver":"0.1","info":{"id":"McVSWW","date":"1715254373","viewed":70,"name":"wave_suno","username":"sunohonmy","description":"rm","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["3d","raymarching","water","sumofsines"],"hasliked":0,"parentid":"4cVSDD","parentname":"wave_plane_suno"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float dist(vec3 p)\n{\n    float d = p.y, a = 1., f = .1, i;\n    for(;i++<15.;)\n    {\n        p.xz *= R2(R(i));\n        d += a *sin(f * p.x + iTime * f * 20.) + a*sin(f * p.z + iTime * f * 20.);\n        a *= 0.6;\n        f *= 1.25;\n        \n    }\n    return d;\n}\n\nvec3 norm(vec3 p) {\n\tfloat d = dist(p);\n    vec2 e = vec2(.001, 0);\n    \n    vec3 a = d - vec3(\n        dist(p-e.xyy),\n        dist(p-e.yxy),\n        dist(p-e.yyx));\n    \n    return n(a);\n}\n\n\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    vec3 r = iResolution;\n    float d0, dif, i, d1;\n    vec3 ro = vec3(0, 20, 0), \n    rd = n(vec3((I-.5*r.xy)/r.y, 1.));\n    //ld = n(vec3(0, 5, 6)); lightdirection\n    \n    for(;i++<1e2;)\n    {\n        vec3 p = ro + rd * d0;\n        p.zy *= R2(-.5);      \n        d1 = dist(p);\n        d0 += d1;\n        if(d1 < .01)\n        {\n            //vec3 n = norm(p); normal\n            //dif = max(dot(n, normalize(vec3(0, 5, 6))), 0.); diffuse\n            //col = vec3(1.); colour\n            O = vec4(vec3(1.)*max(dot(norm(p), n(vec3(0, 5, 6))), 0.),1.);\n        }\n        \n        ro += rd;\n    }\n    //O = vec4(col*dif,1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define PI 3.14159265358979323846\nconst mat2 m2 = mat2( 0.80, -0.60, 0.60, 0.80 );\nmat2 R2(float angle)\n{\n    float s = sin(angle);\n    float c = cos(angle);\n    return mat2(c, -s, s, c);\n}\n\nfloat rand(vec2 c){\n\treturn fract(sin(dot(c.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat R(float n){return fract(sin(n) * 43758.5453123);}\n\nfloat n(float a){return normalize(a);}\nvec2 n(vec2 a){return normalize(a);}\nvec3 n(vec3 a){return normalize(a);}\nvec4 n(vec4 a){return normalize(a);}","name":"Common","description":"","type":"common"}]}