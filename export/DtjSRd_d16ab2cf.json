{"ver":"0.1","info":{"id":"DtjSRd","date":"1676537135","viewed":99,"name":"line drawing algorithm","username":"rcmz","description":"line drawing ","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["linedrawing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void swap(inout vec2 a, inout vec2 b) {\n    vec2 tmp = a;\n    a = b;\n    b = tmp;\n}\n\nvoid mainImage(out vec4 fragColor, vec2 fragCoord) {\n    vec2 scale = vec2(50, 60);\n\n    vec2 start = (iResolution.xy / scale) / 2.0;\n    //float teta = iTime * 0.1;\n    //vec2 end = start + vec2(cos(teta), sin(teta)) * 10.0;\n    vec2 end = iMouse.xy / scale;\n    \n    fragCoord -= 0.5;\n    vec2 coord = floor(fragCoord / scale);\n       \n    fragColor = vec4(1);\n    ivec2 icoord = ivec2(coord);\n    if (((icoord.x % 2) ^ (icoord.y % 2)) == 0) {\n        fragColor *= vec4(0.9);\n    }\n    \n    vec2 sstart = start * scale;\n    vec2 send = end * scale;\n    if (sstart.x > send.x) {\n        swap(sstart, send);\n    }\n    for (float x = sstart.x; x <= send.x; x++) {\n        float y =  (send.y - sstart.y) / (send.x - sstart.x) * (x - sstart.x) + sstart.y;\n        if (all(equal(floor(vec2(x, y)), fragCoord))) {\n            fragColor = vec4(1, 0, 0, 1);\n            return;\n        };\n\n    }\n    \n    vec2 dir = end - start;\n    vec2 d = dir / abs(dir);\n    float t = 0.0;\n    \n    for (int i = 0; i < 100 && t <= 1.0; i++) {\n        vec2 p = start + dir * t;\n       \n        if (all(equal(floor(p), coord))){\n            fragColor *= vec4(1, 0.5, 0.5, 1);\n        }\n        \n        if (length(p - fragCoord / scale) < 0.1) {\n            fragColor *= vec4(0.5, 0, 1, 1);\n        }\n        \n        vec2 s = (round(p + d * 0.5) - start) / dir;\n        t = min(s.x, s.y) + 0.0001;\n        \n        /*\n        if (length((start + dir * s.x) * scale - fragCoord) < 10.0) {\n            fragColor *= vec4(0.5, 1, 0.5, 1);\n        }\n        \n        if (length((start + dir * s.y) * scale - fragCoord) < 10.0) {\n            fragColor *= vec4(0.5, 0.5, 1, 1);\n        }\n        */\n    }\n}","name":"Image","description":"","type":"image"}]}