{"ver":"0.1","info":{"id":"ssBXRK","date":"1620556808","viewed":421,"name":"Halftone Effect","username":"zznewclear13","description":"A halftone effect, use mouse to control halftone res and halftone size.","likes":3,"published":1,"flags":0,"usePreview":1,"tags":["postprocessing","pixelation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//10 pixels by default\n#define HALFTONE_RES 10.0\n//circle shape by default\n#define CIRCLE\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 res = vec2(HALFTONE_RES, HALFTONE_RES);\n    vec2 mouseInput = iMouse.xy / iResolution.xy;\n    if(iMouse.z > 0.0)\n    {\n        res *= 2.0 * mouseInput;\n    }\n        \n\tvec2 center = floor(fragCoord/res.y)*res.y + res.y * 0.5;   \n    vec3 col = texture(iChannel0, center/iResolution.xy).rgb;\n    float radius = (col.r + col.g + col.b) * 0.3333;\n    \n    #if defined CIRCLE\n        float dist = distance(center,fragCoord)/(0.5 * res.y);\n    #else\n        vec2 dir = abs(fragCoord - center) / (0.5 * res.y);\n        float dist = max(dir.x, dir.y);\n    #endif\n    \n    float maxSmoothstep = 0.5;\n    if(iMouse.z > 0.0)\n    {\n        maxSmoothstep = mouseInput.x;\n    }\n    \n    float value = smoothstep(1.0, maxSmoothstep, dist/radius);\n    \n    fragColor = vec4(value, value, value, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}