{"ver":"0.1","info":{"id":"Ws3XR4","date":"1571500139","viewed":244,"name":"FunPipes","username":"nolibab","description":"Port intro 'FunPipes' release for Xenium party 2019 coded by mikael.","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["3d","raymarching","truchet","pipes"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//  FunPipes\tby mikael [code]  \n//  release party : Xenium 2019\n\nfloat l(vec3 f)\n{\nfloat l=fract(cos(dot(floor(abs(f)),vec3(13,78,35)))*43759.);\nif(l<.8)f=f.gbr;\nif(l<.4)f=f.gbr;\nf=fract(f);\nl=length(vec2(length(f.rg),f.b)-.5);\nf=f.gbr-vec3(1,1,0);\nl=min(l,length(vec2(length(f.rg),f.b)-.5));\nf=f.gbr-vec3(-1,1,-1);\nreturn min(l,length(vec2(length(f.rg),f.b)-.5))-.1;\n}\n\nfloat l(vec3 f,vec3 g,float m)\n{\nfloat r,b=0.;\nfor(r=.001;r<=m;r+=b)\n {\n b=l(f+g*r);\n if(b<.001*r)\n   break;\n }\nreturn r;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) \n{\nvec3 g=vec3(0.,0.,iTime*.5), b=g+vec3(0,0,1), m=normalize(vec3(fragCoord.rg / iResolution.y - 1., 1.));\nvec2 i=sin(vec2(0,1.571)+iTime*.1);\nm.rg*=mat2(i.g,-i.r,i);    \nm.rb*=mat2(i.g,-i.r,i);    \nfloat k=min(l(g,m,6.),6.);\ng+=m*k;\nvec3 s=normalize(b-g);\nfloat n=length(b-g);\ni.r=.001;\ni.g=0.;\nb=normalize(vec3(l(g+i.rgg),l(g+i.grg),l(g+i.ggr))-l(g));\nvec3 a=vec3(0.);\nfor(float p=0.; p<.5; p+=.1)\n a+=l(g+b*p)/(1.+p);\nif(l(g,s,n)>=n)\n a+=dot(b,s)+pow(max(dot(reflect(-s,b),-m),0.),4.);\nfragColor = vec4( mix(a*(b+8.)/20.+l(g,reflect(m,b),2.)/8., vec3(.1,.2,.3), k/6.), 1. );\n}\n","name":"Image","description":"","type":"image"}]}