{"ver":"0.1","info":{"id":"XsKGRK","date":"1455353332","viewed":254,"name":"lineSegment [distance field]","username":"ypn","description":"lineSegment [distance field]","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["linesegmentdistancefield"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define A 0.005\nfloat lineSegment(vec2 p, vec2 a, vec2 b) {\n    vec2 pa = p - a, ba = b - a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return 1.0-smoothstep(0.0, 2.0 / iResolution.x, length(pa - ba*h));\n}\n\n\nfloat circle(vec2 u, vec2 p, float r) {\n\treturn 1.-smoothstep(r,r+A,distance(u,p));\n}\n\n\nvoid mainImage( out vec4 O, in vec2 U )\n{\n    vec2 R = iResolution.xy;\n\tU = (U - R* .5) / R.y;\n    \n    \n    float T0 = iTime * 0.5;\n    float T1 = iTime * 0.123;\n    //vec2 p0=vec2(0.5,0.2),p1=vec2(-0.2,-0.4);\n    vec2 p0 = vec2(cos(T0),sin(T0))*0.25, p1 = vec2(cos(T1),sin(T1))*0.25;\n    \n    vec2 d0 = U - p0, d1 = p1 - p0;\n    \n    float h = clamp(dot(d0,d1)/dot(d1,d1), 0.0, 1.0 );\n  \n    O=vec4(\n        dot(d0,d1),\n        dot(d1,d1),\n        length(d0-d1*h),\n        1.);\n        \n    \n    /*\n    O=vec4(\n        dot(d0,d1)/dot(d1,d1),\n        0,\n        0,\n        1.);\n    \n\t*/\n    \n    O=max(O,circle(U,p0,0.01));\n    O=max(O,circle(U,p1,0.01));\n    O=max(O,lineSegment(U,p0,p1));\n    \n    \n}","name":"Image","description":"","type":"image"}]}