{"ver":"0.1","info":{"id":"ttffDj","date":"1597735815","viewed":109,"name":"z -> kz+cos(z)+z0","username":"CyanMARgh","description":"Mandelbrot-like visualization of z->kz+cos(z)+z0.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["mandelbrot"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float pi = 3.14159265;\nconst vec3 e3 = vec3(1.,1.,1.);\nconst vec2 one = vec2(1.,0.);\n\n\nvec2 zmz(vec2 a, vec2 b){\n    return vec2(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x);\n}\nfloat arg(vec2 z){\n    return mod(atan(z.y,z.x),2.*pi);\n}\nvec2 epyi(float y){\n    return vec2(cos(y),sin(y));\n}\nvec2 logz(vec2 z){\n    return vec2(log(length(z)),arg(z));\n}\nvec2 epz(vec2 z){\n    return exp(z.x)*epyi(z.y);\n}\nvec2 cosz(vec2 z){\n    z=zmz(vec2(0.,1.),z);\n    return (epz(z)+epz(-z))/2.;\n}\nvec3 hsvTOrgb(float h, float s, float v){\n    float x = mod(h,1.);\n    int H = int(floor(h))%6;\n\n    vec3 rgb=vec3(0.);\n    switch(H){\n        case 0: rgb = vec3(1.,x,0.); break;\n        case 1: rgb = vec3(1.-x,1.,0.); break;\n        case 2: rgb = vec3(0.,1.,x); break;\n        case 3: rgb = vec3(0.,1.-x,1); break;\n        case 4: rgb = vec3(x,0.,1.); break;\n        case 5: rgb = vec3(1.,0.,1.-x); break;\n    }\n    return (e3-(e3-rgb)*s)*v;\n}\n\nvec2 f_(vec2 z, vec2 z0){\n    float k=1.2*sin(iTime);\n    return k*z+cosz(z)+z0;\n}\n\n\nvec2 f(vec2 z){\n    vec2 z0=z;\n    float i=0.,I=100.;\n    for(;i++<I;){\n        z=f_(z,z0);\n        if(length(z)>50.) break;\n    }\n    return epyi(i*.1);\n}\n\nvec3 mapping(vec2 p){\n    p=f(p);\n    float h = (atan(p.y,p.x))*3./pi + 6.; //scaled angle in [0;6]\n    float r = length(p);    \n    return hsvTOrgb(h,clamp(r*.6,0.,1.),1.);\n}\nvoid mainImage( out vec4 col, in vec2 p_ ){        \n    vec2 r=iResolution.xy;\n    vec2 p = p_/r;    \n    p=p*2.-vec2(1.,1.);\n    p.x *=r.x/r.y; \n    p*=2.5;\n    col = vec4(mapping(p),1.);\n}\n\n\n\n\n\n\n\n\n","name":"Image","description":"","type":"image"}]}