{"ver":"0.1","info":{"id":"ws3fRl","date":"1684940451","viewed":41,"name":"ps_SierpinskisCarpet","username":"p_schneider","description":"This shader targets to achieve a mathematical render of Sierpinski's Carpet, a fractal defined by a rule\nof geometrical substituion. It was discovered by the same mathemathician that discovered the more famous\nSierpinski's Triangle fractal.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["fractals","sierpinskiscarpet"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\nThis documentation refers to the GitHub Repo: <link to be added>\n\n(PT - Br) Documentação em português começa na linha 8.\n(En) English documentation starts on line 30.\n\n(PT - Br)\nDocumentação em português:\nEste é um shader voltado para a renderização matemática do Carpete de Sierpinski, um fractal definido\npor uma regra de substituição geométrica. Foi descoberto pelo mesmo matemático que descobriu o mais\nconhecido Triângulo de Sierpinski.\n\nPara a construção desse shader foram utilizadas diversas fontes:\n- The Art of Code: https://www.youtube.com/channel/UCcAlTqd9zID6aNX3TzwxJXg\n- The Coding Train: https://www.youtube.com/channel/UCvjgXvBlbQiydffZU7m1_aw\n- Sebastian Lague: https://www.youtube.com/user/Cercopithecan\n\nEste shader está sob a licença MIT.\nCheque \"License.txt\" para detalhes sobre a licensa.\n\nInstruções para compilar:\n- Entre no site https://www.shadertoy.com\n- No canto superior direito, clique em \"new\". Você será redirecionado para uma página com uma caixa\nde texto onde voce pode escrever e uma tela.\n- Apague todo o conteúdo da caixa de texto.\n- Copie este código e cole-o diretamente na ciaxa de texto.\n- Se nada mudar, aperte \"alt\" + \"enter\" e o shader deve compilar.\n\n(En)\nEnglish documentation:\nThis shader targets to achieve a mathematical render of Sierpinski's Carpet, a fractal defined by a rule\nof geometrical substituion. It was discovered by the same mathemathician that discovered the more famous\nSierpinski's Triangle fractal.\n\nFor the creation of this shader, several resources were used:\n- The Art of Code: https://www.youtube.com/channel/UCcAlTqd9zID6aNX3TzwxJXg\n- The Coding Train: https://www.youtube.com/channel/UCvjgXvBlbQiydffZU7m1_aw\n- Sebastian Lague: https://www.youtube.com/user/Cercopithecan\n\nThis shader in under the MIT license.\nRefer to \"LICENSE.txt\" for the details of the license.\n\nInstructions to compile:\n- Follow this url: https://www.shadertoy.com.\n- On the upper right portion of the screen, click on the \"new\" button. You will be redirected to a page\nwith a text box you can write on and a screen.\n- Delete all the text on the text box.\n- Copy this code and paste it on the text box.\n- If nothing happnes, press \"alt\" + \"enter\" and the shader should compile.\n*/\n\n#define PI 3.141592653589793238\n\n// Folds the 2d space to generate the fractal and returns the distance to it\nfloat sierpinskiCarpet (inout vec2 uv, int steps) {\n  float scale = 4.0; // Scale of the UV\n  uv *= 4.0; // Scales the UV to make the fractal fit on the screen\n  uv = abs (uv); // Creates a reflection line in each (X and Y) axis\n\n  for (int i = 0; i < steps; ++i) {\n    scale *= 3.0;\n    uv *= 3.0;\n    uv = abs (uv);\n    uv *= 1.0 - step (uv.x, 3.0) * step (uv.y, 3.0);\n    uv -= vec2 (0, 3);\n    uv = abs (uv);\n    uv -= vec2 (0, 3);\n    uv = abs (uv);\n    uv -= vec2 (3, 0);\n    uv = abs (uv);\n    uv -= vec2 (3, 0);\n    uv = abs (uv);\n  }\n\n  float d = length (uv - vec2 (min (uv, vec2 (1)))) / scale;\n  uv /= scale;\n  return d;\n}\n\n// Main function of the shader\nvoid mainImage (out vec4 fragColor, in vec2 fragCoord) {\n  vec2 uv = 2.0 * (fragCoord - 0.5 * iResolution.xy) / iResolution.y; // Normalized pixel coordinates (from 0 to 1)\n  vec2 uv2 = uv; // Creates a copy of the uvs for coloring\n\n  vec3 col = vec3 (0.0); // Color to be drawn on the screen\n\n  int recursionCount = 0 + int (mod (iTime, 12.0) * 0.5); // Number of iterations of the fractal (increases with time)\n\n  float d = sierpinskiCarpet (uv, recursionCount); // Distance to the fractal\n\n  // Coloring the fractal\n  float lineSmoothness = 3.0 / iResolution.y; // Smoothness of the line (higher number = smoother, lower numbers = sharper)\n  float offset = 0.5; // Offset for the blending of the colors in the middle\n  // Red channel\n  float r = smoothstep (lineSmoothness, 0.0, d) * 0.5 * (uv2.x * 0.5 + 0.5 + offset); // Generates a gradient of red on the positive x axis\n  col.r = r;\n  // Blue channel\n  float b = smoothstep (lineSmoothness, 0.0, d) * 0.5 * (uv2.y * 0.5 + 0.5 + offset); // Generates a gradient of blue on the positive y axis\n  col.b = b;\n  // Green channel\n  float g = smoothstep (lineSmoothness, 0.0, d) * 0.5 * (-uv2.x * 0.5 + 0.5 + offset); // Generates a gradient of green on the negative x axis\n  col.g = g;\n\n  // Drawing the axis\n  lineSmoothness = 2.0 / iResolution.y; // Descreases line smoothness for sharper / thinner lines\n  col.rb += smoothstep (lineSmoothness, 0.0, length (uv.y)); // x axis\n  col.bg += smoothstep (lineSmoothness, 0.0, length (uv.x)); // y axis\n\n  fragColor = vec4 (col.rgb, 1.0); // Outputs the result color to the screen\n}","name":"Image","description":"","type":"image"}]}