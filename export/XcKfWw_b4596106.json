{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":3,"type":"buffer","id":"XdfGR8","filepath":"/media/previz/buffer03.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"// Fork of \"Dual Delaunay Sim\" by wyatt. https://shadertoy.com/view/lcGfRW\n// 2024-12-12 22:20:09\n\n// Fork of \"Voronoi points sim\" by wyatt. https://shadertoy.com/view/MfKfz1\n// 2024-12-09 22:52:07\n\nMain {\n    Q = vec4(0);\n    for (float x = -3.; x <= 3.; x++)\n    for (float y = -3.; y <= 3.; y++){\n        vec2 u = 2.*vec2(x,y);\n        vec4 d = D(U+u);\n        vec2 g = vec2(dFdx(5.*d.z),dFdy(5.*d.z));\n        vec2 a = u-10.*g+vec2(4,4);\n        Q += .1*exp(-.05*vec4(1,2,3,4)*dot(a,a));\n    }\n    Q = 1.2-Q;\n    \n    Q = D(U).wwww;\n    //Q = B(U)/R.x;\n}","name":"Image","description":"","type":"image"},{"outputs":[],"inputs":[],"code":"#define R iResolution.xy\n#define Main void mainImage(out vec4 Q, in vec2 U)\n#define A(U) texelFetch(iChannel0,ivec2(U),0)\n#define B(U) texelFetch(iChannel1,ivec2(U),0)\n#define C(U) texelFetch(iChannel2,ivec2(U),0)\n#define D(U) texture(iChannel3,(U)/R)\n#define M 40.\n#define S(u) (5.+20.*pow(0.5+0.5*sin(u.x),10.))\nfloat P (vec2 p, vec2 a, vec2 b) {\n\tvec2 m = 0.5*(a+b); // midpoint\n    if (length(a-b)<1e-3) return 1e3; // ignore self\n\treturn abs(dot(p-m,b-m)/dot(b-m,b-m)); // pojection\n} \n// Line\nfloat L (vec2 p, vec2 a, vec2 b) {\n    if (length(a-b)<1e-3) return 1e3; // ignore self\n    return length(p-a-(b-a)*clamp(dot(p-a,b-a)/dot(b-a,b-a),0.,1.));\n}\n/*\n\n    ||x-a|| = ra\n    ||x-b|| = rb\n    \n    x.x-2x.a+a.a = ra*ra\n    x.x-2x.b+a.b = rb*rb\n    \n    x.x*x.x+x.y*x.y-2.*x.x*a.x-2.*x.y*a.y+a.x*a.x*a.y*a.y = ra*ra\n    x.x*x.x+x.y*x.y-2.*x.x*b.x-2.*x.y*b.y+b.x*b.x*b.y*b.y = ra*ra\n    \n    x*x+y*y+x*A+y*B+C = 0\n    x*x+y*y+x*C+y*D+ = 0\n    \n    \n*/\nfloat pie (vec2 p, vec2 a, vec2 b, float sa, float sb){\n\tif (length(a-b)<1e-3) return 1e3; // ignore self\n\tvec2 m = (a*sb+b*sa)/(sa+sb);\n    return abs(dot(p-m,b-m)/dot(b-m,b-m)); // pojection\n}","name":"Common","description":"","type":"common"},{"outputs":[{"channel":0,"id":"4dXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":3,"type":"buffer","id":"XdfGR8","filepath":"/media/previz/buffer03.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"vec2 F (vec4 a, vec4 b, float sa, float sb) {\n    vec2 r = b.xy-a.xy;\n    vec2 dv = b.zw-a.zw;\n    float l = length(r);\n    if (length(b.xy)>0.&&l>0.) \n    return .005*\n            r/l*(l-sa-sb)*exp(-max(l-sa-sb,0.));\n            \n            ;\n    return vec2(0);\n}\nMain {\n     {\n    \n        Q.x = floor(U.x/M)*M;\n        float s = S(Q.xx);\n        Q.y = floor(U.y/(2.*s))*(2.*s);\n        Q.zw = vec2(0);\n        \n        \n    }\n    if (iFrame<1) return;\n    Q = A(U);\n    vec2 f = vec2(0);\n    float s = S(U);\n    for (float x = -3.; x<=3.; x++)\n    for (float y = -3.; y<=3.; y++) \n    if (abs(x)>1.||abs(y)>1.)\n    {\n        vec4 _b = B(Q.xy+vec2(x,y));\n        vec4 _c = C(Q.xy+vec2(x,y));\n        vec4 _q1 = A(_b.xy);\n        vec4 _q2 = A(_c.xy);\n        f += F(Q,_q1,s,S(_b.xy));\n        f += F(Q,_q2,s,S(_c.xy));\n    }\n    //f.y -= 10./R.y;\n    Q.zw += f*1./s;\n    Q.xy += .5*Q.zw*inversesqrt(1.+dot(Q.zw,Q.zw));\n    Q.zw = mix(Q.zw,D(Q.xy).xy,.9);\n    if (Q.x<s) Q.z -= .1*(Q.x-s);\n    if (Q.y<s) Q.w -= .1*(Q.y-s);\n    if (R.x-Q.x<s) Q.z += .1*(R.x-Q.x-s);\n    if (R.y-Q.y<s) Q.w += .1*(R.y-Q.y-s);\n    \n    \n}\n","name":"Buffer A","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"XsXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"Main {\n    Q = B(U);\n    vec4 q = A(Q.xy);\n    for (float x = -2.; x<=2.; x++)\n    for (float y = -2.; y<=2.; y++) {\n        \n        vec4 b = B(U+vec2(x,y));\n        vec4 a = A(b.xy);\n        if (length(a.xy-U) + S(q.xy)< length(q.xy-U)+ S(b.xy)) {\n        \n            Q = b;\n            q = a;\n        \n        }\n        /*vec4 c = C(U+vec2(x,y));\n        a = A(c.xy);\n        if (length(a.xy-U) + S(q.xy)< length(q.xy-U)+ S(c.xy)) {\n        \n            Q = c;\n            q = a;\n        \n        }*/\n        \n        \n  \n    }\n    \n    if (iFrame < 1) {\n        Q.xy = A(U).xy;\n    }\n}","name":"Buffer B","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"4sXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"Main {\n    Q = C(U);\n    vec4 b = B(U);\n    vec4 q1 = A(b.xy);\n    vec4 q2 = A(Q.xy);\n    for (float x = -2.; x<=2.; x++)\n    for (float y = -2.; y<=2.; y++) {\n        \n        \n        vec4 _Q = C(U+vec2(x,y));\n        vec4 _b = B(U+vec2(x,y));\n        vec4 _q1 = A(_b.xy);\n        vec4 _q2 = A(_Q.xy);\n        \n        if (length(q1.xy-q2.xy)==0. ||\n            pie(U,q1.xy,q2.xy,S(b.xy),S(Q.xy)) > pie(U,q1.xy,_q2.xy,S(b.xy),S(_Q.xy)) ) {\n        \n            q2 = _q2;\n            Q = _Q;\n        \n        }\n        \n        if (length(q1.xy-q2.xy)==0. ||\n            pie(U,q1.xy,q2.xy,S(b.xy),S(Q.xy)) > pie(U,q1.xy,_q1.xy,S(b.xy),S(_b.xy)) ) {\n        \n            q2 = _q1;\n            Q = _b;\n        \n        }\n        \n  \n    }\n    if (iFrame < 1) {\n        Q.xy = floor(U.xy/M)*M+10.5;\n    }\n\n}","name":"Buffer C","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"XdfGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":3,"type":"buffer","id":"XdfGR8","filepath":"/media/previz/buffer03.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"vec4 T (vec2 u) {\n    u-= .5*D(u).xy;\n    u-= .5*D(u).xy;\n    return D(u);\n}\nMain {\n    vec4 n = T(U+vec2(0,1));\n    vec4 e = T(U+vec2(1,0));\n    vec4 s = T(U-vec2(0,1));\n    vec4 w = T(U-vec2(1,0));\n    Q = T(U);\n    Q.z = 0.25*(n+e+s+w).z;\n    Q.z -= 0.25*(e.x-w.x+n.y-s.y);\n    Q.xy -= 0.25*vec2(e.z-w.z,n.z-s.z);\n    \n    \n    \n    vec4 _b = B(U-D(U).xy);\n    vec4 _c = C(U-D(U).xy);\n    \n    vec4 _q1 = A(_b.xy);\n    vec4 _q2 = A(_c.xy);\n    vec4 bub = vec4(0);\n    if (length(U-_q1.xy)-S(_b.xy)<-2.||length(U-_q2.xy)-S(_c.xy)<2.) {\n       \n       bub += vec4(0.5*_q1.zw+.5*_q2.zw,.5*(S(_b.xy)+S(_c.xy)),1)*exp(-.25*length(_b.xy-_c.xy)*abs(pie(U,_q1.xy,_q2.xy,S(_b.xy),S(_c.xy))));\n    } else {\n        bub += vec4(_q1.zw,S(_b.xy),1)*exp(-.5*abs(length(U-_q1.xy)-S(_b.xy)));\n        bub += vec4(_q2.zw,S(_c.xy),1)*exp(-.5*abs(length(U-_q2.xy)-S(_c.xy)));\n    }\n    Q.xy = mix(Q.xy,bub.xy,bub.w);\n    Q.z -= .01*bub.w;\n    Q.z *= .995;\n    Q.w = bub.w;\n    if (iMouse.z>0.&&length(U-iMouse.xy)<30.) Q.x = .5;\n    if (iFrame < 1) {\n    }\n        if (U.x<1.||R.x-U.x<1.||R.y-U.y<1.||U.y<1.) Q.xyz*= 0.;\n}","name":"Buffer D","description":"","type":"buffer"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":true,"mFlagMusicStream":false},"info":{"id":"XcKfWw","date":"1734103427","viewed":268,"name":" Bubble Shader","username":"wyatt","description":"I love bubbles and I love me","likes":29,"published":3,"flags":32,"usePreview":0,"tags":["bubble"],"hasliked":0,"parentid":"","parentname":""}}