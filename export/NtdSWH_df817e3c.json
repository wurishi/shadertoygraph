{"ver":"0.1","info":{"id":"NtdSWH","date":"1639086005","viewed":145,"name":"Channel Delay","username":"domizai","description":"rgb shift test.","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["delay"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float d = .06; // delay\nfloat s1 = .3; // circle size max\nfloat s2 = .1; // circle size min\nfloat r = 1.7; // movement range\n\n\nfloat circle (vec2 uv, float size)\n{\n    float d = length(uv);\n    return smoothstep(size + .05, size, d);\n}\n\n\nvec2 move (float di, float t, vec2 m)\n{\n    float s = sin(t + d * di);\n    float c = .85; // cutoff sin\n    float b = smoothstep(-c, c, s) * 2. - 1.;\n    return vec2(b) * m;\n}\n\n\nfloat map(float v, float l1, float h1, float l2, float h2)\n{\n  return l2 + (h2 - l2) * (v - l1) / (h1 - l1);\n}\n\n\nvec2 m = vec2(0., 1.);  \nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2. * fragCoord - iResolution.xy) / iResolution.y;    \n    \n    vec3 col = vec3(0.);\n    float time = iTime * 2.;\n\n    uv *= 10.;\n    vec2 gv = fract(uv) - .5;\n    vec2 id = floor(uv) + 1.;\n    \n    for (float i = -2.; i <= 2.; i++)\n    {\n        vec2 offs = vec2(0., i);\n        vec2 nv = gv + offs;\n        vec2 id = id + offs;\n        if (mod(id.x, 2.) == 0.) nv.y += .5;\n        \n        float t = time + id.x * .03; // wave length\n        vec2[3] moves = vec2[3](move(0., t, m), move(1., t, m), move(2., t, m));\n        \n        float shape1 = circle(nv + moves[0] * r, map(abs(moves[0].y), 0., 1., s1, s2));\n        float shape2 = circle(nv + moves[1] * r, map(abs(moves[1].y), 0., 1., s1, s2));\n        float shape3 = circle(nv + moves[2] * r, map(abs(moves[2].y), 0., 1., s1, s2));\n\n        col += vec3(1., 0., 0.) * shape1;\n        col += vec3(0., 1., 0.) * shape2;\n        col += vec3(0., 0., 1.) * shape3;\n    }\n\n    col = 1. - col; // invert    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}