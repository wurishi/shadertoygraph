{"ver":"0.1","info":{"id":"wljGDc","date":"1561413219","viewed":888,"name":"Voronoi Bubbles","username":"badjano","description":"Voronoi with random scaling distance","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float hash1( float n ) {\n    return fract(sin(n)*43758.5453);\n}\nvec2  hash2( vec2  p ) {\n    p = vec2(\n        dot(p,vec2(127.1,311.7)),\n        dot(p,vec2(269.5,183.3))\n    );\n    return fract(sin(p)*43758.5453);\n}\nvec3 hash3( vec3  p ) {\n    p = vec3(\n        dot(p,vec3(421.9,137.2,159.5)),\n        dot(p,vec3(127.1,311.7,753.7)),\n        dot(p,vec3(269.5,183.3,459.3))\n    );\n    return fract(sin(p)*43758.5453);\n}\nvec3 hsv2rgb(vec3 c) {\n  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec4 voronoi( in vec2 x)\n{\n    vec2 n = floor( x );\n    vec2 f = fract( x );\n\n    const int _size = 4;\n\tvec4 m = vec4( 0.0, 0.0, 0.0, 1.0 );\n    for( int j=-_size; j<=_size; j++ )\n    for( int i=-_size; i<=_size; i++ )\n    {\n        vec2 g = vec2( float(i),float(j) );\n        vec2 o1 = hash2( n + g );\n\t\t\n\t\t// animate\n        vec2 o = 0.5 + 0.5*sin( iTime*2. + 6.2831*o1 );\n\n        // distance to cell\t\t\n\t\tfloat d = length(g - f + o)*pow(sin(iTime + o1.x * 1000.)+1.5,3.);\n\t\t\n        // do the smoth min for colors and distances\t\t\n\t\tvec3 col = hsv2rgb(vec3(o,1.));\n\t\tfloat h = smoothstep( 0.0, 1.0, 0.5 + 0.5*(m.w-d)/pow(sin(iTime+o.x)*.1+.1,1.1) );\n\t\t\n\t    m.w   = mix( m.w,     d, h );\n\t\tm.xyz = mix( m.xyz, col, h );\n    }\n\t\n\treturn m;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = fragCoord.xy/iResolution.xy - vec2(.5);\n    p.x *= iResolution.x/iResolution.y;\n\t\n    vec4 v = voronoi( (sin(iTime)*2.+13.)*p );\n    fragColor = vec4(v.xyz,1.);\n}","name":"Image","description":"","type":"image"}]}