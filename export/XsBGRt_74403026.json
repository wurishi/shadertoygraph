{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"music","id":"XdfGzn","filepath":"/media/a/894a09f482fb9b2822c093630fc37f0ce6cfec02b652e4e341323e4b6e4a4543.mp3","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"float sdTriPrism(vec3 p, vec2 h){\n    vec3 q = abs(p);\n    return max(q.z-h.y,max(q.x*0.866025+p.y*0.5,-p.y)-h.x*0.5);\n}\n\nvec2 rot(vec2 k, float t) {\n    return vec2(cos(t)*k.x-sin(t)*k.y,sin(t)*k.x+cos(t)*k.y);\n}\n\nvec2 opU(vec2 a, vec2 b) {\n\treturn mix(a, b, step(b.x, a.x));\n}\n\nvec2 DE(vec3 p) {\n    \n    vec3 q=p+vec3(-0.3,-0.5,-2.0);\n    q.xz=rot(q.xz, 2.15 );\n    q.yz=rot(q.yz, 0.2 );\n    q.z=mod(q.z,1.5);\n    q.xy=rot(q.xy, p.x*0.15-iTime );\n    vec2 ret=vec2( sdTriPrism(q+vec3(0.0,0.0,-0.75), vec2(1.6,0.5)) ,1.0);\n\n    q=p+vec3(0.0,-0.4,-7.0);\n    q.xz=rot(q.xz, 1.80 );\n    q.yz=rot(q.yz, -0.2 );\n    q.z=mod(q.z,1.5);\n    q.xy=rot(q.xy, p.x*0.15+iTime );\n\tret=opU(ret, vec2( sdTriPrism(q+vec3(0.0,0.0,-0.75), vec2(2.3,0.5)) ,1.0) );\n\n    p+=vec3(0.0,0.0,2.5);\n    p.xy=rot(p.xy, p.x*0.5+iTime );\n    p.yz=rot(p.yz, p.y*0.5-iTime );\n\tfloat z=p.z+ atan(p.z);\n\tvec3 b= normalize( vec3(p.x,p.y,z) );  \n    ret=opU(ret, vec2( length(p-b) - 0.25 ,2.0) );\n\n\treturn ret;\n}\n\nvec3 normal(vec3 p ) {\n\tvec3 e=vec3(0.01,-0.01,0.0);\n\treturn normalize( vec3(\te.xyy*DE(p+e.xyy).x +\n\t                        e.yyx*DE(p+e.yyx).x +\t\n\t                        e.yxy*DE(p+e.yxy).x +\t\n\t                        e.xxx*DE(p+e.xxx).x));\n}\n\nfloat calcSS(vec3 ro, vec3 rd, float t, float k ) {\n    float res = 1.0;\n    for( int i=0; i<10; i++ ) {\n    \tfloat h = DE(ro + rd*t).x;\n        res = min( res, k*h/t );\n        t += h;\n\t}\n    return clamp(res,0.0,1.0);\n}\n\nfloat bit(float c1, float c2, float c3, float c4, float c5, vec2 p) {\n    float chr=0.0;\n    if (p.x==1.0) chr=c1;\n    if (p.x==2.0) chr=c2;\n    if (p.x==3.0) chr=c3;\n    if (p.x==4.0) chr=c4;\n    if (p.x==5.0) chr=c5;\n    return floor(fract(chr/pow(10.0,p.y))*10.0);\n}\n\nfloat writestr(vec2 p,vec2 fragCoord){\n    p=floor(fragCoord.xy-p+1.0);\n    if (p.y<1.0 || p.y>7.0) return 0.0;\n    \n    float b=bit( 0110010.0, 1001001.0, 1001001.0, 1001001.0, 0100110.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 0001000.0, 0001000.0, 0001000.0, 1111111.0, p);\n        p.x-=7.0;\n        b+=bit( 0111111.0, 1001000.0, 1001000.0, 1001000.0, 0111111.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 1000001.0, 1000001.0, 0100010.0, 0011100.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 1001001.0, 1001001.0, 1001001.0, 1001001.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 1001000.0, 1001000.0, 1001100.0, 0110011.0, p);\n        p.x-=7.0;\n        b+=bit( 0110010.0, 1001001.0, 1001001.0, 1001001.0, 0100110.0, p);\n        p.x-=7.0;\n        b+=bit( 0111110.0, 1000001.0, 1000001.0, 1000001.0, 0100010.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 1001001.0, 1001001.0, 1001001.0, 1001001.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 0100000.0, 0011100.0, 0000010.0, 1111111.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 1001001.0, 1001001.0, 1001001.0, 1001001.0, p);\n    \n    return b;\n}\n\nfloat writestr2(vec2 p, vec2 fragCoord){\n    p=floor(fragCoord.xy-p+1.0);\n    if (p.y<1.0 || p.y>7.0) return 0.0;\n    \n    float b=bit( 1111111.0, 1001000.0, 1001000.0, 1001000.0, 1001000.0, p);\n        p.x-=7.0;\n        b+=bit( 0111110.0, 1000001.0, 1000001.0, 1000001.0, 0111110.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 1001000.0, 1001000.0, 1001100.0, 0110011.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 1001001.0, 1001001.0, 1001001.0, 1001001.0, p);\n        p.x-=7.0;\n        b+=bit( 1111100.0, 0000010.0, 0000001.0, 0000010.0, 1111100.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 1001001.0, 1001001.0, 1001001.0, 1001001.0, p);\n        p.x-=7.0;\n        b+=bit( 1111111.0, 1001000.0, 1001000.0, 1001100.0, 0110011.0, p);\n        \n    return b;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 pos = fragCoord.xy / iResolution.xy;\n\n\tvec3 col=vec3(1.0,0.5,0.2) * (floor(0.80+pos.y)-floor(0.20+pos.y));\n\tfloat inside=floor(0.77+pos.y)-floor(0.23+pos.y);\n\tcol+=inside*vec3(0.3);\n\t\n\tpos = -1.0 + 2.0 * pos;\n    pos.x *= iResolution.x/iResolution.y;\n\n\tpos.x *=texture(iChannel0, vec2(1.0,0.0)).x * 1.8;\n\t\n\tvec3 ta = vec3(0.0, 0.0, 0.0);\n\tvec3 ro =vec3(0.0, 0.0, -6.0);\n\tvec3 lig=normalize(vec3(1.0, 1.5, -2.0));\n\t\n\tvec3 cf = normalize( ta - ro );\n    vec3 cr = normalize( cross(cf,vec3(0.0,1.0,0.0) ) );\n    vec3 cu = normalize( cross(cr,cf));\n    vec3 rd = normalize( pos.x*cr + pos.y*cu + 2.5*cf );\n\t\n\tvec2 r=vec2(0.0);\t\n\tfloat f=0.0;\n\tvec3 ww;\n\tfor(int i=0; i<90; i++) {\n\t\tww=ro+rd*f;\n\t\tr=DE(ww);\t\t\n\t\tif( r.x<0.0 ) break;\n\t\tf+=r.x;\n\t}\n\tr.x=f;\n\t\n\tif(f<30.0 ) {\n        vec3 nor=normal(ww);\n\t    float amb =0.3+0.1*ww.y;\t\t\n\t    float dif =0.5*clamp(dot(lig, nor), 0.0,1.0);\n\t    float sh=0.0;\n\t    float spe=0.0;\n\n\t    if(r.y==1.0 && inside==1.0) {  col=vec3(1.0,1.0,0.3);  } \n\t    if(r.y==2.0) { col=vec3(1.0,0.0,0.0);  \n    \t    sh = calcSS( ro, lig, 0.5, 8.0 );\n\t        spe = sh*pow(clamp( dot( lig, reflect(rd,nor) ), 0.0, 1.0 ) ,1.0 );\n\t    }\n \n\t    col *= amb+dif;\n\t    col+=0.6*pow(spe,1.0)*vec3(1.)*1.*sh;\n\t}\n\t\n\tvec2 strpos=vec2( iResolution.x-90.0, iResolution.y/4.0-30.0);\n\tfloat k=writestr(strpos,fragCoord);\n\tif (k==1.0) { col=vec3(1.0); }\n\t\n\tstrpos=vec2( iResolution.x-62.0, iResolution.y/4.0-42.0);\n\tk=writestr2(strpos,fragCoord);\n\tif (k==1.0) { col=vec3(1.0); }\n\t\n\tfragColor = vec4( col, 1.0 );\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XsBGRt","date":"1392010605","viewed":665,"name":"retromania","username":"avix","description":"thats it !\npump up the volume !!!!","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["3d","raymarch","retro"],"hasliked":0,"parentid":"","parentname":""}}