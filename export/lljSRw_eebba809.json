{"ver":"0.1","info":{"id":"lljSRw","date":"1442553807","viewed":163,"name":"Progressive Mandelbrot","username":"roombarampage","description":"progressively renders the mandelbrot set with increasing detail as the max iterations increases with time.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["fractal","mandelbrot","progressive"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"/*\n  programmer: jonathan potter\n  github: https://github.com/jonathan-potter\n  repo: https://github.com/jonathan-potter/shadertoy-fractal\n*/\n\nconst int MAX_ITERATIONS = 64;\nconst float ITERATIONS_PER_SECOND = 32.0;\nconst float pi = 3.14159;\n    \nfloat modulus(float number, float divisor) {\n  float integerQuotient = floor(number / divisor);\n    \n  return number - (integerQuotient * divisor);\n}\n\nfloat rampFunction(float t) {\n  float animationPeriod = float(MAX_ITERATIONS);\n    \n  return modulus(t, animationPeriod);\n}\n\nstruct complex { \n  float real;\n  float imaginary;\n};\n\nint fractal(complex c, complex z, int iterations) {\n  for (int iteration = 0; iteration < MAX_ITERATIONS; iteration++) {\n    if (iteration >= iterations) {return 0;}\n\n    // z <- z^2 + c\n    float real = z.real * z.real - z.imaginary * z.imaginary + c.real;\n    float imaginary = 2.0 * z.real * z.imaginary + c.imaginary;\n\n    z.real = real;\n    z.imaginary = imaginary;\n\n    if (z.real * z.real + z.imaginary * z.imaginary > 4.0) {\n      return iteration;\n    }\n  }\n\n  return 0;\n}\n\nint mandelbrot(vec2 coordinate, int iterations) {\n  complex c = complex(coordinate.x, coordinate.y);\n  complex z = complex(0.0, 0.0);\n\n  return fractal(c, z, iterations);\n}\n\nvec2 fragCoordToXY(vec2 fragCoord) {\n  vec2 relativePosition = fragCoord.xy / iResolution.xy;\n  float aspectRatio = iResolution.x / iResolution.y;\n\n  vec2 cartesianPosition = (relativePosition - 0.5) * 3.0;\n  cartesianPosition.x *= aspectRatio;\n\n  return cartesianPosition;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n  int iterations = int(floor(rampFunction((ITERATIONS_PER_SECOND + iTime * ITERATIONS_PER_SECOND))));\n    \n  vec2 coordinate = fragCoordToXY(fragCoord);\n\n  int crossoverIteration = mandelbrot(coordinate, iterations);\n    \n  float color = 1.0 * float(crossoverIteration) / float(iterations);\n\n  fragColor = vec4(color, color, color, 1.0);\n}\n","name":"","description":"","type":"image"}]}