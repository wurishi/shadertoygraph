{"ver":"0.1","info":{"id":"DttBzj","date":"1701416942","viewed":12,"name":"丸のボール","username":"aki0728","description":"今回の宿題をするためにプログラミングを真剣に研究し、立体になる方法をよりリアルに学ぶために多くの時間を費やしました。","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["3d","balls","dark"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  \n    vec2 uv = fragCoord/iResolution.xy;\n\n    uv = 2.0*uv - 1.0;\n    uv.x *= iResolution.x / iResolution.y;\n\n    float radius = 0.6;\n    vec3 sphereCenter = vec3(0.0, 0.0, -1.0);\n    vec3 rayOrigin = vec3(0.0, 0.0, 0.0);\n    vec3 rayDir = normalize(vec3(uv, -1.0) - rayOrigin); \n\n   \n    float a = dot(rayDir, rayDir);\n    float b = 2.0 * dot(rayDir, rayOrigin - sphereCenter);\n    float c = dot(rayOrigin - sphereCenter, rayOrigin - sphereCenter) - radius * radius;\n    float discriminant = b*b - 4.0*a*c;\n\n    \n    vec3 bgColor = vec3(0.0, 0.2, 0.0); \n    vec3 color = bgColor;\n\n    vec3 lightPos = vec3(2.0, 2.0, -1.0);\n    vec3 lightColor = vec3(1.0, 1.0, 1.0);\n\n  \n    if(discriminant > 0.0){\n        float t1 = (-b - sqrt(discriminant)) / (2.0*a);\n        float t2 = (-b + sqrt(discriminant)) / (2.0*a);\n        float t = min(t1, t2);\n        if(t > 0.0){\n   \n            vec3 sphereColor = vec3(1.0);\n            vec3 hitPoint = rayOrigin + t * rayDir;\n            vec3 normal = normalize(hitPoint - sphereCenter);\n            vec3 toLight = normalize(lightPos - hitPoint);\n\n        \n            float diff = max(dot(normal, toLight), 0.0);\n            vec3 diffuse = diff * lightColor;\n\n            vec3 viewDir = normalize(-hitPoint);\n            vec3 reflectDir = reflect(-toLight, normal);\n            float spec = pow(max(dot(viewDir, reflectDir), 0.0), 16.0);\n            vec3 specular = spec * lightColor;\n            color = sphereColor * diffuse + specular;\n\n            float alpha = 0.7; \n            color = mix(bgColor, color, alpha);\n        }\n    }\n\n \n    fragColor = vec4(color, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}