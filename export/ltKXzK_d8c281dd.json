{"ver":"0.1","info":{"id":"ltKXzK","date":"1485117577","viewed":260,"name":"Necromurlok - PIXELATE","username":"Necromurlok","description":"LED postprocess","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["postprocess","led"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PIXELS_PER_LED 70.0\n#define LED_INTENSITY 1.5\n#define VIGNET_INTENSITY 0.0\n\n//#define CHROMATIC_ABERRATION 0.1\n\n//#define INTERFERENCES 12.0\n//#define INTERFERENCE_SIZE 0.1\n//#define INTERFERENCE_SPEED 0.2\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (fragCoord.xy + 0.5) / iResolution.xy;\n    \n#ifdef INTERFERENCES\n    float interference = fract((uv.y + iTime * INTERFERENCE_SPEED) * INTERFERENCES);\n//    uv.y += (1.0 - (smoothstep(INTERFERENCE_SIZE, INTERFERENCE_SIZE, interference / INTERFERENCES)));\n    uv.y -= step(INTERFERENCE_SIZE, interference - uv.y) * INTERFERENCE_SIZE;\n    \n    \n#endif    \n          \n    vec2 txSize = vec2(1.0 / PIXELS_PER_LED);\n    vec2 cell = floor(uv * PIXELS_PER_LED) * txSize;\n    vec2 txCenter = cell + txSize * 0.5;\n    vec2 d2LED = (uv - txCenter);    \n//    float intensity = pow(1.0 - smoothstep(0.0, txSize.x, length(d2LED)), 1.0 / LED_INTENSITY);\n    float intensity = 1.0 - pow(length(d2LED) / txSize.x, LED_INTENSITY); //pow(1.0 - smoothstep(0.0, txSize.x, length(d2LED)), 1.0 / LED_INTENSITY);\n    \n    vec2 dCenter = uv - 0.5;\n    float vignet = pow(1.0 - length(dCenter), VIGNET_INTENSITY);\n\n#ifdef CHROMATIC_ABERRATION    \n    vec4 col;\n    dCenter *= CHROMATIC_ABERRATION * vignet;\n    col.r = texture(iChannel0, txCenter).r;\n    col.g = texture(iChannel0, txCenter + dCenter).g;\n    col.b = texture(iChannel0, txCenter + dCenter * 2.0).b;\n    fragColor = col * intensity * vignet;\n#else            \n    fragColor = texture(iChannel0, txCenter) * intensity * vignet;// * LED_INTENSITY * 0.5;\n#endif\n    \n}","name":"Image","description":"","type":"image"}]}