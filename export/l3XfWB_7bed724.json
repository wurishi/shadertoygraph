{"ver":"0.1","info":{"id":"l3XfWB","date":"1728836406","viewed":74,"name":"Nearest neighbor smoothing","username":"arkhad619","description":"Fix stairstep with nearest-neighbor texture interpolation","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float rand1(vec2 co){ return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453); }\nfloat rand2(vec2 co){ return fract(sin(dot(co, vec2(22.9898, 78.233))) * 43758.5453); }\nfloat rand3(vec2 co){ return fract(sin(dot(co, vec2(32.9898, 78.233))) * 43758.5453); }\n\n// Clamp to [0; textureSize-1]\nvec3 getColor(float u, float v) {\n    vec2 px = floor(vec2(u, v));\n    return vec3(rand1(px), rand2(px), rand3(px));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 origin = vec2(0.5, 0.324);\n    \n    vec2 point = fragCoord/max(iResolution.x, iResolution.y);\n    float fac = 4.0 + 0.8 * (sin(iTime) + 1.0);\n    vec2 texCoord = ((point - origin) * fac + origin) * 10.0;\n    \n    vec3 col = getColor(texCoord.x, texCoord.y);\n    \n    float diff = dFdx(texCoord).x;\n    if(diff < 1.0 && fragCoord.x / iResolution.x > 0.5) {\n        float d2 = diff * 0.5;\n        \n        vec2 prev = texCoord - d2, fprev = floor(prev);\n        vec2 next = texCoord + d2, fnext = floor(next);\n        \n        vec3 v1 = getColor(prev.x, prev.y), v3 = getColor(next.x, prev.y),\n         v7 = getColor(prev.x, next.y), v9 = getColor(next.x, next.y);\n         \n        vec2 fac = (next - fnext) / diff;\n        col = mix(mix(v1, v3, fac.x), mix(v7, v9, fac.x), fac.y);\n    }\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}