{"ver":"0.1","info":{"id":"3sfcRs","date":"1585318951","viewed":137,"name":"Cartoonish Water","username":"wobbumash","description":"Simple shader trying to create a cartoonish wavy water effect.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["cartoon","water","learning","training"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sfGRn","filepath":"/media/a/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","previewfilepath":"/media/ap/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","type":"texture","channel":3,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsX3Rn","filepath":"/media/a/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","previewfilepath":"/media/ap/92d7758c402f0927011ca8d0a7e40251439fba3a1dac26f5b8b62026323501aa.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4df3Rr","filepath":"/media/a/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","previewfilepath":"/media/ap/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3Rr","filepath":"/media/a/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","previewfilepath":"/media/ap/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec4 Grayscale(vec4 Texture) {\n    \n\tfloat Median = (Texture.r * 0.2126) + (Texture.g * 0.7152) + (Texture.b * 0.0722);\n    \n    return vec4(vec3(Median), 1.0);\n    \n}\n\nvec2 RotateUV(vec2 UV, float Angle) {\n    \n   UV -= 0.5;\n    \n   float XMod = (UV.x * cos(Angle)) - (UV.y * sin(Angle));\n   float YMod = (UV.x * sin(Angle)) + (UV.y * cos(Angle));\n    \n   vec2 NewUV = vec2(XMod, YMod);\n    \n   NewUV += 0.5;\n    \n   return NewUV;\n    \n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    \n    vec2 UV = fragCoord.xy / iResolution.xy;\n    vec2 StretchUV = UV;\n    \n    StretchUV = RotateUV(StretchUV, -45.0);\n    \n    UV *= 1.0 + (sin((StretchUV.x * 3.141592) + (iTime * 2.0)) * 0.05);\n    \n    float WavingSpeed = 0.25;\n    \n    UV.y += sin((UV.x * 3.141592) + (iTime * WavingSpeed)) * 0.05;\n    UV.x += cos((UV.y * 3.141592) + (iTime * WavingSpeed)) * 0.025;\n    \n    vec2 FoamUV = UV;\n    FoamUV += iTime / 12.0;\n    \n    vec2 ShallowUV = UV;\n    ShallowUV += iTime / 16.0;\n    \n    vec2 OceanUV = UV;\n    OceanUV += iTime / 24.0;\n    \n    vec2 DeepUV = UV;\n    DeepUV += iTime / 32.0;\n    \n    float TimeSpeed = 2.0;\n    \n    float DeepSpeedMod = 3.0;\n    float OceanSpeedMod = 2.0;\n    float ShallowSpeedMod = 2.0;\n    float FoamSpeedMod = 4.0;\n    \n    float DeepMaskMod = 0.4 + (abs(sin(iTime / (TimeSpeed * DeepSpeedMod))) * 0.2);\n    float OceanMaskMod = 0.5 - (abs(sin(iTime / (TimeSpeed * OceanSpeedMod))) * 0.1);\n    float ShallowMaskMod = 0.3 + (abs(sin(iTime / (TimeSpeed * ShallowSpeedMod))) * 0.2);\n    float FoamMaskMod = 0.6 + (abs(sin(iTime / (TimeSpeed * FoamSpeedMod))) * 0.1);\n    \n    vec3 OceanDeepMask = step(DeepMaskMod, Grayscale(texture(iChannel1, DeepUV))).rgb;\n    vec3 OceanMask = step(OceanMaskMod, Grayscale(texture(iChannel2, OceanUV))).rgb;\n    vec3 OceanShallowMask = step(ShallowMaskMod, Grayscale(texture(iChannel0, ShallowUV))).rgb;\n    vec3 FoamMask = step(FoamMaskMod, Grayscale(texture(iChannel3, FoamUV))).rgb;\n    \n    vec3 OceanBottomColor = vec3(0.0, 0.1, 0.3);\n    vec3 OceanDeepColor = vec3(0.0, 0.2, 0.5) * OceanDeepMask;\n    vec3 OceanColor = vec3(0.2, 0.3, 0.75) * OceanMask;\n    vec3 OceanShallowColor = vec3(0.5, 0.75, 1.0) * OceanShallowMask;\n    vec3 WaterFoam = vec3(0.8, 0.9, 0.9) * FoamMask;\n    \n    vec3 Color = OceanBottomColor * (1.0 - OceanDeepMask);\n    Color += OceanDeepColor;\n    \n    Color = Color * (1.0 - OceanMask);\n    Color += OceanColor;\n    \n    Color = Color * (1.0 - OceanShallowMask);\n    Color += OceanShallowColor;\n    \n    Color = Color * (1.0 - FoamMask);\n    Color += WaterFoam;\n    \n    fragColor = vec4(Color, 1.0);\n    \n}","name":"Image","description":"","type":"image"}]}