{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","sampler":{"filter":"nearest","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"const float kPi = 3.14159;\nconst float k2Pi = kPi * 2.0;\nconst float kRadius = 0.4;\nconst float kA = kRadius / kPi;\n\n// arc length of archimedes spiral\nfloat arclength(float a, float theta) {\n\tfloat d = theta * sqrt(abs(1.0 - theta*theta));\n\treturn 0.5 * a * (d + log(d));\n}\n\n// calc where in the spiral a coordinate is\nvec2 spiral(vec2 uv) {\n\tfloat ang = atan(uv.y, uv.x);\n\tfloat turn = (length(uv)/kRadius - ang/k2Pi);\n\tang += ceil(turn) * k2Pi;\n\tfloat d = arclength(kA, ang)-iTime*1.5;\n\treturn vec2(d, fract(turn));\n}\n\n// nyan nyan nyan\nvec4 nyan(vec2 uv, float frame) {\n\tframe = mod(frame, 6.0);\n\tuv.x = (uv.x + frame)*240.0/256.0/6.0;\n\tuv.y -= step(2.0, frame)*1.0/32.0;//boing\n\treturn texture(iChannel0, uv);\n}\n\n// calc spiral pos with animation\nvec4 calc(vec2 p) {\n\tvec2 uv = (2.0 * p - iResolution.xy) / iResolution.yy;\n\tvec2 s = spiral(uv);\n\tfloat frame = floor(iTime*12.0) + floor(s.x);\n\tvec2 nyuv = fract(s);\n\tvec4 col = nyan(nyuv, frame);\n\treturn mix(\n\t\tmix(vec4(0.4, 1.0, 0.6, 1.0),\n\t\t\tvec4(0.1, 0.8, 0.3, 1.0), length(uv)), col, col.w);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec4 c = \n\t\tcalc(fragCoord.xy + vec2(0.5,0.0)) + \n\t\tcalc(fragCoord.xy + vec2(0.0,0.5)) + \n\t\tcalc(fragCoord.xy + vec2(0.5,0.5)) + \n\t\tcalc(fragCoord.xy);\n\tfragColor = c / 4.0;\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lsS3WV","date":"1393500100","viewed":698,"name":"Nyarchimedes Spiral","username":"kibble","description":"Arranging stuff (nyancats) into an Archimedes Spiral. ","likes":21,"published":1,"flags":0,"usePreview":0,"tags":["nyan","spiral","archimedes"],"hasliked":0,"parentid":"","parentname":""}}