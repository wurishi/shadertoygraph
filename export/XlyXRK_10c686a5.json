{"ver":"0.1","info":{"id":"XlyXRK","date":"1484870286","viewed":805,"name":"Voronoi Experiment 8 Lighted","username":"aiekick","description":"Voronoi Experiment 8, Lighted","likes":17,"published":3,"flags":0,"usePreview":0,"tags":["voronoi","experiment","8","lighted"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dX3zn","filepath":"/media/a/550a8cce1bf403869fde66dddf6028dd171f1852f4a704a465e1b80d23955663.png","previewfilepath":"/media/ap/550a8cce1bf403869fde66dddf6028dd171f1852f4a704a465e1b80d23955663.png","type":"cubemap","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Created by Stephane Cuillerdier - @Aiekick/2016\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\nfloat df(vec2 uv)\n{\n\treturn max(abs(uv.x)*.866 - uv.y*.5,uv.y);\n}\n\nvec4 voro( vec2 fG )\n{\n\tvec2 cp = fG /= iResolution.y / 8.;\n\n    float d = 9., ds;\n\n    for(int x=-3;x<=3;x++)\n    for(int y=-3;y<=3;y++)\n    {\t\n        vec2 p = vec2(x,y);\n       \tvec2 a = sin( iTime * 0.5 + 9. * fract(sin((floor(fG)+p)*mat2(2,5,5,2))));\n        p += .5 + .35*a - fract(fG);\n        p *= mat2(cos(a.x),-sin(a.x),sin(a.x),cos(a.x)) * cos(a.y*1.5) * 5.;\n        ds = df(p);\n        if (ds < d)\n        {\n            d = ds;\n            cp = p;\n        }\n    }\n\n    //vec3 n = vec3(0);\n   \t//if ( d == -cp.x*.866 - cp.y*.5) \tn = vec3(1,0,0);\n    //if ( d == cp.x*.866 - cp.y*.5) \t\tn = vec3(0,1,0);\n    //if ( d == cp.y) \t\t\t\t\tn = vec3(0,0,1);\n    \n    vec3 n = step( abs( d - vec3(-cp.x*.866 - cp.y*.5,\n                                 cp.x*.866 - cp.y*.5,\n                             \tcp.y)), vec3(1e-5));\n    \n    return sqrt(texture(iChannel0, -n)*d*2.);\n}\n\nvoid mainImage( out vec4 fC, vec2 fG )\n{\n    fC = voro(fG);\n}","name":"Image","description":"","type":"image"}]}