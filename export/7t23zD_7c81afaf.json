{"ver":"0.1","info":{"id":"7t23zD","date":"1671709545","viewed":69,"name":"water_voronoi","username":"moshe","description":"Voronoi water","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["water"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float texel = 1.0 / 10.0;\nconst vec3 darkBlue = vec3(0.0, 0.1, 0.5);\nconst vec3 lightBlue = vec3(0.0, 0.2, 1.0);\n\nvec2 rand2(vec2 p) {\n  vec3 a = fract(p.xyx * vec3(432.57, 184.94, 935.36));\n  a += dot(a, a + 52.12);\n  return fract(vec2(a.x * a.y, a.y * a.z));\n}\n\nvec3 water(vec2 uv)\n{\n  uv /= texel; // grid cells\n  float min_dist = 10000.0; // big num\n  vec2 gv = fract(uv) - 0.5;\n  vec2 id = floor(uv);\n  for(float y = -1.0; y <= 1.0; y++)\n    for(float x = -1.0; x <= 1.0; x++)\n    {\n      vec2 offs = vec2(x, y);\n      vec2 n = rand2(id + offs);\n      vec2 p = offs + sin(n * iTime) * 0.5;\n      float d = length(gv - p);\n      if(d < min_dist) min_dist = d; \n    }\n  return mix(darkBlue, lightBlue, min_dist);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy; // 0 to 1\n    fragColor = vec4(water(uv),1.0);\n}","name":"Image","description":"","type":"image"}]}