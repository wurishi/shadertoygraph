{"ver":"0.1","info":{"id":"NdfGWX","date":"1616607590","viewed":159,"name":"pixelate with less colors","username":"Leuchtstift","description":"trying to emulate color schemes","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["retro","pixel"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415926535897932384626433832795\n\nfloat staircase(float x, float w, float h){\n\treturn h * (x / w + 0.5 - (atan(tan(PI * (x / w + 0.5))) / PI)) - w;\n}\n\nvec3 scolor(vec3 c, float n){\n\treturn vec3(\n\t\tstaircase(c.x, n, n),\n\t\tstaircase(c.y, n, n),\n\t\tstaircase(c.z, n, n)\n\t\t);\n}\n\n// from https://www.shadertoy.com/view/4t3czs\nvec3 HSVToSRGB(float h, float s, float v) {\n    return vec3(v * (1. - s + s * clamp(abs(fract(h + 1.0)   * 6. - 3.) - 1., 0., 1.)),\n                v * (1. - s + s * clamp(abs(fract(h + 2./3.) * 6. - 3.) - 1., 0., 1.)),\n                v * (1. - s + s * clamp(abs(fract(h + 1./3.) * 6. - 3.) - 1., 0., 1.)));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    // pixalate uv\n    float r = (sin(iTime * 0.1) + 1.0 ) * 8.0;\n    //float r = 8.0;\n    vec2 uv = floor(fragCoord/r)*r/iResolution.xy;\n    \n    float s = (sin(iTime * 0.1) + 1.0) * 0.2;\n    //float s = 0.4;\n    \n    // from https://www.shadertoy.com/view/4t3czs\n    vec3 C = (uv.x < 0.5) ?\n         ((uv.y < 0.5) ?\n           HSVToSRGB(uv.x * 2.0, 1.0, uv.y * 2.0) :\n           HSVToSRGB(uv.x * 2.0, 2.0 - uv.y * 2.0, 1.0)) :\n    \t ((uv.y < 0.5) ?\n            texture(iChannel0, vec2(uv.x * 2.0 - 1.0, uv.y * 2.0)).rgb :\n            texture(iChannel1, uv *2.0 -1.0).rgb);\n            \n    fragColor = vec4(scolor(C, s), 1.0);\n\t//fragColor = vec4(scolor(texture(iChannel0, floor(fragCoord/r)*r/iResolution.xy).rgb, s), 1.0);\n}","name":"Image","description":"","type":"image"}]}