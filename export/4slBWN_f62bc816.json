{"ver":"0.1","info":{"id":"4slBWN","date":"1496241467","viewed":2159,"name":"fake water caustics v3","username":"Emil","description":"Third attempt at doing fake under water caustics\n\nEarlier attempts:\nhttps://www.shadertoy.com/view/XdlBWN <- v2\nhttps://www.shadertoy.com/view/XdlBD4 <- v1","likes":35,"published":1,"flags":0,"usePreview":1,"tags":["2d","water","caustics"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float timeSpeed = 2.0;\n\nfloat randomVal (float inVal)\n{\n    return fract(sin(dot(vec2(inVal, 2523.2361) ,vec2(12.9898,78.233))) * 43758.5453)-0.5;\n}\n\nvec2 randomVec2 (float inVal)\n{\n    return normalize(vec2(randomVal(inVal), randomVal(inVal+151.523)));\n}\n\nfloat makeWaves(vec2 uv, float theTime, float offset)\n{\n    float result = 0.0;\n    float direction = 0.0;\n    float sineWave = 0.0;\n    vec2 randVec = vec2(1.0,0.0);\n    float i;\n    for(int n = 0; n < 16; n++)\n    {\n        i = float(n)+offset;\n        randVec = randomVec2(float(i));\n  \t\tdirection = (uv.x*randVec.x+uv.y*randVec.y);\n        sineWave = sin(direction*randomVal(i+1.6516)+theTime*timeSpeed);\n        sineWave = smoothstep(0.0,1.0,sineWave);\n    \tresult += randomVal(i+123.0)*sineWave;\n    }\n    return result;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.x;\n    \n    vec2 uv2 = uv * 150.0; // scale\n    \n    uv *= 2.0;\n    /*\n    uv2 *= (0.9+iMouse.y*0.01);\n    uv *= (0.9+iMouse.y*0.01);\n\t*/\n    \n    float result = 0.0;\n    float result2 = 0.0;\n    \n    result = makeWaves( uv2+vec2(iTime*timeSpeed,0.0), iTime, 0.1);\n    result2 = makeWaves( uv2-vec2(iTime*0.8*timeSpeed,0.0), iTime*0.8+0.06, 0.26);\n    \n    //result *= 2.6;\n    \n    result = smoothstep(0.4,1.1,1.0-abs(result));\n    result2 = smoothstep(0.4,1.1,1.0-abs(result2));\n    \n    result = 2.0*smoothstep(0.35,1.8,(result+result2)*0.5);\n    \n\t//fragColor = vec4(result)*0.7+texture( iChannel0 , uv );\n    \n    // thank for this code below Shane!\n    vec2 p = vec2(result, result2)*.015 + sin(uv*16. - cos(uv.yx*16. + iTime*timeSpeed))*.015; // Etc.\n\tfragColor = vec4(result)*0.7+texture( iChannel0 , uv + p );\n}\n","name":"Image","description":"","type":"image"}]}