{"ver":"0.1","info":{"id":"ftGfRR","date":"1663870970","viewed":122,"name":"Hex Pattern Generator","username":"spontificus","description":"do not stare directly at screen","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["hexagonal","magicangles"],"hasliked":0,"parentid":"slyyRG","parentname":"Fork Fixed widt spontificu 198"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const int point_i_size = 2;\n\n\nbool myInRange(int t, int v1, int v2) {\n    return (abs(t - v1) + abs(v2 - t) <= abs(v2 - v1));\n}\n\n// centered and anti-square\nivec3 screenToHex( vec2 p ) {\n    int j = int(iResolution.y-p.y)/2 - int(iResolution.y/4.);\n    int i = (int(p.x) - j )/2 - int(iResolution.x/4.);\n    return ivec3(i,j,-(i+j));\n}\n\n\n// squarerootless solution\nint hexDist(ivec3 p1, ivec3 p2) {\n    return (p2.x-p1.x)*(p2.x-p1.x) + (p2.y-p1.y)*(p2.y-p1.y) + (p2.x-p1.x)*(p2.y-p1.y);\n    //return int(sqrt(float((p2.x-p1.x)*(p2.x-p1.x) + (p2.y-p1.y)*(p2.y-p1.y) + (p2.x-p1.x)*(p2.y-p1.y))));\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    ivec3 fragHex = screenToHex(fragCoord.xy);\n    int fragI = fragHex.x;\n    int fragJ = fragHex.y;\n    int fragK = fragHex.z;\n    \n    ivec3 mouseHex = screenToHex(iMouse.xy);  \n    int mouseI = mouseHex.x;\n    int mouseJ = mouseHex.y;\n    int mouseK = mouseHex.z;\n\n    vec4 col = vec4(.1,.1,.1,1.);\n   \n\n    if ( fragHex == mouseHex ) {\n        col = vec4(1., 1., 1., 1.);\n    }\n    \n    int pdist = hexDist(fragHex,mouseHex);\n    \n    \n    // center dot\n    if (fragI == 0 && fragJ == 0) {\n        col = vec4(1., 1., 1., 1.);   \n    }\n    \n   \n    if (pdist % mouseHex.x == 0) {\n        col += vec4(1., 0., 0., 1.);   \n    }\n    \n       \n    if (pdist % mouseHex.y == 0) {\n        col += vec4(0., 1., 0., 1.);   \n    }\n    \n       \n    //if (pdist % mouseHex.x*mouseHex.y == 0) {\n    if (pdist % mouseHex.z == 0) {\n        col += vec4(0., 0., 1., 1.);   \n    }\n    \n    fragColor = col;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = vec4(0.0,0.0,1.0,1.0);\n}","name":"Buffer A","description":"","type":"buffer"}]}