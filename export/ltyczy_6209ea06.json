{"ver":"0.1","info":{"id":"ltyczy","date":"1536777882","viewed":452,"name":"RGB/YUV downscale","username":"rijiyun","description":"YUV downscale experiments for demonstration that in image compression color doesn't matter as much as shade of it\nMove mouse up to down to increase detail of Y channel inside block\nMove mouse left to right to increase size of block\n","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["rgb","yuv"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec4 rgbToYUV(vec4 rgba){\n    return rgba * mat4(\n        0.299, 0.587, 0.114, 0.0,\n        -0.169, -0.331, 0.5, 0.5,\n        0.5, -0.419, -0.091, 0.5,\n        0.0, 0.0, 0.0, 1.0);\n}\nvec4 yuvToRGB(vec4 yuva){\n\treturn yuva * mat4(\n        1.014, 0.0239, 1.4017, -0.7128,\n        0.9929, -0.3564, -0.7142, 0.5353,\n        1.0, 1.7722, 0.001, -0.8866,\n        0.0, 1.7722, 0.0, 1.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec4 final = vec4(0.0f);\n    float steps = 0.0f;\n    \n    float w = iResolution.x;\n    float h = iResolution.y;\n    \n    float block = max(1.0f, 64.0f*(float(iMouse.x)/w));\n    vec2 st = vec2(w/block, h/block);\n    \n    final = rgbToYUV(texture(iChannel0, vec2(floor(uv.x*st.x)/st.x, floor(uv.y*st.y)/st.y)));\n    \n    vec4 yuv = rgbToYUV(texture(iChannel0, uv));\n    final.x = mix(final.x, yuv.x, 1.0f-iMouse.y/h);\n    \n    fragColor = yuvToRGB(final);\n}","name":"Image","description":"","type":"image"}]}