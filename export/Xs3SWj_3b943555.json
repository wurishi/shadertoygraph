{"ver":"0.1","info":{"id":"Xs3SWj","date":"1461392295","viewed":755,"name":"Droste Zoom","username":"roywig","description":"It's a Droste zoom... with a twist!\n\nDerived with the help of Jos Leys' article:\nhttp://www.josleys.com/article_show.php?id=82","likes":28,"published":1,"flags":0,"usePreview":0,"tags":["droste","escher","complex","conformal","exponential"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159\n\nvec2 cInverse(vec2 a) { return\tvec2(a.x,-a.y)/dot(a,a); }\nvec2 cMul(vec2 a, vec2 b) {\treturn vec2( a.x*b.x -  a.y*b.y,a.x*b.y + a.y * b.x); }\nvec2 cDiv(vec2 a, vec2 b) {\treturn cMul( a,cInverse(b)); }\nvec2 cExp(vec2 z) {\treturn vec2(exp(z.x) * cos(z.y), exp(z.x) * sin(z.y)); }\nvec2 cLog(vec2 a) {\tfloat b =  atan(a.y,a.x); if (b>0.0) b-=2.0*PI;return vec2(log(length(a)),b);}\n\nvoid mainImage( out vec4 fragColor, in vec2 z )\n{\n\tz = (z - iResolution.xy/2.)/iResolution.y;\n    float r1 = 0.1, r2 = 1.0,\n        scale = log(r2/r1),angle = atan(scale/(2.0*PI));\n    // Droste transform here\n    z = cLog(z);\n    z.y -= iTime/2.;\n    z = cDiv(z, cExp(vec2(0,angle))*cos(angle)); // Twist!\n    z.x = mod(z.x-iTime,scale);\n    z = cExp(z)*r1;\n    // Drawing time.\n    fragColor = texture(iChannel0,.5+.5*z); \n    z = sin(z*25.);\n    fragColor = vec4(mix(vec3(z.x*z.y),fragColor.xyz,.85),1.);\n\n}","name":"Image","description":"","type":"image"}]}