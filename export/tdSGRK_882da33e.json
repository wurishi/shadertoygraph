{"ver":"0.1","info":{"id":"tdSGRK","date":"1549328780","viewed":414,"name":"Spotlight - torch","username":"kubamaruszczyk1604","description":" Simple and re-usable spotlight implementation. ","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["simplespot"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","previewfilepath":"/media/ap/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Simple, re-usable spotlight implementation.\n\n// Use mouse to interact with the shader\n\n\n//Function is lighting model-agnostic \n//returns: intensity coefficient of the pixel\nfloat Spotlight(vec3 lightPos, vec3 fragPos, vec3 spotDir, float cone, float decay)\n{   \n    vec3 lDir = normalize(lightPos - fragPos);\n    float theta = dot(-lDir,spotDir);\n    float dist = abs(length(lightPos - fragPos));\n    float att = (1.0/(dist*dist));\n    return clamp((theta-cone)/(decay),0.0,1.0)*clamp(att,0.0,1.0);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    uv = 2.0 * uv - 1.0;\n    uv.x *= iResolution.x/iResolution.y;\n   \n   // uv = vec2(uv.x, uv.y/(uv.x+1.65)*2.5);\n    vec3 col = texture(iChannel0,vec2(uv.x+iTime*sign(sin(iTime)),uv.y+iTime)).xyz;\n    \n    vec2 ms = 2.0*(iMouse.xy/iResolution.xy)-1.0;\n     \n    vec3 lDir = normalize(vec3(ms.x,ms.y,1.0));\n    float phong = dot(lDir,vec3(0,0,1.0));\n    \n    col = col * 0.13 +\n          col * 1.5 *  Spotlight(vec3(ms.x*0.53,ms.y*0.53,-0.2),\n              \t\t      vec3(uv.x,uv.y,0.0),\n                    \t  lDir,\n                          0.3,\n                          0.2)*phong*1.3;\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}