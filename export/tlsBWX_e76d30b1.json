{"ver":"0.1","info":{"id":"tlsBWX","date":"1597947702","viewed":120,"name":"0thr's","username":"entibo","description":"https://old.reddit.com/r/GeometryIsNeat/comments/id3r87/my_newest_piece_isnt_perfect_or_as_crisp_as_i/","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["geometry"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265358979323846264338327950288419716\n\nconst float SMOOTH = .005;\nfloat sstep(float v, float t) {\n \treturn smoothstep(v-SMOOTH, v+SMOOTH, t);\n}\n\n\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\nfloat stripe(float v, float freq, float phase) {\n \treturn mod(floor(v/freq - phase*2.), 2.);\n}\nfloat smoothstripe(float v, float freq, float phase) {\n    float t = mod(v/freq - phase*2., 2.);\n    float d = 0.1;\n    return smoothstep(1.-d, 1.+d, t)\n        + (1.-smoothstep(0.-d, 0.+d, t))\n        - smoothstep(2.-d, 2.+d, t);\n}\n\nfloat diamond(vec2 p, float width, float height) {\n    float m = height/width;\n    return sstep(p.y, height-m*abs(p.x))\n        * sstep(-height+m*abs(p.x), p.y);\n}\n#define bidiamond(p,w,h) max(diamond(p,w,h), diamond(vec2(p.y,-p.x),w,h))\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float minres = min(iResolution.x, iResolution.y);\n    vec2 uv = 2.*(fragCoord - .5*iResolution.xy) / minres;\n    uv *= 1.2;\n    \n    \n    float freq = .05;\n    float d = length(uv);\n    \n    float circleShape = sstep(d, 1.);//1. - smoothstep(0.995,1.005, d);\n    \n    float basePattern = smoothstripe(d, freq, 1.0*iTime);\n    \n    float starShape = bidiamond(uv, 0.6, 0.3);\n    \n    \n    float v = mix(basePattern, 1.-basePattern, starShape); // invert the pattern inside the star\n    \n    float a = atan(uv.y, uv.x) + PI; // [0, 2PI]\n    float octant = mod(floor(a/(PI/4.)), 2.); // 0, 1 in each quadrant\n    \n    float m = atan(0.25, 1.0); // slope of the large star\n    \n    float da = (octant == 0. ? -m : +m - PI/2.) // this does one quadrant\n        + floor(a/(PI/2.)) * PI/2.; // repeat for the other 3;\n    \n    float outsidePattern = smoothstripe(rotate(uv, da).y, freq, 1.0*iTime);\n    \n    float bigStarShape = bidiamond(uv, 1.0, 0.25);\n    \n    v = mix(v, outsidePattern, 1.-bigStarShape);\n    \n    v = mix(d, v, circleShape); // make everything outside the circle white\n    \n    \n    v = clamp(v, 0., 1.);\n    \n    \n    v -= max(0., (d-1.)/10.);\n    \n    float range = 0.85;\n    v = mix(.5, v, range);//range*v + (1.-range)/2.;\n    \n    vec3 col = v * vec3(1.0, 0.99, 0.99);\n    fragColor = vec4(col,1.0);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","name":"Image","description":"","type":"image"}]}