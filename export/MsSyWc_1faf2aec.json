{"ver":"0.1","info":{"id":"MsSyWc","date":"1494080230","viewed":405,"name":"Another audio visualizer","username":"leon","description":"Experimentation with feedback, trying to make a vinyl effect.","likes":5,"published":1,"flags":96,"usePreview":0,"tags":["fft","audio"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// music : https://soundcloud.com/nanarthur/12-jet-set-radio-funky-radio\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n        \n    uv = mod(abs(uv*2.-1.),1.);\n    uv *= 0.5;\n    uv.x *= iResolution.x/iResolution.y;\n    \n    //uv.x = 1.-uv.x;\n    float a = atan(uv.y,uv.x)/3.14159;\n    float r = length(uv);\n    uv = vec2(a,r);\n    vec3 color = texture(iChannel0, uv).rgb;\n    \n    uv = vec2(r*1.5, a*2.);\n    uv = mod(abs(uv*2.-1.),1.);\n    float fft = texture(iChannel0, vec2(1.,uv.y)).r;\n    vec3 red = vec3(0.9,0.1,0.2);\n    float plotter = 0.1/((0.5/(1.-fft))-uv.x/0.5);\n    \n    \n    color = mix(color, red, plotter);\n    \n\tfragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"MslXRr","filepath":"https://soundcloud.com/nanarthur/12-jet-set-radio-funky-radio","previewfilepath":"https://soundcloud.com/nanarthur/12-jet-set-radio-funky-radio","type":"musicstream","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n\tfloat fft  = texture( iChannel1, vec2(uv.y,0.25) ).x; \n\tfloat wave = texture( iChannel1, vec2(uv.x,0.75) ).x;\n    \n    float unit = 1./iResolution.y;\n    vec2 uvBuffer = uv + vec2(fft*10.,0.)*unit;\n    //float should = step(1.-unit, uv.x);\n\tfft = smoothstep(0.3,0.9,fft);\n    float should = (0.5/(fft-(1.-uv.x)/0.1));\n    //uvBuffer.x += (1.-fft)*unit*10.;\n    vec3 buffer = texture(iChannel0, uvBuffer).rgb;\n    \n    vec3 sound = vec3(1,0.2,0.1)*fft;\n    \n    vec3 color = mix(buffer, sound, clamp(should,0.,1.));\n    fragColor = vec4(color,1.0);\n}","name":"Buf A","description":"","type":"buffer"}]}