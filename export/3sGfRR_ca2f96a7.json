{"ver":"0.1","info":{"id":"3sGfRR","date":"1606341779","viewed":656,"name":"hacky video background removal ","username":"mds2","description":"So, if you are located in a bland white room, it turns out some pretty simple hacks do a halfway decent job of removing a lot of your background.  Just, make sure you're not wearing anything grey when using this.","likes":3,"published":3,"flags":2,"usePreview":0,"tags":["video","background","compositing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float bland_magic_cutoff = 0.7;\nconst float bright_cutoff_low = 0.8;\nconst float bright_cutoff_high = 1.2;\n\nfloat blandness(in vec3 col) {\n    vec3 cuts = smoothstep(bland_magic_cutoff * col, col, col.gbr);\n    cuts *= smoothstep(bland_magic_cutoff * col, col, col.brg);\n    return cuts.x * cuts.y * cuts.z;\n}\n\nfloat brightness(in vec3 col) {\n    return smoothstep(bright_cutoff_low,\n                      bright_cutoff_high,\n                      dot(col, vec3(1.0)));\n}\n                      \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    // Time varying pixel color\n    vec3 col = texture(iChannel0, uv).rgb;\n    vec3 colLowRes = textureLod(iChannel0, uv, 2.0).rgb;\n    \n    \n    float bland = blandness(mix(colLowRes, col, 0.5));\n    float bright = brightness(colLowRes);\n    float mask = bland * bright;\n    \n    vec3 col2 = texture(iChannel1, uv).rgb;\n    \n    col = mix(col, col2, mask);\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}