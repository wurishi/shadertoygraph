{"ver":"0.1","info":{"id":"7ltczM","date":"1659498499","viewed":128,"name":"Edge Detection with 3 taps","username":"jiangyiheng","description":"\nFast but HQ Edge detection","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["edgedetection"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Edge detection with 3 taps\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n#define DEBUG(x) fragColor=vec4((x),(x),(x),1.0);return;\n\n\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    vec3 sC = texture(iChannel0, uv).rgb;\n    \n    vec2 p = fract(floor(fragCoord)*0.5);\n    \n    bvec2 colrow = bvec2(p.x > 0.25,p.y > 0.25);\n    \n    //   A\n    // B C D\n    //   E\n    \n    float gC = sC.g;\n    \n    float dDC = dFdx(gC);\n    float dAC = dFdy(gC);\n    \n\n    vec2 gDgA = vec2(gC, gC) + mix(-vec2(dDC, dAC), vec2(dDC, dAC), colrow);\n    \n    vec3 ts = vec3(1.0 / iResolution.xy, 0);\n    \n    vec4 uvBE = uv.xyxy + mix(ts.xzzy, -ts.xzzy, colrow.xxyy);\n    \n    vec2 gBgE = vec2(texture(iChannel0, uvBE.xy).g, texture(iChannel0, uvBE.zw).g);\n    \n    vec2 dir = abs(gDgA-gBgE);\n    \n    float edg = dot(dir, dir);\n    \n    edg*=edg*1000.0;\n\n\n    // Output to screen\n    fragColor = vec4(sC + vec3(0,edg,0),1.0);\n}","name":"Image","description":"","type":"image"}]}