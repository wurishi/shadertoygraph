{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"/*by musk License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n\thttp://www.youtube.com/watch?v=QMokMQ8Bu7Y\n\n\tThis is me doing some evil experiments...\n\n*/\n\nmat2 rotate_2D(float a){float sa = sin(a); float ca = cos(a); return mat2(ca,sa,-sa,ca);}\nmat3 rotate_x(float a){float sa = sin(a); float ca = cos(a); return mat3(1.,.0,.0,    .0,ca,sa,   .0,-sa,ca);}\nmat3 rotate_y(float a){float sa = sin(a); float ca = cos(a); return mat3(ca,.0,sa,    .0,1.,.0,   -sa,.0,ca);}\nmat3 rotate_z(float a){float sa = sin(a); float ca = cos(a); return mat3(ca,sa,.0,    -sa,ca,.0,  .0,.0,1.);}\nvec3 noise(float p){return texture(iChannel0,vec2(p/iChannelResolution[0].x,.0)).xyz;}\nvec3 noise(vec2 p){return texture(iChannel0,p/iChannelResolution[0].xy).xyz;}\nvec3 noise(vec3 p){float m = mod(p.z,1.0);float s = p.z-m; float sprev = s-1.0;if (mod(s,2.0)==1.0) { s--; sprev++; m = 1.0-m; };return mix(texture(iChannel0,p.xy/iChannelResolution[0].xy+noise(sprev).yz).xyz,texture(iChannel0,p.xy/iChannelResolution[0].xy+noise(s).yz).xyz,m);}\nvec3 noise(float p, float lod){return texture(iChannel0,vec2(p/iChannelResolution[0].x,.0),lod).xyz;}\nvec3 noise(vec2 p, float lod){return texture(iChannel0,p/iChannelResolution[0].xy,lod).xyz;}\nvec3 noise(vec3 p, float lod){float m = mod(p.z,1.0);float s = p.z-m; float sprev = s-1.0;if (mod(s,2.0)==1.0) { s--; sprev++; m = 1.0-m; };return mix(texture(iChannel0,p.xy/iChannelResolution[0].xy+noise(sprev,lod).yz,lod).xyz,texture(iChannel0,p.xy/iChannelResolution[0].xy+noise(s,lod).yz,lod).xyz,m);}\n\nfloat df(vec3 p)\n{\n\tvec3 mp = p + (4.0);\n\tmp = mod(mp,8.0);\n\tmp -= vec3(4.0);\n\treturn length(mp)-2.0+sin(iTime*.2+p.x*0.1+p.y*.2+p.z*.3+sin(iTime*.1)*10.0+sin(iTime*.5)*2.0);\n}\n\n\nvec3 nf(vec3 p)\n{\n\tfloat e = .02;\n\tfloat dfp = df(p);\n\treturn vec3(\n\t\t(dfp+df(p+vec3(e,.0,.0)))/e,\n\t\t(dfp+df(p+vec3(.0,e,.0)))/e,\n\t\t(dfp+df(p+vec3(.0,.0,e)))/e);\n}\n\nvec3 shade(vec3 pos, vec3 dir)\n{\n\tfloat cell = dot(pos - mod(pos+vec3(4.0),8.0),vec3(.1,14.0,641.0));\n\t\tvec3 l = normalize(vec3(.4,.1,.2));\n\t\t\n\t\tvec3 n = normalize(nf(pos));\n\n\t\tfloat diffuse = dot(n,l)*.5+.5;\n\t\tfloat specular = pow(dot(reflect(dir,n),l)*.5+.5,100.0);\n\t\treturn noise(cell).xyz*diffuse+vec3(specular);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.yy - vec2(.9,.5);\n\tvec2 m = iMouse.xy / iResolution.yy - vec2(.9,.5);\n\t\n\tm*=4.0;\n\tm+=vec2(iTime*.2,iTime*.11);\n\t\n\tvec3 color = vec3(0.0);\n\t\n\tmat3 rot = rotate_x(m.y)*rotate_y(m.x);\n\t\n\tvec3 dir = vec3(uv,1.0-1.0/(1.0+iTime*.1)-length(uv)*.2+sin(iTime*.5)*.1);\n\tdir*=rot;\n\tdir = normalize(dir);\n\tvec3 pos = vec3(.0,.0,1.0)*rot;\n\tpos.y +=sin(iTime);\n\tpos += noise(fragCoord.xy).x*dir*2.0;\n\t\n\tpos.x+=iTime*4.0;\n\tpos.yz+=vec2(4.0);\n\t\n\tfloat dd = .0;\n\tfloat rad  = 1.5+cos(iTime*.18)*.5;\n\t\n\tfloat occlusion = .0;\n\t\n\tfor(int i=0; i<100; i++)\n\t{\n\t\tdd = df(pos);\n\t\tpos += (dd)*dir*.7;\n\t\tfloat c = (rad-dd)/rad;\n\t\tc = clamp(.0,c,1.0);\n\t\tcolor += mix(shade(pos,dir),color,c)*.011;\n\t}\n\t\n\tcolor = max(vec3(.0),color);\n\tcolor+= vec3(length(color));\n\tcolor-=length(uv)*.8;\n\tcolor = max(vec3(.0),color);\n\t\n\tcolor = pow(color,vec3(.8));\n\t\n\tfragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"ldsSz8","date":"1396901905","viewed":208,"name":"Pure Evil","username":"mu6k","description":"This is me doing some evil experiments...","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["raymarch","glow"],"hasliked":0,"parentid":"","parentname":""}}