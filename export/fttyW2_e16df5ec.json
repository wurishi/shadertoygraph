{"ver":"0.1","info":{"id":"fttyW2","date":"1660575885","viewed":275,"name":"Fork aji's Kale paperjack 903","username":"paperjack","description":"trippy","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["psychedelic","kaleidoscope","trippy"],"hasliked":0,"parentid":"4sfGzs","parentname":"aji's Kaleidoscope"},"renderpass":[{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"vec2 kaleido(vec2 uv)\n{\n\tfloat th = atan(uv.y, uv.x);\n\tfloat r = pow(length(uv), -.9 * sin(1.0+iTime/10.0)/ (0.2+cos(-iTime/4.0)));\n\tfloat f = 3.14159 / 5.0;\n\n\tth = abs(mod(th + f/4.0, f) - f/2.0) / (1.0 + r);\n\t//th = sin(th * 6.283 / f);\n\n\treturn vec2(cos(th), sin(th)) * r * .1;\n}\n\n\nvec3 rgb2hsv(vec3 c)\n{\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\n\nvec2 transform(vec2 at)\n{\n\tvec2 v;\n\tfloat th = .12 * iTime;\n\tv.x = at.x * cos(th) - at.y * sin(th) - .2 * sin(th);\n\tv.y = at.x * sin(th) + at.y * cos(th) + .2 * cos(th);\n\treturn v;\n}\n\nvec4 scene(vec2 at)\n{\n\treturn texture(iChannel0, transform(at) * 2.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\t\n\tuv.x = mix(-1.0, 1.0, uv.x);\n\tuv.y = mix(-1.0, 1.0, uv.y);\n\tuv.y *= iResolution.y / iResolution.x;\n    vec3 rgb = texture(iChannel0, transform(kaleido(uv)) * 2.0).rgb;\n    float lum = (rgb.r + rgb.g + rgb.b)/3.0;\n    vec3 hsv = rgb2hsv(rgb);\n    hsv.r += (iTime + cos(iTime/2.2))/4.0;\n    hsv.b *= lum * (lum+0.75+sin(iTime/10.0)*0.5);\n    hsv.g = 1.0;\n    \n\tfragColor = vec4(hsv2rgb(hsv), 1.0);\n}","name":"Image","description":"","type":"image"}]}