{"ver":"0.1","info":{"id":"wly3DW","date":"1578937564","viewed":565,"name":"pseudo-Tron screensaver","username":"FabriceNeyret2","description":"just for fun.\n\ncode golfed here: [url]https://www.shadertoy.com/view/ttyGWD[/url]","likes":14,"published":3,"flags":32,"usePreview":0,"tags":["tron","particles"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// === display buffer ====================================\n\nvoid mainImage( out vec4 O, vec2 U ) { O = T(U); }","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// === move particles ====================================\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O = T(U);\n    \n    if (iFrame==0 || O.w<0.) {  // --- called at init + particle timer\n        vec3 r = hash3(vec3(U,iTime));\n        if (iFrame==0) O.xy = r.xy *R/R.y;  // xy = normalized location\n        float d = floor(r.z*4.);\n        O.z = iFrame==0 ? d                 // z = direction: random\n                        : mod( O.z + sign(d-1.5), 4.); // or random turn\n        O.w = fract(r.z*4.)*60.;            // w = life time of current move\n        return;\n    }\n    if (U.y>1.) return;                     // limit particles\n    \n                                     // --- move particle\n    float d = sign(O.z-1.5) * radius/2.;    // dir = + or - ?\n    int(O.z)%2==0                           // orientation = x or y ?\n        ? O.x = fract((O.x+d)/ratio)*ratio  // screen wrap\n        : O.y = fract((O.y+d));\n    O.w--;                                  // timelife decrease \n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"// === utils from https://www.shadertoy.com/view/llySRh ==========\n\n#define radius   .01\n#define T(U)     texelFetch(iChannel0, ivec2(U), 0)\n#define T1(U)    texelFetch(iChannel1, ivec2(U), 0)\n#define R      ( iResolution.xy )\n#define ratio  ( R.x / R.y )\n#define hash3(p) fract(sin((p)*mat3(127.1,311.7, 74.7,  269.5,183.3,246.1,  113.5,271.9,124.6))*43758.5453123)\n#define S(v)     smoothstep( 0., -1.5/R.y, v )\n#define hue(c) ( .6 + .6 * cos( 6.3*(c)  + vec4(0,23,21,0)  ) )\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"// === draw bands ====================================\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O = T(U)*.99;                   // keep and fade past \n    \n    for(float i=0.; i++<30.; ) {    // draw particles\n        vec2  V = abs( U/R.y - T1(vec2(i,0)).xy ) / radius;\n        float r = dot(V,V);\n        if (r<1.) O = mix( O, hue(i/30.), S((sqrt(r)-1.)*radius)); // blend\n    }\n}","name":"Buffer B","description":"","type":"buffer"}]}