{"ver":"0.1","info":{"id":"fd3yDB","date":"1659841317","viewed":112,"name":"Pink and purple hearts","username":"HaleyHalcyon","description":"ararrra","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["spiralheartszoom"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define TAU (6.283185307)\n#define HEX(x) (vec3((x >> 16) & 255, (x >> 8) & 255, x & 255) / 255.)\n\n#define HEARTCOUNT 8.\n#define HEARTSCALE 1.\n\n#define LAYERS 32.\n#define LAYERSPERLOOP 6.\n#define LAYERSTAGGER -2.\n#define ALLROT 1./48.\n#define LAYERSCALE 0.5\n#define TOOFAR 1./16.\n\nfloat genHearts(float dist, float angle) {\n    angle = min(1.0, 1.5 * abs(2. * fract(angle * HEARTCOUNT) - 1.));\n    float angle2 = (1. - angle) * (1. - angle) * -0.2 + abs(1. - 2. * fract(angle));\n    angle2 *= angle2;\n    float dist2 = abs(dist - 1.0) * HEARTCOUNT / 8. * HEARTSCALE;\n    return mix (\n    step(\n        dist2 * dist2 * 8. + angle - 0.9\n    , 0.), step(\n        dist2 * 16.0 + angle2 * 3.0 - 2.\n    , 0.), step(1.0, dist)\n    );\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  float time = fract(1./3.*iTime);\n  // Normalized pixel coordinates (from 0 to 1)\n  float scale = min(iResolution.x, iResolution.y);\n  vec2 uv = (2. * gl_FragCoord.xy - iResolution.xy) / scale;\n  \n  float dist = length(uv) * 3.;\n  float angle = atan(uv.y, uv.x) / TAU;\n  \n  float hearts = 0.;\n  \n  for (float i = 0.; i < LAYERS; i++) {\n      float depth = (\n          LAYERS - i\n          - time * LAYERSPERLOOP\n      );\n      hearts = mix(\n          hearts, 1. - 2. * step(0.5, fract(i * 0.5)),\n          genHearts(\n              dist * depth * LAYERSCALE,\n              angle + depth * ALLROT + i * (LAYERSTAGGER / LAYERSPERLOOP / HEARTCOUNT)\n          )\n      );\n  }\n  float toofar = step(TOOFAR, dist);\n  \n  float palette = step(0.5, fract(\n      0.3 * log(dist) + angle * 1. + time\n  ));\n  \n  vec3 col = mix(\n      vec3(0.22, 0.19, 0.36), // dark\n      vec3(1.0, 0.85, 0.95), // light\n      palette\n  );\n  // positive hearts\n  col = mix(\n      col, mix(\n          vec3(0.6, 0.5, 0.9),\n          vec3(1.),\n          palette\n      ),\n      step(0.5, hearts)\n  );\n  // negative hearts\n  col = mix(\n      col, mix(\n          vec3(0.),\n          vec3(1.0, 0.65, 0.8),\n          palette\n      ),\n      step(0.5, -hearts)\n  );\n  \n  // too far\n  col *= toofar;\n  \n  // Output to screen\n  fragColor = vec4(\n    col, 1.0\n  );\n}","name":"Image","description":"","type":"image"}]}