{"ver":"0.1","info":{"id":"4tjXDw","date":"1444206959","viewed":115,"name":"TP - Ombre avec Phong","username":"Zoctos","description":"Ombre","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["phong","ombre"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n  \t uv.x *= iResolution.x / iResolution.y;\n    \n\tvec3 origine = vec3(0.0, 0.0, -2.0);\n\tvec3 direction = normalize(vec3(uv.x*2.0, uv.y*2.0, 1.0));\n    \n\tvec3 sphere = vec3(1.2,1.2,1.0);\n\tfloat rayon = 1.0;\n    \n\tvec3 lumiere = vec3(cos(iTime), sin(iTime), -2);\n    \n    vec3 sol = vec3(0.0, 2.2, 0.0);\n  \t \n\tvec3 p = origine;\n    \n\tfragColor = vec4(1.0, 1.0, 1.0 ,1.0);\n    \n\tfor(float i = 0.0; i <= 512.0; i++){\n   \t \n    \tp += direction*0.02;\n   \t \n    \tif(distance(p, sphere) <= 1.0){\n\n        \tvec3 color = vec3(0.2, 0.0, 0.0);\n       \t \n        \tvec3 normale = normalize(p - sphere);\n        \tvec3 nLumPoint = normalize(lumiere - p);\n       \t \n        \tvec3 reflexion = reflect(nLumPoint, normale);\n       \t \n        \tfloat diffuse = max(dot(normale, nLumPoint), 0.0);\n        \tfloat specular = pow(max(dot(reflexion, p), 0.0), 64.0);\n       \t \n        \tfloat intensite = diffuse + specular;\n       \t \n        \tcolor += intensite;\n       \t \n        \tfragColor = vec4(color, 1.0);\n       \t \n        \tbreak;\n       \t \n    \t}\n        else if(distance(p.y, sol.y) <= 0.2){\n       \t\t\n            vec3 nLumPoint = normalize(lumiere - p);\n                \n            vec3 reflexion = reflect(nLumPoint, -p);\n\n            float diffuse = max(dot(p, nLumPoint), 0.0);\n            float specular = pow(max(dot(reflexion, p), 0.0), 64.0);\n            \n            if(distance(nLumPoint, sphere) >= 2.95){\n                fragColor = vec4(0.0, 0.0, 0.4, 1.0);\n                \n            }\n            else{\n            \tfragColor = vec4(0.0, 0.0, 0.5+(diffuse+specular), 1.0);\n            }\n            \n            break;\n            \n        }\n   \t \n\t}\n    \n}\n","name":"","description":"","type":"image"}]}