{"ver":"0.1","info":{"id":"WdlBWN","date":"1588272682","viewed":158,"name":"Hot Nyancat","username":"jaszunio15","description":"Shader improvisation with @MetRiko and @rivFox\n\nOutline based on mipmap blur :)\n\nShader License: CC BY 3.0\nAuthor: Jan Mróz (jaszunio15)\n","likes":3,"published":1,"flags":64,"usePreview":0,"tags":["blur","mipmap","nyancat","outline","improvisation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":1,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdXGzn","filepath":"/media/a/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","previewfilepath":"/media/ap/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"MtB3Dw","filepath":"https://soundcloud.com/obviouslyfake/nyan-cat-2","previewfilepath":"https://soundcloud.com/obviouslyfake/nyan-cat-2","type":"musicstream","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Shader License: CC BY 3.0\n//Author: Jan Mróz (jaszunio15)\n\n#define PI_2 (3.14159 * 2.0)\n\nfloat hash(vec2 uv)\n{\n \treturn fract(sin(dot(uv, vec2(83.8643, 76.9864))) * 231.23861);\n}\n\nvec4 blurTexture(sampler2D sampler, vec2 uv, float minMipmap, float maxMipmap)\n{\n \tvec4 sumCol = vec4(0.0);\n    \n    //adding different mipmaps\n    for (float i = minMipmap; i < maxMipmap; i++)\n    {\n     \tsumCol += texture(sampler, uv, i);   \n    }\n    \n    //average\n    return sumCol / (maxMipmap - minMipmap);\n}\n\n\nfloat outline(sampler2D sampler, vec2 uv, float outlineSize)\n{\n\tfloat blur = blurTexture(sampler, uv, 2.0, 3.0).a;\n    float alpha = step(0.5 - outlineSize * 0.5, blur);\n    \n    return alpha;\n}\n\nvec4 outlineBlur(sampler2D sampler, vec2 uv, float outlineSize)\n{\n \tvec4 blur = blurTexture(sampler, uv, 4.0, 7.0);\n    vec4 col = 1.0 - smoothstep(0.0, 0.5, abs(blur - 0.5));\n    \n    return col;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.y;\n    uv.x *= iChannelResolution[0].y / iChannelResolution[0].x;\n    uv *= 1.2;\n    \n    uv -= vec2(0.05, sin(iTime * 3.0) * 0.1 + 0.1);\n    uv = clamp(uv, vec2(0.0), vec2(0.16, 1.0));\n    \n    float frame = floor(fract(iTime * 3.0) * 6.0);\n    uv.x += (0.937 / 6.0) * frame;\n\n    vec4 nyanCat = texture(iChannel1, uv);\n    float outline = outline(iChannel0, uv, 0.9999);\n    \n    vec2 distortVec = (texture(iChannel2, uv * 0.21 + vec2(iTime * 0.01)).xy - 0.5) * 0.005;\n    vec4 outlineBlur = outlineBlur(iChannel0, uv - distortVec, 0.9999);\n    \n    vec4 nyanCatDist = texture(iChannel0, uv - distortVec);\n    vec4 backCol = ((cos(vec4(0, PI_2 * 0.3333, PI_2 * 0.6666, 0.0) + iTime * 1.0)) * 0.5 + 0.5);\n    vec4 outlineCol = ((cos(vec4(0, PI_2 * 0.3333, PI_2 * 0.6666, 0.0) + iTime * 4.0)) * 0.5 + 0.5);\n    \n    vec4 image = backCol;\n    //image = mix(image, vec4(0.0, 1.0, 0.0, 0.0), outline);\n    image = mix(image, nyanCat, nyanCat.a);\n    image = mix(image, nyanCatDist * outlineCol, outlineBlur.a);// * 1.0 * vec4(ou);\n    \n    \n    fragColor = vec4(image);\n}","name":"Image","description":"","type":"image"}]}