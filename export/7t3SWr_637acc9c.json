{"ver":"0.1","info":{"id":"7t3SWr","date":"1638950938","viewed":388,"name":"Quadtree Partial (iterative)","username":"rmmcal","description":"Quadtree Partial \nInteraction: (mouse)\n","likes":25,"published":1,"flags":32,"usePreview":0,"tags":["reduce","quadtree"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/////////////////////////////////////////////////////////////\n//        ... Quadtree Partial (iterative) ...           ////\n/////////////////////////////////////////////////////////////\n// Brasil/Amazonas/Manaus\n// Created by Rodrigo Cal (twitter: @rmmcal)\n// - Published: 2021/12\n// https://www.shadertoy.com/view/7t3SWr\n//\n/////////////////////////////////////////////////////////////\n\nvoid diff(inout float g, float b, vec2 uv, vec2 d){\n   g = max(g, abs( b - length(texture(iChannel0, uv + d).rgb) ) );\n}\n\nfloat outline(vec2 uv )\n{\n    vec3 d = vec3(1.0 / iResolution.xy,0.);\n    float g, b;\n    diff( b, b, uv, d.xz );\n    diff( g, b, uv, d.zy);\n    g = (g+.5)*1.5-.5;\n    return g;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    fragColor.xyz = vec3(.0);\n    fragColor.xyz += pow(outline(uv)+.55,8.0);\n    fragColor.xyz += texture(iChannel0, uv ).rgb;\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"/////////////////////////////////////////////////////////////\n//        ... Quadtree Partial (iterative) ...           ////\n/////////////////////////////////////////////////////////////\n// Brasil/Amazonas/Manaus\n// Created by Rodrigo Cal (twitter: @rmmcal)\n// - Published: 2021/12\n// https://www.shadertoy.com/view/7t3SWr\n//\n/////////////////////////////////////////////////////////////\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    float v, pe = 4.0; // ignore 1,2,3 and start at 4\n    float n = 5.0;\n    if (sign(iMouse.z)>0.0){\n        vec2 m = floor((iMouse.xy/iResolution.xy)*7.0);\n        pe = m.x+1.0;\n        n = m.y+1.0;\n    }\n    for (float i = 0.0; i < n; i++) {\n        pe *= 2.0;\n        v += length( texture(iChannel0, floor(uv * pe) / pe).rgb );\n    }\n    fragColor.xyz = vec3(v/(n*2.0));\n}","name":"Buffer A","description":"","type":"buffer"}]}