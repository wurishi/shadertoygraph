{"ver":"0.1","info":{"id":"XsfXRS","date":"1455210799","viewed":225,"name":"Singularities","username":"fpsulli3","description":"Just a simple black hole effect.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGRn","filepath":"/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","previewfilepath":"/media/ap/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","previewfilepath":"/media/ap/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 blackHoleCenters[3];\n\n// Gravitational field at \n// position pos, given a black hole\n// of mass m at position center\n// (ignoring G constant)\nvec2 Fgrav(float m, vec2 center, vec2 pos)\n{\n\tvec2 dir = center - pos;\n\tfloat distance = length(dir);\n\tdir /= distance;\n\treturn dir * (m / (distance*distance));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 centerOfMass = vec2(iResolution.x*0.5, iResolution.y*0.5);\n\t\n\tblackHoleCenters[0] = centerOfMass;\n\tblackHoleCenters[2] = centerOfMass;\n\tblackHoleCenters[1] = centerOfMass;\n\t\n\tblackHoleCenters[0].x += cos(1.0*iTime + 3.0)*80.0;\n\tblackHoleCenters[0].y += sin(1.0*iTime + 3.0)*120.0;\n\t\n\tblackHoleCenters[1].x -= cos(1.5*iTime + 5.0)*240.0;\n\tblackHoleCenters[1].y += sin(1.5*iTime + 5.0)*80.0;\n\t\n\tblackHoleCenters[2].x += cos(2.0*iTime + 2.0)*120.0;\n\tblackHoleCenters[2].y += sin(2.0*iTime + 2.0)*150.0;\n\t\n\t\n\tvec2 netGrav   = Fgrav( 900.0, blackHoleCenters[0], fragCoord.xy);\n\tnetGrav       += Fgrav(1200.0, blackHoleCenters[1], fragCoord.xy);\n\tnetGrav       += Fgrav(1000.0, blackHoleCenters[2], fragCoord.xy);\n\t\n\tfloat netGravMag = length(netGrav);\n\t\n\tif(netGravMag >= 1.0)\n\t{\n\t\tfragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t}\n\telse\n\t{\n\t\tvec2 texCoord = (fragCoord.xy + netGrav*50.0)/iResolution.xy;\n\t\tvec4 texColor = texture(iChannel1, texCoord);\n\t\ttexColor *= 0.05;\n\t\t\n\t\tvec4 noise  = texture(iChannel0, 6.0*texCoord);\n\t\t\n\t\tif(abs(noise.x - 1.0) > 0.075)\n\t\t{\n\t\t\tnoise = vec4(0.0,0.0,0.0,1.0);\n\t\t}\n\t\t\n\t\tnoise      *= texture(iChannel0,  0.50*texCoord);\n\t\tnoise      *= texture(iChannel0,  1.00*texCoord);\n\t\tnoise      *= texture(iChannel0,  2.00*texCoord);\n\t\t\n\t\tvec3 finalColor = texColor.rgb+noise.rgb*0.5;\n\t\t\n\t\t//redshift\n\t\tfinalColor.g *= 1.0 - netGravMag*netGravMag*netGravMag*0.25;\n\t\tfinalColor.b *= 1.0 - netGravMag*0.5;\n\t\t\n\t\tfragColor = vec4(pow(finalColor, vec3(1.0/2.2)),1.0);\n\t}\t\n\t\n}","name":"Image","description":"","type":"image"}]}