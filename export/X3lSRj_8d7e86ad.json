{"ver":"0.1","info":{"id":"X3lSRj","date":"1709722485","viewed":183,"name":"Discrete Heat Equation","username":"TotallyReal","description":"Solving heat equation using Euler Forward and Nine Point Stencil","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["simulation","heat","numerical","euler","forward"],"hasliked":0,"parentid":"MlscDs","parentname":"Basic : Heat Equation"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\tfragColor = texelFetch(iChannel0,ivec2(fragCoord),0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// the constant k controls the rate of of heat propagation.\n// should be between 0 (no propagation) to 1 (full propagation)\nconst float k = 1.0;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){  \n\n    if(distance(iMouse.xy,fragCoord)<10.){\n        fragColor = vec4(1.);\n\n    }else{\n        \n   \t\tvec4 T = texelFetch(iChannel0,ivec2(fragCoord),0);\n        vec4 L = getLaplacian(iChannel0,ivec2(fragCoord));\n\n        float t = clamp(T + L*k, 0., 1.).a;      \n    \n        fragColor = vec4(\n            sqrt(t),\n            t * t * t,\n            max(sin(6.283 * t), 0.),\n            t\n        );\n\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"vec4 getLaplacian(sampler2D g, ivec2 p){\n    vec4 middle    = texelFetch(g,p,0);   \t\n    vec4 up        = texelFetch(g,p+ivec2( 0, 1),0);\n    vec4 down      = texelFetch(g,p+ivec2( 0,-1),0);\n    vec4 right     = texelFetch(g,p+ivec2( 1, 0),0);\n    vec4 left      = texelFetch(g,p+ivec2(-1, 0),0);\n    vec4 upright   = texelFetch(g,p+ivec2( 1, 1),0);\t\n    vec4 upleft    = texelFetch(g,p+ivec2(-1, 1),0);\n    vec4 downright = texelFetch(g,p+ivec2( 1,-1),0);\n    vec4 downleft  = texelFetch(g,p+ivec2(-1,-1),0);\n\n    // the disscrete analogue to second derivative,\n    // alternatively, how much the middle point need to change to be at the average of it neighbors.\n   \treturn (-8.*middle + up + left + right + down + upright + upleft + downright + downleft)/8.;  \n}","name":"Common","description":"","type":"common"}]}