{"ver":"0.1","info":{"id":"3tGXR3","date":"1583256995","viewed":249,"name":"Slip Boundary fourier fluid","username":"rory618","description":"http://www.erikreinhard.com/papers/i3d_2009.pdf","likes":16,"published":1,"flags":32,"usePreview":0,"tags":["physics","dct","dst"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 O, in vec2 I )\n{\n    O = vec4(.3*sqrt(length(texture(iChannel0, I/R.xy).xy)));\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":1,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec4 tAdvect(vec2 I){\n    if(iFrame<3){\n        return 4.*texture(iChannel1, I/R.xy);\n    }\n    vec4 v = texture(iChannel0, I/R.xy);\n    return texture(iChannel0, (v.xy*3. + I + rand2(IHash(int(I.x)^IHash(int(I.y)^IHash(iFrame)))))/R.xy);\n}\n\n\n//DST-II x channel along x\n//DCT-II y channel along x\nvoid mainImage( out vec4 O, in vec2 I ){\n    O = vec4(0);\n    for(float x = 0.5; x < R.x; x++){\n        vec4 t = tAdvect(vec2(x,I.y));//texture(iChannel0, vec2(x,I.y)/R.xy);\n        float s = sin(pi/R.x*x*(I.x - 0.5));\n        float c = cos(pi/R.x*x*(I.x - 0.5));\n        O.xy += vec2(s, c) * t.xy;\n    }\n    if(floor(I.x)==0.){ O.y /= sqrt(2.); }\n    \n    if(floor(I.x)==R.x-1.){ O.x /= sqrt(2.); }\n    O.z = tAdvect(vec2(I)).z;\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"//DCT-II x channel along y\n//DST-II y channel along y\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    O = vec4(0);\n    for(float y = 0.5; y < R.y; y++){\n        vec4 t = texture(iChannel0, vec2(I.x,y)/R.xy);\n        float c = cos(pi/R.y*y*(I.y - 0.5));\n        float s = sin(pi/R.y*y*(I.y - 0.5));\n        O.xy += vec2(c, s) * t.xy;\n    }\n    \n    if(floor(I.y)==0.){ O.x /= sqrt(2.); }\n    \n    if(floor(I.y)==R.y-1.){ O.y /= sqrt(2.); }\n    \n    vec2 v = normalize((I.xy + 0.5) / R.xy);\n    O.xy -= v * dot(v, O.xy);\n    O.xy *= exp(-dot(I.xy,I.xy)/1e5);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"//Inverse transforms\n//DST-III * 2/N x channel along x\n//DCT-III * 2/N y channel along x\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    vec4 tf = texture(iChannel0, vec2(0.5,I.y)/R.xy);\n    vec4 tl = texture(iChannel0, vec2(R.x-0.5,I.y)/R.xy);\n    O = vec4(tl.x/sqrt(2.) * (1.-mod(floor(I.x),2.)*2.), tf.y/sqrt(2.), 0, 0);\n    O.x += tf.x * sin(pi/R.x*I.x);\n    O.y += tl.y * cos(pi/R.x*(R.x - 1.)*I.x);\n    for(float x = 1.5; x < R.x-1.; x++){\n        vec4 t = texture(iChannel0, vec2(x,I.y)/R.xy);\n        float s = sin(pi/R.x*(x - 0.5)*I.x);\n        float c = cos(pi/R.x*(x - 0.5)*I.x);\n        O.xy += vec2(s, c) * t.xy;\n    }\n    O *= 2./R.x;\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"//Inverse transforms\n//DCT-III * 2/N x channel along y\n//DST-III * 2/N y channel along y\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    vec4 tf = texture(iChannel0, vec2(I.x,0.5)/R.xy);\n    vec4 tl = texture(iChannel0, vec2(I.x,R.y-0.5)/R.xy);\n    O = vec4(tf.x/sqrt(2.), tl.y/sqrt(2.) * (1.-mod(floor(I.y),2.)*2.), 0, 0);\n    O.y += tf.y * sin(pi/R.y*I.y);\n    O.x += tl.x * cos(pi/R.y*(R.y - 1.)*I.y);\n    for(float y = 1.5; y < R.y-1.; y++){\n        vec4 t = texture(iChannel0, vec2(I.x,y)/R.xy);\n        float c = cos(pi/R.y*(y - 0.5)*I.y);\n        float s = sin(pi/R.y*(y - 0.5)*I.y);\n        O.xy += vec2(c, s) * t.xy;\n    }\n    O *= 2./R.y;\n    \n    if(iMouse.z>0. && length(I-iMouse.xy)<6.){\n        O.xy += iMouse.zw-iMouse.xy;\n    }\n}","name":"Buffer D","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define R iResolution\n#define pi 3.14159265\nint IHash(int a){\n\ta = (a ^ 61) ^ (a >> 16);\n\ta = a + (a << 3);\n\ta = a ^ (a >> 4);\n\ta = a * 0x27d4eb2d;\n\ta = a ^ (a >> 15);\n\treturn a;\n}\n\nfloat Hash(int a){\n\ta = (a ^ 61) ^ (a >> 16);\n\ta = a + (a << 3);\n\ta = a ^ (a >> 4);\n\ta = a * 0x27d4eb2d;\n\ta = a ^ (a >> 15);\n\treturn float(a) / float(0x7FFFFFFF);\n}\nvec2 rand2(int seed){\n    return vec2(Hash(seed^0x348C5F93),\n                Hash(seed^0x8593D5BB));\n}\n\n\nvec2 randn(vec2 randuniform){\n    vec2 r = randuniform;\n    r.x = sqrt(-2.*log(1e-9+abs(r.x)));\n    r.y *= 6.28318;\n    r = r.x*vec2(cos(r.y),sin(r.y));\n    return r;\n}","name":"Common","description":"","type":"common"}]}