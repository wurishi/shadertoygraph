{"ver":"0.1","info":{"id":"3scGR7","date":"1568039215","viewed":157,"name":"spaceKlaxa","username":"foran","description":"spaceKlaxa","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["spaceklaxa"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define STEPS 50.\n#define PI 3.14159\n#define TAU (2.*PI)\n#define sdist(v,s) (length(v)-s)\n#define time iTime\n#define repeat(v,s) (mod(v,s)-s/2.)\n\nmat2 rot (float a) {\n  float c=cos(a),s=sin(a);\n  return mat2(c,-s,s,c);\n}\n\nvoid amod (inout vec2 p, float count) {//  количество\n  float an = TAU/count;\n  float a = atan(p.y,p.x)+an/2.;\n  a = mod(a,an)-an/2.;\n  p = vec2(cos(a),sin(a))*length(p);\n}\n\nfloat map (vec3 pos) {\n  float scene = 1000.;\npos.xz *= rot(length(pos)*.09);\npos.xy *= rot(length(pos)*.08);\n    pos.xz *= rot(time*.5);\n    pos.xy *= rot(time*.8);\n\n  vec3 p = pos;//             обнулить pos для следующей фигуры верёвки\n   p.xz *= rot(p.y*.5);//     вращение по y\n  amod(p.xz, 15.);//          количество 5\n  p.x -= 1. + .5 * sin(p.y+time);//диаметр вращения по y\n  p.y = repeat(p.y+time*2., .1);//#define repeat(v,s)(mod(v,s)-s/2.)//  частота по y, s=1.0 редко-часто 11  1.0  0.1-часто\n          //scene = sdist(p, .091);//  .01 #define sdist(v,s)(length(v)-s)// толще-тоньше s=0.1 средне\n          //scene = min(scene, max(sdist(p.yz, .091),p.x));     //рёбра .01\n   scene = min(scene, sdist(p.xz, .091));// верёвки .01------------\n\n    p = pos;//                  обнулить pos для следующей фигуры  тарелочки в направляющих\n  p.y = repeat(p.y - time, 3.);//  частота тарелочек по y, s=1.0 редко-часто 11  1.0  0.1-часто\n  //float wave = 1. * sin(p.y*5.+time);\n  //p.x = repeat(p.x, 5.);\n  scene = min(scene, max(sdist(p.xz, 1.), abs(p.y)-.01));// тарелочки---------\n  amod(p.xz, 7.);//         количество 5    дырки в тарелочках\n          p.x -= .5;\n  scene = max(scene, -sdist(p.xz, .2));//дырки в тарелочках--------------\n          p.x -= 6.;//                          диаметр многоугольника\n  scene = min(scene, sdist(p.xy, .051));//  толщина многоугольника--------------\n  scene = min(scene, sdist(p.xz, .102));//  толщина направляющих-------------\n  \n  p = pos;//                  обнулить pos для следующей фигуры    бусы\n  amod(p.xz,1.);//         количество плоскостей 32\n  p.x -= 2.;\n  p.y = repeat(p.y, .5);// .5  расстояние между бусинами      частота по y, s=1.0 редко-часто 11  1.0  0.1-часто\n  p.x = repeat(p.x-time*.1, .5);// 1.0 расстояние между нитками  частота по x, s=1.0 редко-часто 11  1.0  0.1-часто\n  //scene = min(scene, sdist(p, .1092));//  шары на бусах .02--------------\n  //scene = min(scene, sdist(p.xz, .01));//  толщина бус .01---------------\n\n  p = pos;//                  обнулить pos для следующей фигуры   круг\n  float pl = length(p)*2.-time*.5;//  количество перекрутов\n  float lod = 55.2;//                 количество линий в перекрутах\n  pl = floor(pl*lod)/lod;\n           p.xy *= rot(pl);//         вращение перекрутов\n           scene = min(scene, max(sdist(p.xz, 3.85), abs(p.y)-.0091));//  масштаб=3.5 и яркость=.001 перекрута-------------\n  \n  p = pos;//                 обнулить pos для следующей фигуры  линии\n  amod(p.xz, 1.);//         количество плоскостей 3\n  p.x -= 2.;\n  p.x = repeat(p.x+ time*.1, .2);//  расстояние между линиями\n  scene = min(scene, sdist(p.xz, .0091));//  толщина линий----------------\nreturn scene;\n\n} \nvoid mainImage(out vec4 fragColor,in vec2 fragCoord)\n{\n  vec2 uv=vec2(fragCoord.x/iResolution.x,fragCoord.y/iResolution.y);\n  uv-=.5;\n  uv/=vec2(iResolution.y/iResolution.x,1);\n  vec3 eye = vec3(0,0,-8);//-6\n  vec3 ray = normalize(vec3(uv, 1.));\n  vec3 pos = eye;\n  float shade = 0.;\n  for (float i =0.; i <= 1.; i += 1./STEPS) \n  {\n    \n    float dist = map(pos);\n    if (dist < .001) {\n      shade = 1.-i;\n      break;\n   }\n    dist *= .9;\n    pos += dist * ray;\n  }\n vec4 out_color=vec4(1.);\n  vec4 color=vec4(1.);\n  color*=shade;\n  out_color=color;\n  fragColor=vec4(out_color);\n}","name":"Image","description":"","type":"image"}]}