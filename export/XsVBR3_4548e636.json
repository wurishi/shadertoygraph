{"ver":"0.1","info":{"id":"XsVBR3","date":"1529794780","viewed":264,"name":"spherical coordinates","username":"JohanFlod","description":"messing about with spherical coordinates. ","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["checkerboard"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// \n\n#define TWO_PI 6.28318530718\n\nfloat getDistortion(float amplitude, float frequence) {\n\treturn amplitude*sin(frequence+iTime*0.5);\n}\nvec3 generateCheckerboard(vec2 screen_space, vec3 black, vec3 white)\n{\n    // make the chequered pattern smaller towards the center \n   \tfloat checksum = ceil(((screen_space.x)/(5.-screen_space.x))+iTime)+ceil((screen_space.y)+4.0*iTime);\n    \n    // odd or even checkerboard position\n    bool check = mod(checksum,2.0) == 0.0;\n\n    \n  \t\n    // set colour according to which board position we are on \n\tvec3 color = (check)? black:white;\n    color = vec3(color);\n    return color; \n}\nvec3 colorCheckerboard(vec3 color, vec2 st)\n{\n  \tcolor.r = 0.2*smoothstep(0.3, 4.6, st.y) ;\n    color.r += getDistortion(.1,st.y);\n\tcolor.g = 0.2*smoothstep(0.3, 4.6, st.x) ;\n    color.g += getDistortion(0.1,st.x);\n    return color;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 st = fragCoord/iResolution.xy;\n    // scale up coordinate system for a 5*5 checkerboard\n    st*=5.0;\n    vec3 color = vec3(.0);\n    vec3 black = vec3(0.0);\n    vec3 white = vec3(1.0);\n\t\n\t\n    vec2 toCenter = vec2(2.5)-0.68*st;\n \tfloat angle = atan(toCenter.x, toCenter.y);\n    float radius = length(toCenter)*2.;\n    // to polar coordinates\n    \n    \n    st.x = radius+4.0;\n    st.y = angle*TWO_PI*1.5;\n    color = generateCheckerboard(st, black, white);\n    color = mix(color,black,1.-radius/10.);\n    color.r += getDistortion(0.2,0.2);\n    color = color-vec3(0.1);\n    \n    fragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}]}