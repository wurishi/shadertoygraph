{"ver":"0.1","info":{"id":"stXXW8","date":"1625591389","viewed":302,"name":"Color Palette Post-Processing","username":"wainggan","description":"it work!!","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["color","palette"],"hasliked":0,"parentid":"slfSW8","parentname":"Color Crusher"},"renderpass":[{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// color palette to use\nvec3 palette[] = vec3[](\n    vec3(0.19, 0.21, 0.20),\n    vec3(0.34, 0.09, 0.30),\n    vec3(0.51, 0.05, 0.24),\n    vec3(0.72, 0.20, 0.42),\n    vec3(0.92, 0.39, 0.62),\n    vec3(0.98, 0.72, 0.75),\n    vec3(0.78, 0.85, 0.83),\n    vec3(0.67, 0.85, 0.99),\n    vec3(0.50, 0.72, 0.75),\n    vec3(0.20, 0.38, 0.51)\n);\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy; // something something\n    \n    vec3 col = texture(iChannel0, uv).rgb;\n    \n    // loop through all the colors of the palette and see which one is closest to the texture color\n    float closest = 9999999.0;\n    int closeIndex = -1;\n    for (int i = 0; i < palette.length(); i += 1) {\n        vec3 dCol = col - palette[i];\n        float d = length(dCol); // rbg distance\n        \n        if (d < closest) {\n            closest = d;\n            closeIndex = i;\n        }\n    }\n\n    vec3 newcolor = palette[closeIndex];\n    \n    fragColor = vec4(newcolor, 1.0);\n}","name":"Image","description":"","type":"image"}]}