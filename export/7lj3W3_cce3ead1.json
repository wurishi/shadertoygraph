{"ver":"0.1","info":{"id":"7lj3W3","date":"1624886100","viewed":342,"name":"livecode.demozoo.org jam","username":"louis_C","description":"jam made for livecode.demozoo.org Release Party jam\n\nhttps://www.twitch.tv/videos/1068564238","likes":22,"published":1,"flags":40,"usePreview":0,"tags":["jamlivecoding"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ){\n fragColor = texture(iChannel0, fragCoord/iResolution.xy);}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\nfloat hs(vec3 p){return fract(sin(dot(p,vec3(45.,95.,123.)))*7845.236);}\nmat2 rot(float t){ float c = cos(t); float s = sin(t); return mat2(c,-s,s,c);}\nfloat box(vec3 p, vec3 b){vec3 q = abs(p)-b;\n  return length(max(q,vec3(0.)))+min(0.,max(q.x,max(q.y,q.z)));}\n  float smin(float a, float b, float t){ float h = clamp(0.5+0.5*(b-a)/t,0.,1.);\n    return mix(b,a,h)-t*h*(1.-h);}\n    float li(vec3 p , vec3 a ,  vec3 b){vec3 pa = p-a; vec3 ba  = b-a; float h = clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\n      return length(pa-ba*h);}\n    float l1 ;float zl ;\nfloat map(vec3 p){vec3 pc = p; vec3 pl = p;vec3 pb = p;\n  float tn1 = 0.02;float tn2 = 0.4;\n  float nn = ((texture(iChannel1,p.xy*tn1+23.).x+texture(iChannel1,p.zy*tn1+435.).x+texture(iChannel1,p.xz*tn1+512.).x)-0.7)*2.;\n  nn +=  ((texture(iChannel1,p.xy*tn2+296.).x+texture(iChannel1,p.zy*tn2).x+texture(iChannel1,p.xz*tn2+125.).x)-1.)*0.2;\n  float v1 = pow(texture(iChannel1,vec2(0.5,iTime)).x,1.5)*10.;\n  float d1 = length (p*vec3(1.,0.8,1.))-2.-nn;\n  pc.xy *= rot(0.8);\n  pc.xz *= rot(0.8);\n  float d2 = box(pc,vec3(1.6))-nn;\n  float d3 = smin(d1,d2,0.2);\n  float tj = step(0.75,fract(iTime*0.4));\n  float tm4 = iTime*2.;\n  float d4 = length(p+vec3(cos(tm4),sin(iTime*2.),sin(tm4))*2.7);\n  float ta  = 6.28/3.;\n  float a = atan(pl.x,pl.z);\n  float at = mod(a+0.5*ta,ta)-0.5*ta;\n  pl.xz = vec2(cos(at),sin(at))*length(pl.xz);\n  pl.y = distance(fract(pl.y),0.5);\n  float d6 = max(li(pl,vec3(3.,0.,-100.),vec3(3.,0.,100.)),(length(p.y+0.5)-v1));\n  l1 = mix(d4,d6*2.,tj);\n  float fzl = 0.003;\n  zl += fzl/(fzl+mix(d4,d6,tj));\n  pb.xz *= rot(iTime);\n  float d7 = mix((distance(0.5,fract(pb.y))*2.)-0.5,1000.,step(0.3,fract(iTime)));\n  float d5 = min(max(max(d3,-(d3+0.1)),-d7),mix(d4-0.3,d6-0.03,tj));\n  return d5;}\n float ev(vec3 r){ float v1 = smoothstep(0.,1.,texture(iChannel1,vec2(0.2,iTime)).x);\n   return pow(smoothstep(0.15,0.95,texture(iChannel1,r.xz*0.1).x),v1)*smoothstep(2.,0.,length(r.y));}\n \n vec3 nor (vec3 p){ vec2 e  = vec2(0.01,0.); return normalize(map(p)-vec3(map(p-e.xyy),map(p-e.yxy),map(p-e.yyx)));}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n float v1 = texture(iChannel1,vec2(0.51,iTime*0.4)).x;\n vec2 uv  = fragCoord/iResolution.xy;\n  vec2 uc = uv;\n  uv -= 0.5;\n  uv *=2.;\n    uv.x *=iResolution.x/iResolution.y;\n    vec3 p = vec3(0.,0.,-4.-v1*3.);\n  vec3 r = normalize(vec3(uv,1.));\n float tt = iTime;float tt2 = iTime*0.5;\n  p.xz *= rot(tt);\n  r.xz *=rot(tt);\n  p.xy *= rot(tt2);\n  r.xy *=rot(tt2);\n  float dd = 0.;float dm = 10.;\n  for(int  i = 0 ; i < 64 ; i++){\n    float d = map(p);\n    if(dd>dm){dd= dm;break;}\n    if(d<0.001){break;}\n    p += r*d;\n    dd += d;\n  }\n  float ti1 = step(0.5,fract(iTime*5.));\n  float ti2 = step(0.1,fract(iTime));\n  float s = smoothstep(dm,5.,dd);\n  vec3 n = nor(p);\n  float dao = 1.;\n  float ao = clamp(map(p+n*dao)/dao,0.,1.);\n \n  float ld = clamp(dot(n,-r),0.,1.);\n  float br = hs(p*0.1);\n  float sp = pow(ld,5.+br*5.)*0.5+pow(ld,30.+br*30.)*0.2*br;\n  float fr = pow(1.-ld,0.4+br*0.4)*0.2+pow(1.-ld,1.+br)*0.2*br;\n  float r0 = pow(ev(reflect(n,r)),1.+br*0.7);\n  r0 += sp*0.2;\n  r0 += fr*0.2;\n  r0 *= ao;\n  float li = smoothstep(5.,0.,l1);\n   float dss = 2.5;\n  float ss = clamp(map(p+r*dss)/dss,0.,1.);\n  float li2 = pow(li,mix(1.5,0.5,ss));\n  //li2 *= s;\n  li2 *= ti1;\n   \n  float r1 = pow(clamp(mix(ev(r),r0,s),0.,1.),1.+ti2*5.);\n  r1 += li2*s*(ti2);\n  r1 += zl;float c = 0.;\n  for( int i = -1 ; i <= 1 ; i ++)\n  for( int j = -1 ; j <= 1 ; j ++){\n    c += texture(iChannel0, uc +vec2 (i,j)/iResolution.xy).a;\n  }\n  c/= 9.;\n   r1 = clamp(mix(r1,c,0.5),0.,1.);\n  vec3 rc = mix(vec3(1.),3.*abs(1.-2.*fract(iTime*32.+vec3(0.,-1./3.,1./3.)))-1.,0.3)*r1*1.5;\n    fragColor = vec4(vec3(rc),r1);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"// simulation of TexNoise\nfloat no(vec2 p, float scale){p *= scale;\nvec2 f = floor(p); p = smoothstep(0.,1.,fract(p));\nvec2 se  = vec2(284.,26.);vec2 v1 = dot(se,f)+vec2(0.,se.y);\nvec2 v2 = mix(fract(sin(mod(v1,scale))*7845.236),fract(sin(mod(v1+se.x,scale))*7845.236),p.x);\nreturn mix(v2.x,v2.y,p.y);}\nfloat it(in vec2 p, float tt){float r = 0.0;float scale = 5.;p = mod(p, scale);\n\tfloat a   = 0.5; for (int i = 0; i < int(tt); i++){\n\tr += no(p, scale) * a;a *= .5;scale *= 2.;}return r;}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    float t1 = it(uv,9.);\n\tfragColor = vec4(t1);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"float rd(float t){return fract(sin(dot(floor(t),45.236))*7845.125);}\nfloat no(float t){return mix(rd(t),rd(t+1.),smoothstep(0.,1.,fract(t)));}\nfloat hash(float x){return fract(sin(x) * 897612.531);}\nfloat it(float t){float r=0.;float a=0.5;for(int i = 0 ; i <3; i ++){\n    r +=no(t/a)*a;a*=0.5;}return r;}\nfloat inst (float time){\n    float v2 = 0.;\n    float tr = rd(time*0.5)+0.2;\n    float vtr = 30.+rd(time*0.3)*60.;\n    float v3 = 0.;\n    float tbv3 = it(time*0.5)*3.;\n    float vv3 = smoothstep(0.,1.,it(time*2.));\n    for (int i = 1 ; i < 20 ; i ++){\n        float v = float(i);\n        float rand = fract(120.*sin(v*100.));\n        float t2 = v/20. + 0.01*rand*5.;\n        float amp = exp2(-t2);\n     v2 += fract(fract(time)*vtr*v)*(1.-pow(fract(time-t2+v*tr),v*0.01));\n     float bv3 = pow(it(time+v*0.0005),tbv3);\n     v2 *=(1.-bv3*0.5);\n    }\n    v2 *=0.2;\n   return clamp(v2,-1.,1.);\n}\nfloat voc(float t, float f, float ft,float t2){float x = fract(t * f) / f;\nfloat b1 = no(t);\nfloat a=(sin(x*5.+b1*3.*ft)*.4+sin(x*10.+b1*5.*ft)+sin(x*20.+b1*7.*ft)*.2);\n   return a* min(x * 1000., 1.) * exp(x * -200.);}\nvec2 inst2(float t, float var){\n    vec2 v = vec2(0., 0.);\n    for(int i = 0; i < 16; ++i){\n        float h = float(i);\n       \tfloat m = voc(t + h / 3., 200. + pow(2.01, (h - 8.) * .2), var,t);\n        float pan = hash(h);\n        v.x += m * pan;\n        v.y += m * (1. - pan);\n    }\n    return v * .1;\n}\n\nvec2 mainSound( in int samp, float time )\n{\n\t\n    float tbv3 = it(time*0.5)*3.;\n    vec2 f =  vec2(inst(time)+inst2(time,200.)*(1.-pow(it(time),tbv3)));\n   return f;\n}","name":"Sound","description":"","type":"sound"}]}