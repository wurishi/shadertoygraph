{"ver":"0.1","info":{"id":"tdfGDr","date":"1545718830","viewed":615,"name":"Lightning render","username":"rory618","description":"Overlaying lots of pseudo random walks with slight random tweaks to the random seed","likes":30,"published":1,"flags":32,"usePreview":0,"tags":["procedural","random","lightning","greyscale"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define R iResolution\n\nvoid mainImage( out vec4 o, in vec2 i )\n{\n   o = pow(max(vec4(0),log(texture(iChannel0, i/R.xy))/(log(1.+iTime)+1.)-.2),vec4(4.));\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define R iResolution\nint IHash(int a){\n\ta = (a ^ 61) ^ (a >> 16);\n\ta = a + (a << 3);\n\ta = a ^ (a >> 4);\n\ta = a * 0x27d4eb2d;\n\ta = a ^ (a >> 15);\n\treturn a;\n}\n\nfloat Hash(int a){\n\ta = (a ^ 61) ^ (a >> 16);\n\ta = a + (a << 3);\n\ta = a ^ (a >> 4);\n\ta = a * 0x27d4eb2d;\n\ta = a ^ (a >> 15);\n\treturn float(a) / float(0x7FFFFFFF);\n}\nvec4 rand4(int seed){\n    return vec4(Hash(seed^0x348593),\n                Hash(seed^0x8593D5),\n                Hash(seed^0x625384),\n                Hash(seed^0x253625));\n}\nvec3 rand3(int seed){\n    return vec3(Hash(seed^0x348593),\n                Hash(seed^0x8593D5),\n                Hash(seed^0x625384));\n}\nvec2 rand2(int seed){\n    return vec2(Hash(seed^0x348593),\n                Hash(seed^0x8593D5));\n}\n\n\nvec2 randn(vec2 randuniform){\n    vec2 r = randuniform;\n    r.x = sqrt(-2.*log(1e-9+abs(r.x)));\n    r.y *= 6.28318;\n    r = r.x*vec2(cos(r.y),sin(r.y));\n    return r;\n}\nvec2 randc(vec3 randuniform){\n    float t = 6.28318*randuniform.x;\n\tfloat u = randuniform.y+randuniform.z;\n\tfloat r = u>1.?2.-u:u;\n\treturn vec2(r*cos(t), r*sin(t));\n}\n\nvoid mainImage( out vec4 o, in vec2 i )\n{\n    vec2 uv = (i*2.-R.xy)/R.y;\n\tint seed = 0x1F55FAAF;\n    o = vec4(0);\n    for (int qq = 0; qq < 5; qq++){\n    \n        float k = Hash(seed^(0x6253849*iFrame*(qq+1)));\n        int ki = IHash(seed^(0x6253849*iFrame*(qq+1)));\n        vec2 a = vec2(-2,0);\n        vec2 b = vec2(2,0);\n        float j = 0.;\n    \n        for(int q = 0; q < 10; q++){\n        \n            if(int(pow(2.,(k-1.)*8.)*10.)<=q){\n                seed=IHash(seed+int(k*float(q+20)));\n            }\n            float r = length(a-b)/2.;\n            vec2 c = (a+b)/2.;\n            vec2 n = c+r*randc(rand3(seed))*.5;\n            j += float(length(uv-c)<r);\n        \n            if(length((a+n)/2.-uv)-length(a-n)/2.>\n               length((b+n)/2.-uv)-length(b-n)/2.){\n                a=n;\n            \tseed=IHash(seed^0x6253849);\n            } else {\n                b=n;\n             \tseed=IHash(seed^0x5c96feb5);\n            }\n        }\n    \n        float d = length(uv-(a+normalize(b-a)*min(length(b-a),max(0.,dot(normalize(b-a),(uv-a))))));\n        o += vec4(max(0.,1.-d*R.y));\n    }\n    o +=texture(iChannel0, i/R.xy);\n    \n}","name":"Buffer A","description":"","type":"buffer"}]}