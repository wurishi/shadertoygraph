{"ver":"0.1","info":{"id":"XscBz7","date":"1524418836","viewed":229,"name":"line segment drawing","username":"akhgary","description":"an approach to draw a line segment. simply the product of circle inequation and line equation.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["line","plot","draw","segment","linesegment"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//\n// line equation in 2d vector determinant form: det(pp1, p2p1)\n//\n// https://en.wikipedia.org/wiki/Linear_equation#2D_vector_determinant_form\n//\n// to get a constant width, distance is divided by length of p1p2.\n//\n// abs(det(pp1, p2p1))/length(p1p2)\n//\n// ========================================\n//\n// circle inequation:  (x-a)^2 + (y-b)^2 < r^2\n//\n// https://en.wikipedia.org/wiki/Circle#Equations\n//\n// ========================================\n//\n// by multiplying this plots together you get a line segment. \n//\n\nconst float thickness = 1.5;\nconst float sharpness = 10.0;\n\nvec2 uvmap(vec2 pixels)\n{\n    vec2 uv = pixels / iResolution.xy * 2.0 - 1.0;\n    return uv * 10.0;\n}\n\nfloat line(vec2 uv, vec2 p1, vec2 p2)\n{\n    mat2 mat = mat2(uv-p1, p2-p1);\n    float fx = determinant(mat);\n    float dist = abs(fx)/length(p2-p1);\n    return clamp(thickness-dist*sharpness, 0.0, 1.0);\n}\n\nfloat circle(vec2 uv, vec2 c, vec2 p)\n{\n    vec2 a = uv-c, r = p-c;\n    float fx = 1.0-dot(a,a)/dot(r,r);\n    return clamp(fx*sharpness, 0.0, 1.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = uvmap(fragCoord.xy);\n\n    vec2 p1 = vec2(0), p2 = uvmap(iMouse.xy);\n    \n    vec2 mid = (p1+p2)/2.0;\n\n    float gline = line(uv, p1, p2);\n    float gcircle = circle(uv, mid, p2);\n    float segment = clamp(gline*gcircle, 0.0, 1.0);\n\n    vec3 col = vec3(gline, 0, 0)/2.0\n             + vec3(0,0,gcircle)/2.0\n             + vec3(segment);\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}