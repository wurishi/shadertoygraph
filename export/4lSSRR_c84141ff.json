{"ver":"0.1","info":{"id":"4lSSRR","date":"1440796334","viewed":526,"name":"Ordered Dithering Shader","username":"mooglemoogle","description":"Does ordered dithering to black/white on the data from channel 0","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["dithering"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float threshold = .5;\nconst float mult = 1.0 / 17.0;\nconst mat4 adjustments = (mat4(\n    1, 13, 4, 16,\n    9, 5, 12, 8,\n    3, 15, 2, 14,\n    11, 7, 10, 6\n) - 8.) * mult;\n\nfloat getLuminance( vec4 color ) {\n    return (0.2126*color.r + 0.7152*color.g + 0.0722*color.b);\n}\n\nfloat adjustFrag( float val, vec2 coord ) {\n    vec2 coordMod = mod(coord, 4.0);\n    int xMod = int(coordMod.x);\n    int yMod = int(coordMod.y);\n    \n    vec4 col;\n    if (xMod == 0) col = adjustments[0];\n    else if (xMod == 1) col = adjustments[1];\n\telse if (xMod == 2) col = adjustments[2];\n\telse if (xMod == 3) col = adjustments[3];\n    \n    float adjustment;\n    if (yMod == 0) adjustment = col.x;\n    else if (yMod == 1) adjustment = col.y;\n    else if (yMod == 2) adjustment = col.z;\n    else if (yMod == 3) adjustment = col.w;\n    \n    return val + (val * adjustment);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tvec4 videoColor = texture(iChannel0, uv);\n    \n    float vidLum = getLuminance(videoColor);\n    vidLum = adjustFrag(vidLum, fragCoord.xy);\n    \n    if (vidLum > threshold) {\n        fragColor = vec4(1, 1, 1, 1);\n    } else {\n    \tfragColor = vec4(0, 0, 0, 1);\n    }\n}","name":"Image","description":"","type":"image"}]}