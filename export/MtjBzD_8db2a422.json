{"ver":"0.1","info":{"id":"MtjBzD","date":"1515000916","viewed":98,"name":"Pattern020118","username":"edapx","description":"flower, patterns","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["patterns","flower"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265358979323846\n\nvec2 rotate2d(float _angle, vec2 _st){\n    _st -= 0.5;\n    mat2 rot =  mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle));\n    _st = rot * _st;\n    _st += 0.5;\n    return _st;\n}\n\nfloat distortedDaisy(\n  vec2 st, vec2 orig, float resize, float smoothness,\n  float nPetals, float distorsion, float addendum){\n  // From Inigo's video\n  // https://www.youtube.com/watch?v=0ifChJ0nJfM\n  \n  vec2 toCenter = orig-st;\n  // to turn the picture upside down, uncomment the following line\n  //vec2 toCenter = st-orig;\n  float angle = atan(toCenter.y,toCenter.x);\n  float r = resize + addendum*cos(angle * nPetals + distorsion * toCenter.x);\n  return smoothstep(r, r+smoothness, length(toCenter));\n}\n\nvec2 offset(vec2 _st, vec2 _offset){\n    vec2 uv = _st;\n\n    uv.x -= step(_offset.x, _st.x) * _offset.x;\n    uv.x += (step(_st.x, _offset.x) * _offset.x);\n\n    uv.y -= (step(_offset.y, _st.y) * _offset.y);\n    uv.y += (step(_st.y, _offset.y) * _offset.y);\n\n    return uv;\n}\n\n\nfloat box(vec2 _st, vec2 _size){\n    _size = vec2(0.5)-_size*0.5;\n    vec2 uv = smoothstep(_size,_size+vec2(1e-4),_st);\n    uv *= smoothstep(_size,_size+vec2(1e-4),vec2(1.0)-_st);\n    return uv.x*uv.y;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 backgroundColor = vec3(0.980,0.304,0.163);\n    vec3 foregroundColor = vec3(0.137,0.413,0.790);\n    \n    vec2 st = fragCoord / iResolution.y;\n    \n    st *= 3.0;\n    st = fract(st);\n    //float d = 150.0; // distorsion\n    float d = 90. + abs(sin(iTime)) * 60.;\n    float r = 0.3;  // resize\n    float a = 0.1;  //addendum\n    float p = 40.0; // number of petals\n    float s = 0.049; // smoothness of the border\n    vec2 center = vec2(0.5);\n  \n    float col = distortedDaisy(st, center,r,s,p,d,a);\n    \n    vec2 offsetSt = offset(st, vec2(0.5));\n    float bigBox = box(offsetSt,vec2(0.7));\n    float smallBox = box(rotate2d(PI/4., offsetSt),vec2(0.6 - abs(sin(iTime)) * 0.1));\n    \n    backgroundColor += (bigBox - smallBox) * vec3(0.460,0.880,0.278);\n\tfragColor = vec4(mix(foregroundColor, backgroundColor, col),1.0);\n}","name":"Image","description":"","type":"image"}]}