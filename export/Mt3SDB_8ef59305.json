{"ver":"0.1","info":{"id":"Mt3SDB","date":"1481402198","viewed":135,"name":"Fireball Mataball tears","username":"prime31","description":"From http://blog.seans.site/post/154285665406/a-hot-shader","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    const int numMetaballs = 4;\n\tfloat cosTime = cos( iTime ), sinTime = sin( iTime );\t\n\t\n    // UNIFORMS\n    float tearSharpness = 7.0;\n    float tearWaveLength = 5.0;\n    float tearWaveSpeed = 500.0;\n    float tearWaveAmplitude = 10.0;\n    \n    vec2 ditherAmount = vec2( 20.0, 20.0 );\n    \n    vec2 metaballs[4];\n\tmetaballs[0] = vec2( cosTime * 200. + 300., sinTime * 150. + 200.);\n\tmetaballs[1] = vec2( cosTime * 250. + 350., sin( iTime * 0.25 ) * 100. + 200. );\n\tmetaballs[2] = vec2( cos( iTime * 0.33 ) * 300. + 350., sin( iTime * 1.5 ) * 150. + 200.);\n\tmetaballs[3] = iMouse.xy;\n    \n\tfloat metaball_size[4];\n\tmetaball_size[0] = 100.0;\n\tmetaball_size[1] = 190.0;\n\tmetaball_size[2] = 150.0;\n\tmetaball_size[3] = 100.0;\n    \n    float metaballInfluence[4];\n\tmetaballInfluence[0] = 1.2;\n\tmetaballInfluence[1] = 0.9;\n\tmetaballInfluence[2] = 0.8;\n\tmetaballInfluence[3] = 1.0;\n    \n    \n\tfloat influence = 0.0;\n    \n    float x = gl_FragCoord.x;\n    float y = gl_FragCoord.y;\n    \n    // calculate total influence\n    for( int i = 0; i < numMetaballs; ++i )\n    {\n        // start off with distance between pixel and metaball\n        float d = distance( gl_FragCoord.xy, metaballs[i] );\n        \n\t\t// pick a point above metaball\n\t\tfloat tearOffset = metaballs[i].y + metaball_size[i];\n\n\t\t// animate tear offset\n        tearOffset -= ( sin( gl_FragCoord.x / tearWaveLength + iTime * tearWaveSpeed / metaball_size[i] ) * tearWaveAmplitude );\n        \n        // apply tear shape\n\t\td += pow( distance( gl_FragCoord.x, metaballs[i].x ) * tearSharpness / distance( gl_FragCoord.y, tearOffset ), 2.0 );\n\n        // flame wave\n        x = gl_FragCoord.x;\n        y = gl_FragCoord.y;\n        x += sin( gl_FragCoord.y / ditherAmount.x + cosTime * 4.0 );\n        y += cos( gl_FragCoord.x / ditherAmount.y + sinTime * 4.0 );\n\n        // dither\n        d += sin( y * 3.14 + iTime ) * metaball_size[i] / ditherAmount.y;\n        d += cos( x * 3.14 + iTime ) * metaball_size[i] / ditherAmount.x;\n        \n        // divide by radius and keep within range (0.0, 1.0)\n        d = min( 1.0, d / metaball_size[i] );\n                \n        // smooth falloff\n        d = ( 1.0 - d * d );\n        d *= d;\n                \n        // add to total (with multiplier)\n        influence += d * metaballInfluence[i];\n    }\n\n\t// output\n\tfragColor.r = step( 0.01, influence );\n    fragColor.g = step( 0.3, influence );\n    fragColor.b = step( 0.75, influence );\n}\n\n","name":"Image","description":"","type":"image"}]}