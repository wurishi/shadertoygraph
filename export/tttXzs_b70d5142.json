{"ver":"0.1","info":{"id":"tttXzs","date":"1581579578","viewed":76,"name":"EasyFluid","username":"Highland","description":"Easy Fluid","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SAMPLE_ENERGY(coord) texture(iChannel0, (coord) / iResolution.xy)\n\nvoid mainImage( out vec4 color, in vec2 coord )\n{\n    color = SAMPLE_ENERGY(coord).w * vec4(0.5, 0.6, 0.8, 1.0) * 1.5;\n\n    if (abs(coord.x - iResolution.x * 0.5) < 4.5 && coord.y < iResolution.y * 0.15)\n    {\n        vec3 normal = normalize(vec3(coord.x - iResolution.x * 0.5, 0.0, -1.0));\n        vec3 light = normalize(vec3(1.0, -1.0, 1.0));\n        float lambert = clamp(dot(normal, light) + 0.2, 0.0, 1.0) + 0.1;\n       \tcolor += vec4(0.8, 0.6, 0.1, 1.0) * lambert;\n    }\n    \n    if (length(coord.xy - vec2(iResolution.x * 0.5, iResolution.y * 0.15)) < 5.0)\n        color = vec4(1.0, 0.3, 0.3, 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define SAMPLE_ENERGY(coord) texture(iChannel0, (coord) / iResolution.xy)\n\nvec4 SampleField(vec2 coord)\n{\n    vec2 guessVelocity = SAMPLE_ENERGY(coord).xy;\n    vec2 guessPosition = coord - guessVelocity;\n    return SAMPLE_ENERGY(guessPosition);\n}\n\nvoid mainImage(out vec4 energy, in vec2 me)\n{\n    energy = SampleField(me);\n    \n    vec4 left   = SampleField(me - vec2(1.0, 0.0));\n    vec4 right  = SampleField(me + vec2(1.0, 0.0));\n    vec4 top    = SampleField(me - vec2(0.0, 1.0));\n    vec4 bottom = SampleField(me + vec2(0.0, 1.0));\n    \n    energy.b = (left.b + right.b + top.b + bottom.b) * 0.25;\n    \n    vec2 force = vec2(left.b, top.b) - vec2(right.b, bottom.b);\n    energy.xy += force * 0.25;\n    \n    energy.b += (left.x - right.x + top.y - bottom.y) * 0.25;\n    energy.b = clamp(energy.b, 0.0, 1.0);\n    \n    energy.xy += vec2(0.0, 1.0) * energy.w * 0.003;\n    \n    energy.w += (left.x * left.w - right.x * right.w + top.y * top.w - bottom.y * bottom.w) * 0.25;\n    energy.w = clamp(energy.w, 0.0, 1.0);\n    \n    if (me.y >= iResolution.y - 2.0 || me.x <= 2.0 || me.x >= iResolution.x - 2.0)\n        energy.xy = vec2(0.0);\n    \n    if (length(me - vec2(iResolution.x * 0.5, iResolution.y * 0.15).xy) < 5.0)\n        energy.w = 1.0; \n}","name":"Buffer A","description":"","type":"buffer"}]}