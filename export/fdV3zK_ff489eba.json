{"ver":"0.1","info":{"id":"fdV3zK","date":"1631807796","viewed":87,"name":"note:01","username":"shunyadezain","description":"learning raymarching","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["raymarching"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//reference: https://gaz.hateblo.jp/entry/2019/05/11/092204\n\n#define rot(a) mat2(cos(a),sin(a),-sin(a),cos(a))\n\nvec3 trans(vec3 p){\n    return mod(p, 8.0) - 4.0;\n}\n\nfloat deBox(vec3 p)\n{\n    return length(max(abs(p)-vec3(1),0.0));   \n}\n\n\nfloat de1(vec3 p)\n{\n    p *= vec3(sin(sin(iTime-.5 + sin(iTime+.5))),sin(sin(iTime + cos(iTime))),sin(cos(iTime + sin(iTime))));\n\n    return deBox(p);\n}\n\n\nfloat de2(vec3 p){\n\n    vec3 b1 = p;\n    b1.x = 1.;\n    vec3 b2 = p;\n    b2.y = 1.;\n    vec3 b3 = p;\n    b3.z = 1.;\n\n    return min(deBox(b1), min(deBox(b2), deBox(b3)));\n}\n\nfloat map(vec3 p)\n{\n    p.xy*=rot(iTime*.3);\n    p = trans(p);\n    \n    return max(de1(p), de2(p));\n}\n\nvec3 doColor(vec3 p)\n{\n    return vec3(0.,0.1,0.2);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv=(fragCoord*2.0-iResolution.xy)/iResolution.y;\n    vec3 ro=vec3(0,0,iTime*3.);\n    vec3 rd=normalize(vec3(uv,1));\n    //camera\n    vec3 ta=vec3(0,0,0); //target\n    vec3 w=normalize(ta-ro);\n    vec3 u=normalize(cross(w,vec3(0,1,0)));\n    vec3 v=cross(u,w);\n    mat3 lookat=mat3(u,v,w);\n    rd=lookat*rd;\n    //\n    float d,i,t=0.0;\n    vec3 p=ro;\n    vec3 col=vec3(0);\n    for(i=1.0;i>0.0;i-=1./100.0)\n    {\n        t+=d=map(p);\n        if(d<0.001)\n        {\n            col += doColor(p);\n            col += pow(i , 1.); \n            break;\n        }\n        p+=rd*d;\n    }\n    \n    fragColor=vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}