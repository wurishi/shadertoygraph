{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"vec3 saturate(vec3 a)\n{\n\treturn clamp(a, 0.0, 1.0);\n}\nvec2 saturate(vec2 a)\n{\n\treturn clamp(a, 0.0, 1.0);\n}\nfloat saturate(float a)\n{\n\treturn clamp(a, 0.0, 1.0);\n}\n\nfloat rand(float a)\n{\n\treturn fract(sin(a*87654.321)*54321.123);\n}\n\nfloat pulse(float a)\n{\n\treturn sin(saturate(a)*3.14159);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tuv -= 0.5;\n\tuv.x *= iResolution.x/iResolution.y;\n\n\tfloat bpm = 80.0;\n\tfloat beatH2 = fract(iTime*0.5*bpm/60.0)*2.0;\n\tfloat beat4 = fract(iTime*4.0*bpm/60.0)*0.25;\n\tfloat measure4 = floor(iTime*2.0*bpm/60.0);\n\tfloat measure8 = floor(iTime*4.0*bpm/60.0);\n\n\tvec2 waveUV = uv;\n\tif (rand(measure8) >= 0.5)\n\t\twaveUV += pulse(sin(uv.y*18.0 + iTime*70.0))*0.02;\n\telse\n\t\twaveUV += pulse(sin(uv.x*8.0 + iTime*10.0))*0.005;\n\tfloat a = atan(uv.x, uv.y) + iTime;\n\tif (rand(measure4+0.2) > 0.5) \n\t\twaveUV -= sin(a*1.0)*0.5*pulse(beatH2);\n\tif (rand(measure4+0.1) > 0.5) \n\t\twaveUV -= sin(a*32.0)*0.01*pulse(beat4);\n\tfloat dist = pow(length(waveUV) - 0.2 - pulse(beatH2*8.0)*0.02, 0.2);\n\t\n\tfloat noiseWave = texture(iChannel0, waveUV * (length(waveUV))+iTime*7.5973).x;\n\tnoiseWave *= 1.0-saturate(pow(length(waveUV) - beatH2, 0.3));\n\tdist -= noiseWave*0.2;\n\tfragColor = vec4(dist, dist, dist, 1.0);\n}","name":"Image","description":"","type":"image"},{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"vec3 saturate(vec3 a)\n{\n\treturn clamp(a, 0.0, 1.0);\n}\nvec2 saturate(vec2 a)\n{\n\treturn clamp(a, 0.0, 1.0);\n}\nfloat saturate(float a)\n{\n\treturn clamp(a, 0.0, 1.0);\n}\n\n\nfloat rand(float a)\n{\n\treturn fract(sin(a*87654.321)*54321.123);\n}\n\nfloat hihatClosed(float t)\n{\n\treturn rand(t) * saturate(1.0-sqrt(t*13.0));\n}\n\nfloat snare(float t)\n{\n\treturn rand(t) * saturate(1.0-pow(t*4.0, 0.95))*1.6;\n}\n\nfloat drum808Kick(float t)\n{\n\treturn sin(t*6.2831852*440.0*0.125)* saturate(1.0-sqrt(t)*0.85)*2.0;\n}\n\nfloat drumSynthKick(float t)\n{\n\treturn sin(t*6.2831852*440.0*0.25*(1.0-t*0.25))* saturate(1.0-t);\n}\n\nfloat pitch(float pianoKey)\n{\n\treturn pow(2.0, (pianoKey - 49.0) / 12.0) * 440.0;\n}\n\nfloat piano(float t, float pianoKey)\n{\n\treturn sin(t*6.2831852*pitch(pianoKey))* saturate(1.0-sqrt(t));\n}\n\nfloat harsh(float t, float pianoKey)\n{\n\tfloat base = saturate(tan(t*6.2831852*pitch(pianoKey)))* ceil(saturate(1.0-t*1.0))*0.3;\n\tt -= 0.5;\n\t//base += 0.25*(saturate(tan(t*6.2831852*pitch(pianoKey)))* ceil(saturate(1.0-abs(t)*1.5))*0.3);\n\treturn base;\n}\n\nvec2 mainSound( in int samp,float time)\n{\n\tfloat bpm = 80.0;\n\tfloat measure = floor(time*0.5*bpm/60.0);\n\tfloat measure4 = floor(time*2.0*bpm/60.0);\n\tfloat measure8 = floor(time*4.0*bpm/60.0);\n\tfloat beatH2 = fract(time*0.5*bpm/60.0)*2.0;\n\tfloat beat1 = fract(time*bpm/60.0);\n\tfloat beat2 = fract(time*2.0*bpm/60.0)*0.5;\n\tfloat beat4 = fract(time*4.0*bpm/60.0)*0.25;\n\tfloat beat8 = fract(time*8.0*bpm/60.0)*0.125;\n\tfloat mono = 0.0;\n\tmono += drumSynthKick(beatH2)*2.0;\n\t//if (rand(measure4) < 0.75) mono += drumSynthKick(saturate(beat4 + 0.25));\n\tif (rand(measure4+0.2) > 0.5) mono += piano((beatH2), 49.0+mod(measure4, 2.0)*7.0 + floor(0.5+rand(measure4+0.2))*12.0);\n\tif (rand(measure4+0.1) > 0.5) mono += piano((beat1+0.5), 49.0+3.0);\n\tif (mod(measure, 2.0) == 1.0)\n\t{\n\t\tmono += drum808Kick(saturate(beatH2 - 0.75))*2.0;\n\t\t//mono += piano(saturate(beatH2 - 0.125), 49.0+mod(measure, 4.0));\n\t}\n\tmono += snare(beatH2 - 1.0);\n\tif (rand(measure4) > 0.75) mono += snare(beatH2 - 0.25);\n\tvec2 stereo = vec2(mono, mono);\n\tif (rand(measure8) < 0.5)\n\t\tstereo += vec2(1.0, 1.0) * hihatClosed(beat2);\n\telse\n\t\tstereo += vec2(sin(measure8), cos(measure8)) * hihatClosed(beat8);\n\treturn stereo * 0.2;\n}","name":"Sound","description":"","type":"sound"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":true,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MdXSDj","date":"1406790126","viewed":4727,"name":"beat drop 256","username":"otaviogood","description":"I kinda messed up my math from the start, but I just went with it. I'm just excited to be trying out the new synth functionality.","likes":44,"published":1,"flags":0,"usePreview":0,"tags":["beat","synth"],"hasliked":0,"parentid":"","parentname":""}}