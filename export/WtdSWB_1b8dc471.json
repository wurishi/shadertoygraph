{"ver":"0.1","info":{"id":"WtdSWB","date":"1581635579","viewed":143,"name":"Penrose Fourier","username":"rory618","description":"DFT of a penrose tiling, slide mouse to look at the tiling.","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["2d","dft"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n\nvoid mainImage( out vec4 o, in vec2 i )\n{\n    o = 0.1*log(abs(texture(iChannel0, fract(i/R.xy+0.5))));\n    if(iMouse.x>i.x)\n        o = texture(iChannel1, i/R.xy)/float(iFrame);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\n\nfloat sdLine(vec2 uv, vec2 a, vec2 abn){\n    vec2 x = uv-a;\n    vec2 r = abn.yx*vec2(-1,1);\n    return dot(r, x - abn * dot(x, abn));\n}\n\nvoid mainImage( out vec4 o, in vec2 i )\n{\n    float s = 2./R.y;\n    vec2 uv = ((i - 0.5 + fract(i.x * vec2(3434.4353, 6563.46) + i.y * vec2(2789.0237485, 3464357.376) + float(iFrame) * vec2(2535.8735665,325.65) ) )*2.-R.xy)/R.y;\n    \n    s /= 1.;\n    uv /= 1.;\n    \n    int type = 0;\n    \n    float angle = atan(uv.y,uv.x);\n    angle = mod(angle + tao/10.,tao/5.) - tao/10.;\n    angle = abs(angle);\n    uv = length(uv) * cos(angle - vec2(0,pi/2.));\n    \n    if(sdLine(uv, rot20(2.), rot20(6.)) > 0. ){\n    \n        for(int i = 0; i < 7; i++){\n            float d0 = sdLine(uv, vec2(1./phi,0), rot20(8.) );\n            float d1 = sdLine(uv, vec2(1./phi,0), rot20(3.) );\n            float d2 = sdLine(uv, rot20(2.), rot20(9.));\n            float d3 = sdLine(uv, rot20(2.), rot20(4.));\n            s *= phi;\n\n            if(d0 > 0.){\n                type = 1;\n                uv.y = d0 * phi;\n                uv.x = d1 * phi;\n            } else {\n                type = 0;\n                uv.x = d2 * phi;\n                uv.y = abs(d3) * phi;\n            }\n        }\n    \n    \to = vec4(type,1-type,1,1);\n    } else {\n        o = vec4(0);\n    }\n    o += texture(iChannel0, i/R.xy);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 o, in vec2 i )\n{\n    o = vec4(0);\n    for(float x = 0.5; x < R.x; x++){\n        vec2 s = vec2(texture(iChannel0, vec2(x,i.y)/R.xy).x/float(iFrame), 0);\n        o.xy += mat2(s,-s.y,s.x)*cos((x-0.5)/R.x*tao*i.x - vec2(0,pi/2.));\n    }\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"void mainImage( out vec4 o, in vec2 i )\n{\n    o = vec4(0);\n    for(float y = 0.5; y < R.y; y++){\n        vec2 s = texture(iChannel0, vec2(i.x,y)/R.xy).xy;\n        o.xy += mat2(s,-s.y,s.x)*cos((y-0.5)/R.y*tao*i.y - vec2(0,pi/2.));\n    }\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define R iResolution\n#define pi 3.14159\n#define tao 6.28318\n#define phi 1.6180339\n#define rot20(x) cos((x)*tao/20. - vec2(0,pi/2.))","name":"Common","description":"","type":"common"}]}