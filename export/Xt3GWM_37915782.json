{"ver":"0.1","info":{"id":"Xt3GWM","date":"1469450740","viewed":228,"name":"012 soft min blending","username":"kakaxizhhgjh","description":"use soft min do blending","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["blending","softmin"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float smin(float a, float b, float k) {\n\tfloat h = clamp(0.5 + 0.5 * (a - b) / k, 0.0, 1.0);\n    return mix(a, b, h) - k * h * (1.0 - h);\n}\n\nfloat line_segment(vec2 p, vec2 a, vec2 b) {\n\tvec2 ab = b - a, ap = p - a;\n    return length(ap - ab * clamp(dot(ab, ap) / dot(ab, ab), 0.0, 1.0));\n}\n\nfloat box(vec2 p) {\n    vec2 d = abs(p) - 0.3;\n\treturn min(max(d.x,d.y),0.0) + length(max(d,0.0));\n}\n\nfloat circle(vec2 p, float r) {\n\treturn length(p) - r;\n}\n\nfloat sdf(vec2 p) {\n\treturn smin(box(p - vec2(sin(iTime * 0.6), 0.0)),\n                circle(p - vec2(cos(iTime * 0.6), 0.0), 0.3), 0.1);\n}\n\nfloat plot_edge(float d) {\n\treturn smoothstep(3.0 / iResolution.y, 0.0, abs(d));\n}\n\nfloat plot_solid(float d) {\n\treturn smoothstep(3.0 / iResolution.y, 0.0, max(0.0, d));\n}\n\nfloat plot_solid_with_blooming(float d) {\n\treturn 1.0 - clamp(d, 0.0, 1.0);\n}\n\nvec3 plot_contour(float d) {\n\tvec3 bg = mix(vec3(0.3, 0.8, 1.0), vec3(1.0, 0.8, 0.6), plot_solid_with_blooming(d));\n    bg = mix(bg, vec3(1.0, 0.44, 0.33), plot_solid(d));\n    bg = mix(bg, vec3(0.0), plot_edge(d));\n    bg -= vec3(0.1) * plot_edge(mod(d + 0.025, 0.05) - 0.025);\n    bg -= vec3(0.3) * plot_edge(mod(d + 0.1, 0.2) - 0.1);\n    return bg;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;\n    fragColor = vec4(plot_contour(sdf(uv)), 1.0);\n}","name":"Image","description":"","type":"image"}]}