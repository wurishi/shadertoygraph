{"ver":"0.1","info":{"id":"MtGGzd","date":"1476267595","viewed":338,"name":"Tunnel Light","username":"aminere","description":"An endless tunnel with a light at the end of it.","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["tunnel","blob"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGRn","filepath":"/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","previewfilepath":"/media/ap/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec3 blob(vec2 point, vec2 uv, vec3 color, float invIntensity, float invGlow)\n{\n    float d = distance(uv, point);\n    //d += sin(uv.x * uv.y);\n\tfloat invD = 1.0/d;\n\tinvD = pow(invD / invIntensity, invGlow);    \n\treturn color * invD;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // [0, res] to [-1, 1]\n\tvec2 coord = -1.0 + (fragCoord.xy / iResolution.xy) * 2.0;\n    vec2 ncoord = coord * vec2(iResolution.x / iResolution.y, 1.0);\n    \n    // change look at\n    ncoord.x += sin(radians(iTime*40.0)) * .1;    \n    ncoord.y += cos(radians(iTime*40.0)) * .8;\n    \n    // rotation\n    float angleRot = radians(iTime)*30.0;    \n    vec2 tcoord = vec2(ncoord.x * cos(angleRot) - ncoord.y * sin(angleRot),\n                       ncoord.y * cos(angleRot) + ncoord.x * sin(angleRot));    \n    \n    // tunnel projection    \n    float angle = atan(tcoord.x, tcoord.y);\n    float radius = length(tcoord);\n    vec2 uv = vec2(angle, 1.0/radius);\n    \n    uv /= radians(180.0);  \n    uv.y += iTime*.5; // scrolling    \n    \n    vec4 col = texture(iChannel0, uv);\n    col = vec4(pow(col.r, 3.0));    \n    \n    // glow by Shane + intensity change\n    /**/\n    float intensity = 0.5 + sin(radians(iTime*20.0));\n    float h = fract(sin(dot(uv, vec2(41, 289)))*43758.5453) * intensity;\n\tfloat s = clamp(cos(angle*6.), 0., 1.);\n\tcol = mix(col, vec4(4.2, 2.4, 1.5, 1)*(1.0 + intensity), clamp(s*.15 +.8 + h*.15, 0., 1.)/(1. + radius*radius*32.));\n    /**/\n    \n    // glow - old version\n    /**\n    float invIntensity = 6.0 + sin(radians(iTime*20.0)) * 5.0;\n    float invGlow = 2.3;\n    col.rgb += blob(vec2(0.0, 0.0), tcoord, vec3(1.0, 0.7, 0.6), invIntensity, invGlow);\n\t/**/\n    \n\tfragColor = col;\n}\n\n","name":"Image","description":"","type":"image"}]}