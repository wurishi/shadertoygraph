{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"// \n// BINARY & STYLIZED ROUND CLOCK\n//\n\n\n#define LED_COUNT 16\n#define LED_HOURS 4\n#define LED_MINUTES 6\n#define LED_SIZE .1\n#define LED_COLOR_ON vec4(.0,.6,0.,1.)\n#define LED_COLOR_OFF vec4(.6,0.,0.,1.)\n\n// Led position\nlowp vec2 ledPos[LED_COUNT];\n\n// Global UVs\nlowp vec2 uv = vec2(0.);\nlowp vec2 ar = vec2(1.,1.);\n\n// Draw a circle\nlowp float circle(lowp vec2 p, lowp float r)\n{\n \treturn step(length((p - uv)*ar),r*.5);\n}\n\n// Draw a LED\nlowp vec4 led(lowp vec2 p, bool onOff)\n{\n    // Led color\n    lowp vec4 color = onOff ? LED_COLOR_ON : LED_COLOR_OFF; \n    \n    // Trace led\n    lowp vec4 l = circle(p,LED_SIZE) * color * .6;\n    l += circle(p,LED_SIZE*.6) * color;\n    \n    // Glow\n    if(onOff)\n    {\n     \tl += LED_COLOR_ON * pow(clamp( (1. - length((p - uv)*ar)),0.,1.),12.);  \n        l += .7 * circle(p+vec2(.01),LED_SIZE*.3);\n    }\n    \n    return l;\n}\n\n// Draw a regular needle clock\n#define PI 3.141592\n#define TWOPI (PI * 2.)\n#define HPI (PI * .5)\nlowp vec4 clock(lowp vec2 p, highp float h, highp float m, highp float s)\n{\n    if(h == 0.) h = 12.;\n    if(m == 0.) m = 60.;\n    if(s == 0.) s = 60.;\n    \n    vec2 uvc = (uv - p)*ar;\n    float a = atan(-uvc.x,-uvc.y) / TWOPI + .5;\n    h = pow(a*12./h * step(a,h/12.) * 1.2 ,4.) * circle(p,.5);\n    m = pow(a*60./m * step(a,m/60.) * 1.2 ,5.) * circle(p,.6);\n    s = pow(a*60./s * step(a,s/60.) * 1.2 ,6.) * circle(p,.7);\n    h = clamp(h,0.,1.);\n    m = clamp(m,0.,1.);\n    s = clamp(s,0.,1.);\n \tlowp vec4 o = (vec4(m+h+s) / 3.);  \n    return o;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Globals\n\tuv = fragCoord.xy / iResolution.xy;\n    ar.x = iResolution.x / iResolution.y;\n    \n    // Led array\n    lowp vec3 rows = vec3(.75,.5,.25);\n    ledPos[0] = vec2(.8,rows.x);\n    ledPos[1] = vec2(.6,rows.x);\n    ledPos[2] = vec2(.4,rows.x);\n    ledPos[3] = vec2(.2,rows.x);\n    ledPos[4] = vec2(.8,rows.y);\n    ledPos[5] = vec2(.68,rows.y);\n    ledPos[6] = vec2(.56,rows.y);\n    ledPos[7] = vec2(.44,rows.y);\n    ledPos[8] = vec2(.32,rows.y);\n    ledPos[9] = vec2(.2,rows.y);\n    ledPos[10] = vec2(.8,rows.z);\n    ledPos[11] = vec2(.68,rows.z);\n    ledPos[12] = vec2(.56,rows.z);\n    ledPos[13] = vec2(.44,rows.z);\n    ledPos[14] = vec2(.32,rows.z);\n    ledPos[15] = vec2(.2,rows.z);\n    \n    // LEDs\n    lowp vec4 leds = vec4(0.);\n    lowp vec4 color;\n    bool onOff;\n    float t,h,m,s,r;\n        \n    // Time in seconds\n    t = iDate.w;    \n\n    // Hours\n    h = floor(t/3600.);\n    t -= 3600. * h;\n    h = mod(h,12.);\n    // Minutes\n    m = floor(t/60.);\n    t -= 60. * m;\n    // Seconds\n    s = t;         \n    \n    // Round clock\n    lowp vec4 roundClock = clock(vec2(.5),h,m,s);\n   \n    for(int i = LED_COUNT-1; i >= 0; i--)\n    {\n        onOff = false;     \n        if(i < LED_HOURS)\n        {  \n            r = pow(2.,float(i)); \n            if(h >= r)\n            {\n            \th = mod(h,r); \n                onOff = true;\n            }\n        }\n        else if(i < LED_HOURS + LED_MINUTES)\n        {   \n            r = pow(2.,float(i - LED_HOURS)); \n            if(m >= r)\n            {\n            \tm = mod(m,r); \n                onOff = true;\n            }\n        }\n        else\n        {    \n            r = pow(2.,float(i - LED_HOURS - LED_MINUTES)); \n            if(s >= r)\n            {\n            \ts = mod(s,r); \n                onOff = true;\n            }\n        }\n        \n                \n        // Draw the led\n     \tleds += led(ledPos[i],onOff);   \n    }\n    \n    // Output\n    lowp vec4 c = vec4(0.,0.,.3,1.) * (1.-pow(1.6*length(uv - vec2(.5)),3.));\n    c += leds;\n    \n    // Round clock\n    c += roundClock*.3;\n        \n        \n\tfragColor = vec4(c);\n}        ","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MdjSW1","date":"1411679520","viewed":293,"name":"Binary Clock","username":"BGC","description":"Time presented in a binary fashion H:M:S + stylized regular round clock on top for time reference.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["binary","time","clock","led"],"hasliked":0,"parentid":"","parentname":""}}