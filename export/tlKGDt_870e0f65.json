{"ver":"0.1","info":{"id":"tlKGDt","date":"1580220287","viewed":120,"name":"copy plasma","username":"Sanprieto","description":"plasma","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["plasma"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define RM_FACTOR   0.9\n#define RM_ITERS     90\n\nfloat plasma(vec3 r) {\n\tfloat mx = r.x + iTime / 0.130;\n\tmx += 20.0 * sin((r.y + mx) / 20.0 + iTime / 0.810);\n\tfloat my = r.y - iTime / 0.200;\n\tmy += 30.0 * cos(r.x / 23.0 + iTime / 0.710);\n\treturn r.z - (sin(mx / 7.0) * 2.25 + sin(my / 3.0) * 2.25 + 5.5);\n}\n\nfloat scene(vec3 r) {\n\treturn plasma(r);\n}\n\nfloat raymarch(vec3 pos, vec3 dir) {\n\tfloat dist = 0.0;\n\tfloat dscene;\n\n\tfor (int i = 0; i < RM_ITERS; i++) {\n\t\tdscene = scene(pos + dist * dir);\n\t\tif (abs(dscene) < 0.1)\n\t\t\tbreak;\n\t\tdist += RM_FACTOR * dscene;\n\t}\n\n\treturn dist;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\tfloat c, s;\n\tfloat vfov = 3.14159 / 2.3;\n\n\tvec3 cam = vec3(0.0, 0.0, 30.0);\n\n\tvec2 uv = (fragCoord.xy / iResolution.xy) - 0.5;\n\tuv.x *= iResolution.x / iResolution.y;\n\tuv.y *= -1.0;\n\n\tvec3 dir = vec3(0.0, 0.0, -1.0);\n\n\tfloat xrot = vfov * length(uv);\n\n\tc = cos(xrot);\n\ts = sin(xrot);\n\tdir = mat3(1.0, 0.0, 0.0,\n\t           0.0,   c,  -s,\n\t           0.0,   s,   c) * dir;\n\n\tc = normalize(uv).x;\n\ts = normalize(uv).y;\n\tdir = mat3(  c,  -s, 0.0,\n\t             s,   c, 0.0,\n\t           0.0, 0.0, 1.0) * dir;\n\n\tc = cos(0.7);\n\ts = sin(0.7);\n\tdir = mat3(  c, 0.0,   s,\n\t           0.0, 1.0, 0.0,\n\t            -s, 0.0,   c) * dir;\n\n\tfloat dist = raymarch(cam, dir);\n\tvec3 pos = cam + dist * dir;\n\n\tfragColor.rgb = mix(\n\t\tvec3(0.4, 0.8, 1.0),\n\t\tmix(\n\t\t\tvec3(0.0, 0.0, 1.0),\n\t\t\tvec3(1.0, 1.0, 1.0),\n\t\t\tpos.z / 10.0\n\t\t),\n\t\t1.0 / (dist / 20.0)\n\t);\n}\n","name":"Image","description":"","type":"image"}]}