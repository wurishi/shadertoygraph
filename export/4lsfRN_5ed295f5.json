{"ver":"0.1","info":{"id":"4lsfRN","date":"1511196468","viewed":108,"name":"Toying with Pacman","username":"budsan","description":"Just a try to draw a pacman with simple shading","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["pacman"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float ratio = iResolution.x / iResolution.y;\n\tvec2 uv = (fragCoord.xy / iResolution.yy) - vec2(ratio * 0.5, 0.5); // center is (0,0)\n    vec2 uvNorm = normalize(uv);\n    \n    float bodyRadius = 0.4f;\n    float z = sqrt((bodyRadius * bodyRadius) - (uv.x * uv.x + uv.y * uv.y));\n    vec3 bodyNormal = normalize(vec3(uv.xy, z));\n    \n    float shading = dot(bodyNormal, vec3(0,0,1));\n    float eyepos = dot(bodyNormal, normalize(vec3(0.6, 0.6, 1)));\n    float bodyMask = (1.0 - smoothstep(bodyRadius - 0.005, bodyRadius, length(uv)));\n    float fMouthTime = abs(sin(iTime * 8.0) * 0.4f);\n    float outMouth = max(step(0.0, -uvNorm.x), smoothstep(fMouthTime - 0.02, fMouthTime, abs(uvNorm.y)));\n    \n\tfragColor = vec4(0.9,0.9f,0.0f,1.0f) * bodyMask * shading * outMouth // body\n        * smoothstep(0.004, 0.005, 1.0 - eyepos) // eye hole\n        + vec4(1.0f) * (1.0f - shading) * bodyMask * outMouth; // external glow\n}","name":"Image","description":"","type":"image"}]}