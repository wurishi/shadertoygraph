{"ver":"0.1","info":{"id":"MdcyWs","date":"1520554602","viewed":259,"name":"sunglare","username":"BadBadDog","description":"simple sunglare example","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["sunglare"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    // Time varying pixel color\n    float mask = smoothstep( 0.3, 0.31, texture( iChannel0, uv ).x );\n\tmask = 1.0-mask;\n    \n    \n    vec2 sunpos = vec2( sin(iTime*0.2)+1.0, sin(iTime*0.4)+1.0 )*0.5;\n\n    //float sunl = texture( iChannel1, uv ).x;\n    float sunl = 1.0-distance( uv, sunpos );\n    sunl = smoothstep( 0.2, 0.97, pow(sunl,5.0) );\n    float sun = min( mask, smoothstep(0.98,0.99,sunl) );\n    \n    float dy = distance( uv.y,sunpos.y );\n    float dx = distance( uv.x,sunpos.x );\n    float dd = pow(1.0-distance( uv,sunpos ),5.0);\n    \n    float z1 = 1.0-smoothstep( 0.3, 0.35, texture( iChannel0, vec2(sunpos.x,sunpos.y+0.01) ).x );\n    float z2 = 1.0-smoothstep( 0.3, 0.35, texture( iChannel0, vec2(sunpos.x,sunpos.y-0.01) ).x );\n\tfloat sun1 = (z2*0.5+z1*0.5) * smoothstep( 0.98, 0.99, 1.0-distance(uv.x,sunpos.x) ) * dd;\n    \n    \n    float q1 = 1.0-smoothstep( 0.3, 0.35, texture( iChannel0, vec2(sunpos.x-0.01,sunpos.y-0.01) ).x );\n    float q2 = 1.0-smoothstep( 0.3, 0.35, texture( iChannel0, vec2(sunpos.x+0.01,sunpos.y-0.01) ).x );\n\tfloat sun2 = (q2*0.5+q1*0.5) * smoothstep( 0.97, 0.99, 1.0-distance(uv.y+dx,sunpos.y) ) * dd;\n\n    float w1 = 1.0-smoothstep( 0.3, 0.35, texture( iChannel0, vec2(sunpos.x-0.01,sunpos.y+0.01) ).x );\n    float w2 = 1.0-smoothstep( 0.3, 0.35, texture( iChannel0, vec2(sunpos.x+0.01,sunpos.y+0.01) ).x );\n\tfloat sun3 = (w2*0.5+w1*0.5) * smoothstep( 0.97, 0.99, 1.0-distance(uv.y-dx,sunpos.y) ) * dd;\n\n    \n    float sunadd = pow(sunl,2.0)*(z2*0.2+z1*0.2+q2*0.2+q1*0.2+w2*0.2+w1*0.2)*0.7 + (sun1+sun2+sun3)*0.3;\n    //sunadd = pow(sunadd,5.0 );\n    \n //   sun = max( sun, sun1 );\n  //  sun = max( sun, sun2 );\n   // sun = max( sun, sun3 );\n    \n    float cld = (smoothstep( 0.3, 0.5, texture( iChannel0, uv ).x ))*0.5;\n    float cll = dd * (1.0-smoothstep( 0.3, 0.5, texture( iChannel0, uv ).x ))*(1.0-mask);\n    \n    float col = sun*0.5 + sunadd*0.9;\n    \n    vec3 sky = vec3( 0.0, 0.5, 0.7 );\n    vec3 skc = vec3( 0.0, 0.0, 0.0 );\n    skc = mix( skc, vec3(3.5)*(cll*3.0+cld), cld );\n    skc = mix( skc, vec3(1.0), col );\n    sky = skc+col*0.3 + sky*smoothstep( 0.9,0.0,skc );\n    \n    // Output to screen\n    fragColor = vec4( sky, 1.0 );\n}","name":"Image","description":"","type":"image"}]}