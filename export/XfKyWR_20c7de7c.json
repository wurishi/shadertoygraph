{"ver":"0.1","info":{"id":"XfKyWR","date":"1731706020","viewed":95,"name":"truchet pipes v2","username":"jorge2017a2","description":"truchet pipes v2,.,,,,//STAR WARS TEMA - VERSIÓN FÁCIL Y CORTA -","likes":13,"published":1,"flags":8,"usePreview":0,"tags":["truchet","starwars","v2","pipes"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//por jorge2017a2\n///truchet pipes v2\n//--15-nov-2024\n//referencia\n//https:/-iquilezles.org/articles/distfunctions2d\n\n\n///\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n\n#define S(d,b) smoothstep(antialiasing(1.5),0. , d - (b) )\n#define S2(d,b) smoothstep(8.0*antialiasing(1.5),0.,d - (b) )\n#define S3(d,b) smoothstep(1.0/antialiasing(0.5),0. , d - (b) )\n\n\n\n#define PI     3.14159265\n#define TWO_PI 6.28318530\n\n\nfloat Sdf_I(float distA, float distB)\n\t{ return max(distA, distB);}\nfloat Sdf_U(float distA, float distB)\n\t{ return min(distA, distB);}\nfloat Sdf_D(float distA, float distB)\n\t{ return max(distA, -distB);}\n\n\nvec3 DFB(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S3( distObj,0.0));\n  colOut = mix(colOut,vec3(0.0),S3(abs( distObj)-0.005,0.0));\n  return colOut;\n}\n\n\n\nvec3 DFS(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S( distObj,0.0)); return colOut;\n  return colOut;\n}\n\n\nfloat sdBox( in vec2 p, in vec2 b )\n{ vec2 d = abs(p)-b;  return length(max(d,0.0)) + min(max(d.x,d.y),0.0);  }\n\nfloat sdCircle( vec2 p, float r )\n{ return length(p) - r;}\n\n\n\nvec3 tubo01(vec2 p,vec3 colout)\n{\n    \n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.5,0.902027);\nmed=vec2(0.1216216,0.03378378);\nfloat d11=sdBox(p-A,med);\ncolout= DFB(vec3(0.6), colout, d11);\n\n\n\nA=vec2(0.5033784,0.5);\nmed=vec2(0.06587838,0.4949324);\nfloat d13=sdBox(p-A,med);\ncolout= DFB(vec3(0.65), colout, d13);\n\nA=vec2(0.5,0.0945946);\nmed=vec2(0.1216216,0.03378378);\nfloat d12=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d12);\n\nA=vec2(0.5,0.902027);\nmed=vec2(0.1216216,0.03378378);\nfloat d14=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d14);\n\nA=vec2(0.4054054,0.8412162);\nmed=vec2(0.01689189,0.02702703);\nfloat d15=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d15);\n\nA=vec2(0.605,0.8378378);\nmed=vec2(0.01689189,0.02702703);\nfloat d16=sdBox(p-A,med);\ncolout= DFS(vec3(0.0,0.0,0.0), colout, d16);\n\nA=vec2(0.4004054,0.1587838);\nmed=vec2(0.01689189,0.02702703);\nfloat d17=sdBox(p-A,med);\ncolout= DFS(vec3(0.0,0.0,0.0), colout, d17);\n\n\nA=vec2(0.6054,0.1587838);\nmed=vec2(0.01689189,0.02702703);\nfloat d18=sdBox(p-A,med);\ncolout= DFS(vec3(0.0,0.0,0.0), colout, d18);\n    return colout;\n}\n\nvec3 tubo02(vec2 p,vec3 colout)\n{\n    vec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\n\nA=vec2(0.4966216,0.5101351);\nmed=vec2(0.4966216,0.07094595);\nfloat d22=sdBox(p-A,med);\ncolout= DFB(vec3(0.75), colout, d22);\n\n\nA=vec2(0.0945946,0.5033784);\nmed=vec2(0.03209459,0.1266892);\nfloat d21=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d21);\n\n\nA=vec2(0.9054054,0.5033784);\nmed=vec2(0.02871622,0.1199324);\nfloat d23=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d23);\n\nA=vec2(0.1554054,0.6114865);\nmed=vec2(0.02871622,0.0152027);\nfloat d24=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d24);\n\nA=vec2(0.152027,0.40297838);\nmed=vec2(0.02871622,0.0152027);\nfloat d25=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d25);\n\nA=vec2(0.8445946,0.6107297);\nmed=vec2(0.02871622,0.0152027);\nfloat d26=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d26);\n\nA=vec2(0.847973,0.4057838);\nmed=vec2(0.02871622,0.0152027);\nfloat d27=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d27);\n\n    return colout;\n}\n\n\n\nvec3 tubo03(vec2 p,vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.5,0.5067568);\nmed=vec2(0.4966216,0.0625);\nfloat d31=sdBox(p-A,med);\n\nA=vec2(0.5,0.5);\nmed=vec2(0.06081081,0.4983108);\nfloat d32=sdBox(p-A,med);\nd32=Sdf_U(d31,d32);\ncolout= DFB(vec3(0.65), colout, d32);\n\nA=vec2(0.9054054,0.5);\nmed=vec2(0.03040541,0.1266892);\nfloat d33=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d33);\n\nA=vec2(0.0945946,0.5033784);\nmed=vec2(0.03040541,0.1266892);\nfloat d34=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d34);\n\nA=vec2(0.5,0.09121621);\nmed=vec2(0.1216216,0.03209459);\nfloat d35=sdBox(p-A,med);\ncolout= DFB(vec3(0.65), colout, d35);\n\nA=vec2(0.5,0.9087838);\nmed=vec2(0.1216216,0.03209459);\nfloat d36=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d36);\n\nA=vec2(0.4054054,0.8412162);\nmed=vec2(0.0152027,0.03209459);\nfloat d37=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d37);\n\nA=vec2(0.5945946,0.8412162);\nmed=vec2(0.0152027,0.03209459);\nfloat d38=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d38);\n\nA=vec2(0.4054054,0.1554054);\nmed=vec2(0.0152027,0.03209459);\nfloat d39=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d39);\n\nA=vec2(0.5912162,0.1587838);\nmed=vec2(0.0152027,0.03209459);\nfloat d310=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d310);\n\nA=vec2(0.1554054,0.6114865);\nmed=vec2(0.02871622,0.0152027);\nfloat d311=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d311);\n\nA=vec2(0.152027,0.4054054);\nmed=vec2(0.02871622,0.0152027);\nfloat d312=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d312);\n\nA=vec2(0.8445946,0.6013514);\nmed=vec2(0.02871622,0.0152027);\nfloat d313=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d313);\n\nA=vec2(0.8445946,0.4087838);\nmed=vec2(0.02871622,0.0152027);\nfloat d314=sdBox(p-A,med);\ncolout= DFS(vec3(0.0), colout, d314);\n    return colout;\n}\n\n\nvec3 tubo04(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.2465753,0.510274);\nmed=vec2(0.2482877,0.07705479);\nfloat d41=sdBox(p-A,med);\n\n\nA=vec2(0.5,0.2945206);\nmed=vec2(0.06849315,0.2928082);\nfloat d42=sdBox(p-A,med);\n\nd42=Sdf_U(d41, d42);\ncolout= DFB(vec3(0.65), colout, d42);\n\n\nA=vec2(0.09931507,0.5);\nmed=vec2(0.03082192,0.125);\nfloat d43=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d43);\n\nA=vec2(0.5,0.09589041);\nmed=vec2(0.1284247,0.03082192);\nfloat d44=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d44);\n\n    return colout;\n}\n\nvec3 tubo05(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.5,0.2842466);\nmed=vec2(0.06849315,0.2791096);\nfloat d51=sdBox(p-A,med);\n\n\nA=vec2(0.7157534,0.5068493);\nmed=vec2(0.2825342,0.05650685);\nfloat d52=sdBox(p-A,med);\n\nd52=Sdf_U(d51, d52);\ncolout= DFB(vec3(0.65), colout, d52);\n\n\nA=vec2(0.5,0.09589041);\nmed=vec2(0.1232877,0.02739726);\nfloat d53=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d53);\n\nA=vec2(0.9041096,0.5);\nmed=vec2(0.03082192,0.1215753);\nfloat d54=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d54);\n    return colout;\n}\n\n\n\nvec3 tubo06(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.7191781,0.4931507);\nmed=vec2(0.2791096,0.06506849);\nfloat d61=sdBox(p-A,med);\n\nA=vec2(0.5,0.7123288);\nmed=vec2(0.06335616,0.2859589);\nfloat d62=sdBox(p-A,med);\n\n\nd62=Sdf_U(d61, d62);\ncolout= DFB(vec3(0.65), colout, d62);\n\nA=vec2(0.9075342,0.5034246);\nmed=vec2(0.02910959,0.1267123);\nfloat d63=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d63);\n\nA=vec2(0.5,0.9075342);\nmed=vec2(0.1215753,0.02910959);\nfloat d64=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d64);\n    return colout;\n}\n\n\nvec3 tubo07(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.2808219,0.5034246);\nmed=vec2(0.2791096,0.06335616);\nfloat d71=sdBox(p-A,med);\n\nA=vec2(0.4965754,0.7191781);\nmed=vec2(0.06506849,0.2756849);\nfloat d72=sdBox(p-A,med);\n\n\nd72=Sdf_U(d71, d72);\ncolout= DFB(vec3(0.65), colout, d72);\n\nA=vec2(0.09589041,0.4965754);\nmed=vec2(0.03424658,0.1232877);\nfloat d73=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d73);\n\nA=vec2(0.5,0.9041096);\nmed=vec2(0.1232877,0.02910959);\nfloat d74=sdBox(p-A,med);\ncolout= DFB(vec3(0.5), colout, d74);\n    return colout;\n}\n\n\nvec3 hash32(vec2 p) // https://www.shadertoy.com/view/4djSRW Hash without Sine by Dave_Hoskins\n{\n    vec3 p3 = fract(vec3(p.xyx) * vec3(.1031, .1030, .0973));\n    p3 += dot(p3, p3.yxz+33.33);\n    return fract((p3.xxy+p3.yzz)*p3.zyx);\n}\n\n\n// Function to generate a random number based on tile position\nfloat random(vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\n\nvec3 truchet(vec2 uv, vec3 col)\n{\n     vec2 pos = uv;\n    vec2 tile = floor(uv);\n    pos = fract(uv) ;\n    \n    \n    // Generate a random number to choose \n    float choice = random(tile);\n    float dist = 0.0;\n    \n    float nopc=7.0;\n    \n     vec3 color=vec3(1.0); \n    if (3.0*sin(iTime)>0.0)\n      color = hash32(tile)+0.1;\n      \n      \n    \n    if (        choice < 1.0/nopc) {\n        col=tubo01(pos,col*color);\n      \n    } else if (choice < 2.0/nopc) {\n        col=tubo02(pos,col*color);\n      \n    } else if (choice < 3.0/nopc) {\n    \n     { col=tubo03(pos,col*color);    }\n    } else if (choice < 4.0/nopc) {\n      {\n        col=tubo04(pos,col*color);\n      }\n    } else if (choice < 5.0/nopc) \n      { col=tubo05(pos,col*color);    }\n    else if (choice < 6.0/nopc) \n      { col=tubo06(pos,col*color);  }\n     else if (choice < 7.0/nopc) \n      { col=tubo07(pos,col*color);  }\n\n    return col*color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec2 uv = ( 2. * fragCoord - iResolution.xy ) / iResolution.y;\n    vec2 uv0=uv;\n    \n    uv-=vec2(0.0,-0.5);\n    float esc=2.0; //3.0;\n    uv+=iTime*0.25;\n    uv*=esc;\n    \n     vec3 col=vec3(0.0);\n   /* \n   col= truchet(uv*2.5-vec2(1.0,0.61+iTime),col);\n   col= truchet(uv*1.5-vec2(1.5+iTime*0.5,0.5),col) ;\n   */\n   \n   col= truchet(uv,col) ;\n   \n    col=pow(col,  vec3(0.554545));\n    \n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"//---por jorge2017a2\n//Referencia de sonido \n//IQ,AeroShark333, Gaz ,etc. muchos :)\n\n//Name Piano youtube:\n//STAR WARS TEMA - VERSIÓN FÁCIL Y CORTA - PIANO TUTORIAL CON NOTAS\n//\n\n#define PI acos(-1.)\n#define PIH (PI*.5)\n#define TAU (PI*2.)\n#define TWO_PI 6.2831\n\n\nconst float ttotal=27.0; \nconst float pi = 3.1415927;\nconst float tau = 6.283185;\nfloat ms;\nfloat mresp;\nfloat mtime;\nfloat mtempo;\n\n\n//https://www.shadertoy.com/view/ss3cDN\n// Created by AeroShark333\nfloat squareWave750( float f, float x)\n{ return (min(1.0, floor( 4.0 * floor( f * x ) - floor( 4.0 * f * x ) + 3.0 ))); }\n\nfloat squareWave500( float f, float x)\n{ return (floor( 2.0 * floor( f * x ) - floor( 2.0 * f * x ) + 1.0 )); }\n\nfloat squareWave250( float f, float x)\n{ return (max(0.0, floor( 4.0 * floor( f * x ) - floor( 4.0 * f * x ) + 1.0 ))); }\n\nvec2 squareWave250( vec2 f, float x)\n{ return (max(vec2(0.0), floor( 4.0 * floor( f * x ) - floor( 4.0 * f * x ) + 1.0 ))); }\n\nfloat triangleWave500( float q, float x)\n{ float f = 1.0-2.0*abs(0.5-mod(q*x,1.0));  return (f); }\n\nfloat triangleWave250( float q, float x)\n{ float f = max(0.0,1.0-2.0*abs(0.5-2.0*mod(q*x,1.0))); return (f); }\n\nfloat convertBassFreq (float f)\n{ return (f/2.0); }\n\nfloat  sawf(float t , float freq)\n{  return fract(t * freq) - 0.5; }\n\nfloat wave1( float x, float dxdt, in vec2 v, float t , float w)\n{   float f2;\n    float sampleX=0.0;\n    float f=w;\n    float v1,v2;\n    v1=squareWave250(f,t);\n    v2=triangleWave250(f,t);\n    sampleX =v1*v2*exp(-2.5*t);\n    f2=(sampleX+sawf(t,f));\n    float fx=f2*1.5;\n    return fx;\n}\n\n\nfloat D3(float ton, float tid, float toff)\n{   vec3 n3;\n    float resp;\n    n3=vec3(ton,tid, toff);\n    \n    \n    if(ms>=ton && ms<=toff)\n    {      // lower one octave\n      n3.y -=12.; //12 notas\n      //n3.y +=12.; //12 notas\n\n      // compute note frequency and time  \n      float f = 440.0*pow( 2.0, float(n3.y-69.)/12.0 );\n      float t = mtime - float(n3.x)/mtempo;\n      if( n3.x==0.0 ) return 0.0;\n\n      // prepare wave parameters\n      float w = tau*f;\n      \n      float dwdt = w/iSampleRate; // derivative\n\n      // mix between bandlimited and raw saw waves  \n      vec2 v = smoothstep(-0.2,0.2,sin(t*vec2(1.0,0.5)) );\n      // build instrument\n\n      float f1,y;\n      f1=wave1(w*t,1.00*dwdt,v,t,w);\n      \n      float wf  = 0.4*f1;\n      y=f1*wf;\n      float offset=n3.x;\n       y*=exp(-1.0/n3.z * (t -offset) );\n        \n       mresp+=y;\n    }\n    \n}\n\n\n\nfloat SoundIq(float time)\n{ ///referencia de notas musicales... iq \n  time = mod( time+1.0, ttotal);\n // tune\n  float tempo = 0.4; //0.6\n  float s = time*tempo;\n vec3 n3=vec3(0.0);\n \n //variables globales\n ms=s;\n mresp=0.0;\n mtime=time;\n mtempo=tempo;\n\n\n D3(0.00000,43.0,0.12500); D3(0.06250,43.0,0.18750); D3(0.12500,43.0,0.25000); D3(0.18750,48.0,0.43750); D3(0.43750,55.0,0.62500); D3(0.62500,53.0,0.75000);\n D3(0.75000,52.0,0.87500); D3(0.87500,50.0,1.00000); D3(0.93750,57.0,1.18750); D3(1.18750,55.0,1.37500); D3(1.37500,53.0,1.50000); D3(1.43750,52.0,1.56250);\n D3(1.50000,50.0,1.62500); D3(1.56250,60.0,1.81250); D3(1.81250,55.0,2.00000); D3(2.00000,53.0,2.12500); D3(2.06250,52.0,2.18750); D3(2.09375,53.0,2.21875);\n D3(2.15625,50.0,2.65625); D3(2.68750,43.0,2.81250); D3(2.75000,43.0,2.87500); D3(2.81250,43.0,2.93750); D3(2.87500,48.0,3.25000); D3(3.25000,55.0,3.43750);\n D3(3.43750,53.0,3.56250); D3(3.50000,52.0,3.62500); D3(3.56250,50.0,3.68750); D3(3.62500,57.0,4.00000); D3(4.00000,55.0,4.18750); D3(4.18750,53.0,4.31250);\n D3(4.25000,52.0,4.37500); D3(4.31250,50.0,4.43750); D3(4.37500,60.0,4.75000); D3(4.75000,55.0,4.93750); D3(4.93750,53.0,5.06250); D3(5.00000,52.0,5.12500);\n D3(5.03125,53.0,5.15625); D3(5.09375,50.0,5.46875); D3(5.71875,43.0,5.90625); D3(5.84375,43.0,6.03125); D3(5.90625,45.0,6.28125); D3(6.28125,45.0,6.40625);\n D3(6.37500,53.0,6.50000); D3(6.43750,52.0,6.56250); D3(6.50000,50.0,6.62500); D3(6.56250,48.0,6.68750); D3(6.62500,48.0,6.75000); D3(6.68750,50.0,6.81250);\n D3(6.75000,52.0,6.87500); D3(6.78125,50.0,6.90625); D3(6.84375,45.0,6.96875); D3(6.90625,47.0,7.03125); D3(7.06250,43.0,7.18750); D3(7.12500,43.0,7.25000);\n D3(7.18750,43.0,7.31250); D3(7.25000,45.0,7.43750); D3(7.43750,45.0,7.56250); D3(7.53125,53.0,7.65625); D3(7.59375,52.0,7.71875); D3(7.65625,50.0,7.78125);\n D3(7.71875,48.0,7.84375); D3(7.78125,55.0,7.90625); D3(7.90625,50.0,8.09375); D3(8.09375,43.0,8.21875); D3(8.18750,43.0,8.31250); D3(8.25000,45.0,8.43750);\n D3(8.43750,45.0,8.56250); D3(8.50000,53.0,8.62500); D3(8.56250,52.0,8.68750); D3(8.62500,50.0,8.75000); D3(8.68750,48.0,8.81250); D3(8.75000,48.0,8.87500);\n D3(8.81250,50.0,8.93750); D3(8.87500,52.0,9.00000); D3(8.90625,50.0,9.03125); D3(8.96875,45.0,9.09375); D3(9.03125,47.0,9.15625); D3(9.15625,43.0,9.28125);\n D3(9.21875,43.0,9.34375); D3(9.28125,43.0,9.40625); D3(9.34375,48.0,9.96875);\n\n\n\n  return mresp;\n}\n\nvec2 mainSound( in int samp, float time )\n{ float t1=mod(time, ttotal);\n  float y= SoundIq(t1)*0.5;\n  return vec2(y);\n}   \n","name":"Sound","description":"","type":"sound"}]}