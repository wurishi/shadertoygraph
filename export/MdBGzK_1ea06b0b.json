{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#define DPII (3.1415926535*2.0)\n// The original code had a \"pompota\" function that would toggle the VGA horizontal scroll offset each frame between\n// values of 0 and 4, as well as toggle the vertical start position between 60 and 61. This effect doesn't seem to\n// work that well now, so it has been disabled.\n#define POMPOTA 0\n\nint GetPerPlasmaTime(int t)\n{\n\t// Get the time since this plasma started using the total time.\n\t// Times for each plasma are (from the timetable array): 723, 1491, 1875, 2259, 2278.\n\t// (64 is added to each time because it takes 64 frames to drop the current plasma offscreen\n\t// before switching to the new one.)\n\n\tif (t < 723+64)\n\t{\n\t}\n\telse if (t < 1491+64)\n\t{\n\t\tt -= 723+64;\n\t}\n\telse if (t < 1875+64)\n\t{\n\t\tt -= 1491+64;\n\t}\n\telse if (t < 2259+64)\n\t{\n\t\tt -= 1875+64;\n\t}\n\telse if (t < 2278+64)\n\t{\n\t\tt -= 2259+64;\n\t}\n\telse\n\t{\n\t\tt = 0;\n\t}\n\n\treturn t;\n}\n\nint GetPlasmaIndex(int t)\n{\n\tint nPlasmaIndex = 0;\n\n\tif (t < 723+64)\n\t{\n\t\tnPlasmaIndex = 0;\n\t}\n\telse if (t < 1491+64)\n\t{\n\t\tnPlasmaIndex = 1;\n\t}\n\telse if (t < 1875+64)\n\t{\n\t\tnPlasmaIndex = 2;\n\t}\n\telse if (t < 2259+64)\n\t{\n\t\tnPlasmaIndex = 3;\n\t}\n\telse if (t < 2278+64)\n\t{\n\t\tnPlasmaIndex = 4;\n\t}\n\telse\n\t{\n\t\tnPlasmaIndex = 5;\n\t}\n\n\treturn nPlasmaIndex;\n}\n\nint GetXOffset(int t)\n{\n\t#if POMPOTA == 1\n\t\tint nResult = 4;\n\t\tfloat fT = float(t);\n\t\tint nMod = int(mod(fT, 2.0));\n\t\tif (nMod != 0)\n\t\t{\n\t\t\tnResult = 0;\n\t\t}\n\t\treturn nResult;\n\t#else //POMPOTA == 1\n\t\treturn 0;\n\t#endif //POMPOTA == 1\n}\n\nint GetYOffset(int t)\n{\n\tint nResult = 60;\n\tbool bDrop = false;\n\n\tif ( (t >= 723) && (t < (723+64)) )\n\t{\n\t\tt -= 723;\n\t\tbDrop = true;\n\t}\n\telse if ( (t >= 1491) && (t < (1491+64)) )\n\t{\n\t\tt -= 1491;\n\t\tbDrop = true;\n\t}\n\telse if ( (t >= 1875) && (t < (1875+64)) )\n\t{\n\t\tt -= 1875;\n\t\tbDrop = true;\n\t}\n\telse if ( (t >= 2259) && (t < (2259+64)) )\n\t{\n\t\tt -= 2259;\n\t\tbDrop = true;\n\t}\n\n\tif (bDrop)\n\t{\n\t\tnResult = t * t / 4 * 43 / 128 + 60;\n\t}\n\t#if POMPOTA == 1\n\t\telse\n\t\t{\n\t\t\tfloat fT = float(t);\n\t\t\tint nMod = int(mod(fT, 2.0));\n\t\t\tif (nMod != 0)\n\t\t\t{\n\t\t\t\tnResult = 61;\n\t\t\t}\n\t\t}\n\t#endif //POMPOTA == 1\n\n\treturn nResult;\n}\n\nfloat FadeColourComponent(float c, int t)\n{\n\tfloat fResult = c;\n\tfloat fProportion = 0.0;\n\n\tif ((t >= 0) && (t < 128))\n\t{\n\t\t// For plasma 1, fade from white to the palette.\n\t\tfProportion = float(t) / 127.0;\n\t\tfResult = (fProportion * c) + ((1.0 - fProportion) * 1.0);\n\t}\n\telse if ( (t >= (723+64)) && (t < (723+64+32)) )\n\t{\n\t\t// For plasma 2, fade from black to the palette.\n\t\tfProportion = float(t-723-64) / 31.0;\n\t\tfResult = (fProportion * c) + ((1.0 - fProportion) * 0.0);\n\t}\n\telse if ( (t >= (1491+64)) && (t < (1491+64+32)) )\n\t{\n\t\t// For plasma 3, fade from black to the palette.\n\t\tfProportion = float(t-1491-64) / 31.0;\n\t\tfResult = (fProportion * c) + ((1.0 - fProportion) * 0.0);\n\t}\n\telse if ( (t >= (1875+64)) && (t < (1875+64+32)) )\n\t{\n\t\t// For plasma 4, fade from black to the palette.\n\t\tfProportion = float(t-1875-64) / 31.0;\n\t\tfResult = (fProportion * c) + ((1.0 - fProportion) * 0.0);\n\t}\n\n\treturn fResult;\n}\n\nint GetInitialL1(int nPlasmaIndex)\n{\n\tif (nPlasmaIndex == 0)\n\t{\n\t\treturn 1000;\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\treturn 1000;\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\treturn 3500;\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\treturn 1000;\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\treturn 1000;\n\t}\n\telse\n\t{\n\t\treturn 1000;\n\t}\n}\nint GetInitialL2(int nPlasmaIndex)\n{\n\tif (nPlasmaIndex == 0)\n\t{\n\t\treturn 2000;\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\treturn 2000;\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\treturn 1000;\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\treturn 2000;\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\treturn 2000;\n\t}\n\telse\n\t{\n\t\treturn 2000;\n\t}\n}\nint GetInitialL3(int nPlasmaIndex)\n{\n\tif (nPlasmaIndex == 0)\n\t{\n\t\treturn 3000;\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\treturn 4000;\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\treturn 3000;\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\treturn 3000;\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\treturn 3000;\n\t}\n\telse\n\t{\n\t\treturn 3000;\n\t}\n}\nint GetInitialL4(int nPlasmaIndex)\n{\n\tif (nPlasmaIndex == 0)\n\t{\n\t\treturn 4000;\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\treturn 4000;\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\treturn 1000;\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\treturn 4000;\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\treturn 4000;\n\t}\n\telse\n\t{\n\t\treturn 4000;\n\t}\n}\nint GetInitialK1(int nPlasmaIndex)\n{\n\tif (nPlasmaIndex == 0)\n\t{\n\t\treturn 3500;\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\treturn 1500;\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\treturn 3500;\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\treturn 3500;\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\treturn 3500;\n\t}\n\telse\n\t{\n\t\treturn 3500;\n\t}\n}\nint GetInitialK2(int nPlasmaIndex)\n{\n\tif (nPlasmaIndex == 0)\n\t{\n\t\treturn 2300;\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\treturn 2300;\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\treturn 3300;\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\treturn 2300;\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\treturn 2300;\n\t}\n\telse\n\t{\n\t\treturn 2300;\n\t}\n}\nint GetInitialK3(int nPlasmaIndex)\n{\n\tif (nPlasmaIndex == 0)\n\t{\n\t\treturn 3900;\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\treturn 3900;\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\treturn 2900;\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\treturn 3900;\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\treturn 3900;\n\t}\n\telse\n\t{\n\t\treturn 3900;\n\t}\n}\nint GetInitialK4(int nPlasmaIndex)\n{\n\tif (nPlasmaIndex == 0)\n\t{\n\t\treturn 3670;\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\treturn 1670;\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\treturn 2670;\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\treturn 3670;\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\treturn 3670;\n\t}\n\telse\n\t{\n\t\treturn 3670;\n\t}\n}\n\nint GetC1(int nXOffset0or1, int t)\n{\n\tint nPlasmaIndex = GetPlasmaIndex(t);\n\tt = GetPerPlasmaTime(t);\n\n\tint nResult = 0;\n\tif (nXOffset0or1 == 0)\n\t{\n\t\tnResult = GetInitialK1(nPlasmaIndex) + (-3 * t);\n\t}\n\telse\n\t{\n\t\tnResult = GetInitialL1(nPlasmaIndex) + (-1 * t);\n\t}\n\t\n\tfloat fResult = float(nResult);\n\tfResult = mod(fResult, 4096.0);\n\n\tif (fResult < 0.0)\n\t{\n\t\tfResult += 4096.0;\n\t}\n\tnResult = int(fResult);\n\n\treturn nResult;\n}\n\nint GetC2(int nXOffset0or1, int t)\n{\n\tint nPlasmaIndex = GetPlasmaIndex(t);\n\tt = GetPerPlasmaTime(t);\n\n\tint nResult = 0;\n\tif (nXOffset0or1 == 0)\n\t{\n\t\tnResult = GetInitialK2(nPlasmaIndex) + (-2 * t);\n\t}\n\telse\n\t{\n\t\tnResult = GetInitialL2(nPlasmaIndex) + (-2 * t);\n\t}\n\t\n\tfloat fResult = float(nResult);\n\tfResult = mod(fResult, 4096.0);\n\n\tif (fResult < 0.0)\n\t{\n\t\tfResult += 4096.0;\n\t}\n\tnResult = int(fResult);\n\n\treturn nResult;\n}\n\nint GetC3(int nXOffset0or1, int t)\n{\n\tint nPlasmaIndex = GetPlasmaIndex(t);\n\tt = GetPerPlasmaTime(t);\n\n\tint nResult = 0;\n\tif (nXOffset0or1 == 0)\n\t{\n\t\tnResult = GetInitialK3(nPlasmaIndex) + (1 * t);\n\t}\n\telse\n\t{\n\t\tnResult = GetInitialL3(nPlasmaIndex) + (2 * t);\n\t}\n\t\n\tfloat fResult = float(nResult);\n\tfResult = mod(fResult, 4096.0);\n\n\tif (fResult < 0.0)\n\t{\n\t\tfResult += 4096.0;\n\t}\n\tnResult = int(fResult);\n\n\treturn nResult;\n}\n\nint GetC4(int nXOffset0or1, int t)\n{\n\tint nPlasmaIndex = GetPlasmaIndex(t);\n\tt = GetPerPlasmaTime(t);\n\n\tint nResult = 0;\n\tif (nXOffset0or1 == 0)\n\t{\n\t\tnResult = GetInitialK4(nPlasmaIndex) + (2 * t);\n\t}\n\telse\n\t{\n\t\tnResult = GetInitialL4(nPlasmaIndex) + (3 * t);\n\t}\n\t\n\tfloat fResult = float(nResult);\n\tfResult = mod(fResult, 4096.0);\n\n\tif (fResult < 0.0)\n\t{\n\t\tfResult += 4096.0;\n\t}\n\tnResult = int(fResult);\n\n\treturn nResult;\n}\n\nfloat Palette0_GetRed(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = fIndex;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = fIndex - 64.0;\n\t\ta = 63.0 - a;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse\n\t{\n\t\ta = fIndex - 192.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\nfloat Palette0_GetGreen(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse\n\t{\n\t\ta = 0.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\nfloat Palette0_GetBlue(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = fIndex - 128.0;\n\t}\n\telse\n\t{\n\t\ta = fIndex - 192.0;\n\t\ta = 63.0 - a;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\n\nfloat Palette1_GetRed(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = fIndex;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = fIndex - 64.0;\n\t\ta = 63.0 - a;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse\n\t{\n\t\ta = fIndex - 192.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\n\nfloat Palette1_GetGreen(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = fIndex - 128.0;\n\t}\n\telse\n\t{\n\t\ta = 63.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\nfloat Palette1_GetBlue(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = fIndex - 64.0;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = fIndex - 128.0;\n\t\ta = 63.0 - a;\n\t}\n\telse\n\t{\n\t\ta = fIndex - 192.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\n\nfloat Palette2_GetRed(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = fIndex - 64.0;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = fIndex - 128.0;\n\t\ta = 63.0 - a;\n\t}\n\telse\n\t{\n\t\ta = 0.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 2.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\n\nfloat Palette2_GetGreen(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = fIndex - 64.0;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = fIndex - 128.0;\n\t\ta = 63.0 - a;\n\t}\n\telse\n\t{\n\t\ta = 0.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 2.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\nfloat Palette2_GetBlue(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = fIndex - 64.0;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = fIndex - 128.0;\n\t\ta = 63.0 - a;\n\t}\n\telse\n\t{\n\t\ta = 0.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 2.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\n\nfloat Palette3_GetRed(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = fIndex;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = 63.0;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = fIndex - 128.0;\n\t\ta = 63.0 - a;\n\t}\n\telse\n\t{\n\t\ta = 0.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\nfloat Palette3_GetGreen(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = fIndex - 64.0;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = fIndex - 128.0;\n\t\ta = 63.0 - a;\n\t}\n\telse\n\t{\n\t\ta = 0.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\nfloat Palette3_GetBlue(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 64.0))\n\t{\n\t\ta = 0.0;\n\t}\n\telse if ((fIndex >= 64.0) && (fIndex < 128.0))\n\t{\n\t\ta = fIndex - 64.0;\n\t}\n\telse if ((fIndex >= 128.0) && (fIndex < 192.0))\n\t{\n\t\ta = 63.0;\n\t}\n\telse\n\t{\n\t\ta = 63.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\n\nfloat Palette4_GetRed(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 75.0))\n\t{\n\t\ta = fIndex;\n\t\ta = 63.0 - a * 64.0 / 75.0;\n\t}\n\telse if ((fIndex >= 75.0) && (fIndex < 181.0))\n\t{\n\t\treturn 0.0;\n\t}\n\telse\n\t{\n\t\ta = fIndex - 181.0;\n\t\ta = (a * 64.0 / 75.0) * 8.0 / 10.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\nfloat Palette4_GetGreen(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 75.0))\n\t{\n\t\ta = fIndex;\n\t\ta = 63.0 - a * 64.0 / 75.0;\n\t}\n\telse if ((fIndex >= 75.0) && (fIndex < 181.0))\n\t{\n\t\treturn 0.0;\n\t}\n\telse\n\t{\n\t\ta = fIndex - 181.0;\n\t\ta = (a * 64.0 / 75.0) * 9.0 / 10.0;\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\nfloat Palette4_GetBlue(float fIndex)\n{\n\tfloat a = 0.0;\n\tif ((fIndex >= 0.0) && (fIndex < 75.0))\n\t{\n\t\ta = fIndex;\n\t\ta = 63.0 - a * 64.0 / 75.0;\n\t}\n\telse if ((fIndex >= 75.0) && (fIndex < 181.0))\n\t{\n\t\treturn 0.0;\n\t}\n\telse\n\t{\n\t\ta = fIndex - 181.0;\n\t\ta = (a * 64.0 / 75.0);\n\t}\n\n\tfloat fResult = cos(a*(3.1415926535*2.0)/128.0+3.1415926535)*31.0+32.0;\n\tfResult /= 63.0;\n\n\treturn fResult;\n}\n\nfloat Palette_GetRed(float fIndex, int t)\n{\n\tint nPlasmaIndex = GetPlasmaIndex(t);\n\tt = GetPerPlasmaTime(t);\n\tfloat fResult = 0.0;\n\n\tif (nPlasmaIndex == 0)\n\t{\n\t\tfResult = Palette0_GetRed(fIndex);\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\tfResult = Palette1_GetRed(fIndex);\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\tfResult = Palette2_GetRed(fIndex);\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\tfResult = Palette3_GetRed(fIndex);\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\tfResult = Palette4_GetRed(fIndex);\n\t}\n\n\treturn fResult;\n}\nfloat Palette_GetGreen(float fIndex, int t)\n{\n\tint nPlasmaIndex = GetPlasmaIndex(t);\n\tt = GetPerPlasmaTime(t);\n\tfloat fResult = 0.0;\n\n\tif (nPlasmaIndex == 0)\n\t{\n\t\tfResult = Palette0_GetGreen(fIndex);\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\tfResult = Palette1_GetGreen(fIndex);\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\tfResult = Palette2_GetGreen(fIndex);\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\tfResult = Palette3_GetGreen(fIndex);\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\tfResult = Palette4_GetGreen(fIndex);\n\t}\n\n\treturn fResult;\n}\nfloat Palette_GetBlue(float fIndex, int t)\n{\n\tint nPlasmaIndex = GetPlasmaIndex(t);\n\tt = GetPerPlasmaTime(t);\n\tfloat fResult = 0.0;\n\n\tif (nPlasmaIndex == 0)\n\t{\n\t\tfResult = Palette0_GetBlue(fIndex);\n\t}\n\telse if (nPlasmaIndex == 1)\n\t{\n\t\tfResult = Palette1_GetBlue(fIndex);\n\t}\n\telse if (nPlasmaIndex == 2)\n\t{\n\t\tfResult = Palette2_GetBlue(fIndex);\n\t}\n\telse if (nPlasmaIndex == 3)\n\t{\n\t\tfResult = Palette3_GetBlue(fIndex);\n\t}\n\telse if (nPlasmaIndex == 4)\n\t{\n\t\tfResult = Palette4_GetBlue(fIndex);\n\t}\n\n\treturn fResult;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\t// t is an integer frame count.\n\tint t = int(iTime * 60.0);\n\n    // Wrap t when it exceeds 2323, so that the plasmas will repeat.\n\tfloat fT = float(t);\n\tt = int(mod(fT, 2323.0));\n\n\t// fPlasmaX is a float from 0 to 319,\n\t// fPlasmaY is a float from 0 to 399.\n\tfloat fPlasmaX = (fragCoord.x / iResolution.x) * 319.0;\n\tfloat fPlasmaY = (fragCoord.y / iResolution.y) * 399.0;\n\tfPlasmaY = 399.0 - fPlasmaY;\n\n\tfPlasmaY -= float(GetYOffset(t));\n\tfPlasmaX += float(GetXOffset(t));\n\n\tfloat fRed = 0.0;\n\tfloat fGreen = 0.0;\n\tfloat fBlue = 0.0;\n\n\tif ( (fPlasmaY >= 0.0) && (fPlasmaY < 280.0) )\n\t{\n\t\tfloat fScreenX = fragCoord.x;\n\t\tfloat fScreenY = fragCoord.y;\n\t\tfloat ah = 0.0;\n\t\tfloat ccc = fPlasmaX / 4.0;\n\t\tfloat fOffset = 0.0;\n\t\tfloat bx = 0.0;\n\n\t\tint nXOffset0or1 = int(mod(fScreenX, 2.0));\n\t\t// On every odd row, toggle the x offset. This causes different plasma constants to be\n\t\t// read for these pixels, achieving a chequered overlay of two plasmas.\n\t\tint xor = int(mod(fScreenY, 2.0));\n\t\tif (xor == 1)\n\t\t{\n\t\t\tif (nXOffset0or1 == 0)\n\t\t\t{\n\t\t\t\tnXOffset0or1 = 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnXOffset0or1 = 0;\n\t\t\t}\n\t\t}\n\n\t\tfloat c1 = float(GetC1(nXOffset0or1, t));\n\t\tfloat c2 = float(GetC2(nXOffset0or1, t));\n\t\tfloat c3 = float(GetC3(nXOffset0or1, t));\n\t\tfloat c4 = float(GetC4(nXOffset0or1, t));\n\n\t\tfOffset = ((fPlasmaY * 2.0) + (c2 * 2.0) - (ccc * 8.0) + (80.0 * 8.0)) / 2.0;\n\t\tbx = ((sin(fOffset*DPII/4096.0)*55.0+sin(fOffset*DPII/4096.0*4.0)*5.0+sin(fOffset*DPII/4096.0*17.0)*3.0+64.0)*16.0);\n\n\t\tfOffset = bx + c1 + (ccc * 8.0);\n\t\tah = (sin(fOffset*DPII/4096.0)*55.0+sin(fOffset*DPII/4096.0*6.0)*5.0+sin(fOffset*DPII/4096.0*21.0)*4.0+64.0);\n\n\t\tfOffset = ((fPlasmaY * 2.0) + (c4 * 2.0) + (ccc * 32.0)) / 2.0;\n\t\tbx = ((sin(fOffset*DPII/4096.0)*55.0+sin(fOffset*DPII/4096.0*5.0)*8.0+sin(fOffset*DPII/4096.0*15.0)*2.0+64.0)*8.0);\n\n\t\tfOffset = bx + (fPlasmaY * 2.0) + c3 - (ccc * 4.0) + (80.0 * 4.0);\n\t\tah += (sin(fOffset*DPII/4096.0)*55.0+sin(fOffset*DPII/4096.0*6.0)*5.0+sin(fOffset*DPII/4096.0*21.0)*4.0+64.0);\n\n\t\tfloat fPaletteIndex = ah;\n\n\t\tfRed = Palette_GetRed(fPaletteIndex, t);\n\t\tfGreen = Palette_GetGreen(fPaletteIndex, t);\n\t\tfBlue = Palette_GetBlue(fPaletteIndex, t);\n\t}\n\n\tfRed = FadeColourComponent(fRed, t);\n\tfGreen = FadeColourComponent(fGreen, t);\n\tfBlue = FadeColourComponent(fBlue, t);\n\n\tfragColor = vec4(fRed, fGreen, fBlue, 1.0);\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MdBGzK","date":"1390799119","viewed":1315,"name":"Second Reality Plasma","username":"Bastian","description":"A port of the plasma part seen in the classic demo Second Reality, by the Future Crew.\nIf only Shadertoy supported custom music... :)","likes":29,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""}}