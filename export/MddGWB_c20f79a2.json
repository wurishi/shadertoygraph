{"ver":"0.1","info":{"id":"MddGWB","date":"1452056566","viewed":1832,"name":"Spiral kernel basic SSAO","username":"zachernuk","description":"Learning about SSAO and trying out a spiral kernel for sampling. This one had the interesting consequence of letting you see what the unprocessed 'rocks' texture must be based on!","likes":30,"published":1,"flags":0,"usePreview":1,"tags":["post","wip","depth","ssao"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"#define SAMPLES 30\n float dGamma = 152.;//1:10:2\nfloat oscSpeed = 3.;//0:10:5\n\nfloat radAttenuation = 5.;//0:2:1\nfloat radius = 0.01;//0:0.6:0.024\nfloat spiral = 16524.56;//1:100:50\nfloat spinSpeed = .10;\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    vec2 uv = fragCoord.xy/iResolution.xy;\n    uv.y/=1.6;\n    uv *= 1.+0.1*sin(iTime/3.5);\n    uv+=vec2(iTime/15., sin(iTime)/15.);\n    float dp = texture(iChannel0, uv).r;\n\n  float f;\n  vec2 offset;\n    float dTotal;\n\n    for(int i = 0;i<SAMPLES;i++) {\n      f = float(i)/float(SAMPLES);\n    offset = vec2(radius*pow(f, radAttenuation)*sin(f*spiral+iTime*spinSpeed), \n                  radius*pow(f, radAttenuation)*cos(f*spiral+iTime*spinSpeed));\n      float dd = texture(iChannel0,uv+offset).r-dp;\n      dTotal+=max(dd,0.);\n    }\n    dTotal/=float(SAMPLES);\n    dTotal = (1.-dTotal);\n    dTotal = pow(dTotal,dGamma);\n    fragColor.rgb = vec3(dTotal*(0.25*dp+0.65));\n    fragColor.rgb = mix(fragColor.rgb, vec3(dp), 0.5+0.5*sin(iTime*oscSpeed));\n    fragColor.a = 1.;\n\n \n\n    \n   \n}\n\n\n\n","name":"","description":"","type":"image"}]}