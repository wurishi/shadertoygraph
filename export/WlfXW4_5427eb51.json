{"ver":"0.1","info":{"id":"WlfXW4","date":"1562850836","viewed":296,"name":"Cauliflower glow","username":"gaz","description":"3d","likes":20,"published":1,"flags":0,"usePreview":0,"tags":["3d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define rotate(a) mat2(cos(a),sin(a),-sin(a),cos(a))\n\nfloat g = 0.0;\n\nfloat deCauliflower(vec3 p, vec3 s, float r, float t)\n{    \n    for (int i=0;i<6;i++){\n        p = abs(p)-s;\n        mat2 m = rotate(sin(t*0.8+0.3*sin(t))*2.0+0.8);\n        p.xy *= m;\n        p.yz *= m;\n        s *= 0.5;\n    }\n    p = abs(p)-s;\n    if (p.x < p.z) p.xz = p.zx;\n    if (p.y < p.z) p.yz = p.zy;        \n \tp.z = max(0.0,p.z);\n    return length(p)-r;\n }\n\nfloat map(vec3 p)\n{\n    float de = deCauliflower(p,vec3(4.5),0.01,iTime);\n    g += 0.1/(0.3+de*de*10.0); // Distance glow by balkhan\n    return deCauliflower(p,vec3(4.5),0.06,iTime+0.3);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord*2.0-iResolution.xy)/iResolution.y;\n    vec3 ro = vec3(0.0, 0.0, 25.0+sin(iTime*0.8+sin(iTime*0.5)*0.8)*5.0);\n    ro.xz *= rotate(iTime*0.3);\n    ro.xy *= rotate(iTime*0.5);\n    vec3 w = normalize(-ro);\n    vec3 u = normalize(cross(w,vec3(0,1,0)));\n \tvec3 rd = mat3(u,cross(u,w),w)*normalize(vec3(uv, 3));\n\tvec3 col = vec3(0.05);\n\tfloat t = 0.0, d;\n \tfor(int i = 0; i < 64; i++)\n  \t{\n    \tt += d = map(ro + rd * t);\n    \tif(d < 0.001) break;\n  \t}\n    col += vec3(0.0,0.7,0.3)*g*0.25;\n    col = clamp(col,0.0,1.0);\n    fragColor = vec4(col,1);\n}\n","name":"Image","description":"","type":"image"}]}