{"ver":"0.1","info":{"id":"XllXzf","date":"1438624774","viewed":144,"name":"normals germangb","username":"germangb","description":"prueba","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["normals"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGRr","filepath":"/media/a/48e2d9ef22ca6673330b8c38a260c87694d2bbc94c19fec9dfa4a1222c364a99.mp3","previewfilepath":"/media/ap/48e2d9ef22ca6673330b8c38a260c87694d2bbc94c19fec9dfa4a1222c364a99.mp3","type":"music","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"vec3 color (vec2 uv) {\n \treturn texture(iChannel0, uv*0.05).rgb;\n}\n\nfloat field (vec2 uv) {\n    return dot(color(uv), vec3(1./3.));\n}\n\nvec3 normal (vec2 uv) {\n    vec2 eps = vec2(0.01, 0.0);\n    return normalize(vec3(\n    \tfield(uv - eps.xy) - field(uv + eps.xy),\n        eps.x*2.0,\n        field(uv - eps.yx) - field(uv + eps.yx)\n    ));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float tt = 0.25;\n    vec3 right = normalize(vec3(sin(iTime*tt), sin(iTime*tt)*0.5, cos(iTime*tt)));\n    vec3 up = normalize(vec3(0, 1, 0));\n    up = up - dot(up, right) * right;\n    vec3 front = cross(right, up);\n    mat3 basis = mat3(right, up, front);\n    \n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    uv = uv*2.0-1.0;\n    uv.x *= iResolution.x/iResolution.y;\n    \n    vec3 ro = vec3(uv, 0.0);\n    vec3 rd = normalize(vec3(uv, 1.0));\n        \n    ro = basis * ro;\n    rd = basis * rd;\n   \n    ro.y += 8.0;\n    ro.z += iTime * 4.0;\n    \n    vec3 light = vec3(0, 2.0, 8.0);\n    \n    float l = -ro.y / rd.y;\n    \n    if (l < 0.0) l = (16.0-ro.y) / rd.y;\n    vec3 h = ro + l*rd;\n        \n    \tfloat c = field(h.xz);\n        fragColor = vec4(c);\n        \n        vec3 nor = normal(h.xz);\n        \n        vec3 surface2light = normalize(light - h);\n        vec3 surface2eye = normalize(ro - h);\n        \n        float diff = dot(surface2light, nor);\n        diff = mix(0.5, 1.0, diff);\n                    \n        vec3 finalColor = color(h.xz);\n        finalColor = finalColor*vec3(1.0, 0.85, 0.65) * diff;\n        \n        fragColor = vec4(finalColor*exp(-length(ro-h)*0.005), 1.0);\n}","name":"Image","description":"","type":"image"}]}