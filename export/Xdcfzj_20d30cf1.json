{"ver":"0.1","info":{"id":"Xdcfzj","date":"1525845272","viewed":179,"name":"Grid index based rotations","username":"ivanlesko","description":"Learning how to manipulate angles based on XY indices.  \n\nLoosely based on this image: https://www.designspiration.net/save/1718294031417/","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["grid","beginner","rotation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 rotate2D(vec2 uv, float angle) {\n    uv -= 0.5;\n    uv =  mat2(cos(angle),-sin(angle),\n               sin(angle),cos(angle)) * uv;\n    uv += 0.5;\n    return uv;\n}\n\nfloat getSquare(vec2 p, vec2 size, vec2 uv) {\n    float m = max(iResolution.x, iResolution.y);\n    p = p * iResolution.xy/m;\n    vec2 bl = 1.0-smoothstep(-16.0/m, 16.0/m, abs(2.0*(p-uv))-size );\n    return bl.x * bl.y;\n}\n\nvec2 grid(vec2 uv, float num) {\n    uv *= num;\n    vec2 index = floor(uv);\n    \n    // Hides rows along the edges\n    if (index.x <= 0. ||\n        index.x > num-1. ||\n        index.y <= 0. ||\n        index.y > num - 2.) {\n        return vec2(0.);\n    }\n    \n    float rad = (1.5708 /num) * (index.x - index.y) * sin(iTime * 2.) * 3.;\n    uv = fract(uv);\n    uv = rotate2D(uv, rad);\n    \n    return uv;\n}\n\nfloat ring(vec2 pos, float r, vec2 uv) {\n    uv -= .5;\n    float l = length(uv);\n    \n    float color = smoothstep(r - 0.05, r, l) - smoothstep(r, r - 0.1, l);\n    \n    float t = r - 0.15;\n    color *= smoothstep(t - 0.05, t, l) - smoothstep(t, t - 0.05, l);\n    \n    color -= getSquare(vec2(-0.010,0.40), vec2(0.140,0.5), uv);\n    \n    return 1. - color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 st = fragCoord.xy/iResolution.y;\n    st.x -= 0.3;\n    \n    vec3 color = vec3(.97);\n    \n    vec2 grid = grid(st, 8.);\n    \n    float ring = ring(vec2(0.5), .53, grid);\n    color = mix(color, vec3(0.), ring);\n    \n    // color = vec3(grid.x ,grid.y, 0.);\n    \n    fragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}]}