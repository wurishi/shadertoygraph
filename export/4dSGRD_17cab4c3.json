{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"vec3 spheres[5];\n\nstruct Ray\n{\n\tvec3 org;\n\tvec3 dir;\n};\n\nvec3 raymarch(Ray ray)\n{\n\tconst int maxSteps = 200;\n\tconst float hitThreshold = 2.0;\n\t\n\n\tbool hit = false;\n\n\tvec3 pos = ray.org;\n\t\n\tvec3 colorbase = vec3(0.6, 0.7, 1.0);\n\tvec3 colortop = vec3(1.0, 0.0, 0.0);\n\tvec3 color = vec3(0.0, 0.0, 0.0); \n\t\n\n\tfor(int i = 0; i < maxSteps; i++)\n\t{\n\t\tint numHits = 0;\n\t\tfor (int j = 0; j < 5; j++)\n\t\t{\n\t\t\tfloat d = distance(pos,\tspheres[j]);\n\t\t\tif (d < hitThreshold)\n\t\t\t{\n\t\t\t\tnumHits++;\n\t\t\t\tcolor += colorbase * pow((1.0-d/2.0),1.6) * 0.03;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(numHits > 3)\n\t\t{\n\t\t\tcolor += colortop * 0.01;\t\n\t\t}\n\t\t\n\t\tpos += 0.04 * ray.dir;\n\t}\n\t\n\treturn color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tspheres[0] = vec3(0.0, 0.0, 0.0);\n\tspheres[1] = vec3(cos(iTime)*4.0, 1.0, sin(iTime+0.3)-0.3);\n\tspheres[2] = vec3(cos(iTime-0.7)*-2.0, sin(iTime*3.0)*3.0, 0.0);\n\tspheres[3] = vec3(sin(iTime*1.6)*1.5, 0.1, -0.7);\n\tspheres[4] = vec3(0.7, cos(iTime-0.2)*-1.5, 1.0);\n\t\n\tvec2 ndcXY = -1.0 + 2.0 * fragCoord.xy / iResolution.xy;\n\t\n\tfloat aspectRatio = iResolution.x / iResolution.y;\n\t\n\tvec2 scaledXY = ndcXY * vec2(aspectRatio, 1.0);\n\t\n\tvec3 camWsXYZ = vec3(0.0, 0.0, 5.0);\n\tcamWsXYZ.z *= iMouse.x/iResolution.x;\n\t\n\tRay ray;\n\tray.org = camWsXYZ;\n\tray.dir = vec3(scaledXY, -1.0);\n\n\tfragColor = vec4(raymarch(ray), 1.0);\t\n\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4dSGRD","date":"1384170894","viewed":445,"name":"Raymarching Lights","username":"pholz","description":"Based on https://www.shadertoy.com/embed/MsfGz8","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["simpleraymarchingshaderwithdancinglights"],"hasliked":0,"parentid":"","parentname":""}}