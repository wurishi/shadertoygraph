{"ver":"0.1","info":{"id":"lsjcWz","date":"1491728894","viewed":169,"name":"Snek","username":"Kos","description":"Basic version","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d","pixel","snake"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define M_PI (355./113.)\n\nivec2 resolution = 3*ivec2(16, 9); // 48x27\nfloat speed = 6.;\n\nvec4 colorOff = vec4(0, .15, 0, 0);\nvec4 colorOn = vec4(.6, 1., 0., 0);\n\nfloat colorAt(int frame, ivec2 gridCoord) {\n    //int x = frame % resolution.x;\n    int x = int(mod(float(frame), float(resolution.x)));\n    \n    ivec2 head = ivec2(x, 20.);\n    return (gridCoord == head) ? 1. : 0.;\n}\n    \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    ivec2 gridCoord = ivec2(uv * vec2(resolution));\n    \n    int frame = int(iTime*speed);\n    float frameFraction = (iTime*speed - float(frame));\n    \n    fragColor = vec4(0);\n    fragColor += colorOn * colorAt(frame, gridCoord); // 1\n    fragColor += colorOn * colorAt(frame-1, gridCoord)*(1.-frameFraction*0.25); // 1..0.75\n    fragColor += colorOn * colorAt(frame-2, gridCoord)*(1.-frameFraction*0.25 - 0.25); //  0.75 .. 0.5\n    fragColor += colorOn * colorAt(frame-3, gridCoord)*(1.-frameFraction*0.25 - 0.5); // 0.5 .. 0.25\n    fragColor += colorOn * colorAt(frame-4, gridCoord)*(1.-frameFraction*0.25 - 0.75); // 0.25 .. 0\n    fragColor += colorOff;\n    \n    vec2 gridOffset = uv - (vec2(gridCoord) / vec2(resolution));\n    gridOffset *= vec2(resolution);\n    \n    float pixelShape = sin(gridOffset.x*M_PI) * sin(gridOffset.y*M_PI);\n    pixelShape = pow(pixelShape, 0.1);    \n    \n    fragColor *= pixelShape;\n}\n","name":"Image","description":"","type":"image"}]}