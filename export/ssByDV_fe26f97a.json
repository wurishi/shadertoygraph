{"ver":"0.1","info":{"id":"ssByDV","date":"1644102789","viewed":594,"name":"Curtain effect","username":"mrboggieman","description":"A fake 3D curtain transition effect (from left to right). Use the mouse to open and close the curtain.","likes":10,"published":1,"flags":0,"usePreview":1,"tags":["effect","transition","curtain"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float NUM_PLEATS = 20.0;\nconst float MAX_SHADOW = 0.3;\nconst float PLEAT_HEIGHT = 4.0; // pixel wave amplitude\nconst float GRAB_AMOUNT = 0.5;\n\nconst float TAU = 6.2831852;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    vec2 grabPos = iMouse.xy / iResolution.xy;\n    \n    //move left and right\n    uv.x = (uv.x - grabPos.x) / (1.0 - grabPos.x);\n    \n    //grab distance offset\n    uv.x += abs(uv.y - grabPos.y) * (1.0 - uv.x) * GRAB_AMOUNT * grabPos.x;\n    \n    //pleats\n    float pleatZ = (cos(uv.x * TAU * NUM_PLEATS) + 1.0) / 2.0;\n    \n    //pleat position offset\n    uv.y += pleatZ * PLEAT_HEIGHT * grabPos.x / iResolution.y;\n    \n    //no texture hit\n    if (any(lessThan(uv, vec2(0.0))) || any(greaterThan(uv, vec2(1.0)))) {\n        fragColor = vec4(vec3(0.0), 1.0);\n        return;\n    }\n    \n    //pleat shadow\n    vec3 shadow = vec3(pleatZ * MAX_SHADOW * clamp(grabPos.x * 2.0, 0.0, 1.0));\n    shadow = mix(shadow, vec3(MAX_SHADOW), grabPos.x); //fade to solid colour to hide aliasing\n\n    fragColor = texture(iChannel0, uv) - vec4(shadow, 0.0);\n}","name":"Image","description":"","type":"image"}]}