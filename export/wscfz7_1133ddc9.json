{"ver":"0.1","info":{"id":"wscfz7","date":"1604657452","viewed":402,"name":"Blur Gaussian (one pass)","username":"MikaJoo","description":"Simple gaussian blur (blur size and blur spread customization)","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["blur"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float TWO_PI = 6.28318530718;\nconst float E = 2.71828182846;\nconst float Spread = 4.0;\nfloat gaussian(float x, float y)\n{\n    const float sigmaSqu = Spread * Spread;\n    return (1.0f / sqrt(TWO_PI * sigmaSqu)) * pow(E, -((x * x) + (y * y)) / (2.0f * sigmaSqu));\n}\n\n\nvec4 Blur(vec2 texCoord, float blurSpread, float blurSize)\n{\n    float weight = 0.0;\n\n\tvec4 sumColor = vec4(0);\n\n\tfor(float i=-blurSpread; i<=blurSpread; ++i) \n\t{\n\t\tfor(float j=-blurSpread; j<=blurSpread; ++j) \n\t\t{\n            vec2 curTexCoord = vec2(texCoord.x + i*blurSize, texCoord.y + j*blurSize);\n            \n            float curWeight = gaussian(i,j);\n\t\t\tweight += curWeight;\n            \n            sumColor += texture(iChannel0, curTexCoord) * curWeight;\n        }\n    }\n    \n    if(weight>0.0f)\n        sumColor /= weight;\n    \n    return sumColor;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    float radius = 1.0f;\n\tfloat resolution = float(textureSize(iChannel0, 0).x);\n    float blurSize = radius / resolution;\n    float blurSpread = 4.0f;\n    \n    // Output to screen\n    fragColor = Blur(uv, blurSpread, blurSize);\n}","name":"Image","description":"","type":"image"}]}