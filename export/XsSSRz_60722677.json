{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"//Tiny Ray Marcher 3.0\n\n//Originally written by Aaro PerÃ¤maa, compacting by Ben and Dave_Hoskins\n//466 characters\n\n#define k =min(length(p-q)-a,p.y+a);p+=j\n#define n normalize\n#define v vec3\nvoid mainImage(out vec4 fragColor, vec2 fragCoord)\n{\n    v R=iResolution;\n\tv u=(2.*fragCoord.xyx-R)/R.y;\n\tfloat t=0.,r=1.,c=t,h=3.,s=t,a=r,b=.1;\n\tu.z=r;\n\tv o=u,p=u,q=v(7,abs(sin(iTime*h)),4),l=q.xxz,g=u,j=v(0,-b,b);\n\tq.x=t;\n\tfor(int i=0;i<192;i++)\n\t{\n\t\tp=u*t+o;\n\t\th k-j;\n\t\ti>127 ?r=min(r,8.*h/t):h<.001 ? c=5./length(p-l):t;\n\t\tt+=h;\n\t\tif(i==63){\n\t\t\to=p;\n\t\t\ts=c;\n\t\t\th k.zxx;\n\t\t\tt k.yzx;\n\t\t\tr k;\n\t\t\tp.x k;\n\t\t\tu=reflect(u,normalize(v(t,r,p.x)-h));\n\t\t\tt=b;\n\t\t\tr=a;\n\t\t}\n\t\tif(i==127){\n\t\t\tu=normalize(l-o);\n\t\t\tt=b;\n\t\t}\n\t}\n\tfragColor=vec4(c*r);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XsSSRz","date":"1408111927","viewed":290,"name":"Tiny Ray Marcher 3.0","username":"Aaro","description":"Oh its on. I'm sure comment section will be full with compacting suggestions... probs about the normal calculation.<br/>1.0 version: https://www.shadertoy.com/view/MdfXWl<br/>2.0 version: https://www.shadertoy.com/view/ldsXDs","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["reflection","ray","shadow","marching","tiny"],"hasliked":0,"parentid":"","parentname":""}}