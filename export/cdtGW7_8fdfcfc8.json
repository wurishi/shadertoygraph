{"ver":"0.1","info":{"id":"cdtGW7","date":"1677368682","viewed":115,"name":"barebones music visualizer","username":"rucksack","description":"synced to the beat of my own music","likes":3,"published":1,"flags":64,"usePreview":0,"tags":["sound","music","audio","visualizer"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"lt2XDc","filepath":"https://soundcloud.com/tore-bergebakken/woodland-chase?si=c17bf1d8d8e540d48df419f7d10af189&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing","previewfilepath":"https://soundcloud.com/tore-bergebakken/woodland-chase?si=c17bf1d8d8e540d48df419f7d10af189&utm_source=clipboard&utm_medium=text&utm_campaign=social_sharing","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float bpm = 120.;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec3 col;\n    \n    // Bin x into bars\n    float p = .05;\n    float frequency = round((uv.x + p/2.)/p)*p;\n    \n    // Find music values\n    float amplitude = texture(iChannel0, vec2(frequency, 0.)).r;\n    float beat_length = 60./bpm;\n    \n    // Base color depends on UV\n    // TODO do the green modulation of 2. based on actual beat of the song maybe\n    vec3 base = vec3(1.-uv.x+.1, uv.x, uv.y + .5*(sin(2.*beat_length*3.1415*iTime)+.5));\n \n    // Draw bar or background\n    if (uv.y <= amplitude) {\n        col = amplitude * base;\n    } else {\n        col = .4*uv.y * base + vec3(.01, .1, .05) * sqrt(2.*amplitude);\n    }\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}