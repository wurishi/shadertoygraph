{"ver":"0.1","info":{"id":"WdVcRd","date":"1603513685","viewed":134,"name":"Newton_Fractal","username":"hunahpu","description":"Fractal metodo de newton","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["fractal","newtonmethod"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define iter 30\n#define eps 0.001\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\nvec2 c_mul(vec2 z1, vec2 z2)\n{\n    return vec2(z1.x * z2.x - z1.y * z2.y, z1.y * z2.x + z1.x * z2.y); \n}\n\nvec2 c_div(vec2 z1, vec2 z2)\n{\n    float denom = z2.x * z2.x + z2.y * z2.y;\n    return vec2(\n                (z1.x * z2.x + z1.y * z2.y) / denom,\n                (z1.y * z2.x - z1.x * z2.y) / denom\n            );\n}\n\nvec2 c_pow(vec2 z, int n){\n\tvec2 res = vec2(1.0,0.);\n    for(int i = 0; i < n; i++)\n        res = c_mul(res,z);\n    return res;\n}\n\nfloat c_abs(vec2 z){\n\treturn dot(z,z);\n}\n\n\nvec2 c_sin(vec2 z)\n{\n    return vec2(sin(z.x) * cosh(z.y), cos(z.x) * sinh(z.y));\n}\n\nvec2 c_cos(vec2 z)\n{\n    return vec2(cos(z.x) * cosh(z.y), -sin(z.x) * sinh(z.y));\n}\n\n\nvec2 f(vec2 z)\n{\n    //return c_mul(c_mul(z, z), z)+ vec2(1.0,0);\n    return c_sin(z)-c_pow(z,4)+vec2(1.0,0.);\n}\n\nvec2 df(vec2 z)\n{\n    //return 3.0 * c_mul(z, z);\n    return c_cos(z)-c_pow(z,3)*4.0;\n}\n\nfloat newton(vec2 z){\n\tfloat res = 0.;\n    for(int i =0; i< iter;i++){\n    \tz = z-c_div(f(z),df(z));\n        if(c_abs(f(z)) < eps){\n        \tres = float(i);\n            break;\n        }\n    }\n    if(res>float(iter-1))\n        return 0.0;\n    res /= float(iter);\n    return res;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = (2.0*fragCoord-iResolution.xy)/iResolution.y;;\n\tvec3 col = vec3(0);\n    float tz = 0.5 - 0.5*cos(0.225*iTime);\n    float zoo = pow( 0.59, 13.0*tz );\n\tvec2 c = vec2(0.59,.0) + p*(zoo);\n    float l = newton(c);\n    col = vec3(1.0-l,l,l*0.5 +0.5);\n    \n    fragColor = vec4 (col, 1);\n}","name":"Image","description":"","type":"image"}]}