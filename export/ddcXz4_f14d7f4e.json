{"ver":"0.1","info":{"id":"ddcXz4","date":"1679443716","viewed":65,"name":"backbufferLines","username":"pb","description":"distance to line, raymarch with backbuffer","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["raymarch","line"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Buffer A is where it is at\n\nvoid mainImage( out vec4 O, in vec2 U ) {\n\n   U /= iResolution.xy;\n   O = texture(iChannel0, U);\n   \n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define R iResolution\n#define N normalize\n\nvec3 x1=vec3(0.,0.,0.),x2=vec3(-.5,1.,-5.);\nfloat f(vec3 p) {  //distance to a line\n  float d1 = length( cross( (p-x1), (p-x2) ) ) / length( x2 - x1 );\n  return d1;\n}\n\nvoid mainImage( out vec4 O, in vec2 U ) {\n  O -= O; float t=iTime;\n  vec2 oU = U/R.xy;\n  U = (2.*U-R.xy)/U.y ;\n  U.y += .8;\n  x1.z += 8.*sin(t*2.); x1.x += .8*cos(t*5.); x1.y += .5*(sin(t/2.));\n  vec3 rd=N(vec3(U,3.)), ro=vec3(0.,0.,-4.), p=ro;\n  float dist, td=0., glow=0.;\n  for (float i=0.; i<8.; i++) {\n    float dist = f(p);       \n    glow += exp(-dist*1e2); \n    p += dist*rd;  \n  }\n  glow *= glow;\n  O.g = glow/2.;\n  O.b = glow;\n  vec4 prev=texture(iChannel0, oU);\n  O.g += .98*prev.g;\n  O.b += .5*prev.g;\n}","name":"Buffer A","description":"","type":"buffer"}]}