{"ver":"0.1","info":{"id":"lt2SRw","date":"1442556012","viewed":133,"name":"Pulsing Mandelbrot","username":"roombarampage","description":"applied a sine wave to the max iterations for rendering the mandelbrot set","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["fractal","mandelbrotpulsing"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"/*\n  programmer: jonathan potter\n  github: https://github.com/jonathan-potter\n  repo: https://github.com/jonathan-potter/shadertoy-fractal\n*/\n\nconst int MAX_ITERATIONS = 32;\nconst float ITERATIONS_PER_SECOND = 12.0;\nconst float pi = 3.14159;\n\nstruct complex { \n  float real;\n  float imaginary;\n};\n\nint fractal(complex c, complex z, int iterations) {\n  for (int iteration = 0; iteration < MAX_ITERATIONS; iteration++) {\n    if (iteration >= iterations) {return 0;}\n\n    // z <- z^2 + c\n    float real = z.real * z.real - z.imaginary * z.imaginary + c.real;\n    float imaginary = 2.0 * z.real * z.imaginary + c.imaginary;\n\n    z.real = real;\n    z.imaginary = imaginary;\n\n    if (z.real * z.real + z.imaginary * z.imaginary > 4.0) {\n      return iteration;\n    }\n  }\n\n  return 0;\n}\n\nint mandelbrot(vec2 coordinate, int iterations) {\n  complex c = complex(coordinate.x, coordinate.y);\n  complex z = complex(0.0, 0.0);\n\n  return fractal(c, z, iterations);\n}\n\nvec2 fragCoordToXY(vec2 fragCoord) {\n  vec2 relativePosition = fragCoord.xy / iResolution.xy;\n  float aspectRatio = iResolution.x / iResolution.y;\n\n  vec2 cartesianPosition = (relativePosition - 0.5) * 3.0;\n  cartesianPosition.x *= aspectRatio;\n\n  return cartesianPosition;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n  float pulse = sin(float(MAX_ITERATIONS) + (iTime * 2.0 * pi * ITERATIONS_PER_SECOND / float(MAX_ITERATIONS)));\n  int iterations = int(floor(float(MAX_ITERATIONS) * (1.05 + pulse)));\n    \n  vec2 coordinate = fragCoordToXY(fragCoord);\n\n  int crossoverIteration = mandelbrot(coordinate, iterations);\n    \n  float color = 1.0 * float(crossoverIteration) / float(iterations);\n\n  fragColor = vec4(color, color, color, 1.0);\n}\n","name":"","description":"","type":"image"}]}