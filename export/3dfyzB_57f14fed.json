{"ver":"0.1","info":{"id":"3dfyzB","date":"1584992104","viewed":102,"name":"Voronoi - Mosssy Blocks","username":"copperTones","description":"Inspired by a painting I saw and [url=https://www.shadertoy.com/view/MdSGRc]iq's blocks[\\url]. Might come back to add a tree/bark texture.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["voronoi","nature"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Created by inigo quilez - iq/2014\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\nfloat hash1( float n ) { return fract(sin(n)*43758.5453); }\nvec2  hash2( vec2  p ) { p = vec2( dot(p,vec2(127.1,311.7)), dot(p,vec2(269.5,183.3)) ); return fract(sin(p)*43758.5453); }\n\nconst float sqr3 = sqrt(3.)/2.;\n\nvec4 voronoi(in vec2 x)\n{\n    vec2 n = floor( x );\n    vec2 f = fract( x );\n\n\tvec3 m = vec3( 8.0 );\n\tfloat m2 = 8.0;\n    for( int j=-2; j<=2; j++ )\n    for( int i=-2; i<=2; i++ ) {\n        vec2 g = vec2(float(i), float(j));\n        vec2 o = hash2(n + g);\n        \n\t\tvec2 r = g - f + o*.5;\n\t\t\n\t\tvec2 d = vec2( max(abs(r.x)*sqr3+r.y*0.5,-r.y), \n\t\t\t\t        step(0.0,0.5*abs(r.x)+sqr3*r.y)*(1.0+step(0.0,r.x)) );\n\t\t\n        if( d.x<m.x )\n        {\n\t\t\tm2 = m.x;\n            m.x = d.x;\n            m.y = hash1( dot(n+g,vec2(7.0,113.0) ) );\n\t\t\tm.z = d.y;\n        }\n\t\telse if( d.x<m2 )\n\t\t{\n\t\t\tm2 = d.x;\n\t\t}\n\n    }\n    return vec4( m, m2-m.x );\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 p = fragCoord.xy/iResolution.xx;\n    vec4 c = voronoi(8.*p);\n\t\n    //vec3(.5, .3, .1);\n    //vec3(.2, .4, .1);\n    vec3 col = c.w>.1? vec3(.5, .3, .1): vec3(.2, .4, .1);\n    col *= (c.z+6.)/8.;//light\n    float occ = min(sqrt(c.w)*2., 1.)+pow(.2, c.x);\n    col *= .6*occ + .4;\n    col = smoothstep(-.1, 1.2, col);\n    \n    fragColor = vec4(col, 1.);\n}","name":"Image","description":"","type":"image"}]}