{"ver":"0.1","info":{"id":"lftyD7","date":"1730760094","viewed":39,"name":"Distorted radial spokes","username":"gabrieloc","description":"adjust m1, m2, and r, and drag mouse horizontally to move wheel\nset the animate const to 1 to demo a range of values","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["ui"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 toPolar(vec2 cartesian) {\n  return vec2(atan(cartesian.y, cartesian.x), length(cartesian));\n}\n\nmat3 rotationMatrix(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n  return mat3(\n    c, -s, 0,\n    s, c, 0,\n    0, 0, 1\n  );\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n  float offset = iTime * 0.1 - iMouse.x / 100.;\n  const float animate = 0.; \n  \n  // min spoke count\n  float m1 = round(mix(8., 12., animate * sin(iTime) * 0.5 + 0.5));\n  \n  // max spoke count\n  float m2 = round(mix(16., 24., animate * sin(iTime) * 0.5 + 0.5));\n  \n  // distortion band length\n  float r = mix(0.5, 0.9, animate * sin(iTime) * 0.5 + 0.5);\n  \n\n  vec2 uv = (fragCoord / iResolution.xy - 0.5) * 1.1 * vec2(iResolution.x / iResolution.y, 1.0) + 0.5;\n  const float PI = 3.14159;\n  float smoothing = fwidth(uv.x);\n  float len = smoothing * 10.0;\n\n  uv = (rotationMatrix(PI / 2.0) * vec3(uv - 0.5, 0.0)).xy + 0.5;\n\n  vec2 polar = toPolar(uv - 0.5);\n  float dist = abs(polar.x) / PI;\n  float freq = mix(m1, m2, smoothstep(r, 1.0, dist));\n  float spokes = ((polar.x / PI * 0.5) * freq + offset);\n  spokes = abs(fract(spokes) * 2.0 - 1.0);\n\n  spokes = smoothstep(0.1 + fwidth(polar.x),0.1, spokes);\n  spokes *= smoothstep(len + smoothing, len, abs(polar.y - 0.5 + len) + smoothing);\n  fragColor = vec4(vec3(spokes), 1.0);\n}\n","name":"Image","description":"","type":"image"}]}