{"ver":"0.1","info":{"id":"tlKBRh","date":"1613894093","viewed":126,"name":"Fractal 27_gaz","username":"gaz","description":"fractal","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["fractal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define t iTime\n#define bpm 60.\n#define B (60./bpm)\n#define b (mod(t,B)/B)\n\n#define f(p)if(p.x<p.y)p=p.yx;\n\nvec3 rot(vec3 p,vec3 a,float t){\n  a=normalize(a);\n  return mix(a*dot(p,a),p,cos(t))+sin(t)*cross(p,a);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2.* gl_FragCoord.xy - iResolution.xy )/iResolution.y;\n    vec3 p,c=vec3(0),d=normalize(vec3(uv,2));\n    float g=0.,e,s,a;\n    for(float i=0.;i<99.;i++){\n        p=g*d;\n        p.z-=7.;\n        p=rot(p,vec3(1,1,1),mix(.5,1.2,mod(t,4.)/4.));\n        s=2.;\n        p=abs(p)-1.8;\n        f(p.xy)\n        f(p.xz)\n        for(int i=0;i<10;i++){\n            p=.8-abs(p-1.2);\n            f(p.xz)\n            s*=e=3./clamp(dot(p,p),.0,1.2);\n            p=abs(p)*e-vec3(.3,9.+b*b*5.,6);\n        }\n        a=1.;\n        p-=clamp(p,-a,a);\n        g+=e=length(p)/s;\n        e<.001?c+=pow(cos(i/64.),5.)*.02\n            *mix(vec3(1),(cos(vec3(1,2,3)+log(s)+t)*.5+.5),.5)\n            :p;\n    }\n    fragColor = vec4(c,1.0);\n}","name":"Image","description":"","type":"image"}]}