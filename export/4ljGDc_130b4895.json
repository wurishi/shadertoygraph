{"ver":"0.1","info":{"id":"4ljGDc","date":"1433180738","viewed":381,"name":"FirstMusicTest","username":"dila","description":"First test of music output.","likes":7,"published":1,"flags":8,"usePreview":0,"tags":["music","zelda"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"float sdTriPrism( vec3 p, vec2 h )\n{\n    vec3 q = abs(p);\n    return max(q.z-h.y,max(q.x*0.866025+p.y*0.5,-p.y)-h.x*0.5);\n}\n\nfloat map(vec3 p)\n{\n    return -sdTriPrism(p, vec2(1.0, 1000.0));\n}\n\nfloat trace(vec3 o, vec3 r)\n{\n    float t = 0.0;\n    for (int i = 0; i < 32; ++i) {\n        vec3 p = o + r * t;\n        float d = map(p);\n        t += d;\n    }\n    return t;\n}\n\nvec3 shade(vec3 p)\n{\n    return vec3(0.5+0.5*sign(sin(iTime+p.z*0.25)));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    uv = uv * 2.0 - 1.0;\n    uv.x *= iResolution.x / iResolution.y;\n    \n    float fov = mix(0.5, 1.0, 0.5+0.5*sin(iTime));\n    \n\tvec3 r = vec3(uv, 1.0);\n    \n    vec3 o = r;\n    \n    r = vec3(0.0, 0.0, fov);\n    \n    float t = trace(o, r);\n    vec3 w = o + r * t;\n    vec3 da = shade(w);\n    \n\tfragColor = vec4(da,1.0);\n}","name":"","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float twopi = 6.2831;\nfloat ts = 5000.0;\n\nfloat play(float amp, float time, float freq)\n{\n    return sin(twopi*freq*time) * amp;\n}\n\nfloat note(float x, float time, float s, float e)\n{ \n    float t = time * ts;\n \n    float rel = time - s/ts;\n    \n    if (t>=s && t<e) {\n        return exp2(-rel*10.0);\n    }\n    \n    return x;\n}\n\nvec2 mainSound( in int samp,float time)\n{\n    float r = 0.0;\n    float x = 0.0;\n    \n    x = 0.0;\n    x = note(x, time, 28800.0, 30080.0);\n    x = note(x, time, 30720.0, 31200.0);\n    x = note(x, time, 31680.0, 32160.0);\n    x = note(x, time, 51840.0, 53120.0);\n    x = note(x, time, 53760.0, 54240.0);\n    x = note(x, time, 54720.0, 55200.0);\n    r += play(x, time, 1318.5103);\n\n    x = 0.0;\n    x = note(x, time, 43200.0, 45760.0);\n    r += play(x, time, 659.2551);\n\n    x = 0.0;\n    x = note(x, time, 32160.0, 32640.0);\n    x = note(x, time, 55200.0, 55680.0);\n    r += play(x, time, 1046.5023);\n\n    x = 0.0;\n    x = note(x, time, 23040.0, 23520.0);\n    x = note(x, time, 25920.0, 26400.0);\n    x = note(x, time, 35520.0, 36240.0);\n    x = note(x, time, 41280.0, 42000.0);\n    x = note(x, time, 46080.0, 46560.0);\n    x = note(x, time, 48960.0, 49440.0);\n    x = note(x, time, 58560.0, 59280.0);\n    x = note(x, time, 63360.0, 65920.0);\n    r += play(x, time, 587.3295);\n\n    x = 0.0;\n    x = note(x, time, 24000.0, 25440.0);\n    x = note(x, time, 26880.0, 28320.0);\n    x = note(x, time, 47040.0, 48480.0);\n    x = note(x, time, 49920.0, 51360.0);\n    r += play(x, time, 1174.659);\n\n    x = 0.0;\n    x = note(x, time, 23520.0, 24000.0);\n    x = note(x, time, 26400.0, 26880.0);\n    x = note(x, time, 36480.0, 36960.0);\n    x = note(x, time, 42240.0, 42720.0);\n    x = note(x, time, 46560.0, 47040.0);\n    x = note(x, time, 49440.0, 49920.0);\n    x = note(x, time, 59520.0, 60000.0);\n    r += play(x, time, 698.4565);\n\n    x = 0.0;\n    x = note(x, time, 30240.0, 30720.0);\n    x = note(x, time, 31200.0, 31680.0);\n    x = note(x, time, 53280.0, 53760.0);\n    x = note(x, time, 54240.0, 54720.0);\n    r += play(x, time, 1396.913);\n\n    x = 0.0;\n    x = note(x, time, 36960.0, 37440.0);\n    x = note(x, time, 42720.0, 43200.0);\n    x = note(x, time, 60000.0, 60480.0);\n    r += play(x, time, 783.99084);\n\n    x = 0.0;\n    x = note(x, time, 32640.0, 34080.0);\n    x = note(x, time, 34560.0, 35520.0);\n    x = note(x, time, 37440.0, 40000.0);\n    x = note(x, time, 40320.0, 41280.0);\n    x = note(x, time, 55680.0, 57120.0);\n    x = note(x, time, 57600.0, 58560.0);\n    x = note(x, time, 60480.0, 61920.0);\n    x = note(x, time, 62400.0, 63120.0);\n    r += play(x, time, 880.0);\n\n    /* 2 */\n    \n    x = 0.0;\n    x = note(x, time, 2880.0, 5440.0);\n    x = note(x, time, 8640.0, 11200.0);\n    x = note(x, time, 14400.0, 16960.0);\n    x = note(x, time, 20160.0, 22720.0);\n    x = note(x, time, 25920.0, 28480.0);\n    x = note(x, time, 31680.0, 34240.0);\n    x = note(x, time, 48960.0, 51520.0);\n    x = note(x, time, 54720.0, 57280.0);\n    x = note(x, time, 66240.0, 68800.0);\n    x = note(x, time, 72000.0, 74560.0);\n    x = note(x, time, 77760.0, 80320.0);\n    x = note(x, time, 83520.0, 86080.0);\n    x = note(x, time, 89280.0, 91840.0);\n    x = note(x, time, 95040.0, 97600.0);\n    x = note(x, time, 112320.0, 114880.0);\n    x = note(x, time, 118080.0, 120640.0);\n    x = note(x, time, 129600.0, 132160.0);\n    x = note(x, time, 135360.0, 137920.0);\n    x = note(x, time, 141120.0, 143680.0);\n    x = note(x, time, 146880.0, 149440.0);\n    r += play(x*0.25, time, 329.62756);\n\n    x = 0.0;\n    x = note(x, time, 0.0, 2560.0);\n    x = note(x, time, 11520.0, 14080.0);\n    x = note(x, time, 23040.0, 25600.0);\n    x = note(x, time, 46080.0, 48640.0);\n    x = note(x, time, 63360.0, 65920.0);\n    x = note(x, time, 74880.0, 77440.0);\n    x = note(x, time, 86400.0, 88960.0);\n    x = note(x, time, 109440.0, 112000.0);\n    x = note(x, time, 126720.0, 129280.0);\n    x = note(x, time, 138240.0, 140800.0);\n    r += play(x*0.25, time, 293.66476);\n\n    x = 0.0;\n    x = note(x, time, 5760.0, 8320.0);\n    x = note(x, time, 17280.0, 19840.0);\n    x = note(x, time, 28800.0, 31360.0);\n    x = note(x, time, 37440.0, 40000.0);\n    x = note(x, time, 51840.0, 54400.0);\n    x = note(x, time, 69120.0, 71680.0);\n    x = note(x, time, 80640.0, 83200.0);\n    x = note(x, time, 92160.0, 94720.0);\n    x = note(x, time, 100800.0, 103360.0);\n    x = note(x, time, 115200.0, 117760.0);\n    x = note(x, time, 132480.0, 135040.0);\n    x = note(x, time, 144000.0, 146560.0);\n    r += play(x*0.25, time, 349.22824);\n\n    x = 0.0;\n    x = note(x, time, 34560.0, 37120.0);\n    x = note(x, time, 40320.0, 42880.0);\n    x = note(x, time, 43200.0, 45760.0);\n    x = note(x, time, 57600.0, 60160.0);\n    x = note(x, time, 60480.0, 63040.0);\n    x = note(x, time, 97920.0, 100480.0);\n    x = note(x, time, 103680.0, 106240.0);\n    x = note(x, time, 106560.0, 109120.0);\n    x = note(x, time, 120960.0, 123520.0);\n    x = note(x, time, 123840.0, 126400.0);\n    r += play(x*0.25, time, 440.0);\n    \n    /* 4 */\n    \n    x = 0.0;\n    x = note(x, time, 2880.0, 5440.0);\n    x = note(x, time, 8640.0, 11200.0);\n    x = note(x, time, 14400.0, 16960.0);\n    x = note(x, time, 20160.0, 22720.0);\n    x = note(x, time, 25920.0, 28480.0);\n    x = note(x, time, 31680.0, 34240.0);\n    x = note(x, time, 48960.0, 51520.0);\n    x = note(x, time, 54720.0, 57280.0);\n    x = note(x, time, 66240.0, 68800.0);\n    x = note(x, time, 72000.0, 74560.0);\n    x = note(x, time, 77760.0, 80320.0);\n    x = note(x, time, 83520.0, 86080.0);\n    x = note(x, time, 89280.0, 91840.0);\n    x = note(x, time, 95040.0, 97600.0);\n    x = note(x, time, 112320.0, 114880.0);\n    x = note(x, time, 118080.0, 120640.0);\n    x = note(x, time, 129600.0, 132160.0);\n    x = note(x, time, 135360.0, 137920.0);\n    x = note(x, time, 141120.0, 143680.0);\n    x = note(x, time, 146880.0, 149440.0);\n    r += play(x*0.25, time, 164.81378);\n\n    x = 0.0;\n    x = note(x, time, 0.0, 2560.0);\n    x = note(x, time, 11520.0, 14080.0);\n    x = note(x, time, 23040.0, 25600.0);\n    x = note(x, time, 46080.0, 48640.0);\n    x = note(x, time, 63360.0, 65920.0);\n    x = note(x, time, 74880.0, 77440.0);\n    x = note(x, time, 86400.0, 88960.0);\n    x = note(x, time, 109440.0, 112000.0);\n    x = note(x, time, 126720.0, 129280.0);\n    x = note(x, time, 138240.0, 140800.0);\n    r += play(x*0.25, time, 146.83238);\n\n    x = 0.0;\n    x = note(x, time, 5760.0, 8320.0);\n    x = note(x, time, 17280.0, 19840.0);\n    x = note(x, time, 28800.0, 31360.0);\n    x = note(x, time, 37440.0, 40000.0);\n    x = note(x, time, 51840.0, 54400.0);\n    x = note(x, time, 60480.0, 63040.0);\n    x = note(x, time, 69120.0, 71680.0);\n    x = note(x, time, 80640.0, 83200.0);\n    x = note(x, time, 92160.0, 94720.0);\n    x = note(x, time, 100800.0, 103360.0);\n    x = note(x, time, 115200.0, 117760.0);\n    x = note(x, time, 123840.0, 126400.0);\n    x = note(x, time, 132480.0, 135040.0);\n    x = note(x, time, 144000.0, 146560.0);\n    r += play(x*0.25, time, 174.61412);\n\n    x = 0.0;\n    x = note(x, time, 34560.0, 37120.0);\n    x = note(x, time, 40320.0, 42880.0);\n    x = note(x, time, 43200.0, 45760.0);\n    x = note(x, time, 57600.0, 60160.0);\n    x = note(x, time, 97920.0, 100480.0);\n    x = note(x, time, 103680.0, 106240.0);\n    x = note(x, time, 106560.0, 109120.0);\n    x = note(x, time, 120960.0, 123520.0);\n    r += play(x*0.25, time, 220.0);\n    \n    return vec2(r);\n}","name":"","description":"","type":"sound"}]}