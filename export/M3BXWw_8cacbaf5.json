{"ver":"0.1","info":{"id":"M3BXWw","date":"1710677005","viewed":578,"name":"MathFire","username":"Numbfish","description":"math fire, https://www.desmos.com/calculator/0qdxktw9z1?lang=zh-CN","likes":47,"published":1,"flags":0,"usePreview":0,"tags":["math","fire"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float WaterDrop(vec2 uv) {\n    float x = 2.0 * uv.x - 1.0;\n    float y = 2.0 - 2.0 * uv.y;\n    return (x * x + y * y) * (x * x + y * y) - 2.0 * y * (x * x + y * y) + 3.0 * x * x;\n}\n\nfloat Fire(vec2 uv, float t) {\n    float x = uv.x;\n    float y = uv.y;\n    float o = pow(y, 1.7) * 0.1 * (sin(20.0 * y - 13.0 * t) + sin(36.5 * x + 2.0 * t));\n    float a = max(0.0, 1.0 - WaterDrop(uv));\n    return -WaterDrop(uv + vec2(a * o, 0.0));\n}\n\nvec4 BaseStyle(vec2 fragCoord, float scale, vec2 offset) {\n    // uv\n    float w = iResolution.x;\n    float h = iResolution.y;\n    vec2 uv = (fragCoord / iResolution.xy - offset - 0.5) / scale * vec2(w / h, 1) + 0.5;\n    float t = iTime;\n    // fire\n    float f = Fire(uv, t);\n    // color\n    vec4 ca = vec4(1.0, 0.08, 0.11, 1.0);\n    vec4 cb = vec4(1.0, 1.0, 0.6, 1.0);\n    vec4 c = mix(ca, cb, pow(f - 0.3, 2.0));\n    float a = clamp(f + 0.03, 0.0, 1.0);\n    return c * a;\n}\n\nvec4 CartoonStyle(vec2 fragCoord, float scale, vec2 offset) {\n    // uv\n    float w = iResolution.x;\n    float h = iResolution.y;\n    vec2 uv = (fragCoord / iResolution.xy - offset - 0.5) / scale * vec2(w / h, 1) + 0.5;\n    float t = iTime;\n    // fire\n    float l = 3.0;\n    float o = 0.33;\n    float f = floor((Fire(uv, t) + o) * l) / l;\n    // color\n    vec4 ca = vec4(1.0, 0.08, 0.11, 1.0);\n    vec4 cb = vec4(1.0, 1.0, 0.6, 1.0);\n    vec4 c = mix(ca, cb, pow(f - 0.3, 2.0));\n    float a = clamp(f + 0.03, 0.0, 1.0);\n    return c * a;\n}\n\nvec4 PixelStyle(vec2 fragCoord, float scale, vec2 offset) {\n    // uv\n    float w = iResolution.x;\n    float h = iResolution.y;\n    vec2 uv = (fragCoord / iResolution.xy - offset - 0.5) / scale * vec2(w / h, 1) + 0.5;\n    float s = 32.0;\n    uv = floor(uv * s) / s;\n    float fps = 12.0;\n    float t = floor(iTime * fps) / fps;\n    // fire\n    float l = 2.5;\n    float o = 0.4;\n    float f = floor((Fire(uv, t) + o) * l) / l;\n    // color\n    vec4 ca = vec4(1.0, 0.08, 0.11, 1.0);\n    vec4 cb = vec4(1.0, 1.0, 0.4, 1.0);\n    vec4 c = mix(ca, cb, pow(f - 0.3, 2.0));\n    float a = clamp(f + 0.03, 0.0, 1.0);\n    return c * a;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    fragColor =\n        BaseStyle(fragCoord, 0.8, vec2(-0.3, 0.0)) +\n        CartoonStyle(fragCoord, 0.8, vec2(0.0, 0.0)) +\n        PixelStyle(fragCoord, 0.8, vec2(0.3, 0.0));\n}\n","name":"Image","description":"","type":"image"}]}