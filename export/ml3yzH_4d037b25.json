{"ver":"0.1","info":{"id":"ml3yzH","date":"1698954759","viewed":27,"name":"ball and rotating flipper","username":"melissaran","description":"248b question","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["distancefield","sdf","rectangle","distance","box","rect","rounded","primitive"],"hasliked":0,"parentid":"dl3yzH","parentname":"ball and stationary flipper"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float fac = 0.1;\n\n\nfloat sdBox( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nfloat ball(in vec2 p){\n    return length(p)-fac;\n}\n\nvec2 rotatevec(in vec2 p, in float r, in float t){\n    float x = cos(r*t)*p.x + sin(r*t)*p.y;\n    float y = -sin(r*t)*p.x + cos(r*t)*p.y;\n    return vec2(x,y);\n}\n\nfloat sdf(in vec2 p){\n    vec2 mousePosition = (2.0 * iMouse.xy - iResolution.xy) / iResolution.y;\n    float t = mousePosition.x;\n    vec2 velocity = vec2(21.*fac,-0.12*fac);\n    vec2 startpoint = vec2(0.51*fac, 5.0*fac);\n    vec2 halfSize = vec2(10.*fac, 2.*fac);\n     \n    float rot = 3.14/3.;\n    //float rot = 0.;\n    \n    vec2 rotp = rotatevec(p,rot,t);\n    \n    float d = sdBox(rotp, halfSize);\n    \n    d = min(d, ball(p-(startpoint + velocity*t) ) );\n\n    return d;\n}\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    \n    vec2 position = (2.0 * fragCoord - iResolution.xy) / iResolution.y;\n\n\tfloat d = sdf(position);\n\n    vec3 color = vec3(1.0) - sign(d) * vec3(0.1, 0.4, 0.7);\n    color *= 1.0 - exp(-4.0 * abs(d));\n\tcolor *= 0.8 + 0.2 * cos(120.0 * d);\n    color = mix(color, vec3(1.0), 1.0 - smoothstep(0.0, 3.0, (abs(d) - 0.003) * iResolution.y));\n    fragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}