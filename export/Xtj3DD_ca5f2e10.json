{"ver":"0.1","info":{"id":"Xtj3DD","date":"1429142777","viewed":1973,"name":"Simple sky and sun","username":"invor","description":"Simple, artistically driven (i.e non-physical) 2D sky with sun. Click on canvas to set the sun position.\nJust a quick and dirty sketch trying to create a sky without texture input or atmospheric scattering computations.","likes":24,"published":1,"flags":0,"usePreview":0,"tags":["2d","sun","sky","magicnumbers"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"// Values are chosen and computations made based on \"what looks alright\".\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{ \n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    // Normalized screen space coordinates of the sun controlled by mouse\n    vec2 sunPosition = vec2(0.5);\n    sunPosition = (iMouse.xy/iResolution.xy);\n    \n    // Interpolate between midday and evening sky colors based on sun height\n    vec3 sky_horizonColor = mix(vec3(0.8,0.4,0.1),vec3(0.6,0.6,1.0),pow(sunPosition.y,0.3));\n    vec3 sky_Color = mix(vec3(0.1,0.1,0.3),vec3(0.2,0.2,0.7),pow(sunPosition.y,0.3));\n    \n    // Sky gradient\n    vec3 skyGradient = mix(sky_horizonColor,sky_Color,pow(uv.y,0.5));\n    \n    // Simple sun disc\n    vec3 sun_color = vec3(1.0,1.0,0.3);\n    vec3 sunDisc = sun_color *(length(fragCoord.xy - (sunPosition * iResolution.xy)) < (iResolution.x/50.0) ? 1.0 : 0.0);\n    \n    // Compute sun halo for horizon and zenit\n    float sunHaloFactor = (length(fragCoord.xy - sunPosition * iResolution.xy)-(iResolution.x/50.0))/length(iResolution.xy);\n    float sunHaloPoly = (1.0 - pow(sunHaloFactor,0.15+(1.0-sunPosition.y)*0.2)) * (1.0-uv.y);\n    float sunHaloExp = exp(-pow(sunHaloFactor,2.0)/(2.0*pow(0.02,2.0)));\n    // Interpolate sun halo\n    vec3 sunHalo = sun_color * mix(sunHaloPoly,sunHaloExp,pow(sunPosition.y,0.6));\n    \n    // Combine sky gradient, sun disc and sun halo for final color\n    fragColor = vec4(skyGradient+sunDisc+sunHalo,1.0);\n    \n    // Debugging\n    //fragColor = vec4(sunHalo,1.0);\n}","name":"","description":"","type":"image"}]}