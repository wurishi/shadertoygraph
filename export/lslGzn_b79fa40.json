{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"// Available as Mac Screensaver.  Code/Downloads here:\n// https://bitbucket.org/rallen/quasicrystalscreensaver/wiki/Home\n\nconst float PI = 3.1415926535897931;\nconst float ra = 0.0 / 3.0 * 2.0 * PI;\nconst float ga = 1.0 / 3.0 * 2.0 * PI;\nconst float ba = 2.0 / 3.0 * 2.0 * PI;\n\n// all of these can be played with\nconst float scale = 25.0;\nconst float tscale = 7.0;\nconst float xpixels = 3.0;\nconst float ypixels = 3.0;\nconst int symmetry = 7;\n\nfloat adj(float n, float m)\n{\n    return scale * (n / m);\n}\n\nvec2 point(vec2 src)\n{\n    return vec2(adj(src.x,ypixels), adj(src.y,ypixels));\n}\n\nvec2 wave( vec2 p, float th )\n{\n    float t = fract( iTime / tscale );\n    t *= 2.0 * PI;\n    vec2 d = vec2( cos( th ), sin( th ) );\n    d = d * cos( dot( d, p ) + t );\n    d = (d + vec2(1.0,1.0))*0.5;\n    return d;\n}\n\nvec3 combine( vec2 p )\n{\n    vec2 sum = vec2( 0.0 );\n    vec2 rdir = vec2( cos( ra ), sin( ra ) );\n    vec2 gdir = vec2( cos( ga ), sin( ga ) );\n    vec2 bdir = vec2( cos( ba ), sin( ba ) );\n    for (int i = 0; i < symmetry; ++i)\n    {\n        sum += wave( point( p ), float( i ) * PI / float( symmetry ) );\n    }\n    sum.x = mod(floor(sum.x), 2.0) == 0.0 ? fract(sum.x) : 1.0 - fract(sum.x);\n    sum.y = mod(floor(sum.y), 2.0) == 0.0 ? fract(sum.y) : 1.0 - fract(sum.y);\n    sum = 2.0*sum - vec2(1.0,1.0);\n    return vec3( dot( rdir, sum ), dot( gdir, sum ), dot( bdir, sum ) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 vUV = 2.0*(fragCoord.xy / iResolution.xy);\n    fragColor = vec4( combine( vec2( vUV.x * xpixels, vUV.y * ypixels ) ), 1.0 );\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lslGzn","date":"1361849405","viewed":324,"name":"QuasicrystalRiff","username":"rogerallen","description":"Took this from my Mac Screensaver.  Code/Downloads here:\nhttps://bitbucket.org/rallen/quasicrystalscreensaver/wiki/Home\n","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d","quasicrystal"],"hasliked":0,"parentid":"","parentname":""}}