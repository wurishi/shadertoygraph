{"ver":"0.1","info":{"id":"tdVcDV","date":"1603831856","viewed":60,"name":"Raycast experiment 4","username":"alexijohansen","description":"Raycast experiment, my math to rotate the camera angle is most likely off :D","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["raycast"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define CAMERATILT 82.5\n#define CAMERAHEIGHT 1.0\n#define STEPS 500\n#define STEPSIZE 150.0\n\nvec3 rotX(vec3 v, float a)\n{\n    v.y = (v.y * cos(a)) - (v.z * sin(a));\n    v.z = (v.y * sin(a)) + (v.z * cos(a));\n\n    return v;\n} \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord/iResolution.xy - 0.5);\n\n\tfloat angle = (3.14/360.0)*CAMERATILT;\n    \n    vec3 p = vec3(0.0,CAMERAHEIGHT,fract(iTime*0.1));\n    \n    vec3 ray = rotX(vec3(uv.x,uv.y,1.0), angle) / STEPSIZE;\n    \n    float c = 0.0;\n    \n\tfor( int i = 0; i < STEPS; i++ )\n    {\n        float height = texture( iChannel0, vec2(p.x,p.z)).x;\n\n        if (height > p.y)\n        {\n        \tc = height;\n            break;\n        }\n        \n        p += ray;\n    }\n\n    fragColor = vec4(c,c,c,1.0);\n}","name":"Image","description":"","type":"image"}]}