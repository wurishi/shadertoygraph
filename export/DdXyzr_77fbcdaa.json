{"ver":"0.1","info":{"id":"DdXyzr","date":"1688236640","viewed":93,"name":"Simple arrow - Distance","username":"Poisson","description":"Distance to a simple arrow, EXACT exterior, INEXACT interior","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["2d","raymarching","distancefield","sdf","raymarcher","distance","field","rotation","segment","arrow","arbitrary"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// arrow sdf function\n// a and b are the start and end points\n// le is the length of the head\n// ra is the thickness\n// sc is the sin and cos of the head angle\nfloat sdArrow(vec2 p, vec2 a, vec2 b, float le, float ra, vec2 sc) {\n    vec2 pa = p-a, ba = b-a;\n    // body\n    float h0 = clamp(dot(pa,ba)/dot(ba,ba), 0., 1.);\n    vec2 q0 = pa - ba*h0;\n      \n    vec2 d = normalize(ba); // rotation vector\n    // rotation\n    vec2 q = mat2(d.x,-d.y,\n                  d.y, d.x) * (b-p);\n    q.y = abs(q.y);\n    \n    // head\n    float h1 = clamp(dot(le*sc-q, sc)/le, 0., 1.);\n    vec2 q1 = q + sc*le*(h1 - 1.);\n    \n    return sqrt(min(dot(q0,q0),\n                    dot(q1,q1))) - ra;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 p = (2.*fragCoord - iResolution.xy) / iResolution.y;\n    vec2 m = (2.*iMouse.xy - iResolution.xy) / iResolution.y;\n\n    vec2 a = cos(iTime*.7 + vec2(0,1));\n\tvec2 b = cos(iTime*.7 + vec2(0,3) + 1.5);\n    \n    float le = .3;\n    float ra = .05+.05*sin(iTime);\n    vec2 sc = vec2(.707106); // sqrt(2)/2 \n\n\tfloat d = sdArrow(p, a, b, le, ra, sc);\n    \n\t// coloring\n    vec3 col = (d>0.) ? vec3(.9,.6,.3) : vec3(.55,.85,1);\n    col *= 1.-exp(-10.*abs(d));\n\tcol *= .8 + .2*cos(150.*d);\n\tcol = mix(col, vec3(1), smoothstep(.01,0.,abs(d)));\n\n    if (iMouse.z>0.) {\n        d = sdArrow(m, a, b, le, ra, sc);\n        col = mix(col, vec3(1,1,0), smoothstep(.01,0., abs(length(p-m)-abs(d))-.0025));\n        col = mix(col, vec3(1,1,0), smoothstep(.01,0., length(p-m)-.015));\n    }\n    \n\tfragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}