{"ver":"0.1","info":{"id":"MlV3zd","date":"1476320645","viewed":178,"name":"3D Tunnel Visualizer","username":"hopskotchrainbow","description":"Colorful Spectrum Visualizer","likes":0,"published":1,"flags":96,"usePreview":0,"tags":["raytracing","tunnel","music","projection","visualizer","soundcloud"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec4 projectXY(vec2 uv) {\n    vec3 dir = vec3(uv,1.0);\n    dir = normalize(dir);\n    for (float scl=0.025; scl<12.0; scl+=0.025) {\n        vec3 point = dir*scl;\n        float distance3 = length(point.xy);\n        float direction = atan(point.x, point.y);\n        direction = direction/radians(360.0) + 0.5;\n        float depth = 12.0-point.z/12.0;\n        vec2 visualizer1 = texture(iChannel0, vec2(direction, fract(depth))).rg;\n        vec2 visualizer2 = texture(iChannel0, vec2(1.0-direction, fract(depth))).ba;\n        if (distance3 >= 1.0-texture(iChannel0, vec2(direction, fract(depth))).a*0.1) {\n            return vec4(visualizer1, visualizer2);\n        }\n    }\n    return vec4(0.0,0.0,0.0,0.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec4 t = projectXY(uv*2.0-1.0);\n\tfragColor = vec4(t.ba,1.0,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4d2Gzw","filepath":"https://soundcloud.com/noah-lee/waterflame-dash","previewfilepath":"https://soundcloud.com/noah-lee/waterflame-dash","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy/iResolution.xy;\n    vec4 vizual = vec4(texture(iChannel0, vec2(uv.x,0.0)).r,\n                       texture(iChannel0, vec2(uv.x,0.25)).r,\n                       texture(iChannel0, vec2(uv.x,0.5)).r,\n                       texture(iChannel0, vec2(uv.x,0.75)).r);\n    vec2 pixSize = vec2(1.0/iResolution.x,1.0/iResolution.y);\n    fragColor = vizual;\n    if (fragCoord.y > 1.0) {\n        fragColor = texture(iChannel1, uv+vec2(0.0,-pixSize.y));\n    }\n}","name":"Buf A","description":"","type":"buffer"}]}