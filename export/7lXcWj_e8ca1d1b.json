{"ver":"0.1","info":{"id":"7lXcWj","date":"1648697300","viewed":55,"name":"SDF study","username":"Lumos320","description":"SDF with mouse interaction","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["sdf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 fixUV(in vec2 uv)\n{\n    return (2.*uv - iResolution.xy)/ min(iResolution.x,iResolution.y);\n}\n\n#define R 0.7\n\nfloat sdfCircle(in vec2 p, float r)\n{\n    //点在圆内则为负\n    return length(p)-r;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = fixUV(fragCoord);\n    float d = sdfCircle(uv,R);\n\n    //d为负数时sign=-1\n    vec3 color = 1. + sign(d) * vec3(.4,.5,.6);\n    //越接近圆的点越黑\n    color *= 1. - exp(-3.*abs(d));\n    //等高线：乘三角函数\n    color *= 0.8 + 0.2*sin(200.*abs(d));\n    //画圆框\n    color = mix(color,vec3(1.),smoothstep(0.005,0.001,abs(d)));\n\n    //鼠标按下\n    if(iMouse.z > 0.1){\n        vec2 mouse = fixUV(iMouse.xy);\n        float curDis = abs(sdfCircle(mouse,R));\n        //鼠标距离圆的圆\n        color = mix(color,vec3(1.,1.,0.),smoothstep(0.01,0.0,abs(length(uv-mouse)-curDis)));\n        //鼠标圆心\n        color = mix(color,vec3(1.,1.,0.),smoothstep(0.02,0.01,length(uv-mouse)));\n    }\n    \n\n\n    fragColor = vec4(color,1.);\n}","name":"Image","description":"","type":"image"}]}