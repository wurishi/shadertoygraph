{"ver":"0.1","info":{"id":"4lsBR2","date":"1512515837","viewed":126,"name":"Mystical Hole 2","username":"Del","description":"sin magic++\nAdded mouse click for invert","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["hole"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// um, some kind of mystical hole...?\n\nfloat glint(vec2 p)\n{\n    vec2 uv = p;\n    float speed = 0.68;\n    float linewidth = 1.38;\n    float grad = 3.0;\n    vec2 linepos = uv;\n    linepos.x = linepos.x - mod(iTime*speed,4.0)+2.0;\n    float y = linepos.x*grad;\n\tfloat s = smoothstep( y-linewidth, y, linepos.y) - smoothstep( y, y+linewidth, linepos.y); \n    return s;\n}\n\nfloat _glint(vec2 fragCoord )\n{\n    vec2 p = (-iResolution.xy + 2.0*fragCoord.xy) / iResolution.y;\n    float speed = iTime*0.2;\n \tfloat d = 1.0+p.x*0.25;\n    vec2 cst = vec2( cos(d+speed), sin(d+speed) );\n    float zoom = 1.0+(0.5*sin(iTime*0.675));\n    mat2 rot = zoom * mat2(cst.x,-cst.y,cst.y,cst.x);\n    float s = glint(p*rot*0.44);\n    return s;\n}\n\n\nvoid mainImage(out vec4 k, vec2 p)\n{\n    const vec4 col1 = vec4(0.27,.1,.1,1.0);\n    const vec4 col2 = vec4(0.9,0.5,0.5,1.0);\n    vec2 uv = p.xy / iResolution.xy;\n    float gl = _glint(p)*0.5;\n\n    float s = sin(iTime*0.1);\n    float s2 = 0.5+sin(iTime*1.8);\n    vec2 d = uv*(4.0+s*.3);\n    \n    d.x += sin(d.y + iTime*0.2)*1.2;\n    d.y += sin(d.x + iTime*0.2)*1.2;\t//-(s*0.5);\n    float v1=length(0.5-fract(d.xy))+0.90;\n\n    d = uv;\n    float v2=length(0.5-fract(d.xy));\n    v1 *= 1.0-v2*v1;\n    v1 = v1*v1*v1;\n    v1 *= 1.9+s2*0.2;\n    k = mix(col2,col1,v1)*(3.4+(s2*0.2));\n    \n    \n    k *= 1.0-(v2);\n    \n    // invert the hole on mouse click\n\tif (iMouse.z > 0.5)\n    {\n        k = clamp(k,vec4(0.0),vec4(1.0));\n        k = 1.0-k;\n        k = mix(col1,col2,k.r+v1*0.2);\n    }\n    \n    if (k.r<=0.5)\n    {\n        float m = 1.0-clamp(k.r,0.0,0.5);\n\t\tfloat f = mod( floor(12.0*uv.x) + floor(12.0*uv.y), 2.0);\n        float col = 0.3 + 0.2*f*1.0;\n        k.x = k.y = k.z = col*m;\n        k.z *= 2.0;\n    }\n    else\n    {\n\t\tfloat f = mod( floor(12.0*uv.x) + floor(12.0*uv.y), 2.0);\n        vec4 _col = 0.2*f*vec4(0.175);\n        k+=_col;\n    }\n    // glint\n    k *=vec4(1.0+gl);\n    \n    \n}","name":"Image","description":"","type":"image"}]}