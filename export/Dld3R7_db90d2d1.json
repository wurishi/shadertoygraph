{"ver":"0.1","info":{"id":"Dld3R7","date":"1682330061","viewed":103,"name":"Conway With Mouse Paint","username":"tjweldon","description":"Classic Conway","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["conway","gameoflife"],"hasliked":0,"parentid":"mtd3R4","parentname":"Droppin' Spears"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 rgba, in vec2 pos )\n{\n    vec2 uv = pos.xy/iResolution.xy;\n    rgba = texture(iChannel0, uv);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\nvoid mainImage( out vec4 rgba, in vec2 pos )\n{\n    vec2 uv = pos.xy/iResolution.xy;\n    vec3 rgb = texture(iChannel0, uv).rgb;\n    \n    float dist = distance(pos.xy, iMouse.xy);\n    \n    if (dist < 20. && int(dist) % 2 == 0)\n        rgb = vec3(1.);\n    \n    rgb.r = round(clamp(rgb.r, 0., 1.));\n    rgb.g = round(clamp(rgb.g, 0., 1.));\n    rgb.b = round(clamp(rgb.b, 0., 1.));\n    \n    rgba = vec4(rgb, 1.);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"vec2 uv(vec2 pos) {\n    return pos.xy/iResolution.xy;\n}\n\nvec3 colAt(vec2 pos) {\n    return texture(iChannel0, uv(pos)).rgb;\n}\n\nint aliveAt(vec2 pos) {\n    if (distance(colAt(pos), vec3(0.)) >= .5) return 1;\n    \n    return 0;\n}\n\nvec3 nextColAt(vec2 pos) {\n    vec3 rgb = colAt(pos);\n    vec2 x = vec2(0, 1.);\n    vec2 y = vec2(1., 0.);\n    \n    // cardinal\n    int n = aliveAt(pos+y);\n    int e = aliveAt(pos-x);\n    int s = aliveAt(pos-y);\n    int w = aliveAt(pos+x);\n    int cardinal = n + e + s + w;\n    \n    // diag\n    int ne = aliveAt(pos+y-x);\n    int se = aliveAt(pos-y-x);\n    int nw = aliveAt(pos+y+x);\n    int sw = aliveAt(pos-y+x);\n    int diag = ne + se + nw + sw;\n    \n    int localPop = diag + cardinal;\n    \n   // If it's alive\n    \n    if (aliveAt(pos) == 1) {\n        if (localPop > 3) {\n            return vec3(0.);\n        } else if (localPop < 2) {\n            return vec3(0.);\n        } else {\n            return vec3(1.);\n        }\n    } else {\n        if (localPop == 3) {\n            return vec3(1.);\n        } else {\n            return vec3(0.);\n        }\n    }\n}\n\nvoid mainImage( out vec4 rgba, in vec2 pos ) {\n    vec3 nextCol = nextColAt(pos);\n    nextCol.r = clamp(nextCol.r, 0., 1.);\n    nextCol.g = clamp(nextCol.g, 0., 1.);\n    nextCol.b = clamp(nextCol.b, 0., 1.);\n    \n    rgba = vec4(nextCol, 1.0);\n}","name":"Buffer B","description":"","type":"buffer"}]}