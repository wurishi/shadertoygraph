{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"video","id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"const float PI = 3.1415926535897932384626433832795;\nconst float PI180 = float(PI / 180.0);\n\nfloat sind(float a)\n{\n\treturn sin(a * PI180);\n}\n\nfloat cosd(float a)\n{\n\treturn cos(a * PI180);\n}\n\nfloat added(vec2 sh, float sa, float ca, vec2 c, float d)\n{\n\treturn 0.5 + 0.25 * cos((sh.x * sa + sh.y * ca + c.x) * d) + 0.25 * cos((sh.x * ca - sh.y * sa + c.y) * d);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\t// Halftone dot matrix shader\n\t// @author Tomek Augustyn 2010\n\t\n\t// Ported from my old PixelBender experiment\n\t// https://github.com/og2t/HiSlope/blob/master/src/hislope/pbk/fx/halftone/Halftone.pbk\n\t\n\t// Hold and drag horizontally to adjust the threshold\n\n\tfloat threshold = clamp(float(iMouse.x / iResolution.x) + 0.6, 0.0, 1.0);\n\n\tfloat ratio = iResolution.y / iResolution.x;\n\tfloat coordX = fragCoord.x / iResolution.x;\n\tfloat coordY = fragCoord.y / iResolution.x;\n\tvec2 dstCoord = vec2(coordX, coordY);\n\tvec2 srcCoord = vec2(coordX, coordY / ratio);\n\tvec2 rotationCenter = vec2(0.5, 0.5);\n\tvec2 shift = dstCoord - rotationCenter;\n\t\n\tfloat dotSize = 3.0;\n\tfloat angle = 45.0;\n\t\n\tfloat rasterPattern = added(shift, sind(angle), cosd(angle), rotationCenter, PI / dotSize * 680.0);\n\tvec4 srcPixel = texture(iChannel0, srcCoord);\n        \n\tfloat avg = 0.2125 * srcPixel.r + 0.7154 * srcPixel.g + 0.0721 * srcPixel.b;\n    float gray = (rasterPattern * threshold + avg - threshold) / (1.0 - threshold);\n\n\t// uncomment to see how the raster pattern looks \n    // gray = rasterPattern;\n    \t\n\tfragColor = vec4(gray, gray, gray, 1.0);\n}\n    ","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XslGRM","date":"1365882994","viewed":1801,"name":"Halftone","username":"atomek","description":"Classic halftone filter.","likes":38,"published":1,"flags":0,"usePreview":0,"tags":["simple","halftone"],"hasliked":0,"parentid":"","parentname":""}}