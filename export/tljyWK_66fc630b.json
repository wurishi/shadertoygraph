{"ver":"0.1","info":{"id":"tljyWK","date":"1595420370","viewed":92,"name":"RepOp","username":"fayolle","description":"Experiments with replication of implicits","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["repetition","sawtooth"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Create multiple copies of an object - https://iquilezles.org/articles/distfunctions\nvec2 opRepLim(in vec2 p, in float s, in vec2 lim)\n{\n    return p - s * clamp(round(p / s), -lim, lim);\n}\n\nvec2 opRepLim2(in vec2 p, in float s)\n{\n    return p - s * round(p / s);\n}\n\n// Create infinite copies of an object -  https://iquilezles.org/articles/distfunctions\nvec2 opRep(in vec2 p, in float s)\n{\n    return mod(p + s * 0.5, s) - s * 0.5;\n}\n\n// https://iquilezles.org/articles/distfunctions\nfloat opIntersection(float d1, float d2)\n{\n    return max(d1, d2);\n}\n\nvec2 opSawtooth1(in vec2 p, in float s)\n{\n    float t = 0.5 * s;\n    float pi = 3.14159;\n    vec2 q = pi * (p * 0.5 / t - 0.5);\n    return 2.0 * (0.5 - asin(sin(q + pi / 2.0)) / pi) - 1.0;\n}\n\nvec2 opSawtooth(in vec2 p, in float s)\n{\n    s = s * 0.5;\n    float pi = 3.14159;\n    return 0.5 * (1.0 + 2.0 / pi * asin(sin(pi * (p / s - 0.5))));\n}\n\n// https://iquilezles.org/articles/distfunctions\nfloat sdBox(in vec2 p, in vec2 b)\n{\n    vec2 q = abs(p) - b;\n    return min(max(q.x, q.y), 0.0) + length(max(q, 0.0));\n}\n\n//-----------------------------\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 p = (2.0 * fragCoord - iResolution.xy) / iResolution.y;\n\n    // sdf\n    float d;\n    if (p.x < 0.0)\n    {\n        vec2 q = p * 6.0 + vec2(5.0, 0.0);\n        //vec2 r = opRepLim(q,2.0,vec2(3.0,3.0)); //vec2(1.0,2.0)\n        vec2 r = opRepLim2(q, 2.0);\n        d = sdBox(r, vec2(0.4, 0.2)) - 0.1;\n    }\n    else\n    {\n        vec2 q = p * 6.0 - vec2(5.0, 0.0);\n        vec2 r = opSawtooth(q, 2.0); //opRep(q,2.0);\n        d = sdBox(r, vec2(0.4, 0.2)) - 0.1;\n        //d = opIntersection( d, sdBox( q, vec2(2.5,4.5) ) );\n    }\n\n    vec3 col = vec3(1.0) - sign(d) * vec3(0.1, 0.4, 0.7);\n    col *= 1.0 - exp(-2.0 * abs(d));\n    col *= 0.8 + 0.2 * cos(40.0 * d);\n    col = mix(col, vec3(1.0), 1.0 - smoothstep(0.0, 0.05, abs(d)));\n\n    col *= smoothstep(0.005, 0.010, abs(p.x));\n\n    fragColor = vec4(col, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}