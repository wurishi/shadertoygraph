{"ver":"0.1","info":{"id":"tdcGzs","date":"1569146940","viewed":306,"name":"Energy Bubble","username":"j0","description":"Started as a snow effect shader and now we're here :]","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["snow"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define HARDNESS 25.\n#define AMOUNT 90\n#define MAX_DISTANCE 20.\n#define SPEED 0.2\n\n//https://iquilezles.org/articles/smin\nfloat smin( float a, float b, float k ){\n    float res = exp2( -k*a ) + exp2( -k*b );\n    return -log2( res )/k;\n}\n\nfloat sdCircle(vec2 uv, vec2 pos, float radius){\n    return length(uv-pos) - radius;\n}\n\nfloat sdLine(vec2 uv, vec2 start, vec2 end){\n    return 0.;\n}\n\nfloat N21(vec2 p){\n    p = fract(p*vec2(233.34, 851.73));\n    p += dot(p, p+23.45);\n    return fract(p.x*p.y);\n}\n\nvec4 N24(vec2 p){\n \tfloat x = N21(p);\n    float y = N21(vec2(x, p.x));\n    return vec4(x, y, N21(vec2(y, x)), N21(vec2(x, y)));\n}\n\nfloat Star(vec2 uv, float dist, vec2 id){\n    \n    vec4 rand = N24(id);\n    \n    float progress = fract(-iTime*SPEED + rand.z);\n    \n    vec2 dir = 2.*(normalize(rand.xy)-0.5);\n    \n    rand.w = clamp((rand.w-0.5)*999., -1., 1.);\n    dir *= rand.w;\n    \n    return smin(dist, sdCircle(uv, dir * progress * MAX_DISTANCE, 0.01)/(progress+0.7), 9.);\n}\n\nfloat Graph(vec2 uv){\n    \n    uv *= mix(length(uv), 1., 0.8+cos(iTime*10.)*0.01);\n    \n    float dist = sdCircle(uv, vec2(0., 0.), 0.4);\n    \n    dist = Star(uv, dist, vec2(1., 1.));\n    \n    for(int s = 1; s < AMOUNT; ++s)\n        dist = Star(uv, dist, vec2(-1., s));\n    \n    dist *= HARDNESS;\n    \n    dist = max(dist, 0.);\n    dist = 1./(dist+0.001);\n    dist *= length(uv);\n    \n    return dist;\n    \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = 2.*(fragCoord-0.5*iResolution.xy)/iResolution.y;\n    \n    float angle = iTime * 0.4;\n    float sinA = sin(angle);\n    float cosA = cos(angle);\n    mat2 rot = mat2(cosA, -sinA, sinA, cosA);\n    uv *= rot;\n\n    vec3 col = vec3(0);\n    \n    uv *= 2. + sin(iTime*0.876)*0.5;\n    \n    float m = Graph(uv);\n    \n    vec3 tint = vec3(\n        \t\t\t\tsin(iTime*1.19+9684.927)*0.5+0.5,\n        \t\t\t\tsin(iTime*1.18+968.927)*0.5+0.5,\n        \t\t\t\tsin(iTime*1.17+96.927)*0.5+0.5\n    \t\t\t\t);\n    tint = mix(vec3(0., 1., 1.), tint, 0.5);\n    \n    col += m*mix(tint, vec3(1., 1., 1.), m);\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}