{"ver":"0.1","info":{"id":"tdScWV","date":"1587323645","viewed":173,"name":"Metaobjects","username":"codecontemplator","description":"Some more experiments","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["metaballs"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n\n// ref: https://iquilezles.org/articles/smin\nfloat smin( float a, float b, float k )\n{\n    float res = exp2( -k*a ) + exp2( -k*b );\n    return -log2( res )/k;\n}\n\nfloat opSmoothSubtraction( float d1, float d2, float k ) {\n    float h = clamp( 0.5 - 0.5*(d2+d1)/k, 0.0, 1.0 );\n    return mix( d2, -d1, h ) + k*h*(1.0-h); }\n\nvoid pR(inout vec2 p, float a) {\n    p = cos(a)*p + sin(a)*vec2(p.y, -p.x);\n}\n    \nfloat circle( vec2 p, float r) \n{\n    return length(p) - r;\n}\n\nfloat sdUnevenCapsule( vec2 p, float r1, float r2, float h )\n{\n    p.x = abs(p.x);\n    float b = (r1-r2)/h;\n    float a = sqrt(1.0-b*b);\n    float k = dot(p,vec2(-b,a));\n    if( k < 0.0 ) return length(p) - r1;\n    if( k > a*h ) return length(p-vec2(0.0,h)) - r2;\n    return dot(p, vec2(a,b) ) - r1;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{  \n    vec2 p = fragCoord / iResolution.xy * 2.0 - 1.0;\n    p.x *= iResolution.x / iResolution.y;\n      \n    p *= 0.75;\n    float time = iTime;\n    vec2 p1 = p;\n    pR(p1, time);\n    \n    p1 += vec2(0.2*sin(time), -0.25*cos(time));\n    time*=sqrt(0.5);\n    vec2 p2 = p + vec2(0.25*sin(time+2.0), 0.1*cos(time));\n    time*=sqrt(0.75);\n    vec2 p3 = p + vec2(0.1*sin(time), 0.3*cos(time));\n        \n    float d1 = sdUnevenCapsule(p1, .15, 0.25, 0.3);\n    float d2 = circle(p2, .15);\n    float d3 = circle(p3, .25);\n    float d = d1;\n    d = smin(d, d3, 10.0);\n    d = opSmoothSubtraction(d2, d, 0.4);\n        \n    fragColor = mix(vec4(0.5, 0.8, 0.3, 1), vec4(0.5, 0.2, 0.7, 1.0), 1.0);\n    \n    fragColor += pow(abs(sin(d*2.0)), 0.25 + abs(sin(iTime*0.1)));\n}","name":"Image","description":"","type":"image"}]}