{"ver":"0.1","info":{"id":"XdBBzW","date":"1499628386","viewed":250,"name":"Line with moving circle","username":"Abvadabra","description":"Learning how to do basic shapes in glsl","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["line"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define thickness 0.02\n#define iLine vec4(0.2, 0.2, 0.8, 0.8)\n\nfloat getPoint(vec4 line, vec2 position){\n\tfloat crotch = mod(iTime / 2., 1.);\n\tvec2 crPoint = line.xy + crotch * (line.zw - line.xy);\n\tfloat cd = length(crPoint - position);\n    float t = thickness * 3.;\n\tfloat f = (cd * cd) / (t * t);\n\tfloat cf = (1. - step(thickness * 4., cd)) * smoothstep(0.6, 0.85, 1. - f);\n\treturn cf;\n}\n\nfloat getLine(vec4 line, vec2 position){\n\tfloat a = length(line.xy - position);\n\tfloat b = length(line.zw - position);\n\tfloat c = length(line.zw - line.xy);\n\tfloat p = .5 * (a + b + c);\n\tfloat h = (2. / c) * sqrt(p * (p - a) * (p - b) * (p - c));\n\tfloat l = 1. - step(thickness, h);\n\tfloat f = 1. - (h * h) / (thickness * thickness);\n\n\tfloat lineColor = (abs(sin(iTime)) * .5 + .5) * smoothstep(0., 1., f) * l;\n\n\tvec2 center = (line.xy + line.zw) / 2.;\n\tfloat centerF = length(position - center);\n\tfloat centerLimit = c / 2.;\n\tfloat fadeout = centerLimit * .9;\n\tfloat limiter = 1. - step(centerLimit, centerF);\n\tfloat fade = step(fadeout, centerF);\n\tlimiter *= 1. - fade * smoothstep(0.0, 1., (centerF - fadeout) / (centerLimit - fadeout));\n\n\treturn lineColor * limiter;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 position = (fragCoord.xy / iResolution.xy);\n\tfloat r = iResolution.x / iResolution.y;\n\tposition.x *= r;\n\tvec4 l = iLine;\n\tl.xz *= r;\n\n\tvec4 color = vec4(1.);\n\tvec4 result = getLine(l, position) * color;\n\tresult = max(result, getPoint(l, position) * color);\n\n\tfragColor = result;\n}","name":"Image","description":"","type":"image"}]}