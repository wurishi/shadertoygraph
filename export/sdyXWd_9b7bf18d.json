{"ver":"0.1","info":{"id":"sdyXWd","date":"1635499727","viewed":125,"name":"Octahedral mapping","username":"guitio2002","description":"Octahedral mapping.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["mapping","octahedral"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGzn","filepath":"/media/a/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","previewfilepath":"/media/ap/585f9546c092f53ded45332b343144396c0b2d70d9965f585ebc172080d8aa58.jpg","type":"cubemap","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// https://jcgt.org/published/0003/02/01/\n\n// Returns Â±1\nvec2 signNotZero(vec2 v)\n{\n    return vec2((v.x >= 0.0) ? +1.0 : -1.0, (v.y >= 0.0) ? +1.0 : -1.0);\n}\n\nvec3 oct_to_float32x3(vec2 e)\n{\n    vec3 v = vec3(e.xy, 1.0 - abs(e.x) - abs(e.y));\n    if (v.z < 0.0) v.xy = (1.0 - abs(v.yx)) * signNotZero(v.xy);\n    return normalize(v);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = fragCoord / iResolution.xy;\n\n    vec3 dir = oct_to_float32x3(2.0 * uv - 1.0);\n    vec3 col = texture(iChannel0, dir).xyz;\n\n    vec3 normal = normalize(2.0 * vec3(sin(iTime), cos(iTime), 0.0) - 1.0);\n    float n_dot_l = dot(dir, normal);\n    if (n_dot_l > 0.0) col.yz *= 0.0;\n\n    vec2 f = fract(uv * 8.0);\n    f = min(f, 1.0 - f);\n    float t = min(f.x, f.y * iResolution.y / iResolution.x);\n    if (t < 0.01) col = vec3(1.0, 1.0, 0.0);\n\n    fragColor = vec4(col, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}