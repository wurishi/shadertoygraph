{"ver":"0.1","info":{"id":"NlKcR3","date":"1661924177","viewed":231,"name":"old-school bump mapping","username":"AmazingThew","description":"\"Emboss\" style bump mapping, sometimes used in games before programmable shaders were available.\nIf the UV offsets are calculated per-vertex on the CPU side, this effect could be implemented in a fixed-function pipeline with multi-texturing.","likes":6,"published":1,"flags":0,"usePreview":1,"tags":["heightmap","emboss","bumpmap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define INTENSITY 5.0\n\n// For textures with sharper details (e.g. anything other than Pebbles),\n// values closer to 1 will look nicer:\n#define DISTANCE_MOD 1.006\n\n// Uncomment to see lighting applied to the base texture:\n//#define MODULATE_TEXTURE\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord - .5*iResolution.xy) / iResolution.y;\n    vec2 mouse = (iMouse.xy - .5*iResolution.xy) / iResolution.y;\n\n    vec2 lightPosition = iMouse.z > 0.0 ? mouse : vec2(cos(iTime), sin(iTime) * 0.2 + 0.7);\n    vec2 offsetUv = (uv - lightPosition) * DISTANCE_MOD + lightPosition;\n    \n    float a = texture(iChannel0, uv).x;\n    float b = texture(iChannel0, offsetUv).x;\n    float difference = (b - a) * INTENSITY;\n    \n    float lighting = difference * 0.5 + 0.5;\n    fragColor = vec4(vec3(lighting), 1.0);\n    \n    #ifdef MODULATE_TEXTURE\n        fragColor = vec4(texture(iChannel0, uv).rgb + difference, 1.0);\n    #endif\n}","name":"Image","description":"","type":"image"}]}