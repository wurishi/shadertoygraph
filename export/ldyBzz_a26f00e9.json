{"ver":"0.1","info":{"id":"ldyBzz","date":"1527431568","viewed":203,"name":"Very fast 2D Mist / fog","username":"Lovax","description":".","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["mist"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define DPI 6.28318530718\n\n// Amplitude coefficients\n#define CA 0.31 \n#define CB 0.3\n#define CC 0.2\n#define CD 0.10\n\n// Phase modulating wave\nfloat wave(float x, float t) {\n    return CA*sin(1.8*x-(t*0.2))\n        + CB*sin(2.0*x+(t*0.4))\n        + CC*sin(2.8*x-t)\n        + CD*sin(5.6*x-t);\n}\n\n// One horizontal wave, one diagonal bl - tr wave summed\nfloat s(float x, float t) {\n    float w = wave(x * DPI, t);\n \t// simplified (w/(2*coeff sum) + (w+x)/(2*(coeff sum + 1)) + 1)/2.0;\n    return 0.4520302392*w + 0.1773049646*x + 0.5;\n}\n\n\n// Smooth the function to plot on the y axis\nfloat ssmooth(vec2 uv, float t) {\n    float y = s(uv.x, t);\n    return smoothstep( y-0.8, y, uv.y) - \n          smoothstep( y, y+0.8, uv.y);\n}\n\n// Rotation matrix\nmat2 rot(float alpha) {\n    float ca = cos(alpha);\n    float sa = sin(alpha);\n\treturn mat2(ca, -sa,\n                sa, ca);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    vec4 tex = texture(iChannel0, uv);\n    uv = rot(DPI*iTime/100.0) * (uv - vec2(0.5)) + vec2(0.5);\n    float c = ssmooth(uv, iTime);\n    //c = clamp(c, 0.0,0.3)+0.5;\n    vec4 fog = vec4(c,c-0.05,c-0.05,1.0);\n    fragColor = mix(tex, fog, 0.6);\n}","name":"Image","description":"","type":"image"}]}