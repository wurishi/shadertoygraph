{"ver":"0.1","info":{"id":"lft3zS","date":"1711869811","viewed":36,"name":"halftone experiment 28595595","username":"HaleyHalcyon","description":"rrrreeeeer","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["rrerrrrr"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SQRT2 1.41421356\n#define HALFPI 1.5707963\n#define ROT(x) mat2x2(cos(vec4(0, 1, -1, 0) * HALFPI + x))\n\n#define HEX(x) vec3((ivec3(x) >> ivec3(16, 8, 0)) & 255) / 255.\n\nfloat distGrid(vec2 uv) {\n    return pow( // visual adjustment near t = 0 and 1\n        length(uv - round(uv)) * SQRT2,\n        1.5\n    );\n}\n\nvec2 distGrids(vec2 uv) {\n    return vec2(\n        distGrid(uv + vec2(0.5, 0)),\n        1. - distGrid(uv + vec2(0, 0.5))\n    );\n}\n\nfloat halftone(vec2 uv, float lightness) {\n    \n    vec2 grids = distGrids(uv);\n    float grid = mix(\n        grids.x, grids.y,\n        smoothstep(0.3, 0.7, lightness)\n    );\n    float w = max(0.1, fwidth(grid) * .75);\n    // avoid artifacts close to 0 and 1 I couldnâ€™t avoid with fwidth...\n    if (abs(lightness - 0.5) >= 0.498) {\n        return step(0.5, lightness);\n    }\n    return smoothstep(-w, +w, lightness - grid);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float t = fract(iTime / 32.0);\n    vec2 uv = (2. * fragCoord - iResolution.xy) / length(iResolution.xy);\n    float r = log(0.17 + length(uv));\n    //float a = atan(uv.y, uv.x) / (4. * HALFPI);\n    \n    const float HILLSPERLOOP = 2.;\n    float spiral = (\n        + HILLSPERLOOP * t\n        + 0.7 * r\n    );\n    vec2 uvs = uv * 24.0 * ROT(\n        0.3 * (\n            (floor(spiral * 2.) - 2. * HILLSPERLOOP * t) * (-1. + 2. * floor(mod(spiral * 2., 2.)))\n        )\n    );\n    float halftoned = halftone(uvs, -.05 + 1.1 * abs(1. - fract(spiral) * 2.));\n    vec3 col = mix(\n        mix(\n            HEX(0x009BE8),\n            HEX(0xfff100),\n            step(1., mod(spiral + 8., 2.))\n        ), mix(\n            HEX(0xEB0072),\n            HEX(0x010a31),\n            step(1., mod(spiral + 7.5, 2.))\n        ), halftoned\n    );\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}