{"ver":"0.1","info":{"id":"XlVXD3","date":"1486259425","viewed":223,"name":"Turner book","username":"Loeizd","description":"turner gradient from the book of shaders","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["turner"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float dExp (float x, float a){\n\n  float epsilon = 0.00001;\n  float min_param_a = 0.0 + epsilon;\n  float max_param_a = 1.0 - epsilon;\n  a = min(max_param_a, max(min_param_a, a)); \n\n  float y = 0.0;\n  if (0.5 >= x){\n    y = (pow(2.0*x, 1.0-a))/2.0;\n  } else {\n    y = 1.0 - (pow(2.0*(1.0-x), 1.0-a))/2.0;\n  }\n  return y;\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    vec4 c1,c2,c3,c4,c5,c6,c7;\n    c1 = vec4(0.262,0.387,0.723,1.0);//vec4(0.384,0.482,0.729,1.0); //blue sky\n    c2 = vec4(1.000,0.996,0.937,1.0);//vec4(0.922,0.843,0.675,1.0); //cloud\n    c3 = vec4(1.000,0.907,0.270,1.0); //sun\n    c4 = vec4(0.945,0.741,0.514,1.0); //orange cloud\n    c5 = vec4(0.800,0.400,0.169,1.0); //extreme could\n    c6 = vec4(0.345,0.325,0.451,1.0); //dark water\n    c7 = vec4(0.898,0.816,0.722,1.0);//vec4(0.643,0.537,0.431,1.0); //dark cloud\n    \n\n\n    \n    //reflection\n    float ref = fract(abs((uv.y-0.5)*1.2+0.4)); //TODO: stretch the reflection\n    //color = vec4(ref, ref, ref, ref);\n    \n        // sun\n    vec2 coord = vec2(0.78, 0.4);\n    vec4 color = vec4(abs(coord.x-uv.x),abs(coord.y-uv.y), 0.0, 0.0);\n    float comp = (1.0-color.x)*(1.0-color.y);\n    \n    vec4 sun = mix(c5, c3, pow(dExp(comp,0.4), 3.0));\n    \n    vec2 coord2 = vec2(0.9, 0.5);\n    vec4 color2 = vec4(abs(coord2.x-uv.x),abs(coord2.y-uv.y), 0.0, 0.0);\n    float comp2 = (1.0-color2.x)*(1.0-color2.y);\n    \n        //cloud band\n    float cb = clamp(abs(ref*7.0-2.5+sin(uv.x*-5.0)), 0.0, 1.0);\n    vec4 test = vec4(cb,cb,cb,cb);\n    \n    \n    //sky gradient\n    float sky = clamp(-abs(pow(ref*3.0-1.5+sin(uv.x*-5.0)*0.2, 1.0))+1.5, 0.0, 1.0);\n    float sea = clamp(floor(uv.y+0.8), 0.6, 1.0);\n    vec4 skyC = mix(c1*sea, c2, sky);//mix(mix(c1, c2, sky),mix(c1, c2, sky)*c6,sea);\n    \n    // mix sky and cloud band\n    skyC = mix(c7,skyC, cb);\n\n    // final mix sky and sun\n    vec4 final = mix(skyC, sun, dExp(comp2, 0.1));\n        \n\tfragColor = final;\n}","name":"Image","description":"","type":"image"}]}