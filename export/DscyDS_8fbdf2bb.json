{"ver":"0.1","info":{"id":"DscyDS","date":"1695387343","viewed":56,"name":"sky and sun","username":"tomcat7479","description":"sky and sun","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["renderingsky"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 fix(in vec2 fragCoord) {\n    return (2.0 * fragCoord.xy - iResolution.xy) / min(iResolution.x, iResolution.y);\n}\n\nmat3 setCamera(vec3 lookAt, vec3 ro, float theta) {\n    vec3 z = normalize(lookAt - ro);\n    vec3 y_dir = vec3(sin(theta), cos(theta), 0.0);\n    vec3 x = normalize(cross(z, y_dir));\n    vec3 y = normalize(cross(x, z));\n    return mat3(x, y, z);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fix(fragCoord);\n\n    float foucs_distance = 2.0;\n    vec3 lookAt = vec3(0.0, 4.0, 0.0);\n    vec3 ro = vec3(10.0 * sin(0.5 * iTime), 1.0, 10.0 * cos(0.5 * iTime));\n    mat3 camera = setCamera(lookAt, ro, 0.0);\n    vec3 rd = normalize(camera * vec3(uv, foucs_distance));\n\n    vec3 skyBaseColor = vec3(0.3, 0.54, 0.85);\n    vec3 belowColor = vec3(0.75, 0.79, 0.87); // 灰白色基底\n\n    vec3 color =  skyBaseColor - rd.y * rd.y * 0.5;\n \n    color = mix(color, belowColor * 0.91, pow(1.0 - max(rd.y, 0.0), 5.0));\n\n    vec3 sunLight = normalize(vec3(-1.0, 0.4, -1.0));  \n    float sundot = clamp(dot(rd, sunLight), 0.0, 1.0);\n\n    color += 0.25 * vec3(1.0, 0.7, 0.4) * pow(sundot, 5.0);\n    color += 0.25 * vec3(1.0, 0.8, 0.6) * pow(sundot, 64.0);\n    color += 0.25 * vec3(1.0, 0.8, 0.6) * pow(sundot, 512.0);\n\n    color = mix(color, 0.68 * vec3(0.4, 0.65, 1.0), pow(1.0 - max(rd.y, 0.0), 16.0));\n\n\n    fragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}