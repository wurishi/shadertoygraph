{"ver":"0.1","info":{"id":"4llXDX","date":"1440198538","viewed":386,"name":"Spinning Doodle","username":"haxiomic","description":"response to reddit thread https://www.reddit.com/r/programming/comments/3hpnhv/that_mesmerizing_thing_in_18_lines_of_pure/","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["2d","sine","roation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"#define PI 3.14159265359\n#define time iTime\n\nfloat arc(in float R, in float angle, in float start, in float end, in float motionBlur){\n    float e = 0.0025;\n    float ea = 0.0015 * (1. + motionBlur);\n\n    float f = smoothstep(start-e, start+e, R) * (1.-smoothstep(end-e, end+e, R));\n    f *= smoothstep(0.25-ea, 0.25+ea, angle);\n    f *= 1. - smoothstep(0.75-ea, 0.75+ea, angle);\n    return 1. - f;\n}\n\nvoid rot(inout vec2 r, in float theta){\n    mat2 rot = mat2(\n        cos(theta), -sin(theta), \n        sin(theta), cos(theta)\n    );\n    r *= rot;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = vec4(vec3(1.0), 1.);\n\tvec2 uv = fragCoord.xy/iResolution.xy;\n\n    vec2 r = uv - vec2(.5);\n    r.x *= iResolution.x/iResolution.y;\n    rot(r, -PI*.5);\n   \n    const float width = 0.02;\n    const float gap = 0.003;\n    const float count = 20.0;\n    const float motionBlurStrength = 0.005;\n    const float chromaticAbberationX = 0.01;\n    \n    float speed = 0.25;\n    float v = sin(time*speed + PI)*0.8;\n    float v2 = cos(time*speed + PI*1.0)*.5 + .5;\n    float theta = time*speed + v;\n\t\n    for(int c = 0; c < 3; c++){\n        \n    \tvec2 r2 = r;\n        r2.y += float(c - 1) * chromaticAbberationX * length(r);\n        \n        for(float i = 0.0; i < count; i++){\n            float j = i * (width+gap);\n            rot(r2, theta + float(c-1)*i*0.00035*v2);\n            float angle = (atan(r2.y, r2.x) + PI)/(2.*PI);\n           \tfloat R = length(r2);\n            R += sin(angle*30.0) * 0.01;\n            float f = arc(R, angle, 0.0 + j, width + j, i*i*i*motionBlurStrength*v2);\n            fragColor[c] *= f;\n        }\n        \n    }\n    \n    \n}","name":"","description":"","type":"image"}]}