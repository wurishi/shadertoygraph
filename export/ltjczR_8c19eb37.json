{"ver":"0.1","info":{"id":"ltjczR","date":"1507237751","viewed":149,"name":"Stroboscope","username":"ervanalb","description":"It flashes and displays the period in ms","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["useful"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//   A\n// F   B\n//   G\n// E   C\n//   D   \n\nint ch(in float a) {\n    if (a<0.5) return 0x3f;\n    if (a<1.5) return 0x06;\n    if (a<2.5) return 0x5b;\n    if (a<3.5) return 0x4f;\n    if (a<4.5) return 0x66;\n    if (a<5.5) return 0x6d;\n    if (a<6.5) return 0x7d;\n    if (a<7.5) return 0x27;\n    if (a<8.5) return 0x7f;\n    if (a<9.5) return 0x6f;\n    return 0x00;\n}\n\nfloat drawDigit(in float digit, in vec2 pos) {\n    vec4 bb[7];\n    bb[0] = vec4(0.0, 0.9, 1.0, 1.0);\n    bb[1] = vec4(0.9, 0.5, 1.0, 1.0);\n    bb[2] = vec4(0.9, 0.0, 1.0, 0.5);\n    bb[3] = vec4(0.0, 0.0, 1.0, 0.1);\n    bb[4] = vec4(0.0, 0.0, 0.1, 0.5);\n    bb[5] = vec4(0.0, 0.5, 0.1, 1.0);\n    bb[6] = vec4(0.0, 0.45, 1.0, 0.55);\n    \n    float total = 0.;\n    for (int i=0; i<7; i++) {\n    \tvec2 inBox = step(bb[i].xy, pos) - step(bb[i].zw, pos);\n    \ttotal += inBox.x * inBox.y * float(ch(digit) & (1 << i));\n    }\n    return min(total, 1.);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    float freq = 30. * iMouse.x / iResolution.x;\n    float t = mod((iTime * freq) , 1.);\n    float a = step(0., t) - step(0.03 * freq, t);\n    float text = 0.;\n    float ms = min(9999., 1000. / freq);\n    text += drawDigit(floor(ms / 1000.), uv / vec2(0.05, 0.1) - vec2(1.2, 1.));\n    ms = mod(ms, 1000.);\n    text += drawDigit(floor(ms / 100.), uv / vec2(0.05, 0.1) - vec2(2.4, 1.));\n    ms = mod(ms, 100.);\n    text += drawDigit(floor(ms / 10.), uv / vec2(0.05, 0.1) - vec2(3.6, 1.));\n    ms = mod(ms, 10.);\n    text += drawDigit(floor(ms), uv / vec2(0.05, 0.1) - vec2(4.8, 1.));\n    a *= float(iMouse.z <= 0.);\n\tfragColor = vec4(a, a, min(text + a, 1.), 1.);\n}","name":"Image","description":"","type":"image"}]}