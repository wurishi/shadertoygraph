{"ver":"0.1","info":{"id":"NtS3zy","date":"1624094094","viewed":233,"name":"average of x last random values","username":"FabriceNeyret2","description":"average of the x last random values.","likes":10,"published":3,"flags":32,"usePreview":0,"tags":["hash","rand","statistics"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 O, vec2 U )\n{\n    vec2 R = iResolution.xy;\n    O = vec4( T(vec2(U.x,8)) > U.y/R.y ); // display curve in row 8\n    \n    if ( int(U.y) == int(R.y)/2 ) O = vec4(O.r>0., 0, O.r<1., 0); // y=0 axis\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define hash(p)  fract(sin( (p)* 78.233 ) * 43758.5453 )\n\nfloat M(float l) { // average of stored random values #0..#int(l)\n    float s = 0.;\n    for( float i=0.; i < l; i++ )\n        s += T(vec2(i,0));\n    return s/ceil(l);\n}\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O.x = U.y == .5\n          ? U.x == .5   ? hash(iTime)     // row 0: history of random values\n                        : T(U-vec2(1,0))  //     compute first, then scroll\n          : U.y == 8.5  ? M(U.x)          // row 8: average values #0..x\n                        : 0.;             //     NB: 8 for better parallelism\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define T(U) texelFetch( iChannel0, ivec2(U), 0).x","name":"Common","description":"","type":"common"}]}