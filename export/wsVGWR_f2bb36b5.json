{"ver":"0.1","info":{"id":"wsVGWR","date":"1570098611","viewed":115,"name":"Mandelbrot Trip","username":"crocidb","description":"Just a test with Mandelbrot set.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["fractal","mandelbrot"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define MAX_STEPS  200\n\nfloat mandelbrot(vec2 c)\n{\n    int i = 0;\n    vec2 z = vec2(0.0);\n    \n    float r = 20.0;\n    float r2 = r * r;\n    vec2 zp = vec2(0.0, 0.0);\n    \n    for (i = 0; i < MAX_STEPS; i++)\n    {\n        zp = z;\n        z = vec2(\n            z.x * z.x - z.y * z.y,\n            2.1 * z.x * z.y);\n        \n        z += c;\n        \n        if (dot(z, zp) > r2) break;\n    }\n    \n    float dist = length(z);\n    float fractIter = (dist - r) / (r2 - r);\n    fractIter = log(dist) / log(r) - 1.;\n    float frac = float(i);\n    \n    float ret = frac / float(MAX_STEPS);\n    \n    ret *= smoothstep(4.0, 0.0, fractIter);\n    ret = pow(ret, .6);\n    \n    return ret;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord.xy - .5 * iResolution.xy) / iResolution.y;\n    \n    float angularspeed = 8.4 * pow(length(uv * .4) * 0.5, 0.7) + sin(iTime * .7) * 2.0;\n    float cas = cos(angularspeed);\n    float sas = sin(angularspeed);\n    uv = mat2(vec2(cas, -sas), vec2(sas, cas)) * (uv);\n  \tuv = abs(uv);\n    \n    float bump = sin(length(uv) * 15. - iTime * 10.0) * .5 + .5;\n    uv += uv * bump * .2;\n\n    vec2 uv2 = vec2(-1.404899, 0.0001) + uv * (pow(4., -mod(iTime * 2.0, 20.0) * .5) * 80.);\n    vec2 uv3 = vec2(-1.404899, 0.0001) + uv * (pow(4., -mod(iTime * 2.0 + 10., 20.0) * .5) * 80.);\n    \n    float m1 = mandelbrot(uv2);\n    float m2 = mandelbrot(uv3);\n\n    float fractal = max(\n        mix(0., m1, sin(iTime * 6.0) * .4 + .6),\n    \tmix(0., m2, sin(iTime * 6.0 + 3.0) * .4 + .6));\n    \n    vec3 col = vec3(\n        sin(fractal * 2.5) * .5 + .5, \n        sin(fractal * 1.3) * .5 + .5, \n        sin(fractal * 6.1) * .5 + .5) * (1.1 - length(uv));\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}