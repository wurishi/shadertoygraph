{"ver":"0.1","info":{"id":"ftlBWS","date":"1651397265","viewed":68,"name":"some flowy stuff","username":"Masterchef365","description":"yea","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["flow"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec4 s = texture(iChannel0, uv);\n    vec3 color = vec3(s.rgb);\n \n \n     \n    // Output to screen\n    fragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    if (iFrame == 0) {\n        //uv *= iMouse.xy;\n        vec2 rand_dir = vec2(rand(uv * 3.), rand(uv)) * 2. - 1.;\n        \n        fragColor = vec4(\n            normalize(rand_dir),\n            rand(uv * 4.) / 2.,\n            0\n        );\n        return;\n    }\n    \n    const int sz = 1;\n    const int width = sz * 2 + 1;\n    \n    vec4 best_s = texture(iChannel0, uv);\n    float best_score = 0.;\n    float best_sniff = 0.;\n    vec2 best_dir = vec2(best_s.xy);\n    \n    float total_slime = 0.;\n    \n    for (int i = -sz; i <= sz; i++) {\n        for (int j = -sz; j <= sz; j++) {\n            vec2 off = vec2(i, j);\n       \n            vec2 t_uv = (off + fragCoord) / iResolution.xy;\n            vec4 s = texture(iChannel0, t_uv);\n            \n            total_slime += s.z;\n        \n            if (i == 0 && j == 0) continue;\n            \n            vec2 n_off = normalize(off);\n            \n             \n            float d = dot(normalize(s.xy), n_off) * s.z;\n            if (d < best_score) {\n                best_score = d;\n                best_s = s;\n            }\n            \n            if (s.z > best_sniff) {\n                best_sniff = s.z;\n                best_dir = n_off;\n            }\n        }\n    }\n    \n    total_slime /= float(width * width);\n    \n    float new_slime = mix(total_slime, best_s.z, 0.1);\n    \n    fragColor = vec4(best_dir, new_slime, 0.);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"float rand(vec2 co){\n    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\n","name":"Common","description":"","type":"common"}]}