{"ver":"0.1","info":{"id":"tsjyWw","date":"1610002093","viewed":148,"name":"shadow shader for mygame","username":"Hoyong","description":"asdfsdf","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float removeGreen(vec4 col)\n{\n    return step( col.g, col.r + col.b );\n}\nvec2 shadow_func( vec2 uv, vec2 objectPos, vec2 lightPos ,vec2 scale )\n{\n    float dis = length(uv-lightPos)*0.1;\n    uv *= scale+dis;\n\tuv += (1.-(scale+dis))*lightPos;\n    return uv;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 shadow_col = vec4(0.2,0.1,0.3,1.0);\n    \n    float scale = 0.87;\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 lightPos = iMouse.xy/iResolution.xy;\n    vec2 objectPos = vec2(0.5);\n    \n    float dist = smoothstep(0.1,1.5,length(lightPos-objectPos)*1.5);\n    float noise = texture(iChannel1,fract(fragCoord/8.)).r-0.5;\n    vec2 blur = vec2(1./32.);\n    \n    vec4 final = vec4(1.0);\n    vec4 tex = texture(iChannel0,uv);  \n    vec2 light1 = shadow_func(uv,objectPos,lightPos,vec2(scale));\n    vec4 s_tex = texture(iChannel0,light1+noise*blur*normalize(lightPos-objectPos)+normalize(lightPos-objectPos)*dist*0.25);\n\n    tex *= removeGreen(tex);\n    s_tex.a *= 0.75*removeGreen(s_tex);\n    final = mix(final,shadow_col,s_tex.a);\n    final = mix(final,tex,tex.a);\n\n    fragColor = final; \n}","name":"Image","description":"","type":"image"}]}