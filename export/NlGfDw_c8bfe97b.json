{"ver":"0.1","info":{"id":"NlGfDw","date":"1664878630","viewed":91,"name":"Draw SDF Line with Texture","username":"luffy531","description":"Draw SDF Line with Texture","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["line","texture"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","previewfilepath":"/media/ap/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Drag drop any texture in iChannel0\n// but you have to install this extension\n//https://addons.mozilla.org/en-US/firefox/addon/shadertoy-custom-texures/\n//https://chrome.google.com/webstore/detail/shadertoy-custom-texures/jgeibpcndpjboeebilehgbpkopkgkjda\n\n// or run this command in browser console\n// gShaderToy.SetTexture(0, {mSrc:'https://i.postimg.cc/8C9Ny3sq/paint.jpg?dl=1', mType:'texture', mID:1, mSampler:{ filter: 'mipmap', wrap: 'repeat', vflip:'true', srgb:'false', internal:'byte' }});\n\n// Open the javascript console of your browser:\n//\t\t\t\t   Mac      /     Windows\n//\tChrome:  cmd + opt + J  /  ctrl + shift J\n//\tFirefox: cmd + opt + K  /  ctrl + shift K\n//    IE:          na         /  F12   \n\n\nfloat sdfSegment(vec2 p, vec2 a, vec2 b, float r) {\n    float h = min(1.0, max(0.0, dot(p - a, b - a) / dot(b - a, b - a))); //dot(b - a, b - a) == b-a * b-a\n    return length(p - (a + h * (b - a))) - r; // return distance from point to line\n\n}\n\n// Vector from start point a to projected point on line h\nvec2 sdfSegmentH(vec2 p, vec2 a, vec2 b) {\n    float h = min(1.0, max(0.0, dot(p - a, b - a) / dot(b - a, b - a))); //dot(b - a, b - a) == b-a * b-a\n    return a + h * (b - a);\n}\n\nvec4 lerp(vec4 color1, vec4 color2, float value)\n{\n\treturn (color1 + value * (color2 - color1));\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv01 = fragCoord / iResolution.xy;\n    vec2 uv = uv01;\n    \n    float _scale = 20.0; // higher the scale smaller the texture size\n    vec2 pointA = vec2(0.2, 0.8);\n    vec2 pointB = vec2(0.9, 0.6);\n    \n    \n    uv = (uv - 0.5) * _scale + 0.5;\n    \n    vec2 deltaPoint = sdfSegmentH(uv01, pointA, pointB);\n    deltaPoint = (deltaPoint - 0.5) * _scale;\n    uv -= deltaPoint;\n    \n    // -----------------Make sure uv does not overshoot above 0,0 to 1,1 square ----------------\n    // -----------------Same as WrapMode \"Clamp\" ----------------------------------------\n    // if(uv.x > 0 || uv.x < 1 || uv.y > 0 || uv.y < 1) return 1;\n    // else return 0;\n    \n    // is uv is inside 0,0 to 1,1 square\n    float isUVInside = (1.0 - step(uv.x, 0.0)) * (1.0 - step(1.0, uv.x)) * (1.0 - step(uv.y, 0.0)) * (1.0 - step(1.0, uv.y));\n    //uv *= isUVInside;\n    //----------------------------------------------------------------------\n    \n    \n    vec4 iChannel0 = texture(iChannel0, uv) * isUVInside;\n    vec4 iChannel1 = texture(iChannel1, uv01);\n    \n    // SDF Line\n    //vec4 col = vec4(0);\n    //float thickness = 0.01;\n    //float distance = sdfSegment(uv01, pointA, pointB, thickness);\n    //col = 1.0 - vec4(distance) * 50.0;\n    ////col = fract( vec3( distance ) * 50.0);\n    //col = clamp(col, 0.0, 1.0);\n    \n    //iChannel0 = clamp( (iChannel0 + col), 0.0, 1.0); // overlay sdf line\n\n    // Output to screen\n    // fragColor = col; // SDF Line\n    //fragColor = iChannel0 + iChannel1; // SDF with Texture\n    fragColor = lerp(iChannel1, iChannel0, iChannel0.r);\n}","name":"Image","description":"","type":"image"}]}