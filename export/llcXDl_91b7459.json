{"ver":"0.1","info":{"id":"llcXDl","date":"1482103999","viewed":126,"name":"Repeating Columns","username":"sea","description":"columns","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["columns"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float box (vec3 p, vec3 o, vec3 s)\n{\n\tp = o - p;\n\tp = abs(p);\n\tvec3 b = vec3(max(p.x, s.x), max(p.y, s.x), max(p.z, s.x));\n\treturn max(p.x - s.x, max(p.y - s.y, p.z - s.z));\n}\n\nfloat arch (vec3 p)\n{\n\tfloat a = pow(p.x, 2.0) + pow(p.y, 2.0);\n\treturn p.x < 1.5 && p.x > -1.5 && abs(p.z) < 0.5 && p.y > 0.0 && p.y <= 2.0 ? 1.0 - a : 0.0;\n}\n\nvec3 rotate (vec3 p, vec3 r)\n{\n\tr = r / 180.0 * 3.1415926;\n\t\n\tmat4 pitch = mat4(\n\t\t1.0, 0.0, 0.0, 0.0,\n\t\t0.0, cos(r.x), -sin(r.x), 0.0,\n\t\t0.0, sin(r.x), cos(r.x), 0.0,\n\t\t0.0, 0.0, 0.0, 1.0\n\t);\n\t\n\tmat4 yaw = mat4(\n\t\tcos(r.y), 0.0, -sin(r.y), 0.0,\n\t\t0.0, 1.0, 0.0, 0.0,\n\t\tsin(r.y), 0.0, cos(r.y), 0.0,\n\t\t0.0, 0.0, 0.0, 1.0\n\t);\n\t\n\tmat4 roll = mat4(\n\t\tcos(r.z), -sin(r.z), 0.0, 0.0,\n\t\tsin(r.z), cos(r.z), 0.0, 0.0,\n\t\t0.0, 0.0, 1.0, 0.0,\n\t\t0.0, 0.0, 0.0, 1.0\n\t);\n\t\n\treturn (vec4(p, 1.0) * pitch * yaw * roll).xyz;\n}\n\nfloat a (vec3 p, vec3 o)\n{\n\tp = p - o;\n\tfloat a = arch(p);\n\tfloat b1 = box(p, vec3(-1.25, -2.0, 0.0), vec3(0.25, 2.0, 0.5));\n\tfloat b2 = box(p, vec3(1.25, -2.0, 0.0), vec3(0.25, 2.0, 0.5));\n\tfloat v = min(a, min(b1, b2));\n\treturn v;\n}\n\nvec3 normal (vec3 p)\n{\n    vec3 o = vec3(1.5, 2.0, 0.5);\n    return normalize(vec3(a(vec3(p.x - 0.01, p.y, p.z), o) - a(vec3(p.x + 0.01, p.y, p.z), o),\n                     a(vec3(p.x, p.y - 0.01, p.z), o) - a(vec3(p.x, p.y + 0.01, p.z), o),\n                     a(vec3(p.x, p.y, p.z - 0.01), o) - a(vec3(p.x, p.y, p.z + 0.01), o)));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat time = iTime * 10.0;\n\tvec2 ws = fragCoord.xy / iResolution.xy * 2.0 - 1.0;\n\tws.x *= iResolution.x / iResolution.y;\n\t\n\tvec3 ro = vec3(0.0, 2.0, -2.0);\n\tvec3 rd = vec3(ws, 1.0);\n\t\n\tvec3 color = vec3(0.0, 0.0, 0.0);\n    vec3 light = rotate(vec3(2.0, 0.0, 0.0), vec3(0.0, time  * 10.0, 0.0));\n\t\n\tfor (float i = 0.0; i < 10.0; i += 0.01)\n\t{\n\t\tvec3 p = ro + rd * i;\n\t\t// p = rotate(p, vec3(-(i - 15.0) * 360.0 / 30.0, -(i - 15.0) * 360.0 / 30.0, 0.0));\n\t\t// p.y = -p.y;\n\t\t// p.z += time * 0.1;\n\t\tp = rotate(p, vec3(0.0, time, 0.0));\n        vec3 mp = p;\n\t\t\n\t\tp.x = mod(p.x, 3.0);\n\t\tp.z = mod(p.z, 3.0);\n\t\t\n\t\tif (a(p, vec3(1.5, 2.0, 0.5)) < 0.0)\n\t\t{\n\t\t\tcolor = vec3(dot(normalize(p - light), normal(p)) * 1.0 - distance(mp, light) * 0.1);\n\t\t\tbreak;\n\t\t}\n\t\t/*\n\t\tif (box(p, 1.0) < 1.0)\n\t\t{\n\t\t\tcolor = vec3(1.0);\n\t\t\tbreak;\n\t\t}\n\t\t*/\n\t}\n\t\n\tfragColor = vec4(color, 1.0);\n}\n\t","name":"Image","description":"","type":"image"}]}