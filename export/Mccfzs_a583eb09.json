{"ver":"0.1","info":{"id":"Mccfzs","date":"1733377442","viewed":45,"name":"flower circle","username":"zhizi","description":"2D无限花环","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2dflowercircle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// 随机函数\nfloat random(vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);\n}\n\nfloat random(float seed){\n    return fract(sin(seed)*43758.828572);\n}\n\n// 圆形的平滑函数\nfloat circle(vec2 uv, vec2 center, float radius) {\n    float d = length(uv - center);\n    return smoothstep(radius, radius - 0.03, d);\n}\n\nconst float M_PI = 3.1415926;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    float aspect = iResolution.x/iResolution.y;\n    uv = (uv - vec2(0.5)) * vec2(aspect,1.);\n    float u_time = iTime;\n    \n    vec4 color = vec4(0.);\n    float r = 0.01;\n    \n    const float num = 60.;\n    const float circleNum = 10.;\n    for(float j=0.;j<circleNum;j++){\n        for(float i=0.;i<num;i++){\n            float angle = (2.*M_PI/num)*i;                                 //平分圆周\n            float timeOffset = random(vec2(i))*0.1;                        //时间偏差，可以调整为0看看效果\n            vec2 dir = vec2(sin(angle),cos(angle));                        //粒子方向向量\n            float speed = 0.3;                                             //粒子速度\n            vec2 newPos = dir*fract(speed*u_time+0.1*j);          //根据初始位置，运动方向，运动时间和时间偏差计算新位置\n\n\n            r = random(i)*0.02;  //粒子大小\n            float intensity = circle(uv,newPos,r);\n\n            // 粒子的颜色（基于角度或偏移）\n            vec4 particleColor = vec4(\n                0.5 + 0.5 * cos(angle + timeOffset * 6.28318),  // 红色分量\n                0.5 + 0.5 * cos(angle * 2.0 + u_time),          // 绿色分量\n                0.5 + 0.5 * sin(timeOffset * 6.28318 + u_time), // 蓝色分量\n                1.\n            );\n\n            color += pow(intensity,0.02)*particleColor;\n    \t}\n    }\n\n\n    // Output to screen\n    fragColor = color;\n}","name":"Image","description":"","type":"image"}]}