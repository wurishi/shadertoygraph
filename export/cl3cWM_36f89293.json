{"ver":"0.1","info":{"id":"cl3cWM","date":"1699250944","viewed":68,"name":"polar_coordinate_system","username":"yufengjie","description":"Polar coordinate system","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["polar"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"precision mediump float;\n\nfloat pix;\nfloat PI = 3.1415926;\n\nfloat SMOOTH(float D, float d, float pixNum) {\n  return smoothstep(D - pixNum * pix, D + pixNum * pix, d);\n}\n\n\n// 绘制极坐标坐标系\nfloat polar(vec2 st, float gap) {\n  float res = 0.0;\n\n  // 同心圆\n  for(float r = 0.0; r < 2.0; r += gap) {\n    res += 1. - SMOOTH(0., abs(st.x - r), 4.);\n  }\n\n  //直线\n  for(float a = 0.; a < 2.0; a += .25) {\n    res += 1. - SMOOTH(0., abs(PI * a - st.y), 4.);\n  }\n\n  return res;\n}\n\nvec2 toPolar(vec2 st) {\n  // vec2(r, θ)\n  float r = length(st);\n  float a = mod( atan(st.y,st.x), 2.*PI);\n  \n  \n  //float a;\n  //if(st.x > 0. && st.y > 0.) {\n  //  a = atan(st.y / st.x);\n  //}\n  //if(st.x < 0. && st.y > 0.) {\n  //  a = atan(st.y / abs(st.x)) + PI;\n  //}\n  //if(st.x < 0. && st.y < 0.) {\n  //  a = atan(abs(st.y) / abs(st.x)) + PI;\n  //}\n  //if(st.x > 0. && st.y < 0.) {\n  //  a = atan(st.y / abs(st.x)) + PI * 2.;\n  //}\n\n  return vec2(r, a);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  pix = 1.0 / iResolution.y;\n\n  vec2 st = (fragCoord.xy * 2.0 - iResolution.xy) / iResolution.y;\n  st = toPolar(st);\n\n  vec3 c_fin = vec3(0.0);\n  vec3 c_white = vec3(1.0);\n\n  float pol = polar(st, 0.1);\n  c_fin += c_white * pol;\n  \n  // https://www.desmos.com/calculator/ekraoznjwc?lang=zh-CN\n  st.x *= 10.;\n  float v = st.x - abs(5. * sin(4. * st.y));\n  \n //float s1 = 1. - smoothstep(0.,1., v);\n  float s1 = 1. - smoothstep(-1.,1., v/fwidth(v));\n\n  c_fin = mix(c_fin, c_white, s1);\n\n  fragColor = vec4(c_fin, 1.0);\n}","name":"Image","description":"","type":"image"}]}