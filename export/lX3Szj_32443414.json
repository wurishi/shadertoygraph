{"ver":"0.1","info":{"id":"lX3Szj","date":"1719311955","viewed":58,"name":"New_PI_Approximation","username":"Imagyx","description":"New PI approximation, found in DOI: 10.1103/PhysRevLett.132.221601\n\nThe idea for this shader was to show how fast the new method approximates PI compared to older ones. ","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["pi","approximation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Source: https://en.wikipedia.org/wiki/Falling_and_rising_factorials\nfloat pochhammer(in float x, in float n){\n\tfloat p = n == 0.0 ? 1.0 : x;\t\n    for(float i = 0.0; i < n - 1.0; i += 1.0){\n\t\tx += 1.0;\n\t\tp *= x;\n\n\t}\n\treturn p;\n}\n\n// Source: DOI: 10.1103/PhysRevLett.132.221601, https://journals.aps.org/prl/pdf/10.1103/PhysRevLett.132.221601, page 7\nconst float lambda = 55.0;\nfloat newForm(in float n, in float nf){\n\tfloat a1 = n + lambda;\n\tfloat a2 = 2.0 * n + 1.0;\n\tfloat b1 = 1.0 / a1 - 4.0 / a2;\n\tfloat b2 = pochhammer(a2 * a2 / (4.0 * a1) - n, n - 1.0);\n\treturn nf * b1 * b2;\n}\n\nvec3 render(in vec2 pa){\n    vec3 C = vec3(0.0);\n    const float iter = 20.0;\n    float new[int(iter)];\n    const float t = 0.001;\n\tfloat pi = 3.14159265359;\n\tpa -= vec2(-11.7, 0.025);\n    pa.x *= 0.25;\n\tC += smoothstep(t, 0.0, abs(pa.x - 3.0)); // y-axis at 3.0\n\tC += smoothstep(t * 4.0, 0.0, abs(pa.y)); // x-axis at 0.0\n\tpa.y *= 16.0;\n\tC.r += smoothstep(t * 1.0, 0.0, abs(pa.x - pi)); // PI\n\tnew[0] = 4.0;\n\tfloat nf = 1.0;\n\tfor(float n = 1.0; n < iter; n += 1.0){\n\t\tnf *= n;\n\t\tnew[int(n)] = new[int(n - 1.0)] + newForm(n, 1.0 / nf);\n\t }\n    int yn = int(min(float(iter) - 1.0, max(0.0, floor(pa.y))));\n\tC.g += smoothstep(t, 0.0, abs(pa.x - new[yn])); // iterated values for approximation of PI\n    return C;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 p = fragCoord/iResolution.xy;\n\tvec2 pa = p * vec2(iResolution.x / iResolution.y, 1.0);\n    fragColor = vec4(render(pa), 1.0);\n}","name":"Image","description":"","type":"image"}]}