{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#ifndef INVPI\n#define INVPI\t0.31830988618\n#endif\n\n#ifndef HALFPI\n#define HALFPI\t1.57079632679\n#endif\n\n#ifndef PI\n#define PI\t3.14159265359\n#endif\n\n#ifndef TWOPI\n#define TWOPI\t6.28318530718\n#endif\n\n#define elastic(val,div,den) pow(fract(val/div),den)/(TWOPI*HALFPI)\n\nvec2 rot2d(vec2 uv, vec2 pivot, float angle)\n{\n\treturn vec2(\tcos(angle) * (uv.x - pivot.x) + sin(angle) * (uv.y - pivot.y) + pivot.x,\n\t\t\tcos(angle) * (uv.y - pivot.y) - sin(angle) * (uv.x - pivot.x) + pivot.y);\n}\n\n// Adapted from https://www.shadertoy.com/view/DsccDH\nfloat sdRing(in vec2 uv, in vec2 pos, in float a, in float g, in vec2 r)\n{\n\tuv -= pos;\n\n\tuv = rot2d(uv, vec2(0.0), a);\n\n\tvec2 cs = vec2(cos(g*PI),sin(g*PI));\n\n\tuv.x = abs(uv.x);\n\n\t//uv = mat2x2(cs.x, cs.y, -cs.y, cs.x) * uv;\n\tuv = mat2(cs.x, cs.y, -cs.y, cs.x) * uv;\n\n\treturn max(\tabs(length(uv)-r.x)-r.y*0.5,\n\t\t\tlength(vec2(uv.x,max(0.0,abs(r.x-uv.y)-r.y*0.5)))*sign(uv.x) );\n}\n\nfloat sdBox(in vec2 uv, in vec2 pos, in vec2 size)\n{\n\tvec2 d = abs(uv-pos)-size;\n\treturn length(max(d, vec2(0.0))) + min(max(d.x, d.y), 0.0);\n}\n\nfloat sdDisk(in vec2 uv, in vec2 pos, in float radius)\n{\n\treturn length(uv-pos)-radius;\n}\n\nfloat numbers(vec2 uv, vec2 pos, vec2 size, float a, float blurval, int id)\n{\n\tuv -= pos;\n\tuv = rot2d(uv,vec2(0.0),-HALFPI+a);\n\tuv /= size;\n\n\tfloat d = 1.0;\n\n\tif(id == -1)\n\t{\n\t\td = sdRing(uv, vec2(0.0, 0.225), 0.0, 1.0, vec2(0.225, 0.05));\n\t\td = min(d, sdRing(uv, vec2(0.0, -0.225), 0.0, 1.0, vec2(0.225, 0.05)));\n\t}\n\telse if(id == 0)\n\t{\n\t\td = sdRing(uv, vec2(0.0, 0.225), PI, -0.5, vec2(0.225, 0.05));\n\t\td = min(d, sdBox(uv, vec2(-0.225,0.0), vec2(0.025, 0.225)));\n\t\td = min(d, sdBox(uv, vec2(0.225,0.0), vec2(0.025, 0.225)));\n\t\td = min(d, sdRing(uv, vec2(0.0, -0.225), PI, 0.5, vec2(0.225, 0.05)));\n\t}\n\telse if(id == 1)\n\t{\n\t\td = sdRing(uv, vec2(0.0, 0.225), -PI*0.25, 0.25, vec2(0.225, 0.05));\n\t\td = min(d, sdBox(uv, vec2(0.225,-0.125), vec2(0.025, 0.35)));\n\t}\n\telse if(id == 2)\n\t{\n\t\td = sdRing(uv, vec2(0.0, 0.225), -PI*0.25, 0.25, vec2(0.225, 0.05));\n\t\td = min(d, sdBox(uv, vec2(0.225, 0.11), vec2(0.025, 0.12)));\n\t\td = min(d, sdBox(uv, vec2(0.0), vec2(0.25, 0.025)));\n\t\td = min(d, sdBox(uv, vec2(-0.225, -0.22), vec2(0.025, 0.225)));\n\t\td = min(d, sdBox(uv, vec2(-0.1, -0.45), vec2(0.15, 0.025)));\n\t}\n\telse if(id == 3)\n\t{\n\t\td = sdRing(uv, vec2(0.0, 0.225), -PI*0.5, 0.5, vec2(0.225, 0.05));\n\t\td = min(d, sdRing(uv, vec2(0.0, -0.225), -PI*0.75, 0.75, vec2(0.225, 0.05)));\n\t}\n\telse if(id == 4)\n\t{\n\t\td = sdRing(uv, vec2(0.0, 0.225), PI*0.25, 0.25, vec2(0.225, 0.05));\n\t\td = min(d, sdBox(uv, vec2(-0.225, 0.125), vec2(0.025, 0.1)));\n\t\td = min(d, sdBox(uv, vec2(0.0), vec2(0.25, 0.025)));\n\t\td = min(d, sdBox(uv, vec2(0.0, -0.125), vec2(0.025, 0.35)));\n\t}\n\telse if(id == 5)\n\t{\n\t\td = sdBox(uv, vec2(-0.09, 0.45), vec2(0.115, 0.025));\n\t\td = min(d, sdBox(uv, vec2(-0.225, 0.25), vec2(0.025, 0.225)));\n\t\td = min(d, sdBox(uv, vec2(-0.125, 0.0), vec2(0.125, 0.025)));\n\t\td = min(d, sdRing(uv, vec2(0.0, -0.225), -PI*0.75, 0.75, vec2(0.225, 0.05)));\n\t}\n\telse if(id == 6)\n\t{\n\t\td = sdRing(uv, vec2(0.0, 0.225), PI*0.25, 0.25, vec2(0.225, 0.05));\n\t\td = min(d, sdBox(uv, vec2(-0.225,0.02), vec2(0.025, 0.225)));\n\t\td = min(d, sdRing(uv, vec2(0.0, -0.225), 0.0, 1.0, vec2(0.225, 0.05)));\n\t}\n\telse if(id == 7)\n\t{\n\t\td = sdRing(uv, vec2(0.0, 0.225), 0.0, 0.5, vec2(0.225, 0.05));\n\t\td = min(d, sdBox(uv, vec2(0.225,-0.125), vec2(0.025, 0.35)));\n\t\td = min(d, sdBox(uv, vec2(0.1, 0.0), vec2(0.1, 0.025)));\n\t}\n\telse if(id == 8)\n\t{\n\t\td = sdRing(uv, vec2(0.0, 0.225), 0.0, 1.0, vec2(0.225, 0.05));\n\t\td = min(d, sdRing(uv, vec2(0.0, -0.225), 0.0, 1.0, vec2(0.225, 0.05)));\n\t}\n\telse if(id == 9)\n\t{\n\t\td = sdRing(uv, vec2(0.0, 0.225), 0.0, 1.0, vec2(0.225, 0.05));\n\t\td = min(d, sdBox(uv, vec2(0.225, 0.0), vec2(0.025, 0.225)));\n\t\td = min(d, sdRing(uv, vec2(0.0, -0.225), -PI*0.725, 0.25, vec2(0.225, 0.05)));\n\t}\n\treturn smoothstep(0.0001+blurval, -0.0001+(blurval*0.25), (d>0.0)?d=d:d=0.0);\n}\n\nvoid numRing(inout vec4 layer, in vec2 uv, in vec2 pos, in vec2 size, float steps, float a, float radius)\n{\n\tuv -= pos;\n\tuv /= size;\n\tuv = rot2d(uv, vec2(0.0), PI+(PI/steps)+a);\n\n\tfloat disk=0.0, num=0.0, id=0.0;    \n\n\tif(length(uv)>=radius-max(size.x,size.y)-0.025 && length(uv)<=radius+max(size.x,size.y)+0.025)\n\t{\n\t\tlayer = mix(layer, vec4(vec3(1.0),1.0), smoothstep(0.05,0.02,abs(sdDisk(uv, vec2(0.0), radius))));\n\n\t\tfloat at = (atan(-uv.y,-uv.x)+PI)/TWOPI*steps;\n\t\tid = floor(at)+0.5;\n\t\tfloat angle = (TWOPI/steps)*id;\n\t\tvec2 p = vec2(cos(angle),sin(angle))*radius;\n\t\tfloat c = PI-(angle+PI/4.3)<=(a-(PI+0.2)) && (PI-angle)>=(a-(PI+0.2)) ? 1.0 : 0.0;\n\t\tdisk = max(disk,smoothstep(0.035,0.0,sdDisk(uv, p, 0.2)));\n\t\tnum = numbers(uv, p, vec2(0.3), angle-HALFPI, 0.1, int(steps-id));\n\n\t\tlayer = mix(layer, vec4(vec3(1.0,1.0-c,1.0-c), 1.0), disk);\n\t\tlayer = mix(layer, vec4(vec3(0.0), 1.0), num);\n\t}\n}\n\nvoid ringClock(inout vec4 color, in vec2 uv, in vec2 pos, in vec2 size)\n{\n\tuv -=pos;\n\tuv /= size;\n\n\t// Simple zoom\n\t// uv *= abs(uv.x)>=0.69 || abs(uv.y)>=0.13 ? 1.0:0.5;\n\n\tfloat se10 = elastic(iDate.w,1.0,5.0)*TWOPI;    \n\tfloat se6 = elastic(iDate.w/10.0,1.0,60.0)*(TWOPI*HALFPI);\n\tfloat me10 = elastic(iDate.w/60.0,1.0,600.0)*TWOPI;\n\tfloat me6 = elastic(iDate.w/600.0,1.0,3600.0)*(TWOPI*HALFPI);\n\tfloat he10 = elastic(iDate.w/3600.0,1.0,36000.0)*TWOPI;\n\tfloat he6 = elastic(iDate.w/36000.0,1.0,360000.0)*(TWOPI*HALFPI);\n\n\tfloat px = 0.405;\n\n\t// Hours\n\tnumRing(color, uv, vec2(px,0.0), vec2(0.2), 10.0, he10+mod(floor(iDate.w/3600.0),10.0)*TWOPI/10.0, 2.8);\n\tnumRing(color, uv, vec2(px,0.0), vec2(0.2), 6.0, he6+mod(floor(iDate.w/36000.0),6.0)*TWOPI/6.0, 3.25);\n\n\t// Minutes\n\tnumRing(color, uv, vec2(px,0.0), vec2(0.2), 10.0, me10+mod(floor(iDate.w/60.0),10.0)*TWOPI/10.0, 1.8);\n\tnumRing(color, uv, vec2(px,0.0), vec2(0.2), 6.0, me6+mod(floor(iDate.w/600.0),6.0)*TWOPI/6.0, 2.25);\n\n\t// Seconds\n\tnumRing(color, uv, vec2(px,0.0), vec2(0.2), 10.0, se10+mod(floor(iDate.w),10.0)*TWOPI/10.0, 0.8);\n\tnumRing(color, uv, vec2(px,0.0), vec2(0.2), 6.0, se6+mod(floor(iDate.w/10.0),6.0)*TWOPI/6.0, 1.25);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n\tvec2 uv = (fragCoord.xy-0.5*iResolution.xy)/iResolution.y;\n\n\tfragColor = vec4(0.0);\n\n\tringClock(fragColor, uv, vec2(0.0), vec2(0.7));\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XcKfWm","date":"1734102193","viewed":117,"name":"Ring Clock","username":"DantesPlan","description":"Rotating ring watch","likes":20,"published":1,"flags":0,"usePreview":0,"tags":["time","clock","circle","rotate","number","ring","digit","select"],"hasliked":0,"parentid":"","parentname":""}}