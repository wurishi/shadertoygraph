{"ver":"0.1","info":{"id":"ltKGz1","date":"1473315737","viewed":268,"name":"Crappy Chroma Key","username":"scaseyk","description":"Trying to get a simple chroma key shader set up to overlay a video on top of another while stripping away green screen. Super simple, messy around the edges.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["chromakey"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4df3zn","filepath":"/media/a/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","previewfilepath":"/media/ap/3405e48f74815c7baa49133bdc835142948381fbe003ad2f12f5087715731153.ogv","type":"video","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 xy = fragCoord.xy / iResolution.xy;\n    vec4 vidTexColor = texture(iChannel0,xy);\n    vec4 bgTexColor = texture(iChannel1,xy);\n    \n    //Determine distance from our (as far as I can tell) bg color\n    vec4 bgKey = vec4(0.05, 0.639, 0.149, 1.0);\n    float delta = distance(vidTexColor, bgKey);\n    \n    //Below minDistance we can consider BG, above max we can consider actual video\n    //Anything within the goldilocks range we should blend to smooth our edges a bit\n    float minDistance = 0.35;\n    float maxDistance = 0.45;\n    float distanceDelta = maxDistance - minDistance;\n    delta = clamp(delta, minDistance, maxDistance);\n    delta = delta - minDistance;\n    delta = delta / distanceDelta;\n    vidTexColor = delta * vidTexColor;\n    bgTexColor = (1.0-delta) * bgTexColor;\n    fragColor = vidTexColor + bgTexColor;\n        \n    //Enable black and white to hide some of the imperfections, maybe?\n    //fragColor.g = fragColor.b = fragColor.r;\n}","name":"Image","description":"","type":"image"}]}