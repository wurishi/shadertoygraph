{"ver":"0.1","info":{"id":"ftcGRX","date":"1636395796","viewed":543,"name":"Waving Lights","username":"lGuy","description":"Lights which seem to be distorted by water waves.","likes":20,"published":1,"flags":0,"usePreview":0,"tags":["noise"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 hash( vec2 x )  // replace this by something better\n{\n    const vec2 k = vec2( 0.3183099, 0.3678794 );\n    x = x*k + k.yx;\n    return -1.0 + 2.0*fract( 16.0 * k*fract( x.x*x.y*(x.x+x.y)) );\n}\n\nfloat noise( in vec2 p )\n{\n    vec2 i = floor( p );\n    vec2 f = fract( p );\n\t\n\tvec2 u = f*f*(3.0-2.0*f);\n\n    return mix( mix( dot( hash( i + vec2(0.0,0.0) ), f - vec2(0.0,0.0) ), \n                     dot( hash( i + vec2(1.0,0.0) ), f - vec2(1.0,0.0) ), u.x),\n                mix( dot( hash( i + vec2(0.0,1.0) ), f - vec2(0.0,1.0) ), \n                     dot( hash( i + vec2(1.0,1.0) ), f - vec2(1.0,1.0) ), u.x), u.y);\n}\n\n// -----------------------------------------------\n\nfloat fbm( in vec2 uv )\n{\n \tuv *= 2.;\n    mat2 m = mat2( 1.6,  1.2, -1.2,  1.6 );\n\tfloat f = 0.;\n    f  = 0.5000*noise( uv ); uv = m*uv;\n\tf += 0.2500*noise( uv ); uv = m*uv;\n\tf += 0.1250*noise( uv ); uv = m*uv;\n\tf += 0.0625*noise( uv ); uv = m*uv;\n    return abs(f + 0.5);\n}\n\nvec4 light(vec2 p, vec2 center, float strength, vec4 color) {\n    return strength * color / length(p - center);\n}\n\nvec2 move(int n) {\n    float h = hash(vec2(float(n))).x;\n    \n    return vec2(cos(iTime / 10.0 - h) * 0.7, sin(iTime / 20.0 + h) * 0.2);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = (2.0*fragCoord-iResolution.xy)/iResolution.y;\n\n    vec2 distortion = vec2(fbm(p), fbm(1.0 - p)) * 0.4;\n    distortion.y -= fbm(0.3 * vec2(p.x, p.y - iTime * 0.7)) * 0.8;\n    \n    vec4 lights = vec4(0.0);\n    \n    lights += light(move(0) + p + distortion, vec2(0.0), abs(sin(0.1 * iTime + 13.45)) * 0.11, vec4(0.4, 0.2, 0.7, 1.0));\n    lights += light(move(1) + p + distortion, vec2(0.3), abs(sin(0.1 * iTime)) * 0.1, vec4(0.1, 0.2, 0.8, 1.0));\n    lights += light(move(2) + p + distortion, vec2(-0.4, 0.1), 0.09 * abs(cos(0.15 * iTime)), vec4(0.4, 0.6, 0.8, 1.0));\n    \n    lights += light(move(0) + p - distortion * 0.2, vec2(0.0), abs(sin(0.1 * iTime + 13.45)) * 0.11, vec4(0.4, 0.2, 0.7, 1.0));\n    lights += light(move(1) + p + distortion * 0.2, vec2(0.3), abs(sin(0.1 * iTime - 1.0)) * 0.1, vec4(0.1, 0.2, 0.8, 1.0));\n    lights += light(move(2) + p - distortion * 0.2, vec2(-0.4, 0.1), 0.07 * abs(cos(0.15 * iTime + 2.0)), vec4(0.4, 0.6, 0.8, 1.0));\n\n    // Output to screen\n    fragColor = lights;\n}","name":"Image","description":"","type":"image"}]}