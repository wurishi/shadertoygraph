{"ver":"0.1","info":{"id":"mtGcWR","date":"1700247563","viewed":16,"name":"Cell Mitosis using SmoothLife","username":"ascomycody","description":"A continuous spatial automaton using a two radial kernels and a smooth transition function. (https://arxiv.org/pdf/1111.1567.pdf)\nWatch as cells fill the screen by dividing over the course of several \"nutrient cycles\" (simulated day/night or hormone grth)","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["conway","smoothlife","continuousspatialautomaton"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"I\n    C = (smoothstep(.0, .7, tx(ic0, p).rrrr)+.25);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define R iResolution\n#define T iTime\n#define F iFrame\n#define I void mainImage(out vec4 C, in vec2 P){ vec2 p = (P/R.xy);\n\n#define tx(x, y) texture(x, y)\n#define pi 3.1415926535897\n#define tau 6.28318530717\n#define e 2.718281828\n\n#define ri 3.\n#define ra floor(ri*3.)\n\n#define ic0 iChannel0\n#define ic1 iChannel1\n#define ic2 iChannel2\n#define ic3 iChannel3\n\n#define STYLE 2\n\n#if STYLE==0\n\n#define alm .92\n#define aln .175\n#define x_offset .1\n\n#define b12 vec2(.0725, .25)\n#define d12 vec2(.8345, .75)\n\n#endif\n#if STYLE==1\n\n#define alm .925\n#define aln .175\n#define x_offset .1\n\n#define b12 vec2(.0625, .125)\n#define d12 vec2(.8345, .35)\n\n#endif\n#if STYLE==2\n\n#define alm .925\n#define aln .15\n#define x_offset .1\n\n#define b12 vec2(.0625, .125)\n#define d12 vec2(.86, .35 + (.3 * sin(1.25 * T))))\n\n#endif\n\n#if STYLE==3\n\n#define alm .925\n#define aln .15\n#define x_offset .1\n\n#define b12 vec2(.0625, .125)\n#define d12 vec2(.86, .35 + (.75 * sin(1.25 * T) + .5)))\n\n#endif\n\nfloat hash12(in vec2 p){return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);}\n\nfloat con(in sampler2D x, in vec2 f, in vec3 r){\n    int a = 0;\n    for(int i = -1; i <= 1; i++){\n    for(int j = -1; j <= 1; j++){\n        if(i!=0 || j!=0){\n        a += (tx(x, mod((f + vec2(i, j)), r.xy) / r.xy).r > .5) ? 1 : 0;\n        }\n    }\n    }\n    int b = int(tx(x, f/r.xy).r);\n    return ( ((a==2)&&(b==1)) || (a==3) ) ? 1.0 : 0.0;\n}\n\n\nfloat f1m(float x, float a){\n    return (1. / (1. + (exp(-((abs(x) - a) * 4.) / alm))));\n}\n\nfloat f1n(float x, float a){\n    return (1. / (1. + (exp(-((abs(x) - a) * 4.) / aln))));\n}\n\nfloat f2(float x, float a, float b){\n    return (f1n(x, a) * (1. - f1m(x, b)));\n}\n\nfloat fm(vec2 p, float m){\n    return (p.x * (1. - f1m(m, .5)) + p.y * f1m(m, .5));\n}\n\nfloat s(float n, float m, vec2 b, vec2 d){\n    return clamp(f2(n, fm(vec2(b.x, d.x), m), fm(vec2(b.y, d.y), m)), 0., 1.);\n}\n\nfloat m(sampler2D x, vec2 p, vec2 r, float aaz){\n    float a = tx(x, p).r;\n    float b = 1.;\n    for(float i = 1.; i < floor(ri); i += 1.){\n        float da = tau / (tau * i);\n        int l = (i > ri+(aaz/2.)) ? 0 : (i < ri-(aaz/2.)) ? 1 : 2;\n        for(float j = -pi; j < pi; j += da){\n            vec2 bb = vec2(cos(j), sin(j)) * i;\n            if(l < 2){\n            switch (l){\n                case 1:\n                a += tx(x, (mod(p + bb, r) + vec2(x_offset, 0.)) * float(l) * (1./r)).r;\n                b++;\n                break;\n                }\n            } else {\n                a += tx(x, (mod(p + bb, r) + vec2(x_offset, 0.)) * (1./r)).r * ((floor(ra) + (aaz/2.) - i)/aaz);\n                b++;\n            }\n        }\n    }\n    return a/b;\n}\n\nfloat n(sampler2D x, vec2 p, vec2 r, float aaz){\n    float a = 0.;\n    float b = 0.;\n    for(float i = floor(ri); i < floor(ra); i += 1.){\n        float da = tau / (tau * i);\n        int l = (i > ra+(aaz/2.)) ? 0 : (i < ra-(aaz/2.)) ? 1 : 2;\n        for(float j = -pi; j < pi; j += da){\n            vec2 bb = vec2(cos(j), sin(j)) * i;\n            if(l < 2){\n            switch (l){\n                case 1:\n                a += tx(x, (mod(p + bb, r) + vec2(x_offset, 0.)) * (1./r)).r;\n                b++;\n                break;\n                }\n            } else {\n                a += tx(x, (mod(p + bb, r) + vec2(x_offset, 0.)) * (1./r)).r  * ((floor(ra) + (aaz/2.) - i)/aaz);\n                b++;\n            }\n        }\n    }\n    return a/b;\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","previewfilepath":"/media/ap/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"I\n    float c = s(m(ic0, P, R.xy, 1.), n(ic0, P, R.xy, 1.), b12, d12;\n    C = (F>0) ? vec4(c) : (length(vec2(-(R.x/R.y/2.) + p.x * (R.x/R.y), -.5 + p.y)) < .01) ? tx(ic1, p).rrrr : vec4(0.);//vec4(hash12(p)) : vec4(0.) ;\n}","name":"Buffer A","description":"","type":"buffer"}]}