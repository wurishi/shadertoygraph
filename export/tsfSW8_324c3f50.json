{"ver":"0.1","info":{"id":"tsfSW8","date":"1582985352","viewed":72,"name":"triGrid","username":"Gijlf","description":"grid experiment","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["triangles"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = acos(-1.);//3.1415926\nmat2 rot(float a) {float s=sin(a);float c=cos(a);return mat2(c,s,-s,c);}\nfloat h21(vec2 p)\n{return fract((p.x+p.y) * 123. * fract(p.x * 24.4) + fract(p.y * 6.78));}\nvec3 h23(vec2 p) {float t = fract(p.x * 23.7) + fract(p.y * 122.65);\n                  return vec3(fract(45.9*(p.x+p.y*t)), fract(t*451.23), t);}\nfloat hexDist(vec2 p) {\n\tp = abs(p);\n    vec2 hr = normalize(vec2(1., 1.73));    \n    float c = dot(p, hr);\n    return max(p.x, c);\n}\nvec4 hexGrid(vec2 p) {\n\tvec2 hr = vec2(1., 1.73);\n    vec2 a  = mod(p, hr)-hr*.5;\n    vec2 b  = mod(p-hr*.5, hr)-hr*.5; \n    vec2 gv = dot(a,a)<dot(b,b)?a:b;\n    return vec4(p-gv, .5-hexDist(gv), .5+.5*(atan(gv.x,gv.y)/PI));\n}\n\nvec4 triGrid(vec2 p, out float d) {\n    p.x /= .57735;\n    vec3 gv = vec3(fract(p).xyy); gv.z = 1. - gv.y;\n\tvec2 id = floor(p);\n    float pix = id.x;\n    float o = gv.x + (mod(id.x + mod(id.y, 2.), 2.) == 1. ? gv.y : gv.z) - 1.;\n    if (o > 0.) ++id.x;\n    if(mod(id.x + mod(id.y, 2.), 2.) == 0.) gv.y = gv.z;\n    if(mod(pix,2.) == 1.) gv.x = 1. - gv.x;\n  \tif(mod(id.x + mod(id.y+mod(id.y,2.), 2.), 2.) == 1.0) gv.x = 1.-gv.x;\n    d = min(abs(o), gv.y / .49999);\n    return vec4(id.xy, gv.x, gv.y-.5);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 m = (iMouse.xy) / iResolution.y;\n    vec2 uv = (fragCoord.xy) / iResolution.y;\n    vec3 col = vec3(0.);\n    float scl = 12. * m.x;\n\n    float d = 0.;\n    vec4 tv = triGrid(uv * scl, d);\n    col = h23(tv.xy); // ID\n    //col += (tv.zww);    // COORD\n    col *= d;\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}