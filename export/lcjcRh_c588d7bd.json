{"ver":"0.1","info":{"id":"lcjcRh","date":"1721924097","viewed":39,"name":"fragment 2d grid","username":"Sphinx","description":"поиск зависимости между mainCell и edge","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["2dgridglsl"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{    \n    //хочу понять зависимость edge от mainCell,\n    //что бы добиться линий одинаковой толщины\n    //для разного шага сетки.\n    \n    //методом подбора выяснил, что одинаковая толщина,    \n    //например, для вот таких наборов:\n    //mainCell = 0.01f и edge = 0.2f\n    //и\n    //mainCell = 0.09f и edge = 0.9f\n    //но как подобрать формулу этой зависимости?\n \n    vec2 uv = fragCoord/iResolution.xy;    \n    vec3 baseColor = vec3(0,0,0);\n    float mainCell = 0.09f;\n    float aspect = float(iResolution.x) / float(iResolution.y);\t\n    float gx = abs(fract(uv.x / mainCell) - 0.5f) / 0.5f;\n    float gy = abs(fract(uv.y / (mainCell * aspect)) - 0.5f) / 0.5f;\n    const float edge = 0.9f;\n    if(gx > edge)    \n    {\n        float fx = smoothstep(edge, 1.0f, gx);\n        baseColor = mix(baseColor, vec3(0.3,0.3,0.3), fx);\n    }\n    if(gy > edge)    \n    {\n        float fy = smoothstep(edge, 1.0f, gy);\n        baseColor = mix(baseColor, vec3(0.3,0.3,0.3), fy);\n    }\n    \n    fragColor = vec4(baseColor,1.0);\n}","name":"Image","description":"","type":"image"}]}