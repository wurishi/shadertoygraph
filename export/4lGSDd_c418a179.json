{"ver":"0.1","info":{"id":"4lGSDd","date":"1486629409","viewed":106,"name":"Izakaya","username":"rohtie","description":"For a book project where I reconstruct an image in many different techniques. Shaders being one of the techniques.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["distancefields"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float smin(float a, float b, float k) {\n    float h = clamp(0.5 + 0.5 * (b-a)/k, 0.0, 1.0);\n    return mix(b, a, h) - k * h * (1.0 - h);\n}\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat bear_lady(vec2 p) {\n    p *= 1.35;\n    p.y -= 0.25;\n    p.x -= 0.35;\n    \n    \n    p.x = abs(p.x);\n    \n    vec2 ears = p;\n    ears.y -= 0.25;\n    ears.x -= 0.2;\n    ears.x *= -1.0;\n    \n    float ears_result = max(length(ears) - 0.13, length(ears + 0.2) - 0.25);\n    \n    \n    vec2 head = p;\n    head.y *= p.x * 6.0;\n    float head_result = length(head) - 0.2;\n    head_result = max(head_result, length(p - vec2(0.0, -0.35)) - 0.5);\n    \n    \n    float head_shape = smin(ears_result, head_result, 0.075);\n    \n    vec2 body = p;\n    body.x += body.y * 0.175;\n    body.y += 0.6;\n    float body_shape = smin(head_shape, length(body) - 0.2, 0.24);\n    \n    return body_shape;\n}\n\nfloat bear(vec2 p) {\n    p.x += 0.285;\n    p.y -= 0.15;\n    \n    p.x = abs(p.x);\n    \n    \n    vec2 head = p;\n    head.x -= 0.15;\n    \n    vec2 head_base = p;\n    head_base.y -= -0.095;\n    \n    float head_shape = length(head) - 0.1;\n    head_shape = smin(head_shape, length(head_base) - 0.175, 0.05);\n    \n    \n    vec2 body = p;\n    body.y += 0.475;\n    body.x *= 0.95;\n    float body_shape = smin(head_shape, length(body) - 0.25, 0.09);\n    \n\treturn body_shape;\n}\n\nfloat bear_details(vec2 p) {\n    p.x += 0.285;\n    p.y -= 0.15;\n    p.x = abs(p.x);\n    \n    \n    vec2 ears = p;\n    ears.x -= 0.15;\n    float ears_result = length(ears) - 0.1;\n    ears_result += 0.02;\n    ears_result = max(ears_result, length(ears - vec2(0.175, 0.05)) - 0.2);\n    \n    \n    vec2 nose = p;\n    \n    float a = 1.95;\n    nose *= mat2(-sin(a), cos(a),\n                 cos(a), sin(a));\n    \n    nose.x -= 0.025;\n    nose.y += 0.06;\n    float nose_result = max(length(nose) - 0.1, length(nose - vec2(0.0, -0.25)) - 0.2);\n    \n    vec2 eyes = p;\n    eyes.x -= 0.075;\n    eyes.y += 0.03;\n    float eyes_result = max(length(eyes) - 0.025, length(eyes - vec2(0.0, 0.025)) - 0.025);\n    \n    \n    vec2 mouth = p;\n    mouth.y += 0.275;\n    float mouth_result = max(length(mouth) - 0.1, length(mouth - vec2(0.0, 0.175)) - 0.1);\n    \n    \n\tfloat result = ears_result;\n    result = min(result, nose_result);\n    result = min(result, eyes_result);\n    result = min(result, mouth_result);\n    \n\treturn result;\n}\n\nfloat bear_lady_details(vec2 p) {\n    p *= 1.35;\n    p.y -= 0.25;\n    p.x -= 0.35;\n    \n    \n    p.x = abs(p.x);\n    \n    vec2 ears = p;\n    ears.y -= 0.25;\n    ears.x -= 0.2;\n    ears.x *= -1.0;\n    \n    float ears_result = max(length(ears) - 0.13, length(ears + 0.2) - 0.25);\n    ears_result += 0.0175;\n    \n    vec2 eyes = p; \n    eyes.x -= 0.12;\n    eyes.y -= 0.05;\n    eyes.x *= 0.9;\n    float eyes_result = max(length(eyes) - 0.025, length(eyes - vec2(0.0, 0.02)) - 0.025);\n    \n    \n    vec2 nose = p;\n    nose.x -= 0.03;\n    nose.x *= -1.0;\n    nose.y += 0.05;\n    nose *= 1.6;\n    float nose_result = max(length(nose) - 0.1, length(nose + 0.2) - 0.25);\n    \n    vec2 mouth = p;\n    mouth.y += 0.25;\n    float mouth_result = max(length(mouth) - 0.1, length(mouth - vec2(0.0, 0.12)) - 0.05);\n    \n    \n    float result = min(ears_result, eyes_result);\n    result = min(result, nose_result);\n    result = min(result, mouth_result);\n    \n    return result;\n}\n\nfloat table_accessories(vec2 p) {   \n    \n    vec2 sake = p;\n    sake.y += 0.35;\n    sake.x -= 0.15;\n    sake *= 0.65;\n\tfloat sake_result = smin(length(sake) - 0.035, length(sake - vec2(0.0, 0.08)) - 0.02, 0.05);\n    sake_result = max(sake_result, sake.y - 0.071);\n    \n    vec2 cup = p;\n    cup.y += 0.3;\n    cup.x -= 0.27;\n    cup *= 2.5;\n    float cup_result = max(length(cup) - 0.1, cup.y - 0.05);\n    \n    float result = min(sake_result, cup_result);\n    return result;\n}\n\nvoid mainImage( out vec4 o, in vec2 p ) {\n    p = (p / iResolution.xy) - 0.5;\n    p.x *= iResolution.x / iResolution.y;\n    \n    p.y += sin(p.y * 20.0 + iTime * 1.0) * 0.0125;\n    p.x += rand(p) * 0.05;\n    \n    float result = max(min(bear(p), bear_lady(p)), -p.y - 0.29);\n    float outline = result;\n    outline = smoothstep(outline, 0.015, 0.0);\n    result = smoothstep(0.0, 0.005, result);\n    \n    float details = min(bear_lady_details(p), bear_details(p));\n    float detail_outline = details;\n    detail_outline = smoothstep(detail_outline, 0.015, 0.0);\n    details = smoothstep(0.0, 0.005, details);\n    \n    float accessories = table_accessories(p);\n    accessories = smoothstep(0.0, 0.005, accessories);\n    \n    \n    vec2 q = p;\n    q.x *= 0.01;\n    q.y *= 0.06;\n    \n    o.rgb = vec3(0.0) + (\n        \t(1.0 - result) * vec3(p.y + 0.75, p.y + 0.4, 0.0) +\n        \tresult * vec3(p.y + 0.25, p.y + 0.45, 0.0) +\n        \t(1.0 - details) * vec3(p.y + 0.95, p.y * 1.95, 0.1) +\n        \t(1.0 - accessories) * vec3(p.y + 1.5, p.y + 1.1, p.y + 3.0)\n        \t//- ((1.0 - (outline)) - (1.0 - detail_outline)) * vec3(0.1, 0.1, 0.4)\n    ) + rand(q * 0.01) * 0.075;\n}\n\n","name":"Image","description":"","type":"image"}]}