{"ver":"0.1","info":{"id":"M3fSWX","date":"1710631549","viewed":71,"name":"pre optimization nayuta attack","username":"nami","description":"attempt at creating an attack for games similar to the one in the chainsaw man manga\nhttps://staticg.sportskeeda.com/editor/2023/02/02190-16758977065813-1920.jpg","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","game","slow","manga"],"hasliked":0,"parentid":"MXfXWM","parentname":"nayuta attack"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 rotz(vec3 p,float a){\n    mat3 rotm = mat3(cos(a),-sin(a),0.0,sin(a),cos(a),0.0,0.0,0.0,1.0);\n    return rotm*p;\n}\nvec2 rota2(vec2 p,float a){\n    mat2 rotm = mat2(cos(a),-sin(a),sin(a),cos(a));\n    return rotm*p;\n}\nfloat map(vec3 p){\n    vec3 tp = p-vec3(-10.0+22.0*iMouse.x/iResolution.x,-10.0+22.0*(iMouse.y/iResolution.y),-2.0);\n    vec3 vtp = rotz(p-vec3(-10.0+22.0*iMouse.x/iResolution.x,-10.0+22.0*(iMouse.y/iResolution.y),0.0),1.57);\n    vec3 tpp = vec3(1.5,0.4,1.0);\n    float d = 1.0;\n    float newtime = iTime * 2.2;\n    int maxi = int(clamp(20.0*iTime+6.0,0.0,22.0));\n    for(int i = 2;i<maxi;i++){\n        float timecoff = 2.0*cos((pow(float(i),0.2)/(newtime+0.5)))*1.0/(float(i)/2.20+newtime);\n        float horifact0 = 6.0*sin(0.2*float(i)+timecoff);\n        float horifact1 = 6.6*cosh((0.2*(float(i-6))+timecoff)/1.8)/float(i);\n        float horifact = mix(horifact0,horifact1,clamp(newtime/2.0,0.0,1.0));\n        float vertifact0 = 6.0*sin(0.2*float(i)+timecoff);\n        float vertifact1 = 6.6*cosh((0.2*(float(i-6))+timecoff)/1.8)/float(i);\n        float vertifact = mix(vertifact0,vertifact1,clamp(newtime/2.0,0.0,1.0));\n        float hori = length(vec2(length(tp.xz-vec2(0.0,4.2*float(i)))-tpp.x,tp.y-horifact))-tpp.y;\n        float verti = length(vec2(length(vtp.xz-vec2(vertifact,4.2*float(i)))-tpp.x,vtp.y))-tpp.y;\n        d = min(d,hori);\n        d = min(d,verti);\n    }\n    return d;\n}\nfloat raymarch(vec3 ro,vec3 rd){\n    float d = 0.0;\n    for(int i=0;i<200;i++){\n        float dt = map(ro+rd*d);\n        d+=dt;\n        if(d>100.0||dt<0.001)break;\n    }\n    return d;\n}\nvec3 calcnorm(vec3 p){\n    float d = map(p);\n    vec2 e = vec2(0.01,0.0);\n    return normalize(d-vec3(map(p-e.xyy),map(p-e.yxy),map(p-e.yyx)));\n}\nfloat diffuse(vec3 p){\n    vec3 pos = vec3(0.0,8.0,0.0);\n    pos.xz += vec2(sin(iTime),cos(iTime))*2.0;\n    vec3 n = calcnorm(p);\n    vec3 l = normalize(pos-p);\n    float d = raymarch(p+n*0.004,l);\n    //if(d<length(pos-p)) return clamp(dot(n,l),0.0,1.0)*0.1;\n    return clamp(dot(n,l),0.0,1.0);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = 2.0*(fragCoord/iResolution.xy)-1.0;\n    uv.x*=iResolution.x/iResolution.y;\n    vec3 ro = vec3(0.0,0.0,0.0);\n    vec3 rd = normalize(vec3(uv.x,uv.y+0.2,1.0));\n    float d = raymarch(ro,rd);\n    vec3 col = vec3(0.0);\n    //if(d > 100.0) discard;\n    col = vec3(diffuse(ro+rd*d));\n    col=pow(col,vec3(0.4545));\n    if(d<100.0)col+=0.1;\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}