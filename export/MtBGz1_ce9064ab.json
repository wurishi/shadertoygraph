{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tfragColor = vec4(uv,0.5+0.5*sin(iTime),1.0);\n}","name":"Image","description":"","type":"image"},{"outputs":[],"inputs":[],"code":"// Utils\n#define PI    (3.1415926536)\n#define TWOPI (6.2831853072)\n\nfloat note2Freq(float note) {\n    \n    if (note == 0.0) return 0.0;\n\n    return 16.35 * pow(1.059463, note);\n}\n\nfloat noise(float phi) {\n    \n    return fract(sin(phi * 0.011753) * 122.3762) * 2.0 - 1.0;\n}\n\nfloat square(float clock, float freq, float add) {\n    \n    return sin(clock * freq + add) > 0.0 ? 1.0 : -1.0;\n}\n\nfloat sine(float clock, float freq, float add) {\n    \n    return sin(clock * freq + add);\n}\n\nvec2 pan(vec2 sig, float pan) {\n\n    sig.x *= pan;\n    sig.y *= (1.0 - pan);\n    \n    return sig;\n}\n\n\nvec2 autopan(float time, vec2 sig, float freq, float panDepth) {\n    \n    float panSin = sine(time, freq, 0.) * panDepth;\n    \n    return pan(sig, (panSin + 1.0) / 2.0);\n}\n\n\n// End utils\n\n\nvec2 squareSweep(float time, float low, float high) {\n    vec2 sig;\n    \n    float sweepTime = clamp(time, 0.0, 1.0);\n    sweepTime = smoothstep(0.0, 1.0, sweepTime);\n    \n    float freq = low + (sweepTime * (high - low) );\n    \n    freq += sine(time, 1.0, 0.);\n    \n    sig += vec2( square( time, freq, 0. ) );\n    \n    return sig;\n}\n\nvec2 warbleSquare(float time, float clock, float freq, float modRate, float modDepth) {\n    \n    float modOsc = sine(clock, modRate, 0.);\n    float freqMod = modOsc * modDepth;\n    \n    vec2 tone = vec2 (square(clock, freq, freqMod) );\n    \n    return autopan(time, tone, modRate, 0.8);\n}\n\nvec2 broth(float time, float clock) {\n    vec2 sig;\n    sig += warbleSquare(time, clock, note2Freq(35.), 0.6, note2Freq(12.));\n    sig += warbleSquare(time, clock, note2Freq(38.), 0.1, note2Freq(12.));\n    sig += warbleSquare(time, clock, note2Freq(44.), 0.8, note2Freq(12.)) * 0.5;\n    sig /= 10.;\n    return sig;\n}\n\nvec2 minestrone(float time, float clock) {\n    vec2 sig;\n    \n//    sig += warbleSquare(time, clock, note2Freq(24.), 0.5, 400.);\n    sig += warbleSquare(time, clock, note2Freq(32.), 0.5, note2Freq(12.));\n    sig += warbleSquare(time, clock, note2Freq(35.), 0.6, note2Freq(12.));\n    sig += warbleSquare(time, clock, note2Freq(38.), 0.1, note2Freq(12.));\n    sig += warbleSquare(time, clock, note2Freq(44.), 0.8, note2Freq(12.)) * 0.5;\n    sig += warbleSquare(time, clock, note2Freq(69.), 0.9, note2Freq(12.)) * 0.1;\n    sig += warbleSquare(time, clock, note2Freq(62.), 8.0, note2Freq(12.)) * 0.3;\n    sig += warbleSquare(time, clock, note2Freq(65.), 8.0, note2Freq(12.)) * 0.3;\n    \n    sig /= 10.;\n    return sig;\n}\n\nvec2 kick(float time, float clock, float offset, float freq, float high) {\n    float loop = fract(time-offset);\n    float env = exp(-3.0*loop);\n    return square(clock, freq, env * high) * vec2(env);\n}\n\nvec2 kickPile(float time, float clock) {\n    vec2 sig;\n    sig += kick(time, clock, 0.0, note2Freq(40.), 1000.);\n    sig += kick(time, clock, 0.1, note2Freq(24.), 1100.)*0.5;\n    sig += kick(time, clock, 0.2, note2Freq(24.), 1200.)*0.4;\n    sig += kick(time, clock, 0.3, note2Freq(24.), 1300.)*0.3;\n    sig += kick(time, clock, 0.4, note2Freq(24.), 1400.)*0.2;\n    sig += kick(time, clock, 0.5, note2Freq(24.), 1500.)*0.1;\n    sig /= 6.;\n    return sig;\n}\n\nvec2 mainSound( in int samp,float time) {\n    float clock = time * TWOPI;\n    \n    //vec2 sig = broth(time, clock)*0.3;\n\tvec2 sig = minestrone(time, clock)*0.3;\n    vec2 kicks = kickPile(time, clock);\n    kicks *= clamp(time * 0.1, 0., 1.);\n    \n    sig += kicks;\n\n    \n    return sig;\n}","name":"Sound","description":"","type":"sound"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":true,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"MtBGz1","date":"1426871802","viewed":176,"name":"square-scratch","username":"lukexi","description":"square tests","likes":4,"published":1,"flags":8,"usePreview":0,"tags":["sound"],"hasliked":0,"parentid":"","parentname":""}}