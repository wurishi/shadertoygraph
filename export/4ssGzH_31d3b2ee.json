{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"music","id":"4sXGzn","filepath":"/media/a/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"float FloorVal = 30.0;\r\n\r\nfloat FloorMe(in float val)\r\n{\r\n\treturn floor(val*FloorVal)/FloorVal;\r\n}\r\n\r\nvec3 GetNearest(vec2 RayDir, vec2 uv)\r\n{\r\n\tvec2 Decal = RayDir / iResolution.xy * 3.0;\r\n\tvec2 StartUV = uv;\r\n\tvec3 Final = vec3(0.0);\r\n\tfloat IsCol = 0.0;\r\n\tfor(float i=0.0; i<80.0; ++i)\r\n\t{\r\n\t\tfloat Val = texture(iChannel0, vec2(FloorMe(StartUV.x), 0.0)).r;\r\n\t\tfloat Col = Val > StartUV.y ? 1.0 : 0.0;\r\n\t\tFinal = mix(vec3(StartUV.x, Val, i/30.0), Final, IsCol);\r\n\t\tIsCol = max(Col, IsCol);\r\n\t\tStartUV += Decal;\r\n\t}\r\n\treturn Final;\r\n}\r\n\r\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\r\n{\r\n\t\r\n\tvec3 Decal;\r\n\tDecal.x = texture(iChannel0, vec2(0.3, 0.0)).x * 5.0 - iTime * 0.6;\r\n\tDecal.y = texture(iChannel0, vec2(0.5, 0.0)).x * 5.0 - iTime * 0.4;\r\n\tDecal.z = texture(iChannel0, vec2(0.7, 0.0)).x * 5.0 - iTime * 0.3;\r\n\t\r\n\tfloat BaseX = 0.0;\r\n\tfloat BaseY = -0.05;\r\n\tvec2 uv = fragCoord.xy / iResolution.xy;\r\n\t\t\r\n\tfloat DirDecal = texture(iChannel0, vec2(0.7, 0.5)).x * 1.0;\r\n\tvec2 Dir = normalize(uv-vec2(sin(iTime / 2.0)+ 0.5 + DirDecal,1.2));\r\n\t\r\n\t//vec2 Prev = GetNearest(vec2(-1.0, -0.7), uv - 1.0/iResolution.x);\r\n\tvec3 Cur = GetNearest(Dir, uv);\r\n\tvec3 Next = GetNearest(Dir, uv - vec2(2.0/iResolution.x, 0.0));\r\n\t\r\n\t\r\n\tfloat Lum = 1.2-abs(Cur.x-Next.x) * 100.0;\t\r\n\tfloat Lum2 = Cur.z * 10.0 + 1.0-(Cur.y-uv.y-0.2) * 4.0;\r\n\tvec3 select = abs(fract(FloorMe(Cur.x)*vec3(3.0,4.0,1.0) + Decal)-0.5)*2.0;\r\n\t\r\n\tvec3 colour = select*Lum2*(1.0-Cur.z);\r\n\t\r\n\tfloat LumCol = 1.0-dot(max(colour,vec3(0.0)),vec3(0.333));\r\n\t\r\n\tfloat Stars = texture(iChannel0, vec2(abs(fract(uv.y + Decal.x))*0.5+0.5, 0.1)).x;\r\n\tfloat Stars2 = texture(iChannel0, vec2(abs(fract(uv.x - Decal.y))*0.5+0.5, 0.0)).x;\r\n\t\r\n\tvec3 StarsColor = mix(vec3(1.0, 0.6, 0.0), vec3(0.2, 0.2, 1.0), Stars);\r\n\tvec3 StarsColor2 = max(vec3(0.0), mix(StarsColor, StarsColor.yzx, Stars2)*vec3(2.0)-vec3(0.5));\r\n\tfragColor = vec4(max(colour, vec3(-0.2))+StarsColor2*LumCol, 1.0);\r\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4ssGzH","date":"1362651201","viewed":469,"name":"Hysto","username":"NuSan","description":"Hystogram extruded","likes":13,"published":1,"flags":0,"usePreview":0,"tags":["2d","sound","fft"],"hasliked":0,"parentid":"","parentname":""}}