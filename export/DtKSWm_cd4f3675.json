{"ver":"0.1","info":{"id":"DtKSWm","date":"1686200806","viewed":91,"name":"五角星散开","username":"luckduck","description":"自己用于按钮点击效果的简单特效","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["star","effect"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.1415926;\nconst float STAR_CNT = 5.;\nconst vec4 COL = vec4(1., 1., 0.75, 1.);\nfloat pro;\nvec2 rotz(vec2 p, float a) {\n    float c = cos(a);\n    float s = sin(a);\n    return mat2(c, -s, s, c) * p;\n}\n\nfloat sdStar5(in vec2 p, in float r, in float rf)\n{\n    const vec2 k1 = vec2(0.809016994375, -0.587785252292);\n    const vec2 k2 = vec2(-k1.x,k1.y);\n    p.x = abs(p.x);\n    p -= 2.0*max(dot(k1,p),0.0)*k1;\n    p -= 2.0*max(dot(k2,p),0.0)*k2;\n    p.x = abs(p.x);\n    p.y -= r;\n    vec2 ba = rf*vec2(-k1.y,k1.x) - vec2(0,1);\n    float h = clamp( dot(p,ba)/dot(ba,ba), 0.0, r );\n    return length(p-ba*h) *sign(p.y*ba.x-p.x*ba.y);\n}\n\n\n\nvec4 star(vec2 uv, vec4 c){\n    float scalepro = max(0.,pow(sin(pro*PI),0.3));\n    uv /= scalepro+0.000001;\n    \n    float len = sdStar5(uv,0.05*scalepro,0.6);\n    len = max(len,0.);\n    return c * (0.003*(scalepro+1.)/len);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = ( 2. * fragCoord - iResolution.xy ) / iResolution.y;\n    uv*=0.5;\n    pro = sin(iTime*3.)*0.5+0.5;\n    \n    fragColor = vec4(0.);\n    for(float i=0.;i<STAR_CNT;i++){\n        float rad = i*PI/STAR_CNT*2.+PI*0.1+iTime*2.;\n\n        vec2 rotuv = mat2(cos(rad),-sin(rad),sin(rad),cos(rad))*vec2((0.2)*(pro),0.);\n        vec2 _uv = rotz(uv-rotuv, iTime*2.+PI/3.*i);\n        fragColor +=  star(_uv, COL);\n    }\n\n}","name":"Image","description":"","type":"image"}]}