{"ver":"0.1","info":{"id":"M3GSDG","date":"1720421707","viewed":27,"name":"space gems","username":"crabbypatty","description":"gems in space (hallucinogens may be involved)","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","spacedistortion"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n// raymarching try inspired by @kishimisu\n// https://www.youtube.com/watch?v=khblXafu7iA\n\nmat2 rotate2d(float angle){\n    return mat2(cos(angle), -sin(angle),\n                sin(angle), cos(angle));\n}\n\n// palette formula from\n// https://iquilezles.org/articles/palettes/\n// gradient from\n// https://dev.thi.ng/gradients/\n\nvec3 palette( float t ) {\n    vec3 a = vec3(0.650, 0.500, 0.310);\n    vec3 b = vec3(-0.650, 0.658, 0.600);\n    vec3 c = vec3(0.333, 0.278, 0.278);\n    vec3 d = vec3(0.660, 0.000, 0.667);\n\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\nvec3 transform(vec3 p) {\n    p.xy *= rotate2d(sin(iTime + p.z) * 0.1);\n    p.z += iTime * 0.25;\n    vec3 modv = vec3(1.0, 1.0, 1.0);\n    p = mod(p, modv) - (modv / 2.0);\n    return p;\n}\n\nfloat map(vec3 p) {\n    vec3 sphere = vec3(0.0, 0.0, 0.0);\n    float spherer = 0.2;\n    float d = length(p - sphere) - spherer;\n    return d;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;\n\n    vec3 ro = vec3(0.0, 0.0, -5.0);\n    vec3 rd = normalize(vec3(uv, 1.0));\n    vec3 rp = ro;\n    vec3 color = vec3(1.0, 1.0, 1.0);\n\n    for (int i = 0; i < 40; i++) {\n        float d = map(transform(rp));\n        if (d < 0.001) {\n            color = palette(length(rp - ro) * 0.4 + float(i) * 0.025);\n            break;\n        }\n        if (d > 100.0) {\n            break;\n        }\n        rp += d * rd;\n    }\n\n    fragColor = vec4(color, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}