{"ver":"0.1","info":{"id":"dsXBDN","date":"1688738188","viewed":136,"name":"Kuwahara  filter","username":"Electro98","description":"First \"real\" shader.","likes":5,"published":1,"flags":0,"usePreview":1,"tags":["filter","kuwahara"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"int a = 3;\n\nvec4 std(vec2 startPoint, vec2 endPoint) {\n    float area = 0.0;\n    vec3 mean = vec3(0.0);\n    vec3 variance = vec3(0.0);\n    for (float x = startPoint.x; x <= endPoint.x; ++x) {\n        for (float y = startPoint.y; y <= endPoint.y; ++y) {\n            vec2 pos = vec2(x, y) / iResolution.xy;\n            vec3 color = texture(iChannel0, pos).rgb;\n            mean += color;\n            variance += color * color;\n            ++area;\n        }\n    }\n    mean /= area;\n    variance = variance / area - mean * mean;\n    return vec4(sqrt(variance.r + variance.g + variance.b), mean);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    if (fragCoord.x < iMouse.x)\n\t{\n        vec3 c = texture(iChannel0, (fragCoord.xy / iResolution.xy)).rgb;\n\t\tfragColor = vec4(c, 1.0);\n\t\t\n\t} else {\n        vec4 stds[4];\n        stds[0] = std(fragCoord, fragCoord + vec2(a));\n        stds[1] = std(fragCoord - vec2(a, 0), fragCoord + vec2(0, a));\n        stds[2] = std(fragCoord - vec2(a), fragCoord);\n        stds[3] = std(fragCoord - vec2(0, a), fragCoord + vec2(a, 0));\n\n        vec3 color = stds[0].yzw;\n        float minVariance = stds[0].x;\n        for (int i = 1; i < 4; ++i) {\n            if (stds[i].x < minVariance) {\n                minVariance = stds[i].x;\n                color = stds[i].yzw;\n            }\n        }\n\n        fragColor = vec4(color, 1.0);\n    }\n}","name":"Image","description":"","type":"image"}]}