{"ver":"0.1","info":{"id":"lfXGzH","date":"1702730812","viewed":43,"name":"Simple buffered audio visualizer","username":"rafa_br34","description":"Just a simple audio visualizer that I did primarily to test the inputs.\nBuffer A: Audio processing\nBuffer B: IO\nA/D: Decrease/Increase size\nSet the audio in the Buffer A tab.","likes":1,"published":3,"flags":112,"usePreview":0,"tags":["audio","visualizer","buffered"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 FragColor, in vec2 FragCoord) {\n    FragColor = READP_V4(C_AudioBuffer, FragCoord);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsd3zf","filepath":"https://soundcloud.com/monstercat/ephixa-dreamstate","previewfilepath":"https://soundcloud.com/monstercat/ephixa-dreamstate","type":"musicstream","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// Tracks:\n// https://soundcloud.com/azerkd/balaganazerkd-bootleg-skazi-free-download\n// https://soundcloud.com/nocopyrightsounds/oneeva-platform-9-ncs-release\n// https://soundcloud.com/monstercat/ephixa-dreamstate\n// https://soundcloud.com/alteza-records/whiteno1se-terra-astro-alteza-records\n\n\nvoid mainImage(out vec4 FragColor, in vec2 FragCoord) {\n    if (FragCoord.y <= 1.0) {\n        float Size = mix(512.0, float(RESX), READP_V4(C_DataBuffer, ivec2(1, 1)).x);\n        float X = (FragCoord.x / Size) * 512.0;\n        \n        FragColor = vec4(\n            READP_V4(C_AudioInput, ivec2(X, 0)).x,\n            0.0,\n            READP_V4(C_AudioInput, ivec2(X, 1)).x,\n            1.0\n        );\n    }\n    else {\n        FragColor = READP_V4(C_AudioBuffer, ivec2(FragCoord + vec2(0.0, -1.0)));\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define C_AudioBuffer iChannel0\n#define C_DataBuffer iChannel1\n#define C_AudioInput iChannel2\n#define C_Keyboard iChannel3\n\n\n#define RESX uint(iResolution.x)\n#define RESY uint(iResolution.y)\n\n#define FLATTEN_V2(Width, Vector) ((Width) * (Vector).y + (Vector).x)\n\n#define READP_V4(Buffer, Position) texelFetch(Buffer, ivec2(Position), 0)\n#define READP_F32(Buffer, Position) READP_V4(Buffer, ivec2(Position) / 4)[FLATTEN_V2(2, ivec2(Position)) % 4]\n#define READP_U8(Buffer, Position) READP_F32(Buffer, ivec2(Position) / 4)[FLATTEN_V2(2, ivec2(Position)) % 4]\n\n\n#define READI_V4(Buffer, Index) READP_V4(Buffer, ivec2(uint(Index) % RESX, uint(Index) / RESX))\n#define READI_F32(Buffer, Index) READI_V4(Buffer, uint(Index) / 4u)[uint(Index) % 4u]\n#define READI_U8(Buffer, Index) (uint(READI_F32(Buffer, uint(Index) / 4u)) & (0xFFu << ((Index % 4u) * 8u))) >> ((Index % 4u) * 8u)\n\n#define RAND_STATE(Coord) ((RESX * uint(Coord.y) + uint(Coord.x) + 1u) * uint(iFrame))\n\n#define UI8(V) uint(int(V) % 256)\n#define FUI8(V) float(UI8(V)) / 255.0","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"\n\n\nvoid mainImage(out vec4 FragColor, in vec2 FragCoord) {\n    float Size = READP_V4(C_DataBuffer, ivec2(0, 0)).x;\n    \n    // Keycode A\n    if (READP_V4(C_Keyboard, ivec2(65, 0)).x > 0.0 && Size > 0.0) Size -= 0.004;\n    \n    // Keycode D\n    if (READP_V4(C_Keyboard, ivec2(68, 0)).x > 0.0 && Size < 1.0) Size += 0.004;\n    \n    \n    FragColor = vec4(Size, 0.0, 0.0, 0.0);\n}","name":"Buffer B","description":"","type":"buffer"}]}