{"ver":"0.1","info":{"id":"mtdGz7","date":"1689764466","viewed":83,"name":"voxel tunnel_deleting","username":"pik","description":"sample","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["sample"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float map(vec3 p,inout float g,in vec3 cam)\n{\n    p.x+=0.5+2.*sin(p.z);//+2.5*sin(p.z);\n    float d=-length(p.xy)+5.;\n    g+=0.015/(0.01+d*d);\n    float cp=length(p-cam)-7.;\n    \n    return max(d,-cp);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = 2.*fragCoord/iResolution.xy-1.;\n    uv.x*=iResolution.x/iResolution.y;\n    \n    vec3 cam=vec3(3.*sin(iTime),2.*cos(iTime),-2.+iTime*3.);\n    vec3 tar=vec3(3.*sin(iTime),2.*cos(iTime),0.+iTime*3.);\n    vec3 fo=normalize(tar-cam);\n    float FoV=1.;\n    vec3 up=vec3(0.,1.,0.);\n    vec3 si=normalize(cross(fo,up));\n    up=normalize(cross(si,fo));\n    vec3 rd=normalize(uv.x*si+uv.y*up+FoV*fo);\n    vec3 rp=cam;\n\n    float g=0.;\n    vec3 f=floor(rp);\n    vec3 delta=1./abs(rd);\n    vec3 dir=sign(rd);\n    vec3 side=(f-rp)*delta*dir;\n    vec3 mask=vec3(0.);\n    for(int i=0;i<299;i++)\n    {\n        if(map(f,g,cam)<0.0){break;}\n        mask=step(side,side.yzx)*step(side,side.zxy);\n        f+=mask*dir;\n        side+=mask*delta;\n    }\n    \n    vec3 m=vec3(1.)*length(mask*vec3(1.,0.5,.075));\n    vec3 c=mix(vec3(0.3,0.2,0.6),vec3(0.5,0.9,0.7),m);\n    c+=g*0.05;\n    \n    fragColor = vec4(c,1.0);\n}\n\n//thx https://www.shadertoy.com/view/MscBRs","name":"Image","description":"","type":"image"}]}