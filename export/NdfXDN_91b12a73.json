{"ver":"0.1","info":{"id":"NdfXDN","date":"1619288774","viewed":125,"name":"Quilez Basic Raytracer I","username":"GuroGuru","description":"Studying IÃ±igo Quilez basic raytracer. Using box intersector.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["raytracing","box","intersector"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Intersectors: https://iquilezles.org/articles/intersectors\nfloat boxIntersector( vec3 ro, vec3 rd ) \n{\n    vec3 boxSize = vec3(1.0);\n    vec3 m = 1.0/rd; // can precompute if traversing a set of aligned boxes\n    vec3 n = m*ro;   // can precompute if traversing a set of aligned boxes\n    vec3 k = abs(m)*boxSize;\n    vec3 t1 = -n - k;\n    vec3 t2 = -n + k;\n    float tN = max( max( t1.x, t1.y ), t1.z );\n    float tF = min( min( t2.x, t2.y ), t2.z );\n    if( tN>tF || tF<0.0) return -1.0; // no intersection\n    return tN;\n}\n\n// Raytracer: https://www.youtube.com/watch?v=9g8CdctxmeU\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    // Time varying pixel color\n    vec3 col = 0.5 + 0.5*cos( iTime+uv.xyx + vec3( 0, 2, 4 ) );\n\n    // Ray\n    vec3 ro = vec3( 0.0, 0.0, 4.0 );\n    vec3 rd = normalize( vec3( ( -1.0 + 2.0 * uv ) * vec2( 1.78, 1.0 ), -1.0 ) );\n\n    // Transforms\n    float angle = iTime * 0.5;\n    mat3 rotX = mat3 ( \n        1.0, 0.0,           0.0, \n        0.0, cos( angle ), -sin( angle ), \n        0.0, sin( angle ),  cos( angle )\n    );\n    mat3 rotY = mat3( \n        cos( angle ),  0.0, sin( angle ), \n        0.0,           1.0, 0.0, \n        -sin( angle ), 0.0, cos( angle ) \n    );\n\n    // Transform ray\n    ro *= rotY * rotX;\n    rd *= rotY * rotX;\n\n    // Intersection\n    float id = boxIntersector( ro, rd ) * 1.5; \n    \n\n    // Output to screen\n    fragColor = vec4(col + 0.15, 1.0) * id + vec4(col + 0.1, 1.0) * (1.0 - id);\n    \n}\n","name":"Image","description":"","type":"image"}]}