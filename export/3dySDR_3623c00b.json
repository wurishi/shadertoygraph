{"ver":"0.1","info":{"id":"3dySDR","date":"1573986341","viewed":225,"name":"Knob Rubber","username":"andremichelle","description":"Rubber type knob","likes":1,"published":3,"flags":0,"usePreview":0,"tags":["knob"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159\n\nvec4 over( in vec4 a, in vec4 b ) {\n    return mix(a, b, 1.-a.w);\n}\n\nfloat nCap(vec2 uv, float angle, float r, float r1, float n) {\n\tfloat r2 = 1./r1;\n    float a = atan(uv.y, uv.x)+angle;\n    float b = a/PI*n/2.+PI*r2*2.0;\n    float f = fract(b);\n    float l = length(uv);\n    float d = sin(f*PI*r2) * step(f, r1);\n    return (1.-d*0.05)*r-l;\n}\n\nfloat line( in vec2 p, in vec2 a, in vec2 b ) {\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\nmat2 rot(float a) {\n    float c = cos(a);\n    float s = sin(a);\n    return mat2(c, s, -s, c);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = (fragCoord-iResolution.xy*0.5)/-iResolution.y*2.0;\n    \n    float av = sin(iTime)*PI*5./6.; // angle value\n    \n    mat2 m = mat2(cos(av), sin(av), -sin(av), cos(av));\n    \n    float a = atan(uv.y, uv.x);\n    float l = length(uv);\n\tfloat g = -1. + smoothstep(.5, -.5, uv.y) * 2.;\n\n    vec4 col = vec4(vec3(.04), 1.); // background\n    vec2 la = vec2(.0, -.24)*m;\n    vec2 lb = vec2(.0, -.41)*m;\n    \n    float d = .0;\n    float e = .0;\n    for(float q = 0. ; q < 11. ; q += 1.) {\n        float aq = -PI*1./3.+q*PI*1./6.;\n        vec2 v = vec2(.66, .0) * rot(aq);\n        d += smoothstep(.01, .0, distance(uv, v)-.002);\n        e += smoothstep(.02, .0, distance(uv, v)-.008);\n    }\n    col = over(vec4(vec3(e*e), d*d), col); // divs\n    \n    col = over(vec4(vec3(.20+g*.08-(l-.48)), smoothstep(.02, .0, l-.48)), col); // bottom\n    col = over(vec4(vec3(.16), smoothstep(.002, .0, l-.40)), col); // bottom to cap\n    col = over(vec4(vec3(.36 - smoothstep(.2, .8, l)*0.4), smoothstep(.02, .0, l-.38)), col); // cap\n    col = over(vec4(vec3(.50), max(0., (1.-pow(abs(uv.x), .25)))*smoothstep(.02, 0., abs(l-.37))), col); // cap bevel\n\n    col = over(vec4(vec3(1.), smoothstep(.01, .0, line(uv, vec2(.0, -.2)*m, vec2(.0, -.35)*m)-.01))*.8, col);\n    \n    \n\tfragColor = col;\n}","name":"Image","description":"","type":"image"}]}