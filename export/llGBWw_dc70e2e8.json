{"ver":"0.1","info":{"id":"llGBWw","date":"1542741404","viewed":506,"name":"Particle system test","username":"Sunpy","description":"I just wrote stuff... and things happened...","likes":14,"published":1,"flags":0,"usePreview":0,"tags":["particles"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SEED 0.12345679\n#define GRAV vec2(0.,-.26)\n#define SIZE 0.024\n#define DIE_TIME 0.9\n#define PARTICLE_COUNT 320.0\n#define PI 3.14159265359\n\nfloat rand (vec2 p) {\n    return fract(sin(dot(p.xy,\n                         vec2(6.8245,7.1248)))*\n        9.1283);\n}\n\nfloat particle(vec2 uv, float identifier, vec2 anchor, vec2 velocity, float creationTime) {\n    float particleTime = max(0., iTime - creationTime);\n\n    float size = max(0., DIE_TIME - particleTime) * SIZE;\n\n    vec2 velocityOffset = velocity * particleTime;\n    vec2 gravityOffset = GRAV * pow(particleTime, 1.798);\n    \n    vec2 point = anchor + velocityOffset + gravityOffset;\n    \n    float dist = distance(uv, point);\n    float hit = smoothstep(size, 0., dist);\n    \n    return hit;\n}\n\nvec3 currentColor() {\n  float c = iTime * 0.2;\n  float r = sin(c * PI) / 2. + .5;\n  float g = sin((c + .6) * PI) / 2. + .5;\n  float b = sin((c + 1.2) * PI) / 2. + .5;\n  return vec3(r, g, b);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy/iResolution.xx;\n    vec3 col = vec3(0.);\n\n    \n    for (float i = 0.0; i < PARTICLE_COUNT; i++) {\n      float seed = SEED + floor(i / PARTICLE_COUNT + iTime);\n\n      vec2 anchor = vec2(0.5, 0.3);\n      vec2 velocity = vec2(mix(-.5, .5, rand(vec2(seed, i))), mix(-.5, .5, rand(vec2(i, seed) / 3.)));\n      \n      float creationTime = iTime - fract(i / PARTICLE_COUNT + iTime);\n      \n      col += particle(uv, 0., anchor, velocity, creationTime) * currentColor();\n    }\n\n    col = smoothstep(.6, .9, col);\n\n    \n    fragColor = vec4(col, 1.);\n}","name":"Image","description":"","type":"image"}]}