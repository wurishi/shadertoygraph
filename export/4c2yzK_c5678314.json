{"ver":"0.1","info":{"id":"4c2yzK","date":"1722873848","viewed":33,"name":"rm ui","username":"prismer","description":"0","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["terrariamod"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float nrand(float x, float y){\n  return fract(sin(dot(vec2(x, y), vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nconst float rows_cnt = 64.0;\nconst float jitter_power = 0.02;\nconst float jitter_ratio = 0.9;\nconst float shake_power = 0.02;\nconst float drift_power = 0.04;\nconst float period = 3.0;\nconst vec2 block1_cnt = vec2(4, 4);\nconst vec2 block2_cnt = vec2(7, 7);\nconst float block_threshold = 6.0;\nconst float block_refresh_time = 0.05;\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord / iResolution.xy;\n    float phase = mod(iTime, period) / period;\n    float time_factor = smoothstep(0.0, 0.5, phase) - smoothstep(0.5, 1.0, phase);\n    \n    float jitter = nrand(floor(uv.y * rows_cnt) / rows_cnt, iTime) * 2.0 - 1.0;\n    jitter *= step(1.0 - jitter_ratio * time_factor, abs(jitter)) * jitter_power * time_factor;\n    float shake = (nrand(0.114, iTime) - 0.5) * shake_power * time_factor;\n    float drift = nrand(nrand(floor(uv.x * rows_cnt), floor(uv.y * rows_cnt)), iTime) * drift_power * time_factor;\n    \n    float block1 = nrand(floor(iTime / block_refresh_time) + 0.514, \n          nrand(floor(uv.x * block1_cnt.x), floor(uv.y * block1_cnt.y)));\n    float block2 = nrand(floor(iTime / block_refresh_time) + 0.514, \n          nrand(floor(uv.x * block2_cnt.x), floor(uv.y * block2_cnt.y)));\n    float block = pow(block1 * block2, block_threshold) * time_factor;\n    \n    vec2 texuv1 = fract(vec2(uv.x + jitter + shake + drift, uv.y));\n    vec2 texuv2 = fract(vec2(uv.x + jitter + shake + block, uv.y));\n    vec2 texuv3 = fract(vec2(uv.x + jitter + shake - block, uv.y));\n    \n    float colorR = texture(iChannel0, texuv1).r;\n    float colorG = mix(texture(iChannel0, texuv2).g, texture(iChannel1, uv).g, block);\n    float colorB = mix(texture(iChannel0, texuv3).b, texture(iChannel1, uv).b, block);\n\n    fragColor = vec4(colorR, colorG, colorB, 1);\n    // fragColor = vec4(1, 1, 1, 1) * block;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    int fx = 256 - 15;\n    int parts = int(iResolution.x) / (fx / 6);\n    int deltaY = abs(32 * parts - int(iResolution.y)) / 2;\n    vec2 uv = vec2(fragCoord.x + float(((iFrame / 12 % 6) * fx / 6) * parts),\n              \t   fragCoord.y + float(deltaY));\n    \n    ivec2 p = ivec2(uv) / parts;\n    \n    vec4 nyanColor = texelFetch(iChannel0, p, 0);\n    fragColor = nyanColor;\n}","name":"Buffer A","description":"","type":"buffer"}]}