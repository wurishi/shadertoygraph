{"ver":"0.1","info":{"id":"3s2XDy","date":"1555304131","viewed":61,"name":"RayMarching_0001","username":"yamazaki","description":"study RayMarching","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["raymarching"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define STEPS 64\n\nfloat map(vec3 p,float r){\n\n    vec3 pos = p + vec3(0.0f, 10.0f,0.0f);\n    p = fract(pos) * 2.0 - 1.0;\n    return length(p) - r;\n\n}\n\nfloat trace(vec3 o,vec3 r){\n    \n    float maxd = 10.0f;\n    \n    float t=0.0f;\n    float h=1.0f; \n    \n    for(int i = 1 ; i < STEPS ; ++i ){\n    \n        vec3 pos =o+(r*t);\n        \n        if( h<0.001f || t>maxd ) break;\n    \n        h = map(pos ,0.5f);\n        \n        t += h*0.5f;\n               \n    }\n    \n    return t;\n} \n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    uv =(uv * 2.0f) -1.0f;\n\tuv.x *= iResolution.x/iResolution.y;       \n        \n    vec3 o = vec3(0,0,iTime*1.5f);     \n    vec3 r = vec3(uv.x,uv.y,1); \n    r = normalize(r);\n    \n    float d = trace(o, r);\n    \n    vec3 c = 1.0 / vec3(1.0 + d);\n    \n    fragColor = vec4(1.0 - c, 1.0);\n}","name":"Image","description":"","type":"image"}]}