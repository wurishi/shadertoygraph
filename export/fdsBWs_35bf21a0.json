{"ver":"0.1","info":{"id":"fdsBWs","date":"1645561811","viewed":129,"name":"pulse wave synth","username":"blower5","description":"sequencer, synthesiser, and visualizer","likes":2,"published":1,"flags":8,"usePreview":0,"tags":["sequencer"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//wave renderer from https://www.shadertoy.com/view/WsjcDz\nvoid mainImage(out vec4 fragColor, vec2 fragCoord)\n{\n    int tick = int(floor(iTime/(0.625/bpm)));\n    int ltick = tick % loopt;\n    //set index to next note\n    int i = 0;\n    while (ltick > seq1[i+2] && seq1[i] >= 0) {\n        i += 3;\n    }\n    vec2 uv = fragCoord / iResolution.xy;\n    float movex = uv.x / 5.0 - iTime / 20.0,\n          movey = uv.y + sin(iTime*2.0+uv.x*4.0)/20.0,\n          wave = 0.0;\n    if (seq1[i] <= ltick && seq1[i+2] > ltick) {\n        //clamped sine instead of the pulse wave for cleaner look (?)\n        wave = clamp(sin(ntof(float(seq1[i+1]))*movex), -0.1,0.1)*5.0+1.0;\n    } else {\n        wave = 1.0;\n    }\n    float v = movey - 0.5*wave;\n   \n   fragColor = vec4(0.0, 1.0-abs(v)/fwidth(v)/1.5, 0.0, 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float VOLUME = 0.2;\n\nfloat saw(float note, float vol, float t){\n    float frq = ntof(note);\n    return mod(t,1.0 / frq)*frq*vol;\n}\n//create a pulse wave with pitch and volume\nfloat sqr(float note, float vol, float plse, float t){\n    float frq = ntof(note);\n    return ceil(sin(6.2832*frq*t)/2.0+plse)*vol;\n}\nvec2 mainSound( int samp, float time ) {\n    int tick = int(floor(time/(0.625/bpm)));\n    int ltick = tick % loopt;\n    //set index to next note\n    int i = 0;\n    while (ltick > seq1[i+2] && seq1[i] >= 0) {\n        i += 3;\n    }\n    if (seq1[i] <= ltick && seq1[i+2] > ltick) {\n        return vec2( sqr(float(seq1[i+1]-12),VOLUME,sin(time)/4.0-0.1,time) );\n    } else {\n        return vec2(0.0);\n    }\n}\n\n","name":"Sound","description":"","type":"sound"},{"inputs":[],"outputs":[],"code":"//notes, formated: tick at note on, midi note value, tick at note off\nint[] seq1 = int[] (\n    0,39,76,\n    96,63,120,\n    144,51,168,\n    192,39,268,\n    288,39,327,\n    336,51,360,\n    384,63,408,\n    432,70,520,\n    528,63,552,\n    576,70,613,\n    624,61,648,\n    672,55,691,\n    720,49,739,\n    768,39,844,\n    864,63,888,\n    912,51,936,\n    960,39,1005,\n    1008,63,1032,\n    1104,73,1192,\n    1200,63,1224,\n    1248,51,1272,\n    1296,58,1320,\n    1344,62,1368,\n    1392,57,1416,\n    1440,50,1464,\n    1488,45,1507,\n    1536,39,1612,\n    1632,63,1656,\n    1680,51,1704,\n    1728,39,1804,\n    1824,39,1863,\n    1872,51,1896,\n    1920,63,1944,\n    1968,70,2056,\n    2064,63,2088,\n    2112,70,2149,\n    2160,61,2184,\n    2208,55,2227,\n    2256,49,2275,\n    2304,39,2380,\n    2400,63,2424,\n    2448,51,2472,\n    2496,39,2539,\n    2544,63,2568,\n    2638,76,2735,\n    2736,83,2750,\n    2751,76,2766,\n    2768,64,2783,\n    2784,52,2808,\n    2832,58,2856,\n    2880,88,2904,\n    2928,70,2952,\n    2976,52,2995,\n    3024,40,3043,\n    3072,39,3148,\n    3168,63,3192,\n    3216,51,3240,\n    3264,39,3340,\n    3360,39,3399,\n    3408,51,3432,\n    3456,63,3480,\n    3504,70,3592,\n    3600,63,3624,\n    3648,70,3685,\n    3696,61,3720,\n    3744,55,3763,\n    3792,49,3811,\n    3840,39,3916,\n    3936,63,3960,\n    3984,51,4008,\n    4032,39,4077,\n    4080,63,4104,\n    4176,73,4264,\n    4272,63,4296,\n    4320,51,4344,\n    4368,58,4392,\n    4416,62,4440,\n    4464,57,4488,\n    4512,50,4536,\n    4560,45,4579,\n    4608,39,4684,\n    4704,63,4728,\n    4752,51,4776,\n    4800,39,4876,\n    4896,39,4935,\n    4944,51,4968,\n    4992,63,5016,\n    5040,70,5128,\n    5136,63,5160,\n    5184,70,5221,\n    5232,61,5256,\n    5280,55,5299,\n    5328,49,5347,\n    5376,39,5452,\n    5472,63,5496,\n    5520,51,5544,\n    5568,39,5612,\n    5616,63,5640,\n    5710,76,5806,\n    5808,83,5822,\n    5823,76,5838,\n    5840,64,5854,\n    5856,52,5880,\n    5904,58,5928,\n    5952,88,5968,\n    5984,70,6002,\n    6016,52,6036,\n    6048,71,6072,\n    6080,64,6104,\n    6108,52,6137,\n    -1,0,-1\n);\n//BPM\nfloat bpm = 280.0;\n//loop tick\nint loopt = 6144;\n\n//note number to frequency  from https://www.shadertoy.com/view/ldfSW2\nfloat ntof(float n){return (n>0.0)?440.0 * pow(2.0, (n - 67.0) / 12.0):0.0;}\n","name":"Common","description":"","type":"common"}]}