{"ver":"0.1","info":{"id":"ssX3Wl","date":"1616787410","viewed":72,"name":"avoodoocado_truchet","username":"avoodoocado","description":"Simple truchet effect","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["truchet"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float hash21(vec2 p)\n{\n    p = fract(p * vec2(231.443, 641.431));\n    p += dot(p, p+32.54);\n    return mod(fract(p.x*p.y), 1.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xx;\n\n    // Zoom\n    float zoom = 1.0 + 0.0 * sin(iTime);\n    \n    uv *= zoom * vec2(8.0, 8.0);\n\n    // Scroll\n    uv += iTime * vec2(2.2, 1.1);\n\n    vec2 pos = uv;\n\n    vec2 frac = mod(pos, 1.0);\n    vec2 id = floor(pos);\n\n    // To make the snakes turn in a consistent direction\n    float flip = 1.0;\n    if(mod(id.x+id.y, 2.0) == 1.0)\n        flip = -1.0;\n\n    // Randomly flip some squares\n    float n = hash21(id);       \n    if(mod(n, 1.0) > .5)\n        frac.x = 1.0 - frac.x;\n\n    // Center of each circle segment\n    vec2 center = vec2(0.0, 0.0);\n    \n    // Second circle segment\n    if(frac.x + frac.y > 1.0)\n         center = vec2(1.0, 1.0);\n    \n    vec2 suv = center - frac;\n    float l = length(suv);\n    float width = 0.1;\n    float fade = 0.1;\n    float s = smoothstep(width + fade, width, abs(l - 0.5));\n \n    vec2 xy = vec2(abs(l - 0.5) / width, iTime+2.0/3.14*atan(flip * suv.y / suv.x));\n    vec3 normal = vec3(xy.x);\n\n    vec3 col = s * texture(iChannel0, uv).rgb;\n    \n    //col = normal;\n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}