{"ver":"0.1","info":{"id":"WttXWf","date":"1581866656","viewed":126,"name":"Light  Pillar","username":"aodnawg","description":"inspired: \n\n- https://neort.io/art/bk5brjk3p9f1nni4gddg\n- https://www.shadertoy.com/view/wl2GWG\n","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["raymarch"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"mat2 rot(float a) {\n\treturn mat2(\n    \tcos(a), sin(a), -sin(a), cos(a)\n    );\n}\n\nfloat sdRoundBox( vec3 p, vec3 b, float r )\n{\n    \n  vec3 q = abs(p) - b;\n  return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0) - r;\n}\n\nfloat map(vec3 p) {\n    vec3 pos = vec3(0,0,10);\n    pos = pos-p;\n    pos = abs(pos) - 2.;\n    \n   \tfor(int i=0; i<10; i++) {\n \t  \tpos = abs(pos) - 3.;\n        pos.xz *= rot(iTime*.1);\n\t}\n    \n    pos.xz *= rot(iTime);\n    pos.xz *= 1.+sin(p.y+iTime)*.5+sin(p.y+iTime*2.14)*.2+.3;\n    pos.xz *= rot(p.y);\n    // pos.yz *= rot(iTime);\n    return sdRoundBox(pos, vec3(1.,10000.,1.), .2);\n\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n    vec3 col = vec3(0.);\n    vec3 lookat = vec3(0,-8.,3)+vec3(sin(iTime*.1)+sin(iTime*.1+21.14)*.2,0,0);\n    vec3 ro = vec3(0);\n\n    vec3 forward = normalize(lookat-ro);\n    vec3 right = cross(forward, vec3(0,1,0));\n    vec3 up = cross(forward, right);\n    float z = 1.5;\n    vec3 center = ro + forward*z;\n    vec3 i = center + up*uv.y + right*uv.x;\n    \n    vec3 rd = normalize(i-ro);\n    \n    \n    // vec3 rd = vec3(vec3(uv,z)-ro);\n    // vec3 rd = normalize(target-ro)+vec3(uv,0.);\n\t\n    vec3 p = vec3(0.);\n    float t,c;\n\n    for(int i=0; i<1000; i++) {\n        p = ro+t*rd;\n        float d = map(p);\n        d = max(0.02 + (exp(5.*sin(iTime * 0.3))/exp(5.))*0.1, abs(d));\n        if(d<0.01) {\n            col = vec3(1.);\n        \tbreak;\n       \t}\n        if(t>100000.) {\n        \tbreak;\n        }\n\t\tt += d;\n        c += 1./400.;\n    }\n    \n    col = vec3(pow(c,3.5));\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}