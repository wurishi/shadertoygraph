{"ver":"0.1","info":{"id":"wtfGzS","date":"1556662363","viewed":160,"name":"First Raytrace :-D","username":"AH1684","description":"The sphere SPEEN","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["sphere","raytrace","spin"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Object Defintions\nstruct Sphere\n{\n    vec3 origin;\n    float radius;\n    vec4 color;\n};\nfloat sphereSurface(vec3 ray, Sphere object)\n{\n    vec3 relRay = ray-object.origin;\n    float rayDist = length(relRay);\n    return rayDist-object.radius;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    //Camera Position is at origin. Positive z is into the site page.\n    //Screen is normalized to x coordinate\n    vec2 screenPos = fragCoord/iResolution.x - vec2(.5,.5*iResolution.y/iResolution.x);\n\t//Ray Direction for each pixel. Change z value to change FoV. \n    //Small z = MASETER FoV for AAAAGGES. I CAN SEE FOREVER\n    //Large z = Pinhole for viewing eclipses and ur pp :dab:\n    vec3 rayDir = normalize(vec3(screenPos,1));\n    \n    //ray max distance before termination. Rays will sweep partial sphere area in front of camera.\n    float maxDist = 100.0; \n    //Ray step size and error.\n    float dist = .2;\n    float epsilon = .5*dist;\n\t//Initialize Travel Distance and Ray\n    float disTrav = dist;\n    vec3 ray;\n    //Collision Flag\n    bool col = false;\n    //Object Initializations\n    Sphere sphere1 = Sphere(vec3(2.0*sin(iTime),0,2.0*cos(iTime)+8.0),1.0,vec4(.8,.3,.3,1.0));\n    \n    //Ray Trace? March? What's the difference\n    while(disTrav < maxDist)\n    {\n        ray = disTrav*rayDir;\n        if(sphereSurface(ray,sphere1) <= epsilon)\n        {\n            fragColor = sphere1.color;\n            col = true;\n            break;\n        };\n        \n        disTrav = disTrav + dist;\n    };\n    \n    //Skybox Color\n    if(!col)\n    {\n    \tfragColor = vec4(.2,.2,.4,1.0);\n    }\n    \n}","name":"Image","description":"","type":"image"}]}