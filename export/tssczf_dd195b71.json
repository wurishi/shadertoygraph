{"ver":"0.1","info":{"id":"tssczf","date":"1585301390","viewed":344,"name":"Glow drive","username":"gaz","description":"3D","likes":14,"published":1,"flags":0,"usePreview":0,"tags":["glow"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define rot(a) mat2(cos(a), sin(a), -sin(a), cos(a))\n#define hsv(h,s,v) ((clamp(abs(fract(h+vec3(0,2,1)/3.0)*6.0-3.0)-1.0,0.0,1.0)-1.0)*s+1.0)*v\n#define opRepLim(p,s,l) p-s*clamp(round(p/s),-l,l);\n\nvec2 pmod(vec2 p, float r)\n{\n    float a=mod(atan(p.y,p.x),6.2831/r)-0.5*6.2831/r;\n    return length(p)*vec2(sin(a), cos(a));\n}\n\nfloat map(vec3 p)\n{   \n    p.x-=sin(p.z*1.5+iTime*0.3)*0.05;\n    p.y-=cos(p.z*1.5+iTime*0.3)*0.05;\n    p.z-=iTime*3.0;\n    float c=2.0;\n    p.z=mod(p.z,c)-c*0.5;\n\tfloat de=1e9;\n\tp.xy=pmod(p.xy,6.0);\n    p.y-=0.2+sin(iTime*0.5+sin(iTime*0.2)*0.8)*0.5;\n    p.y=opRepLim(p.y,1.5,3.0);\n    for(int i=0;i<3;i++)\n    {\n        p.xy=abs(p.xy)-0.5;\n        p.xz=abs(p.xz)-0.3;\n        p.xy*=rot(1.2+sin(iTime*0.3)*0.5);\n        p.xz*=rot(0.8+sin(iTime*0.6));\n    }\n    p.xy*=rot(iTime*0.2+sin(iTime*0.5)*0.8);\n\tp.xz*=rot(iTime*0.3+sin(iTime*1.5)*1.8);\n\tp = abs(p)-vec3(0.3);\n    if (p.x<p.z) p.xz = p.zx;\n    if (p.y<p.z) p.yz = p.zy;\n\tp.z=max(0.0,p.z);\n\treturn min(de,length(p)-0.0035);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv=(fragCoord*2.0-iResolution.xy)/iResolution.y;\n    vec3 ro=vec3(0,0,3);\n    vec3 rd=normalize(vec3(uv,-2));\n    float len=length(uv)*0.05;\n    vec3 col=vec3(0);    \n    float depth=5.0;\n    float near=1.0;\n    float itr=600.0;\n    float pitch=(depth-near)/itr;\n    for(float i=0.0; i<itr; i++)\n    {\n        depth-=pitch;\n        vec3 p=ro+rd*depth;\n        float de=map(p);\n        if (de<0.001)\n        {\n        \tcol=vec3(exp(-(depth-near)*0.7));\n  \t\t}\n        else\n        {    \n            col+=hsv(iTime*0.3+len,15.0*len,0.012)*exp(-de*5.0)*exp(-depth*depth*0.25);\n        }\n    }\n    \n    col=clamp(col,0.0,1.0);\n    col=pow(col,vec3(2.5));\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}