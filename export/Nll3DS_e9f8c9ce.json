{"ver":"0.1","info":{"id":"Nll3DS","date":"1622743764","viewed":1682,"name":"Captain Harlock's maiden voyage","username":"evvvvil","description":"Captain Harlock's maiden voyage - Result of an improvised live coding session on Twitch\nLIVE SHADER CODING, SHADER SHOWDOWN STYLE, EVERY TUESDAYS 21:00 Uk time:\nhttps://www.twitch.tv/evvvvil_\n","likes":48,"published":1,"flags":0,"usePreview":1,"tags":["demoscene","space","planet","ghost","organic","monster","world","skull","spaceship","other","ship","creature","flying","albator"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3Rr","filepath":"/media/a/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","previewfilepath":"/media/ap/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Captain Harlock's maiden voyage - Result of an improvised live coding session on Twitch\n// LIVE SHADER CODING, SHADER SHOWDOWN STYLE, EVERY TUESDAYS 21:00 Uk time: \n// https://www.twitch.tv/evvvvil_\n\n// \"We will not pray for anything. Nor will we seek help from anyone.\" - Captain Harlock\n\nvec2 z,v,e=vec2 (.00035,-.00035);float t,tt,b,bb,g,gg,tn;vec3 np,bp,pp,op,po,no,ld,al,sp;\nmat2 r2(float r){return mat2(cos(r),sin(r),-sin(r),cos(r));}\nfloat smin(float a,float b, float k){ float h=max(0.,k-abs(a-b));return min(a,b)-h*h*.25/k;}\nfloat smax(float a,float b, float k){ float h=max(0.,k-abs(-a-b));return max(-a,b)+h*h*.25/k;}\nvec2 smin( vec2 a, vec2 b,float k ){ float h=clamp(.5+.5*(b.x-a.x)/k,.0,1.);return mix(b,a,h)-k*h*(1.0-h);}\nvec4 texNoise(vec2 uv,sampler2D tex ){ float f = 0.; f+=texture(tex, uv*.125).r*.5; f+=texture(tex,uv*.25).r*.25; //Funciton simulating the perlin noise texture we have in Bonzomatic shader editor, written by yx\n                       f+=texture(tex,uv*.5).r*.125; f+=texture(tex,uv*1.).r*.125; f=pow(f,1.2);return vec4(f*.45+.05);}\nvec2 mp( vec3 p ,float ga){  \n  op=p;\n  p.z-=b;p.xy*=r2(sin(op.z*.3)*.5);\n  float disp=cos(p.z*.2);             //DISPLACEMENT\n  float gr=clamp(sin(p.z*2.),-.5,.5)*.1; //GREEBLE\n  sp=vec3(abs(atan(p.x,p.y))*4.,p.z,length(p.xy)-2.2+disp);    //CYLINDRICAL POSITION  \n  sp.xy*=r2(.2+cos(p.z*.1)+gr*.5);\n  sp.xy=abs(abs(abs(sp.xy)-8.)-4.)-2.;  \n  vec2 h,t=vec2(length(p.xy)-2.+disp+clamp(sin(sp.x*5.-.5),-.5,.5)*.1,0); //MAIN CYLINDER   \n  t.x=abs(t.x)-.1;  \n  t.x=max(t.x,.7*(abs(sin(sp.x*5.-.5))-.8));\n  pp=p; pp.z=abs(abs(abs(pp.z)-4.)-1.)-.5;\n  float cut=abs(p.z)-10.;\n  float topTube=max(abs(length(pp.xz)-.2)-.1,abs(p.y)-4.+disp); //TOP TUBES\n  pp.y=min(pp.y,mod(pp.y-tt*2.+disp-sin(p.z*.2),10.)-5.);\n  float bro=min(4.,abs(max(0.,abs(p.y*.5)-2.3+disp)));\n  pp.xz-=sin(p.y*2.5+p.z*.5)*bro*.15;pp.y*=.3*(.2+bro);\n  float glo=(length(pp)+cos(bro+1.6)*.5)*.6;    \n  g+=0.1/(0.1+glo*glo*40.)*ga;\n  t.x=min(t.x,glo);\n  h=vec2(topTube,1);    \n  pp=p; pp.xy=abs(pp.xy)-(2.3-disp)*.8;   //TUBESSSSSSSSSSSS on SIDE\n  pp.yz*=r2(gr*.5); pp.xz*=r2(gr*.5);\n  float tubesSide=length(pp.xy)-.3; \n  glo=max(tubesSide+0.15,cut);\n  tubesSide=max(tubesSide,-(abs(pp.y)-.05));\n  t.x=smin(t.x,tubesSide,.4);  \n  gg+=0.1/(0.1+glo*glo*40.)*ga;\n  t.x=min(t.x,glo);\n  pp.xy=abs(pp.xy)-.3+min(.0,cos(p.z*.5)*.2);\n  float smallTubesSide=length(pp.xy)-.1;\n  h.x=smin(h.x,smallTubesSide,.2);    \n  float connect=length(sp.xz)-.4; //CYLINDRICAL TUBES AROUND\n  bp=sp; bp.z-=.3+cos(sp.y)*.5;\n  float nip=max(length(bp.xz)-.02,cut);\n  t.x=smin(t.x,nip,0.1);\n  gg+=0.1/(0.1+nip*nip*50.)*ga;\n  sp.x=abs(sp.x)-.5;\n  connect=smin(connect,length(sp.xz)-.1,.1);\n  h.x=smin(h.x,connect,.2);   \n  t.x=max(t.x,cut);\n  h.x=max(h.x,cut);                                \n  pp=p;pp.z=abs(pp.z)-11.;//SKULL\n  pp.y*=0.8;\n  float skDisp=sin(pp.y*2.+3.)*.3;  \n  float blackS=length(pp)-2.8+skDisp; //BLACK SPHERE AROUND SKULL\n  blackS=smax(length(pp-vec3(0,0,1.))-2.7+skDisp,blackS,.5);\n  h.x=smin(h.x,blackS,.5);  \n  tn=texNoise(pp.xy*.05+1.,iChannel0).r; //TEX NOISE\n  pp=p;pp.y*=0.8;pp.z-=11.; \n  float whiteS=length(pp+vec3(0,0,1.))-2.7+skDisp+tn*1.5;  \n  vec3 ep=pp-vec3(0,0.,.8);ep.x=abs(ep.x)-.8;\n  float smile=cos(p.z)*.5;            \n  whiteS=smax(max(length(ep)-.4-tn,p.y-.7+smile*2.5),whiteS,.5);             //EYES                \n  whiteS=smax((abs(p.y+1.9-smile)-.01),whiteS,.2);//SMILE\n  whiteS=smax(max(abs(abs(abs(abs(p.x)-.8)-.4)-.2)-.1+abs(p.y+1.7)*0.12,abs(p.y+1.9-smile)-1.),whiteS,.1);\n  t.x=smin(t.x,whiteS,.5);  \n  t=smin(t,h,.2);  t.x*=0.8;  \n  h=vec2(length(p.xy)-1.2+disp,2); //INSIDE CORE GLOW\n  h.x=max(h.x,cut);\n  pp=p+vec3(0,.5,10);pp.y=abs(pp.y)-1.;\n  h.x=smin(h.x,(length(pp.xy)-1.+sin(p.z*4.+p.y*2.+tt*5.)*.1+abs(pp.z)*.3)*.5,.5);    \n  vec3 ssp=p;ssp.xy*=r2(sin((p.z)*.2)-tt);  \n  g+=0.1/(0.1*h.x*h.x*(20.-sin(ssp.x-tt)*18.))*ga;\n  pp=p;pp.z=op.z;pp.z=mod(pp.z+tt,4.)-2.;pp.x=abs(pp.x)-1.;\n  float bit=.7*length(pp.xz);\n  glo=max(bit,p.y+6.2+sin(op.z));\n  float part=max(length(cos(op*.5)+sin(op.z*.2+op.x*.2)*.5),-op.y+10.); //PARTICLES\n  glo=min(glo,part);\n  g+=0.1/(0.1*glo*glo*1000.)*ga;  \n  h.x=smin(h.x,glo,1.);  \n  if(abs(p.x)-35.<0.){\n  float ter=(p.y+5.+.4*sin((op.z+tt)*1.5)+tn+cos(p.x*.2)*4.)*.45;\n  ter=smin(ter,max(bit-.15,p.y+7.),.5);\n  h.x=min(h.x,ter); //TERRAIN \n  }  \n  t=t.x<h.x?t:h;  \n  return t;\n}\nvec2 tr( vec3 ro,vec3 rd )\n{\n  vec2 h,t=vec2(.1);\n  for(int i=0;i<128;i++){\n    h=mp(ro+rd*t.x,1.);\n    if(h.x<.0001||t.x>60.) break;\n    t.x+=h.x;t.y=h.y;\n  }\n  if(t.x>60.) t.y=-1.;\n\treturn t;\n}\n#define a(d) clamp(mp(po+no*d,0.).x/d,0.,1.)\n#define s(d) smoothstep(0.,1.,mp(po+ld*d,0.).x/d)\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  vec2 uv=(fragCoord.xy/iResolution.xy-0.5)/vec2(iResolution.y/iResolution.x,1); //get uv\n  tt=mod(iTime,40.);\n  b=-20.+mod(tt*2.,40.);\n  vec3 ct=vec3(0,0,b);\n  vec3 ro=mix(vec3(4,-2.+sin(tt*.4)*2.,5),vec3(-7,sin(tt*.4)*2.,5),ceil(sin(tt*3.14159/20.))),\n  cw=normalize(ct-ro),cu=normalize(cross(cw,vec3(0,1,0))),cv=normalize(cross(cu,cw)),\n  rd=mat3(cu,cv,cw)*normalize(vec3(uv,.5)),co,fo;  \n  co=fo=vec3(.1,.12,.13)-length(uv)*.15-rd.y*.2+texNoise(rd.xz*.5,iChannel0).r*.2;\n  ld=normalize(vec3(-.5,.5,.5));\n  z=tr(ro,rd);t=z.x;\n  if(z.y>-1.){\n    po=ro+rd*t;\n    no=normalize(e.xyy*mp(po+e.xyy,0.).x+e.yyx*mp(po+e.yyx,0.).x+e.yxy*mp(po+e.yxy,0.).x+e.xxx*mp(po+e.xxx,0.).x);\n    al=mix(vec3(.75),vec3(.0),z.y);    \n    if(z.y>1.) al=vec3(.8,.9,1)-exp(tn)*.7;\n    float dif=max(0.,dot(no,ld)),    \n    fr=pow(1.+dot(no,rd),4.),\n    sp=pow(max(dot(reflect(-ld,no),-rd),0.),40.);\n    co=mix(sp+al*(a(.2)+.2)*(dif+s(1.))*vec3(.7,.8,1.),fo,min(fr,.5));\n    co=mix(fo,co,exp(-.00003*t*t*t));\n  }\nco=mix(co,co.zxy,length(uv)*.5);\n\tfragColor = vec4(pow(co+g*.2*vec3(.1,.2,.7)+gg*.2*vec3(.7,.2,.1),vec3(.55)),1);\n}","name":"Image","description":"","type":"image"}]}