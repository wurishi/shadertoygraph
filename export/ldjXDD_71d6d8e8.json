{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#define RAINBOW\n\n#define STATIC 18\n#define PI 3.14159265358979323846264\n\n// HSV2RGB code taken from http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\n// Rand, noise, and fbm found here on ShaderToy\nfloat rand(vec2 n)\n{ \n\treturn fract(sin(dot(n, vec2(17.12037, 5.71713))) * 12345.6789);\n}\n\nfloat noise(vec2 n)\n{\n\tvec2 d = vec2(0.0, 1.0);\n\tvec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n\treturn mix(mix(rand(b + d.xx), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n}\n\nfloat fbm(vec2 n)\n{\n\tfloat sum = 0.0, amp = 1.0;\n\tfor (int i = 0; i < 10; i++)\n    {\n\t\tsum += noise(n) * amp;\n\t\tn += n;\n\t\tamp *= 0.5;\n\t}\n\treturn sum;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 cv = vec2(-0.5,0) + fragCoord.xy / iResolution.xy;\n    cv.x *= iResolution.x/iResolution.y;\n    vec2 uv = -1.0 + 2.0*fragCoord.xy / iResolution.xy;\n    uv.x *= iResolution.x/iResolution.y;\n    \n    float m = -fragCoord.x/iResolution.x*.5+1.0;\n    float d = (-2.5*iMouse.x/iResolution.x+2.7)*abs((0.5+m*(fbm(vec2(5.0*m-iTime*5.0-1.0))-.9))-cv.y);\n    vec4 col = vec4(0,0,1,1);\n#ifdef RAINBOW\n    col = vec4(hsv2rgb(vec3(iTime*0.05+(uv.x*0.04),1,1)),1);\n#endif\n    fragColor = col*pow(max(1.042*(1.0-d),0.0),14.0)*pow(cos(cv.x*(1.3+0.19*sin(4.0*iTime))),6.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"ldjXDD","date":"1412564208","viewed":920,"name":"FBM Lightning Bolt","username":"GraphicsMuncher","description":"FBM lightning. Mouse X changes thickness. Comment out #define RAINBOW for solid color.","likes":13,"published":1,"flags":0,"usePreview":0,"tags":["fbm","lightning"],"hasliked":0,"parentid":"","parentname":""}}