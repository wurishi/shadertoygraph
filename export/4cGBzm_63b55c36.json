{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"texture","id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"}}],"code":"float box(vec2 p,vec2 b) {\n    p = abs(p) - b;\n    \n    return max(p.x,p.y);\n}\n\nvec4 sdf(vec2 p) {\n    float d = 999.0;\n    vec3 m = vec3(10.0,0.0,0.0);\n    \n    // i am confident that it isn't possible to optimize this using modulo\n    for (float i = 0.0; i < 6.0; i++) {\n        vec2 b = vec2(0.7,0.4);\n        float k = box(p,b);\n        \n        if (k < 0.0001) {    \n            vec2 interp = (p + b) * (0.5 / b);\n            \n            interp.x /= 6.0;\n            \n            interp.x += i * (40.0 / 256.0);\n    \n            vec4 iga = texture(iChannel0,interp);\n         \n            m = mix(m,iga.rgb,iga.a);\n            d = k;\n        }\n        \n        p.y -= (sin(iTime) * 0.5 + 0.7) * 0.2;\n    }\n    \n    return vec4(d,m);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n    \n    uv *= 2.0;\n    \n    vec3 bg = vec3(0.5);\n    \n    vec4 dm = sdf(uv);\n    float sm = smoothstep(0.0,0.001,dm.x);\n    \n    vec3 col = vec3(1.0-sm);\n    \n    col = dm.yzw;\n    \n    if (col.r == 10.0) {\n        col = bg;\n    }\n        \n    col = mix(col,bg,sm);\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4cGBzm","date":"1733855811","viewed":50,"name":"sprite stacking in a shader","username":"0x177","description":"might be faster than drawing each sprite as a separate quad and more memory efficient than caching 180 renders of the sprite stack at different rotations","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"lX3XD2","parentname":"simple 2d"}}