{"ver":"0.1","info":{"id":"7dc3W8","date":"1629662674","viewed":89,"name":"the status","username":"nexor","description":".","likes":2,"published":1,"flags":32,"usePreview":0,"tags":["2d","sdf","rgb"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = pow(texelFetch(iChannel0,ivec2(fragCoord),0),vec4(1./2.2));\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    render(fragColor,fragCoord, iResolution.xy, iFrame, iChannel0);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define pi acos(-1.)\n#define pi2 (2.*pi)\n\nfloat sdBox( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + max(d.x,d.y);\n}\n\nfloat sdCircle( vec2 p, float r )\n{\n    return length(p) - r;\n}\n\nmat2 rot(float a )\n{\nfloat c=cos(a),s=sin(a);\nreturn mat2(c,-s,s,c);\n}\n\nvec2 path(float t) \n{\nreturn vec2(cos(t)*1.5,sin(2.*t)*.75)*.175;\n}\n\nvec2 polar(float a)\n{\n    return vec2(cos(a),sin(a));\n}\n\nfloat rex(vec2 p, float t, float s) \n{\n\n p-=path(-t);\n\n return sdCircle(p,s);\n}\n\nfloat sdf( float d, float w)\n{\nreturn smoothstep(0.,w,d);\n}\n\nvoid render( out vec4 fragColor, in vec2 fragCoord , vec2 iResolution, int iFrame, sampler2D iChannel)\n{\n   \n    vec2 uv = (2.*fragCoord-iResolution.xy)/iResolution.x;\n    float w = fwidth(uv.y);\n  \n  \n    float liloff=3.*pi/5.,\n    bigoff=2.*pi/5.;\n    \n    vec3 col = vec3(0);\n    float fps=60.;\n    float slow = 3.;\n    float ft= float(iFrame)/fps/slow;\n    float t= fract(ft), \n    kt=fract(ft-liloff/(2.*pi));\n    vec2 square=uv;\n    \n    \n    vec2 still;\n    still=rot(-pi/4.)*uv;\n    \n    \n \n    //dynamic\n    float a=t*2.*pi;\n    float k=1.-kt;\n    k=pow(k,2.2);\n    k=k*.95+.05;\n    \n    float d=1e3;\n    \n    \n    //statik\n    \n    for(int i=0; i<3;++i)\n    {\n        float f=float(i-1);\n        \n        float x=(cos(a-pi*1.5));\n        float g =(x*.5+.5);\n        g=smoothstep(.9,1.,g)*g*f;\n        vec2 off = polar(x*pi/2.+pi/4.)*g;\n        \n        x=(cos(a-pi*.8))*.5+.5;\n        g=smoothstep(.9,1.,x)*x;\n        vec2 passthru = rot(-pi/2.-a*2.)*polar(x*pi/2.+pi/4.)*g*f*.05;\n        \n        d=1e3;\n        d=min(d,rex(still-passthru,liloff,.0125)); \n        d=min(d,rex(still-vec2(passthru.y,-passthru.x),bigoff,.025)); \n        col[i]+=(1.-sdf(d,w))*g;\n        \n        vec2 mov;\n        mov=still;\n        \n        d=1e3;\n        float ma = a;\n        d=min(d,rex((mov-off*.05),ma,.0125));\n        d=min(d,rex(mov,ma+(bigoff-liloff),.025));\n        col[i]+=(1.-sdf(d,w))*k;\n        \n        \n        square=rot(sin(g*f)*pi/16.)*uv-off*.04;\n        d = sdBox(square,vec2(.275));\n        d=abs(d)-w;\n        col[i]+=1.-sdf(d,w);\n    }\n    vec3 buf=texelFetch(iChannel, ivec2(fragCoord),0).rgb;\n    col=col+buf*.9;\n    fragColor = vec4(col,1.0);\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    render(fragColor,fragCoord, iResolution.xy, iFrame, iChannel0);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    render(fragColor,fragCoord, iResolution.xy, iFrame, iChannel0);\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    render(fragColor,fragCoord, iResolution.xy, iFrame, iChannel0);\n}","name":"Buffer D","description":"","type":"buffer"}]}