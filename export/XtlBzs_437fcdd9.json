{"ver":"0.1","info":{"id":"XtlBzs","date":"1512960941","viewed":502,"name":"Two Lights","username":"greje656","description":"Simple shader to test:\nhttps://github.com/greje656/SHLighting\nWhich is following along:\nhttp://silviojemma.com/public/papers/lighting/spherical-harmonic-lighting.pdf","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["sh"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI  3.14159265358979323846\n#define PI2 (PI * 2.0)\n#define PI4 (PI * 4.0)\n\nfloat Sample_two_lights(float theta, float phi) {\n    float a = max(0.0, 5.0 * cos(theta) - 4.0);\n    float b = max(0.0, -4.0 * sin(theta - PI) * cos(phi - 2.5) - 3.0);\n    return a + b;\n}\n\nfloat SH_project(float theta, float phi) {\n\n\tfloat c0  =  0.399249;\n\tfloat c1  = -0.210748;\n\tfloat c2  =  0.286867;\n\tfloat c3  =  0.282772;\n\tfloat c4  = -0.315302;\n\tfloat c5  = -0.000398;\n\tfloat c6  =  0.131591;\n\tfloat c7  =  0.000977;\n\tfloat c8  =  0.093585;\n\tfloat c9  = -0.249934;\n\tfloat c10 = -0.000721;\n\tfloat c11 =  0.122896;\n\tfloat c12 =  0.304576;\n\tfloat c13 = -0.164276;\n\tfloat c14 = -0.000615;\n\tfloat c15 = -0.091265;\n\tfloat c16 = -0.101271;\n\tfloat c17 = -0.000139;\n\tfloat c18 =  0.132715;\n\tfloat c19 = -0.000166;\n\tfloat c20 =  0.344469;\n\tfloat c21 =  0.001542;\n\tfloat c22 = -0.041332;\n\tfloat c23 = -0.000069;\n\tfloat c24 = -0.153648;\n    \n    float x = sin(theta) * cos(phi);\n    float y = sin(theta) * sin(phi);\n    float z = cos(theta);\n \n    float Y00 = (1.0 / 2.00) * sqrt(  1.0 / PI );\n \n \tfloat Y10 =                sqrt(  3.0 / PI4) * y;\n   \tfloat Y11 =                sqrt(  3.0 / PI4) * z;\n   \tfloat Y12 =                sqrt(  3.0 / PI4) * x;\n \n   \tfloat Y20 = (1.0 / 2.00) * sqrt( 15.0 / PI ) * (x*y);\n   \tfloat Y21 = (1.0 / 2.00) * sqrt( 15.0 / PI ) * (y*z);\n   \tfloat Y22 = (1.0 / 4.00) * sqrt(  5.0 / PI ) * (-x*x - y*y + 2.0*z*z);\n   \tfloat Y23 = (1.0 / 2.00) * sqrt( 15.0 / PI ) * (x*z);\n   \tfloat Y24 = (1.0 / 4.00) * sqrt( 15.0 / PI ) * (x*x - y*y);\n \n\tfloat Y30 = (1.0 / 4.00) * sqrt( 35.0 / PI2) * (y*(3.0*x*x - y*y));\n   \tfloat Y31 = (1.0 / 2.00) * sqrt(105.0 / PI ) * (x*y*z);\n   \tfloat Y32 = (1.0 / 4.00) * sqrt( 21.0 / PI2) * (y*(4.0*z*z - x*x - y*y));\n   \tfloat Y33 = (1.0 / 4.00) * sqrt(  7.0 / PI ) * (z*(2.0*z*z - 3.0*x*x - 3.0*y*y));\n   \tfloat Y34 = (1.0 / 4.00) * sqrt( 21.0 / PI2) * (x*(4.0*z*z - x*x - y*y));\n   \tfloat Y35 = (1.0 / 4.00) * sqrt(105.0 / PI ) * (z*(x*x - y*y));\n   \tfloat Y36 = (1.0 / 4.00) * sqrt( 35.0 / PI2) * (x*(x*x - 3.0*y*y));\n \n   \tfloat Y40 = (3.0 / 4.00) * sqrt( 35.0 / PI ) * (x*y*(x*x - y*y));\n   \tfloat Y41 = (3.0 / 4.00) * sqrt( 35.0 / PI2) * (y*z*(3.0*x*x - y*y));\n   \tfloat Y42 = (3.0 / 4.00) * sqrt(  5.0 / PI ) * (x*y*(7.0*z*z - 1.0));\n   \tfloat Y43 = (3.0 / 4.00) * sqrt(  5.0 / PI2) * (y*z*(7.0*z*z - 3.0));\n   \tfloat Y44 = (3.0 / 16.0) * sqrt(  1.0 / PI ) * (35.0*z*z*z*z - 30.0*z*z + 3.0);\n   \tfloat Y45 = (3.0 / 4.00) * sqrt(  5.0 / PI2) * (x*z*(7.0*z*z - 3.0));\n   \tfloat Y46 = (3.0 / 8.00) * sqrt(  5.0 / PI ) * (x*x - y*y)*(7.0*z*z - 1.0);\n   \tfloat Y47 = (3.0 / 4.00) * sqrt( 35.0 / PI2) * (x*z*(x*x - 3.0*y*y));\n   \tfloat Y48 = (3.0 / 16.0) * sqrt( 35.0 / PI ) * (x*x*(x*x - 3.0*y*y) - y*y*(3.0*x*x - y*y));\n \n   \tfloat SH =\n    Y00*c0  +\n    Y10*c1  + Y11*c2  + Y12*c3  +\n    Y20*c4  + Y21*c5  + Y22*c6  + Y23*c7  + Y24*c8  +\n    Y30*c9  + Y31*c10 + Y32*c11 + Y33*c12 + Y34*c13 + Y35*c14 + Y36*c15 +\n    Y40*c16 + Y41*c17 + Y42*c18 + Y43*c19 + Y44*c20 + Y45*c21 + Y46*c22 + Y47*c23 + Y48*c24;\n \n  return SH;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    float theta = uv.x;\n    float phi   = uv.y;\n    float originalFunction = Sample_two_lights(-theta * PI2, phi * PI2);\n    float sphericalHarmonic = SH_project(theta * PI2, phi * PI2);\n    \n    float v = mix(originalFunction, sphericalHarmonic, (sin(iTime * 3.0) + 1.0) * 0.5);\n\tfragColor = vec4(v,v,v,1.0);\n}","name":"Image","description":"","type":"image"}]}