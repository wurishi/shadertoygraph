{"ver":"0.1","info":{"id":"3lfXRS","date":"1563283621","viewed":416,"name":"blue noise  vs  white noise: var","username":"FabriceNeyret2","description":"Blue-noise error is perceptively better, since no low-frequency that whitenoise has.\nHere: shows remaining std-dev at each MIPmap level.    left: white noise right: blue noise.\nMouse.y: intensity gain","likes":2,"published":3,"flags":32,"usePreview":0,"tags":["bluenoise","variance","whitenoise","gpmipmap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":3,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 O, vec2 U )\n{  \n    vec2 R = iResolution.xy;\n    float x = U.x-.5*R.x;\n    \n    if (x==.5) { O=vec4(1,0,0,0); return; } // red separator\n    \n    int z = int(8.*U.y/R.y);                // MIPmap level\n    ivec2 I = ivec2(U) % ( ivec2(R) >> z );\n    vec4 M1 = x > 0.                        // 1st moment\n          ? texelFetch( iChannel0, I, z)    //   bluenoise\n          : texelFetch( iChannel1, I, z),   //   whitenoise\n         M2 = x > 0.\n          ? texelFetch( iChannel2, I, z)    // 2nd moment\n          : texelFetch( iChannel3, I, z);\n\n    O = sqrt(max(M2-M1*M1,0.));             // std-dev in pixel\n    O = 1.-O/.289;                          // % std-dev out of pixel\n                                            // (full texture stddev = 1/sqrt(12) )\n    if (abs(x/R.x) < .25) O = O.xxxx;       // center strip : B&W\n    O *= exp2(4.*iMouse.y/R.y);             // mouse.y boost intensity\n\n  //O += 1.-step(M1*M1,M2);                 // debug: show negative variance\n  //O = abs(O);\n }","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XsBSR3","filepath":"/media/a/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","previewfilepath":"/media/ap/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// MIPmap computes order1 moment of bluenoise\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O = texelFetch( iChannel0, ivec2(U)%1024 , 0);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"// MIPmap computes order1 moment of whitenoise\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O = texelFetch( iChannel0, ivec2(U)%256 , 0);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"// MIPmap computes order2 moment of bluenoise\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O = texelFetch( iChannel0, ivec2(U) , 0);\n    O *= O;\n}","name":"Buf C","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"// MIPmap computes order2 moment of whitenoise\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O = texelFetch( iChannel0, ivec2(U) , 0);\n    O *= O;\n}","name":"Buf D","description":"","type":"buffer"}]}