{"ver":"0.1","info":{"id":"MdsXDn","date":"1456828874","viewed":156,"name":"WarpedCheckers","username":"cafe","description":"WarpedCheckers","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["warpedcheckers"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","previewfilepath":"/media/ap/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float smth(float x){\n\tfloat f=fract(x);\n\tf=3.*f*f-2.*f*f*f;\n\treturn floor(x)+f;\t\n}\nvec2 smth(vec2 x){return vec2(smth(x.x),smth(x.y));}\n\nfloat hash(vec2 x){\n\tfloat d=64.;\n\tx=(smth(x*d+0.5)-0.5)/d;\n\t\n\t/*\n\tfloat md = fract(iTime+x.x*1.);\n\tfloat scr=4.;\n\t*/\n\t\n\treturn texture(iChannel0,x).r;\n}\n\nvec3 tex(vec2 uv){\n\tfloat d=smoothstep(-0.1,0.1,sin(uv.x*40.)*sin(uv.y*40.));\n\treturn vec3(d*fract(uv.x*1.),d*fract(uv.y*3.18),d*sin(uv.x*10.+sin(uv.y*15.))*0.5);\n}\n\nvec3 shade(vec2 uv){\n\t\n\t\n\t\n\tfloat speed=0.01;\n\t\n\tvec2 c=uv/8.+vec2(1.,0.3)*iTime*speed;\n\t\n\tvec3 nor = normalize(vec3(hash(c),hash(c+0.5)*2.-1.,1.2));\n\tnor += (tex(uv+nor.xy*(1.-nor.z))*2.-1.)*0.06;\n\tnor = tex(uv+nor.xy*(1.-nor.z))*vec3(0.9,0.9,0.8);\n\tfloat x = sin(iTime)*0.2;\n\t//nor = 0.2-nor-length(uv);\n\treturn sin(vec3(2.5,1.2,0.9)*abs(dot(vec3(nor),vec3(uv.x,0.5,uv.y*2.)))*length(nor*1.5)*(uv.x+1.2)*0.7-0.2);\n}\n\nvec3 ss(vec2 uv,float m){\n\tfloat pix=1./(iResolution.x*m);\n\tvec2 p=vec2(pix,0.);\n\tvec2 iuv=uv-mod(uv,pix*2.);\n\treturn (shade(iuv+p.xx)+\n\t\t    shade(iuv+p.xy)+\n\t\t    shade(iuv+p.yx)+\n\t\t    shade(iuv+p.yy))/4.;\t\n}\nvec3 ss(vec2 uv){ return ss(uv,1.); }\n\nvec3 ss4(vec2 uv){\n\t\n\t//uv=normalize(vec3(uv,1.)).xy;\n\t\n\tfloat m=8.;\n\t\n\tfloat pix=1./iResolution.x;\n\tvec2 p=vec2(pix,0.);\n\tvec2 iuv=uv-mod(uv,pix*2.);\n\treturn (ss(iuv+p.xx,m)+\n\t\t    ss(iuv+p.xy,m)+\n\t\t    ss(iuv+p.yx,m)+\n\t\t    ss(iuv+p.yy,m))/4.;\t\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (2.*fragCoord.xy-iResolution.xy)/iResolution.x;\n\tfragColor = vec4(ss4(uv),1.0);\n}","name":"Image","description":"","type":"image"}]}