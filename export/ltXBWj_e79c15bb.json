{"ver":"0.1","info":{"id":"ltXBWj","date":"1513273348","viewed":152,"name":"Conway's Game of Life-User input","username":"sebastian_venter","description":"use the mouse to draw the initial state then press play!","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["life","conway","cellularautomaton"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfragColor = texture(iChannel0, fragCoord.xy/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0, fragCoord.xy/iResolution.xy);\n}","name":"Buf A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"#define GRID_DIV 10.0\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy/iResolution.xy;\n    \n    if (iFrame < 300) {\n\n        vec2 lastClick = iMouse.zw;\n        vec2 gridCorner = vec2(floor(lastClick.x/GRID_DIV)*GRID_DIV, floor(lastClick.y/GRID_DIV)*GRID_DIV);\n        bool inX = fragCoord.x - gridCorner.x <= GRID_DIV && \n            fragCoord.x - gridCorner.x >= 0.0;\n        bool inY = fragCoord.y - gridCorner.y <= GRID_DIV && \n            fragCoord.y - gridCorner.y >= 0.0;\n        vec2 inXY = floor(lastClick/GRID_DIV) - floor(fragCoord/GRID_DIV);\n        bool inGrid = inXY == vec2(0.0);\n\n        \n        if (texture(iChannel1, uv).x > 0.5) {\n            fragColor = vec4(!inGrid);\n        } else {\n            fragColor = vec4(inGrid);\n        }\n        \n    } else {\n        \n        vec2 gridSquare = fragCoord.xy/GRID_DIV;\n        int total = 0;\n        for (float i=0.0; i<9.0; i++) {\n            vec2 checkSquare = (gridSquare.xy + vec2(mod(i, 3.0)-1.0, floor(i/3.0)-1.0))*GRID_DIV;\n            if (texture(iChannel0, checkSquare.xy/iResolution.xy).x > 0.5) {\n                total++;\n            } else {\n                total += 0;\n            }\n        }\n        if (texture(iChannel0, fragCoord.xy/iResolution.xy).x > 0.5) {\n            fragColor = vec4(!(total-1 < 2 || total-1 > 3));\n        } else {\n            fragColor = vec4(total==3);\n        }\n    }\n}","name":"Buf C","description":"","type":"buffer"}]}