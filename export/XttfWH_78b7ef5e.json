{"ver":"0.1","info":{"id":"XttfWH","date":"1539448176","viewed":1754,"name":"Simple VCR","username":"mensab","description":"Still too crisp to pass for actual VCR","likes":24,"published":1,"flags":0,"usePreview":1,"tags":["video","filter","vhs","vcr"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.14159265;\n\nfloat wobble_intensity = 0.002;\nfloat grade_intensity = 0.5;\nfloat line_intensity = 2.;\nfloat vignette_intensity = 0.2;\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat sample_noise(vec2 fragCoord)\n{\n    vec2 uv = mod(fragCoord + vec2(0, 100. * iTime), iChannelResolution[1].xy);\n    float value = texture(iChannel1, uv / iResolution.xy).r;\n    return pow(value, 7.); //  sharper ramp\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    \n    //  wobble\n    vec2 wobbl = vec2(wobble_intensity * rand(vec2(iTime, fragCoord.y)), 0.);\n    \n    //  band distortion\n    float t_val = tan(0.25 * iTime + uv.y * PI * .67);\n    vec2 tan_off = vec2(wobbl.x * min(0., t_val), 0.);\n    \n    //  chromab\n    vec4 color1 = texture(iChannel0, uv + wobbl + tan_off);\n    vec4 color2 = texture(iChannel0, (uv + (wobbl * 1.5) + (tan_off * 1.3)) * 1.005);\n    //  combine + grade\n    vec4 color = vec4(color2.rg, pow(color1.b, .67), 1.);\n    color.rgb = mix(texture(iChannel0, uv + tan_off).rgb, color.rgb, grade_intensity);\n    \n    //  scanline sim\n    float s_val = ((sin(2. * PI * uv.y + iTime * 20.) + sin(2. * PI * uv.y)) / 2.) * .015 * sin(iTime);\n    color += s_val;\n    \n    //  noise lines\n    float ival = iResolution.y / 4.;\n    float r = rand(vec2(iTime, fragCoord.y));\n    //  dirty hack to avoid conditional\n    float on = floor(float(int(fragCoord.y + (iTime * r * 1000.)) % int(ival + line_intensity)) / ival);\n    float wh = sample_noise(fragCoord) * on;\n    color = vec4(min(1., color.r + wh), \n                 min(1., color.g + wh),\n                 min(1., color.b + wh), 1.);\n    \n    float vig = 1. - sin(PI * uv.x) * sin(PI * uv.y);\n    \n    fragColor = color - (vig * vignette_intensity);\n}","name":"Image","description":"","type":"image"}]}