{"ver":"0.1","info":{"id":"MltSzN","date":"1478546956","viewed":145,"name":"spider w","username":"gigatron","description":" by eiffie... played by gigatron","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["spider","web"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRn","filepath":"/media/a/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","previewfilepath":"/media/ap/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Spiderweb by eiffie based on knighty's spirals - https://www.shadertoy.com/view/ls2GRz\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n#define time iTime*0.75\n#define size iResolution\n#define tex iChannel0\n\n#define PI 3.14159265358979323846264338327950288419716939937510\nconst vec2 c=vec2(32.0,1.0);\nconst float tpdlc=0.2137673;//precalculated 2*PI/length(c)\n//Draws two perpendicular spirals (from knighty and then I messed it up with gravity)\nfloat dspiral(vec3 p){//original https://www.shadertoy.com/view/ls2GRz\n\tfloat r=length(p.xy);\n\tvec2 f=vec2(log(r),atan(p.y,p.x))*0.5/PI;\n\tvec2 d=f.y*vec2(c.x,-c.y)-f.x*c.yx;\n\td=(0.5-abs(fract(d)-0.5))*r*tpdlc;\n\tfloat g=sqrt(abs(d.x-d.y));\n\tp.y+=g*0.1;//now add gravity\n\tp.xy*=1.0+g*0.00;//straighten a bit\n\tr=length(p.xy);//and recalculate the second spiral\n\tf=vec2(log(r),atan(p.y,p.x))*0.5/PI;\n\tfloat d1=-f.y*c.y-f.x*c.x;\n\td1=(0.5-abs(fract(d1)-0.5))*r*tpdlc;\n\treturn min(sqrt(d.x*d.x+p.z*p.z),max(sqrt(d1*d1+p.z*p.z),-r+2.0-sin(time/1.4)*8.));\n}\n\nmat3 lookat(vec3 fw,vec3 up){\n\tfw=normalize(fw);vec3 rt=normalize(cross(fw,normalize(up)));return mat3(rt,cross(rt,fw),fw);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec3 ro=vec3(-0.0-sin(time),-1.0+sin(time),-4.0);\n\t\n\tvec3 rd=lookat(-ro,vec3(1.0,1.,0.0))*normalize(vec3((1.0*fragCoord.xy-size.xy*0.5)/size.y,1.0));\n\t\n    vec3 col=vec3(2.);\n    vec3 bg=vec3(texture(iChannel0,fragCoord/iResolution.xy)).xyz/3.0;\n\tvec2 trap=vec2(100.0);\n\tfloat t=-(ro.z+0.5)/rd.z,d=1.0;\n\tfor(int i=0;i<24;i++){\n\t\tt+=d=dspiral(ro+rd*t)*0.8;\n\t\tif(d<trap.x)trap=vec2(d,t);\n\t}\n\tfloat mind=2.0*trap.y/size.y;\n\tif(trap.x>mind){\n         \n          col=mix(col,bg,min(1.0,smoothstep(1.0,mind,max(0.0,trap.x))))  ;\n         \n        }\n\tfragColor = vec4(clamp(col,0.0,1.0),1.0);\n}","name":"Image","description":"","type":"image"}]}