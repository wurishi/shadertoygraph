{"ver":"0.1","info":{"id":"MtycWD","date":"1536247897","viewed":322,"name":"Circle pulse on grid","username":"murazaki","description":"Circle pulse on grid","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["pulse","grid","circle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265359\n\nfloat growingCircle( in float offset, in float thickness, in vec2 pos, in float speed, in float repeatAtTime, in float cellSize) {\n    float circle_size = mod(iTime * speed, repeatAtTime) - offset;\n    float radius = length(floor((pos + cellSize / 2.) / cellSize) * cellSize);\n    \n    return smoothstep(circle_size + thickness / 2., circle_size, radius) -\n           smoothstep(circle_size, circle_size - thickness / 2., radius);\n}\n\nfloat showGrid(in float thickness, in vec2 pos, in float speed, in float repeatAtTime, in float cellSize) {\n    float circle_size = mod(iTime * speed, repeatAtTime);\n    float radius = length(pos);\n    \n    float valueAtTime = 1. - pow(mod(iTime * speed, repeatAtTime) - repeatAtTime / 2., 2.);\n    vec2 isBorderVec = (smoothstep(thickness / 2., 0., abs(mod(pos + cellSize / 2., cellSize)))) *\n        \t\t\t\t(smoothstep(circle_size - 1.2, circle_size - .3, radius) -\n                         smoothstep(circle_size - .3, circle_size + .1, radius));\n    float isBorder = isBorderVec.x + isBorderVec.y;\n    \n    \n    return valueAtTime * isBorder;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 R = iResolution.xy,\n         pos = (2.*fragCoord - R ) / min(R.x,R.y);\n    vec3 color = vec3(0.0);\n    \n    \n    float loopTime = length(R)/min(R.x,R.y) * 1.6;\n    float circleThickness = .35;\n    float cellSize = circleThickness / 2.;\n    float gridStrokeThickness = 12./min(R.x,R.y);\n    float speed = 3.;\n    \n    vec3 color1 = vec3(1., 0.5, 0.3);\n    vec3 color2 = vec3(0.1, 1., 0.2);\n    vec3 color3 = vec3(0.6, 0.2, 1.);\n\n    color = growingCircle(0., circleThickness, pos, speed, loopTime, cellSize) * color1 +\n            growingCircle(circleThickness/2., circleThickness, pos, speed, loopTime, cellSize) * color2 +\n            growingCircle(circleThickness, circleThickness, pos, speed, loopTime, cellSize) * color3 +\n            showGrid(gridStrokeThickness, pos, speed, loopTime, cellSize);\n\n    fragColor = vec4(color, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}