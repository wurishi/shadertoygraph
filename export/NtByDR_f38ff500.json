{"ver":"0.1","info":{"id":"NtByDR","date":"1649422087","viewed":188,"name":"Paper rose","username":"sinvec","description":"Trying to create something simple.","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["pencil","paper"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159\n#define R iResolution.xy\n#define s(v,l) smoothstep(l/R.y,0.,v) // AA\n#define ro(a) (mat2(cos(a),sin(a),-sin(a),cos(a))) // 2d rotation matrix\n\n#define C /255.\n\nfloat fbm(vec2 p){\n    return texture(iChannel0, p*.001).x*.533 +\n           texture(iChannel0, p*.01).x*.267 +\n           texture(iChannel0, p*.3).x*.133 +\n           texture(iChannel0, p*.5).x*.067; \n}\n\nfloat pencil_hatching(vec2 u, vec3 p) {\n    u *= p.x;\n    vec2 o = u; \n    u.x *= p.y;\n    u+= (fbm(u)-.5)*p.z;\n    float col = sin(u.x);\n    u.x += u.y * 2.;\n    col *= sin(u.x);\n    return col * .5 + .5;\n}\n\nfloat watercolor (vec2 p) {\n       p*=8.;\n       vec2 q = vec2(0.);\n       q.x = fbm(p);\n       q.y = fbm( p + vec2(1.0));\n       vec2 r = vec2(0.);\n       r.x = fbm( p + 1.0*q + vec2(1.7,9.2));\n       r.y = fbm( p + 1.0*q + vec2(8.3,2.8));\n       float f = fbm(p+r);\n       return clamp(f,0.,1.);\n}\n\n\nfloat pencil_texture (vec2 u) {\n    vec2 o = u*.05;\n    float col = watercolor(o*ro(+1.35)*10.);\n    col *= pencil_hatching(u+vec2(2.15, 0.), vec3(90.,9., 8.));\n    col *= pencil_hatching(u+vec2(3.15, 0.), vec3(80.,7., 8.));\n    col += pencil_hatching(u+vec2(3.15, 0.), vec3(15.,7., 4.));\n    col *= watercolor(o*ro(-2.95)*1.)*.7;\n    col = mix(col, 1., 1.-texture(iChannel0, u*10.).x*2.);\n    return col;\n}\n \n\n// IQ's SDF for rhombus (shadertoy.com/view/XdXcRB)\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\nfloat sdRhombus( in vec2 p, in vec2 b ) \n{\n    p = abs(p);\n    float h = clamp( ndot(b-2.0*p,b)/dot(b,b), -1.0, 1.0 );\n    float d = length( p-0.5*b*vec2(1.0-h,1.0+h) );\n    return d * sign( p.x*b.y + p.y*b.x - b.x*b.y );\n}\n\nvoid mainImage( out vec4 O, in vec2 E )\n{\n    vec2 u = (E - R*.5)/R.y;\n\n    vec3 col = vec3(.9);\n\n    const vec3 lb = vec3(.18);\n    const float w = .0005;\n \n    // red color and its shades\n    const vec3[5] scs = vec3[5](\n        vec3(254. C,  1. C, 90. C), \n        vec3(245. C, 11. C,103. C), \n        vec3(250. C,  3. C, 67. C), \n        vec3(230. C, 18. C, 49. C), \n        vec3(232. C,  9. C,111. C)  \n    );\n    \n    const float clr_count = 5.;\n    \n    u -= (vec2(fbm(u*16.), fbm(u*16. + .35)) - .5) * .01;\n    \n    vec2 u1 = u*vec2(1., 1.);\n    for (int i = 0; i < 8; i++){\n        u1 *= ro(-PI/3.);\n        vec2 au = (u1 + texture(iChannel0, vec2(float(i)*.1)).x*.02); \n        col = mix(col, mix(scs[int(mod(float(i) + 2., clr_count))], vec3(1.), pencil_texture(au*ro(PI/2.))), s(sdRhombus((u1+vec2(.2, 0.))*ro(PI/2.), vec2(.1, .1)),1.5));\n        col = mix(col, lb, s(abs(sdRhombus((u1+vec2(.2, 0.))*ro(PI/2.), vec2(.1, .1)))-w,1.5));\n    }\n    u1 = u*vec2(1., 1.)*ro(-PI/5.);\n    for (int i = 8; i < 16; i++){\n        u1 *= ro(-PI/3.);\n        vec2 au = (u1 + texture(iChannel0, vec2(float(i)*.1)).x*.02); \n        col = mix(col, mix(scs[int(mod(float(i), clr_count))], vec3(1.), pencil_texture(au*ro(PI/2.))), s(sdRhombus((u1+vec2(.2, 0.))*ro(PI/2.), vec2(.1, .1)),1.5));\n        col = mix(col, lb, s(abs(sdRhombus((u1+vec2(.2, 0.))*ro(PI/2.), vec2(.1, .1)))-w,1.5));\n    }\n    u1 = u*vec2(1., 1.);\n    for (int i = 0; i < 4; i++){\n        u1 *= ro(-PI/2.);\n        vec2 au = (u1 + texture(iChannel0, vec2(float(i)*.1)).x*.02); \n        col = mix(col, mix(scs[int(mod(float(i) + 2., clr_count))], vec3(1.), pencil_texture(au*ro(PI/2.))), s(sdRhombus((au+vec2(.1, 0.))*ro(PI/2.), vec2(.1, .1)),1.5));\n        col = mix(col, lb, s(abs(sdRhombus((au+vec2(.1, 0.))*ro(PI/2.), vec2(.1, .1)))-w,1.5));\n    }\n    u1 = u*vec2(1., 1.)*ro(-PI/4.);\n    for (int i = 4; i < 8; i++){\n        u1 *= ro(-PI/2.);\n        vec2 au = (u1 + texture(iChannel0, vec2(float(i)*.1)).x*.02); \n        col = mix(col, mix(scs[int(mod(float(i), clr_count))], vec3(1.), pencil_texture(au*ro(PI/2.))), s(sdRhombus((au+vec2(.1, 0.))*ro(PI/2.), vec2(.1, .1)),1.5));\n        col = mix(col, lb, s(abs(sdRhombus((au+vec2(.1, 0.))*ro(PI/2.), vec2(.1, .1)))-w,1.5));\n    }\n    O = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}