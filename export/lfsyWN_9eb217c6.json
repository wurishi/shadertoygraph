{"ver":"0.1","info":{"id":"lfsyWN","date":"1721159022","viewed":35,"name":"Hello, gears","username":"andy_che","description":"Hello, my first gear shader","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["procedural"],"hasliked":0,"parentid":"XcXcWN","parentname":"hello parametric flower"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#ifndef PI\n#define PI 3.1415926535897932384626433832795\n#endif\n\n\nfloat gear(vec2 st, vec2 offset, float teeth_num, float min_radius, \n    float rot_speed, float rot_period, float teeth_height){\n    vec2 st_center = st - offset;\n    float angle=atan(st_center.y,st_center.x)/PI;\n    \n    float dist=dot(st_center,st_center)*4.;\n    \n    float radius=0.;\n\n    radius = min_radius + \n        smoothstep(-.5, 1., \n        cos(angle*PI*(teeth_num) + sin(iTime * rot_period)*3.*rot_speed)\n        ) * .1 * teeth_height\n        ;\n    float line_width = .007;\n    float outer_line_width_coef = 8.;\n    float mask=smoothstep(radius-line_width,radius,dist)-\n    smoothstep(radius,radius+line_width*outer_line_width_coef,dist);\n    \n    return mask;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    vec2 st=(fragCoord.xy - iResolution.xy / 2.) / iResolution.x;\n    \n    // quick hack to zoom in\n    st /= .75;\n    \n    vec3 color=vec3(0.);\n\n    float rot_period = .3;\n    float rot_speed = 10.;\n    \n    float gear_center_mask = gear(st, vec2(0.), 15., .3, rot_speed, rot_period, 1.);\n    color+=vec3(1.,.0,.0)*gear_center_mask;\n\n    float gear_center_top_left_mask = gear(st, \n        vec2(-.5, .36),\n         15., .3, -rot_speed, rot_period, 1.);\n    color+=vec3(1.0, 0.98, 0.0)*gear_center_top_left_mask;\n\n    float gear_center_bottom_right_mask = gear(st, \n        vec2(.53, -.5),\n         22., .6, -rot_speed*1.0, rot_period, 1.3);\n         \n    color+=vec3(0.0, 0.43, 1.0)*gear_center_bottom_right_mask;\n\n    fragColor=vec4(color,1.);\n    \n}","name":"Image","description":"","type":"image"}]}