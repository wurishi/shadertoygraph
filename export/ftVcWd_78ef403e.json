{"ver":"0.1","info":{"id":"ftVcWd","date":"1662463484","viewed":321,"name":"Blender Render Tiles","username":"cmzw","description":"Rendering tiles from Blender","likes":14,"published":3,"flags":0,"usePreview":0,"tags":["2d","tiles","blender"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float hash12(vec2 p)\n{\n\tvec3 p3  = fract(vec3(p.xyx) * .1031);\n    p3 += dot(p3, p3.yzx + 33.33);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nfloat sdSegment( in vec2 p, in vec2 a, in vec2 b )\n{\n    vec2 ba = b-a;\n    vec2 pa = p-a;\n    float h =clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length(pa-h*ba);\n}\n\nfloat sdCircle( vec2 p, float r ) {return length(p) - r;}\n\nfloat st(in float d) { return smoothstep(.006,0.,d); }\n\nvec3 aces_tonemap(vec3 color){\t\n\tmat3 m1 = mat3(\n        0.59719, 0.07600, 0.02840,\n        0.35458, 0.90834, 0.13383,\n        0.04823, 0.01566, 0.83777\n\t);\n\tmat3 m2 = mat3(\n        1.60475, -0.10208, -0.00327,\n        -0.53108,  1.10813, -0.07276,\n        -0.07367, -0.00605,  1.07602\n\t);\n\tvec3 v = m1 * color;    \n\tvec3 a = v * (v + 0.0245786) - 0.000090537;\n\tvec3 b = v * (0.983729 * v + 0.4329510) + 0.238081;\n\treturn pow(clamp(m2 * (a / b), 0.0, 1.0), vec3(1.0 / 2.2));\t\n}\n\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    vec2 p = (2.*I - iResolution.xy) / iResolution.y;\n    vec2 a = p*5.;\n    vec2 c = abs(fract(a)-.5)-.45;\n    \n    float tiles = 1.-st(min(max(c.x,c.y),min(c.x,c.y)+.25));\n    \n    float v = smoothstep(2.2,1.2,length(p))*1.2;\n    \n    vec2 fa = floor(a);\n    float cb = mod(fa.x+fa.y,2.)*.1+.08;\n    \n    float t = mod(iTime/4.,1.8);\n    float n = hash12(fa);\n    float n1 = step(n,t-0.4);\n    float n2 = clamp(n1-step(n,t-0.5),.0,1.);\n    \n    const vec3 h = vec3(1.,.28,.0);\n    vec3 col,res; p*= vec2(1.,1.1); p += vec2(-.08,.19);\n    \n    float ci = st(sdCircle(p,0.7));\n    col = mix(col, h,st(sdSegment(p,vec2(-.1,1.04),vec2(.485,.32))-.12));\n    col = mix(col, h,st(sdSegment(p,vec2(-.85,.62),vec2(.0,.62))-.12));\n    col = mix(col, h,st(sdSegment(p,vec2(-1.08,-.1),vec2(-.2,.6))-.12));\n    col = mix(col, h, ci);\n    col = mix(col, vec3(2.), st(sdCircle(p,.45)));\n    col = mix(col, vec3(.1,.18,.4), st(sdCircle(p,0.31)));\n    \n    float mask = clamp(max(col.x,ci),0.,1.)*n1;\n    \n    res = mix(vec3(cb),col,mask);\n    res = mix(res,vec3(1.2,0.1,0),tiles*n2);\n    O = vec4(aces_tonemap(res*v),0.);\n}","name":"Image","description":"","type":"image"}]}