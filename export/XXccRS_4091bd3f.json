{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"// Fork of \"AudioReactive Caustic\" by wyatt. https://shadertoy.com/view/l3cczn\n// 2024-12-26 15:22:11\n\nMain {\n    \n    Q = C(U)/float(1+iFrame);\n}","name":"Image","description":"","type":"image"},{"outputs":[],"inputs":[],"code":"#define R iResolution.xy\n#define A(U) texture(iChannel0,(U)/R)\n#define B(U) texture(iChannel1,(U)/R)\n#define C(U) texture(iChannel2,(U)/R)\n#define D(U) texture(iChannel3,(U)/R)\n#define Main void mainImage(out vec4 Q, in vec2 U)\n#define ei(a) mat2(cos(a),sin(a),-sin(a),cos(a))\nvec4 hash(vec4 p4)\n{\n    p4 = fract(p4  * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}\nvec4 opElongate( in vec3 p, in vec3 h )\n{\n    vec3 q = abs(p)-h;\n    return vec4( max(q,0.0), min(max(q.x,max(q.y,q.z)),0.0) );\n}\nfloat sdCappedCylinder( vec3 p, vec2 h )\n{\n  vec2 d = abs(vec2(length(p.xy),p.z)) - .25*h;\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0));\n}\nfloat roundBox(vec3 p, vec3 b , float r) {\n    vec4 w = opElongate( p, .5*b );\n    return w.w+sdCappedCylinder( w.xyz, vec2(r,.5*b.z) ) ;\n}\nfloat roundBox(vec2 p, vec2 b, float r) {\n    return roundBox(vec3(p,0),vec3(b,1e9),r);\n}","name":"Common","description":"","type":"common"},{"outputs":[{"channel":0,"id":"4dXGR8"}],"inputs":[{"channel":1,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"Main {\n    U = 2.*(U-.5*R)/R.y;\n    Q = vec4(0);\n    \n    U.x -= .6;\n    float l = dot(U,U);\n    \n    Q += .5*exp(-5.*l)*sin(50.*l);\n    \n    U.x += 1.2;\n    l = dot(U,U);\n    \n    Q += .5*exp(-5.*l)*sin(50.*l);\n    \n    U.x -= .6;\n    U.y += .2;\n    l = 2.*dot(U,U);\n    \n    Q += .5*exp(-1.*l)*sin(10.*l);\n    \n}","name":"Buffer A","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"XsXGR8"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"Main {\n    \n    Q.x = A(U).x;\n    Q.zw = vec2(\n        A(U+vec2(1,0)).x-A(U+vec2(-1,0)).x,\n        A(U+vec2(0,1)).x-A(U+vec2(0,-1).x)\n    \n    );\n}","name":"Buffer B","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"4sXGR8"}],"inputs":[{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4sXGR8","filepath":"/media/previz/buffer02.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"Main {\n\n    Q = C(U);\n    float N = 150.;\n    vec4 H = hash(vec4(U,iFrame,1));\n    for (float i = 0.; i < N; i++) {\n        \n        float a = (i+6.2*H.z);\n        vec2 h = 10.*H.xy+.1*R.x*sqrt(i/N)*vec2(cos(a),sin(a));\n        vec2 w = U+h.xy;\n        vec4 b = B(w);\n        vec3 no = normalize(vec3(b.zw,.1));\n        {\n            vec3 p = vec3(w,1000.+b.x);\n            vec3 d = refract(normalize(vec3(.01,.01,-1)),no,.5+.3*H.w);\n            float j = -p.z/d.z;\n            p += d*j;\n            vec2 u = p.xy - U;\n                Q += 30.*exp(-.5*dot(u,u))*\n                    max(sin(-2.+6.2*H.w+vec4(1,2,3,4)),0.);\n        \n        }\n    }\n}","name":"Buffer C","description":"","type":"buffer"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":true,"mFlagMusicStream":false},"info":{"id":"XXccRS","date":"1735228584","viewed":194,"name":"Rainbow Caustic","username":"wyatt","description":"caustic","likes":24,"published":3,"flags":32,"usePreview":0,"tags":["caustic"],"hasliked":0,"parentid":"","parentname":""}}