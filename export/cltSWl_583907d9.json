{"ver":"0.1","info":{"id":"cltSWl","date":"1685868250","viewed":205,"name":"Simple Keying with Trail Effect","username":"s_fx","description":"The keying is very basic and you can still see some green edges present in the final result.","likes":2,"published":3,"flags":32,"usePreview":0,"tags":["greenscreen","trail","alphakey"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n * Simple Keying and Trail Effect (Main Image)\n * (c) 2023 s.fx\n */\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0, fragCoord / iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"/*\n * Simple Keying and Trail Effect (Buffer A)\n * (c) 2023 s.fx\n */\n\nconst vec3  KEYCOLOR  = vec3(0.0471, 0.6392, 0.1451); // key color (for this video: rgb(12, 163, 37))\nconst float DECAY     = .01;                          // how much is subtracted from previous frame\nconst float DEVIATION = .3;                           // how much the color can deviate from the key color\n\nbool key(in vec3 col, in vec3 keyVal, in float deviation)\n{\n    // check if given color is in range between keyVal + and - deviation\n    return all(greaterThan(keyVal + deviation, col)) && all(greaterThan(col, keyVal - deviation));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv  = fragCoord / iResolution.xy;\n    vec4 col = texture(iChannel1, uv);\n\n    if (key(col.rgb, KEYCOLOR, DEVIATION))\n        col = texture(iChannel0, uv) - DECAY;\n    \n    fragColor = col;\n}","name":"Buffer A","description":"","type":"buffer"}]}