{"ver":"0.1","info":{"id":"3lySRR","date":"1582452477","viewed":437,"name":"sunset-watercolor","username":"feefi","description":"water color sunset","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["perlin"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Fork of \"perlin watercolor\" by ws. https://shadertoy.com/view/lt2BRm\n// 2020-02-18 06:29:34\n\n// perlin noise from https://www.shadertoy.com/view/XdcXzH\n\nfloat N21(vec2 p){\n    float v  = dot(p,vec2(123.2,45.1));\n    return fract(sin(v)*438.545312);\n}\n\nfloat Noise(vec2 p){\n    vec2 f = fract(p);\n    vec2 id = floor(p);\n    float a = N21(id);\n    float b = N21(id + vec2(1.,0.));\n    float c = N21(id + vec2(0.,1.));\n    float d = N21(id + vec2(1.,1.));\n    f = smoothstep(vec2(0.0),vec2(1.0),f);\n    return mix(mix(a,b,f.x),mix(c,d,f.x),f.y);\n}\nfloat fbm(vec2 p){\n    float n = Noise(p*4.);\n    n += Noise(p*8.)*0.5;\n    n+= Noise(p*16.)*0.25;\n\tn+= Noise(p*32.)*0.125;\n    n+= Noise(p*62.)*0.0625;\n    return (n/2.);\n}\n\n\nfloat watercolor(float r,vec2 p,float ink,float layer)\n{    \n    float v = 0.;\n    \n    for (float i = 0.; i < layer; i++) {\n        vec2 pp = vec2(fbm(p+vec2(i)),fbm(p+vec2(i+1.)));\n        float h = ink*fbm(p+i)+r;\n        if (h < 0.3) { v += 1./layer; }\n    }\n    return v;\n}\nfloat watercolors(float r,vec2 p,float ink,float layer)\n{    \n    float v = 0.;\n    \n    for (float i = 0.; i < layer; i++) {\n        vec2 pp = vec2(fbm(p+vec2(i)),fbm(p+vec2(i+1.)));\n        float h = ink*fbm(pp+i)+r;\n        if (h < 0.3) { v += 1./layer; }\n    }\n    return v;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 p = fragCoord.xy / iResolution.xy - 0.5;\n    p.x *= iResolution.x/iResolution.y;\n    float r = p.y+0.2;//length(p);\n    \n\t\n    vec3 bg = mix(vec3(.7,0.3,0.1),vec3(1.,0.9,0.2),p.y+0.1);\n    vec3 col = vec3(0.);\n    \n    float l = length(p-vec2(-.38,0.2))*7.3;\n    l = .05*exp(l*l);\n    float sun = watercolors(l,p,0.25,7.);\n    col =  mix(bg,vec3(1.,.8,0.1),sun);\n    float sea = watercolor(p.y-0.05*sin(p.x*4.)-0.01*sin(p.x*23.)+0.25,p,0.3,4.);\n\tvec3 seacol = mix(vec3(1.),vec3(0.2,0.28,0.2), sea);\n    col = col* seacol ;\n    fragColor = vec4(col,1.); \n}","name":"Image","description":"","type":"image"}]}