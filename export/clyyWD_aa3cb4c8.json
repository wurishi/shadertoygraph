{"ver":"0.1","info":{"id":"clyyWD","date":"1700213039","viewed":39,"name":"fenxingtest wangqy1","username":"wangqiuyan","description":"分形几何练习","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["study"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define pi 3.1415926\n#define so 0.005\n#define sqt3 1.732\n#define MaxNum 5\n#define S smoothstep\n\nvec2 N(float angle)\n{\n    return vec2(sin(angle),cos(angle));    \n}\n\n//外面的大白\nfloat d(vec2 p)\n{\n    vec2 uv=p;\n    uv.x=abs(uv.x);    \n    uv.x-=0.5/sqt3;\n    vec2 n=N(1./3.*pi);   \n    float d=dot(n,uv);   \n    d=S(so,0.,d);\n    return d;\n}\n//大白里面画个黑三角\nfloat d2(vec2 p,float scale)\n{\n    vec2 uv=p;\n    float d=0.;\n    if(uv.y>0.) d=1.;\n    else\n    {\n        uv.x=abs(uv.x);\n        uv.x-=0.5/sqt3;\n        vec2 n=N(2./3.*pi);\n        d=dot(n,uv);\n        d=S(0.,so*scale,d);\n    }\n    return d;\n}\nvec4 d3(vec2 p,float scale)\n{\n    vec2 uv=p;\n    float d=0.;\n    if(uv.y>0.)\n    {\n        scale*=2.;\n        uv.y=uv.y*2.-.5;\n        uv.x*=2.;\n        d=d2(uv,scale);\n    }\n    else{\n        scale*=2.;\n        uv.x=abs(uv.x)*2.-1./sqt3;\n        uv.y=uv.y*2.+0.5;\n        d=d2(uv,scale);\n    }\n    return vec4(uv,d,scale);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord.xy-.5*iResolution.xy)/iResolution.y;\n  \n    \n    float scale=1.;\n    float d=d(uv);\n    d*=d2(uv,scale);\n    \n    \n    vec2 p=uv;\n    for(int i=0;i<MaxNum;i++)\n    {\n        vec4 d3=d3(p,scale);\n        p=d3.xy;\n        d*=d3.z;\n        scale=d3.w;\n    }\n    \n    \n    vec3 col = vec3(d);\n    \n    //col.rg=p;\n    \n     //col+=texture(iChannel0,p*vec2(0.3,1.)-iTime*1.1).rgb;\n    \n    \n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}\n\n","name":"Image","description":"","type":"image"}]}