{"ver":"0.1","info":{"id":"MdcyD8","date":"1522911819","viewed":130,"name":"Mandelbrot STRAIGHTENED?","username":"104","description":"Seriously why?","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["fractal","butwhy"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec3 pal( in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d )\n{\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\nfloat dtoa(float d, float amount){\n    return 1. / clamp(d*amount, 1., amount);\n}\n\nfloat mandel(vec2 V, out bool escaped) {\n    const float escape = 6.;\n    const float stepAmt = .05;\n    float ret;\n    escaped = false;\n    float x = 0., y=0.;\n    bool cont = true;\n    for(float i = 0.; i < 1.; i+=stepAmt)\n    {\n        float v = x*x+y*y;\n        ret = i + (v*.05*(1./escape));// coloring\n        if(v > escape) {\n            escaped = true;\n            break;\n        }\n        float xt = x*x - y*y + V.x;\n        y = 2.*x*y+V.y;\n        x = xt;\n    }\n    return ret;\n}\n\nvoid mainImage(out vec4 o, vec2 O)\n{\n    float t = iTime*.5+1e3;\n    vec2 R = iResolution.xy,\n        V=(O-.5*R)/R.y\n        ,N=O/R-.5// normalized coords (0-1)\n        ,P=O-R*.5// screen space coords, centered\n        ;\n\n    V*=4.;\n    vec2 Vsun = V;\n\n    for (float l = 1.;l < 8.;++ l) {\n        vec2 mv = V + vec2(t + l*2., 0.);// x scroll\n        if (V.y > 0.) mv -= mv;\n        float ang = mv.x;\n        float r = mv.y;\n        mv.x = r * cos(ang);\n        mv.y = r * sin(ang);\n        mv.x -= .5;\n        mv.x += sin(t*3.+l*3.)*.2;\n\n        // do the mandelbrot thing\n        bool escaped;\n        bool temp;\n        o = vec4(mandel(mv, escaped), vec3(mandel(V, temp)));\n\n        if (escaped) {\n            o *= (1./l);// distance coloring\n            break;\n        }\n        V *= 1.3;// parallax\n    }\n\n    o = pal( clamp(o.x,0.,1.),\n            vec3(0.5,0.5,0.5),vec3(0.5,0.5,0.5),vec3(1.0,1.0,1.0),vec3(0.1,0.11,0.19)\n           ).rgbb;\n    o.rg *= .6-N.y;\n    \n    float ds = length(Vsun-vec2(0.,.9))-.6;\n    o += vec4(1.,.5,0.,0.) * dtoa(ds, 40.)*2.;\n    o *= vec4(1.,.5,0.,0.) * dtoa(ds, 1.2)*2.;\n    o=clamp(o,0.,1.);\n\n    o = mix(vec4(.6), o, .25);\n    o *= 1.4;\n    o=clamp(o,0.,1.);\n    o = pow(o, o-o+.8);\n\n    o+=.06*fract(sin(dot(R+t,N))*1e5)-dot(N,N);\n\n    o=clamp(o,0.,1.);\n    o *= 1.-step(.44,abs(N.y));\n}\n\n\n\n\n","name":"Image","description":"","type":"image"}]}