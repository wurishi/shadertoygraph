{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"#define MAX_STEPS 100\n#define MAX_DIST 50.0\n#define SURF_DIST 0.01\n\n// Rotate matrix for 2D\nmat2 rot(float a) {\n    float c = cos(a), s = sin(a);\n    return mat2(c, s, -s, c);\n}\n\n// Color palette function\nvec3 palette(float t) {\n    return 0.5 + 0.5 * cos(6.28318 * (vec3(0.3, 0.6, 0.9) * t + vec3(0.0, 0.2, 0.4)));\n}\n\n// SDF for a spiraling tunnel\nfloat spiralTunnel(vec3 p) {\n    // Rotate around the Y-axis for a spiral effect\n    float twist = sin(iTime * 0.5) * 2.0;\n    p.xz *= rot(p.y * twist);\n\n    // Distance to a cylindrical tunnel\n    float r = length(p.xz) - 1.0;\n    r += sin(p.y * 5.0 + iTime) * 0.2; // Add wave deformation\n    return r;\n}\n\n// Scene map: defines the SDF scene\nfloat map(vec3 pos) {\n    float tunnel = spiralTunnel(pos);\n    return tunnel;\n}\n\n// Raymarching function\nvec4 rayMarch(vec3 ro, vec3 rd) {\n    float t = 0.0;\n    float d;\n    vec3 col = vec3(0.0);\n\n    for (int i = 0; i < MAX_STEPS; i++) {\n        vec3 p = ro + rd * t;\n        d = map(p);\n\n        if (d < SURF_DIST || t > MAX_DIST) break;\n\n        // Color based on depth\n        float colorFactor = t * 0.05;\n        col += palette(colorFactor) / (1.0 + d * 10.0);\n        t += d;\n    }\n\n    if (d < SURF_DIST) col *= 1.5; // Brighten the surface\n\n    return vec4(col, 1.0 - t * 0.01);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;\n\n    // Ray origin and direction\n    vec3 ro = vec3(0.0, 0.0, -5.0);\n    vec3 rd = normalize(vec3(uv, 1.0));\n\n    // Add slight camera rotation\n    rd.xy *= rot(sin(iTime * 0.2) * 0.1);\n\n    // Raymarch and render the scene\n    fragColor = rayMarch(ro, rd);\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4fKfDK","date":"1734461196","viewed":69,"name":"LavaL","username":"profmitchell","description":"lava","likes":3,"published":3,"flags":0,"usePreview":0,"tags":["lava","hot"],"hasliked":0,"parentid":"","parentname":""}}