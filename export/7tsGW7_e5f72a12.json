{"ver":"0.1","info":{"id":"7tsGW7","date":"1622243078","viewed":492,"name":"Bio Circuit","username":"wyatt","description":"Draw a conduction mask to the right and create an action potential on the left. This is the way neurons communicate and how muscles are controlled. I think that in order to make circuitry you need a 1 way conductor...?","likes":14,"published":3,"flags":32,"usePreview":0,"tags":["reactiondiffusion"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"Main {\n    Q = get_Q(U);\n    if (U.x<.5*R.x)\n    Q = sin(Q.x*10.+Q.y+vec4(1,2,3,4));\n    vec4 M = get_M(U);\n    Q = mix(vec4(0),Q,M.x);\n        if (U.x<4.||U.y<4.||R.x-U.x<4.||R.y-U.y<4.||abs(U.x-R.x*.5)<4.) Q = vec4(1);\n\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"Main {\n    Q = get_Q(U);\n    vec4 M = get_M(U);\n        vec4 \n            p = mouse,\n\t\t\tn = get_Q(U+vec2(0,1)),\n\t\t\te = get_Q(U+vec2(1,0)),\n\t\t\ts = get_Q(U-vec2(0,1)),\n\t\t\tw = get_Q(U-vec2(1,0)),\n\t\t\tl = 0.25*(n.x+e+s+w-4.*Q);\n\t\tfloat dt = M.x;\n\t\tfloat m = Q.x*Q.y*(1.-Q.x);\n\t\tQ.x += dt*(l.x+m-1e-3-.3*Q.x);\n\t\tQ.y += dt*(-m+2e-3*(1.-Q.y));\n\t\tQ.xy = max(Q.xy,0.);\n\t\tif (iFrame <1&&length(U.xy-0.5*R.xy)<10.)\n\t\t\tQ.x = 1.;\n\t\tif (U.x<.5*R.x&&iMouse.z>0.&&length(U.xy-iMouse.xy)<10.)\n\t\t\tQ.x = 1.;\n\t\tif (iFrame<1) {\n\t\t\tQ = vec4(0);\n\t\t}\n\t\tif (iMouse.z>0.) {\n\t\t\tfloat l = ln(U,p.xy,p.zw);\n\t\t\t\n\t\t\tvec2 u = U.xy-iMouse.xy;\n\t\t\tM = mix(M,vec4(1),.01*exp(-.01*dot(u,u)));\n       }\n\t\tif (iFrame < 1)\n\t\t\tM = vec4(0);\n        if (U.x>.5*R.x) Q = M;\n        \n        if (U.x<4.||U.y<4.||R.x-U.x<4.||R.y-U.y<4.||abs(U.x-R.x*.5)<4.) Q = vec4(0);\n        if (length(U-0.5*R)<1.) {\n            if (iMouse.z>0.) {\n                if (p.z>0.) Q =  vec4(iMouse.xy,p.xy);\n                else Q =  vec4(iMouse.xy,iMouse.xy);\n            }\n            else Q = vec4(-iResolution.xy,-iResolution.xy);\n        }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define R iResolution.xy\n#define A(U) texture(iChannel0,(U)/R)\n#define Main void mainImage(out vec4 Q, in vec2 U)\n#define get_Q(U) A(U)\n#define get_M(U) A(mod((U),vec2(.5*R.x,R.y))+vec2(.5*R.x,0))\n#define mouse A(.5*R)\nfloat ln (vec2 p, vec2 a, vec2 b) { // returns distance to line segment for mouse input\n    return length(p-a-(b-a)*clamp(dot(p-a,b-a)/dot(b-a,b-a),0.,1.));\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"Main {\n    Q = get_Q(U);\n    vec4 M = get_M(U);\n        vec4 \n            p = mouse,\n\t\t\tn = get_Q(U+vec2(0,1)),\n\t\t\te = get_Q(U+vec2(1,0)),\n\t\t\ts = get_Q(U-vec2(0,1)),\n\t\t\tw = get_Q(U-vec2(1,0)),\n\t\t\tl = 0.25*(n.x+e+s+w-4.*Q);\n\t\tfloat dt = M.x;\n\t\tfloat m = Q.x*Q.y*(1.-Q.x);\n\t\tQ.x += dt*(l.x+m-1e-3-.3*Q.x);\n\t\tQ.y += dt*(-m+2e-3*(1.-Q.y));\n\t\tQ.xy = max(Q.xy,0.);\n\t\tif (iFrame <1&&length(U.xy-0.5*R.xy)<10.)\n\t\t\tQ.x = 1.;\n\t\tif (U.x<.5*R.x&&iMouse.z>0.&&length(U.xy-iMouse.xy)<10.)\n\t\t\tQ.x = 1.;\n\t\tif (iFrame<1) {\n\t\t\tQ = vec4(0);\n\t\t}\n\t\tif (iMouse.z>0.) {\n\t\t\tfloat l = ln(U,p.xy,p.zw);\n\t\t\t\n\t\t\tvec2 u = U.xy-iMouse.xy;\n\t\t\tM = mix(M,vec4(1),.01*exp(-.01*dot(u,u)));\n       }\n\t\tif (iFrame < 1)\n\t\t\tM = vec4(0);\n        if (U.x>.5*R.x) Q = M;\n        \n        if (U.x<4.||U.y<4.||R.x-U.x<4.||R.y-U.y<4.||abs(U.x-R.x*.5)<4.) Q = vec4(0);\n        if (length(U-0.5*R)<1.) {\n            if (iMouse.z>0.) {\n                if (p.z>0.) Q =  vec4(iMouse.xy,p.xy);\n                else Q =  vec4(iMouse.xy,iMouse.xy);\n            }\n            else Q = vec4(-iResolution.xy,-iResolution.xy);\n        }\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"Main {\n    Q = get_Q(U);\n    vec4 M = get_M(U);\n        vec4 \n            p = mouse,\n\t\t\tn = get_Q(U+vec2(0,1)),\n\t\t\te = get_Q(U+vec2(1,0)),\n\t\t\ts = get_Q(U-vec2(0,1)),\n\t\t\tw = get_Q(U-vec2(1,0)),\n\t\t\tl = 0.25*(n.x+e+s+w-4.*Q);\n\t\tfloat dt = M.x;\n\t\tfloat m = Q.x*Q.y*(1.-Q.x);\n\t\tQ.x += dt*(l.x+m-1e-3-.3*Q.x);\n\t\tQ.y += dt*(-m+2e-3*(1.-Q.y));\n\t\tQ.xy = max(Q.xy,0.);\n\t\tif (iFrame <1&&length(U.xy-0.5*R.xy)<10.)\n\t\t\tQ.x = 1.;\n\t\tif (U.x<.5*R.x&&iMouse.z>0.&&length(U.xy-iMouse.xy)<10.)\n\t\t\tQ.x = 1.;\n\t\tif (iFrame<1) {\n\t\t\tQ = vec4(0);\n\t\t}\n\t\tif (iMouse.z>0.) {\n\t\t\tfloat l = ln(U,p.xy,p.zw);\n\t\t\t\n\t\t\tvec2 u = U.xy-iMouse.xy;\n\t\t\tM = mix(M,vec4(1),.01*exp(-.01*dot(u,u)));\n       }\n\t\tif (iFrame < 1)\n\t\t\tM = vec4(0);\n        if (U.x>.5*R.x) Q = M;\n        \n        if (U.x<4.||U.y<4.||R.x-U.x<4.||R.y-U.y<4.||abs(U.x-R.x*.5)<4.) Q = vec4(0);\n        if (length(U-0.5*R)<1.) {\n            if (iMouse.z>0.) {\n                if (p.z>0.) Q =  vec4(iMouse.xy,p.xy);\n                else Q =  vec4(iMouse.xy,iMouse.xy);\n            }\n            else Q = vec4(-iResolution.xy,-iResolution.xy);\n        }\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"Main {\n    Q = get_Q(U);\n    vec4 M = get_M(U);\n        vec4 \n            p = mouse,\n\t\t\tn = get_Q(U+vec2(0,1)),\n\t\t\te = get_Q(U+vec2(1,0)),\n\t\t\ts = get_Q(U-vec2(0,1)),\n\t\t\tw = get_Q(U-vec2(1,0)),\n\t\t\tl = 0.25*(n.x+e+s+w-4.*Q);\n\t\tfloat dt = M.x;\n\t\tfloat m = Q.x*Q.y*(1.-Q.x);\n\t\tQ.x += dt*(l.x+m-1e-3-.3*Q.x);\n\t\tQ.y += dt*(-m+2e-3*(1.-Q.y));\n\t\tQ.xy = max(Q.xy,0.);\n\t\tif (iFrame <1&&length(U.xy-0.5*R.xy)<10.)\n\t\t\tQ.x = 1.;\n\t\tif (U.x<.5*R.x&&iMouse.z>0.&&length(U.xy-iMouse.xy)<10.)\n\t\t\tQ.x = 1.;\n\t\tif (iFrame<1) {\n\t\t\tQ = vec4(0);\n\t\t}\n\t\tif (iMouse.z>0.) {\n\t\t\tfloat l = ln(U,p.xy,p.zw);\n\t\t\t\n\t\t\tvec2 u = U.xy-iMouse.xy;\n\t\t\tM = mix(M,vec4(1),.01*exp(-.01*dot(u,u)));\n       }\n\t\tif (iFrame < 1)\n\t\t\tM = vec4(0);\n        if (U.x>.5*R.x) Q = M;\n        \n        if (U.x<4.||U.y<4.||R.x-U.x<4.||R.y-U.y<4.||abs(U.x-R.x*.5)<4.) Q = vec4(0);\n        if (length(U-0.5*R)<1.) {\n            if (iMouse.z>0.) {\n                if (p.z>0.) Q =  vec4(iMouse.xy,p.xy);\n                else Q =  vec4(iMouse.xy,iMouse.xy);\n            }\n            else Q = vec4(-iResolution.xy,-iResolution.xy);\n        }\n}","name":"Buffer D","description":"","type":"buffer"}]}