{"ver":"0.1","info":{"id":"ss2XDd","date":"1621355968","viewed":175,"name":"Outline 15/05/2021 JAM Session","username":"lechuga","description":".","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["demoscene","outline","jam"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 e=vec2(0.01, .0);\nvec3 co,fo, n,ld=normalize(vec3(1, 1.,-4.)),al=vec3(.85);\nfloat t,d,dd;\n#define rot(a) mat2(cos(a), sin(a), -sin(a), cos(a))\n#define a(d) clamp(m(p+n*d)/d, 0., 1.)\n#define s(d) smoothstep(0., 1., m(p+ld*d)/d)\n#define COL_P vec3(0., 0.34, 1.)\n#define pi acos(-1.)\nfloat mov;\nfloat h(float p){\n  return fract(sin((p)*344.)*803.5);\n}\nfloat h2(vec2 p){\n  return fract(sin(dot((p+t*10.)*345.,p.yx*456.))*567.);\n}\nfloat c(float t){\n  t*=.05;\n  return mix(h(floor(t)), h(floor(t+1.)), pow(smoothstep(0., 1., fract(t)), 20.));\n}\nfloat sb(vec3 p, vec3 s){\n  p=abs(p)-s;\n  return max(max(p.y,p.x), p.z);\n}\nfloat smin(float a, float b, float k){\n  float h=max(k-abs(a-b), 0.);\n  return min(a,b)-h*h*.25/k;\n}\nvec2 smin(vec2 a, vec2 b, vec2 k){\n  vec2 h=max(k-abs(a-b), 0.);\n  return min(a,b)-h*h*.25/k;\n}\nvec3 smin(vec3 a, vec3 b, vec3 k){\n  vec3 h=max(k-abs(a-b), 0.);\n  return min(a,b)-h*h*.25/k;\n}\nfloat tr(vec3 p, vec3 s){\n  p.y=abs(p.y)-.1;\n  p.zx=abs(p.zx)-s.xz;\n  vec2 a=vec2(.34);\n  return max(max(dot(p.xy,a),dot(p.xz,a)), dot(p.yz,a));\n}\nfloat id1;\nfloat g1,g2,g3,g4;\nfloat tt;\nfloat dia(vec3 p){\n  vec3 p1=p;\n  \n  p1.z+=mov;\n  \n  float re1=30.;\n  \n  \n  p1.yx=abs(p1.yx)-9.-sin(tt*.41);\n  p1.xy*=rot(pi/4.);\n  id1=h2(floor(p1.xz/re1-.5));\n  p1.xz=(fract(p1.xz/re1-.5)-.5)*re1;\n  \n  float cc=sb(p1,vec3(1., 15., 1.));\n  g1+=.01/(.1+cc*cc);\n  vec3 p2=p;\n  float re2=20.;\n  p2.xy+=sin(p2.z*.45+t*2.);\n  for(float i=0.;i<3.;i++)\n  p2=abs(p2)-3.-t,\n  p2.zy*=rot(pi*2.+t*.141),\n  p2.xy*=rot(pi*2.+t*.141),\n  //p2.xy=abs(p2.xy)-15.,\n  p2.xy=smin(p2.xy, 1.-p2.xy, vec2(1.));//exp\n  \n  p2-=1.;\n  p2=(fract(p2/re2-.5)-.5)*re2;\n  float cc1=sb(p2,vec3(1., 60.45, .23));\n  //cc=mix(cc1,cc,1.05);\n  g2+=.1/(.1+cc1*cc1);\n  cc=smin(cc1,cc, 1.);\n  \n  vec3 p3=p;\n  //p3.x=abs(p3.x)-3.;\n  p3.xy*=rot(tt*8.);\n  p3=abs(abs(p3)-1.)-13.;\n  float cc3=tr(p3, vec3(3.));\n  cc=min(cc3,cc);\n  g3=1./(1.+cc3);\n  return cc;\n}\n\nfloat g5;\nfloat m(vec3 p){\n  float d=dia(p);\n  vec3 p1=p;\n  p1.xy*=rot(tt);\n  vec2 s=vec2(1., 10.);\n  float ff=length(vec2(length(p1.xy)-s.y, p1.z))-s.x-sin(p.y*.451+tt)*sin(p.x*.5656+tt)*sin(p.z*.5656+tt)*.5-.5;\n  p1.yx-=2.;\n  p1.xy*=rot(tt);\n  float ff2=length(vec2(length(p1.xy)-s.y, p1.z))-s.x-sin(p.y);\n  ff=smin(ff2,ff, 1.);\n  d=smin(d, ff, 5.);\n  \n  float ss=sin((t*.5))*200.+250.;\n  float ccl=(length(p)-ss);\n  g4+=1./(1.+ccl*ccl);\n  ccl=smoothstep(0., 1., ccl);\n  \n  vec3 p4=p;\n  \n  p4=abs(p)-4.;\n  float at=mov*1.5;\n  p4.xy+=sin(at)*10.;\n  \n  p4.zx=abs(p4.zx)-.5;\n  p4.yz*=rot(at+p4.y*.1);\n  float momo=length(p4)-2.;\n  momo=min(momo, length(p-vec3(0., 1., 0.))-2.-sin(p.y+tt)*sin(p.x+tt)*sin(p.z+tt)*.5-.5);\n  d=smin(d, momo, 1.);\n  g5+=2./(.1+momo*momo);\n  return d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n \n t=mod(iTime*.5, 50.);\n tt=c(t*.25)*20.+t*.25;\n mov= t*30.;\n\tvec2 uv = fragCoord/iResolution.xy;\n\tuv -= 0.5;\n\tuv /= vec2(iResolution.y / iResolution.x, 1);\n  float scene=mod(t*.25, 50.);\n  //\n  //if(mm < 0.1)\n  //  scene=50.;\n  \n  \n  float r1=scene*5.;\n  uv=(fract(uv.yx/r1-.5)-.5)*r1;\n  vec3 p=vec3(0.01, 0.01, -20.);\n  p.x=abs(p.x)-100.;\n  p.zx+=abs(sin(t*.45)*6.4)-2.;\n  p.xz*=rot(sin(t*.15)*pi*2.);\n  vec3 pp=vec3(0.01);\n  pp.xz*=rot(sin(t*.05)*pi*.5);\n  pp.xz*=rot(sin(t*.15)*pi*2.);\n  vec3 cz=normalize(pp-p);\n  vec3 cx=normalize(cross(cz, vec3(0.,-1., 0.)));\n  vec3 cy=normalize(cross(cz,cx));\n  vec3 r=mat3(cx,cy,cz)*normalize(vec3(-uv-h2(uv)*.001-h(uv.x)*.25*sin(t*.001)*.25, 1.-length(uv)*1.15+(sin(t*.5)*.33)));\n  r.xy*=rot(sin(t)*.5-.5);\n  co=fo=vec3(0.01);\n  float i;\n\tfor(i=0.;i < 50.;i++) if(d=m(p),dd+=d,p+=d*r,abs(d) < .001) {\n    if(d > 100.){co=vec3(0.1);break;}\n    n=normalize(\n    e.xyy * (m(p+e.xyy)) +\n    e.yyx * (m(p+e.yyx)) +\n    e.yxy * (m(p+e.yxy)) +\n    e.xxx * (m(p+e.xxx))\n    );\n    r=reflect(-r, n),p+=.001;\n    \n    float dif=max(dot(ld,n), 0.);\n    float sp=pow(max(dot(reflect(-ld,n), -r),0.),30.);\n    float fr=pow(1.+dif, 3.);\n    co=mix(sp*al+(a(.7))*(dif+s(.24)),fo, min(fr, .06) );\n  }\n    co+=g3*vec3(.0, 0.1, .5)*50.;\n    co+=g1*vec3(0.73-sin(t*.1)*.0001-.5, 0.,id1*id1)*.65;\n    co+=g2*vec3(0., sin(t*.7)*.0001-.5,.01)*.5;\n    co+=g4*vec3(1., 0.25*-sin(tt)*.5+.5, 0.)*.25;\n    co+=g5*vec3(1.,0.,0.)*.95;\n    \n  \n   \n    co=smoothstep(-0.123, 10., co);\n    co*=smoothstep(0., 1.,1.-length(uv)*1.05);\n    co*= 1.-max(length(dd)/300.,0.);\n\tfragColor = sqrt(vec4(co, 1.));\n}","name":"Image","description":"","type":"image"}]}