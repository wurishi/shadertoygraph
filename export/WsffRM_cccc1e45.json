{"ver":"0.1","info":{"id":"WsffRM","date":"1587856602","viewed":143,"name":"MandelBro","username":"savegor","description":"Simple visualization of the Mandelbrot set.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["test"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 nextZ(vec2 z, vec2 z0) {\n    const float c = 0.0;\n    \n    return vec2(z.x * z.x - z.y * z.y + z0.x, 2.0 * z.x * z.y + z0.y); \n}\n\nfloat mandelbrot(vec2 z, vec2 z0) {    \n    const float R2 = 1200.0;\n    vec2 r = vec2(0.0, 0.0);\n    float i = 0.0;\n    for(; i < 1.0; i = i + 0.0056) {\n    \tz = nextZ(z, z0);\n        r = z - z0;\n        float dist2 = r.x * r.x + r.y * r.y;\n        if(dist2 > R2) {\n            break;\n        }\n    }\n    return i;\n}\n\nfloat red(float i) {\n    i *= 0.2;\n\treturn sin(i * 3.14 * 10.0);   \n}\n\nfloat green(float i) {\n    i *= 0.5;\n\treturn sin(i * 3.14 * 3.0);   \n}\n\nfloat blue(float i) {\n    i *= 1.3;\n\treturn sin(i * 3.14 * 4.0);   \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 size = vec2(iResolution.x, iResolution.y);\n    \n    //z coordinate x : -1.0 .. 1.0, y : -1.0 .. 1.0\n    vec2 z = 0.2 * (2.0 * (fragCoord - 0.5 * size) / size);\n    float aspect = size.y / size.x;\n    // y coordinate from -aspect .. aspect\n    z.y *= aspect;\n\n    // scale calculation by time\n    float zeroone = 0.5 * sin(iTime * 0.1);\n    float arg = zeroone * 550.0;\n    float scale = pow(1.029, -arg);\n    \n    // dirty hack for scale increasing slow down\n    if(scale > 1.0) {\n        scale = pow(scale, 0.63);\n    }\n\n    // apply scale\n    z = z * scale;\n    \n    // rotation\n    float alpha = iTime * 0.13;\n    float cosa = cos(alpha);\n    float sina = sin(alpha);\n    \n    z = vec2(z.x * cosa + z.y * sina, z.y * cosa - z.x * sina);\n    \n    //center :: from wiki\n    vec2 center = vec2(-1.88488933694469, 0.00000000081387);\n    z += center;\n    \n    // distance to mandelbrot set\n\tfloat d = mandelbrot(z, z);\n    // Output to screen\n    fragColor = vec4(red(d), green(d), blue(d), 1.0);\n}","name":"Image","description":"","type":"image"}]}