{"ver":"0.1","info":{"id":"wljyDV","date":"1595445157","viewed":49,"name":"v3ReactDiffuse.glsl","username":"jorge2017a1","description":"v3ReactDiffuse.glsl","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["v3reactdiffuseglsl"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGRn","filepath":"/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","previewfilepath":"/media/ap/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat rand(vec2 uv)\n{\n    return fract(sin(dot(uv, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec2 ReactDiffuse(vec2 p)\n{\n    vec4 duv = vec4(1, 1, -1, 0) / iResolution.xyxy;\n\n    vec2 s = texture(iChannel0, p).xy;\n\n    vec2 lpc =\n        texture(iChannel0, p - duv.xy).xy * 0.05 +\n        texture(iChannel0, p - duv.wy).xy * 0.20 +\n        texture(iChannel0, p - duv.zy).xy * 0.05 +\n\n        texture(iChannel0, p - duv.xw).xy * 0.20 +s * -1.0 +\n        texture(iChannel0, p + duv.xw).xy * 0.20 +\n\n        texture(iChannel0, p + duv.zy).xy * 0.05 +\n        texture(iChannel0, p + duv.wy).xy * 0.20 +\n        texture(iChannel0, p + duv.xy).xy * 0.05;\n\n    const float f = 0.0545;\n    const float k = 0.0650;\n\n    s += vec2(\n        lpc.x * 1.00 - s.x * s.y * s.y + f * (1.0 - s.x),\n        lpc.y * 0.3 + s.x * s.y * s.y - (k + f) * s.y\n    );\n\n    return s;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    bool initiate = false;\n\n    // *** TO INITIATE THE STATE, ENABLE THE LINE BELOW. ***\n    //initiate = true;\n\n    vec2 uv = fragCoord.xy / iResolution.xy;\n\n    if (initiate)\n    {\n        fragColor = vec4(1, step(0.9, rand(uv + iTime * 0.01)), 0, 0);\n    }\n    else if (uv.x < 0.5)\n    {\n        fragColor = vec4(ReactDiffuse(uv), 0, 0);\n    }\n    else\n    {\n        vec2 s = texture(iChannel0, uv - vec2(0.5, 0)).xy;\n        float c = smoothstep(-0.2, 0.2, s.y - s.x);\n        fragColor = vec4(c, c, c, 1);\n    }\n}\n\n","name":"Image","description":"","type":"image"}]}