{"ver":"0.1","info":{"id":"Dt3BzM","date":"1701055511","viewed":49,"name":"In","username":"Elsio","description":".","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["fractal","path","tunel","colonoscopy"],"hasliked":0,"parentid":"ddycDd","parentname":"Tunel textura"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define R iResolution.xy\n#define rot(a) mat2(cos(a + vec4(0, 11, 33, 0)))\n#define cor1 vec4(6, 3, 0, 0) / 40.\n#define cor2 vec4(4, 0, 0, 0) / 40.\n\nconst float freqA = .3;\nconst float freqB = .2;\nconst float ampA = 2.;\nconst float ampB = 3.;\nfloat id;\n\nvec2 path(in float z) {\n    return vec2(\n        ampA * sin(z * freqA), \n        ampB * cos(z * freqB)\n    );\n}\n\nvec2 path2(in float z) {\n    return vec2(\n        ampB * sin(z * freqB * .2), \n        ampA * cos(z * freqA * .8)\n    );\n}\n\n\nfloat textura(vec3 p) {\n    float dd, d = 0., a = 1.;\n    p.xy *= rot(p.z * .3);\n    while(a < 4.)\n        d += dot(sin(p * a * 1.9) * .2, p / p) / a,\n        d += (cos(iTime * 1.5 + p.z) * .5 + .5) \n              * length((1.5 * cos(p * a * 5.) * .1)) / a,\n        a += a;\n    return d;\n}\n\nfloat map(vec3 p) {\n    vec2 t1 = p.xy - path(p.z);\n    vec2 t2 = p.xy - path2(p.z);\n    //id = step(length(t2), length(t1));\n    id = 1.-length(cross(vec3(t2, 0),vec3(t1, 0)));\n    return 1.5 - min(length(t1), length(t2)) + textura(p);\n}\n\n\nvoid mainImage(out vec4 o, vec2 u) {\n    vec3 col, p, lookAt, fw, rt, up, rd;\n    float s = 1., d, i, t = iTime * 2.; \n    \n    u = (u + u - R) / R.y;\n\n    lookAt.z  = t;\n    lookAt.xy = path(lookAt.z);\n    \n    p.z  = t - .1;\n    p.xy = path(p.z);\n\n    fw = normalize(lookAt - p);\n    rt = vec3(fw.z, 0., -fw.x);\n    up = cross(fw, rt);\n    rd = fw + (u.x * rt + u.y * up) / 2.6;\n    \n    while(i++ < 99. && s > .001)\n        s = map(p) * .5, \n        p += s * rd;\n\n    o = id > .5 ? cor1 : cor2;\n    o += 3. / i;\n}","name":"Image","description":"","type":"image"}]}