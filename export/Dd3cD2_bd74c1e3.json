{"ver":"0.1","info":{"id":"Dd3cD2","date":"1695479068","viewed":43,"name":"sky and sun 2","username":"tomcat7479","description":"sky and sun 2","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["skysun"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 fix(in vec2 fragCoord) {\n    return (2.0 * fragCoord.xy - iResolution.xy) / min(iResolution.x, iResolution.y);\n}\n\nmat3 setCamera(vec3 lookAt, vec3 ro, float theta) {\n    vec3 z = normalize(lookAt - ro);\n    vec3 y_dir = vec3(sin(theta), cos(theta), 0.0);\n    vec3 x = normalize(cross(z, y_dir));\n    vec3 y = normalize(cross(x, z));\n    return mat3(x, y, z);\n}\n\nvec3 renderSky(vec3 rd) {\n    vec3 color;\n    vec3 defaultSkyColor = vec3(0.08, 0.5, 0.91);\n    vec3 defaultBelowColor = vec3(0.9, 0.87, 0.87);\n    float weight = 0.91;\n    color = defaultSkyColor;\n    color = color - rd.y * rd.y * 0.5;\n    color = mix(color, defaultBelowColor * weight, pow(1.0 - rd.y, 2.0));\n    return color;\n}\n\nvec3 renderSun(vec3 rd) {\n    vec3 color = vec3(0.0);\n    float weight = 0.75;\n    vec3 baseColor1 = vec3(1.0, 0.7, 0.4);\n    vec3 baseColor2 = vec3(1.0, 0.8, 0.6);\n\n    vec3 look = normalize(vec3(-0.75, 0.4, -0.75));\n    float dot = clamp(dot(look, rd), 0.0, 1.0);\n\n    color += weight * baseColor1 * pow(dot, 4.0);\n    color += weight * baseColor2 * pow(dot, 64.0);\n    color += weight * baseColor2 * pow(dot, 512.0);\n    \n    return sqrt(color);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fix(fragCoord);\n\n    float focus_distance = 2.0;\n    vec3 looktAt = vec3(0.0, 4.0, 0.0);\n    vec3 ro = vec3(10.0 * sin(0.2 * iTime), 2.0, 10.0 * cos(0.2 * iTime));\n    mat3 camera = setCamera(looktAt, ro, 0.0);\n    vec3 rd = normalize(camera * vec3(uv, focus_distance));\n\n    vec3 skyColor = renderSky(rd);\n    vec3 sunColor = renderSun(rd);\n\n    vec3 color = mix(skyColor, sunColor, 0.5);\n    fragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}