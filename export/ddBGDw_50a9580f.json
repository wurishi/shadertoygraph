{"ver":"0.1","info":{"id":"ddBGDw","date":"1668293047","viewed":61,"name":"Collatz Fractal but I made it","username":"zenzicubic","description":"Collatz didn't see this one coming, eh?","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["fractal","trippy","collatz"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265358\n#define MAX 300\n#define BAIL 1000.0\n\nvec3[5] colors = vec3[](vec3(0.992,0.906,0.145), vec3(0.369,0.788,0.384), vec3(0.129,0.569,0.549), vec3(0.231,0.322,0.545), vec3(0.267,0.004,0.329));\nconst vec2 TWO = vec2(2.0, 0.0);\nfloat dim = 6.0;\nvec2 pos = vec2(-3, -3);\n\nvec2 cmul(vec2 a, vec2 b)\n{\n    return vec2(a.x*b.x-a.y*b.y, a.y*b.x+a.x*b.y);\n}\n\nvec2 iexp(vec2 z)\n{\n    return vec2(cos(z.x), sin(z.x)) * exp(-z.y);\n}\n\nvec2 icos(vec2 z)\n{\n    return iexp(z) * 0.5 + iexp(-z) * 0.5;\n}\n\nvec2 collatz(vec2 z)\n{\n    return 0.25 * (TWO + (7.0 * z) - cmul(TWO + (5.0 * z), icos(PI * z)));\n}\n\nint test(vec2 z)\n{\n    int i = 0;\n    while (i < MAX)\n    {\n        z = collatz(z);\n        if (dot(z, z) > BAIL) break;\n        i ++;\n    }\n    return i;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 z = 3. * (fragCoord -.5 * iResolution.xy) / iResolution.y;\n    int i = test(z);\n    \n    float t = mod(float(i) / 10.0, 1.0);\n    fragColor = vec4(sqrt(t),t*t*t,max(0.,sin(2.*PI*t)),1.);\n}","name":"Image","description":"","type":"image"}]}