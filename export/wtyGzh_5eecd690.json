{"ver":"0.1","info":{"id":"wtyGzh","date":"1578255580","viewed":342,"name":"yet another firework ","username":"StrangerintheQ","description":"holiday fireworks","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["fireworks"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 hsl2rgb(vec3 c) {\n  vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0);\n  return c.z + c.y * (rgb-0.5)*(1.0-abs(2.0*c.z-1.0));\n}\n\nfloat random (vec2 p) {\n    return fract(sin(dot(p,vec2(12.9898,78.233)))*43758.5453123);\n}\n\nvec4 firework(vec2 p, float n) {\n\n    float dur = 3.; \n    float id = floor(iTime/dur-n) + n*8.;\n    float t = smoothstep(0., 1., fract(iTime/dur-n));\n    float t1 = max(0.0, 0.5 - t); \n    float t2 = max(0.0, t - 0.5); \n    p.y += t1; \n    p.y -= random(vec2(n*35.+id, n*45.+id))*0.3; \n\n    p.x += n - 0.5 + mix(0., sin(id)*0.4, t1);\n    \n    vec4 c;\n    if ( dot(p,p) > 0.002 + t2 *0.1 ) \n        return c; \n    vec3 rgb = hsl2rgb(vec3(id*0.3, .8, .7)); \n    for (float i = 0.; i < 77.; i += 1.) {\n\n        float angle = i + t*sin(i*4434.);\n        float dist = 0.15 + 0.2 * random(vec2(i*351. + id, i*135. + id)); \n\n        vec2 pt = p + vec2(dist*sin(angle), dist*cos(angle)); \n        pt = mix(p, pt, t2); \n\n        float r = .03 * (1. - t) * t2 +\n                  .002*t*t*(1. - max(.0, t - .9)*10.); \n\n        float d = 1. - smoothstep(sqrt(dot(pt, pt)), .0, r); \n        c += vec4(rgb, 1.) * d;\n    }\n    return c;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n  vec2 uv = gl_FragCoord.xy/iResolution.xy - 0.5;\n  uv.x *= iResolution.x/iResolution.y; \n  for (float n = 0.; n < 6.; n += 1.) \n      fragColor += firework(uv, n/6.) - 0.05;\n}","name":"Image","description":"","type":"image"}]}