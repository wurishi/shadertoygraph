{"ver":"0.1","info":{"id":"flXBRM","date":"1650610173","viewed":95,"name":"Magnetic pendulums","username":"Eriksonn","description":"Harmonic oscillators that are also repelled by magnets","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["fractal","oscillator","ode"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec2 uv = 6.0*(fragCoord-iResolution.xy*0.5)/iResolution.y;\n    \n    vec4 tex = texture(iChannel0,fragCoord/iResolution.xy);\n\n    vec3 col = vec3(sqrt(tex.xy*tex.xy+0.2),length(tex.zw))*0.7;\n\n    col = mat3(\n        0.0,0.2,0.8,\n        0.8,0,0.2,\n        0.5,0.7,0\n    )*col;\n    \n    for(int i=0;i<4;i++)\n        {\n            float a = 6.28318530718*(float(i)+0.5)/4.0;\n            vec2 P = uv-vec2(cos(a),sin(a));\n            if(dot(P,P)<0.02)\n            fragColor=vec4(1);\n        }\n    \n    //if(dot((tex.xy-uv),(tex.xy-uv))<0.02)\n        fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = 6.0*(fragCoord-iResolution.xy*0.5)/iResolution.y;\n    vec2 pos;\n    vec2 vel;\n    if(iTime<0.5)\n    {\n        pos=vec2(uv);\n        vel=vec2(0);\n    }else\n    {\n        vec4 tex = texture(iChannel0,fragCoord/iResolution.xy);\n        pos=tex.xy;\n        vel=tex.zw;\n        vec2 force = -pos-vel*0.08;\n        float h=0.3;\n        for(int i=0;i<4;i++)\n        {\n            float a = 6.28318530718*(float(i)+0.5)/4.0;\n            vec2 P = pos-vec2(cos(a),sin(a));\n            force += 1.0*P/pow(dot(P,P)+h,1.5);\n        }\n        float dt = 0.04;\n        vel+=force*dt;\n        pos+=vel*dt;\n    }\n    fragColor = vec4(pos,vel);\n}","name":"Buffer A","description":"","type":"buffer"}]}