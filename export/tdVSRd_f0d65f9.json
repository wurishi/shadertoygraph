{"ver":"0.1","info":{"id":"tdVSRd","date":"1574802619","viewed":357,"name":"Musical dots","username":"zodiax","description":"My first shot on multibuffer","likes":13,"published":1,"flags":96,"usePreview":0,"tags":["mp"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\t fragColor = texture(iChannel0,fragCoord/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"llX3Ds","filepath":"https://soundcloud.com/khasper485/the-lion-king-hakuna-matata-remixmaniacs-trap-remix","previewfilepath":"https://soundcloud.com/khasper485/the-lion-king-hakuna-matata-remixmaniacs-trap-remix","type":"musicstream","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define _Rep 32.\n#define _SampSize 0.15\n#define _Trace 0.13\n\nmat2 rotate2d(float _angle){\n    _angle *= 3.141592/180.;\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle));\n}\n\nfloat GatherSoundInfo(float SampleWished)// 0 - 512\n{\n    return texelFetch(iChannel1, ivec2(SampleWished, 0), 0).r;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-iResolution.xy/2.)/iResolution.y;\n    \n    fragColor = texture(iChannel0,fragCoord/iResolution.xy);\n    \n        uv *=5.;\n    \n    for(float i = 0.; i < _Rep; i++ )\n    {\n    uv *= rotate2d(360./_Rep*(iTime+2.)*.2);\n\n    float sample1 = 512./_Rep*i/2. + .5 * 512./_Rep;\n    sample1 = GatherSoundInfo(sample1);\n    vec2 samplePos = vec2(i*(iResolution.x/iResolution.y)/_Rep+.1,sample1*2.-2.5);\n        \n    float circle = smoothstep(_SampSize,0.01,distance(uv,samplePos));\n    vec4 col = vec4(abs(1.-sample1),i/_Rep,i/_Rep*0.7,1.0)/2.0;\n    col *= circle;\n    fragColor = sample1>0. && distance(uv,samplePos)<_SampSize? fragColor + col : clamp(fragColor-_Trace*iTimeDelta,0.,1.);\n    }\n}","name":"Buffer A","description":"","type":"buffer"}]}