{"ver":"0.1","info":{"id":"DsBBDd","date":"1690240046","viewed":170,"name":"#005","username":"jvincent","description":"The inside of a spinning taurus colored with rainbow ribbons that change with time.","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["3d","raymarching","rainbow","rotating"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define pi 3.15159265359\n#define tpi 6.28318530718\n#define neonColor(offset, speed)  abs( sin( (speed) * (offset) + vec3(3,7,11)*pi/6.0) )\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-0.5*iResolution.xy)/iResolution.y;\n    vec3 col = vec3(0.0);\n    mat2 rotation = mat2(cos(0.5*iTime), sin(0.5*iTime), -sin(0.5*iTime), cos(0.5*iTime));\n    \n    uv *= rotation;\n    \n    \n    vec3 rayOrigin = vec3(0.0, 0.0, -1.748);\n    vec3 lookAt = vec3(0.0, 0.0, 0.0);\n    float zoom = 0.5;\n    \n    \n    \n    vec3 f = normalize(lookAt - rayOrigin);\n    vec3 r = normalize(cross(vec3(0.0, 1.0, 0.0), f));\n    vec3 u = cross(f, r);\n    vec3 c = rayOrigin + f * zoom;\n    vec3 i = c + uv.x * r + uv.y * u;\n    vec3 rayDirection = normalize(i - rayOrigin);\n    \n    float distSurface, distOrigin;\n    vec3 p;\n    \n    for(int i = 0; i < 100; i++)\n    {\n        p = rayOrigin + rayDirection * distOrigin;\n        distSurface = -(length(vec2(length(p.xz) - 1.0, p.y)) - 0.75);\n    \n        if(distSurface < 0.001) break;\n        \n        distOrigin += distSurface;    \n     }\n     \n     if(distSurface < 0.001)\n     {\n         float x = atan(p.x, p.z) + 0.5*iTime;\n         float y = atan(length(p.xz)-1.0,p.y);\n         \n         float bands = smoothstep(-0.1, 0.1, sin(40.0*y+40.0*x));\n         float ripples = ((sin(10.0*x-30.0*y)*3.0) * 0.5) + 0.5;\n         float waves = sin(12.0*x + 12.0*y - 3.0*iTime);\n         \n         float m = waves * ripples * bands;\n         col = m * neonColor( -1.0*y-1.0*x + 3.0*iTime, 1.0);\n     }\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}