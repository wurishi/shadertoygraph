{"ver":"0.1","info":{"id":"4l2yz1","date":"1507496028","viewed":111,"name":"EGP-200 Reveal Assignment","username":"shaneF22","description":"A shader for a class assignment where we need to a apply a blur shader to a top layer, and have a circle follow mouse input that reveals a layer with sharpen. ","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["egp200"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n//Blur Kernel\nmat3 blur = mat3(\n0.111, 0.111, 0.111, \n0.111, 0.111, 0.111, \n0.111, 0.111, 0.111 \n);\n\n//Sharpen Kernel\nmat3 sharpen = mat3(\n0., -1, 0.0, \n-1, 5, -1, \n0., -1, 0.0 \n);\n\n//Makes the image aspect ratio correct!\nvec3 sampler(const int x, const int y, in vec2 fragCoord, sampler2D channelName)\n{\nvec2 uv = fragCoord.xy / iResolution.xy * iChannelResolution[0].xy;\nuv = (uv + vec2(x, y)) / iChannelResolution[0].xy ;\nreturn texture(iChannel0, uv).xyz;\n}\n\n//Runs the kernel through\nvec3 nFilter(in vec2 fragCoord, mat3 kernel, in sampler2D channelName)\n{\nvec3 sum = vec3(0.0, 0.0, 0.0);\n\nfor (int i = 0; i < 3; i++)\n{\nfor (int j = 0; j < 3; j++)\n{\nsum += sampler(i - 1, j - 1, fragCoord, channelName) * kernel[i][j];\n}\n}\nreturn sum;\n}\n    \n//Variables needed for layers!\nvec3 backgroundColor = vec3(0.5, 0.9, 1.0);\nvec3 layerColor = vec3(0.0, 0.0, 0.0);\n\nvec4 layer1,layer2, layer3;\nvec4 compositeLayers;\n\n//Layer Alphas\nconst float Layer1Alpha = 1.0; \nconst float Layer2Alpha = 1.0;\nfloat layer3Alpha;\n\n//This is the size of the circle (Change it to see how it changes the reveal)\nconst float RevealRadius = 0.11;\n\n//Coordinate variables\nvec2 fc, uv, mouseUv;\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\nfc = fragCoord.xy;\nuv = fc / iResolution.xy;\nuv.y *= iResolution.y / iResolution.x;\n    \n//Mouse Cooridinates\nmouseUv = iMouse.xy / iResolution.xy;  \nmouseUv.y *= iResolution.y / iResolution.x;\n   \n//Background\nlayer1 = vec4(backgroundColor, Layer1Alpha);\n    \n//Sharpened Layer (What will be revealed)\nlayerColor = nFilter(fc, sharpen, iChannel0);   \nlayer2 = vec4(layerColor, Layer2Alpha);\n    \n//Blurred Layer \nlayerColor = nFilter(fc, blur, iChannel0);\n//Allows for the circle to appear, and follow the mouse (MUST CLICK DOWN!)\nlayer3Alpha = step(RevealRadius, length(uv - mouseUv));\nlayer3 = vec4(layerColor, layer3Alpha);\n    \n//Mixing of the Layers to get the mix right\ncompositeLayers = mix(layer1, layer2, layer2.a);\ncompositeLayers = mix(compositeLayers, layer3, layer3.a);\n    \n//The final mix displayed\nfragColor = compositeLayers;\n}\n    ","name":"Image","description":"","type":"image"}]}