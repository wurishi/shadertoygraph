{"ver":"0.1","info":{"id":"msc3zj","date":"1677528375","viewed":92,"name":"Peacock pattern","username":"irnclemente","description":"A peacock pattern","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["hypnotic","peacock","feather"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float PI = atan(-1.0);\n\nfloat sdVesica(vec2 p, float r, float d)\n{\n    p = abs(p);\n    float b = sqrt(r*r-d*d);\n    return ((p.y-b)*d>p.x*b) ? length(p-vec2(0.0,b))\n                             : length(p-vec2(-d,0.0))-r;\n}\n\n\n\nfloat rand(float co) { return fract(sin(co*(24.4358)) * 12288.8312); }\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float resmax = max(iResolution.x, iResolution.y);\n    vec2 st = fragCoord.xy/resmax;\n    \n    st = st*5.0;\n    st = st - 3.0;\n    st.x = st.x+0.05*sin(st.x+st.y-0.5)*(st.x*cos(iTime)-st.y*sin(iTime));\n    st.y = st.y+0.05*sin(st.x+st.y-0.5)*(st.x*sin(iTime)+st.y*cos(iTime));\n    \n    float grid_x = floor((st.y*0.511)*2.0);\n    float bands_x = float(int(grid_x)%2==0);\n    st.x = st.x + 0.53*bands_x;\n    \n    float grid_y = floor((st.x*1.43+0.03)*2.0);\n    float bands_y = float(int(grid_y)%2==0);\n    \n    vec2 st2 = st-0.5;\n    float c = 0.35;\n    st2.x = mod(st2.x+0.5*c,c)-0.5*c;\n    c = 0.98;\n    st2.y = mod(st2.y+0.5*c,c)-0.5*c;\n    \n    float random = rand(grid_x) + rand(grid_y);\n    float eyeOpen = (1.0-max(500.0*(sin(iTime*0.1+random*644.51)-0.998),0.0))*1.0;\n\n    \n    float distFeather = sdVesica(st2,0.35*eyeOpen,0.7)-0.5;\n    float isFeather = float(distFeather<0.0);\n    vec3 colFeather = vec3(0.86,0.78,0.18)*(1.0-distFeather);\n    \n    vec2 st2eye = st2;\n    st2eye.y = st2eye.y * 0.6 + 0.05;\n    float distEye = length(st2eye)-0.12;\n    float isEye = float(distEye<0.0)*isFeather;\n    vec3 colEye = vec3(0.0,0.0,1.0);\n    \n    vec2 st2pupil = st2eye - vec2(0.0,0.03);\n    float anglePupil = atan(st2pupil.y,st2pupil.x);\n    float distPupil = length(st2pupil)-(0.08-0.07*sin(anglePupil+8.0*PI))+0.02;\n    float isPupil = float(distPupil<0.0)*isFeather;\n    vec3 colPupil = vec3(0.0,0.0,0.5);\n    \n    vec3 col = vec3(0.11,0.74,0.4);\n    col = col*(1.0-isFeather) + colFeather*isFeather;\n    col = col*(1.0-isEye) + colEye*isEye;\n    col = col*(1.0-isPupil) + colPupil*isPupil;\n    \n    //col = col + vec3(grid_x);\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}