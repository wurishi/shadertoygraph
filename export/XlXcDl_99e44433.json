{"ver":"0.1","info":{"id":"XlXcDl","date":"1506872058","viewed":380,"name":"Outerspace 1","username":"lsdlive","description":"Another visual experiment.","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["raymarching"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define ENABLE_SCANLINE 0\n\nmat2 r2d(float a) {\n\tfloat c = cos(a);\n\tfloat s = sin(a);\n\treturn mat2(c, s, -s, c);\n}\n\nvec2 amod(vec2 p, float m) {\n\tfloat a = mod(atan(p.x, p.y), m) - m * .5;\n\treturn vec2(cos(a), sin(a)) * length(p);\n}\n\nfloat sc(vec3 p) {\n\tp = abs(p);\n\treturn min(min(max(p.x, p.y), max(p.y, p.z)), max(p.z, p.x));\n}\n\nfloat sc2(vec3 p) {\n\tp = abs(p);\n\tvec3 g = max(p.xyz, p.yzx);\n\treturn min(g.x, g.z);\n\n}\n\nconst float pi = 3.14159;\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n\tvec2 uv = fragCoord / iResolution.xy - .5;\n\tuv.x *= iResolution.x / iResolution.y;\n\n\tvec3 ro = vec3(0., 0., -iTime), p;\n\tp = ro;\n\tvec3 rd = normalize(vec3(uv, -1));\n\n\t//p.z = -iTime* 0.5;\n\t//p.x = cos(iTime*.2);\n\n\tp.z = -iTime;\n\tp.x = cos(iTime);\n\n\tfloat ti = 64., e = 1.;\n\tfor (float i = 64.; i > 0.; i--) {\n\n\t\tti = i;\n\n\t\tif (.1 > e*i) {\n\t\t\tbreak;\n\t\t}\n\n\n\n\t\tvec3 q = p;\n\n\t\t//q.xy *= r2d(pi / 2. + .2*cos(iTime*.8));\n\t\tq.xy *= r2d(iTime*.4);\n\n\n\t\tq = mod(q, 4.) - 2.;\n\n\n\t\tvec3 newp = q;\n\t\tnewp.yz = amod(newp.yz, pi / 16.);\n\n\t\tnewp.xz *= r2d(pi / (7. + 5.*cos(iTime)));\n\n\n\t\tq.zy = amod(q.zy, pi / 2.);\n\t\te = min(sc2(q) - .5, sc(newp) - .4);\n\n\t\tp += rd * e;\n\t}\n\n\tvec3 c = vec3(.8, .7, .7);\n\t//c = vec3(1.);\n\n\tc = mix(c, 1. - sqrt(abs(p + cos(iTime))) * ti / 64., ti / 64.);\n\n    if(ENABLE_SCANLINE == 1)\n\t\tc = c + cos(1e3*uv.y) * .2 * tan(iTime*.5);\n\t\n    fragColor.xyz = c;\n}","name":"Image","description":"","type":"image"}]}