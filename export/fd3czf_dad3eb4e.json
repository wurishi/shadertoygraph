{"ver":"0.1","info":{"id":"fd3czf","date":"1653809820","viewed":78,"name":"Worley  Bubbles","username":"ahmaderfani12","description":"Playing with Worley noise.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["voronoi","worley"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#define pointsNum 35\n#define moveSpeed 0.2\n#define shadowPower 0.25\n\nfloat random (in float x) {\n    return fract(sin(x)*1e4);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates\n    vec2 st = fragCoord/iResolution.xy;\n    st.x *= iResolution.x/iResolution.y;\n\n\tvec3 color = vec3(.0);\n    vec3 sunDir = vec3(1.500,1.084,0.5);\n    \n    float minDist = 1.; ;\n    vec3 pointPos;\n    vec3 normal;\n    \n    //Loop in points\n    for(int i=0;i<=pointsNum-1;i++){\n    \n        // Choose point position in 3D\n        vec3 p = vec3(random(float(i)),random(float(i)*6.5),random(float(i)*13.5));\n        \n        // Animate points\n        p=0.5+0.5*sin(iTime*moveSpeed + p*6.5);\n        p = vec3(p.x*iResolution.x/iResolution.y,p.y,p.z);\n        \n        // Z cutter\n        float z =0.5+0.5*sin(iTime*0.5);\n        float dist = distance(vec3(st,z), p);\n        // Find the closest point\n        if(dist<minDist){\n            minDist = dist;\n        \tpointPos=p;\n            normal = (p-vec3(st,z))*2.0;\n        }\n\n    }\n    // Adjust distance field\n    minDist = smoothstep(0.25,0.3,minDist-0.1);\n\tminDist = clamp(minDist,0.0,1.0);\n    minDist = pow(minDist,10.952);\n    \n    // Set Color based on the closest point position   \n    color +=mix(vec3(pointPos),vec3(1.0),minDist);\n    \n    //Shadow\n    float shadow = (dot(normalize(sunDir),normal)*3.);\n    shadow = mix(1.0,shadow,shadowPower);\n    color *=mix(1.,shadow,(1.0 - minDist));\n\t\n    \n    // Output to screen\n    fragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}]}