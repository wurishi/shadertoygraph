{"ver":"0.1","info":{"id":"7s3yzf","date":"1654610191","viewed":212,"name":"Reeds by the River","username":"greenbird10","description":"Reeds in the wind...\nIt's been a long time since the last time I steped out of home, enjoy the nature!","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["water","river","wind","weed","reed"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","previewfilepath":"/media/ap/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Created by greenbird10\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0\n\n\n//From Dave (https://www.shadertoy.com/view/4djSRW)\nvec2 hash(vec2 p)\n{\n    vec3 p3 = fract(vec3(p.xyx) * vec3(443.897, 441.423, 437.195));\n    p3 += dot(p3.zxy, p3.yxz+19.19);\n    return fract(vec2(p3.x * p3.y, p3.z*p3.x))*2.0 - 1.0;\n}\n\n//From iq (https://www.shadertoy.com/view/XdXGW8)\nfloat noise( in vec2 p )\n{\n    vec2 i = floor( p );\n    vec2 f = fract( p );\n\t\n\tvec2 u = f*f*(3.0-2.0*f);\n\n    return mix( mix( dot( hash( i + vec2(0.0,0.0) ), f - vec2(0.0,0.0) ), \n                     dot( hash( i + vec2(1.0,0.0) ), f - vec2(1.0,0.0) ), u.x),\n                mix( dot( hash( i + vec2(0.0,1.0) ), f - vec2(0.0,1.0) ), \n                     dot( hash( i + vec2(1.0,1.0) ), f - vec2(1.0,1.0) ), u.x), u.y);\n}\n\n\n#define reedN 120.\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 w = 1./iResolution.xy;\n    \n    // reeds\n    const float reedW = 0.015;\n    const float blur = 0.015;\n    float recordA = 0.;\n    float recordS = 0.;\n    vec2 reedUV = vec2(0.,1.);\n    for (float i = 0.; i < reedN; i++)\n    {\n        float s = texture(iChannel0, vec2(i/reedN, 0.13)).r;\n        s = s * 1.4 - 0.2;\n        float h = texture(iChannel0, vec2(i/reedN, 0.5)).r;\n        h *= ((1.0 - uv.x) * 0.4 + 0.7);\n        float w = texture(iChannel0, vec2(i/reedN, 0.9)).r;\n        w = reedW * (w*0.01+1.0);\n        \n        // width\n        float widthF = 0.8;\n        float yh = 1. - max((uv.y - (h-widthF)), 0.)/widthF;\n        yh = pow(yh, 0.4);\n\n        // wind\n        float wind = pow(uv.y+0.5, 2.0) * (sin(iTime + uv.x*3.0) + 1.0) * 0.05;\n        // bent1\n        float bentF = 1.5 * h;\n        float bent1 = pow(max((uv.y - (h - bentF)), 0.)/bentF, 4.) * 0.1;\n        // alpha\n        float uvx = uv.x - bent1 - wind;\n        float a = smoothstep(w*yh, w*yh-blur, abs(uvx - s));\n        a *= smoothstep(h, h-blur, uv.y);\n        \n        //uv\n        if(abs(uvx - s) < w*yh && a > recordA)\n        {\n            // alpha blending\n            reedUV.x = reedUV.x*recordA + (1.-recordA)*(uvx-s+w*yh)/(w*yh*2.);\n            reedUV.y = min(reedUV.y, uv.y/h);\n            recordS = recordS*recordA + (1.-recordA)*s;\n            recordA = a;\n        }\n    }\n    \n    \n    // water\n    vec3 col = vec3(102./255., 120./255., 133./255.);\n    vec3 col1 = vec3(165./255., 157./255., 152./255.);\n    \n    vec2 st = uv * vec2(iResolution.x/iResolution.y, 1.);\n    float sun = distance(st, vec2(1.5, 0.9));\n    sun = pow(sun, 1.7);\n    col = mix(col, col*1.2, sun);\n    col1 = mix(col1, col1*1.5, sun);\n    \n    col = mix(col1, col, smoothstep(\n    0.4, 0.9, uv.y + 0.5 * noise(vec2(\n    (uv.x + 0.3 * noise(vec2(uv.y * 30., 0.17 + iTime*0.5))) * 4., 0.33 + iTime*0.1))));\n    \n    \n    // reed\n    vec3 reedCol = mix(\n        vec3(185./255., 134./255., 102./255.),\n        vec3(249./255., 218./255., 179./255.),\n        noise(vec2(recordS * 15.337, 0.1177)));\n    reedCol = mix(reedCol, reedCol*1.3, sun);\n    col = mix(col, reedCol, recordA);\n    \n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}