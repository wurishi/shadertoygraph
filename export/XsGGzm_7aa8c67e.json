{"ver":"0.1","info":{"id":"XsGGzm","date":"1453668136","viewed":274,"name":"Sunday","username":"rohtie","description":"A nice sunday afternoon","likes":7,"published":1,"flags":64,"usePreview":0,"tags":["waves"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3D8","filepath":"https://soundcloud.com/gunpanda/rain-sound-effects","previewfilepath":"https://soundcloud.com/gunpanda/rain-sound-effects","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"float hash(float n) {\n    return fract(sin(n) * 43758.5453);\n}\n\nfloat noise(in vec2 x) {\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n\n    f = f * f * (3.0 - 2.0 * f);\n\n    float n = p.x + p.y * 57.0;\n\n    float res = mix(mix(hash(n +  0.0), hash(n +  1.0), f.x),\n                    mix(hash(n + 57.0), hash(n + 58.0), f.x), f.y);\n\n    return res;\n}\n\nfloat sun(vec2 p) {\n    p.x += sin(p.y * 2.0 + iTime) * 0.05;\n    p.y += cos(p.x * 0.5 + iTime) * 0.01;\n    \n    float sun = length(p);\n    sun = 1.0 - smoothstep(0.39, 0.4, sun);\n    \n    return sun;\n}\n\nfloat wave_mask(vec2 p) {\n    p /= 1.01;\n    \n    p.x += sin(p.y + hash(p.y) + iTime) * 0.05;\n    p.y += cos(p.x + hash(p.x) + iTime) * 0.05;\n    \n    float wave_mask = length(p);\n    wave_mask = 1.0 - smoothstep(0.39, 0.4, wave_mask);\n    \n    return wave_mask;\n}\n\nfloat waves(vec2 p) {    \n    p.y += cos(p.x * 15.0 * noise(p * 15.25) * length(p) / 10.0 + iTime * 0.2);\n    \n    float lines = 0.05;\n    p.y = smoothstep(0.0, lines, mod(p.y, lines));\n    \n    float waves = abs(p.y);\n    waves = smoothstep(0.3, 0.2, waves);\n    \n    return waves;\n}\n\n\nvoid mainImage( out vec4 o, in vec2 p ) {\n\tp /= iResolution.xy;\n    p -= 0.5;\n    p.x *= iResolution.x / iResolution.y;\n    \n    vec3 col = vec3(0.0);\n    \n    p.y *= -1.0;\n\tcol -= min(sun(p), 1.0 - waves(p)) * vec3(p.y - 1.0, p.y / 2.75 - 0.075, 0.0) * 5.0;    \n    col -= min(waves(p), wave_mask(p));    \n    col += (1.0 - sun(p)) * 0.35 - vec3(p.y * 0.55, (1.0 - p.y + sin(iTime) * 0.15) * 0.18, 0.1);\n    \n    \n\to.rgb = col;\n}","name":"","description":"","type":"image"}]}