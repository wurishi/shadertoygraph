{"ver":"0.1","info":{"id":"cd2GWD","date":"1667610707","viewed":309,"name":"Inercia Shader Royale - Cosament","username":"louis_C","description":"visual Livecoded during the Inercia shader royake the 04/11/220.","likes":25,"published":1,"flags":40,"usePreview":0,"tags":["livecoding"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 r, in vec2 c ){ r = texture(iChannel0, c/iResolution.xy);}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\nmat2  rot(float t){ float c = cos(t); float s  = sin(t); return mat2(c,-s,s,c);}\n\n\nfloat zl;float zr;\nfloat se;\nfloat bl(vec2 p ,vec2 b){vec2 q = abs(p)-b;\n  return length(max(q,vec2(0.)))+min(0.,max(q.x,q.y));}\nfloat rd(){return fract(sin(se+=1.)*7845.236);}\nvec3 vr(){ float z = (rd()-0.5)*2.;\n  float s = rd()*6.28;\n  float a = sqrt(1.-z*z);\n  vec3 vn = vec3(a*cos(s),a*sin(s),z);\n  vn *= sqrt(rd());return vn;}\n  //float \n  \nfloat map(vec3 p,float time){ \n  vec3 pr  = p ;\n\n  pr = abs(pr);\n  pr -= 30.;\n  if(pr.x>pr.y){pr.xy=pr.yx;}\n  pr.x-=2.;\n  if(pr.x>pr.z){pr.xz=pr.zx;}\n  if(pr.y>pr.z){pr.yz=pr.zy;}\n  vec3 r = vec3(15.);\n  pr = mod(pr,r)-0.5*r;\n  float d4 = bl(pr.xy,vec2(2.));\n  float d5 = max(length(pr.xz)-0.2,fract(p.y*0.1+time*2.)-0.5);\n  float tdd = step(0.75,fract(time*0.25));\n  vec3 pb = p;\n  for(int  i = 0 ; i <4 ; i++){\n    pb -= 0.5;\n    pb.xy*= rot(time*1.2);\n    pb.xz *= rot(time);\n    pb = abs(pb);\n  }\n  float ta = step(0.5,fract(time*0.5));\n  float tb = step(0.35,fract(time*0.05));\n  if(tb>0.5){\n  if(ta>0.5){\n  float d1 = length(pb-vec3(0.,4.5,0.))-2.;\n  float d2 = length(pb-0.1)-1.25+fract(time*3.);\n  float d3 = p.y+10.;\n  zl = min(d5,d2);\n    zr = d3;\n  return min(min(d1,min(d2,mix(d4,d3,tdd))),d5);}\n  else{\n    float d1 = max(length(pb.yz)-0.7,length(p)-12.);\n  float d2 = max(length(pb.xy-vec2(3.5,0.))-0.25+fract(time*3.)*0.05,length(p)-8.);\n  float d3 = p.y+10.;\n  zl = min(d5,d2);\n     zr = d3;\n  return min(min(d1,min(d2,mix(d4,d3,tdd))),d5);}}\n  else{\n      if(ta>0.5){\n  float d1 = length(pb-vec3(0.,4.5,0.))-2.;\n  float d2 = length(pb-0.1)-1.25+fract(time*3.);\n  float d3 = p.y+10.;\n  zl = min(d5,d2);\n         zr = d3;\n  return min(d1,min(d2,d3));}\n  else{\n    float d1 = max(length(pb.yz)-0.7,length(p)-12.);\n  float d2 = max(length(pb.xy-vec2(3.5,0.))-0.25+fract(time*3.)*0.05,length(p)-8.);\n  float d3 = p.y+10.;\n  zl = min(d5,d2);\n     zr = d3;\n  return min(d1,min(d2,d3));}}\n    }\n    \n    \n  float rm(vec3 p, vec3 r,float time){\n    float dd = 0.;\n    for(int  i = 0 ; i< 40 ; i++){\n      float d = map(p,time);\n      if(dd>64.){dd= 64.;break;}\n      if(d<0.001){break;}\n      p += r*d;\n      dd +=d;\n    }return dd;\n    }\n    vec3 nor (vec3 p,float time){ vec2 e  = vec2(0.01,0.); return normalize(map(p,time)-vec3(map(p-e.xyy,time),map(p-e.yxy,time),map(p-e.yyx,time)));}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\nfloat time = iTime* mix(1.,2.,step(0.5,fract(iTime*0.2)))*mix(1.,fract(iTime)*2.,step(0.9,fract(iTime*0.15)));\nfloat time2 = iTime;\n\tvec2 uv =  fragCoord/iResolution.xy;\n  vec2 uc = uv;\n\tuv -= 0.5;\n  uv *= 2.;\n\tuv /= vec2(iResolution.y / iResolution.x, 1);\n  se = uv.x*iResolution.x+uv.y;\n // se += time;\n  float tb = (step(0.35,fract(time*0.05)));\n  float t2 = step(0.7,fract(time2*0.03));\n  vec3 p = vec3(time2*50.*t2*tb,0.,-15.+time*0.1*step(0.85,fract(time*0.16))*(1.-t2)*(1.-tb));\n  float fl =2.- mix(0.,1.2*fract(time*4.),step(0.8,fract(time*0.08+0.7)));\n  vec3 r  = normalize(vec3(uv,fl));\n  float tt=mix( mix(time,mix(time,-time,step(0.,mix(uv.y,fract(uv.y*4.)-0.5,step(0.5,fract(time*0.33))))),step(0.7,fract(time*.3))),\n  mix(time,-time,step(0.,mix(uv.x,fract(uv.x*4.)-0.5,step(0.5,fract(time*0.33))))),step(0.75,fract(time*0.1+0.5)));\n  r.xz *= rot(tt);\n  p.xz *= rot(tt*(1.-t2*tb));\n   r.yz *= rot(tt*0.);\n   p.yz *= rot(tt*(1.-t2*tb)*0.);\n  float r1 = 0.;\n  for(int  i = 0 ; i< 3 ; i++){\n  float d = rm(p,r,time);\n   if(step(0.2,zl)>0.5){\n    vec3 pp = p +r*d;\n     vec3 n = nor(p,time);\n     r = n+vr()*step(0.1,zr);\n     p = pp+r*0.1;\n   }    else{r1=1.;break;} \n  }\n  float b  =sqrt(24.);\n  float c = 0.;\n  float d1 = 0.001;\n  float d2 = 0.00066;\n  float d3 = 0.00033;\n  float vv = 1.8+pow(length(uv.y),2.)*8.;\n  for(float i = -0.5*b ; i<0.5*b ; i+= 1.)\n  for(float j = -0.5*b ; j<0.5*b ; j+= 1.){\n    c += texture(iChannel0,uc+vec2(i,j)*d1*vv).a;\n    c += texture(iChannel0,uc+vec2(i,j)*d2*vv).a;\n    c += texture(iChannel0,uc+vec2(i,j)*d3*vv).a;\n  }\n  c /= 24.;\n  c = pow(c,0.8);\n  float ta = step(0.5,fract(time*0.5));\n  vec3 c2 = mix(vec3(1.),3.*abs(1.-2.*fract(c*0.3-mix(0.1,0.6,ta)+vec3(0.,-1./3.,1./3.)))-1.,mix(0.5,0.3,ta))*c;\n    fragColor =vec4(vec3(c2),r1);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"float sp (float s, float t, float p){\nreturn pow(smoothstep(1.,s,1.-fract(t)),p);}\nfloat hs(float t){ return fract(sin(dot(t,45.6))*7845.236);}\nfloat s1 (float t, float t2 ){\n\nfloat tt2  =step(0.7,fract(t2*0.03));\nfloat ttb = step(0.35,fract(t*0.05));\n    float ti = sin(sp(0.5,t*0.5,0.1)*300.)*0.25;\n    float tb = sin(sp(0.35,t*0.05,0.01)*800.)*0.25;\n    float tdd = sin(sp(0.75,t*0.25,0.05)*400.)*0.25;\n     float ta2 = sin(sp(0.7,(t*0.03),0.01)*800.)*0.25;\n  \n     \n     float tz = mix(0.,sin(pow(fract(t*4.),0.05)*700.),step(0.8,fract(t*0.08+0.7)))*0.1;\n     float ttt = (sin(pow(fract(t*0.33),0.3)*300.)-0.5)*0.25;\n    ttt +=  (sin(sp(0.7,(t*.3),0.1)*300.)*0.25);\n    ttt += sin(sp(0.75,(t*0.1+0.5),0.1)*300.)*0.25+0.5;\n    ttt *= (1.-tt2*ttb);\n     ttt= clamp(ttt,-1.,0.95);\n     float ttv = sin(pow(fract(t*3.),0.2)*300.)*0.2*(1.-tt2);\n     return float(ti+tb+tdd+ta2+tz+ttt+ttv )*0.5;}\nvec2 mainSound( int samp, float time )\n{\nfloat t = time* mix(1.,2.,step(0.5,fract(time*0.2)))*mix(1.,fract(time)*2.,step(0.9,fract(time*0.15)));\nfloat t2 = time;\nfloat tt2  =step(0.7,fract(t2*0.03));\nfloat ttb = step(0.35,fract(t*0.05));\nfloat s = 0.;\n     for(int  i = 0 ; i < 20 ; i++){\n     float ta = float(i)*0.008;\n         s += s1(t+ta,t2+ta)*(sin(t*3.14+ta)*0.5+0.5);        \n         }\n         s/=20.;\n         float s2 = 0.;\n          for(int  i = 1 ; i < 8 ; i++){\n     float ta = float(i)*0.5*mix(0.999,1.,hs(float(i)*time));\n         s2 += (s1(t+ta,t2+ta))/float(i);        \n         }\n         s2/=3.;\n     float tc = sin(t*200.)*step(0.85,fract(t*0.16))*(1.-tt2)*(1.-ttb)*0.25;\n     float tcc = sin(time*300.)*tt2*ttb*0.25;\n    return vec2(s+s2+s1(t,t2)+tc+tcc);\n}","name":"Sound","description":"","type":"sound"}]}