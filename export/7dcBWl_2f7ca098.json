{"ver":"0.1","info":{"id":"7dcBWl","date":"1657423062","viewed":25,"name":"Dirty Window","username":"sicariusvelox","description":"Clean the windows! they get dirty overtime and ruin your view. click and drag over the windows to clean them off.(temporarily)","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["interactive","buffer"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsX3zn","filepath":"/media/a/94284d43be78f00eb6b298e6d78656a1b34e2b91b34940d02f1ca8b22310e8a0.png","previewfilepath":"/media/ap/94284d43be78f00eb6b298e6d78656a1b34e2b91b34940d02f1ca8b22310e8a0.png","type":"cubemap","channel":1,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"mat3 camera(vec3 cameraPos, vec3 lookAtPoint) {\n\tvec3 cd = normalize(lookAtPoint - cameraPos);\n\tvec3 cr = normalize(cross(vec3(0, 1, 0), cd));\n\tvec3 cu = normalize(cross(cd, cr));\n\t\n\treturn mat3(-cr, cu, -cd);\n}\n\nbool Plane(vec2 uv, vec2 position, vec2 dimensions)\n{\n    if ((uv.x-position.x > position.x - dimensions.x) && (uv.x-position.x < position.x + dimensions.x))\n    {\n        if ((uv.y-position.y > position.y - dimensions.y) && (uv.y-position.y < position.y + dimensions.y))\n        {\n            return true;\n        }\n    }\n\n\n\n    \n    return false;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n    vec3 rd = camera(vec3(0,0,3), vec3(0,0,0)) * normalize(vec3(uv, -0.5));\n\n    uv = fragCoord/iResolution.xy;\n    \n    vec2 uvCentered = 2.0*uv-1.0;\n    uvCentered.y /= iResolution.x/iResolution.y;\n    vec3 col = vec3(0.0);\n    bool p1 = Plane(uvCentered, vec2(0.13, 0.13), vec2(0.24, 0.24));\n    bool p2 = Plane(uvCentered, vec2(-0.13, 0.13), vec2(0.24, 0.24));\n    bool p3 = Plane(uvCentered, vec2(0.13, -0.13), vec2(0.24, 0.24));\n    bool p4 = Plane(uvCentered, vec2(-0.13, -0.13), vec2(0.24, 0.24));\n    if (p1 || p2 || p3 || p4){\n        col = mix(texture(iChannel1, rd).rgb, texture(iChannel0, uv).rgb, texture(iChannel0, uv).a);       \n    }\n    else\n    {\n        col = vec3(0);// texture(iChannel0, uv).rgb;\n    }\n    // Output to screen\n    //fragColor = vec4(vec3(uv, .25),1.0);\n    fragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsBSR3","filepath":"/media/a/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","previewfilepath":"/media/ap/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 mousepos = iMouse.xy/iResolution.xy;\n    vec2 mouseButtons = iMouse.zw;\n    vec2 uv = fragCoord/iResolution.xy;\n    float aspectRatio = iResolution.y/iResolution.x;\n    \n    \n    vec3 color = vec3(0.0f);\n    float alpha = 0.0;\n    if (iFrame < 1)\n    {\n       color = texture(iChannel1, uv).rgb * vec3(.60, .30, .12);\n       alpha = 0.0;\n    }\n    else\n    {\n        \n        color = texture(iChannel0, uv).rgb;\n        \n        alpha = clamp(texture(iChannel0, uv).a + 0.001, 0.0, 0.8);\n        if (distance(vec2(mousepos.x, mousepos.y*aspectRatio),vec2(uv.x, uv.y*aspectRatio)) < 0.05 && mouseButtons.x > 0.0)\n        {\n            alpha =  0.0;\n        }\n        \n    }\n    fragColor = vec4(color, alpha);\n}","name":"Buffer A","description":"","type":"buffer"}]}