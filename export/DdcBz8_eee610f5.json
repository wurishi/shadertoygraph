{"ver":"0.1","info":{"id":"DdcBz8","date":"1696907340","viewed":78,"name":"Lights dither test","username":"throwshade","description":"light","likes":6,"published":1,"flags":32,"usePreview":0,"tags":["light"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const int palettesize = 8;\n\nfloat nearest(float c) {\n    return round(clamp(c,0.0,255.0)*float(palettesize))/float(palettesize);\n}\nfloat dithered(float c) {\n    return round(clamp(c,0.0,255.0)*float(palettesize))/float(palettesize);\n}\nfloat light(vec2 source, vec2 fragCoord, float size) {\n    float dist = distance(source,fragCoord);\n    float intensity = size / (dist*dist);\n    return intensity;\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   \n   vec2 scaledLoc = vec2(floor(fragCoord.x/5.0)*5.0 ,floor(fragCoord.y/5.0)*5.0);\n   float color = light(iMouse.xy, scaledLoc, 200.0) + light(iResolution.xy/2.0, scaledLoc, 200.0);\n   float spread = 1.0 - pow(distance(iMouse.xy,iResolution.xy/2.0)/distance(vec2(0.0,0.0),iResolution.xy/2.0),.1);\n  // float color = scaledLoc.x/iResolution.x;\n   float ditherVal = (texture(iChannel0,vec2(int(scaledLoc.x*5.0)%palettesize,int(scaledLoc.y*5.0)%palettesize)/float(palettesize)).x)-0.5;\n   ditherVal*=spread;\n   float finalColor = floor((color+ditherVal)*float(palettesize-1)+0.5)/float(palettesize-1);\n   fragColor = vec4(vec3(finalColor)*vec3(0.0,1.0,0.0)+vec3(finalColor),1.0);\n\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = vec4(0.0,0.0,1.0,1.0);\n}","name":"Buffer A","description":"","type":"buffer"}]}