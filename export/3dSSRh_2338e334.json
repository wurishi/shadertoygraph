{"ver":"0.1","info":{"id":"3dSSRh","date":"1552807935","viewed":328,"name":"Talk through dfd*","username":"rory618","description":"Shader kernels are 2x2 squares, and it is possible for the mainImage() of one pixel to share data with some of the other 3 pixels in its 2x2 using dfdx and dfdy","likes":9,"published":1,"flags":32,"usePreview":0,"tags":["dfdx","dfdy","thread"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Proof of concept of communication between threads, each pixel in buffer A samples an input texture once, but may appear up to three\n//different values of the data in the input texture, because it can read the data from neighboring pixels that sampled the input texutre.\nvoid mainImage( out vec4 O, in vec2 I )\n{\n    O = texelFetch(iChannel0, ivec2(I)/32, 0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 O, in vec2 I )\n{\n    //Some data that gets fetcehd to one pixel\n    O = texelFetch(iChannel0, ivec2(I), 0);\n    \n    //Get value of O in pixel to the left or right\n    vec4 a = dFdx(O)*(mod(I.x,2.)>1.?-1.:1.)+O;\n    \n    //Get value of O in pixel above or below\n    vec4 b = dFdy(O)*(mod(I.y,2.)>1.?-1.:1.)+O;\n    \n    //Get the value of O in the pixel to the diagonal\n    vec4 diag = a+b-O;\n    \n    float t = mod(iTime,6.);\n    \n    //Alternate swapping bottom two, left two, and diagonal two.\n    if(t<1.){\n        if(mod(I.x,2.)<1.) O=b;\n    } else if (t >2.&&t<3.) {\n        if(mod(I.y,2.)<1.) O=a;\n    } else if (t >4.&&t<5.) {\n        if(float(mod(I.y,2.)<1.)+float(mod(I.x,2.)<1.)==1. ) O=diag;\n    }\n    \n}","name":"Buf A","description":"","type":"buffer"}]}