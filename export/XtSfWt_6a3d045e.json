{"ver":"0.1","info":{"id":"XtSfWt","date":"1517477582","viewed":300,"name":"Poison Kaleidescope","username":"104","description":"playing around with squircles, negative space. been a long time since I shadertoy'd!","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["kaleidescopesquircle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat sdSquircle(vec2 uv, vec2 origin, float radius, float power, float rot_)\n{\n    float c = cos(rot_), s = sin(rot_);\n    mat2 rot = mat2(c,s,-s,c);    \n    vec2 v = abs((origin*rot) - (uv*rot));\n    float d = pow(v.x,power) + pow(v.y, power);\n    d -= pow(radius, power);\n    return d;\n}\nvec3 sdWhatever(vec2 uv, float r0, float r, float p, float t)\n{\n  float ab = 0.01;\n  return vec3(\n      sdSquircle(uv, uv+r0-mod(uv,r0*2.), r-ab, p+ab, t+ab),\n      sdSquircle(uv, uv+r0-mod(uv,r0*2.), r, p, t),\n      sdSquircle(uv, uv+r0-mod(uv,r0*2.), r+ab, p+ab, t+ab)\n             );\n}\n\nfloat rand(vec2 co)\n{\n   return fract(sin(dot(co.xy,vec2(12.9898,78.233))) * 43758.5453);\n}\nvoid mainImage(out vec4 o, in vec2 uvo)\n{\n   \tvec2 uv = uvo.xy / iResolution.xy-.5;\n    uv.x*=iResolution.x/iResolution.y;\n    uv.y *= 1.06;\n    float t = iTime*.15;\n    vec3 dist;\n    float r0 = 0.4;\n    float p = 2.;\n    float r = r0;\n\n    for(float i = 0.; i < 21.; ++ i)\n    {\n        vec3 dist1 = sdWhatever(uv, r0, r, p,t);\n        dist = max(-dist, -dist1);\n        dist1 = sdWhatever(uv-r0, r0, r, p,-t);\n        dist = min(dist, dist1);\n        r = r*0.85 + 0.01;\n        p = sin(iTime*.22+i)*.5+1.;\n        t = -t-.2;\n    }\n\n    o.rgb = mix(vec3(.9,.9,.6), vec3(0.,0.,0.), 0.7*clamp(1.0 / (clamp(dist, 1.0/250., 1.0)*250.),0.,1.)); \n\tvec2 uvn = uvo.xy / iResolution.xy-.5;\n    o -= rand(uvo + iTime)*.07;\n    o *= 1.-dot(uvn,uvn*2.1);\n}\n","name":"Image","description":"","type":"image"}]}