{"ver":"0.1","info":{"id":"XcsBRS","date":"1723918213","viewed":45,"name":"{ Voronoi Painting }","username":"inverse_transpose","description":"I was reading some of Inigo's paces on Voronoi and saw a beautiful example of rendering a painting and wanted to try something similar.","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 O, in vec2 F )\n{\n    O = texture(iChannel0, F/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define hash22(u) textureLod(iChannel1, (u+.5)/256.0, 0.0).xy\n#define hash23(u) textureLod(iChannel1, (u+.5)/256.0, 0.0).xyz\n#define dot2(p) dot(p,p)\n\nfloat voronoi(in vec2 uv, inout vec2 point)\n{\n    vec2 ip = floor(uv);\n    \n    float md = 100.0;\n    vec2 mp = vec2(md);\n    vec2 mk;\n    \n    for (float i = -1.0; i < 1.01; ++i)\n    for (float j = -1.0; j < 1.01; ++j)\n    {\n        vec2 g = ip + vec2(i,j);\n        vec3 h = .9*hash23(g);\n\n            vec2 p = g + h.xy;\n            vec2 k = uv - p;\n            float d = dot(k,k);\n            if (d < md)\n            {\n                md = d;\n                mp = p;\n                mk = k;\n            }\n    }\n    \n    md = 100.0;\n    for (float i = -2.0; i < 2.01; ++i)\n    for (float j = -2.0; j < 2.01; ++j)\n    {\n        vec2 g = ip + vec2(i,j);\n        vec2 h = .9*hash22(g);\n        vec2 p = g + h;\n        vec2 k = uv - p;\n        \n        if (dot2(k - mk) > 0.00001)\n            md = min(md, dot(0.5 * (mk + k), normalize(k - mk)));\n    }\n\n    point = mp;\n    return md;\n}\n\nvoid mainImage( out vec4 O, in vec2 F )\n{\n    vec2 R = iResolution.xy;\n    \n    if (F == R-.5)\n    {\n        O.a = iChannelResolution[1].x;\n        return;\n    }\n    \n    if (0 == iFrame || texture(iChannel0, 1. - .5/R, .0).a == .0 || texelFetch(iChannel3, ivec2(F), 0).rg != R)\n    {\n        vec2 R = iResolution.xy,\n            uv = (2.0*F - R.xy)/R.y;\n\n        vec2 id;\n        float d = voronoi(uv*50., id);\n        id = vec2(id.x*.65+1., id.y)+50.;\n        vec3 c = abs(uv.x)>1.5?vec3(1):texture(iChannel2,id*.01).rgb;\n        c = mix(c, vec3(0), smoothstep(1.0,-1.0,(d-.05)/fwidth(d)));\n        O = vec4(sqrt(c),1.0);\n    }\n    else\n    {\n        O = texture(iChannel0, F/iResolution.xy);\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 O, in vec2 F )\n{\n    vec2 R = iResolution.xy;\n    O = vec4(R.x,R.y,0,0);\n}","name":"Buffer B","description":"","type":"buffer"}]}