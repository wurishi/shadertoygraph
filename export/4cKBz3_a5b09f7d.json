{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"/** \n\n    License: Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License\n    \n    Alternate Variation for my Previous Hex/Truchet Shader\n    https://www.shadertoy.com/view/4cVfWG\n    \n    Hexagon X4\n    12/17/2024  @byt3_m3chanic\n    \n*/\n\n#define R     iResolution\n#define T     iTime\n#define M     iMouse\n\n#define PI    3.141592653\n#define PI2   6.283185307\n\nconst float N = 3.;\nconst float s4 = .577350, s3 = .288683, s2 = .866025;\nconst vec2 s = vec2(1.732,1);\n\nvec3 clr, trm;\nfloat tk, ln;\n\nmat2 r2,r3;\n\nmat2 rot(float g) { return mat2(cos(g), sin(g),-sin(g), cos(g)); }\nfloat hash21(vec2 p) { \n    p.x = mod(p.x,3.*N);\n    p.y = mod(p.y,3.*N);\n    return fract(sin(dot(p,vec2(26.37,45.93)))*4374.23); \n}\n\n// Hexagon grid system, can be simplified but\n// written out long-form for readability. \n// return vec2 uv and vec2 id\nvec4 hexgrid(vec2 uv) {\n    vec2 p1 = floor(uv/vec2(1.732,1))+.5,\n         p2 = floor((uv-vec2(1,.5))/vec2(1.732,1))+.5;\n    vec2 h1 = uv- p1*vec2(1.732,1),\n         h2 = uv-(p2+.5)*vec2(1.732,1);\n    return dot(h1,h1) < dot(h2,h2) ? vec4(h1,p1) : vec4(h2,p2+.5);\n}\n\nvec3 hsv( vec3 a ) {\n    vec3 c = a + vec3(T*.1,0,0);\n    vec3 rgb = clamp(abs(mod(c.x*2.+vec3(0,4,2),6.)-3.)-1.,0.,1.);\n    return c.z * mix(vec3(1),rgb,c.y);\n}\n\nvoid draw(float d, float px, inout vec3 C) {\n    C = mix(C,C*.35,smoothstep(.06+px,-px,abs(d-.01)-tk) );\n    C = mix(C,clr,smoothstep(px,-px,abs(d)-tk) );\n    C = mix(C,trm,smoothstep(px,-px,abs(abs(d)-tk)-ln) );\n}\n\nvoid mainImage( out vec4 O, in vec2 F )\n{\n    r2 = rot( 1.047);\n    r3 = rot(-1.047);\n    \n    vec2 uv = (2.*F-R.xy)/max(R.x,R.y);\n\n    uv = -vec2(log(length(uv)),atan(uv.y,uv.x))-((2.*M.xy-R.xy)/R.xy);\n    uv /= 3.628;\n    uv *= N;\n        \n    tk = .13+.09*sin(uv.x*14.+T), ln = .015;\n    \n    uv.y += T*.05;\n    uv.x += T*.15;\n    \n    float sc = 3., px = fwidth(uv.x*sc);\n\n    vec4 H;\n    vec2 p, id;\n    \n    H = hexgrid(uv.yx*sc);\n    p = H.xy, id = H.zw;\n  \n    float hs = hash21(id);\n    \n    if(hs<.5) p *= hs < .25 ? r3 : r2;\n\n    vec2 p0 = p - vec2(-s3, .5),\n         p1 = p - vec2( s4,  0),\n         p2 = p - vec2(-s3,-.5);\n\n    vec3 d3 = vec3(length(p0), length(p1), length(p2));\n    vec2 pp = vec2(0);\n\n    if(d3.x>d3.y) pp = p1;\n    if(d3.y>d3.z) pp = p2;\n    if(d3.z>d3.x && d3.y>d3.x) pp = p0;\n     \n\n    vec3 C = vec3(0);\n    float d = max(abs(p.x)*.866025 + abs(p.y)/2., abs(p.y))-(.5-ln);\n    C = mix(C,vec3(clamp(hs*.15,.03,.15)),smoothstep(px,-px,d) );\n    C = mix(C,C+.1,mix(smoothstep(px,-px,d+.035),0.,clamp(1.-(H.y+.15),0.,1.)) );\n    C = mix(C,C*.1,mix(smoothstep(px,-px,d+.025),0.,clamp(1.-(H.x+.5),0.,1.)) );\n    \n    float b = length(pp)-s3;\n    float t = 1e5, g = 1e5;\n\n    hs = fract(hs*53.71);\n    if(hs>.95) {\n        vec2 p4 = p*r3, p5 = p*r2;\n        \n        b = length(vec2(p.x,abs(p.y)-.5));\n        g = length(p5.x);\n        t = length(p4.x);\n    }else if(hs>.65) {\n        b = length(p.x);\n        g = min(length(p1)-s3,length(p1+vec2(1.155,0))-s3);\n    } else if(hs<.15) {\n        vec2 p4 = p*r3, p5 = p*r2;\n        \n        t = length(p.x);\n        b = length(p5.x);\n        g = length(p4.x);\n    } else if(hs<.22) {\n        b = length(vec2(p.x,abs(p.y)-.5));\n        g = min(length(p1)-s3,length(p1+vec2(1.155,0))-s3);\n    }\n    \n    \n    clr = hsv(vec3(uv.x*.75,.75,.5));\n    trm = vec3(.0);\n\n    draw(t,px,C);\n    draw(g,px,C);\n    draw(b,px,C);\n    \n    C = pow(C,vec3(.4545));\n    O = vec4(C,1);\n}\n\n// end\n\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4cKBz3","date":"1734481426","viewed":283,"name":"Hexagon X4","username":"byt3_m3chanic","description":"Alternate Variation for my Previous Hex/Truchet Shader\n[url]https://www.shadertoy.com/view/4cVfWG[/url]","likes":43,"published":3,"flags":0,"usePreview":0,"tags":["hexagonx4"],"hasliked":0,"parentid":"","parentname":""}}