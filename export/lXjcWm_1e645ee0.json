{"ver":"0.1","info":{"id":"lXjcWm","date":"1727350321","viewed":61,"name":"Raindrop falling experiment 02","username":"shadertoyjiang","description":"Inspired by Elsio","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["drop"],"hasliked":0,"parentid":"M3jcWw","parentname":"Raindrop falling experiment"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// 16151748 新的雨滴\n#define TAU 6.2831853\nfloat rnd(float a) {\n        return fract(234.567 * sin(2. + a * 123.456));\n}\nvoid mainImage(out vec4 O, vec2 U) {\n        vec2 R = iResolution.xy,\n                u = 1.3 * (U - R * .5) / R.y;\n        float NG = 12.;\n        vec2 pos = u * NG + vec2(0, NG * .5 - 1.5);\n        vec2 f = abs(pos - round(pos));\n        float d1 = min(f.x, f.y);\n        f = abs(pos);\n        float d2 = min(f.x, f.y);\n        O = vec4(.4);\n        O += .1 * min(exp(-80. * d1), 1.);\n        O -= 1. - smoothstep(0., 3. * 1.415 / R.y * NG, d2);\n        O = clamp(O, 0., 1.);\n        vec2 p = pos;\n        float ix = round(p.x), iy;\n        float t = iTime, fT = fract(t + rnd(ix));\n        float cloud = 10. + .6 * sin(ix / NG * TAU * 3. + t),\n                water = 1. + 1.3 * cos(ix / NG * TAU - t * 3.);\n        p.y += fT;\n        if (p.y < (cloud + water) * .5)\n                iy = round(p.y - water) + water;\n        else\n                iy = round(p.y - cloud) + cloud;\n        float a = 50.;\n        if (iy >= water && iy <= cloud) iy = max(water, cloud - .5 * a * fT * fT);\n        float dc = length(p - vec2(ix, iy)) - .45;\n        float mxh = (p.y - -1.) / (cloud - water); // NG\n        vec4 diskcolor = vec4(0, .5, 1, 0), skycolor = vec4(1);\n        vec4 clr = mix(diskcolor, skycolor, mxh);\n        O = mix(O, clr, smoothstep(5. * NG / R.y, 0., dc)); //1450\n}\n\n\n\n\n\n","name":"Image","description":"","type":"image"}]}