{"ver":"0.1","info":{"id":"X3GSWG","date":"1720391706","viewed":57,"name":"Hexagonal truchet","username":"wszystkonietak","description":"Truchet pattern on hexagonal grid","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["hexagon","truchet"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//hexagons:\n//https://www.shadertoy.com/view/Xd2GR3\n\n//hexagonal truchet:\n//https://www.shadertoy.com/view/llSyDh\n\nfloat rr = 1.73 / 3.0;\nfloat hh = 0.3;\n\nfloat hash21(vec2 id) {\n    return mod(id.x * 137.0 + id.y * 87.0 + 382.0, 53.0);    \n}\n\nvec4 HexCoords(vec2 uv) {\n    vec2 repeat = vec2(1.0, 1.73);\n    vec2 h = repeat / 2.0; \n    vec2 a = mod(uv, repeat) - h;\n    vec2 b = mod(uv - h, repeat) - h;\n    \n    vec2 gv;\n    if(length(a) < length(b))\n        gv = a;\n    else \n        gv = b;\n        \n    vec2 id = uv - gv;\n    gv*= 2.0; \n    return vec4(gv.x, gv.y, id.x, id.y);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord )\n{  \n    vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;\n    vec3 col = vec3(0);\n        \n    uv *= 4.0f;\n    \n    vec4 hex = HexCoords(uv);\n        \n    vec2 hexUvs = hex.xy;\n    vec3 p1, p2, p3;\n    float m = 1.0;\n    if(hash21(hex.zw) > 21.5) {\n        p1 = vec3(-1.0, 1.73 / 3.0, 0.0);\n        p2 = vec3(1.0, 1.73 / 3.0, 0.0);\n        p3 = vec3(0.0, -1.73 * 2.0 / 3.0, 0.0);\n    } else {\n        m = 0.0;\n        p1 = vec3(-1.0, -1.73 / 3.0, 0.0);\n        p2 = vec3(1.0, -1.73 / 3.0, 0.0);\n        p3 = vec3(0.0, 1.73 * 2.0 / 3.0, 0.0);\n    }\n    \n    p1.z = distance(hexUvs, p1.xy);\n    \n    p2.z = distance(hexUvs, p2.xy);\n    \n    p3.z = distance(hexUvs, p3.xy);    \n    \n    vec3 p = p1.z < p2.z && p1.z < p3.z ? p1 : p2.z < p3.z ? p2 : p3;\n    \n    col.b = (1.0 - step(p.z,  rr-hh)) * step(p.z,  rr+hh);\n    \n    col.g = abs((p.z - (rr - hh)) / (2.0 * hh) - m) * col.b;\n    \n    vec2 v = hexUvs - p.xy;\n    float a = abs(abs(atan(v.x, v.y)) / 3.14 - 0.5) * 2.0;\n    col.r = a * col.b;\n    col.b = 0.0;\n    fragColor = vec4(col, 0.0);\n}","name":"Image","description":"","type":"image"}]}