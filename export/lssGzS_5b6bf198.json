{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"/*\n\t\"Stunnel\" by Tick of Excess\n\t\n\tContribution to Solskogen Shardertoy compo, Solskogen 2013\n\n\tSeems to be bugging hard in Firefox. Works as expected in Chrome.\n\t\n*/\nvec4 tunnel(vec2 coor, vec3 origin, float d)\n{\n\tfloat rad = 1.0;\n\tvec2 uv;\n\t\n\tvec3 direction = vec3(coor.x, coor.y, 1.0);\n\tdirection = normalize(direction);\n\t\t\n\tfloat a = pow(direction.x, 2.0) + pow(direction.y, 2.0);\n\tfloat b = 2.0 * (origin.x*direction.x + origin.y * direction.y);\n\tfloat c = pow(origin.x, 2.0) + pow(origin.y, 2.0) - pow(rad, 2.0);\n\t\n\tfloat delta = pow(b, 2.0) - 4.0 * a * c;\n\t\n\tif(delta < 0.0)\n\t{\n\t\treturn texture(iChannel0, vec2(0.5, 0.5));\n\t}\n\t\n\tfloat t1 = (-b + sqrt(delta)) / (2.0 * a);\n\tfloat t2 = (-b - sqrt(delta)) / (2.0 * a);\n\t\n\tfloat t = min(t1, t2);\n\t\n\tvec3 intersection = origin + direction * t;\n\t\n\tfloat u = abs(intersection.z*0.2*sin(d/4.0)) + iTime;\n\tfloat v = abs(atan(intersection.y, intersection.x)/3.1415926);\n\tv = v + abs(sin(u));\n\treturn texture(iChannel0, vec2(u, v));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 n_pos = (fragCoord.xy - iResolution.xy/2.0) / iResolution.xy;\n\tn_pos = n_pos + vec2(cos(iTime/1.1)/1.9, sin(iTime/1.3)/1.9);\n\n\tfragColor = tunnel(n_pos, vec3(sin(iTime/1.01)/1.5, cos(iTime/1.03)/1.5, -1.0), iTime);\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lssGzS","date":"1373729720","viewed":348,"name":"Stunnel","username":"greger","description":"Shader for Shadertoy-compo at Solskogen","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["compocontribution"],"hasliked":0,"parentid":"","parentname":""}}