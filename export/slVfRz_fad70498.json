{"ver":"0.1","info":{"id":"slVfRz","date":"1664009260","viewed":49,"name":"Cardioid_helloWorld","username":"Kolya142","description":"The base cardioid","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["glsl"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Output to screen\n    vec3 col = texture(iChannel0,fragCoord/iResolution.xy).rgb;\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define tmin 0.01\n\nvec2 toNorm(float f, float m) {\n    return vec2(sin(f)*m, cos(f)*m);\n}\n\nfloat rand2(vec2 seed) {\n\treturn fract(sin(dot(seed.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Base\n    vec2 uv1 = fragCoord/iResolution.xy;\n    vec2 uv = vec2(uv1.x*2.0-0.5, uv1.y);\n    vec2 card;\n    vec3 col;\n    float ymin = .003;\n    vec3 old = texture(iChannel0, uv1).rgb * .9 +\n                textureLod(iChannel0, uv1 + vec2(ymin, 0), .7).rgb * .7 *\n                textureLod(iChannel0, uv1 + vec2(-ymin, 0), .7).rgb * .7 +\n                textureLod(iChannel0, uv1 + vec2(0, ymin), .7).rgb * .5 *\n                textureLod(iChannel0, uv1 + vec2(0, -ymin), .7).rgb * .4 +\n                textureLod(iChannel0, uv1 + vec2(ymin, ymin), .7).rgb * .6 +\n                textureLod(iChannel0, uv1 + vec2(ymin, -ymin), .7).rgb * .7;\n                \n    float t;\n   \n   \n    for (int i = 0; i < 200; i++) {\n        // Cardioid\n        t = iTime + float(i) + sin(iTime + float(i));\n        card = toNorm(t, 2.0*0.1*(1.0-sin(t))) + rand2(vec2(cos(iTime), sin(t)))*.002;\n        \n        if (length(vec2(uv.x-0.5-card.x, uv.y-0.5-card.y)) < .0035) col = mix(old, col, .9);\n\n        // Set pixel color\n        if (length(vec2(uv.x-0.5-card.x, uv.y-0.5-card.y)) < tmin) {\n            col += scc(t+iTime);\n            break;\n        }\n    }\n    \n    \n    \n    col.x = pow(col.x,1./2.2);\n    col.y = pow(col.y,1./2.2);\n    col.z = pow(col.z,1./2.2);\n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n    \n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"vec3 scc(float x) {\n    vec3 col = vec3(0);\n    col.x = 0.2 + abs(0.3 + sin(x) - cos(x) + (0.01 * 21. * sin(x)));\n    col.y = 0.4 + cos(x) * sin(x) + (0.1 * cos(x));\n    col.z = 0.5 * sin(x) + (0.3 * cos(x));\n    return col;\n}","name":"Common","description":"","type":"common"}]}