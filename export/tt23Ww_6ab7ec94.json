{"ver":"0.1","info":{"id":"tt23Ww","date":"1559849232","viewed":579,"name":"Rotation loop","username":"avin","description":"Remake of Dave's sketch\nhttps://twitter.com/beesandbombs/status/1136416601165746176","likes":13,"published":3,"flags":0,"usePreview":0,"tags":["dave"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define BLACK_COL vec3(32,43,51)/255.\n#define WHITE_COL vec3(235,241,245)/255.\n\n#define PI2 6.2831852\n#define PI 3.1415926\n#define PI_2 1.5707963\n#define PI_4 0.78539815\n\n#define L 1./6.\n\n#define SQ_38 0.6164414002968976\n#define SQ_64 0.8\n\n#define SF 1./min(iResolution.x,iResolution.y)\n#define SS(l,s) smoothstep(SF,-SF,l-s)\n\nmat2 rot (float a){\n\tfloat ca = cos(a);\n    float sa = sin(a);\n    return mat2(ca,-sa,sa,ca);\n}\n\nfloat triangle(vec2 uv, vec2 pos, float size){    \n    uv/=size;\n    uv+=vec2(.25,.25) - pos;\n    \n    float m = SS(0., uv.x) * SS(0., uv.y);    \n    uv *= rot(-PI_2);\n    uv -= vec2(.5, 0.);\n    m *= SS(uv.x, uv.y);\n    \n    return m;        \n}\n\nfloat drawPhase1(float t, vec2 uv){\n    float m = 0.;\n    \n    for(float i=0.;i<8.;i++){\n        vec2 iuv = uv;\n        iuv *= rot(PI2*(i+t)/8.);\n        iuv-=vec2(0., (L+sqrt(.5)*L));\n        iuv *= rot(PI_4 - PI_2*(.5*t + 1.5*t*t - t*t*t));\n        float s = L*.5;\n    \tm += SS(abs(iuv.x), s) * SS(abs(iuv.y), s);\n    }\n    \n    return clamp(m, 0., 1.);\n}\n\nfloat drawPhase2(float t, vec2 uv){\n    \n    \n    float s = L*.5*(2.+sqrt(2.));\n    float m = step(abs(uv.x), s) * step(abs(uv.y), s);\n    \n    uv*=rot(PI_4);\n    m += step(abs(uv.x), s) * step(abs(uv.y), s);\n    \n    m = min(m, 1.);\n    \n    uv*=rot(-PI_4);    \n    \n    for(float i=0.;i<4.;i++){\n        vec2 iuv = uv;\n        \n    \tiuv *= rot(PI_2*i + PI_4*t);\n        m -= triangle(iuv, vec2(L*SQ_38,L*SQ_38), SQ_64);\n    }\n    \n    return clamp(m, 0., 1.);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{    \n    vec2 uv = (fragCoord - .5*iResolution.xy)/iResolution.y;\n    \n    float t = iTime*.5;\n    \n    float phaseV = fract(t);\n    \n    float m;\n    if(phaseV < .5){\n    \tm = drawPhase1(phaseV*2., uv);        \n    } else {        \n        m = drawPhase2(phaseV*2.-1., uv);\n    }       \n    vec3 col = mix(WHITE_COL, BLACK_COL, m);\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}