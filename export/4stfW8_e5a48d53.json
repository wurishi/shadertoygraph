{"ver":"0.1","info":{"id":"4stfW8","date":"1524905906","viewed":310,"name":" rays - mouse interaction","username":"epicycle","description":"rays","likes":9,"published":1,"flags":96,"usePreview":0,"tags":["rays"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsSXzV","filepath":"https://soundcloud.com/redbullmusic/tennyson-x-mr-carmack-tuesday","previewfilepath":"https://soundcloud.com/redbullmusic/tennyson-x-mr-carmack-tuesday","type":"musicstream","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define MAX 200.0\n\nvec3 alphablend(vec3 c, vec4 t) {\n    return c * (1.0 - t.a) + t.rgb * t.a;\n}\n\nvec3 getColor(vec2 fragCoord) {\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    return alphablend(\n        texture(iChannel0, uv).rgb,\n        texture(iChannel1, uv));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 p = (fragCoord - iResolution.xy / 2.0) / iResolution.y;\n    \n    vec3 color = getColor(fragCoord);\n    \n    float d = length(p);\n    \n    vec2 dir2 = (iMouse.xy - iResolution.xy / 2.0) / iResolution.y;\n    //vec2 dir2 = vec2(tan(iTime), 0.0);\n    vec2 dir = p;\n        \n        \n    for (int i = 0; i < int(MAX); i++) {\n        color += getColor(fragCoord - ((dir2 + dir) * float(i) * iResolution.y / 200.0)) *\n            (0.1 - 0.1 * pow(float(i) / MAX, 0.06 + 0.17 * pow(texture(iChannel2, vec2(0.0, 0.0)).r, 2.0)));\n    }\n\n    // Output to screen\n    fragColor.rgb = color;\n    fragColor.a = 1.0;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float blend(float x) {\n\tfloat sharpness = 2.0 / iResolution.y;\n    return smoothstep(0.0, sharpness, x);\n}\n\nfloat blend(float x, float s) {\n\tfloat sharpness = s / iResolution.y;\n    return smoothstep(0.0, sharpness, x);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = fragCoord - iResolution.xy / 2.0;\n    vec2 uv = (fragCoord) / iResolution.xy;\n    p /= iResolution.y / 2.0;\n    \n    float d = length(p) - 0.5;\n    \n    vec3 base = vec3(1.0, uv.x * 0.8, 0.9 - uv.x);\n    vec3 c = mix(base, vec3(0.0), blend(d, 5.0));\n    \n    fragColor = vec4(c, 1.0);\n}","name":"Buf A","description":"","type":"buffer"},{"inputs":[{"id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","previewfilepath":"/media/ap/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"float blend(float x) {\n\tfloat sharpness = 2.0 / iResolution.y;\n    return smoothstep(0.0, sharpness, x);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord) / iResolution.xy;\n    uv.y += 0.2 * sin(iTime / 3.0 + uv.x * 5.0);\n    \n    vec2 p = fragCoord - iResolution.xy / 2.0;\n    p /= iResolution.y / 2.0;\n    \n    float value = texture(iChannel0, uv / 7.0).r;\n    //value = pow(value, 5.0);\n    value = smoothstep(value, value + 0.003, 0.5);\n    \n    \n    float d = length(p) - 0.5;\n    vec4 color = mix(\n        vec4(vec3(0.0), 1.0 - value),\n        vec4(0.0),\n        blend(d)\n    );\n    \n    fragColor = color;\n}","name":"Buf B","description":"","type":"buffer"}]}