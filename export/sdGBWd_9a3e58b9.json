{"ver":"0.1","info":{"id":"sdGBWd","date":"1659002700","viewed":241,"name":"Smooth partial arc","username":"Betalord","description":"A simple smooth partial arc. I'm keeping the code here for future reference.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["arc"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n    A simple method to draw smooth partial arc.\n    This method actually smoothens out incisions better than some other ones, which\n    just compare angles (so the smoothening is stronger at the higher radius and weaker\n    at the smaller radius, which looks ugly). We multiply angle by dist, and smoothen\n    based on this value, which works better than just comparing angles.\n*/\n\n#define PI 3.14159265359\n\nfloat arc(vec2 uv, float r1, float r2, float angleMin , float angleMax, float feather) {\n    float angle = atan(uv.y, uv.x) + PI; // in [-PI, +PI] ==> [0.. 2*PI]\n\tfloat dist = length(uv);\n\t\n\t/*\n\tSome useful resources:\n\thttps://stackoverflow.com/questions/1878907/how-can-i-find-the-difference-between-two-angles\n\thttps://stackoverflow.com/questions/35155598/unable-to-use-in-glsl\n\t*/\n\tfloat dmin = angle - angleMin; // signed angle. 'dmin' means \"difference between angleMin and angle\"\n\tdmin = mod(dmin + PI, 2.*PI) - PI;\n\t\n\tfloat dmax = angle - angleMax;\n\tdmax = mod(dmax + PI, 2.*PI) - PI;\n\t\n\treturn\n\t\tsmoothstep(r1-feather, r1, dist) * // smooth inner border\n\t\tsmoothstep(r2+feather, r2, dist) * // smooth outer border\n\t\tmax(\n\t\t\tsmoothstep(feather, 0., (dmin)*dist), // smooth incision at minAngle\n\t\t\tsmoothstep(-feather, 0., (dmax)*dist) // smooth incision at maxAngle\n\t\t)\n\t;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n\n    // Output to screen\n    float arc = arc(uv, 0.3, 0.4, 0.1, 2.0, 0.01);\n    fragColor = vec4(arc * vec3(1.0, 0.6, 0.1), 1.0);\n}","name":"Image","description":"","type":"image"}]}