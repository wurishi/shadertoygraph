{"ver":"0.1","info":{"id":"MlG3WR","date":"1474101393","viewed":385,"name":"Telescope Waves","username":"Zeliss","description":"Trying to make an artsy view of waves through a telescope :)","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["procedural","waves","sin"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float waveness(vec2 center, vec2 pos, float time, float lightness, float size, float blurriness)\n{\n\tfloat elevation = pos.y - center.y + size*sin(pos.x/(2.3*size) + time*2.0);\n\treturn lightness + smoothstep(blurriness, -blurriness, elevation);  \n}\n\nfloat manyWaves(vec2 center, vec2 pos, float time)\n{    \n    const float numWaves = 5.0;\n    float waves = 0.0;\n    for (float i = 0.0; i < numWaves; i++) {\n        float wave = waveness(center, pos - vec2(0.0, i*20.0 - 50.0), time + i*0.1, i*0.17, 2.0*numWaves - 2.0*i, 11.0);\n        waves = mix(waves, wave, 1.0 - i/numWaves);\n    }\n    return waves;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 skyColor = vec4(0.5, 0.78, 0.9, 1.0);\n    vec4 seaColor = vec4(0.0, 0.03, 0.4, 1.0);\n    \n    vec2 pos = fragCoord.xy;\n    vec2 center = vec2(0.5, 0.5)*iResolution.xy;\n    vec2 pan = vec2(-(iMouse.x-center.x)/2.0, 0.0);\n    float dist = distance(pos + pan, center);\n    float tubeness = smoothstep(110.0, 120.0, dist);\n    float time = iMouse.x/300.0 + iTime;\n    \n    vec2 tubeCoord = center + 45.0*-normalize(pos - center + pan);\n    float tubeLight = manyWaves(center, tubeCoord, time);\n    float vignette = smoothstep(120.0, 80.0, dist);\n\n    float pitch = 2.5*sin(iTime/1.5);\n    vec4 imageColor = vignette * mix(skyColor, seaColor, manyWaves(center, pos+vec2(0.0, pitch), time));\n    vec4 tubeColor = mix(skyColor, seaColor, tubeLight);\n    tubeColor = pow(smoothstep(600.0, 150.0, dist), 3.0) * mix(vec4(0,0,0,1), tubeColor, 0.7);\n    \n\tfragColor = mix(imageColor, tubeColor, tubeness);\n}","name":"Image","description":"","type":"image"}]}