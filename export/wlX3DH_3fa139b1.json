{"ver":"0.1","info":{"id":"wlX3DH","date":"1556205530","viewed":330,"name":"No title","username":"gaz","description":"3d","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["3d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define T iTime*0.2\n\nmat2 rot(float a)\n{\n    a*=3.1415926;\n    return mat2(cos(a),sin(a),-sin(a),cos(a));\n}\n\nfloat map(vec3 p)\n{\n    p.xy *= rot(T*2.0 + 0.3*sin(0.5*T));\n    p.zx *= rot(T*1.5 + 0.7*sin(0.2*T));\n    p = abs(p)-3.;\n    p = abs(p)-0.5;\n    p = abs(p)-5.*(sin(T)*0.5+0.5);\n    p.xy *= rot(T*2.0 + 0.3*sin(0.5*T));\n    p.zx *= rot(T*1.5 + 0.7*sin(0.2*T));\n    p = abs(p)-0.5;\n    p = abs(p)-5.*(sin(T*3.0)*0.5+0.5);\n    p = abs(p)-2.;\n    float d=0.1;    \n    d=max(d,dot(p,vec3(-1,-1,-1)));\n    d=max(d,dot(p,vec3(1,-1,1)));\n    d=max(d,dot(p,vec3(1,1,-1)));\n    d=max(d,dot(p,vec3(-1,1,1)));\n    return (d*0.577 - 0.1);\n}\n\nfloat map2(vec3 p)\n{\n    p.xy += rot(T*0.5 + 0.3*sin(0.5*T))*vec2(3);\n    p.zx += rot(T*1.5 + 0.2*sin(0.2*T))*vec2(2);\n    p.xy *= rot(T*2.0 + 0.3*sin(0.5*T));\n    p.zx *= rot(T*1.5 + 0.7*sin(0.2*T));\n    p = abs(p)-3.;\n    p = abs(p)-0.5;\n    p = abs(p)-5.*(sin(T)*0.5+0.5);\n    p.xy *= rot(T*2.0 + 0.3*sin(0.5*T));\n    p.zx *= rot(T*1.5 + 0.7*sin(0.2*T));\n    p = abs(p)-0.5;\n    p = abs(p)-5.*(sin(T*3.0)*0.5+0.5);\n    p = abs(p)-2.;\n    return length(cross(p,normalize(vec3(1))));\n}\n\nfloat map3(vec3 p)\n{\n    p.xy *= rot(T*2.0 + 0.3*sin(0.5*T));\n    p.zx *= rot(T*1.5 + 0.7*sin(0.2*T));\n    p = abs(p)-3.;\n    p = abs(p)-0.5;\n    p = abs(p)-5.*(sin(T)*0.5+0.5);\n    p.xy *= rot(T*0.5 + 0.3*sin(0.5*T));\n    p.zx *= rot(T*1.5 + 0.2*sin(0.2*T)); \n    p = abs(p)-0.5;\n    p = abs(p)-8.*(sin(T*3.0)*0.5+0.5);\n    p = abs(p)-8.*(sin(T*3.0)*0.5+0.5);\n    p = abs(p)-2.;\n    return length(cross(p,normalize(vec3(1))));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;\n    vec3 col = vec3(0);\n    vec3 rd = normalize(vec3(p,-2));\n    vec3 ro = vec3(0,0,30);\n    float t=0.0,d;\n    for(int i=0; i<20; i++)\n    {\n        vec3 p = ro + rd * t;\n        d = map(p) * 0.3;\n        if(d<0.01)break;\n        t +=d;\n        \n    }\n    col += 0.05/d* vec3(0.5,0,0)/length(p)*0.8;\n    \n    rd = normalize(vec3(p,-1.5));\n    ro = vec3(1,3,25);\n    t=0.0;\n    for(int i=0; i<30; i++)\n    {\n        vec3 p = ro + rd * t;\n        d = map2(p) * 0.3;\n        if(d<0.01)break;\n        t +=d;\n        \n    }\n    col += 0.02/d*vec3(0.7,0.3,0)/length(p)*0.5;\n    \n    rd = normalize(vec3(p,(1.0-dot(p, p)*0.5)*0.5));\n    ro = vec3(1,3,15);\n    t=0.0;\n    for(int i=0; i<20; i++)\n    {\n        vec3 p = ro + rd * t;\n        d = map3(p) * 0.3;\n        if(d<0.01)break;\n        t +=d;\n        \n    }\n    col += vec3(.1,.0,.0)*exp(-d*d*50.);\n    col = pow(col,vec3(1.2));\n    t=T * 5.0;\n\tcol +=vec3(1,0.5,0)* sin(p.y*500.0-t)*sin(p.x*300.0- t) *0.2;\n\n    fragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}