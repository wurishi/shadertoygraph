{"ver":"0.1","info":{"id":"7stfWf","date":"1657403475","viewed":117,"name":"PolarCoordinates and leaves","username":"Mojomajor","description":"leaves with polar coordinates and rainbows","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["polarcoordinates"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdXGzn","filepath":"/media/a/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","previewfilepath":"/media/ap/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGzn","filepath":"/media/a/894a09f482fb9b2822c093630fc37f0ce6cfec02b652e4e341323e4b6e4a4543.mp3","previewfilepath":"/media/ap/894a09f482fb9b2822c093630fc37f0ce6cfec02b652e4e341323e4b6e4a4543.mp3","type":"music","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.141592\n#define VIGNETTE 0.35\n\nfloat turningLeaf(vec2 uv,float noOfLeaves,float leafShape,float leafSize,float speed,float twist) {\n    // polar coordinates\n    vec2 st = vec2(atan(uv.x,uv.y), length(uv));\n    vec2 lUv = vec2(st.x/(2.*PI) + iTime * speed + twist,st.y);\n    \n    \n    float x = lUv.x * noOfLeaves;\n    // zigzag\n    float m = min(fract(x),fract(1.-x));\n    \n    float c = smoothstep(0.,.1,m*leafSize+leafShape-lUv.y);\n    return c;\n}\n\nmat2 rotate2d(float _angle){\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1) / centered\n    vec2 uv = (fragCoord.xy-.5*iResolution.xy)/iResolution.y;\n\n    // polar coordinates\n    vec2 st = vec2(atan(uv.x,uv.y), length(uv));\n    \n    \n    float noOfLeaves = 13.;\n    float leafShape = .11+cos(iTime)*0.00381;\n    float leafSize = .7+cos(iTime)*0.0281;\n    float speed = 0.25;//sin(iTime)*0.002;\n    float twist =0.0; // st.y/(cos(iTime)+1.5*3.3);\n    \n    float dist = 0.382*sin(iTime)*0.5+0.5;\n    float c = turningLeaf(uv,  noOfLeaves,leafShape,leafSize,speed,twist);\n    float d = turningLeaf(uv+vec2(dist,.0),  5.,leafShape,leafSize,speed/2.,twist);\n    float e = turningLeaf(uv-vec2(dist,.0),  7.,leafShape+.1,leafSize,speed,st.y/(cos(iTime)+1.5*3.3));\n    \n    //vec3 color = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(.0,.2,.4));\n    vec3 color = 0.5 + 0.5*cos(iTime+st.xyx+vec3(.4,.2,.1));\n    \n    // polor coordinates\n    \n    \n    vec3 col = vec3(0);\n    \n    vec3 ampl = texture( iChannel1, st ).xyz;\n    \n    col += vec3(d);\n    col *= .1+color*sin(iTime)*1.5+ampl.z;\n    col += vec3(c);\n    col *= color*1.2;\n    col += vec3(e);\n    col *= .01+color*sin(iTime/3.*+ampl.x)*1.5+0.5;\n    \n    \n    \n    st *= (sin(ampl.x/PI))*sin(ampl.x/PI)*uv;\n    st.x= -1. * abs(st.x);\n    st = vec2(atan(uv.x,st.y), length(st));\n    //st *= 78.6;\n    \n    \n    \n    vec2 stt =  uv;vec2(atan(uv.x,uv.y), length(uv));\n    stt.x = abs(stt.x);\n    //stt *= -7.6;\n    uv = rotate2d( sin(ampl.x/PI)*0.5 ) * stt;\n    col.rgb += texture( iChannel0, stt/uv/PI ).xyz;\n    \n    \n    // vignette\n    col *= 0.9*pow( 16.0*st.x*st.y*(1.0-st.x)*(1.0-st.y), VIGNETTE *sin(ampl.x)/2.36); //is an exaggerated variant\n    \n    //colC *= c;\n    //colD *= d;\n    //vec3 col = mix(colC,colD,0.5);\n    //vec3 col = vec3(colC*c+d);\n    // Output to screen\n    //fragColor = vec4(st.x/(2.*PI)+.5);\n    fragColor = vec4(col,1);\n}","name":"Image","description":"","type":"image"}]}