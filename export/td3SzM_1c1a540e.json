{"ver":"0.1","info":{"id":"td3SzM","date":"1571657988","viewed":696,"name":"Schrodinger's Smoke corrected","username":"michael0884","description":"Copied from Wyatt, who copied it from me\nPaper : [url]http://page.math.tu-berlin.de/~chern/projects/PhDThesis/thesis_reduced.pdf[/url]\n","likes":21,"published":1,"flags":32,"usePreview":0,"tags":["what"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":3,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Fork of \"Schrodinger's Smoke\" by wyatt. https://shadertoy.com/view/tstXz4\n// 2019-10-21 11:36:29\n\nvoid mainImage( out vec4 Q, in vec2 U )\n{\n    Q = A(U).yzwx;\n    vec4 psi = C(U);\n   // Q.xyz = abs(COL(U).xyy);\n   // Q.xyz = dot(psi.xy,psi.xy)*vec3(1.) + dot(psi.zw,psi.zw)*vec3(0,0.4,1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define R iResolution.xy\n#define A(U) texture(iChannel0,(U)/R)\n#define B(U) texture(iChannel1,(U)/R)\n#define C(U) texture(iChannel2,(U)/R)\n#define COL(U) texture(iChannel3,(U)/R)\n\n#define mouse_radius 60.\n#define dt 1.0\n\n#define W dt*0.5*(m-Q+2.*Q*(B(U).x) + G*Q)\n//gravity\n#define G -0.002*(250.-U.y)*vec4(1,1,-1,-1)*(0.+clamp(length(COL(U).xyz),0.,1.))\n#define D(a,b) atan(a.x*b.y-a.y*b.x,a.x*b.x+a.y*b.y)","name":"Common","description":"","type":"common"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":3,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 Q, in vec2 U )\n{\n    Q = A(U);\n    vec4 \n        n = A(U+vec2(0,1)),\n        e = A(U+vec2(1,0)),\n        s = A(U-vec2(0,1)),\n        w = A(U-vec2(1,0)),\n        m = 0.25*(n+e+s+w);\n    \n    Q.xz += (W).yw;\n    \n    if(length(Q) <0.1 || (iFrame < 1))\n    {\n        Q = vec4(0,.5,0,.5);\n    }\n   \tvec2 p =0.7*U*mat2(cos(iTime),-sin(iTime),sin(iTime),cos(iTime));\n    if ((iFrame<1&&length(U-0.5*R)<40.)||(iMouse.z>0.&&length(U-iMouse.xy)<mouse_radius)) \n        Q=vec4(sin(p.x),cos(p.x),0,0);\n\t\n  \n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":3,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 Q, in vec2 U )\n{\n    Q = A(U);\n    vec4 \n        n = A(U+vec2(0,1)),\n        e = A(U+vec2(1,0)),\n        s = A(U-vec2(0,1)),\n        w = A(U-vec2(1,0)),\n        m = 0.25*(n+e+s+w);\n    Q.yw -= (W).xz;\n\n    //smooth, viscosity\n    Q += 0.0001*(m - Q);\n    //NORMALIZATION!\n    Q /= length(Q);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"void mainImage( out vec4 Q, in vec2 U )\n{\n    vec4 \n        a = A(U),\n        n = A(U+vec2(0,1)),\n        e = A(U+vec2(1,0)),\n        s = A(U-vec2(0,1)),\n        w = A(U-vec2(1,0));\n    float xy = dot(a.xy,a.xy), zw = dot(a.zw,a.zw);\n    Q = 0.25*vec4 (\n    \tD (e.xy,w.xy),\n        D (n.xy,s.xy),\n    \tD (e.zw,w.zw),\n        D (n.zw,s.zw)\n    );\n    Q.xy = (Q.zw*zw+Q.xy*xy)/(xy+zw);\n}","name":"Buffer C","description":"","type":"buffer"},{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGR8","filepath":"/media/previz/buffer03.png","previewfilepath":"/media/previz/buffer03.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XdfGR8","channel":0}],"code":"void mainImage( out vec4 Q, in vec2 U )\n{\n    Q.x = 0.25*(B(U+vec2(0,1))+B(U+vec2(1,0))+B(U-vec2(0,1))+B(U-vec2(1,0))).x;\n    vec4 \n        a = A(U),\n        n = A(U+vec2(0,1)),\n        e = A(U+vec2(1,0)),\n        s = A(U-vec2(0,1)),\n        w = A(U-vec2(1,0));\n    Q.x += 0.25*(n.y-s.y+e.x-w.x);\n    \n    Q.yzw = B(U - dt*a.xy).yzw;\n    vec2 p = .05*U*mat2(cos(0.2*iTime),-sin(0.2*iTime),sin(0.2*iTime),cos(0.2*iTime));\n    \n    if (iFrame < 1) Q.yzw = vec3(0);\n    if ((length(U-0.5*R)<40.)||(iMouse.z>0.&&length(U-iMouse.xy)<mouse_radius)) Q.yzw=1.1*abs(vec3(sin(p.x),cos(.5*p.x),1.3*cos(p.x)));\n\t\n    \n}","name":"Buffer D","description":"","type":"buffer"}]}