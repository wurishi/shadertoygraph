{"ver":"0.1","info":{"id":"wsS3Ry","date":"1549153844","viewed":132,"name":"A-dither grayscale","username":"lhog","description":"https://www.shadertoy.com/view/tss3Df","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["dithering"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float mask1(int levels, float l, int x, int y, int c) {\n    float mask = float((x ^ y * 149) * 1234 & 511)/511.0;\n    return floor(float(levels) * l + mask)/float(levels);\n}\n\nfloat mask2(int levels, float l, int x, int y, int c) {\n    float mask = float(((x+c*17) ^ y * 149) * 1234 & 511)/511.0;\n    return floor(float(levels) * l + mask)/float(levels);\n}\nfloat mask3(int levels, float l, int x, int y, int c) {\n    float mask =  float((x + y * 237) * 119 & 255)/255.0;\n    return floor(float(levels) * l + mask)/float(levels);\n}\n\nfloat mask4(int levels, float l, int x, int y, int c) {\n    float mask = float(((x+c*67) + y * 236) * 119 & 255)/255.0;\n    return floor(float(levels) * l + mask)/float(levels);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    //const int pattern = 1;\n    const float levelsMax = 8.0;\n    \n    int levels = int(floor( (levelsMax) * uv.x)) + 1;\n    \n    ivec2 ic = ivec2( (uv * vec2(textureSize(iChannel0, 0))) );\n\n    vec3 c = texture(iChannel0, uv).rgb;\n    float cLuma = dot(c, vec3(0.2126, 0.7152, 0.0722));\n    \n    \n    float value;\n    int band = int(uv.y * 4.0);\n    if (band == 0)\n    \tvalue = mask1(levels, cLuma, ic.x, ic.y, 0);\n   \telse if (band == 1)\n        value = mask2(levels, cLuma, ic.x, ic.y, 0);\n   \telse if (band == 2)\n        value = mask3(levels, cLuma, ic.x, ic.y, 0);        \n   \telse if (band == 3)\n        value = mask4(levels, cLuma, ic.x, ic.y, 0);\n    \n    //float value = mask4(levels, cLuma, ic.x, ic.y, 0);\n        \n\n    vec3 rgb = vec3( value );\n\n    const float eps = 1.0 * (1.0/255.0);\n\n    // Output to screen\n    #if 0\n    fragColor = vec4( vec3( abs(value - cLuma) < eps),1.0);\n    #else\n    fragColor = vec4( rgb ,1.0);\n    #endif\n}","name":"Image","description":"","type":"image"}]}