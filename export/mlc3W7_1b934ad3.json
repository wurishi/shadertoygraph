{"ver":"0.1","info":{"id":"mlc3W7","date":"1682531063","viewed":419,"name":"Rubenesque Shroom Farm","username":"evvvvil","description":"Winning shader made at Revision 2023 Shader Showdown final. Live coded on stage in about 25 minutes.\nDesigned & coded using POSH BROLLY, the flamboyant shader editor:\nhttps://www.poshbrolly.net/shader/4eTDcSYGzKdjlFmbBJ6b\n","likes":27,"published":1,"flags":0,"usePreview":1,"tags":["demoscene","particles","glow","alien","organic","mushroom","particle","plant","growing","rubens"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sfGRn","filepath":"/media/a/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","previewfilepath":"/media/ap/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Winning shader made at Revision 2023 Shader Showdown final, coded live on stage in about 25 minutes.\n// Video of the battle: https://www.youtube.com/watch?v=EJ7KAD0NyGw\n\n// This shader was designed & coded using POSH BROLLY, the flamboyant shader editor.\n// See it in its flamboyant habitat: https://www.poshbrolly.net/shader/4eTDcSYGzKdjlFmbBJ6b\n\nvec2 z,e=vec2(.00035,-.00035);float tt,b=1.,g,tn,bal,di,tu,pa;vec3 np,op,pp;\nfloat smin(float a,float b,float k){float h=max(0.,k-abs(a-b));return min(a,b)-h*h*.25/k;}\nfloat smax(float a,float b,float k){float h=max(0.,k-abs(-a-b));return max(-a,b)+h*h*.25/k;}\nvec2 smin2(vec2 a,vec2 b,float k){float h=clamp((a.x-b.x)/k*.5+.5,0.,1.);return mix(a,b,h)-h*(1.-h)*k;}\nvec4 texNoise(vec2 uv,sampler2D tex ){ float f = 0.; f+=texture(tex, uv*.125).r*.5; f+=texture(tex,uv*.25).r*.25; //Funciton simulating the perlin noise texture we have in Bonzomatic shader editor, written by yx\n                       f+=texture(tex,uv*.5).r*.125; f+=texture(tex,uv*1.).r*.125; f=pow(f,1.2);return vec4(f*.45+.05);}\nmat2 r2(float r){return mat2(cos(r),sin(r),-sin(r),cos(r));}\nvec2 mp( vec3 p)\n{\n  op=p;\n  di=cos(p.y*.4);\n  p.xz=abs(p.xz)-6.-2.*di;\n  pp=p;\n  pp.xz*=r2(sin(pp.y*.5+tt));\n  np=vec3(atan(pp.x,pp.z)*1.5,pp.y*max(0.1,b),length(pp.xz)-2.5+abs(p.y)*.1);\n  np.xy=abs(abs(abs(np.xy)-11.)-6.)-3.;\n  tn=texNoise(np.xy*.05,iChannel0).r;\n  np+=tn;\n\n  vec2 h,t=vec2(length(np)-1.4,1);\n  t.x=smax(length(np-vec3(0,0,1))-1.3,t.x,.3);\n  bal=length(np)-.9;\n  bal=smin(bal,length(np.xz-vec2(0,0.5)),.3);\n  bal=smin(bal,length(np.xz-vec2(0,1.5)),1.);\n  g+=0.1/(0.1+bal*bal*(40.-39.*sin(pp.y+tt*2.)));\n  np.xy=abs(np.xy)-1.6;\n  t.x=min(t.x,bal);\n  h=vec2(length(np.xz)-.5-sin(np.y*30.)*.02,0);\n\n  tu=max(length(np.xy)-.2,abs(np.z)-2.-di);\n  t.x=smin(t.x,tu,.5);\n  op.xz*=r2(-.785);\n  op.xz=abs(op.xz);\n  op.xz*=r2(-.785);\n  t.x=smin(t.x,length(op.xy)-.3-sin(op.z*15.)*.02,3.);\n  h.x=smin(h.x,.8*(length(np.yz-vec2(0,2.5+di))-.3),.5);\n  h.x=smin(h.x,p.y+tn+sin(length(p.xz)-tt*5.)*.5,3.);\n\n  t=smin2(t,h,.75);\n  np.z-=3.*di;\n  np=abs(np)-di;\n  pa=length(np);\n  vec3 rp=op;\n  rp.z=mod(rp.z,2.)-1.;\n  pa=min(pa,max(length(rp.xz),abs(p.y)-2.));\n  t.x=smin(t.x,pa,.5);\n  g+=0.1/(0.1+pa*pa*40.);\n  t.x*=0.7;\n  return t;\n}\nvec2 tr( vec3 ro,vec3 rd )\n{\n  vec2 h,t=vec2(.1);\n  for(int i=0;i<128;i++){\n    h=mp(ro+rd*t.x);\n    if(h.x<.0001||t.x>80.) break;\n    t.x+=h.x;t.y=h.y;\n  }\n  if(t.x>80.) t.y=-1.;\n  return t;\n}\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord){\n  vec2 uv=(fragCoord/iResolution.xy-0.5)/vec2(iResolution.y/iResolution.x,1);\n  tt=mod(iTime,62.82)+13.38;\n  float bro=ceil(cos(tt*.2));\n  b=sin(tt*.5)*.5+.5;\n  vec3 ro=mix(vec3(sin(tt*.2)*12.,5,cos(tt*.2)*22.),\n  vec3(cos(tt*.2)*2.,5.+cos(tt*.2)*20.,sin(tt*.2)*25.),\n  clamp(bro,0.,1.)),\n  cw=normalize(vec3(0,10.-bro*10.,0)-ro),\n  cu=normalize(cross(cw,vec3(0,1,0))),\n  cv=normalize(cross(cu,cw)),\n  rd=mat3(cu,cv,cw)*normalize(vec3(uv,.5)),co,fo,po,no,al,ld,re;\n  co=fo=clamp((vec3(.14,.1,.12)-length(uv)*.12)*(1.-texture(iChannel0,rd.xy*.06).r*1.5),0.,1.);\n  z=tr(ro,rd);\n  if(z.y>-1.){\n    po=ro+rd*z.x;\n    no=normalize(e.xyy*mp(po+e.xyy).x+\n    e.yyx*mp(po+e.yyx).x+\n    e.yxy*mp(po+e.yxy).x+\n    e.xxx*mp(po+e.xxx).x);\n    al=mix(vec3(.1,.2,.8)-tn*.7,vec3(1.),z.y);\n    re=reflect(rd,no);\n    ld=normalize(vec3(.1,.2,.1));\n    float dif=max(0.,dot(no,ld)),\n    sp=length(sin(re*4.)*.5+.5)/sqrt(3.),\n    fr=1.-pow(dot(rd,no),2.),\n    ao=clamp(mp(po+no*.1).x/.1,0.,1.),\n    ss=smoothstep(0.,1.,mp(po+ld*.4).x/.4);\n    co=pow(sp,10.)*fr+al*(ao+.2)*(dif+ss*.5);\n    co=mix(fo,co,exp(-.00001*z.x*z.x*z.x));\n  }\n  co+=g*.3*mix(vec3(.1,.2,.7),vec3(.7,.2,.1),b);\n  fragColor=vec4(pow(co,vec3(.45)),1);\n}","name":"Image","description":"","type":"image"}]}