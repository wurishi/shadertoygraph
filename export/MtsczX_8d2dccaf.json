{"ver":"0.1","info":{"id":"MtsczX","date":"1505835795","viewed":79,"name":"raymarching_part1","username":"guyue","description":"第一次\n","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["raymarching"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const int MAX_RAY_FRE = 255;\nconst float MIN_DIST = 0.0;\nconst float MAX_DIST = 100.0;\nconst float SCALE = 0.0001;\n\n\n\nfloat sphereSDF(vec3 pointpos){\n\n   return length(pointpos)-1.0;\n\n}\n\nvec3 rayDir(float ToView,vec2 size,vec2 fragcood){\n    vec2 xy = fragcood-size/2.0;\n    \n    float z = size.y;\n    \n    return normalize(vec3(xy,-z));\n        \n  \n}\n\n\nfloat ShortestDistanceToObjSurface(vec3 eye,vec3 dir,float start,float end){\n\n   float depth = start;\n    \n    for(int i = 1;i<MAX_RAY_FRE;i++){\n      float dis = sphereSDF(eye+depth*dir);\n        if(dis<SCALE){\n        \n        return depth;\n        }\n        \n        depth+=dis;\n        if(depth>=end){\n        \n        return end;\n        }\n    \n    }\n\n\nreturn end;\n\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec3 dir = rayDir(80.0,iResolution.xy,fragCoord);\n    \n    vec3 eye = vec3(0,0,5.0);\n    \n    float dis = ShortestDistanceToObjSurface(eye,dir,MIN_DIST, MAX_DIST);\n    \n    if(dis<50.0){\n       fragColor = vec4(1.0,0.0,0.0,1.0);\n        return;\n    }\n    \n\tfragColor = vec4(0.0,0.0,0.0,1.0);\n}","name":"Image","description":"","type":"image"}]}