{"ver":"0.1","info":{"id":"3l3BzB","date":"1612929195","viewed":102,"name":"point to disk","username":"saidwho12","description":"just a simple test","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["test","sdf","lines","point"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PRAD 0.04\n#define LW 0.0001\n#define RAD 0.5\n\nfloat line(in vec2 p, in vec2 a, in vec2 b) {\n    vec2 pa = -p - a, ba = b - a;\n    float h = clamp(dot(pa, ba)/dot(ba, ba), 0.0, 1.0);\n    return length(pa - ba*h);\n}\n\nvoid mainImage( out vec4 O, in vec2 u )\n{\n    vec2 R = iResolution.xy;\n    vec2 m = iMouse.xy;\n    vec2 p = (u+u-R)/R.y;\n    vec2 p_m = (m+m-R)/R.y;\n    \n    vec2 disk_center = vec2(0,0);\n    \n    \n    float fd = abs(length(p) - RAD) - LW;\n    float fp = length(p - p_m) - PRAD;\n    float a_disk = smoothstep(3./R.y, 0., fd);\n    float a_point = smoothstep(3./R.y, 0., fp);\n    \n    \n    float a = RAD;\n    float h = distance(p_m, disk_center);\n    \n    float base_theta = -atan(p_m.y, p_m.x);\n    float theta = acos(a/h);\n    \n    vec2 t1 = vec2(cos(base_theta+theta), -sin(base_theta + theta)) * RAD;\n    vec2 t2 = vec2(cos(base_theta-theta), -sin(base_theta-theta)) * RAD;\n    float f_ptan = min(length(p-t1), length(p-t2)) - PRAD;\n    \n    float f_lines = min(line(p, -p_m, -t1), line(p, -p_m, -t2))-LW;\n    \n    O -= O;\n    O.rgb = mix(O.rgb, vec3(1), a_disk);\n    O.rgb = mix(O.rgb, vec3(1), smoothstep(3./R.y,0.,f_lines));\n    O.rgb = mix(O.rgb, vec3(1,0,0), a_point);\n    O.rgb = mix(O.rgb, vec3(1,0,0), smoothstep(3./R.y, 0., f_ptan) );\n}","name":"Image","description":"","type":"image"}]}