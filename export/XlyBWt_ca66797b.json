{"ver":"0.1","info":{"id":"XlyBWt","date":"1588980256","viewed":51,"name":"Nibble Extraction 2","username":"BigotedSJW","description":"a not as impressive but nevertheless more elaborate followup to https://www.shadertoy.com/view/MtfBzB\nthe fruit of ruminating over how I can hopefully squeeze down https://www.shadertoy.com/view/MtdBRS to an average of 2 bits/pixel","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["2d","simple","integer","bitoperations"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"ivec2 dataSet = ivec2(0x01234567, 0x89ABCDEF);\n\nfloat selectFromMat(ivec2 coord, mat4x4 matrix){\n\tcoord &= 3;\n\tfloat value;\n\tswitch(coord.x){\n\t\tcase 0: value = matrix[coord.y].x; break;\n\t\tcase 1: value = matrix[coord.y].y; break;\n\t\tcase 2: value = matrix[coord.y].z; break;\n\t\tcase 3: value = matrix[coord.y].w; break;\n\t\tdefault: value = 0.0f;} \n\treturn value;\n}\n\nfloat duff(int step, mat4x4 block){\n\tfloat value = 0.;\n\tmat4x4 diffblock = block - mat4x4(8.);\n\t\n\tswitch(step & 15){\n\t\tcase 15: value += diffblock[3].w;\n\t\tcase 14: value += diffblock[3].z;\n\t\tcase 13: value += diffblock[3].y;\n\t\tcase 12: value += diffblock[3].x;\n\t\tcase 11: value += diffblock[2].w;\n\t\tcase 10: value += diffblock[2].z;\n\t\tcase  9: value += diffblock[2].y;\n\t\tcase  8: value += diffblock[2].x;\n\t\tcase  7: value += diffblock[1].w;\n\t\tcase  6: value += diffblock[1].z;\n\t\tcase  5: value += diffblock[1].y;\n\t\tcase  4: value += diffblock[1].x;\n\t\tcase  3: value += diffblock[0].w;\n\t\tcase  2: value += diffblock[0].z;\n\t\tcase  1: value += diffblock[0].y;\n\t\tcase  0: value += diffblock[0].x;\n\t}\n\treturn value;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 normUV = fragCoord.xy /iResolution.xy;\n\tivec4 shifted0 = (ivec4(dataSet.x) >> ivec4(28, 24, 20, 16)) & ivec4(15);\n\tivec4 shifted1 = (ivec4(dataSet.x) >> ivec4(12,  8,  4,  0)) & ivec4(15);\n\tivec4 shifted2 = (ivec4(dataSet.y) >> ivec4(28, 24, 20, 16)) & ivec4(15);\n\tivec4 shifted3 = (ivec4(dataSet.y) >> ivec4(12,  8,  4,  0)) & ivec4(15);\n\t\n\tmat4x4 matthew = mat4x4(shifted0, shifted1, shifted2,  shifted3);\n\t\n\tvec2 timeOffset = vec2(cos(iTime), sin(iTime))/4.;\n\n\tivec2 bigGrid = ivec2((4.* (normUV - timeOffset)) );\n\tivec2 smallGrid = ivec2((16.* (normUV + timeOffset) ));\n\tfloat value = selectFromMat(bigGrid, matthew);\n\tfloat value2 = selectFromMat(smallGrid, matthew);\n\tfloat value3 = duff(int(normUV.y * 16.) , matthew);\n\tfloat arbitraryCombination = ((value3+12.)/64.) * (value2 + value)/31.;\n    float unGamma = pow(arbitraryCombination, 0.45);\n    \n\tfragColor = vec4( unGamma );\n}\n","name":"Image","description":"","type":"image"}]}