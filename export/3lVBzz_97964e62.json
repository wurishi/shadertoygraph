{"ver":"0.1","info":{"id":"3lVBzz","date":"1613828138","viewed":170,"name":"Ellipses Testing","username":"m1ke","description":"Messing around with ellipses to test orbits and orbital speed\nGreen: the sun\nBlue: the planet\nRed: Other foci of the ellipse\nPurple Marker: The instantaneous speed of the planet (notice how the speed increases the closer the planet gets to the sun)","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["test"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"struct Ellipse\n{\n    vec2 c;\n    float minor;\n    float major;\n    float f;\n};\nfloat GetFoci(float major, float minor)\n{\n    return sqrt((major*major)-(minor*minor));\n}\nEllipse CreateEllipseAxis(vec2 c, float mi, float ma)\n{\n    Ellipse e;\n    e.c = c;\n    e.major = max(mi,ma);\n    e.minor = min(mi,ma);\n    e.f = GetFoci(e.major, e.minor);\n    return e;\n}\nbool InEllipse(vec2 p, Ellipse e)\n{\n    float first = ((p.x-e.c.x)*(p.x-e.c.x)) / (e.major*e.major);\n    float second = ((p.y-e.c.y)*(p.y-e.c.y)) / (e.minor*e.minor);\n    return first+second <= 1.0f;\n}\nvec2 PointOnEllipse(Ellipse e, float alpha)\n{\n    return vec2(cos(alpha)*e.major,sin(alpha)*e.minor) + e.c;\n}\nvoid DrawEllipse(inout vec3 c, vec2 p, Ellipse e)\n{\n    if (InEllipse(p,e))\n    {\n        c = vec3(1);\n    }\n}\nvoid DrawMarker(inout vec3 c, vec2 p, vec2 P, vec3 col)\n{\n    if (length(p-P) < 5.0f)\n    {\n        c = col;\n    }\n}\nfloat GetInstVel(vec2 object, Ellipse e)\n{\n    float r = length(object - vec2(e.c.x+e.f,e.c.y));\n    float a = e.minor;\n    return (sqrt((2.0f/r) - (1.0f/a)) * 5.0f);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    // Time varying pixel color\n    vec3 col = vec3(0);\n    vec2 middle = iResolution.xy / 2.0f;\n    vec3 red = vec3(1,0,0);\n    vec3 blue = vec3(0,0,1);\n    vec3 green = vec3(0,1,0);\n    \n    \n    //defining ellipse\n    Ellipse e = CreateEllipseAxis(middle, 100.0f, 150.0f);\n    DrawEllipse(col, fragCoord, e);\n    \n    vec2 foci1 = vec2(e.c.x+e.f,e.c.y);\n    vec2 foci2 = vec2(e.c.x-e.f,e.c.y);\n    DrawMarker(col, fragCoord, foci1, green);\n    DrawMarker(col, fragCoord, foci2, red);\n    \n    vec2 point = PointOnEllipse(e,iTime);\n    DrawMarker(col, fragCoord, point, blue);\n    \n    float speed = GetInstVel(point, e);\n    DrawMarker(col, fragCoord, middle, vec3(speed,0,speed));\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}