{"ver":"0.1","info":{"id":"4tjyzK","date":"1509282420","viewed":504,"name":"histogram of random texture","username":"FabriceNeyret2","description":"Attention: shadertoy random textures have very limited dynamics. \nE.g. the 64x64 texture only have 256 different values (  striped 64x64 histogram ).\nThese values are not equally distributed ( random 8x8 histogram ).\nCan't be used as permutation matrix.","likes":0,"published":3,"flags":0,"usePreview":0,"tags":["shadertoy","rand","permutations"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define Nt 64\n#define N (mod(iTime,2.)<1. ? 8 : 64)\n\n#define T(U) texelFetch(iChannel0, U, 0).r                        // random texture\n//#define T(U) fract(4379.31*sin(dot(vec2(U),vec2(77.7,123.1))))  // algorithmic hash\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    O -= O;\n    ivec2 P = ivec2(U/iResolution.y*float(N));\n    if ( P.x >= N ) return;\n    O.b += .4;\n    \n    int p =  P.x+P.y*N;               // tranform screen as 0..N*N-1 index\n    \n    for (int i=0; i<Nt*Nt; i++)       // test each texture pixel\n        if ( p == int( float(N*N)* T( ivec2(i%Nt,i/Nt) ) ) ) O++; // if match, inc the bin\n            \n    O *=  float(N*N)/float(Nt*Nt) * .71; // / 32.;\n    if (O.x>1.) O.gb--;\n}","name":"Image","description":"","type":"image"}]}