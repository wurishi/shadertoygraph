{"ver":"0.1","info":{"id":"XtSfRR","date":"1514115671","viewed":210,"name":"Led","username":"d954mas","description":"Rasterization from pixel to led","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["postprocessing","led"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","previewfilepath":"/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","type":"video","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdXGzn","filepath":"/media/a/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","previewfilepath":"/media/ap/3083c722c0c738cad0f468383167a0d246f91af2bfa373e9c5c094fb8c8413e0.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float height = 32.0; // number of leds in height\nconst float ledRad = 0.4; \nconst float center = 1.0/height * 0.5;\nconst float rad = center * ledRad * 2.0;\nvec3 getColor(vec2 uv){\n    float aspectRatio = iResolution.x / iResolution.y;\n    vec2 newRes = vec2(height * aspectRatio, height);\n    \n    float resAspect = newRes.x / newRes.y;\n    float aspect = aspectRatio / resAspect;\n    \n    //get color for one led\n    vec2 pixelUV = floor(uv * newRes) / newRes;\n    vec2 pos = uv - center;\n    vec2 coords = pixelUV - pos;\n    //fixed aspect\n    coords.x *= aspectRatio;\n    coords.x -= center * aspect;\n    \n    float d = length(coords);\n\tvec3 color = d < rad ? texture(iChannel1, pixelUV).rgb : vec3(0);\n    return color;\n}    \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tfragColor = vec4(getColor(uv).rgb, 1.0);\n}","name":"Image","description":"","type":"image"}]}