{"ver":"0.1","info":{"id":"Mf2yz3","date":"1722750182","viewed":39,"name":"喵喵喵~喵喵喵~~","username":"langzai","description":"序列帧动画，图片排版，图片重复，图片覆盖的结合产品","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["sequenccover"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 CenterUV(vec2 fragCoord )//uv的居中与反拉伸https://www.shadertoy.com/view/M3cSDS\n{ return (2.0 * fragCoord - iResolution.xy) / min(iResolution.x, iResolution.y);}\nvec2 TransformUV(vec2 uv,vec2 uvTiling,vec2 uvOffset,vec2 move)//平铺\n{ return mod(uv * uvTiling + uvOffset+ move ,2.)-1.;}\n//（图片uv，相对于最小帧的当前帧，最小帧，最大帧，序列图列数，序列帧行数）https://www.shadertoy.com/view/4XVSDc\nvec2 SequenceUV(vec2 uv,float nowNum,float minNum,float maxNum,float colNum,float rowNum)//序列帧动画\n{\n    nowNum = mod(floor(nowNum),abs(maxNum - minNum))+ min(minNum,maxNum);\n    uv.x = uv.x/colNum + nowNum /colNum;\n    uv.y = uv.y/rowNum + (rowNum - floor(nowNum/colNum)  - 1.)/rowNum;\n    return uv;\n}\n//输入为（相对位置使用的uv坐标，图片的尺寸，图片的位置，图片的缩放）\nvec2 MoveTexUV(vec2 uv,vec2 TexSize,vec2 TexPos,float TexSacle)//图片排版\n{\n    vec2 texUV = uv-TexPos;\n    if(TexSize.x>TexSize.y) texUV.x *= TexSize.y/TexSize.x;\n    else texUV.y *= TexSize.x/TexSize.y;\n    return texUV/TexSacle + 0.5;\n}\nvec4 CoverTex(vec4 downColor,vec4 upColor)\n{\n    vec3 color = downColor.rgb * downColor.a + upColor.rgb * upColor.a;//非重合区域的颜色是各自的颜色\n    return vec4(mix(color,upColor.rgb,downColor.a*upColor.a),clamp(downColor.a+upColor.a,0.,1.));//重合区域的颜色为upcolor，alpha叠加\n}\nvec2 CatUV(vec2 uv)//转为cat的uv，只适用于此场景\n{return SequenceUV(MoveTexUV(uv,vec2(40.,32.),vec2(0.),2.),iTime*6.,0.,6.,6.4,1.);}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = CenterUV(fragCoord );\n    \n    vec2 uv1 =  TransformUV(uv,vec2(3.),vec2(0.),vec2(-iTime,0.));\n    vec4 color1 = texture(iChannel0,CatUV(uv1));\n    vec2 uv2 = TransformUV(uv,vec2(3.),vec2(0.,-1.1),vec2(iTime,0.));\n    uv2.x = -uv2.x;\n    vec4 color2 = texture(iChannel0,CatUV(uv2));\n    \n    vec4 color;\n    if(uv1.y<uv2.y) color = CoverTex(color1,color2);//uv.y更大的覆盖在上层\n    else color = CoverTex(color2,color1);\n    \n    vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));\n    color.rgb = mix(col,color.rgb,color.a);\n    fragColor = color;\n}","name":"Image","description":"","type":"image"}]}