{"ver":"0.1","info":{"id":"csXSRs","date":"1669370157","viewed":125,"name":"sRGB correct vs fast comparison","username":"theGiallo","description":"Forked\n\nBased on tsone's \"Just A Linear Gradient\", found here: https://www.shadertoy.com/view/lscGDr\n\nI couldn't find any examples of someone using the actual sRGB standard (no, raising to the 2.2 (or 1/2.2) power is *not* sRGB), so I decided to make one.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["gradient","gamma","linear","srgb"],"hasliked":0,"parentid":"4tXcWr","parentname":"sRGB to and from Linear Light"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const vec4 color0 = vec4(1.0, 0.0, 0.2, 1.0);\nconst vec4 color1 = vec4(0.6, 1.0, 0.1, 1.0);\n\nvec4 fromLinear(vec4 linearRGB)\n{\n\tbvec4 cutoff = lessThan(linearRGB, vec4(0.0031308));\n\tvec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n\tvec4 lower = linearRGB * vec4(12.92);\n\n\treturn mix(higher, lower, cutoff);\n}\nvec4 fastFromLinear( vec4 linearRGB )\n{\n    return vec4( pow(linearRGB.rgb, vec3(1.0 / 2.2)), linearRGB.a );\n}\n\nvec4 toLinear(vec4 sRGB)\n{\n\tbvec4 cutoff = lessThan(sRGB, vec4(0.04045));\n\tvec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n\tvec4 lower = sRGB/vec4(12.92);\n\n\treturn mix(higher, lower, cutoff);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n\tvec2 from;\n\tvec2 to;\n\tvec2 gradVec;\n\tfloat value;\n\n\tif (iMouse == vec4(0.0)) {\n\t\tfrom = 0.2*iResolution.xy;\n\t\tto = iResolution.xy;\n\t} else {\n\t\tfrom = abs(iMouse.zw);\n\t\tto = iMouse.xy;\n\t}\n\n\tgradVec = to - from;\n\tvalue = dot(fragCoord.xy - from, gradVec)/dot(gradVec, gradVec);\n\tvalue = clamp(value, 0.0, 1.0);\n\n    vec4 correct = fromLinear(mix(toLinear(color0), toLinear(color1), value));\n    vec4 fast    = fastFromLinear(mix(toLinear(color0), toLinear(color1), value));\n    \n    vec2 uv = fragCoord.xy / iResolution.xy;\n\n    if ( uv.y < 0.125 )\n        fragColor = vec4(1.0);\n    else if ( uv.y < 0.25 )\n        fragColor = vec4( vec3(1.0 - length( correct.rgb - fast.rgb ) ), 1 );\n    else if ( uv.y < 0.375 )\n        fragColor = vec4( 1.0 - abs( correct.rgb - fast.rgb ), 1 );\n    else if ( uv.y < 0.5 )\n        fragColor = vec4( abs( correct.rgb - fast.rgb ), 1 );\n    else if ( uv.y < 0.625 )\n        fragColor = vec4( vec3(length( correct.rgb - fast.rgb ) ), 1 );\n    else if ( uv.y < 0.75 )\n        fragColor = vec4( 0,0,0, 1 );\n    else if ( uv.y < 0.875 )\n        fragColor = fast;\n    else\n        fragColor = correct;\n}","name":"Image","description":"","type":"image"}]}