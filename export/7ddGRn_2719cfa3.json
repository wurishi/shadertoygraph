{"ver":"0.1","info":{"id":"7ddGRn","date":"1629047003","viewed":444,"name":"Fireworks by Mendi","username":"mendi80","description":"My fireworks, based on \"The art of code\".","likes":13,"published":1,"flags":0,"usePreview":0,"tags":["fireworks"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n\n#define NUM_EXPLOSIONS 7.\n#define NUM_PARTICLES 100.\n#define inv_nparticels (1./NUM_PARTICLES)\n#define PI 3.1415926\n\nfloat Hash11(float t){\n    return fract(sin(t*613.2)*614.8);\n}\nvec2 Hash12(float t){\n  return vec2(fract(sin(t*213.3)*314.8)-0.5,fract(sin(t*591.1)*647.2)-0.5);\n}\n\nvec2 Hash12_Polar(float t){\n    float o = fract(sin(t*213.3)*314.8)*PI*2.0;\n    float r = fract(sin(t*591.1)*647.2);\n    return vec2(sin(o)*r,cos(o)*r);\n}\n\nfloat Explosion(vec2 uv, float t)\n{\n    float fract_t=fract(t);\n    float floor_t=floor(t);\n    float power=0.3+Hash11(floor_t);\n    float sparks=0.;\n    for(float i=0.;i<NUM_PARTICLES;i++)\n    {\n        vec2 dir=Hash12_Polar(i*floor_t)*1.;\n        float inv_d=1./(length(uv-dir*sqrt(fract_t)));\n        float brightness=mix(0.3,0.09,smoothstep(0.,0.1,fract_t))*(1.0-(0.5+0.5*Hash11(i))*fract_t);\n        float sparkling= .5+.5*sin(t*10.2+floor_t*i);\n        sparks+=power*brightness*sparkling*inv_nparticels*inv_d;\n    }\n    return sparks;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n\n    vec3 col=vec3(0);    \n\n    for(float i=0.;i<NUM_EXPLOSIONS;i++){\n        float t=iTime*(0.3+0.4*Hash11(i))+i/NUM_EXPLOSIONS;\n        float fract_t=fract(t);\n        float floor_t=floor(t);\n    \n        vec3 color=0.7+0.3*sin(vec3(.34,.54,.43)*floor_t*i);\n        vec2 center = Hash12(i+10.+5.*floor_t);\n        col+=Explosion(uv-center,t)*color;\n    }\n    col-=0.1;\n    fragColor = vec4(col,1.0);\n} ","name":"Image","description":"","type":"image"}]}