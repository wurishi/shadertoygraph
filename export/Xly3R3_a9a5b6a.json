{"ver":"0.1","info":{"id":"Xly3R3","date":"1475697463","viewed":437,"name":"Kaleo","username":"BlooD2oo1","description":"https://c2.staticflickr.com/6/5609/15527309729_b2a1d5a491_o.jpg","likes":23,"published":1,"flags":0,"usePreview":0,"tags":["kaleo"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//BlooD2oo1\n////////////////////////////////////////////////////////////////////////////////////////////////////\n/*\nfloat\t\tg_fScale = 1.4596018791;\nmat4\t\tg_matIterator1 = mat4( 0.5581389666, -0.5467591882, -0.6241276264, 0.0000000000,\n\t\t-0.4186115861, 0.4638987184, -0.7807447314, 0.0000000000,\n\t\t0.7164113522, 0.6970310807, 0.0300402045, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matIterator2 = mat4( 0.4301463366, 0.4317150712, 0.7928405404, -0.4874736369,\n\t\t-0.8665006757, 0.4438425303, 0.2284300029, -0.4874736369,\n\t\t-0.2532796264, -0.7852551937, 0.5649986267, -0.4874736369,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect1 = mat4( 0.9992052913, -0.0019213267, -0.0398128927, 0.0000000000,\n\t\t-0.0019213267, 0.9953548312, -0.0962552801, 0.0000000000,\n\t\t-0.0398128927, -0.0962552801, -0.9945598841, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect2 = mat4( 0.9998625517, -0.0003860624, 0.0165746342, 0.0000000000,\n\t\t-0.0003860624, 0.9989156127, 0.0465562604, 0.0000000000,\n\t\t0.0165746342, 0.0465562604, -0.9987778664, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect3 = mat4( -0.8203884363, -0.0687007159, 0.5676636696, 0.0000000000,\n\t\t-0.0687007159, 0.9974072576, 0.0214233957, 0.0000000000,\n\t\t0.5676636696, 0.0214233957, 0.8229817152, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nvec4\t\tg_planeReflect1 = vec4( 0.0199335758, 0.0481932275, 0.9986390471, -0.0000000000 );\nvec4\t\tg_planeReflect2 = vec4( -0.0082898503, -0.0232852455, 0.9996944070, -0.0000000000 );\nvec4\t\tg_planeReflect3 = vec4( -0.9540411830, -0.0360051244, 0.2975049317, -0.0000000000 );\n*/\n////////////////////////////////////////////////////////////////////////////////////////////////////\n/*\nfloat\t\tg_fScale = 1.4748922586;\nfloat\t\tg_fBailout = 1000.0000000000;\nmat4\t\tg_matIterator1 = mat4( -0.9999997616, -0.0000000874, 0.0000000000, 0.0000000000,\n\t\t0.0000000000, 0.0000000596, -0.9999998808, 0.0000000000,\n\t\t0.0000000874, -0.9999998808, 0.0000001788, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matIterator2 = mat4( 1.0000000000, 0.0000000000, 0.0000000000, -0.4000000060,\n\t\t0.0000000000, -1.0000000000, 0.0000000874, 0.4000000060,\n\t\t0.0000000000, -0.0000000874, -1.0000000000, -0.4000000060,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect1 = mat4( -0.6353622675, -0.7722140551, 0.0000000000, 0.0000000000,\n\t\t-0.7722140551, 0.6353624463, 0.0000000000, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 1.0000000000, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect2 = mat4( 1.0000000000, 0.0000000000, 0.0000000000, 0.0000000000,\n\t\t0.0000000000, 0.0000000596, 0.9999999404, 0.0000000000,\n\t\t0.0000000000, 0.9999999404, 0.0000000596, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect3 = mat4( 0.0000000596, 0.0000000000, 0.9999999404, 0.0000000000,\n\t\t0.0000000000, 1.0000000000, 0.0000000000, 0.0000000000,\n\t\t0.9999999404, 0.0000000000, 0.0000000596, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nvec4\t\tg_planeReflect1 = vec4( 0.9042572379, 0.4269880354, 0.0000000000, -0.0000000000 );\nvec4\t\tg_planeReflect2 = vec4( 0.0000000000, 0.7071067095, -0.7071067095, -0.0000000000 );\nvec4\t\tg_planeReflect3 = vec4( 0.7071067095, 0.0000000000, -0.7071067095, -0.0000000000 );\n*/\n////////////////////////////////////////////////////////////////////////////////////////////////////\n/*\nfloat\t\tg_fScale = 1.2904082537;\nmat4\t\tg_matIterator1 = mat4( -0.3646572828, 0.9311122894, 0.0074063838, 0.0000000000,\n\t\t-0.0447721779, -0.0095884204, -0.9989511967, 0.0000000000,\n\t\t-0.9300647974, -0.3646064103, 0.0451844335, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matIterator2 = mat4( -0.9642101526, 0.2154158503, 0.1545774937, -0.2313748300,\n\t\t-0.2602479458, -0.6574847102, -0.7070957422, -0.2313748300,\n\t\t-0.0506872721, -0.7220175266, 0.6900154948, -0.2313748300,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect1 = mat4( 0.6954619288, 0.5134597421, 0.5026844740, 0.0000000000,\n\t\t0.5134597421, 0.1342924237, -0.8475401998, 0.0000000000,\n\t\t0.5026844740, -0.8475401998, 0.1702459455, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect2 = mat4( 0.9156999588, -0.2325981706, 0.3277065754, 0.0000000000,\n\t\t-0.2325981706, 0.3582217693, 0.9041985869, 0.0000000000,\n\t\t0.3277065754, 0.9041985869, -0.2739214897, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect3 = mat4( 0.9881091714, -0.0695694163, 0.1371143162, 0.0000000000,\n\t\t-0.0695694163, 0.5929713249, 0.8022125959, 0.0000000000,\n\t\t0.1371143162, 0.8022125959, -0.5810803175, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nvec4\t\tg_planeReflect1 = vec4( -0.3902166486, 0.6579162478, 0.6441094875, -0.0000000000 );\nvec4\t\tg_planeReflect2 = vec4( 0.2053046674, 0.5664707422, -0.7980982065, -0.0000000000 );\nvec4\t\tg_planeReflect3 = vec4( -0.0771064758, -0.4511256218, 0.8891232610, -0.0000000000 );\n*/\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\nfloat\t\tg_fScale = 1.2904082537;\nmat4\t\tg_matIterator1 = mat4( -0.6081312299, -0.7035965919, 0.3675977588, 0.0000000000,\n\t\t0.5897225142, -0.0904228687, 0.8025279045, 0.0000000000,\n\t\t-0.5314166546, 0.7048230171, 0.4699158072, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matIterator2 = mat4( -0.7798885703, 0.6242666245, -0.0454343557, -0.2313748300,\n\t\t0.0581589043, 0.0000002980, -0.9983071089, -0.2313748300,\n\t\t-0.6232098937, -0.7812111378, -0.0363065004, -0.2313748300,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect1 = mat4( 0.9998783469, -0.0103046382, -0.0117080826, 0.0000000000,\n\t\t-0.0103046382, 0.1270489097, -0.9918430448, 0.0000000000,\n\t\t-0.0117080826, -0.9918430448, -0.1269274950, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect2 = mat4( 0.7935718298, -0.0946179554, 0.6010749936, 0.0000000000,\n\t\t-0.0946179554, 0.9566311240, 0.2755074203, 0.0000000000,\n\t\t0.6010749936, 0.2755074203, -0.7502027750, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nmat4\t\tg_matReflect3 = mat4( -0.7127467394, -0.5999681950, 0.3633601665, 0.0000000000,\n\t\t-0.5999681950, 0.7898335457, 0.1272835881, 0.0000000000,\n\t\t0.3633601665, 0.1272835881, 0.9229129553, 0.0000000000,\n\t\t0.0000000000, 0.0000000000, 0.0000000000, 1.0000000000 );\nvec4\t\tg_planeReflect1 = vec4( 0.0077987094, 0.6606628895, 0.7506421208, -0.0000000000 );\nvec4\t\tg_planeReflect2 = vec4( 0.3212694824, 0.1472563744, -0.9354685545, -0.0000000000 );\nvec4\t\tg_planeReflect3 = vec4( -0.9254043102, -0.3241653740, 0.1963250339, -0.0000000000 );\n\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\nmat3 rot3xy( vec2 angle )\n{\n\tvec2 c = cos( angle );\n\tvec2 s = sin( angle );\n\t\n\treturn mat3(\n\t\tc.y,\t\t-s.y,\t\t0.0,\t\n\t\ts.y * c.x,\tc.y * c.x,\t-s.x,\n        s.y * s.x,\tc.y * s.x,\tc.x\t\t\n\t);\n}\n\nvec4 DE1( in vec4 v )\n{\n\tfloat fR = dot( v.xyz, v.xyz );\n\tvec4 q;\n\tint k = 0;\n\tvec3 vO = vec3( 0.0, 0.0, 0.0 );\n\n\tfor ( int i = 0; i < 40; i++ )\n    {\n        q = v*g_matIterator1;\n        v.xyz = q.xyz;\n\n\t\tif ( dot( v, g_planeReflect1 ) < 0.0 )\n\t\t{\n            q = v*g_matReflect1;\n\t\t\tv.xyz = q.xyz;\n\t\t\tvO.x += 1.0;\n\t\t}\n\t\t\n\t\tif ( dot( v, g_planeReflect2 ) < 0.0 )\n\t\t{\n            q = v*g_matReflect2;\n\t\t\tv.xyz = q.xyz;\n\t\t\tvO.y += 1.0;\n\t\t}\n\t\t\n\t\tif ( dot( v, g_planeReflect3 ) < 0.0 )\n\t\t{\n            q = v*g_matReflect3;\n\t\t\tv.xyz = q.xyz;\n\t\t\tvO.z += 1.0;\n\t\t}\n\n\t\tq = v*g_matIterator2;\n        v.xyz = q.xyz;\n\n\t\tv.xyz = v.xyz*g_fScale;\n\t\tfR = dot( v.xyz, v.xyz );\n        k = i;\n\t}\n\n\treturn vec4( vO, ( sqrt( fR ) - 2.0 ) * pow( g_fScale, -float(k+1) ) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 vRayOrig = vec3( -3.0 - sin( iTime * 0.1 ), 0.0, 0.0 );\n    vec2 vUV = (fragCoord.xy- iResolution.xy*0.5) / iResolution.x;\n    float fL = length( vUV );\n    vUV /= fL;\n    vUV *= 1.0-pow( 1.0-fL, 0.7 );\n    vec3 vRayDir = vec3( 1.0, vUV );\n    \n    mat3 rot = rot3xy( vec2( 0.0, iTime * 0.1 ) );\n\tvRayDir = rot * vRayDir;\n\tvRayOrig = rot * vRayOrig;\n    \n    vRayDir = normalize( vRayDir );\n    \n   \tconst float fRadius = 2.0;\t\n\tfloat b = dot( vRayDir, vRayOrig ) * 2.0;\n\tfloat c = dot( vRayOrig, vRayOrig ) - fRadius*fRadius;\t\n\tfloat ac4 = 4.0 * c;\n\tfloat b2 = b*b;\n\t\t\n\tfragColor.a = 1.0;\n    fragColor.rgb = -vRayDir*0.2+0.8;\n    fragColor.rgb = pow( fragColor.rgb, vec3( 0.9, 0.8, 0.5 ) );\n    fragColor.rgb *= 1.0-fL;\n\tif ( b2 - ac4 <= 0.0 )\n\t{\t\t\n        return;\n\t}\n    \n    float root = sqrt( b2-ac4 );\n\tfloat at1 = ( -b - root ) / 2.0;\n\tfloat at2 = ( -b + root ) / 2.0;\n\n\tat1 = max( 0.0, at1 );\n    \n    \n    float t = at1;\n\tvec4 v = vec4( vRayOrig + vRayDir * t, 1.0 );\n\tvec4 vDE = vec4( 0.0, 0.0, 0.0, 0.0 );\n\tfloat fEpsilon = 0.0;\n\n    float fEpsilonHelper = 1.0/iResolution.x;\n    \n\tfor ( int k = 0; k < 100; k++ )\n\t{\n\t\tvDE = DE1( v );\n\t\tt += vDE.w;\n\t\tv.xyz = vRayOrig + vRayDir * t;\n\n\t\tfEpsilon = fEpsilonHelper * t;\n\t\t\n\t\tif ( vDE.a < fEpsilon )\n\t\t{\n\t\t\tbreak;\n\t\t}\n\t\tif ( t > at2 )\n\t\t{\n\t\t\treturn;\n\t\t}\n\t}\n\n    vec4 vOffset = vec4( fEpsilon*1.5, 0.0, 0.0, 0.0 );\n\tvec4 vNormal;\n\tvNormal.x = DE1( v + vOffset.xyzw ).w - DE1( v - vOffset.xyzw ).w;\n\tvNormal.y = DE1( v + vOffset.yxzw ).w - DE1( v - vOffset.yxzw ).w;\n\tvNormal.z = DE1( v + vOffset.zyxw ).w - DE1( v - vOffset.zyxw ).w;\n\tvNormal.w = 0.0;\n\tvNormal.xyz = normalize( vNormal.xyz );\n    \n    vec4 vReflect = vec4( 0.0, 0.0, 0.0, 0.0 );\n\tvReflect.xyz = reflect( vRayDir, vNormal.xyz );\n\n\tvec2 vOccRefl = vec2( 0.0, 0.0 );\n\t{\t\n\t\tfloat fMul = 2.0;\n\t\tfloat fMulMul = pow( 2.0, 9.0/10.0 ) * pow( fEpsilon, 1.0/10.0 ) * 0.5;\n\t\tfloat fW = 0.0;\n\t\tfor ( int k = 0; k < 10; k++ )\n\t\t{\n\t\t\tvOccRefl.x += DE1( v + vNormal * fMul ).w / fMul;\n\t\t\tvOccRefl.y += DE1( v + vReflect * fMul ).w / fMul;\n\t\t\tfMul *= fMulMul;\n\t\t}\n\t\tvOccRefl /= 10.0;\n\t}\n\tfragColor.xyz = vec3( vOccRefl.x * vOccRefl.y );\n\tfragColor.xyz *= (vNormal.xyz*0.5+0.5)*(1.0-fragColor.x) + vec3( 1.0, 1.0, 1.0 ) * fragColor.x;\n    fragColor.rgb = pow( fragColor.rgb, vec3( 0.9, 0.8, 0.7 ) );\n    //fragColor.rgb = 1.0-exp( -fragColor.rgb*2.0 );\n\tfragColor.rgb *= (1.0-fL)*1.2;    \n}","name":"Image","description":"","type":"image"}]}