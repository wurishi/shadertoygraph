{"ver":"0.1","info":{"id":"dsGyRw","date":"1695881515","viewed":33,"name":"Fork Wave 4","username":"Qwer643","description":"Continues of https://www.shadertoy.com/view/DsVyRW","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["2d","wave","automata","cellular"],"hasliked":0,"parentid":"DsVcRW","parentname":"Wave bug 2"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// EPILEPTIC WARNING!!!\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = fragCoord.xy / iResolution.xy;    \n    vec4 draw = texture(iChannel0, uv);\n    fragColor = draw;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    \n    //mouse input\n    float mousePressed = vec4(iMouse / iResolution.x).z;\n    vec2 mousePos = vec2(iMouse)/vec2(iResolution);\n    \n    vec2 uv = fragCoord.xy / iResolution.xy;    \n    vec2 pix = vec2(1.0, 1.0) / iResolution.xy;\n    float screen = iResolution.x * iResolution.y;\n     \n    vec4 previous = texture(iChannel0, uv);\n    \n    // neighbours - average energy\n    float avg = texture(iChannel0, uv + vec2(pix.x, 0.0)).r;\n    avg += texture(iChannel0, uv + vec2(-pix.x, 0.0)).r;    \n    avg += texture(iChannel0, uv + vec2(0.0, pix.y)).r;\n    avg += texture(iChannel0, uv + vec2(0.0, -pix.y)).r;    \n    avg /= 4.0;\n    \n    // blue - 0>1, remap -0.5>0.5\n    float spd = (previous.b - 0.5); //old spd\n    float add = (avg - previous.r); //energy diff \n    \n    spd += add; //new spd\n    \n    // save to next frame\n    previous.r += spd; //energy\n    previous.b = (spd + 0.5); //-0.5>0.5 remap 0>1 \n    \n    fragColor = previous;\n    fragColor.g = fragColor.r * 0.3; //for beauty\n    \n    // initial wave    \n    if (iFrame < 2){\n    \n       float val = distance(uv, vec2(0.5));\n       fragColor.b += 1.0 - smoothstep(0.05, val, 0.4);\n    } \n    \n    if(mousePressed > 0.0 ) // button is down\n    {\n       float val = distance(uv, mousePos);\n       fragColor.b += 1.0 - smoothstep(0.01, val, 0.9);\n    }\n}","name":"Buffer A","description":"","type":"buffer"}]}