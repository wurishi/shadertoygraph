{"ver":"0.1","info":{"id":"ldVBW1","date":"1528741109","viewed":444,"name":"Another 4(+fx) channel mixer","username":"pthextract","description":"4 channel mixer\nharmony fast arpeggio not working too well \nmusic/sounds did remind me of \"alone in the dark\" :)\none of a kind cthulhu horror game\n\nbut not sure it reminds of that anymore\ni also added some effect channels, they are not visible","likes":18,"published":1,"flags":8,"usePreview":0,"tags":["oscilloscope","mixer","4channel"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(  out vec4 o, in vec2 i )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = i/iResolution.xy; \n    int samp;\n    vec2 muv=uv*4.;\n    vec2 ouv=uv;\n    uv=fract(muv);\n    float time=mod(iTime,32.);\n    \n    // Output to screen\n       \n    if (muv.y>3.)\n    \tif (muv.x>3.)\n        \t o = .15+.9-vec4(length(uv.y+.5*chan4(time-.5+uv.x/20.).yy-.5)*22.,1,1,0);\n    \telse\n    \tif (muv.x>2.)\n        \t o = .15+.9-vec4(1,1,length(uv.y+.5*chan3(time-.5+uv.x/20.)-.5)*22.,0);\n     \telse\n    \tif (muv.x>1.)\n    \t\t{float v=length(uv.y+.5*chan2(time-.5+uv.x/20.)-.5)*22.;\n     \t\to = .15+.9-vec4(v,v,1,0);}\n    \telse\n    //if (muv.x>0.)\n         o = .15+.9-vec4(1,length(uv.y+.5*chan1(time-.5+uv.x/20.).xx-.5)*22.,1,0);\n    \n    else\n    {muv/=4.;\n    uv=ouv;\n     o = .9-vec4(length(muv.y+.5*mainSound( \n     samp,time-.5+uv.x/4.)-.375)*33.);}\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"//1/1\t9/8\t81/64\t4/3\t3/2\t27/16\t243/128\t2/1\n\n//hash22 From Dave Hoskins\nvec2 hash22(vec2 p)\n{\n\tvec3 p3 = fract(vec3(p.xyx) * 3.);\n    p3 += dot(p3.zxy, p3.yzx+19.19);\n    return fract(vec2((p3.x + p3.y)*p3.z, (p3.x+p3.z)*p3.y));\n}\n\n\nvec2 harmony(vec3 pitch, float halflife, float switchtemp,float t)\n{return \n    smoothstep(0.,0.01,t)*\n    \n    (\n     smoothstep(0.,0.02,fract(t*switchtemp))* \n     (1.-smoothstep(0.32,0.34,fract(t*switchtemp)))*\n        vec2(sin(2.*acos(-1.)*pitch.x*t)*pow(0.5,(t/(halflife*.2))) )\n    +\n    smoothstep(0.32,0.034,fract(t*switchtemp))* \n     (1.-smoothstep(0.65,0.67,fract(t*switchtemp)))*\n        vec2(sin(2.*acos(-1.)*pitch.y*t)*pow(0.5,(t/(halflife*.2))) )\n    +\n   smoothstep(0.65,0.67,fract(t*switchtemp))* \n     (1.-smoothstep(.97,0.99,fract(t*switchtemp)))*\n        vec2(sin(2.*acos(-1.)*pitch.z*t)*pow(0.5,(t/(halflife*.2))) )\n     )\n    ;}\n\nvec2 note(float pitch, float halflife, float t)\n{return \n   smoothstep(0.,0.01,t)//fadein to aavoid clicks\n    *vec2(sin(2.*acos(-1.)*pitch*(t))*pow(0.5,(t/(halflife*.2)) ) );}\n\nvec2 noise(float pitch, float halflife, float t)\n{return \n   smoothstep(0.,0.001,t)\n    *vec2(sin(hash22(vec2(t,pitch))+t*t*t*pitch*100.+pitch*t*t*100.)*pow(0.5,(t/(halflife*.2)) ) );}\n\nvec2 noise2(float pitch, float halflife, float t)\n{return \n   smoothstep(0.,0.001,t)\n    *vec2(sin(hash22(vec2(t,pitch)))*pow(0.5,(t/(halflife*.2)) ) );}\n\n\nvec2 chan1(float time)\n{return vec2(.6,.3)* (  vec2( sin(2.*acos(-1.)*216.0*time)*exp(-9.0*mod(time,.5) ) )\n         + vec2( sin(2.*acos(-1.)*432.0*time)*exp(-9.0*mod(time,2.) ) )\n            );}\nvec2 chan2(float time)\n{float delay=8.;\n if (time<8.)\n    return 1.*harmony(vec3(432.*1.5,432.,432.*9.*9./8./8.),1.,8.,time)+\n        .5*harmony(vec3(666.*1.5,666.,666.*9.*9./8./8.),1.,8.,time-1.)+\n        .5*harmony(vec3(222.*1.5,222.,222.*9.*9./8./8.),1.,8.,time-2.)+\n        .5*harmony(vec3(666.*1.5,666.,666.*9.*9./8./8.),1.,8.,time-2.5)+\n        .5*harmony(vec3(888.,999.,1333),1.,8.,time-5.)+\n      \n      \n         \n       2.*note(333.,.5,time-.5)//volume*note(pitch,halflife,time(clocktime)-delay(triggertime));\n       +note(666.,1.5,time-.2)\n       +note(999.,1.5,time-.8)\n       +note(1111.,1.5,time-1.2) \n       +note(1777.,1.2,time-1.7)\n        //+noise(222.,.05,time-2.5)\n    \n       \n       \n        +noise2(50.*time,.5,time-1.)\n        +noise2(50.*time,.5,time-3.)\n        +1.5*noise2(.1*time,1.,time-4.)\n        //+noise2(50.*time,.1,time-2.75)\n        +noise2(50.*time,.1,time-1.5)\n        \n        /*+noise2(50.*time,.1,time-3.5)\n        +noise2(50.*time,.1,time-3.75)\n        +noise2(50.*time,.1,time-4.5)\n        \n        +noise2(50.*time,.5,time-5.)\n        +noise2(50.*time,.5,time-6.)\n        +noise2(50.*time,.5,time-7.)\n        +noise2(50.*time,.5,time-8.)\n        +noise2(50.*time,.1,time-6.5)\n        +noise2(50.*time,.1,time-5.5)/*\n        +noise2(50.*time,.1,time-7.5)\n        +noise2(50.*time,.1,time-7.75)\n        +noise2(50.*time,.1,time-8.5)*/\n     \n       +1.*note(222.,1.5,time-.8)\n       +1.*note(666.,1.5,time-.5)\n       +1.*note(999.,1.5,time-1.1)\n       +1.*note(1111.,1.5,time-1.5)\n       +.8*note(1333.,1.2,time-2.5)\n      \n  \n         \n +1.*note(1050.,1.2,time-3.5);\n  else return   \n      .5*harmony(vec3(432.*1.5,432.,432.*9.*9./8./8.),1.,6.,time-8.)+\n        .5*harmony(vec3(1333.*1.5,1333.,1333.*9.*9./8./8.),2.,3.,time-12.)+ \n     \n     2.*note(333.,.5,time-.5-delay)\n       +1.*note(666.,1.5,time-.2-delay)\n       +1.*note(999.,1.5,time-.8-delay)\n       +1.*note(1111.,1.5,time-1.2-delay)\n       +.8*note(1777.,1.2,time-1.7-delay)\n     +\n       +1.*note(222.,1.5,time-.8-delay)\n       +1.*note(666.,1.5,time-.5-delay)\n       +1.*note(999.,1.5,time-1.1-delay)\n       +1.*note(1111.,1.5,time-1.5-delay)\n       +1.*note(1333.,1.2,time-2.5-delay)\n +1.*note(850.+fract(time*10.)*30.,1.2,time-13.5)-.2*cos(time);}\n\nvec2 chan3(float time)\n{return (.2*cos(time)+  vec2( sin(2.*acos(-1.)*108.0*time)*exp(-9.0*mod(time,1.) ) )\n         + vec2( sin(2.*acos(-1.)*54.0*time)*exp(-9.0*mod(time,4.) ) )\n            );}\n\n\n\nvec2 chan4(float time)\n{return .6*vec2(  \n    sin(2.*acos(-1.)*864.0*(time+.005) )*exp(-9.0*mod(time+.005,1.5) ) ,\n       \n                sin(2.*acos(-1.)*864.0*time)*exp(-9.0*mod(time,1.5) ) \n)\n         + \n    vec2( sin(2.*acos(-1.)*432.0*time)*exp(-9.0*mod(time,2.) ) ,\n         sin(2.*acos(-1.)*432.0*(time+.005) )*exp(-9.0*mod(time+.005,2.) ) \n               \n               )\n            ;}\n\nvec2 mainSound( in int samp, float timer )\n    \n{   float time=mod(timer,32.);\n    vec2 ms=\n    \n         + chan1(time)+float(timer>32.)*vec2(.1,.2)*chan1(time-.26)\n         + chan2(time)+float(timer>32.)*vec2(.3,.2)*chan2(time-.26)\n         + chan3(time)+float(timer>32.)*vec2(.1,.1)*chan3(time-.34)\n         + chan4(time)+float(timer>32.)*vec2(.1,.1)*chan4(time-.34);\n    \n        \n        if (time>16.)//warped time effect\n         {ms+=chan1(time+cos(acos(-1.)*time) )\n             +.4*chan1(time+sin(acos(-1.)*time) )\n         + chan4(time+cos(acos(-1.)*time) )\n             +.1*chan4(time+sin(acos(-1.)*time) );}\n    \n       ;\n return   .2*ms;\n}","name":"Common","description":"","type":"common"},{"inputs":[],"outputs":[],"code":"//sound code is in the common folder","name":"Sound","description":"","type":"sound"}]}