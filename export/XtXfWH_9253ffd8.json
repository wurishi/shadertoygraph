{"ver":"0.1","info":{"id":"XtXfWH","date":"1511716361","viewed":250,"name":"The Floor is Music","username":"slerpy","description":"Inspired by a super old Oculus Rift demo, which is called \"World of Music\" or something like that.\n\nI was sadly unable to find the website of the original, but I found this video on youtube:\nhttps://www.youtube.com/watch?v=rz8CUdQND3k (Warning: German)","likes":4,"published":1,"flags":96,"usePreview":0,"tags":["3d","simple","fft","music","procedual"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define TAU 6.28318530718\n\n#define SCALE vec3(3.0, 0.6, 8.0)\n\n#define FAR dot(SCALE,vec3(1.))\n#define ITER 150\n#define STEP .5\n\nmat2 rot(float a)\n{\n    float sa=sin(a), ca=cos(a);\n    return mat2(ca,sa,-sa,ca);\n}\n\nfloat map(vec3 p)\n{\n    p.x = -p.x;\n    vec2 tuv = p.xz/SCALE.xz + vec2(.5);\n    float lv = p.y + SCALE.y * (1.-texture(iChannel0, -tuv).r);\n    \n    vec3 t = vec3((2. * abs(tuv-.5) - 1.) * SCALE.xz, -p.y-SCALE.y);\n    float pl = max(max(t.x, t.y), t.z);\n    \n    return max(lv, pl);\n}\n\n\nfloat tracer(vec3 ro, vec3 rd)\n{\n\tfloat t = .0;\n    for(int i=0;i<ITER;i++){\n        float m = map(ro+rd*t);\n        if(m>FAR)return 1e+31;\n        t += STEP * m;\n    }\n\treturn t;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec3 rd = normalize(vec3(2.*fragCoord.xy-iResolution.xy, 3.*iResolution.y));\n    vec3 ro = vec2(.2, 0.).yxy;\n    rd.yz *= rot(-.25);\n\n    float t = tracer(ro,rd);\n    \n\tfragColor = vec4(1.-exp(-t/4.));\n    fragColor.w = 1.;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4d2SR1","filepath":"https://soundcloud.com/monstercat/unlike-pluto-everything-black","previewfilepath":"https://soundcloud.com/monstercat/unlike-pluto-everything-black","type":"musicstream","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define STEP 1./iResolution.y\n//#define STEP .002\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n  \tif(fragCoord.y <= 1.0) fragColor += pow(texture(iChannel1, vec2(uv.x, 0.)).r, 1.5); \n    else fragColor = texture(iChannel0, vec2(uv.x,uv.y-STEP));\n}","name":"Buf A","description":"","type":"buffer"}]}