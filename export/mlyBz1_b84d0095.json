{"ver":"0.1","info":{"id":"mlyBz1","date":"1701829734","viewed":43,"name":"Cheaper Auroras","username":"jaeba","description":"Cheaper version of Auroras by nimitz","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["procedural","aurora","atmosphere","weather"],"hasliked":0,"parentid":"XtGGRt","parentname":"Auroras"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Cheaper Auroras by jaeba 2023 (@jaeba.fx)\n\n// Fork of Auroras by nimitz 2017 (twitter: @stormoid)\n\n#define time iTime\n\nfloat triNoise2d(in vec2 p, float spd)\n{\n    float z=1.8;\n    float z2=2.5;\n\tfloat rz = 0.;\n    vec2 bp = p;\n\tfor (float i=0.; i<2.; i++ )\n\t{\n        vec2 dg = sin(bp*3.85 + spd*iTime)*.75;\n        p -= dg/z2;\n        bp *= 1.3;\n        z2 *= .45;\n        z *= .42;\n\t\tp *= 1.21 + (rz-1.0)*.02;\n        \n        rz += (0.6 + 0.8 * sin(10.0*p.x+2.0*p.y))*z;\n\t}\n    return clamp(1./pow(rz*29., 1.3),0.,.55);\n}\n\nvec4 aurora(vec3 ro, vec3 rd)\n{\n    vec4 col = vec4(0);\n    \n    for(float i=0.0; i < 30.0; i++) {\n        float pt = ((.8+pow(i,1.4)*.002)-ro.y)/(rd.y*2.+0.3);\n    \tvec3 bpos = ro + pt*rd;\n        vec2 p = bpos.zx;\n        float rzt = triNoise2d(1.0*p, 0.6);\n        vec4 col2 = vec4(0,0,0, rzt);\n        col2.rgb = (sin(1.-vec3(2.15,-.5, 1.2)+1.0*i*0.043)*0.5+0.5)*rzt;\n        col += col2*exp2(-i*0.065 - 2.5)*smoothstep(0.,5., i);\n    }\n    \n    col *= (clamp(rd.y*05.+.4,0.,1.));\n    \n    return col*2.0;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 q = fragCoord.xy / iResolution.xy;\n    vec2 p = q - 0.5;\n\tp.x*=iResolution.x/iResolution.y;\n    \n    vec3 ro = vec3(0,0,-6.7);\n    \n    vec3 col = vec3(0.);\n    vec3 brd = vec3(0.5*p, 1.0);\n       \n    vec4 aur = smoothstep(0.,1.5,aurora(ro, brd));\n    col = col*(1.-aur.a) + aur.rgb;\n    \n    //col = vec3(triNoise2d(p, 0.6));\n\n\tfragColor = vec4(col, 1.);\n}\n","name":"Image","description":"","type":"image"}]}