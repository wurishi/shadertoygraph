{"ver":"0.1","info":{"id":"MtjBRt","date":"1516896813","viewed":204,"name":"LinearVsNonlinear","username":"TimothyLottes","description":"Linear vs Nonlinear ","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["linearvsnonlinear"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//\n// QUICK EXAMPLE SHOWING VISUAL DIFFERENCE OF LINEAR VS NON-LINEAR BLENDING\n//\n// Left side is linear blending\n//\n// Right side is non-linear blending \n//   (see artifact of dark line where red and green meet)\n//\n\n#define F1 float\n#define F2 vec2\n#define F3 vec3\n#define F4 vec4\n//--------------------------------------------------------------\nF1 Linear1(F1 c){return(c<=0.04045)?c/12.92:pow((c+0.055)/1.055,2.4);}\nF3 Linear3(F3 c){return F3(Linear1(c.r),Linear1(c.g),Linear1(c.b));}\nF1 Srgb1(F1 c){return(c<0.0031308?c*12.92:1.055*pow(c,0.41666)-0.055);}\nF3 Srgb3(F3 c){return F3(Srgb1(c.r),Srgb1(c.g),Srgb1(c.b));}\n\n\n#define XX 64.0\n#define YY 32.0\n\n// Raster one sample with output in non-linear space.\nF2 RasterS(F2 uv2){\n // Rotate\n F1 ang=(1.0/75.0)*2.0*3.14159;\n uv2.xy=F2(dot(uv2.xy,F2(cos(ang), sin(ang))),\n           dot(uv2.xy,F2(sin(ang),-cos(ang))));\n // Edge\n F2 r;\n F1 scale=8.0;\n r.x=fract(uv2.x*scale)>0.5?0.0:1.0;\n r.y=1.0-r.x;\n return r;}\n\n// Raster one sample with conversion to linear output.\n// This would be required if RasterS() returned something other than 1.0 and 0.0.\nF2 RasterSL(F2 uv2){\n F2 r;\n r=RasterS(uv2);\n return F2(Linear1(r.x),Linear1(r.y));}\n\n// 4xSGSSAA box filter non-linear average\nF2 RasterP(F2 uv2){return \n RasterS(uv2+(F2(-2.0,-6.0)/F2(16.0,16.0))/F2(XX,YY))*0.25+\n RasterS(uv2+(F2( 6.0,-2.0)/F2(16.0,16.0))/F2(XX,YY))*0.25+\n RasterS(uv2+(F2(-6.0, 2.0)/F2(16.0,16.0))/F2(XX,YY))*0.25+\n RasterS(uv2+(F2( 2.0, 6.0)/F2(16.0,16.0))/F2(XX,YY))*0.25;}\n\n// 4xSGSSAA box filter linear average\nF2 RasterPL(F2 uv2){F2 r=\n RasterSL(uv2+(F2(-2.0,-6.0)/F2(16.0,16.0))/F2(XX,YY))*0.25+\n RasterSL(uv2+(F2( 6.0,-2.0)/F2(16.0,16.0))/F2(XX,YY))*0.25+\n RasterSL(uv2+(F2(-6.0, 2.0)/F2(16.0,16.0))/F2(XX,YY))*0.25+\n RasterSL(uv2+(F2( 2.0, 6.0)/F2(16.0,16.0))/F2(XX,YY))*0.25;\n r.x=Srgb1(r.x);\n r.y=Srgb1(r.y);\n return r;}\n\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord) {\n F2 uv=fragCoord.xy/iResolution.xy;\n // Make \"low res\"\n F2 uv2=uv;\n uv2.x*=XX;\n uv2.y*=YY;\n uv2.x=floor(uv2.x)+0.25;\n uv2.y=floor(uv2.y)+0.25;\n uv2.x/=XX;\n uv2.y/=YY;\n // Line\n if(abs(uv.x-0.5)<0.01){fragColor.rgba=F4(0.0,0.0,0.0,1.0);}\n // Split screen\n else if(uv.x<0.5){\n  fragColor.ba=F2(0.0,1.0);\n  fragColor.rg=RasterPL(uv2);  \n }else{\n  fragColor.ba=F2(0.0,1.0);\n  fragColor.rg=RasterP(uv2);}}","name":"Image","description":"","type":"image"}]}