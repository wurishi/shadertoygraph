{"ver":"0.1","info":{"id":"3tVGWy","date":"1579792662","viewed":369,"name":"rave cam","username":"fordc","description":"ff","likes":2,"published":1,"flags":66,"usePreview":0,"tags":["webcam"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sfGRn","filepath":"/media/a/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","previewfilepath":"/media/ap/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"lljGz1","filepath":"https://soundcloud.com/drip-133/133-jel-the-digital-dream-girl?in=soundcloud-circuits/sets/tunnel","previewfilepath":"https://soundcloud.com/drip-133/133-jel-the-digital-dream-girl?in=soundcloud-circuits/sets/tunnel","type":"musicstream","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//iChannel1 --> Lichen\n//iChannel2 --> Webcam\n//iChannel3 --> Soundcloud: https://soundcloud.com/drip-133/133-jel-the-digital-dream-girl?in=soundcloud-circuits/sets/tunnel\n\n// inspired by\n// https://www.shadertoy.com/view/XltfRl\n\n#define WATER_SPEED 5.\n//water current direction\n#define WATER_ROT 75.\n\nfloat sampleMusicA() {\n    return 0.6 * (\ntexelFetch( iChannel3, ivec2( 512., 0. ), 0).x +\ntexelFetch( iChannel3, ivec2( 512., 0. ), 0).x);\n}\n\nfloat sampleMusicB() {\n    return 0.6 * (\ntexture( iChannel3, vec2( 0.10, 0.20 ) ).x +\ntexture( iChannel3, vec2( 0.30, 0.25 ) ).x);\n}\n\nvec2 getWaterRotQuaternion() {\n    // float waterRot = clamp(WATER_ROT * sampleMusicB(), 0., 360.);\n    float radian = WATER_ROT*3.14159/180.;\n    return normalize(vec2(cos(radian),sin(radian)));\n}\n\nfloat desaturate(vec3 c) {\n    return (c.r+c.g+c.b)/5.;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    int tx = int(uv.x*512.0);\n    float waterSpeed = clamp(texelFetch(iChannel3, ivec2(uv.x*512., 0), 0).x, 0.5, 50.);\n    \n    vec2 p = fragCoord.xy/iResolution.xy;\n   \n\tvec4 col = texture(iChannel2, p);\n\n    vec2 waterRotation = getWaterRotQuaternion();\n    vec2 q = p;\n       \n    q = p+desaturate(texture(iChannel1, p+iTime*waterRotation*waterSpeed/8.).rgb)/10.;\n    col.r = texture(iChannel2, q).r ;\n    col.g = texture(iChannel2, q).g * sin(1.-sampleMusicB());\n    col.b = texture(iChannel2, q).b * tan(sampleMusicB());\n\n    fragColor = pow(col,vec4(1./1.1));\n}","name":"Image","description":"","type":"image"}]}