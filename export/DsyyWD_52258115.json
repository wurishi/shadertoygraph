{"ver":"0.1","info":{"id":"DsyyWD","date":"1696095667","viewed":60,"name":"Tunnel with rainbows","username":"immibis","description":"same as \"tunnel\" but the white section is changed to a rainbow.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["tunnel"],"hasliked":0,"parentid":"DsGyWD","parentname":"Tunnel 656342"},"renderpass":[{"inputs":[{"id":"4sfGRn","filepath":"/media/a/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","previewfilepath":"/media/ap/fb918796edc3d2221218db0811e240e72e340350008338b0c07a52bd353666a6.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 xy = fragCoord/iResolution.xy*vec2(2)-vec2(1);\n    \n    //if(length(xy)>0.333) {\n        //xy = normalize(xy)/length(xy);\n    //} else {\n      //  xy *= 3.0;\n    //}\n    \n    vec2 baseXY = xy;\n    \n    float fracttime = (iTime*2.5 - floor(iTime*2.5));\n    float rottime = exp(fracttime)+exp(-fracttime);\n    \n    \n    vec2 cur = vec2(0,0);\n    float z = 0.0;\n    int whites=0;\n    for(int i = 0; i < 200; i++) {\n        cur += xy*0.1;\n        xy -= vec2(sin(iTime)*0.01,cos(iTime*3.0)*0.005+cos(z+iTime)*0.01);\n        z += 0.05;\n        if(length(vec2(cur.x/(2.0+sin(iTime*1.5)), cur.y/(2.0+cos(iTime*1.0+0.25)))) > 1.0) break;\n        \n        if(mod(z/20.0+iTime*0.15,1.0)>0.8) {\n            whites+=1;\n        }\n        \n    }\n    \n    vec4 col = texture(iChannel0,vec2(atan(xy.x,xy.y),z/20.0)+vec2(rottime/20.0+cos(z*0.05),iTime*0.15));\n    \n    fragColor = vec4(col.rgb*hsv2rgb(vec3(z*0.05+iTime*0.45,sin(z+iTime*0.15)*0.25+0.75,1)),1);\n    \n    fragColor.rgb = mix(fragColor.rgb,hsv2rgb(vec3(iTime+z*0.05,1.0,1.0)),1.0-exp(-float(whites)/10.0));\n}","name":"Image","description":"","type":"image"}]}