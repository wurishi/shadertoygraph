{"ver":"0.1","info":{"id":"tlKXRW","date":"1582362851","viewed":160,"name":"fast compofiller","username":"eimink","description":"super fast compofiller for fast effect compo at assembly winter 2020. 3rd place.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["voronoi","fast","scanlines"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float rand () {\n    return fract(sin(iTime)*1e7);\n}\n\nvec2 hash( vec2 p )\n{\n\t// Dave Hoskin's hash as in https://www.shadertoy.com/view/4djSRW\n\tvec3 p3 = fract(vec3(p.xyx) * vec3(.1031, .1030, .0973));\n    p3 += dot(p3, p3.yzx+19.19);\n    vec2 o = fract(vec2((p3.x + p3.y)*p3.z, (p3.x+p3.z)*p3.y));\n\treturn o;\n}\n\nfloat hash12(vec2 p){\n\treturn fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 voro(in vec2 x)\n{\n\t// Tomasz Dobrowolski's fast voronoi with 3x3 scan as in https://www.shadertoy.com/view/llG3zy\n\tvec2 n = floor(x);\n\tvec2 f = fract(x);\n\tvec2 mr;\n\tfloat md = 8.0;\n\tfor( int j=-1; j <= 1; j++)\n\tfor( int i=-1; i <= 1; i++)\n\t{\n\t\tvec2 g = vec2(float(i),float(j));\n\t\tvec2 o = hash( n + g );\n        o = 0.5 + 0.5*sin( iTime + 2.2831*o );\n        vec2 r = g + o - f;\n        float d = dot(r,r);\n        if( d<md )\n        {\n            md = d;\n            mr = r;\n        }\n\t}\n\tmd = 8.0;\n    for( int j=-1; j<=1; j++ )\n    for( int i=-1; i<=1; i++ )\n    {\n        vec2 g = vec2(float(i),float(j));\n\t\tvec2 o = hash( n + g );\n        o = 0.5 + 0.5*sin( iTime + 6.2831*o );\n        vec2 r = g + o - f;\n\n        if( dot(mr-r,mr-r)>0.00001 )\n        md = min( md, dot( 0.5*(mr+r), normalize(r-mr) ) );\n    }\n    return vec3( md, mr );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = gl_FragCoord.xy / iResolution.xy;\n\tvec2 p = (fragCoord.xy-iResolution.xy)/iResolution.y;\n\tvec2 st = vec2(atan(p.x,p.y),length(p));\n\tp = vec2(st.x/0.2831+.5+(2.1*iTime),st.y);\n\tvec3 c = voro(6.*p*atan(iTime*0.01));\n\tvec3 col = c.x*3.*(sin(c.x)+.9)*vec3(p.y,c.x,sin(p.x));\n    vec4 fc = vec4(col,1.0);\n    float scanline = sin( uv.y * 1200.0 * rand())/30.0;\n    float v = iTime*0.152;\n    vec2 n = (fragCoord.xy * v + iTime * 1500. + 50.0);\n\tfc *= 1. - scanline - 0.1*hash12(n);\n    float vegDist = length(( 0.5 , 0.5 ) - uv);\n    fc *= 0.9 - vegDist * 0.6;\n    if (iTime > 60.) // Time limit for Fast Effect compo\n    {\n        fragColor = vec4(0.,0.,0.,0.);\n    }\n    else fragColor = fc;\n}","name":"Image","description":"","type":"image"}]}