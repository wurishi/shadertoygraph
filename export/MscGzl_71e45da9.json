{"ver":"0.1","info":{"id":"MscGzl","date":"1451637575","viewed":2780,"name":"Glitch Shader A","username":"Berkin","description":"Click to set the glitch boundary.","likes":48,"published":1,"flags":0,"usePreview":0,"tags":["postprocess","glitch"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"float GlitchAmount = 1.0;\n\nvec4 posterize(vec4 color, float numColors)\n{\n    return floor(color * numColors - 0.5) / numColors;\n}\n\nvec2 quantize(vec2 v, float steps)\n{\n    return floor(v * steps) / steps;\n}\n\nfloat dist(vec2 a, vec2 b)\n{\n    return sqrt(pow(b.x - a.x, 2.0) + pow(b.y - a.y, 2.0));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{   \n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    float amount = pow(GlitchAmount, 2.0);\n    vec2 pixel = 1.0 / iResolution.xy;    \n    vec4 color = texture(iChannel0, uv);\n    if (fragCoord.x < iMouse.x)\n    {\n        fragColor = color;\n        return;\n    }\n    float t = mod(mod(iTime, amount * 100.0 * (amount - 0.5)) * 109.0, 1.0);\n    vec4 postColor = posterize(color, 16.0);\n    vec4 a = posterize(texture(iChannel0, quantize(uv, 64.0 * t) + pixel * (postColor.rb - vec2(.5)) * 100.0), 5.0).rbga;\n    vec4 b = posterize(texture(iChannel0, quantize(uv, 32.0 - t) + pixel * (postColor.rg - vec2(.5)) * 1000.0), 4.0).gbra;\n    vec4 c = posterize(texture(iChannel0, quantize(uv, 16.0 + t) + pixel * (postColor.rg - vec2(.5)) * 20.0), 16.0).bgra;\n    fragColor = mix(\n        \t\t\ttexture(iChannel0, \n                              uv + amount * (quantize((a * t - b + c - (t + t / 2.0) / 10.0).rg, 16.0) - vec2(.5)) * pixel * 100.0),\n                    (a + b + c) / 3.0,\n                    (0.5 - (dot(color, postColor) - 1.5)) * amount);\n}","name":"","description":"","type":"image"}]}