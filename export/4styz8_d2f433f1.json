{"ver":"0.1","info":{"id":"4styz8","date":"1523457564","viewed":214,"name":"LearnHowToSee ;)","username":"goanautix","description":"everything connects to everything else\n___:___________:____::____9____\n9<-:33333333333:->9_::_9__1__9_\n9<-:__2___8___5:->9_::__5_3_2__\n9<-:1___4___7__:->9_::__7_6_4__\n9<-:66666666666:->9_::_9__8__9_\n___:___________:____::____9____\n124875 : 36 : 9\n\n","likes":3,"published":1,"flags":16,"usePreview":0,"tags":["musiksecretofuniversekeyinputdistanceoperationraytracesphere"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGzn","filepath":"/media/a/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","previewfilepath":"/media/ap/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","type":"music","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define eps 0.001\n#define SONG iChannel1\n#define HITRESULT true\n#define STRALL true\n#define SOUNDSIZE false\n#define SIZE 0.5\n#define SIZEOFFSET 0.4\n// HSV\n#define HUE 0.0\n#define SATURATION -0.8\n#define VOLUME 6.0\n// Press S to Strobe\n#define PWMSIZE 0.1 \n#define STRSPEED 55.0\nconst float PI = 3.14159265;\nconst float PIH = 1.57079633;\nconst float TAU = 6.28318531;\nconst float TAU10 = 62.8318531;\n\nconst float x  = (1.4142+eps)*1.1414;\nconst float xStart = 0.0;//7.0-x;\nconst float xEnd = 100.0;//7.0+x;\n\nfloat saw(float t){\n\treturn abs(2.0*mod(t,1.0)-1.0);\n}\nfloat pwm(float t, float a /* 0 - 2 */){\n \treturn ceil(clamp(sin(t)-1.0+a,0.0,1.0));   \n}\nvec3 hsv(float h, float s, float v){\n    return clamp((vec3(saw(h),saw(h+0.33),saw(h+0.66))+s)*v,0.0,1.0);\n}\nvec2 opU( vec2 d1, vec2 d2 ){\n\treturn (d1.x<d2.x) ? d1 : d2;\n}\nvec2 scene (vec3 p){\n    float s1 = 0.0;\n    float s2 = 0.0;\n    if(SOUNDSIZE){\n    \ts1 = texture(SONG, vec2(0.0,0.25)).x*0.5 + SIZEOFFSET;\n    \ts2 = 1.0-s1;\n    }else{\n     \ts1 = SIZE;\n     \ts2 = SIZE;\n    }\n    vec2 c = vec2(0.0);\n    if(texture(iChannel0, vec2(0.341176471, 0.25)).x > 0.5){\n\t\tvec2 pos = vec2(0.5,-0.5);\n    \tc = \t vec2(length(p-pos.xxy)-s1,1.0);\t//\t6\n    \tc =opU(c,vec2(length(p-pos.yyx)-s2,2.0));\t//\t3\n    \t\n    \tc =opU(c,vec2(length(p-pos.yxy)-s2,2.0));\t//\t1\n    \tc =opU(c,vec2(length(p-pos.yyy)-s1,1.0));\t//\t2\n    \tc =opU(c,vec2(length(p-pos.xyy)-s2,2.0));\t//\t4\n    \tc =opU(c,vec2(length(p-pos.xyx)-s1,1.0));\t//\t8 \n    \tc =opU(c,vec2(length(p-pos.yxx)-s1,1.0));\t//\t7\n    \tc =opU(c,vec2(length(p-pos.xxx)-s2,2.0));\t//\t5\n    }else{\n        vec4 pos = vec4(0.5, 0.25, 0.433012702, 0.0)*2.0;\n    \tc = \t vec2(length(p-vec3(pos.w,pos.x,pos.w ))-s1,1.0);\t//\t6\n    \tc =opU(c,vec2(length(p-vec3(pos.w,-pos.x,pos.w))-s2,2.0));\t//\t3\n    \t\n    \tc =opU(c,vec2(length(p-vec3(pos.x,-pos.y,pos.w))-s2,1.0));\t//\t1\n    \tc =opU(c,vec2(length(p-vec3(pos.y,pos.y,pos.x))-s1,2.0));\t//\t2\n    \tc =opU(c,vec2(length(p-vec3(-pos.y,-pos.y,-pos.x))-s2,1.0));//\t4\n    \tc =opU(c,vec2(length(p-vec3(-pos.x,pos.y,pos.w))-s1,2.0));\t//\t8 \n    \tc =opU(c,vec2(length(p-vec3(-pos.y,-pos.y,pos.x))-s1,1.0)); //\t7\n    \tc =opU(c,vec2(length(p-vec3(pos.y,pos.y,-pos.x))-s2,2.0));\t//\t5\n    }\n    return c;\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\tvec2 tv = (iMouse.xy/iResolution.xy-0.5);\n\ttv = vec2(\n\t\tiTime*(iMouse.y/iResolution.y*10.0-5.0),\n\t\tPIH*0.4\n\t);\n    float ang = PIH*0.5;\n\tvec2 a = vec2(cos(ang),sin(ang));\n\tvec4 s = vec4(sin(tv.yx) , cos(tv.yx));\n\tmat2 m2x = mat2(s.z,s.x,-s.x,s.z);\n\tmat2 m2y = mat2(s.w,s.y,-s.y,s.w);\n\tmat2 m2z = mat2(a.x,a.y,-a.y,a.x);\n\t//set the ray\n\tvec2 aspect = iResolution.xy/iResolution.y;\n\tvec2 uv = fragCoord.xy /iResolution.y;\n\tvec3 c = vec3(0.0,0.0,-7.0);//camera\n\tvec3 rd = normalize(vec3(uv-aspect*0.5,1.0));//ray direction\n    rd.xz*= m2y ; \n    c.xz *= m2y ;\n    if(texture(iChannel0, vec2(0.341176471, 0.25)).x > 0.5){\n    \trd.yz*= m2x ;\n\t\tc.yz *= m2x ;\n    \trd.xy*= m2z ; \n    \tc.xy *= m2z ; \n\t}\n    float mat = 0.0;\n\t//shot the ray\n\tfloat dist = xStart;\n\tbool hit = false;\n    float fog = 0.0;\n\tfor(int i=0;i<128;i++){ \n        (i>30 && i<40) ? fog+=0.01 : 0.0;\n        fog += 0.009;\n\t\tfloat d = scene(c + rd * dist).x;\n\t\tdist += d;\n\t\tif(dist>=xEnd){hit = false; break;}\n\t\tif(d<=eps){hit = true; mat = scene(c + rd * dist).y; break;}\n\t}\n\tvec3 p = c + rd * dist;\n    (HITRESULT) ? hit : hit = false;\n\tif(hit){\n\t\tvec2 neps = vec2(eps,0.0);\n\t\tvec3 norm = normalize(vec3(\n\t\t\tscene(p+neps.xyy).x - scene(p-neps.xyy).x,\n\t\t\tscene(p+neps.yxy).x - scene(p-neps.yxy).x,\n\t\t\tscene(p+neps.yyx).x - scene(p-neps.yyx).x\n\t\t));\n\t\tvec3 b = vec3(\n\t\t\tabs(dot(norm,vec3(1.0,0.0,0.0))),\n\t\t\tabs(dot(norm,vec3(0.0,1.0,0.0))),\n\t\t\tabs(dot(norm,vec3(0.0,0.0,1.0)))\n\t\t);\n        vec2 res = iResolution.xy / iResolution.y * 0.5;\n        vec3 col = (hsv(0.5*mat + (texture(SONG, vec2(0.666,0.25)).x*0.5 + 0.3)+HUE , SATURATION, VOLUME));\n        fragColor = vec4(col, 1.0);\n\t}else{\n\t\tvec2 res = iResolution.xy / iResolution.y * 0.5;\n        float circle = length(uv-res);\n\t\tfragColor = vec4(0.6*texture( SONG , vec2(circle*0.5 , 0.25)).x\n                          * hsv(circle*0.5+HUE+iMouse.x/iResolution.x , -0.1 , 2.0) - circle*0.2\n        \t\t\t, 1.0);\n\t}\n    float str = ((texture(iChannel0, vec2(0.325490196, 0.25)).x > 0.5) \n        \t\t\t? 10.0*pwm(iTime*STRSPEED, PWMSIZE) \n        \t\t\t: 1.0);\n    ((STRALL)\n    \t? fragColor = (fragColor+fog)*str\n        : fragColor += fog*str\n    );\n}\n\n\n","name":"Image","description":"","type":"image"}]}