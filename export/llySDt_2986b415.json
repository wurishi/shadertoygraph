{"ver":"0.1","info":{"id":"llySDt","date":"1486433199","viewed":233,"name":"3 chroma aberr","username":"Loeizd","description":"three types of chromatic aberration, click to view individual","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["chromatic","aberration"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// copied from https://www.shadertoy.com/view/4dlXzB\nvoid rotate (inout vec2 uv, float t)\n{\n\tfloat rad = radians(360.0 * fract(sin(iDate.w*2.0)* t));\n\tmat2 rotate = mat2(cos(rad),sin(rad),-sin(rad),cos(rad));\n\tuv = rotate * (uv - 0.5) + 0.5;\n}\n    \n\n\nvoid mainImage( out vec4 O, in vec2 U )\n{\n\tU = U.xy / iResolution.xy;\n    vec2 U2, U3;\n    U2 = U;\n    U3 = U;\n   \n    // poor man's chroma aberr\n    float circle = length(0.5-U)*2.0;\n    vec2 a = vec2(sin(iDate.w*2.0)*0.015, 0.0)*circle;\n    vec4 O1 = vec4(texture(iChannel0, U + a).x, texture(iChannel0, U).y, texture(iChannel0, U - a).z, 1.0);\n\n\t// rotation chroma aberr\n    float b = 0.005;\n    rotate(U2,b);\n    rotate(U3,-b);\n    vec4 O2 = vec4(texture(iChannel0, U2).x, texture(iChannel0, U).y, texture(iChannel0, U3).z, 1.0);\n    \n    \n    // radial blur chroma aberr\n    O = vec4(texture(iChannel0, U));\n\n    float bpow = sin(iDate.w)*0.1;\n    const float cycles = 20.0;\n    for( int i = 0; i < int( cycles ); i++ )\n    {\n        float J = float(i)/cycles*bpow+1.;\n        float x = float(i)/cycles;\n        O = O + vec4(texture(iChannel0, U*J+vec2((1.-J)/2.0)))*vec4(-x*2.+1.5, 1.-abs(x*2.-1.), x*2.-0.5, 1.0);\n    }\n    vec4 O3 = O/(cycles-cycles*0.5);\n    \n    \n    // Combine all three and draw UI    \n    vec2 toCenter = vec2(U-0.5)/iResolution.y;\n    float angle = fract(iDate.w*.07 + atan(toCenter.y,toCenter.x)/3.1415*.5+.5);\n    \n    O = vec4(O1*floor(angle+.33)+O2*(floor(angle+.66)-floor(angle+.33))+O3*(1.-floor(angle+.66)));    \n\t\n    vec4 mask = vec4(floor(angle+.66)-floor(angle+.658)+floor(angle+0.002)+floor(angle+.33)*(floor(angle+.66)-floor(angle+.328)));\n\tO = O * (1. - mask);\n    \n    \n    // To view individual chromatic aberration, click on the screen\n       \n    if (iMouse.w > .5)\n    {\n\tiMouse.x/iResolution.x > 0. ? O = O1 : O;\n    iMouse.x/iResolution.x > 0.33 ? O = O3 : O;\n    iMouse.x/iResolution.x > 0.66 ? O = O2 : O;\n    }\n\n}","name":"Image","description":"","type":"image"}]}