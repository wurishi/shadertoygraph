{"ver":"0.1","info":{"id":"4tc3D2","date":"1471538285","viewed":297,"name":"mario in wonderland","username":"tomaes","description":"v1.1: smaller mario, tidy hill, platforms for mini marios, who also jump now. deactivated dissolve fx.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["2d","simple","mario","nintendo","8bit"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// mario in wonderland (v1.1) by tomaes 20160818+19\nbool brect(vec2 _uv, float _x,  float _y, \n                     float _bw, float _bh,\n                     float _lstart, float _lend,\n                     float _line)\n{\n    return ((_uv.x                > _x+_bw*_lstart && _uv.x           < _x+_bw*_lend) &&\n            (_uv.y+_bh*(_line+1.) > _y             && _uv.y+_bh*_line < _y));\n}        \n\n\nvec4 mario(vec2 _uv, float _x, float _y, float _w, float _h)\n{\n    float bw = _w / 12.;\n    float bh = _h / 16.;\n    \n    vec4 col    = vec4(.0);\n    vec4 pal_r  = vec4( 1.,  .1,  .1,  1.);\n    vec4 pal_g  = vec4(  .5, .5,  .1,  1.);\n    vec4 pal_br = vec4( 1.,  .75, .2,  1.);\n    \n    // line 1,2 (hat)\n    if (brect(_uv,_x,_y, bw, bh, 3., 8.,1.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh, 2.,11.,2.)) col = vec4(pal_r);\n\n    // line 3.. (face)\n    if (brect(_uv,_x,_y, bw, bh, 2., 5.,3.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 5., 7.,3.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 7., 8.,3.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 8., 9.,3.)) col = vec4(pal_br);\n    \n    // line 4.. (face)\n    if (brect(_uv,_x,_y, bw, bh, 1., 2.,4.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 2., 3.,4.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 3., 4.,4.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 4., 7.,4.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 7., 8.,4.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 8.,11.,4.)) col = vec4(pal_br);\n\n    // line 5.. (face)\n    if (brect(_uv,_x,_y, bw, bh, 1., 2.,5.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 2., 3.,5.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 3., 5.,5.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 5., 8.,5.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 8., 9.,5.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 9.,12.,5.)) col = vec4(pal_br);\n\n    // line 6.. (face)\n    if (brect(_uv,_x,_y, bw, bh, 1., 3.,6.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 3., 7.,6.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 7.,11.,6.)) col = vec4(pal_g);\n    \n    // line 7.. (face)\n    if (brect(_uv,_x,_y, bw, bh, 3.,10.,7.)) col = vec4(pal_br);\n    \n    // line 8.. (body)\n    if (brect(_uv,_x,_y, bw, bh, 2.,4.,8.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 4.,5.,8.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh, 5.,8.,8.)) col = vec4(pal_g);\n    \n    // line 9.. (body)\n    if (brect(_uv,_x,_y, bw, bh, 1., 4.,9.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 4., 5.,9.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh, 5., 7.,9.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 7., 8.,9.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh, 8.,11.,9.)) col = vec4(pal_g);\n\n    // line 10.. (body)\n    if (brect(_uv,_x,_y, bw, bh, 0., 4.,10.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 4., 8.,10.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh, 8.,12.,10.)) col = vec4(pal_g);\n    \n    // line 11.. (body)\n    if (brect(_uv,_x,_y, bw, bh, 0., 2.,11.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 2., 3.,11.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 3., 4.,11.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh, 4., 5.,11.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 5., 7.,11.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh, 7., 8.,11.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 8., 9.,11.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh, 9.,10.,11.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh,10.,12.,11.)) col = vec4(pal_br);\n    \n    // line 12.. (body)\n    if (brect(_uv,_x,_y, bw, bh, 0., 3.,12.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 3., 9.,12.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh, 9.,12.,12.)) col = vec4(pal_br);\n\n    // line 13.. (body)\n    if (brect(_uv,_x,_y, bw, bh, 0., 2.,13.)) col = vec4(pal_br);\n    if (brect(_uv,_x,_y, bw, bh, 2.,10.,13.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh,10.,12.,13.)) col = vec4(pal_br);\n    \n    // line 14.. (legs)\n    if (brect(_uv,_x,_y, bw, bh, 2., 5.,14.)) col = vec4(pal_r);\n    if (brect(_uv,_x,_y, bw, bh, 7.,10.,14.)) col = vec4(pal_r);\n\n    // line 15.. (feet)\n    if (brect(_uv,_x,_y, bw, bh, 1., 4.,15.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 8.,11.,15.)) col = vec4(pal_g);\n\n    // line 16.. (feet)\n    if (brect(_uv,_x,_y, bw, bh, 0., 4.,16.)) col = vec4(pal_g);\n    if (brect(_uv,_x,_y, bw, bh, 8.,12.,16.)) col = vec4(pal_g);\n\n    return col+_uv.y*.01;\n}\n\nfloat yoff(float _x, float _t)\n{\n    return sin( 3.14159 * _x + _t*2.) + sin(_x*15. + _t*2.)*.06;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\n    vec2 uv = fragCoord.xy / iResolution.xy;\n\t\n    float t = mod(iTime+1.5, 100.);\n    \n    float j = 1.6-.8+sin(t)*.25;\n    \n    vec4 c = vec4(.0);\n    \n    // background\n    vec4 b = vec4(.4-uv.y*.1,\n                  .2+ sin(.5+uv.x*20.+t)/sqrt( sin(t*2.+uv.x*100.)+cos(uv.y*100.)), \n                  .89-uv.y*.22 - mod(uv.x-uv.y,.05)*2., \n                  1.);\n    \n    // render main mario\n    vec4 m  = mario(uv,.392 ,j,      .15, abs(.45+sin(t*5.+uv.x*5.)*.1 )) * .2;\n         m += mario(uv,.400 ,j+.008, .15, abs(.45+sin(t*5.+uv.x*5.)*.1 ));\n    \n    // mini marios on hill\n    for(float fx = .0; fx < 1.1; fx += .1)\n    {\n       m += (mario( uv, fx, .2+yoff(uv.x,t)+abs(sin(t+fx*10.)*.1), .04,.15)) * .6;\n    }\n\n    // mario cut-out/dissolve\n    if (length(m) > .2) // 1.5+sin(t*5.+uv.x*5.)\n    \tc = m;\n    else\n        c = b;\n    \n    // calc jump for board\n    j = j - .54 - abs(.65+sin(t*5.+(uv.x)*5.)*.2 );\n    \n\t// board\n    if (uv.x  > .35 && uv.x < .58 && \n        uv.y  > .57+j && uv.y < .65+j)\n        c = vec4(1.,.8,.7, 1.)- mod(uv.x,.1)*2.;\n\n    // hill platforms\n    if (uv.y > (yoff(uv.x,t)+.01) && uv.y < (yoff(uv.x,t)+.05) && mod(uv.x,.1) < .05 )\n    {\n        c = vec4(.9,.6,.2, 1.);\n    }\n    \n    // hill\n    if (uv.y < yoff(uv.x,t) && \n        mod(uv.x*.01+uv.y+yoff(uv.x,t),.1) < .09)\n    {\n        c = vec4(.7, .3+uv.y, .1, 1.);\n    }\n        \n    // columns: left\n    if (uv.x < .07)\n        c *= (.1-uv.x)*10.;\n\n    // columns: right\n    if (uv.x > .93)\n        c *= 1.-(1.-uv.x)*10.;\n        \n    fragColor = vec4(c);\n}","name":"Image","description":"","type":"image"}]}