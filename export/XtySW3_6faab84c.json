{"ver":"0.1","info":{"id":"XtySW3","date":"1486076296","viewed":142,"name":"John Conway's Game of Life","username":"pineapplemachine","description":"Conway's Game of Life. Use the mouse to create living cells.","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["automata","cellular"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 color, in vec2 coord){\n\tcolor = texture(iChannel0, coord.xy / iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// Get whether the cell at a coordinate is alive.\nint getcell(in vec2 coord){\n    // Interesting note: Doesn't work when comparing to 0.0 instead of 0.5\n    return texture(iChannel0, coord / iResolution.xy).g > 0.5 ? 1 : 0;\n}\n\n// Get the number of living cells neighboring the cell at a coordinate.\nint getneighbors(in vec2 coord){\n    return (\n        getcell(coord + vec2(-1.0, -1.0)) +\n        getcell(coord + vec2(-1.0, +0.0)) +\n        getcell(coord + vec2(-1.0, +1.0)) +\n        getcell(coord + vec2(+0.0, -1.0)) +\n        getcell(coord + vec2(+0.0, +1.0)) +\n        getcell(coord + vec2(+1.0, -1.0)) +\n        getcell(coord + vec2(+1.0, +0.0)) +\n        getcell(coord + vec2(+1.0, +1.0))\n    );\n}\n\nvoid mainImage(out vec4 color, in vec2 coord){\n    const vec4 on = vec4(1.0, 1.0, 0.0, 1.0);\n    const vec4 off = vec4(0.0, 0.0, 0.0, 0.0);\n    if(iMouse.z > 0.0 && length(iMouse.xy - coord) <= 2.0){\n        // Draw cells with cursor\n        color = on;\n    }else{\n        // Otherwise update state according to CA rules\n        int neighbors = getneighbors(coord);\n        if(getcell(coord) == 1){\n            color = neighbors == 2 || neighbors == 3 ? on : off;\n        }else{\n            color = neighbors == 3 ? on : off;\n        }\n    }\n}","name":"Buf A","description":"","type":"buffer"}]}