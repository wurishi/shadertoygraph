{"ver":"0.1","info":{"id":"tdGSRm","date":"1573625742","viewed":115,"name":"Pattern Combinator","username":"robhardwood","description":"Drawing some combined random patterns","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["pattern"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const bool ENABLE_DOUBLE_LAYERS = true;\nconst bool ENABLE_CROSSFIRE     = false;\nconst bool ENABLE_SHADING       = true;\nconst bool ENABLE_AND_PATTERN   = false;\nconst bool ENABLE_INVERSION     = false;\nconst bool ENABLE_LOOPING       = true;\nconst bool ENABLE_LOOP_REWIND   = true;\n\nconst float LOOP_LENGTH = 420.0;\nconst float LAYER_A_SPEED = 144.0;\nconst float LAYER_B_SPEED = 96.0;\n\nconst vec3 COLOR = vec3(0.0, 1.0, 0.0);\n\nint isPrime(int num)\n{\n     if (num <= 1) return 0;\n     if (num % 2 == 0 && num > 2) return 0;\n\n     for(int i = 3; i < int(floor(sqrt(float(num)))); i+= 2)\n     {\n         if (num % i == 0)\n             return 0;\n     }\n     return 1;\n}\n\nint patternA(int x){\n    return ((x*x)&x);\n}\nint patternB(int x){\n    return (x>>7)&x;\n}\n\nfloat isMagical(int x, int y){\n    int v;\n    if (ENABLE_AND_PATTERN)\n        v = x & y;\n    else\n        v = x ^ y;\n    \n    float r = patternA(v) > patternB(v) ? 0.0 : 1.0;\n    if (ENABLE_INVERSION)\n        r = 1.0 - r;\n    return r;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat time = iTime;\n    if (ENABLE_LOOPING){\n        while(time > LOOP_LENGTH) time -= LOOP_LENGTH;\n        if (ENABLE_LOOP_REWIND && time > LOOP_LENGTH / 2.0)\n            time = LOOP_LENGTH - time;\n    }\n    \n    int XA = int(fragCoord.x + time * LAYER_A_SPEED);\n    int YA = int(fragCoord.y + time * LAYER_A_SPEED);\n   \n    int XB = int(fragCoord.x + time * LAYER_B_SPEED);\n    int YB = int(fragCoord.y + time * LAYER_B_SPEED);\n\n    float VA, VB;\n    if (ENABLE_CROSSFIRE){\n        VA = isMagical(XA, YB);\n        VB = isMagical(XB, YA);\n    } else {\n        VA = isMagical(XA, YA);\n        VB = isMagical(XB, YB);\n    }\n    \n    float V;\n    if (ENABLE_DOUBLE_LAYERS)\n\t    V = VA * VB;\n    else\n        V = VA;\n    \n    float S = 1.0;\n    if (ENABLE_SHADING){\n        vec2 halfRes = iResolution.xy / vec2(2.0, 2.0);\n        float dx = abs(float(fragCoord.x) - halfRes.x) / float(halfRes.x);\n        float dy = abs(float(fragCoord.y) - halfRes.y) / float(halfRes.y);\n        S = 1.0 - sqrt(dx * dx + dy * dy);\n    } else\n        S = 1.0;\n    fragColor = vec4(S * V, S * V, S * V, 1.0) * vec4(COLOR, 1.0);\n}","name":"Image","description":"","type":"image"}]}