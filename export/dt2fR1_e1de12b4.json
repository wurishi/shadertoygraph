{"ver":"0.1","info":{"id":"dt2fR1","date":"1693909507","viewed":249,"name":"menger time loop","username":"sleeping","description":"my first experiment with 3D and raymarching\n\n// looking for feedback and suggestions \n\n","likes":14,"published":1,"flags":0,"usePreview":0,"tags":["fractal","menger","loop"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define t fract(iTime*.3)\n#define r(a) mat2( cos(a), -sin(a), sin(a), cos(a) )\n\n\nfloat B(vec3 q) {\n    return length(max(q,.0)) + min(max(q.x,max(q.y,q.z)),.0);\n}\n\nfloat map(vec3 p) {\n    float r=9., w=r, l=.5, i;\n    vec3 q, c=vec3(l,l,3.);\n    for (;++i < 6.;) {\n        c /= 3.;\n        q = abs(mod(p-l,l+l)-l);\n        l = c.x;\n        r = min(r, min(B(q-c), min(B(q-c.yzx), B(q-c.zxy))));\n        if (i<5.)\n            w = r;\n    }                                                         \n    return max(-mix(w,r,t), B(abs(p)-.5));\n}\n\nvec3 normal(vec3 p) {\n    vec2 e = vec2(1e-4, .0);\n    return normalize(vec3(\n        map(p + e.xyy) - map(p - e.xyy),\n        map(p + e.yxy) - map(p - e.yxy),\n        map(p + e.yyx) - map(p - e.yyx)\n    ));\n}\n\nvoid mainImage( out vec4 C, vec2 U ){\n    vec2 R = iResolution.xy, u = (U+U - R) / R.y;\n    \n    vec3 ro = vec3(0, smoothstep(1., .1, t)-1., -1.5+pow(3.,1.-t))/3.,\n         rd = normalize(vec3(u*r(iTime/2.), -.7)),\n         p;\n         \n    float s,i,d=1.;\n    for(; ++i<99. && d>1e-4 && s<9.; s+=d=map(p=ro+rd*s));\n    \n    C.xyz = mix(1.-normal(p).zzz, u.yxx, i/139.);\n}","name":"Image","description":"","type":"image"}]}