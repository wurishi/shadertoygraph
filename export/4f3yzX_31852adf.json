{"ver":"0.1","info":{"id":"4f3yzX","date":"1730931653","viewed":47,"name":"Rainbow Truchets","username":"GarlicGraphix","description":"Rainbow Truckets","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["truchets"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3Rr","filepath":"/media/a/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","previewfilepath":"/media/ap/79520a3d3a0f4d3caa440802ef4362e99d54e12b1392973e4ea321840970a88a.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float random (in vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);\n}\n\nmat2 rot2D(float angle) {\n    float c = cos(angle);\n    float s = sin(angle);\n    \n    return mat2(c, -s, s, c);\n}\n\nconst vec3 rainbow[7] = vec3[](\n    vec3(1.0, 0.0, 0.0),  // Red\n    vec3(1.0, 0.5, 0.0),  // Orange\n    vec3(1.0, 1.0, 0.0),  // Yellow\n    vec3(0.0, 1.0, 0.0),  // Green\n    vec3(0.0, 0.0, 1.0),  // Blue\n    vec3(0.3, 0.0, 0.5),  // Indigo\n    vec3(0.5, 0.0, 0.5)   // Violet\n);\n\nfloat tileCount = 10.;\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.y;\n    uv.y += sin(uv.x + iTime)*0.1;\n    uv.x += iTime*0.1;\n    \n    vec3 col = vec3(0., 0.0, 0.);    \n    \n    // 7 Passes\n    for( int i = 0; i < 7; i++) {\n        vec2 t = floor(uv*tileCount);\n        vec2 tuv = fract(uv*tileCount);\n        int max = int(ceil(texture(iChannel1, uv).r*7.));\n        \n        \n        if (random(t) > 0.5) {\n            tuv.x = 1. - tuv.x;\n        }\n        tuv += texture(iChannel0, uv + iTime * 0.02).xy*0.25;\n        \n        float thik = 0.4 - float(i)*0.05;\n        float line = abs(tuv.x - tuv.y);\n        \n        if (line <= thik) {\n            col = rainbow[6-i]*(pow(1.-line, 2.));\n        } else if (line >= 1.-thik) {\n            col = rainbow[6-i]*(pow(line, 2.));\n        }\n        \n        uv += vec2(0, 0.01)*rot2D(iTime);\n        \n    }\n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}