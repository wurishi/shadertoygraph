{"ver":"0.1","info":{"id":"4sVGRc","date":"1455644781","viewed":327,"name":"Linjat","username":"noby","description":"One-hour, improvised.","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["cube","abstract","blue","minimalism"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define STEPS 2\nfloat time;\nmat3 rx(float a){return mat3(1.0,0.0,0.0,0.0,cos(a),-sin(a),0.0,sin(a),cos(a));}\nmat3 ry(float a){return mat3(cos(a),0,sin(a),0.0,1.0,0.0,-sin(a),0.0,cos(a));}\nmat3 rz(float a){return mat3(cos(a),-sin(a),0.0,sin(a),cos(a),0.0,0.0,0.0,1.0);}\n\nfloat box(vec3 p, vec3 b, float r){\n  return length(max(abs(p)-b,0.0))-r;\n}\n\nfloat map(vec3 p, float dt){\n    mat3 r = rx(1.1*time+dt)*ry(time+dt)*rz(0.9*time+dt);\n    return box( (p+vec3(0,0,2))*r, vec3(0.3), 0.01);\n}\n\nvec3 normal(vec3 p, float dt){\n\tfloat e=1e-3;\n\treturn normalize(vec3(map(p+vec3(e,0,0),dt)-map(p-vec3(e,0,0),dt),\n\t                      map(p+vec3(0,e,0),dt)-map(p-vec3(0,e,0),dt),\n\t                      map(p+vec3(0,0,e),dt)-map(p-vec3(0,0,e),dt)));\n}\n\nfloat intersect(vec3 o, vec3 d, float dt){\n    float dist = 0.0;\n    for(int i = 0; i < STEPS; i++){\n        float s = map(o+d*dist, dt);\n        dist += s;\n        if(dist > 200.0 || s < 0.001) break;\n    }\n    dist = min(dist, 200.0);\n    dist = abs(dot(normal(o+d*dist, dt), normalize(vec3(0,1,1))));\n    return pow(1000.0/dist, 0.5);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n\tvec2 uv = fragCoord.xy / iResolution.xx;\n    time = iTime*1.0;\n    float ac = 0.0;\n    \n    for(int d = 0; d < 20; d++){\n        float dt = -0.006+0.0006*float(d); \n        float depth = intersect( vec3(-1.3,-0.7,3), normalize(vec3(uv,-2)), dt);\n    \tac += pow(sin(160.0*uv.y+1.5*tan(sin(uv.x*depth))), 75.0);\n    }\n    vec3 op = mix(vec3(1), 0.7*vec3(0.3,0.45,0.8), max(ac, 0.01)/20.0);\n\tfragColor = vec4(pow(op, vec3(1.0/2.2)), 1);\n}","name":"Image","description":"","type":"image"}]}