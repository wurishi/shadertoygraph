{"ver":"0.1","info":{"id":"XtySWc","date":"1486087623","viewed":401,"name":"Rotoscope","username":"pineapplemachine","description":"Areas of high contrast are turned into outlines, producing a rotoscope-like effect.","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["contrast","outline"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define Threshold 0.16\n\nconst vec4 outline = vec4(0.1, 0.1, 0.1, 1.0);\nconst vec4 background = vec4(0.9, 0.8, 0.45, 1.0);\n\nfloat getcontrast(in vec2 coord){\n    return texture(iChannel0, coord / iResolution.xy).a;\n}\n\nvoid mainImage(out vec4 color, in vec2 coord){\n    vec4 origin = texture(iChannel0, coord / iResolution.xy);\n    if(\n        getcontrast(coord) >= Threshold * 0.8 ||\n        getcontrast(coord + vec2(-1.0, 0.0)) >= Threshold ||\n        getcontrast(coord + vec2(+1.0, 0.0)) >= Threshold ||\n        getcontrast(coord + vec2(0.0, -1.0)) >= Threshold ||\n        getcontrast(coord + vec2(0.0, +1.0)) >= Threshold\n   \t){\n        color = outline;\n    }else{\n        color = background * 0.4 + origin * 0.6;\n        color.a = 1.0;\n    }\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage(out vec4 color, in vec2 coord){\n    vec4 origin = texture(iChannel0, coord / iResolution.xy);\n    vec4 north = texture(iChannel0, (coord + vec2(0.0, -1.0)) / iResolution.xy);\n    vec4 south = texture(iChannel0, (coord + vec2(0.0, +1.0)) / iResolution.xy);\n    vec4 west = texture(iChannel0, (coord + vec2(-1.0, 0.0)) / iResolution.xy);\n    vec4 east = texture(iChannel0, (coord + vec2(+1.0, 0.0)) / iResolution.xy);\n    color = vec4(origin.r, origin.g, origin.b, max(distance(north, south), distance(west, east)));\n}\n","name":"Buf A","description":"","type":"buffer"}]}