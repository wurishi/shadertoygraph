{"ver":"0.1","info":{"id":"XlVGWh","date":"1474437529","viewed":251,"name":"Vanilla - Nana","username":"vamoss","description":"A tribute to this artist I am listening to in loop for weeks now.\nFull album: https://www.youtube.com/watch?v=lSU1eFxgr68","likes":6,"published":1,"flags":64,"usePreview":0,"tags":["spectrum"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"MsjGRW","filepath":"https://soundcloud.com/vanilla/nana","previewfilepath":"https://soundcloud.com/vanilla/nana","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy - 0.5;\n    uv.y *= iResolution.y/iResolution.x;\n    uv *= 4.;\n    \n    int animation = 3;\n    if(iTime<21.3) animation = 0;\n    else if(iTime<36.0) animation = 1;\n    else if(iTime<42.8) animation = 2;\n    \n    //extract audio\n    float fft  = texture( iChannel0, vec2(0.0, 0.25)).x;\n    fft = 1.-pow(fft, 4.);\n    if(animation==2 || animation==3) uv *= fft;\n    \n    //start the shape defining the circle using the distance from the center\n    float shape = 1.-length(uv);\n    \n    float radius = 0.01;\n    if((animation==0 || animation==3) && uv.y<0.)\n        radius = 0.8-texture( iChannel0, vec2((uv.y+0.7)/4., 0.25)).x;\n    \n    //flat the circle\n    shape = 1.-smoothstep(radius+0.02, radius, shape);\n    \n    vec3 color = vec3(0.8, 0.53, 0.3);\n    if(uv.y < 0.){\n        color = mix(vec3(0.6, 0.24, 0.32), color, 1.-length(uv.y));\n        \n        //use the vertical distance to change the frequency\n        float frequency =  (1.-length(uv.y/2.));\n        \n        if(animation==1) frequency *= fft;\n        \n        //use the sine oscilation to create lines\n        float sine = sin(uv.y*mix(10., 100., frequency));\n        shape = sine < 0.8 ? 0. : shape;\n    }\n\n    fragColor = vec4(shape*color, 1.0);\n}","name":"Image","description":"","type":"image"}]}