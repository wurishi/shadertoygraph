{"ver":"0.1","info":{"id":"4ldXRM","date":"1478730067","viewed":155,"name":"CollatzFun","username":"xdaimon","description":".","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["2d","math","numbers","block","collatz"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//#define FAST\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = fragCoord/40.;\n        \n    #ifdef FAST\n    p.y*=22.;\n    #else\n    p.y*=5.;\n    #endif\n    \n    p=floor(p);\n    float odd = p.y*2.+1.;\n    \n    // Pair each odd number with a power of two\n    float even = odd * pow(2., p.x);\n    \n    // Inverse of 3x + 1\n    float link = (even - 1.)/3.;\n    \n    // Color block white if link is integer which is true when even == 3*o + 1\n    // for some odd integer o\n    fragColor = .75*vec4(fract(link)<0.01);\n\n    float t = iTime;\n    #ifdef FAST\n    t = floor(t*25.);\n    #else\n    t = floor(t);\n    #endif\n    const float evenSkip = 1.;\n    float oddint = t * (1.+evenSkip) + 1.;\n    // Lets look at which even number that (3*oddint+1) will map to\n    if (abs(oddint - link)<0.01 && fract(link)<0.01)\n        fragColor = vec4(1.,0.,0.,1.);\n    \n    #ifdef FAST\n    return;\n    #endif\n\n    // I wonder what expression tells when a block in the ith column is lit\n    //0==mod(t+2-1,2);\t\t\tlit at t == 1\n    //0==mod(t+4-0,4);\t\t\tlit at t == 0\n\t//0==mod(t+8-6,8);\t\t\tlit at t == 6\n\t//0==mod(t+16-2,16);\t\tlit at t == 2\n\t//0==mod(t+32-26,32);\t\tlit at t == 26\n\t//0==mod(t+64-10,64);\t\tlit at t == 10\n\t//0==mod(t+128-106,128);\tlit at t == 106\n\t//0==mod(t+256-42,256);\t\tlit at t == 42\n    //0==mod(t+512-426,512);\tlit at t == 426\n    //0==mod(t+1024-170,1024);\tlit at t == 170\n    //0==mod(t+2048-1706,2048); lit at t == 1706\n    //0==mod(t+4096-682,4096);\tlit at t == 682\n    // 0 6 2 6 0 6 2 6 0 6 2 6 0 6 2\n\n   \t//0==mod(t+2-1,2);\t\t\tlit at t == 1\n\t//0==mod(t+8-6,8);\t\t\tlit at t == 6\n\t//0==mod(t+32-26,32);\t\tlit at t == 26\n\t//0==mod(t+128-106,128);\tlit at t == 106\n\t//0==mod(t+512-426,512);\tlit at t == 426\n\t//0==mod(t+2048-1706,2048); lit at t == 1706\n    // some more values\n\n//\t\t\t\t 1706\n//\t\t\t\t 6826\n//\t\t\t\t27306\n//\t\t\t   109226\n//\t\t\t   436906\n//\t\t\t  1747626\n//\t\t\t  6990506\n//\t\t\t 27962026\n//\t\t\t111848106\n//\t\t\t447392426\n//\t\t   1789569706\n//\t\t   7158278826\n//\t\t  28633115306\n//\t\t 114532461226\n//\t\t 458129844906\n//\t\t1832519379626\n//\t\t7330077518506\n//\t   29320310074026\n//    117281240296106\n//\t  469124961184426\n//   1876499844737706\n//   7505999378950826\n//  30023997515803306\n// 120095990063213226\n// 480383960252852906\n//1921535841011411626\n\n   \t//0==mod(t+4-0,4);\t\t\tlit at t == 0\n\t//0==mod(t+16-2,16);\t\tlit at t == 2\n\t//0==mod(t+64-10,64);\t\tlit at t == 10\n\t//0==mod(t+256-42,256);\t\tlit at t == 42\n\t//0==mod(t+1024-170,1024);\tlit at t == 170\n\t//0==mod(t+4096-682,4096);\tlit at t == 682\n    // this sequence's last digit likes to toggle between 0 and 2\n\n    \n    // hmm\n    // This sequence is found here http://oeis.org/A176965\n    // 2^(-1 + n) - 1/3 * (2 + (-2)^n)\n    \n    float n = p.x;\n    float powwow = pow(2.,n);\n    float sgn = 1.-2.*step(.000001, fract(n/2.));\n    float lit = pow(2.,n-1.) - 1./3. * (2. + sgn*powwow);\n    if (mod(t+powwow-lit,powwow)<0.00001)\n        fragColor.rgb+=.2;\n}","name":"Image","description":"","type":"image"}]}