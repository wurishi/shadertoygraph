{"ver":"0.1","info":{"id":"Xc2GDm","date":"1704303778","viewed":53,"name":"normal generation culegamer","username":"CuleGamer","description":"this code sucks and its probably incorrect so let me know whats wrong about it in the comments","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["2d","lighting","normalmap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 getTangent(sampler2D tex,vec2 uv,float size)\n{\n    \n    return normalize(vec3(size,0.,texture(tex,uv).x - texture(tex,uv+vec2(size,0.)).x));\n}\nvec3 getBiTangent(sampler2D tex,vec2 uv,float size)\n{\n    return normalize(vec3(0.0,size,texture(tex,uv).x - texture(tex,uv+vec2(0.0,size)).x));\n    \n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float scale = 2.0;\n    vec2 uv = scale*fragCoord/iResolution.y;\n    vec2 uvMouse = scale*iMouse.xy/iResolution.y;\n    float tanStep = 0.0001;\n    vec3 tangent = getTangent(iChannel0,uv,tanStep);\n    vec3 biTangent = getBiTangent(iChannel0,uv,tanStep);\n    vec3 normal = normalize(cross(tangent,biTangent));\n    vec3 lightPos = vec3(uvMouse,-0.5);\n    vec3 lightVec = lightPos-vec3(uv,0.0);\n    float intensity = 1.0;\n    float diffuse = intensity*dot(-1.0*lightVec,normal)/pow(length(lightVec),2.0);\n    vec3 col = vec3(diffuse);\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}