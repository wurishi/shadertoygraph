{"ver":"0.1","info":{"id":"XtjfWm","date":"1516076572","viewed":291,"name":"multiplication tables","username":"balkhan","description":"multiplication tables","likes":15,"published":1,"flags":0,"usePreview":0,"tags":["multiplication"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvec2 \tcmult(vec2 a, vec2 b)\n{\n    return mat2(a,-a.y,a.x) * b; // Thanks Fabrice !\n    // return (vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x));\n}\n\n/*\n** arthursw's line : https://www.shadertoy.com/view/MdB3zK\n*/\n\nvec2 rotate(vec2 v, float alpha)\n{\n\tfloat vx = v.x*cos(alpha)-v.y*sin(alpha);\n\tfloat vy = v.x*sin(alpha)+v.y*cos(alpha);\n\tv.x = vx;\n\tv.y = vy;\n\treturn v;\n}\n\n/*\nfloat segment(vec2 p1, vec2 p2, vec2 p, float thickness)\n{\n\tp -= p1;\n\tvec2 lineVector = p2-p1;\n\t\t\n\tfloat angle = -atan(lineVector.y,lineVector.x);\n\tp = rotate(p,angle);\n\t\n\tfloat dx = 0.0;\n\tif(p.x<0.0)\n\t\tdx = abs(p.x);\n\telse if(p.x>length(lineVector))\n\t\tdx = abs(p.x) - length(lineVector);\n\t\t\n\treturn ( thickness/(dx+abs(p.y)) );\n}\n*/\n\n/*\n**\tend line\n*/\n\nfloat segment(vec2 a, vec2 b, vec2 p, float thickness ) {\n  vec2 pa = p - a;\n  vec2 ba = b - a;\n  float h = clamp(dot(pa, ba) / dot(ba, ba), 0.0, 1.0);\n  float d = length(pa - ba * h);\n  return 1.0-smoothstep(0.0,thickness,d);\n}\n\nvoid mainImage( out vec4 o, in vec2 f )\n{\n    o = vec4(.0,.0,.0,1.);\n\tvec2 R = iResolution.xy, u = (f.xy-R*.5) / R.yy;\n    \n    float\tpower = 2.+iTime*.06125+5.+300.;\n    float\tmodul = 151.;//+50.*sin(iTime*.0251);\n    float\tdist = 0.;\n    float\told_dist = 0.;\n    bool\thit;\n    float rampsize = 3.0 / min(R.x, R.y);\n    vec3\tcol = vec3(0.);\n    float\ts = u.x < 0. ? -1. : 1.;\n    dist = step(.0, length(u-vec2(-.5,.0))-.5 )*step(length(u-vec2(-.5,.0))-.5, .0025 );\n    o.xyz += vec3(1.)*dist;\n    u.x = abs(u.x)-.5;\n    u *=2.;\n    \n    for (float i = .0; i <= modul; i++)\n    {\n        if (s == 1.)\n        u = (cmult(u,u) + vec2(-.5, -.5));\n        if (i > 3.)\n\t    dist = max(old_dist,\n\t               10.*segment(\n                       vec2(cos(6.28*i/ modul ), sin(6.28*i/modul ) )\n                       ,\n                       vec2(cos(6.28*mod(i*power, modul)/modul ), sin(6.28*mod(i*power, modul)/modul ))\n                       ,\n                       u\n                       ,\n                       rampsize\n                   )\n\t              );\n            if (dist > 0. && dist > old_dist )\n                col = sin(6.28*i/modul+ vec3(0,1,2)*1.04 );\n        old_dist = dist;\n        col = abs(col);\n    }\n    col *= vec3(.125);\n    o.xyz += (dist)*col;\n}","name":"Image","description":"","type":"image"}]}