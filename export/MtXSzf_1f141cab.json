{"ver":"0.1","info":{"id":"MtXSzf","date":"1438643118","viewed":208,"name":"Cantharellus","username":"rohtie","description":"This is not raymarched, it is created using plane deformations :)\n\n","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["deformation","plane","mushroom","shroom"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","previewfilepath":"/media/ap/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float smin (float a, float b, float k) {\n    a = pow(a, k); b = pow(b, k);\n    return pow((a*b)/(a + b), 1.0/k);\n}\n\nvoid mainImage( out vec4 col, in vec2 p ) {\n    p /= iResolution.xy;\n\n\n    p.x -= 0.13;\n\n    float t = iTime;\n\n    // Hat\n    vec2 hat = p - vec2(0.47, 0.76);\n    hat *= mat2(1.0, -0.27 + sin(t)*0.5,\n                -0.1 - sin(t) * 0.21, 1.6);\n\n    float hat_r = length(hat) * 1.2;\n    hat_r += cos(atan(hat.x, hat.y)*10.0)* 0.0074;\n\n\n    // Stalk\n    vec2 stalk = p - vec2(0.5, 0.42);\n    stalk *= mat2(3.4 + stalk.y * 5.0, 0.16 - sin(t)*0.02,\n                  sin(t) * 0.025, 1.2);\n\n    float stalk_r = length(stalk) * 1.25 + stalk.y * 0.57 + sin(t) * 0.05 + 0.052;\n\n    // Shroom\n    float shroom = min(hat_r + 0.034, stalk_r);\n    shroom = smoothstep(0.15, 0.1 * pow(p.y + 0.2, 2.2), shroom - 0.15);\n\n    float shroomBody = smin(hat_r, stalk_r, 0.87 - abs(sin(t))*0.05);\n    shroomBody = smoothstep(0.20, 0.21, shroomBody);\n    float shroomBody_m = 1.0 - shroomBody;\n\n    // Hat details\n    float hatDetails = smoothstep(0.4, 0.0, hat_r + length(\n        hat*mat2(1.0, 0.0,\n                 1.0, 0.0))\n        * -cos(atan(hat.x * 1.4, hat.y * 1.2))\n    ) * 0.85;\n\n    // Stalk texture\n    vec2 stalkTex = stalk * 2.4 * stalk_r;\n    float angle = t;\n    stalkTex *= mat2(1.0, sin(angle),\n                     0.0, 1.0);\n\n    float stalkT = smoothstep(2.1, 0.1, length(stalkTex));\n    stalkT = pow(stalkT, 10.0);\n\n    // Shadow\n    vec2 shadow = p - vec2(0.5, 0.42 + sin(t)*0.05);\n    shadow *= mat2(1.0 - shadow.y * 3.0, 0.15 + sin(t)*0.05,\n                   0.0, 1.0 + sin(t)*0.15);\n\n    float shadow_r = length(shadow);\n    shadow_r = smoothstep(0.25, 0.06, shadow_r);\n\n    // Composite\n    col.rgb = (\n        // Background\n        sqrt(p.y) *\n        vec3(0.12, 0.77, 0.2) *\n        texture(iChannel1, sin(t)*0.031 + 1.0 - p * exp(p.y * 5.2)*0.25).rgb * 1.75 *\n        shroomBody +\n\n        (p * 1.55 - vec2(0.0, 0.55) + p.x*0.37).y * vec3(0.052, 0.12, 0.75) *\n        shroomBody +\n\n        // Textures\n        texture(iChannel0, hat).rgb\n        * smoothstep(0.44, 0.2, hat_r)\n        * shroomBody_m +\n\n        texture(iChannel0, p / stalkT).rgb\n        * smoothstep(0.5, 0.0, stalk_r) * 1.5\n        * shroomBody_m +\n\n        // Lighting\n        shroomBody * -shadow_r * 0.25 +\n        shroom * 0.66 +\n        -smoothstep(0.4, 0.0, stalk_r) * 0.45 +\n        smoothstep(0.21, 0.1, stalk_r) * 0.32 +\n\n        // Post\n        (1.0 - hat_r) * 0.25 * shroomBody_m +\n        shroomBody_m * pow(p.y, 2.0) * vec3(1.35, 1.25, 0.0) * 0.15 +\n        -vec3(1.35, 1.25 + p.x, 0.0) * 0.06 +\n        -hatDetails * shroomBody_m * 0.732 +\n        + 0.0\n    );\n}","name":"Image","description":"","type":"image"}]}