{"ver":"0.1","info":{"id":"WdV3Wd","date":"1571231517","viewed":118,"name":"Triangles tile","username":"maciekspy","description":"Triangles tile","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["2d","triangles"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sfGRr","filepath":"/media/a/27012b4eadd0c3ce12498b867058e4f717ce79e10a99568cca461682d84a4b04.bin","previewfilepath":"/media/ap/27012b4eadd0c3ce12498b867058e4f717ce79e10a99568cca461682d84a4b04.bin","type":"volume","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float pi = 3.14159265359;\nconst float triangleScale = 1.5;//816497161855865;\nconst float period = 4.0;\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co, vec2(12., 78.))) * 12345.);\n}\n\nfloat getTriangleShade(vec2 tuv, vec2 suv) {\n    \n    float r = rand(tuv) * 40.;\n    //float r = texture(iChannel0, vec3(tuv, 0.)).x * 40.;\n    float dist = ((tuv.x * tuv.x)*.36 + (tuv.y*tuv.y))*0.4;\n    \n    if (fract(iTime / period) > (dist + r) / 200. )\n    \treturn .9 + rand(tuv)*0.1;\n    return .05 - rand(tuv)*0.05;\n}\n\nvec2 getTriangleCoords(vec2 uv) {   \n    uv.y /= triangleScale;\n    vec2 triangleCoords = floor(uv) * vec2(2., 1.);\n    float mody = floor(mod(triangleCoords.y, 2.0));\n    vec2 local = vec2(fract(uv.x + mody * 0.5) - 0.5, fract(uv.y));\n    if (local.y > abs(local.x) * 2.0) {\n        triangleCoords.x += local.x < 0.0 ? 1.0 : -1.0;\n    }\n    if (local.x >= 0.0 && mody == 0.0) {\n        triangleCoords.x += 2.0;\n    }\n    return triangleCoords;\n}\n\nvec3 getColor(vec2 uv) {\n    uv /= 40.0;\n    vec2 triangle = getTriangleCoords(uv);\n    \n    return vec3(getTriangleShade(triangle, uv));\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord ) {\n\n    vec2 uv = fragCoord/iResolution.xy - vec2(0.5, 0.5);\n    uv *= 1200.;\n    fragColor = vec4(getColor(uv), 1.0);\n    \n}","name":"Image","description":"","type":"image"}]}