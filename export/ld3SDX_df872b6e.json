{"ver":"0.1","info":{"id":"ld3SDX","date":"1462295331","viewed":440,"name":"2D Bump Wiggle-Twister","username":"LaBodilsen","description":"trying to create some kind of oldschool look, with raster background and the usual twister.","likes":19,"published":1,"flags":0,"usePreview":0,"tags":["2d","bump","twister","wiggle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRn","filepath":"/media/a/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","previewfilepath":"/media/ap/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//06-05-2016: changed the bump and lightning a bit.\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (2.*fragCoord.xy - iResolution.xy)/ iResolution.y;\n\n\tfloat t = iTime/2.;\n    float a = sin(t)/.9+sin(uv.y-t)/3.;\n\t//Background\n\tfragColor = vec4(texture(iChannel0,-.2/sin(-abs(uv.yy))+t/4.).rrr,1)*abs(uv.y*1.5);    \n\n    //tilt twister\n    uv *= mat2(cos(a),-sin(a),sin(a),cos(a));\n\n    if (abs(uv.x)-.5 < .5){\n\t    uv.y /= 3.;\n\t    vec2 ul = uv/2.;\n\n        //Cylinder mapping + twist\n\t    uv.x = asin(uv.x)/3.14 + (sin(t+uv.y)+sin(t+uv.y*1.1))/2.;\n\n        //Calculate bump normal\n\t    vec2 bump = vec2(0.);\n        bump.x = texture(iChannel0,uv-vec2(.01,0.)).r - texture(iChannel0,uv-vec2(-.01,0.)).r;\n        bump.y = texture(iChannel0,uv-vec2(0.,.01)).r - texture(iChannel0,uv-vec2(0.,-.01)).r;\t\t\n\n        //Calculate highlight + light    \n        float light  = .1/(length(ul.x-bump*1.5)) + 1.-length(ul.x-bump*2.);\n\n        fragColor = texture(iChannel1,uv+.5)*light;\n    }\n}","name":"Image","description":"","type":"image"}]}