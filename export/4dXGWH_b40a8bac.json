{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","sampler":{"filter":"nearest","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}},{"channel":1,"type":"music","id":"4sXGzn","filepath":"/media/a/a6a1cf7a09adfed8c362492c88c30d74fb3d2f4f7ba180ba34b98556660fada1.mp3","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"/*by mu6k, Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n \n I started animating the nyancat image. I looked up the original colors \n for rainbow and background. I kept adding stuff until I ended up with \n something I could watch for 10 hours. Nah 10 hours is too long... or is it? \n\n Feel free to tweak the quality parameter... if you have a monster pc.\n\n quality 1 - no AA, extremely noisy blur.\n quality 2 - 2xAA, decent\n quality 3 - 3xAA, slow here on fullscreen\n quality 4 - 4xAA, doesn't even compile here\n\n Enjoy!\n\n 04/05/2013:\n - published\n\n muuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuusk!*/\n\n#define quality 2\n\nfloat hash(float x)\n{\n\treturn fract(sin(x*.0127863)*17143.321);\n}\n\nfloat hash(vec2 x)\n{\n\treturn fract(sin(dot(x,vec2(1.4,52.14)))*17143.321);\n}\n\n\nfloat hashmix(float x0, float x1, float interp)\n{\n\tx0 = hash(x0);\n\tx1 = hash(x1);\n\t#ifdef noise_use_smoothstep\n\tinterp = smoothstep(0.0,1.0,interp);\n\t#endif\n\treturn mix(x0,x1,interp);\n}\n\nfloat hashmix(vec2 p0, vec2 p1, vec2 interp)\n{\n\tfloat v0 = hashmix(p0[0]+p0[1]*128.0,p1[0]+p0[1]*128.0,interp[0]);\n\tfloat v1 = hashmix(p0[0]+p1[1]*128.0,p1[0]+p1[1]*128.0,interp[0]);\n\t#ifdef noise_use_smoothstep\n\tinterp = smoothstep(vec2(0.0),vec2(1.0),interp);\n\t#endif\n\treturn mix(v0,v1,interp[1]);\n}\n\nfloat hashmix(vec3 p0, vec3 p1, vec3 interp)\n{\n\tfloat v0 = hashmix(p0.xy+vec2(p0.z*43.0,0.0),p1.xy+vec2(p0.z*43.0,0.0),interp.xy);\n\tfloat v1 = hashmix(p0.xy+vec2(p1.z*43.0,0.0),p1.xy+vec2(p1.z*43.0,0.0),interp.xy);\n\t#ifdef noise_use_smoothstep\n\tinterp = smoothstep(vec3(0.0),vec3(1.0),interp);\n\t#endif\n\treturn mix(v0,v1,interp[2]);\n}\n\nfloat hashmix(vec4 p0, vec4 p1, vec4 interp)\n{\n\tfloat v0 = hashmix(p0.xyz+vec3(p0.w*17.0,0.0,0.0),p1.xyz+vec3(p0.w*17.0,0.0,0.0),interp.xyz);\n\tfloat v1 = hashmix(p0.xyz+vec3(p1.w*17.0,0.0,0.0),p1.xyz+vec3(p1.w*17.0,0.0,0.0),interp.xyz);\n\t#ifdef noise_use_smoothstep\n\tinterp = smoothstep(vec4(0.0),vec4(1.0),interp);\n\t#endif\n\treturn mix(v0,v1,interp[3]);\n}\n\nfloat noise(float p)\n{\n\tfloat pm = mod(p,1.0);\n\tfloat pd = p-pm;\n\treturn hashmix(pd,pd+1.0,pm);\n}\n\nfloat noise(vec2 p)\n{\n\tvec2 pm = mod(p,1.0);\n\tvec2 pd = p-pm;\n\treturn hashmix(pd,(pd+vec2(1.0,1.0)), pm);\n}\n\nfloat noise(vec3 p)\n{\n\tvec3 pm = mod(p,1.0);\n\tvec3 pd = p-pm;\n\treturn hashmix(pd,(pd+vec3(1.0,1.0,1.0)), pm);\n}\n\nfloat noise(vec4 p)\n{\n\tvec4 pm = mod(p,1.0);\n\tvec4 pd = p-pm;\n\treturn hashmix(pd,(pd+vec4(1.0,1.0,1.0,1.0)), pm);\n}\n\nvec3 background(vec2 p)\n{\n\tvec2 pm = mod(p,vec2(0.5));\n\tfloat q = pm.x+pm.y;\n\tvec3 color = vec3(13,66,121)/255.0;\n\t\n\tvec2 visuv = p*0.5;\n\tvec2 visuvm = mod(visuv,vec2(0.05,0.05));\n\tvisuv-=visuvm;\n\tfloat vis = texture(iChannel1,vec2((visuv.x+1.0)*.5,0.0)).y*2.0-visuv.y;\n\t\n\tif (vis>1.0&&visuvm.x<0.04&&visuvm.y<0.04)\n\t\tcolor.xyz *=0.85;\n\t\n\tvec2 p2;\n\tfloat stars;\n\tfor (int i=0; i<5; i++)\n\t{\n\t\tfloat s = float(i)*0.2+1.0;\n\t\t//float ts\n\t\tp2=p*s+vec2(iTime/s,s*16.0)-mod(p*s+vec2(iTime/s,s*16.0),vec2(0.05));\n\t\tstars=noise(p2*16.0);\n\t\tif (stars>0.98) color=vec3(1.0,1.0,1.0);\n\t}\n\t\n\tvec2 visuv2 = p*0.25+vec2(iTime*0.1,0);\n\tvec2 visuvm2 = mod(visuv2,vec2(0.05,0.05));\n\tvisuv2-=visuvm2;\n\t\n\tfloat vis2p = hash(visuv2);\n\tfloat vis2 = texture(iChannel1,vec2(vis2p,0)).y;\n\t\n\tvis2 = pow(vis2,20.0)*261.0;\n\tvis2 *= vis2p;\n\t\n\tif (vis2>1.0) vis2=1.0;\n\t\n\tif (vis2>0.2&&visuvm2.x<0.09&&visuvm2.y<0.09)\n\t\tcolor+=vec3(vis2,vis2,vis2)*0.5;\n\t\n\treturn color;\n}\n\nvec4 rainbow(vec2 p)\n{\n\t\n\tp.x-=mod(p.x,0.05);\n\tfloat q = max(p.x,-0.1);\n\tfloat s = sin(p.x*(8.0)+iTime*8.0)*0.09;\n\ts-=mod(s,0.05);\n\tp.y+=s;\n\t\n\t\n//p.y += sin(p.x*8.0+iTime)*0.25;\n\t\n\tvec4 c;\n\t\n\tif (p.x>0.0) c=vec4(0,0,0,0); else\n\tif (0.0/6.0<p.y&&p.y<1.0/6.0) c= vec4(255,43,14,255)/255.0; else\n\tif (1.0/6.0<p.y&&p.y<2.0/6.0) c= vec4(255,168,6,255)/255.0; else\n\tif (2.0/6.0<p.y&&p.y<3.0/6.0) c= vec4(255,244,0,255)/255.0; else\n\tif (3.0/6.0<p.y&&p.y<4.0/6.0) c= vec4(51,234,5,255)/255.0; else\n\tif (4.0/6.0<p.y&&p.y<5.0/6.0) c= vec4(8,163,255,255)/255.0; else\n\tif (5.0/6.0<p.y&&p.y<6.0/6.0) c= vec4(122,85,255,255)/255.0; else\n\t\tc=vec4(0,0,0,0);\n\treturn c;\n}\n\nvec4 nyan(vec2 p)\n{\n\tvec2 uv = p*vec2(0.4,1.0);\n\tfloat ns=2.0;\n\tfloat nt = iTime*ns; nt-=mod(nt,240.0/256.0/6.0); nt = mod(nt,240.0/256.0);\n\tfloat ny = mod(iTime*ns,1.0); ny-=mod(ny,0.75); ny*=-0.05;\n\tvec4 color = texture(iChannel0,vec2(uv.x/3.0+210.0/256.0-nt+0.05,.5-uv.y-ny));\n\tif (uv.x<-0.3) color.a = 0.0;\n\tif (uv.x>0.2) color.a=0.0;\n\treturn color;\n}\n\nvec4 scene(vec2 uv)\n{\n\t\n\tvec4 color = nyan(uv);\n\tvec3 c2 = background(uv+vec2(0,0));\n\tvec4 c3 = rainbow(vec2(uv.x+0.4,0.05-uv.y*2.0+.5));\n\t\n\tvec4 c4 = mix(vec4(c2,1.0),c3,c3.a);\n\t\t\n\tcolor = mix(c4,color,color[3]);\n\treturn color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat vol = .0;\n\tfor(float x = 0.0; x<1.0; x+=1.0/256.0)\n\t{\n\t\tvol += texture(iChannel1,vec2(x,0.0)).y;\n\t}\n\tvol*=1.0/256.0;\n\tvol = pow(vol,16.0)*256.0;\n\t\n\t\n\tvec2 uv = fragCoord.xy / iResolution.xy-0.5;\n\tuv.x*=iResolution.x/iResolution.y;\n\tvec2 ouv=uv;\n\tfloat t = iTime-length(uv)*0.5;\n\t\n\tuv.x+=sin(t*0.4)*0.05;\n\tuv.y+=cos(t)*0.05;\n\n\t\n\tfloat angle = (cos(t*0.461)+cos(t*0.71)+cos(t*0.342)+cos(t*0.512))*0.2;\n\tangle+=sin(t*16.0)*vol*0.1;\n\tfloat zoom = (cos(t*0.364)+cos(t*0.686)+cos(t*0.286)+cos(t*0.496))*0.2;\n\tuv*=pow(2.0,zoom+1.0-vol*4.0);\n\tuv=uv*mat2(cos(angle),-sin(angle),sin(angle),cos(angle));\n\t\n\t\n\tvec4 color = vec4(0);\n\t\n\tuv.y+=vol;\n\n\tfor(int x = 0; x<quality; x++)\n\tfor(int y = 0; y<quality; y++)\n\t{\n\t\tfloat xx = float(x)*2.0/float(quality)/iResolution.y;\n\t\tfloat yy = float(y)*2.0/float(quality)/iResolution.y;\n\t\tfloat n = hash(color.xy+ouv+vec2(float(x),float(y)));\n\t\tfloat s = 1.0-pow(n,10.0)*vol*17.0;\n\t\tcolor += scene((uv+vec2(xx,yy))*s)/float(quality*quality)*(1.0+vol);\n\t}\n\n\tcolor-=vec4(length(uv)*0.05);\n\tcolor.xyz+=vec3(hash(color.xy+ouv))*0.02;\n\tfragColor = color;\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4dXGWH","date":"1368205850","viewed":3632,"name":"Nyancat","username":"mu6k","description":"I started animating the nyancat image. I looked up the original colors for rainbow and background. I kept adding stuff until I ended up with something I could watch for 10 hours. Nah 10 hours is too long... or is it? Enjoy!","likes":52,"published":1,"flags":0,"usePreview":0,"tags":["2d","nyan","pixel","audio"],"hasliked":0,"parentid":"","parentname":""}}