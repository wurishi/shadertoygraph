{"ver":"0.1","info":{"id":"4stBW7","date":"1525441013","viewed":594,"name":"Beethoven Pathetique Mov 2","username":"akhgary","description":"Lovely piano sonata composed by Ludwig van Beethoven. \n\nMay take a while to compile.\nUnfortunately timer stops working after 180 seconds. anyone knows how to fix it?","likes":10,"published":1,"flags":8,"usePreview":1,"tags":["sound","music","piano","classic","fantasy"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// ==================================\n// Beethoven's Pathetique sonata, midi:\n// http://www.piano-midi.de/beeth.htm\n// ==================================\n// Piano key frequencies:\n// https://en.wikipedia.org/wiki/Piano_key_frequencies\n// ==================================\n//\n// just converted the midi into hard coded sound shader.\n// \n\nfloat bubble(vec2 uv, vec2 C, float r, float b)\n{\n    return clamp(1./clamp(length(uv-C)-r,0.,1.)/5.,0.,b);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n\n    float time = iTime/100.+123.;\n    vec3 col = 0.5 + 0.5*cos(time*31.+uv.xyx+vec3(0,2,4));\n    vec3 bubbles = vec3(0);\n    \n    for(int i = 0; i < 15; i++){\n        \n        float n = float(i);\n        float c = 2.*(n/14.-.5)*iResolution.x/iResolution.y;\n        vec2 p = vec2(c+cos(n+time*5.),sin(time*n/11.));\n        float r = 0.01*abs(sin(n*time));\n        float b = (sin(time*n)*11.+13.)/2.;\n        \n        bubbles += bubble(uv,p,r,b)/15.;\n    }\n    \n    fragColor = vec4(col+bubbles,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float frequency(int note){\n    return pow(2., float(note-49)/12.)*440.;\n}\n\nbool between(float time, float start, float end){\n    return time>=start && time<=end;\n}\n\nfloat wave(float time, float start, float end, float amp, int note){\n    \n    if(!between(time, start, end+1.)) return 0.;\n    \n    float delta = time-start, remaining = end-time;\n    \n    float attack = smoothstep(0.0,.04, delta);\n    float decay = exp(-delta);\n    float release = smoothstep(-.2,.0, remaining);\n    float timbre = sin(6.28318*delta*frequency(note));\n    \n    return amp*timbre*attack*decay*release;\n}\n\nfloat page1(float time) {\n    float sound = 0.;\n\tsound += wave(time, 0.00, 0.56, 0.22, 56);\n\tsound += wave(time, 0.56, 1.12, 0.19, 51);\n\tsound += wave(time, 1.12, 1.69, 0.20, 56);\n\tsound += wave(time, 0.00, 2.27, 0.39, 60);\n\tsound += wave(time, 0.00, 2.27, 0.31, 44);\n\tsound += wave(time, 1.69, 2.27, 0.18, 51);\n\tsound += wave(time, 2.27, 2.84, 0.22, 55);\n\tsound += wave(time, 2.84, 3.38, 0.19, 51);\n\tsound += wave(time, 3.38, 3.94, 0.20, 55);\n\tsound += wave(time, 2.27, 4.52, 0.36, 58);\n\tsound += wave(time, 2.27, 4.52, 0.28, 49);\n\tsound += wave(time, 3.94, 4.52, 0.19, 51);\n\tsound += wave(time, 4.52, 5.08, 0.22, 56);\n\tsound += wave(time, 5.08, 5.61, 0.20, 51);\n\tsound += wave(time, 5.61, 6.16, 0.20, 56);\n\tsound += wave(time, 4.52, 6.70, 0.31, 48);\n\tsound += wave(time, 6.16, 6.70, 0.20, 51);\n\tsound += wave(time, 6.70, 7.24, 0.22, 58);\n\tsound += wave(time, 4.52, 7.78, 0.39, 63);\n\tsound += wave(time, 7.24, 7.78, 0.20, 51);\n\tsound += wave(time, 7.78, 8.32, 0.20, 58);\n\tsound += wave(time, 7.78, 8.89, 0.38, 61);\n\tsound += wave(time, 6.70, 8.89, 0.29, 43);\n\tsound += wave(time, 8.32, 8.89, 0.20, 51);\n\tsound += wave(time, 8.89, 9.45, 0.23, 56);\n\tsound += wave(time, 8.89, 9.98, 0.37, 60);\n\tsound += wave(time, 8.89, 9.98, 0.26, 44);\n\tsound += wave(time, 9.45, 9.98, 0.20, 51);\n\tsound += wave(time, 9.98, 10.52, 0.20, 58);\n\tsound += wave(time, 9.98, 11.07, 0.39, 63);\n\tsound += wave(time, 9.98, 11.07, 0.28, 43);\n\tsound += wave(time, 10.52, 11.07, 0.18, 51);\n\tsound += wave(time, 11.07, 11.62, 0.24, 60);\n\tsound += wave(time, 11.07, 12.19, 0.40, 68);\n\tsound += wave(time, 11.07, 12.19, 0.30, 41);\n\tsound += wave(time, 11.62, 12.19, 0.20, 56);\n\tsound += wave(time, 12.19, 12.76, 0.21, 62);\n\tsound += wave(time, 12.19, 13.35, 0.44, 70);\n\tsound += wave(time, 12.19, 13.35, 0.31, 53);\n\tsound += wave(time, 12.76, 13.35, 0.17, 56);\n\tsound += wave(time, 13.35, 13.92, 0.22, 55);\n\tsound += wave(time, 13.92, 14.47, 0.18, 58);\n\tsound += wave(time, 14.47, 15.00, 0.18, 55);\n\tsound += wave(time, 13.35, 15.54, 0.28, 51);\n\tsound += wave(time, 15.00, 15.54, 0.18, 58);\n\tsound += wave(time, 15.54, 16.08, 0.22, 55);\n\tsound += wave(time, 13.35, 16.63, 0.39, 63);\n\tsound += wave(time, 16.08, 16.63, 0.18, 58);\n\tsound += wave(time, 16.63, 17.20, 0.20, 55);\n\tsound += wave(time, 16.63, 17.79, 0.36, 64);\n\tsound += wave(time, 15.54, 17.79, 0.28, 39);\n\tsound += wave(time, 17.20, 17.79, 0.19, 58);\n\tsound += wave(time, 17.79, 18.35, 0.22, 55);\n\tsound += wave(time, 18.35, 18.88, 0.19, 58);\n\tsound += wave(time, 18.88, 19.43, 0.20, 55);\n\tsound += wave(time, 19.43, 19.99, 0.18, 58);\n\tsound += wave(time, 17.79, 20.00, 0.39, 65);\n\tsound += wave(time, 17.79, 20.00, 0.31, 37);\n\tsound += wave(time, 20.00, 20.57, 0.22, 55);\n\tsound += wave(time, 20.57, 21.09, 0.19, 51);\n\tsound += wave(time, 20.00, 21.64, 0.39, 58);\n\tsound += wave(time, 21.09, 21.64, 0.19, 55);\n\tsound += wave(time, 21.64, 21.93, 0.36, 60);\n\tsound += wave(time, 21.93, 22.22, 0.36, 61);\n\tsound += wave(time, 20.00, 22.22, 0.28, 49);\n\tsound += wave(time, 21.64, 22.22, 0.19, 51);\n\tsound += wave(time, 22.22, 22.78, 0.22, 56);\n\tsound += wave(time, 22.78, 23.30, 0.21, 51);\n\tsound += wave(time, 23.30, 23.85, 0.21, 56);\n\tsound += wave(time, 22.22, 24.43, 0.39, 63);\n\tsound += wave(time, 22.22, 24.43, 0.31, 48);\n\tsound += wave(time, 23.85, 24.43, 0.20, 51);\n\tsound += wave(time, 24.43, 25.00, 0.22, 51);\n\tsound += wave(time, 25.00, 25.52, 0.19, 48);\n\tsound += wave(time, 25.52, 26.07, 0.20, 51);\n\tsound += wave(time, 24.43, 26.65, 0.38, 57);\n\tsound += wave(time, 24.43, 26.65, 0.28, 41);\n\tsound += wave(time, 26.07, 26.65, 0.19, 48);\n\tsound += wave(time, 26.65, 27.22, 0.23, 53);\n\tsound += wave(time, 27.22, 27.74, 0.20, 49);\n\tsound += wave(time, 27.74, 28.29, 0.21, 53);\n\tsound += wave(time, 28.29, 28.81, 0.19, 49);\n\tsound += wave(time, 26.65, 28.87, 0.39, 61);\n\tsound += wave(time, 26.65, 28.87, 0.31, 34);\n\tsound += wave(time, 28.87, 29.38, 0.24, 49);\n\tsound += wave(time, 28.87, 29.44, 0.38, 60);\n\tsound += wave(time, 29.44, 29.93, 0.20, 49);\n\tsound += wave(time, 29.44, 29.99, 0.38, 58);\n\tsound += wave(time, 29.99, 30.51, 0.22, 49);\n\tsound += wave(time, 29.99, 30.57, 0.38, 56);\n\tsound += wave(time, 30.57, 31.10, 0.20, 49);\n\tsound += wave(time, 30.57, 31.16, 0.38, 55);\n\tsound += wave(time, 28.87, 31.16, 0.27, 39);\n\tsound += wave(time, 31.16, 31.75, 0.24, 49);\n\tsound += wave(time, 31.16, 32.33, 0.29, 32);\n\tsound += wave(time, 31.75, 32.33, 0.20, 51);\n\tsound += wave(time, 32.33, 32.92, 0.22, 49);\n\tsound += wave(time, 31.16, 33.54, 0.39, 58);\n\tsound += wave(time, 31.16, 33.54, 0.31, 55);\n\tsound += wave(time, 32.33, 33.54, 0.23, 44);\n\treturn sound;\n}\n\nfloat page2(float time) {\n    float sound = 0.;\n\tsound += wave(time, 32.92, 33.54, 0.19, 51);\n\tsound += wave(time, 33.54, 33.85, 0.28, 48);\n\tsound += wave(time, 33.95, 34.26, 0.27, 51);\n\tsound += wave(time, 33.54, 34.67, 0.39, 56);\n\tsound += wave(time, 33.54, 34.77, 0.28, 32);\n\tsound += wave(time, 34.77, 35.08, 0.28, 60);\n\tsound += wave(time, 35.18, 35.49, 0.28, 63);\n\tsound += wave(time, 35.60, 35.94, 0.28, 68);\n\tsound += wave(time, 36.06, 36.62, 0.22, 60);\n\tsound += wave(time, 36.06, 36.62, 0.20, 56);\n\tsound += wave(time, 36.62, 37.18, 0.19, 63);\n\tsound += wave(time, 36.62, 37.18, 0.17, 51);\n\tsound += wave(time, 37.18, 37.75, 0.20, 60);\n\tsound += wave(time, 37.18, 37.75, 0.18, 56);\n\tsound += wave(time, 36.06, 38.32, 0.39, 72);\n\tsound += wave(time, 37.75, 38.32, 0.18, 63);\n\tsound += wave(time, 36.06, 38.32, 0.31, 44);\n\tsound += wave(time, 37.75, 38.32, 0.16, 51);\n\tsound += wave(time, 38.32, 38.89, 0.22, 58);\n\tsound += wave(time, 38.32, 38.89, 0.20, 55);\n\tsound += wave(time, 38.89, 39.42, 0.19, 63);\n\tsound += wave(time, 38.89, 39.42, 0.17, 51);\n\tsound += wave(time, 39.42, 39.97, 0.20, 58);\n\tsound += wave(time, 39.42, 39.97, 0.18, 55);\n\tsound += wave(time, 38.32, 40.54, 0.36, 70);\n\tsound += wave(time, 39.97, 40.54, 0.19, 63);\n\tsound += wave(time, 38.32, 40.54, 0.28, 49);\n\tsound += wave(time, 39.97, 40.54, 0.17, 51);\n\tsound += wave(time, 40.54, 41.11, 0.22, 63);\n\tsound += wave(time, 40.54, 41.11, 0.20, 56);\n\tsound += wave(time, 41.11, 41.64, 0.20, 68);\n\tsound += wave(time, 41.11, 41.64, 0.17, 51);\n\tsound += wave(time, 41.64, 42.18, 0.20, 63);\n\tsound += wave(time, 41.64, 42.18, 0.17, 56);\n\tsound += wave(time, 42.18, 42.73, 0.20, 68);\n\tsound += wave(time, 40.54, 42.73, 0.31, 48);\n\tsound += wave(time, 42.18, 42.73, 0.17, 51);\n\tsound += wave(time, 42.73, 43.27, 0.22, 63);\n\tsound += wave(time, 42.73, 43.27, 0.20, 55);\n\tsound += wave(time, 40.54, 43.80, 0.39, 75);\n\tsound += wave(time, 43.27, 43.80, 0.20, 70);\n\tsound += wave(time, 43.27, 43.80, 0.17, 51);\n\tsound += wave(time, 43.80, 44.34, 0.20, 63);\n\tsound += wave(time, 43.80, 44.34, 0.17, 55);\n\tsound += wave(time, 43.80, 44.91, 0.38, 73);\n\tsound += wave(time, 44.34, 44.91, 0.20, 70);\n\tsound += wave(time, 42.73, 44.91, 0.29, 43);\n\tsound += wave(time, 44.34, 44.91, 0.17, 51);\n\tsound += wave(time, 44.91, 45.48, 0.24, 63);\n\tsound += wave(time, 44.91, 45.48, 0.24, 56);\n\tsound += wave(time, 44.91, 46.01, 0.37, 72);\n\tsound += wave(time, 45.48, 46.01, 0.24, 68);\n\tsound += wave(time, 44.91, 46.01, 0.32, 44);\n\tsound += wave(time, 45.48, 46.01, 0.24, 51);\n\tsound += wave(time, 46.01, 46.55, 0.25, 63);\n\tsound += wave(time, 46.01, 46.55, 0.24, 55);\n\tsound += wave(time, 46.01, 47.10, 0.39, 75);\n\tsound += wave(time, 46.55, 47.10, 0.26, 70);\n\tsound += wave(time, 46.01, 47.10, 0.35, 43);\n\tsound += wave(time, 46.55, 47.10, 0.24, 51);\n\tsound += wave(time, 47.10, 47.65, 0.26, 68);\n\tsound += wave(time, 47.10, 47.65, 0.24, 53);\n\tsound += wave(time, 47.10, 48.22, 0.40, 80);\n\tsound += wave(time, 47.65, 48.22, 0.27, 72);\n\tsound += wave(time, 47.10, 48.22, 0.36, 41);\n\tsound += wave(time, 47.65, 48.22, 0.25, 44);\n\tsound += wave(time, 48.22, 48.79, 0.28, 68);\n\tsound += wave(time, 48.22, 48.79, 0.25, 53);\n\tsound += wave(time, 48.22, 49.38, 0.44, 82);\n\tsound += wave(time, 48.79, 49.38, 0.28, 74);\n\tsound += wave(time, 48.22, 49.38, 0.39, 41);\n\tsound += wave(time, 48.79, 49.38, 0.25, 44);\n\tsound += wave(time, 49.38, 49.94, 0.26, 67);\n\tsound += wave(time, 49.38, 49.94, 0.36, 39);\n\tsound += wave(time, 49.94, 50.50, 0.20, 70);\n\tsound += wave(time, 49.94, 50.50, 0.20, 43);\n\tsound += wave(time, 50.50, 51.03, 0.20, 67);\n\tsound += wave(time, 50.50, 51.03, 0.20, 46);\n\tsound += wave(time, 51.03, 51.57, 0.20, 70);\n\tsound += wave(time, 51.03, 51.57, 0.20, 51);\n\tsound += wave(time, 51.57, 52.11, 0.23, 67);\n\tsound += wave(time, 51.57, 52.11, 0.22, 55);\n\tsound += wave(time, 49.38, 52.66, 0.39, 75);\n\tsound += wave(time, 52.11, 52.66, 0.24, 70);\n\tsound += wave(time, 52.11, 52.66, 0.24, 58);\n\tsound += wave(time, 52.66, 53.23, 0.26, 67);\n\tsound += wave(time, 52.66, 53.23, 0.26, 55);\n\tsound += wave(time, 52.66, 53.82, 0.36, 76);\n\tsound += wave(time, 53.23, 53.82, 0.27, 70);\n\tsound += wave(time, 53.23, 53.82, 0.28, 58);\n\tsound += wave(time, 53.82, 54.38, 0.24, 67);\n\tsound += wave(time, 53.82, 54.38, 0.31, 37);\n\tsound += wave(time, 54.38, 54.91, 0.19, 70);\n\tsound += wave(time, 54.38, 54.91, 0.19, 43);\n\tsound += wave(time, 54.91, 55.45, 0.20, 67);\n\tsound += wave(time, 54.91, 55.45, 0.20, 46);\n\tsound += wave(time, 55.45, 56.02, 0.18, 70);\n\tsound += wave(time, 53.82, 56.03, 0.39, 77);\n\tsound += wave(time, 55.45, 56.03, 0.18, 49);\n\tsound += wave(time, 56.03, 56.59, 0.22, 67);\n\treturn sound;\n}\n\nfloat page3(float time) {\n    float sound = 0.;\n\tsound += wave(time, 56.03, 56.59, 0.20, 55);\n\tsound += wave(time, 56.59, 57.12, 0.19, 63);\n\tsound += wave(time, 56.59, 57.12, 0.17, 58);\n\tsound += wave(time, 56.03, 57.66, 0.39, 70);\n\tsound += wave(time, 57.12, 57.66, 0.19, 67);\n\tsound += wave(time, 57.12, 57.66, 0.17, 55);\n\tsound += wave(time, 57.66, 57.95, 0.36, 72);\n\tsound += wave(time, 57.95, 58.24, 0.36, 73);\n\tsound += wave(time, 57.66, 58.24, 0.19, 63);\n\tsound += wave(time, 57.66, 58.24, 0.17, 49);\n\tsound += wave(time, 58.24, 58.80, 0.24, 68);\n\tsound += wave(time, 58.80, 59.33, 0.21, 63);\n\tsound += wave(time, 58.80, 59.33, 0.21, 51);\n\tsound += wave(time, 58.24, 59.33, 0.31, 48);\n\tsound += wave(time, 59.33, 59.88, 0.21, 68);\n\tsound += wave(time, 59.88, 60.31, 0.20, 63);\n\tsound += wave(time, 58.24, 60.46, 0.39, 75);\n\tsound += wave(time, 59.88, 60.46, 0.20, 51);\n\tsound += wave(time, 59.33, 60.46, 0.21, 48);\n\tsound += wave(time, 60.46, 61.02, 0.22, 63);\n\tsound += wave(time, 60.46, 61.02, 0.20, 48);\n\tsound += wave(time, 61.02, 61.55, 0.19, 60);\n\tsound += wave(time, 61.02, 61.55, 0.17, 53);\n\tsound += wave(time, 61.55, 62.10, 0.20, 63);\n\tsound += wave(time, 61.55, 62.10, 0.18, 48);\n\tsound += wave(time, 60.46, 62.68, 0.38, 69);\n\tsound += wave(time, 62.10, 62.68, 0.19, 60);\n\tsound += wave(time, 60.46, 62.68, 0.28, 41);\n\tsound += wave(time, 62.10, 62.68, 0.17, 53);\n\tsound += wave(time, 62.68, 63.24, 0.23, 65);\n\tsound += wave(time, 62.68, 63.24, 0.20, 49);\n\tsound += wave(time, 63.24, 63.77, 0.20, 61);\n\tsound += wave(time, 63.24, 63.77, 0.17, 53);\n\tsound += wave(time, 63.77, 64.32, 0.21, 65);\n\tsound += wave(time, 63.77, 64.32, 0.19, 49);\n\tsound += wave(time, 64.32, 64.75, 0.19, 61);\n\tsound += wave(time, 62.68, 64.90, 0.39, 73);\n\tsound += wave(time, 62.68, 64.90, 0.31, 46);\n\tsound += wave(time, 64.32, 64.90, 0.17, 53);\n\tsound += wave(time, 64.90, 65.32, 0.24, 61);\n\tsound += wave(time, 64.90, 65.46, 0.38, 72);\n\tsound += wave(time, 64.90, 65.46, 0.21, 46);\n\tsound += wave(time, 65.46, 65.88, 0.20, 61);\n\tsound += wave(time, 65.46, 66.01, 0.38, 70);\n\tsound += wave(time, 65.46, 66.01, 0.18, 51);\n\tsound += wave(time, 66.01, 66.45, 0.22, 61);\n\tsound += wave(time, 66.01, 66.59, 0.38, 68);\n\tsound += wave(time, 66.01, 66.59, 0.20, 46);\n\tsound += wave(time, 66.59, 67.04, 0.20, 61);\n\tsound += wave(time, 66.59, 67.19, 0.38, 67);\n\tsound += wave(time, 64.90, 67.19, 0.27, 39);\n\tsound += wave(time, 66.59, 67.19, 0.18, 51);\n\tsound += wave(time, 67.19, 67.78, 0.24, 61);\n\tsound += wave(time, 67.78, 68.36, 0.20, 63);\n\tsound += wave(time, 67.78, 68.36, 0.18, 51);\n\tsound += wave(time, 68.36, 68.95, 0.22, 61);\n\tsound += wave(time, 68.36, 68.95, 0.20, 55);\n\tsound += wave(time, 67.19, 69.57, 0.39, 70);\n\tsound += wave(time, 68.95, 69.57, 0.19, 63);\n\tsound += wave(time, 68.95, 69.57, 0.17, 51);\n\tsound += wave(time, 69.57, 70.80, 0.39, 68);\n\tsound += wave(time, 69.57, 70.80, 0.28, 60);\n\tsound += wave(time, 69.57, 70.80, 0.28, 56);\n\tsound += wave(time, 67.19, 70.80, 0.29, 44);\n\treturn sound;\n}\n\nvec2 mainSound( in int samp,float time)\n{\n    float sound = 0.;\n    \n\tif(between(time, 0.00, 33.54)) sound += page1(time);\n\tif(between(time, 32.92, 56.59)) sound += page2(time);\n\tif(between(time, 56.03, 71.87)) sound += page3(time);\n\n    return vec2(sound)/5.;\n}","name":"Sound","description":"","type":"sound"}]}