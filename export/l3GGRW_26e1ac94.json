{"ver":"0.1","info":{"id":"l3GGRW","date":"1717346994","viewed":107,"name":"pantera rosa","username":"jorge2017a2","description":"pantera rosa","likes":9,"published":1,"flags":8,"usePreview":0,"tags":["panterarosa"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//por jorge2017a2\n//pantera rosa\n//referencia\n//https://iquilezles.org/articles/distfunctions2d\n///2-jun-2024-\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n\n#define S(d,b) smoothstep(antialiasing(1.5),0. , d - (b) )\n#define S2(d,b) smoothstep(8.0*antialiasing(1.5),0.,d - (b) )\n#define S3(d,b) smoothstep(1.0/antialiasing(0.5),0. , d - (b) )\n\n#define PI     3.14159265\n#define TWO_PI 6.28318530\nfloat Sdf_I(float distA, float distB)\n\t{ return max(distA, distB);}\nfloat Sdf_U(float distA, float distB)\n\t{ return min(distA, distB);}\nfloat Sdf_D(float distA, float distB)\n\t{ return max(distA, -distB);}\n\n\n\nvec3 DFB(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S3( distObj,0.0));\n  colOut = mix(colOut,vec3(0.0),S3(abs( distObj)-0.005,0.0));\n  return colOut;\n}\n\n\n///oneshade    \nvec2 Rotate(in vec2 p, in vec2 o, in float r) \n{   float c = cos(r), s = sin(r);\n    return (p - o) * mat2(c, -s, s, c) + o;\n}\n\n\nfloat sdBox( in vec2 p, in vec2 b )\n{ vec2 d = abs(p)-b;  return length(max(d,0.0)) + min(max(d.x,d.y),0.0);  }\n\nfloat sdCircle( vec2 p, float r )\n{ return length(p) - r;}\n\nfloat divf(float a, float b)\n{\n    //evita crash por 1/0.0 =Infinito=error, en compilar\n    if(b==0.0)\n    {b=0.00001;}\n    return a/b;\n}\n\n\nfloat sdSegment( in vec2 p, in vec2 a, in vec2 b )\n{  vec2 pa = p-a, ba = b-a;\n    float h = clamp( divf( dot(pa,ba),dot(ba,ba)), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\n// signed distance to an equilateral triangle\nfloat sdEquilateralTriangle(  in vec2 p, in float r )\n{\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + r/k;\n    if( p.x+k*p.y>0.0 ) p=vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n    p.x -= clamp( p.x, -2.0*r, 0.0 );\n    return -length(p)*sign(p.y);\n}\n\n\nfloat sdUnevenCapsule( vec2 p, float r1, float r2, float h )\n{\n    p.x = abs(p.x);\n    float b = (r1-r2)/h;\n    float a = sqrt(1.0-b*b);\n    float k = dot(p,vec2(-b,a));\n    if( k < 0.0 ) return length(p) - r1;\n    if( k > a*h ) return length(p-vec2(0.0,h)) - r2;\n    return dot(p, vec2(a,b) ) - r1;\n}\n\n\nvec3 pantera(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1 ;\n\nA=vec2(0.52098,0.56294);\nmed=vec2(0.4021,0.19231);\nfloat d1=sdEllipse(p-A,med);\n\nA=vec2(0.52098,0.52448);\nmed=vec2(0.41958,0.15734);\nfloat d2=sdEllipse(p-A,med);\n\nA=vec2(0.98601,0.65231);\nmed=vec2(0.08741,0.12238);\nfloat ang=50.000 * PI / 180.0;\n pr = Rotate(p-A, med/2.0, ang);\nfloat d3=sdEllipse(pr,med);\n\nA=vec2(0.08392,0.752);\nmed=vec2(0.08741,0.12238);\n ang=-50.000 * PI / 180.0;\n pr = Rotate(p-A, med/2.0, ang);\nfloat d4=sdEllipse(pr,med);\n    \n    dfin=999.9;\n    dfin=d1;\n    dfin=Sdf_U(dfin,d2);\n    dfin=Sdf_U(dfin,d3); //oreja der\n    dfin=Sdf_U(dfin,d4); //oreja izq\n    vec3 colc=vec3(0.97,0.61,0.7);\n    \n    colout= DFB(colc, colout, dfin);\n    return colout;\n\n}\n\nvec3 ojos(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1 ;\n\nvec3 colc=vec3(0.99,0.93,0.07);\n\n//der\nA=vec2(0.63636,0.6958);\nA=vec2(0.60636,0.6958);\nmed=vec2(0.08741,0.10839);\nfloat ang=-40.000 * PI / 180.0;\n pr = Rotate(p-A, med/2.0, ang);\nfloat d1=sdEllipse(pr,med);\n\n//izq\nA=vec2(0.45105,0.67832);\nA=vec2(0.5105,0.67832);\nmed=vec2(0.09091,0.10839);\n ang=40.000 * PI / 180.0;\n pr = Rotate(p-A, med/2.0, ang);\nfloat d2=sdEllipse(pr,med);\n\ndfin=Sdf_U(d1,d2);\ncolout= DFB(colc, colout,dfin);\n\n\n//pupila\nA=vec2(0.47203,0.66783);\nr1=0.02448;\nfloat d3=sdCircle(p-A,r1);\n//d3+=nivel*2.0;\ncolout= DFB(vec3(0.0), colout, d3);\n\n//pupila\nA=vec2(0.61888,0.67483);\nr1=0.02448;\nfloat d4=sdCircle(p-A,r1);\ncolout= DFB(vec3(0.0), colout, d4);\n    return colout;\n}\n\n\nvec3 nariz(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang ;\n\nvec3 colc=vec3(0.96,0.6,0.82);  //rosa\nvec3 colb=vec3(0.99,0.51,0.7);\n\nA=vec2(0.55245,0.57552);\nmed=vec2(0.0744,0.05944);\nfloat d1=sdEquilateralTriangle(p-A,med.x);\ncolout= DFB(colc, colout, d1);\n\nA=vec2(0.55245,0.6042);\nmed=vec2(0.0744,0.05944);\nfloat d2=sdEquilateralTriangle(vec2(p.x, -p.y+1.09)-A,med.x);\ncolout= DFB(colb, colout, d2);\nreturn colout;\n}\n\n\nvec3 boca(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1 ;\n\nvec3 colc=vec3(0.97,0.76,0.82);\n\nA=vec2(0.55944,0.3951);\nmed=vec2(0.24126,0.16084);\nfloat ang=-5.000 * PI / 180.0;\n pr = Rotate(p-A, med/2.0, ang);\nfloat d1=sdEllipse(pr,med);\n\nA=vec2(0.55245,0.20979);\nmed=vec2(0.24126,0.16084);\n ang=-5.000 * PI / 180.0;\n pr = Rotate(p-A, med/2.0, ang);\nfloat d2=sdEllipse(pr,med);\n\nA=vec2(0.55545,0.32867);\nmed=vec2(0.15385,0.16084);\n ang=15.000 * PI / 180.0;\n pr = Rotate(p-A, med/2.0, ang);\nfloat d3=sdEllipse(pr,med);\n\ncolout= DFB(colc, colout, d3);\n    \n    dfin=Sdf_D(d1,d2);\n    colout= DFB(colc, colout, dfin);\n    \n    return colout;\n}\n\n\nvec3 cuello(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1 ;\n\nvec3 colc=vec3(0.97,0.61,0.7);\n\nA=vec2(0.53147,0.14336);\nmed=vec2(0.06643,0.15734);\nfloat d1=sdBox(p-A,med);\ncolout= DFB(colc, colout, d1);\n    return colout;\n}\n\nvec3 pestana(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1 ;\np.x+=0.7;\np.y+=0.6;\n\nA=vec2(0.48657,0.78469);\nmed=vec2(0.03147,0.08741);\nfloat ang=15.000 * PI / 180.0;\n pr = Rotate(p-A, med/2.0, ang);\nfloat d1=sdBox(pr-A,med);\ncolout= DFB(vec3(0.0), colout, d1);\n\nA=vec2(0.75734,0.62517);\nmed=vec2(0.03147,0.06993);\n ang=-15.000 * PI / 180.0;\n pr = Rotate(p-A, med/2.0, ang);\nfloat d2=sdBox(pr-A,med);\ncolout= DFB(vec3(0.0), colout, d2);\n    return colout;\n}\n\nvec3 Lineaboca(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1 ;\n\nA=vec2(0.54196,0.37063);\nB=vec2(0.54196,0.41259);\nfloat d1=sdSegment(p,A,B);\ncolout= DFB(vec3(0.0), colout, d1);\nreturn colout;\n}\n\nvec3 figOreja(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1 ;\n\n\nvec3 colc=vec3(0.97,0.76,0.82);  //rosa\n\nA=vec2(0.14042,0.7182);\nr1=0.02098;\nfloat d1=sdUnevenCapsule(vec2(p.x,-p.y+1.45)-A,r1,r1-0.05,0.1);\ncolout= DFB(colc, colout, d1);\n\nA=vec2(0.97902,0.70483);\nr1=0.02098;\nfloat d2=sdUnevenCapsule(vec2(p.x, -p.y+1.45)-A,r1,r1-0.05,0.1);\n\ncolout= DFB(colc, colout, d2);\n    return colout;\n}\n\n\nvec3 figrostro(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1 ;\n\nA=vec2(0.38811,0.55944);\nB=vec2(0.44056,0.56993);\nfloat d1=sdSegment(p,A,B);\ncolout= DFB(vec3(0.0), colout, d1);\n\nA=vec2(0.32168,0.57343);\nB=vec2(0.38112,0.55944);\nfloat d2=sdSegment(p,A,B);\ncolout= DFB(vec3(0.0), colout, d2);\n\nA=vec2(0.67832,0.57692);\nB=vec2(0.61888,0.6014);\nfloat d3=sdSegment(p,A,B);\ncolout= DFB(vec3(0.0), colout, d3);\n\nA=vec2(0.67832,0.57692);\nB=vec2(0.73776,0.58741);\nfloat d4=sdSegment(p,A,B);\ncolout= DFB(vec3(0.0), colout, d4);\n    return colout;\n}\n\nvec3 bigote(vec2 uv, vec3 col)\n{\n\nuv.x-=0.05;\nvec2 pc1p1=vec2(.634,.434);\nvec2 pc1p2=vec2(.820,.406);\nvec2 pc1p3=vec2(.969,.329);\n\nvec2 pc2p1=vec2(.634,.392);\nvec2 pc2p2=vec2(.814,.325);\nvec2 pc2p3=vec2(.963,.206);\n\nvec2 pc3p1=vec2(.016,.297);\nvec2 pc3p2=vec2(.199,.406);\nvec2 pc3p3=vec2(.363,.413);\n\nvec2 pc4p1=vec2(.022,.168);\nvec2 pc4p2=vec2(.193,.336);\nvec2 pc4p3=vec2(.376,.381);\n\n\nfloat d1= sdBezier(uv,pc1p1,pc1p2,pc1p3);\nfloat d2= sdBezier(uv,pc2p1,pc2p2,pc2p3);\nfloat d3= sdBezier(uv,pc3p1,pc3p2,pc3p3);\nfloat d4= sdBezier(uv,pc4p1,pc4p2,pc4p3);\n\nvec3 C1=vec3(0.0);\ncol=DFB(C1,col,d1);\ncol=DFB(C1,col,d2);\ncol=DFB(C1,col,d3);\ncol=DFB(C1,col,d4);\n\n    return col;\n}\n\nvec3 tdo_pantera(vec2 p, vec3 colout)\n{\n\n    colout=cuello(p,colout);\n    colout=pantera(p, colout);\n    colout=pestana(p,colout);\n    colout=ojos(p, colout);\n    colout=boca(p,colout);\n    colout= nariz(p,colout);\n    colout= Lineaboca(p,colout);\n    colout=figOreja(p,colout);\n    colout=figrostro(p,colout);\n    colout=bigote(p,colout);\n    \n    return colout;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = ( 2. * fragCoord - iResolution.xy ) / iResolution.y;\n    uv-=vec2(0.0,-0.5);\n    float esc=1.0;\n    uv*=esc;\n    uv+=vec2(0.25*cos(-iTime), 0.25*sin(-iTime));\n    vec2 uv0=uv;\n    vec3 col=vec3(0.5,0.1,1.0)-uv.y*0.5;    \n    //col= tdo_pantera(uv*0.5,col);\n    col= tdo_pantera(uv,col);\n    col= tdo_pantera(uv*2.0+vec2(0.25,0.5),col);\n    col= tdo_pantera(uv*2.0+vec2(-1.20,0.5),col);\n    col=pow(col,  vec3(0.54545));\n    fragColor = vec4(col,1.0);\n}\n\n\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"///-modificado por jorge flores p.\n///referencia\n//https://www.shadertoy.com/view/4XVGRh ... me_123\n\nfloat hash(float p)\n{\n\tvec3 p3 = fract(p * vec3(.1031, .1030, .0973));\n    p3 += dot(p3, p3.yxz+33.33);\n    return fract(fract(fract(p3.x)*100.*p3.y)*1000.*p3.z+dot(fract(p3), fract(p3.xzy)));//fract((p3.xxy + p3.yxx)*p3.zyx);\n}\nfloat noise(float p) {\n    float f = fract(p);\n    f = f*f*(3.-2.*f);\n    return mix(hash(floor(p)*0.001), hash(0.001*floor(p+1.)), f);\n}\n\nfloat noise01(float x)\n{ return fract(sin(1371.1*x)*43758.5453);}\n\n\nfloat mmm(in float t) \n{\n    float v = fract(t*float[5](100., 200., 800., 500., 880.)[int(floor(t*5.)+floor(t*10.))%5])*exp(-fract(t*5.0));\n    v = fract(t*float[5](200., 440., 100., 500., 400.)[int(floor(t*2.)+floor(t*5.))%5])*exp(-fract(t*5.0));\n    return v;\n}\n\nfloat fbm(in float t) {\n    float sum = 0.;\n    for (int i = 0; i < 10; i++) \n    {\n        sum += pow(2., -float(i))*noise(t*pow(2., float(i)));\n    }\n    \n    return sum*0.5;\n}\n\n\n\nfloat sound_02(float time)\n{\n    float t = time;\n    float ttt = mmm(t*0.25);\n    float v = (sin(sin(fract(time*0.03)*50.+sin(2.*time))*2.0) + sin(sin(time+sin(2.*time))*noise(time)*10.))*0.5;//vec2(exp(-fract(time)*2.)*clamp(sin(pow(t, n))/pow(t, n-1.), 0.0, 1.0));\n    v = clamp(v, -1.0, 1.0);\n    float v1,v2,v12,v12a;\n    v1=fract(ttt*5.0)*0.5;\n    v2=0.5+ sin(ttt*40.0)*0.5;\n    v12=mod(fract(t*0.125)+0.5,1.0)*2.0;\n    v12a=mix(v1,v2, v12);\n     v = mix(v12a, (sin(t*440.*6.283 )*0.25), 0.5);\n    return v;\n}\n\nfloat square(in float x, in float smoothness) {\n    x *= 6.282;\n    return sin(x)/(smoothness+abs(sin(x)));\n}\n\n\n///-----02--inicio\n#define TAU 6.2831853071\n\nfloat rand(vec2 co)\n{\n\treturn fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nfloat synth(float time, float freq)\n{\n    float env = exp(-pow(2. * time - 0.5, 3.));\n    \n    float pseudo_sqr = clamp(10. * sin(TAU * freq * time), -1., 1.);\n    return pseudo_sqr * env;\n}\n\nfloat bass_drum(float time)\n{\n    float env = max(0., 1. - 3. * time);\n    \n    return sin(time * 440.) * env;\n}\n\nfloat snaref(float time)\n{\n    float env = 0.15 * max(0., 1. - 5. * time);\n    \n    return rand(vec2(time * 8., 0.)) * env;\n}\n\nfloat hi_hat(float time)\n{\n    float env = 0.2 * max(0., 1. - 3. * time);\n   \n    return noise01(time * 1024.) * env;\n}\n\n//------02 fin\n\nvec2 mainSound( int samp, float time ) \n{\n    \n    float s1,s2,s3,s4 ,sfin;\n    float s5,s6;\n    \n    s6= sound_02(time);\n    \n    //\n    vec2 v;\n    \n    float t0=mod(time, 1.0);\n    float t1=mod(time, 0.5);\n    float t2=mod(time, 0.75);\n    \n    v+=hi_hat(t2);\n    v+=bass_drum(t0);\n    v+=snaref(t1);\n    \n    vec2 sal;\n    \n    sal=mix(vec2(s6)*0.5,v*0.5,fract(time*0.125));\n    \n    return sal;\n}","name":"Sound","description":"","type":"sound"},{"inputs":[],"outputs":[],"code":"//iq\nfloat dot2( in vec2 v ) { return dot(v,v); }\nfloat dot2( in vec3 v ) { return dot(v,v); }\nfloat ndot( in vec2 a, in vec2 b ) { return a.x*b.x - a.y*b.y; }\n\n\n\nfloat sdEllipse( in vec2 p, in vec2 ab )\n{\n    p = abs(p); if( p.x > p.y ) {p=p.yx;ab=ab.yx;}\n    float l = ab.y*ab.y - ab.x*ab.x;\n    float m = ab.x*p.x/l;      float m2 = m*m; \n    float n = ab.y*p.y/l;      float n2 = n*n; \n    float c = (m2+n2-1.0)/3.0; float c3 = c*c*c;\n    float q = c3 + m2*n2*2.0;\n    float d = c3 + m2*n2;\n    float g = m + m*n2;\n    float co;\n    if( d<0.0 )\n    {\n        float h = acos(q/c3)/3.0;\n        float s = cos(h);\n        float t = sin(h)*sqrt(3.0);\n        float rx = sqrt( -c*(s + t + 2.0) + m2 );\n        float ry = sqrt( -c*(s - t + 2.0) + m2 );\n        co = (ry+sign(l)*rx+abs(g)/(rx*ry)- m)/2.0;\n    }\n    else\n    {\n        float h = 2.0*m*n*sqrt( d );\n        float s = sign(q+h)*pow(abs(q+h), 1.0/3.0);\n        float u = sign(q-h)*pow(abs(q-h), 1.0/3.0);\n        float rx = -s - u - c*4.0 + 2.0*m2;\n        float ry = (s - u)*sqrt(3.0);\n        float rm = sqrt( rx*rx + ry*ry );\n        co = (ry/sqrt(rm-rx)+2.0*g/rm-m)/2.0;\n    }\n    vec2 r = ab * vec2(co, sqrt(1.0-co*co));\n    return length(r-p) * sign(p.y-r.y);\n}\n\n\n\n\n\n//Quadratic Bezier - exact   (https://www.shadertoy.com/view/MlKcDD)\n\nfloat sdBezier( in vec2 pos, in vec2 A, in vec2 B, in vec2 C )\n{    \n    vec2 a = B - A;\n    vec2 b = A - 2.0*B + C;\n    vec2 c = a * 2.0;\n    vec2 d = A - pos;\n    float kk = 1.0/dot(b,b);\n    float kx = kk * dot(a,b);\n    float ky = kk * (2.0*dot(a,a)+dot(d,b)) / 3.0;\n    float kz = kk * dot(d,a);      \n    float res = 0.0;\n    float p = ky - kx*kx;\n    float p3 = p*p*p;\n    float q = kx*(2.0*kx*kx-3.0*ky) + kz;\n    float h = q*q + 4.0*p3;\n    if( h >= 0.0) \n    { \n        h = sqrt(h);\n        vec2 x = (vec2(h,-h)-q)/2.0;\n        vec2 uv = sign(x)*pow(abs(x), vec2(1.0/3.0));\n        float t = clamp( uv.x+uv.y-kx, 0.0, 1.0 );\n        res = dot2(d + (c + b*t)*t);\n    }\n    else\n    {\n        float z = sqrt(-p);\n        float v = acos( q/(p*z*2.0) ) / 3.0;\n        float m = cos(v);\n        float n = sin(v)*1.732050808;\n        vec3  t = clamp(vec3(m+m,-n-m,n-m)*z-kx,0.0,1.0);\n        res = min( dot2(d+(c+b*t.x)*t.x),\n                   dot2(d+(c+b*t.y)*t.y) );\n        // the third root cannot be the closest\n        // res = min(res,dot2(d+(c+b*t.z)*t.z));\n    }\n    return sqrt( res );\n}\n","name":"Common","description":"","type":"common"}]}