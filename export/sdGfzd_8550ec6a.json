{"ver":"0.1","info":{"id":"sdGfzd","date":"1658938666","viewed":264,"name":"Joy Division Sine","username":"opexu","description":"Like Joy Division Unknown Pleasures cover","likes":14,"published":1,"flags":0,"usePreview":0,"tags":["joydivisionsinsinefbm"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// like Joy Division Unknown Pleasures cover\n// with update by FabriceNeyret2\n\n#define R iResolution.xy\n#define S smoothstep\n#define T iTime*0.4\n#define FWIDTH2(f) (length(vec2(dFdx(f), dFdy(f))))\n\nfloat remap(float v, float l1, float h1, float l2, float h2){\n    return l2 + (v - l1) * (h2 - l2) / (h1 - l1);\n}\n\n// hash from Keijiro Takahashi example of gradient noise\nfloat hash(float p){\n    p = fract(7.8233139 * p);\n    p = ((2384.2345 * p - 1324.3438) * p + 3884.2243) * p - 4921.2354;\n    return remap(fract(p), .1, 1., 2., 3.);\n    //return fract(p);\n}\n\nfloat fbm(float v, float h){\n    float f = sin(v+T)*.5-.5;\n    f += sin(v*h*1.145+T*h*3.345)*.5-.5;\n    f += sin(v*h*1.776+T*h*2.964)*.5-.5;\n    f += sin(v*h*2.454-T*h*0.478)*.5-.5;\n    f *= 2.;\n    f *= smoothstep(5., -5., abs(v)); // smooth start end\n    return f*.5;\n}\n\nvec3 sineCurve(vec2 p, float w, float h){\n    float s = p.y+fbm(p.x, h);\n    //float s1 = S(.0, .1, s-w);\n    //float s2 = S(.9, 1., s+w);\n    \n    float s1 = S(.0, 15./R.y, s-w);\n    float s2 = S(-15./R.y, .0, s+w-1.);\n    \n    float upMask = s1;\n    float border = s1 - s2;\n    float downMask = s2;\n    \n    return vec3(upMask, border, downMask);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = 10.*(fragCoord-.5*R)/R.y;\n    \n    vec3 DOMAIN = vec3(2., -4., .25);\n    \n    float s = 0.;\n    for(float i = DOMAIN.x; i >= DOMAIN.y; i -= DOMAIN.z){\n        vec3 sn = sineCurve(p-vec2(0., i), .44, hash(i));\n        s = sn.y+min(s, sn.z);\n    }\n    \n    //s = vec3(s1.y+min(s2.y+min(s3.y+min(s4.y, s3.z), s2.z),s1.z));\n    \n    vec3 col = vec3(max(1.-s, step(0., abs(p.x)-7.)));\n    \n    // Output to screen\n    fragColor = vec4(col, 1.);\n}","name":"Image","description":"","type":"image"}]}