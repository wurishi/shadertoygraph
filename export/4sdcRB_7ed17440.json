{"ver":"0.1","info":{"id":"4sdcRB","date":"1519402011","viewed":224,"name":"lonely bacteria travels","username":"malezoltekrety","description":"Heart beating and stuff.\nHeart from https://www.shadertoy.com/view/XsfGRn\nTODO: it would be nice for bacteria to meet another one (or more), and merge into a bigger one. Not sure though how to keep reference to the center of another bacteria before merge.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["2d","metaballs","bacteria"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float wave(vec2 v, float t) {\n\treturn pow(sin(atan(v.y, v.x) * 8.0 + t), 2.0);\n}\n\nfloat source(vec2 uv, vec2 point){\n \treturn length(uv-point);\n}\nvec4 N14(float t){\n \treturn fract(sin(t*vec4(123., 1024., 3456., 9564.))*vec4(6547., 345., 8799., 1564.));   \n}\n\nfloat heart(vec2 uv, vec2 middle, float scale ){\n    vec2 p=uv;\n    p=p-middle;\n    p*=scale;\n    p*=scale/8.5;\n    vec4 n = N14(scale);\n    p.y = -0.1 - p.y*1.2 + abs(p.x)*(1.0-abs(p.x));\n\n    float r = length(p+n.xy*0.1*sin(iTime));\n    return r;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.xy;\n\tuv.x *= iResolution.x/iResolution.y;\n    float r = 0.5;// + wave(uv, 1.0) * 0.05 + wave(uv, 2.0 * 3.0) * 0.05;\n    float r2 = 0.01;\n    float delta = .01;\n    // Time varying pixel color\n    float t = iTime;\n    float balldist = 0.;\n    float i=0.;\n    float tantan = 0.;\n    vec2 globalMid;\n    vec2 middle;\n    for(float i =0.; i<1.; i+=.5){\n        vec4 n = N14(i);\n    \tmiddle = vec2(i*.5*sin(n.z+t*i*.25)+sin(i+t*.2)*.2, i*.6*cos(n.w+t*i)*.5+cos(i+t*.2)*.2);\n        globalMid +=middle;\n        float dist = r*0.1/source(uv, middle);\n\t \tballdist += dist;\n    }\n\n    globalMid = globalMid/3.;\n    if(balldist>0.4 && balldist<0.5){\n        if(abs(uv.y-globalMid.y)>0.001){\n    \t\ttantan =  abs((uv.x-globalMid.x)/(uv.y - globalMid.y));\n        }\n        else{\n            tantan = abs((uv.x-globalMid.x)/(uv.y - globalMid.y+0.002));\n        }\n    }\n    tantan = atan(tantan)*.5;\n    \n    float inside = smoothstep(0.54, 0.55, balldist);\n    // Output to screen\n    fragColor = vec4(.75, .75, .8, 1.);\n    float smoothing = pow(smoothstep(0.5, 0.4, balldist), 20.);\n    fragColor *= 1.-smoothstep(0.+smoothing, 0.5+smoothing, sin(tantan*50.-t*.95))*step( 0.4, balldist);\n    //fragColor =  (1.-step(0.5, balldist))*fragColor + inside*vec4(0.1, 0.75, 0.4, 1.);\n    fragColor =  mix(fragColor, inside*vec4(0.1, 0.75, 0.4, 1.), smoothstep(0.49, 0.5, balldist));\n    float h = heart(uv, middle, 8.);\n    float h2 = heart(uv, middle, 10.);\n    fragColor = mix(fragColor, vec4(0.0, 0.0, 0.0, 1.0), smoothstep(-0.01, 0.01, 0.5-h));\n    fragColor = mix(fragColor, vec4(1.0,0.,0.3, 1.), smoothstep(-0.01, 0.01, 0.5-h2));\n}","name":"Image","description":"","type":"image"}]}