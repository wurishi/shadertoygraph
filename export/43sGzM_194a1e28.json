{"ver":"0.1","info":{"id":"43sGzM","date":"1707503149","viewed":118,"name":"retro ribbons","username":"ufffd","description":"floatin through stacked slices of gyroid ribbons\nuses a weird pixel dither effect","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["ribbon","retro","gyroid","onionsdf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define BAND_THICKNESS 0.04\n\n#define SS(a,b,c) smoothstep(a-b,a+b,c)\n#define gyr(p) dot(sin(p.xyz),cos(p.zxy))\n#define T iTime\n#define R iResolution\nmat2 Rot(in float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\treturn mat2(c, s, -s, c);\n}\nstruct MapResult {\n    float d;\n    int i;\n};\nMapResult map(in vec3 p) { // return vec2(distance, object index)\n    vec3 gp = p;\n    gp.xy *= Rot(T*.2);\n    gp.xz *= Rot(sin(T*.1));\n    gp.yz *= Rot(sin(T*.15));\n    gp.y += T;\n    float g = gyr(gp);\n    float d = 999.;\n    int obj = -1;\n    for (int i=0;i<5;i++) {\n        float gslice = abs(g + float(i)*.1) - BAND_THICKNESS;\n        if (i==0) gslice += sin((p.x+p.y)*80.)*.005;\n        if (i==4) gslice += mod(floor(gl_FragCoord.x) + floor(gl_FragCoord.y), 2.0);\n        if (i==0) gslice -= mod(floor(gl_FragCoord.x) + floor(gl_FragCoord.y), pow(2.,3. - floor(6.*sin(4.-iTime*.2+.1*length(p.xy)))));\n        if (gslice < d) obj = i;\n        d = min(gslice,d);\n    }\n    d += p.z*.02 - .1;\n    // d += gyr((gp/2.))*sin(T+p.z);\n    float bb = length(p) - 0.2;\n    // if (bb < d) obj = 2;\n    // d = min(g,bb);\n    float pb = length(gp+0.5) - .5;\n    // d = pb;\n    // d = bb;\n    return MapResult(d,obj);\n}\nvec3 norm(in vec3 p) {\n    float m = map(p).d;\n    vec2 d = vec2(.06+.06*sin(p.z),0.);\n    return m-vec3(\n        map(p-d.xyy).d,map(p-d.yxy).d,map(p-d.yyx).d\n    );\n}\nvoid mainImage( out vec4 color, in vec2 coord ) {\n    vec2 uv = coord/R.xy;\n    vec2 uvc = (coord-R.xy/2.)/R.y;\n    float d = 0.;\n    float dd = 1.;\n    vec3 p = vec3(0.,0.,-1.);\n    vec3 rd = normalize(vec3(uvc.xy,1.));\n    int obj = -1;\n    bool hit = false;\n    for (float i=0.;i<90. && dd>.001 && d < 5.;i++) {\n        d += dd;\n        p += rd*d;\n        MapResult m = map(p);\n        dd = m.d;\n        obj = m.i;\n    }\n    vec3 n = norm(p);\n    float bw = n.z + n.y;\n    bw *= 5.;\n    // bw *= SS(.9,.15,1./d);\n    // bw = 1./d;\n    color = vec4(vec3(bw),1.0);\n    if (obj==0) color = vec4(vec3(step(5.,p.z)),1.);\n    if (obj==1) color = vec4(0.890,0.008,0.522,1.);\n    if (obj==2) color = vec4(1.000,1.000,0.322,1.);\n    if (obj==3) color = vec4(0.651,0.867,0.745,1.);\n    if (obj==4) color = vec4(0.,0.,0.,1.);\n}","name":"Image","description":"","type":"image"}]}