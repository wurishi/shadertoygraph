{"ver":"0.1","info":{"id":"4lcSWs","date":"1487826502","viewed":2242,"name":"Filaments","username":"nimitz","description":"Music by MYRONE: https://soundcloud.com/myroneofficial/exclusive-coup","likes":73,"published":1,"flags":96,"usePreview":0,"tags":["musicvisualizer","succint"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Filaments by nimitz (twitter: @stormoid)\n// https://www.shadertoy.com/view/4lcSWs\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License\n// Contact the author for other licensing options\n\n\n#define time iTime\nmat2 rot(in float a){float c = cos(a), s = sin(a);return mat2(c,s,-s,c);}\n\nfloat segm(in vec2 p, in vec2 a, in vec2 b, in float nz, float id)\n{\n    vec2 pa = p - a;\n\tvec2 ba = b - a;\n\tfloat h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 )+nz*0.017;\n    float wave = textureLod( iChannel0, vec2(fract(h*.2+id*0.005),.75),-100. ).z;\n    float vv = sin(time*0.0225)*0.1;\n    return length( pa - wave*0.015*(h - 1.0) - ba*h )*wave*7.*wave;\n}\n\nfloat tri(in float x){return abs(fract(x)-.5);}\nvec2 tri2(in vec2 p){return vec2(tri(p.x+tri(p.y*2.)),tri(p.y+tri(p.x*2.)));}\nmat2 m2 = mat2( 0.970,  0.242, -0.242,  0.970 );\n\nfloat triangleNoise(in vec2 p)\n{\n    float z=1.5;\n    float z2=1.5;\n\tfloat rz = 0.;\n    vec2 bp = p*0.8;\n\tfor (float i=0.; i<=3.; i++ )\n\t{\n        vec2 dg = tri2(bp*2.)*.5;\n        dg *= rot(time*4.5);\n        p += dg/z2;\n        bp *= 1.5;\n        z2 *= .6; \n\t\tz *= 1.7;\n\t\tp *= 1.2;\n        p*= m2;     \n        rz+= (tri(p.x+tri(p.y)))/z;\n\t}\n\treturn rz;\n}\n\nvec3 render(in vec2 p)\n{    \n    vec2 p1 = vec2(-1., 0.);\n    vec3 col = vec3(0);\n    float nz = clamp(triangleNoise(p),0.,1.);\n    vec4 wave = textureLod( iChannel0, vec2(fract(p.x*.2),.75),-100. );\n    p /= wave.w*1.+.5 + time*0.001;\n    \n    for(int i = 0; i < 100; i++)\n    {\n        p1 *= rot(0.05 + pow(time*2.25,1.5)*0.0007);\n        vec2 p2 = p1*rot(0.04*float(i) - time*1.575 - wave.w*1.5);\n        col += abs(sin(vec3(.6+sin(time*0.05)*0.4,1.5,2.0)+float(i)*0.011 + time*0.8))*0.0015/((pow(segm(p, p1, p2, nz, float(i)),1.2)));\n    }\n    \n    col *= wave.w*1.;\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 p = fragCoord.xy / iResolution.xy*2.0-1.0;\n    p.x *= iResolution.x/iResolution.y*.9;\n    \n\tfragColor = vec4(render(p*0.75), 1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Ms23R3","filepath":"https://soundcloud.com/myroneofficial/exclusive-coup","previewfilepath":"https://soundcloud.com/myroneofficial/exclusive-coup","type":"musicstream","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// Filaments by nimitz (twitter: @stormoid)\n// https://www.shadertoy.com/view/4lcSWs\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License\n// Contact the author for other licensing options\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 q = fragCoord.xy/iResolution.xy;\n    float fft  = texture( iChannel1, vec2(q.x,0.25) ).x;\n\tfloat nwave = texture( iChannel1, vec2(q.x,0.75) ).x;\n    vec4 lData = texture( iChannel0, vec2(q.x,0.25) );\n    \n    float fwave = mix(nwave,lData.z, 0.5);\n\n    float nfft = 0.;\n    for (float i = 0.; i < 1.; i += 0.02)\n    {\n        nfft += texture( iChannel1, vec2(i,0.25) ).x; \n    }\n    nfft = clamp(nfft/50.,0.,1.);\n    \n    float ffts = mix(nfft, lData.w, 0.);\n    \n    if (iFrame < 5) \n    {\n        fft = 0.;\n        fwave= .5;\n        ffts = 0.;\n    }\n    \n    fragColor = vec4(fft, 0, fwave, ffts);\n}","name":"Buffer A","description":"","type":"buffer"}]}