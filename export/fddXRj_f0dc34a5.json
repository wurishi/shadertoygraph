{"ver":"0.1","info":{"id":"fddXRj","date":"1633533741","viewed":575,"name":"3Blue1Brown's Hilbert Curve","username":"playersteve19","description":"Inspired by 3Blue1Brown's video \"Hilbert Curve: Is Infinite Math Useful?\" (https://youtu.be/3s7h2MHQtxc). \n\nUnfortunately the inverse, image to sound, is not supported in Shadertoy. \n","likes":11,"published":1,"flags":4,"usePreview":0,"tags":["sound","visualizer","hilbert"],"hasliked":0,"parentid":"XtGBDW","parentname":"Inverse Hilbert Curve"},"renderpass":[{"inputs":[{"id":"XdXGRr","filepath":"/presets/mic.png","previewfilepath":"/presets/mic.png","type":"mic","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//Hilbert curve from Wunkolo'\n//shadertoy.com/view/XtGBDW\n#define LEVEL 12U\n/*(Maximum 15U)*/\n#define WIDTH ((1U << LEVEL))\n#define AREA (WIDTH*WIDTH)\nfloat HilbertIndex(uvec2 Position){   \n    uvec2 Regions;\n    uint Index=0U;\n    for(uint CurLevel=WIDTH/2U;CurLevel>0U;CurLevel/=2U){\n        uvec2 Region=uvec2(greaterThan((Position&uvec2(CurLevel)),uvec2(0U)));\n        Index +=CurLevel*CurLevel*((3U*Region.x)^Region.y);\n        if(Region.y==0U){\n            if(Region.x==1U){\n                Position=uvec2(WIDTH-1U)-Position;\n            }\n            Position.xy=Position.yx;\n        }\n    }\n    return float(Index)/float(AREA);\n}\nfloat coord(in vec2 uv){\n    uv*=iResolution.xy;\n    uv.x=mix(uv.x,iResolution.x-uv.x,mod(uv.y,2.));\n    float f= uv.x+iResolution.x*(uv.y-1.);\n    f/=iResolution.x*iResolution.y;\nreturn f;\n}\n//from https://stackoverflow.com/questions/35799286\nfloat toLog(float value,float Min,float Max){\n\tfloat Exp=(value-Min)/(Max-Min);\n\treturn Min*pow(Max/Min,Exp);\n}\n//function from Inigo Quilez \n//shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb(in vec3 c){\n    vec3 rgb=clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n\treturn c.z*mix(vec3(1.0),rgb,c.y);\n}\n//log fft from airtight\n//shadertoy.com/view/ltlyRM\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord){\n    vec2 uv=fragCoord/iResolution.xy;\n    uv.x*=iResolution.x/iResolution.y;uv.x-=fract((iResolution.x )/iResolution.y)/2.0;\n    uvec2 FragCoord=uvec2(uv*float(WIDTH));\n    float Index=HilbertIndex(FragCoord);\n    float R;\n    //Index=uv.x;/*un-hilberts the curve for a normal spectrogram*/\n    Index=pow(1.05946244828,119.*Index+52.3772154478)-19.9999730675;Index/=19980.;\n    //Index=toLog(Index,0.03125,1.);\n    R=texture(iChannel0,vec2(Index,.25)).x;\n\tvec2 Border=smoothstep(vec2(0.0),vec2(0.0)+vec2(0.001),uv)-smoothstep(vec2(1.0)-vec2(0.001),vec2(1.0),uv);\n    vec3 col;\n    col=hsv2rgb(vec3((8./12.)*(1.-R*R),.75,1.-pow(1.-R,2.)));\n    col*=(Border.x*Border.y);\n    fragColor=vec4(col,1.);\n}","name":"Image","description":"","type":"image"}]}