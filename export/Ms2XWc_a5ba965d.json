{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"texture","id":"XdfGRn","filepath":"/media/a/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"// Created by sebastien durand - 2014\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n//#define MOUSE_CTRL        \n\n#define WITH_FWIDTH\n\n\nfloat time;\n\n// - Bicubic --------------------------------------------------------\n// [iq: https://www.shadertoy.com/view/XsSXDy]\n\nvec4 BS_A = vec4( 3., -6.,   0.,  4. ) /  6.;\nvec4 BS_B = vec4(-1.,  6., -12.,  8. ) /  6.;\nvec4 powers( float x ) { return vec4(x*x*x, x*x, x, 1.); }\n\nvec4 spline(float x, vec4 c0, vec4 c1, vec4 c2, vec4 c3 ) {\n    return c0*dot( BS_B, powers(x + 1.)) + c1*dot( BS_A, powers(x      )) +\n           c2*dot( BS_A, powers(1. - x)) + c3*dot( BS_B, powers(2. - x));\n}\n#define SAM(a,b)  texture(iChannel0, (i+vec2(a,b)+0.5)/res, -99.0)\nvec4 texture_Bicubic( sampler2D tex, vec2 t) {\n    vec2 res = iChannelResolution[0].xy;\n    vec2 p = res*t - .5, f = fract(p), i = floor(p);\n    return spline( f.y, spline( f.x, SAM(-1,-1), SAM( 0,-1), SAM( 1,-1), SAM( 2,-1)),\n                        spline( f.x, SAM(-1, 0), SAM( 0, 0), SAM( 1, 0), SAM( 2, 0)),\n                        spline( f.x, SAM(-1, 1), SAM( 0, 1), SAM( 1, 1), SAM( 2, 1)),\n                        spline( f.x, SAM(-1, 2), SAM( 0, 2), SAM( 1, 2), SAM( 2, 2)));\n}\n\n\n\nfloat eval(vec2 uv) {\n#ifdef MOUSE_CTRL        \n    return 5. + 10.*texture_Bicubic(iChannel0, vec2(1, 0) +uv*.04).x;\n#else\n    return 5.*cos(iTime*.05) + 10.*texture_Bicubic(iChannel0, vec2(cos(time), sin(time)) +uv*(1.+.5*cos(iTime*.05))*.04).x;\n#endif\n}\n\n\n\n// - Palette ---------------------------------------------------------\n// https://www.shadertoy.com/view/4dsSzr\n\nvec3 heatmapGradient(float t) {\n\treturn clamp((pow(t, 1.5) * .8 + .2) * vec3(smoothstep(0., .35, t) + t * .5, smoothstep(.5, 1., t), max(1. - t * 1.7, t * 7. - 6.)), 0., 1.);\n}\n\nvec3 palette(float v) {\n    return heatmapGradient(mod((v-11.)*.1,1.));\n}\n\n\n\n// - Isoline ---------------------------------------------------------\n// based on article\n// https://iquilezles.org/articles/distance\n\nfloat isoline(float val, float lg, float ref, float pas, float tickness) {\n    float v = abs(mod(val-ref+pas*.5, pas)-pas*.5)/lg - .1*tickness;\n    return smoothstep(.2,.8, v);\n}\n\n\n// - Main ------------------------------------------------------------\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    time = iTime *0.005;\n    \n\tvec2 uv = fragCoord.xy / iResolution.x;\n    \n    float val = eval(uv);\n    \n#ifdef WITH_FWIDTH\n//  float lg = 2.*fwidth(val); // not super constant thickness \n    float lg = 2.*length(vec2(dFdx(val), dFdy(val)));\n#else    \n    vec3 delta = vec3(1./iResolution.xx, 0);\n    vec2 grad = vec2(eval(uv+delta.xz)-eval(uv-delta.xz), eval(uv+delta.zy)-eval(uv-delta.zy)); \n    float lg = length(grad);\n#endif\n    \n    float \n#ifdef MOUSE_CTRL        \n        ref = eval(iMouse.xy/iResolution.xy), // reference value\n        k0 = isoline(val, lg, 1., 20., 2.),\n#else \n        ref = 1.,\n        k0 = 1.,\n#endif    \n    \tk1 = isoline(val, lg, ref, .4, 1.),\n    \tk2 = isoline(val, lg, ref, 2., 10.);\n    \n    // paletize value\n    vec3 col = palette(val); \n\n    // apply isoline to color\n    col *= k0*k2; //mix(vec3(0), col, k2);\n\tcol *= (.3+(k1*.7));\n    col *= pow(30.0*uv.x*uv.y*(1.-uv.x)*(1.-uv.y),.2);\n\tfragColor = vec4(col,1);\n}\n\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"Ms2XWc","date":"1416834771","viewed":4008,"name":"Isoline Simple","username":"iapafoto","description":"Usefull fct","likes":64,"published":1,"flags":0,"usePreview":1,"tags":["isolines","fwidth","isoline"],"hasliked":0,"parentid":"","parentname":""}}