{"ver":"0.1","info":{"id":"Ws2fWG","date":"1590730821","viewed":742,"name":"Ocassional Spectators","username":"Kali","description":"I ended up making this visuals during a live coding session on twitch. \nClick several times on the window inmediatly after the page loads if the music doesn't start. \n","likes":19,"published":1,"flags":96,"usePreview":0,"tags":["fractals","trippy","techno","twitch"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Mlj3RK","filepath":"https://soundcloud.com/stone-harley/blade-soundtrack-blood-rave-techno-bloodbath-mix","previewfilepath":"https://soundcloud.com/stone-harley/blade-soundtrack-blood-rave-techno-bloodbath-mix","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat s;\nfloat t;\nvec3 ot;\nvec3 colo=vec3(0);\n\nmat2 rot(float a) {\n  float s=sin(a),c=cos(a);\n  return mat2(c,s,-s,c);\n}\n\nfloat de(vec3 p) \n{\n  float z=p.z;\n  ot=vec3(100);\n  colo=p;\n  float sc=1.;\n  p.xy*=rot(p.z*.1);\n  p=abs(15.-mod(p,30.))-1.;\n  for (int i=0; i<8; i++) {\n    p.xy*=rot(1.);\n    p.yz*=rot(t*10.);\n    ot=min(ot,abs(p.xyz));\n    p.xy=abs(p.xy+5.)-abs(p.xy-5.)-p.xy;\n    float s=1.5;\n    sc*=s;\n    p=p*s;\n  }\n  colo=exp(-15.*ot);\n  return (length(p)/sc-.5)*.8;\n  \n}\n\n\nvec3 march(vec3 from, vec3 dir) {\n  float d, td=0.;\n  vec3 p, c=vec3(0.);\n  for (int i=0; i<50; i++) \n  {\n    p=from+dir*td;\n    d=de(p);\n    td+=max(.01,abs(d));\n    c+=colo*exp(-.05*td);\n  }\n  return (c*c*.02);\n  \n}\n \nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  t=floor(iChannelTime[0]*10.)*.001;\n  s=texture(iChannel0,vec2(.3)).r;\n  vec2 uv = vec2(gl_FragCoord.x / iResolution.x, gl_FragCoord.y / iResolution.y);\n  uv-=.5;\n  uv.x*=iResolution.x/iResolution.y;\n  if (fract(t*4.)<.5) t+=floor(length(uv)*4.-t*100.); else t+=floor(length(uv.y+uv.x)*1.5-t*100.);\n  vec3 dir=normalize(vec3(uv,.5+s*.3));\n  vec3 from=vec3(cos(t*.5)*2.,sin(t)*2.,t*200.);\n  from.xy*=rot(t*100.);\n  dir.yz*=rot(smoothstep(-.5,.5,sin(t*10.))*10.);\n  vec3 c = march(from,dir);\n  c=abs(cross(c,dir));\n  c.xy*=rot(t*50.+s*20.);\n  fragColor = vec4(c,1.)*min(1.,iChannelTime[0]*.2);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = vec4(0.0,0.0,1.0,1.0);\n}","name":"Buffer A","description":"","type":"buffer"}]}