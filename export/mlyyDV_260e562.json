{"ver":"0.1","info":{"id":"mlyyDV","date":"1700667650","viewed":77,"name":"Morphing Truchet","username":"felipetovarhenao","description":"Morphing Truchet tiles","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["light","truchet","tiling"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\nAuthor: Felipe Tovar-Henao [www.felipe-tovar-henao.com]\nTitle: Morphing Truchet\n*/\n\n\n#define PI 3.14159265359\n#define TWO_PI 6.28318530718\n\nvec2 viewport(in vec2 uv,in vec2 r){\n\treturn(uv*2.-r)/min(r.x,r.y);\n}\n\nmat2 rot2(in float a){\n    float c=cos(a);\n    float s=sin(a);\n    return mat2(c,-s,s,c);\n}\n\nfloat fold(in float x){\n    return abs(mod(x+1.,2.)-1.);\n}\n\n\nfloat cosine(in float x,in float s){\n    float y=cos(fract(x)*PI);\n    return floor(x)+.5-(.5*pow(abs(y),1./s)*sign(y));\n}\n\n/*\nFrom: https://iquilezles.org/articles/distfunctions2d/\n*/\nfloat rect(in vec2 p,in vec2 s){\n\tvec2 q=abs(p)-s;\n\tfloat e=max(q.x,q.y);\n\treturn(e>0.)?length(max(q,0.)):e;\n}\n\nfloat rand(in vec2 uv,in int seed){\n    return fract(sin(dot(uv.xy,vec2(12.9898,78.233))+float(seed))*43758.5453123);\n}\n\nfloat rand(in vec2 uv){\n    return rand(uv,0);\n}\n\nfloat scale(in float x,in float a,in float b,in float c,in float d){\n\treturn(x-a)/(b-a)*(d-c)+c;\n}\n\nvec3 gradient(in float t,in vec3 a,in vec3 b,in vec3 c,in vec3 d){\n\treturn a+b*cos(TWO_PI*(c*t+d));\n}\n\nconst vec3 c1=vec3(1.);\nconst vec3 c2=vec3(.25);\nconst vec3 c3=vec3(.5);\nconst vec3 c4=vec3(.2549,.3176,.3804);\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n\tvec2 uv=viewport(fragCoord.xy,iResolution.xy);\n\tfloat t=iTime*.5;\n\t\n\t// rotate viewport\n\tuv*=rot2(t*.125);\n\t\n\t// get original magnitude\n\tfloat mag=length(uv);\n\t\n\t// zoom out\n\tuv*=3.;\n\t\n\t// get tile angle\n\tfloat n=rand(floor(uv));\n\tn=(PI*.5)*floor(-n*4.);\n\t\n\t// rotate and get tile\n\tuv*=rot2(n);\n\tuv=fract(uv);\n\t\n\t// morphing oscillator\n\tfloat mx=cosine(fold(3.*mag-t),2.);\n\t\n\t// light phase\n\tfloat p=scale(sin(t+mag),-1.,1.,2.,4.);\n\t\n\t// shape 1\n\tfloat ac=length(uv)-.5;\n\tfloat as=rect(uv,vec2(.5));\n\tfloat a=mix(ac,as,mx);\n\ta=abs(a);\n\t\n\t// shape 2\n\tfloat bc=length((1.-uv))-.5;\n\tfloat bs=rect((1.-uv),vec2(.5));\n\tfloat b=mix(bs,bc,1.-mx);\n\tb=abs(b);\n\t\n\t// tile pattern\n\tfloat d=min(a,b);\n\t\n\t// light style\n\td=fold(p*d-t+mag*2.);\n\td=.075/d;\n\td=min(1.,d);\n\t\n\t// add color\n\tvec3 col=gradient(mag-t,c1,c2,c3,c4)*d;\n\t\n\tfragColor=vec4(col,1.);\n}","name":"Image","description":"","type":"image"}]}