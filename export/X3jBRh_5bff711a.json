{"ver":"0.1","info":{"id":"X3jBRh","date":"1729199006","viewed":94,"name":"just quaternion cosine","username":"pb","description":"tendrils","likes":9,"published":1,"flags":32,"usePreview":0,"tags":["fractal","raymarch","cos","4d"],"hasliked":0,"parentid":"43lfDf","parentname":"just quaternion exp"},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//philip.bertani@gmail.com\n\nvoid mainImage(out vec4 O, vec2 u) {\n    vec2 R = iResolution.xy,\n        uv = u/R;\n\n    O *= 0.;\n\n    float[] gk1s = float[](\n        0.003765, 0.015019, 0.023792, 0.015019, 0.003765,\n        0.015019, 0.059912, 0.094907, 0.059912, 0.015019,\n        0.023792, 0.094907, 0.150342, 0.094907, 0.023792,\n        0.015019, 0.059912, 0.094907, 0.059912, 0.015019,\n        0.003765, 0.015019, 0.023792, 0.015019, 0.003765\n    );\n\n    //golfed by fabriceneyret2\n    for (int k; k < 25; k++)      \n        O += gk1s[k] * texture(iChannel0, uv + ( vec2(k%5,k/5) - 2. ) / R );\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define rot(x) mat2(cos(x+vec4(0,11,33,0)))\n\n//formula for creating colors;\n#define H(h)  (  cos(  h/5.*vec3(1,1.7,0)    )*.5  + .1 )\n\n\n#define R iResolution\n     \n#define ex exp(w.x)\n#define cy cos(w.y)\n#define sy sin(w.y)\n#define cz cos(w.z)\n#define sz sin(w.z)\n#define cw cos(w.w)\n#define sw sin(w.w)\n\n#define eex exp(-w.x)\n#define ccy cos(-w.y)\n#define ssy sin(-w.y)\n#define ccz cos(-w.z)\n#define ssz sin(-w.z)\n#define ccw cos(-w.w)\n#define ssw sin(-w.w)\n\nvoid mainImage( out vec4 O, vec2 U) {\n      \n    O = vec4(0);\n    \n    vec3 c=vec3(0);\n    vec4 rd = normalize( vec4(U-.5*R.xy, R.y, 110.));\n    \n    float dotp, dotpp, totdist=0., tt=iTime, t=0.;\n    \n    for (float i=0.; i<50.; i++) {\n        \n        vec4 p = vec4( rd*totdist) ;\n        \n        p.z += -11.;\n        p.y -= 20.;\n        \n        p.xz *= rot( tt/11. );\n        p.xy *= rot( 1.5  );\n\n        vec4 w=vec4(0) , dz, z, zz, dzz;\n     \n        \n        for (float j=0.; j<4.; j++) {\n\n                z = vec4( \n                        ex*(cy*cz*cw - sy*sz*sw),\n                        ex*(sy*cz*cw + cy*sz*sw),\n                        ex*(cy*sz*cw - sy*cz*sw),\n                        ex*(sy*sz*cw + cy*cz*sw)\n                        );\n                    \n                zz = vec4( \n                        eex*(ccy*ccz*ccw - ssy*ssz*ssw),\n                        eex*(ssy*ccz*ccw + ccy*ssz*ssw),\n                        eex*(ccy*ssz*ccw - ssy*ccz*ssw),\n                        eex*(ssy*ssz*ccw + ccy*ccz*ssw)\n                        );\n                            \n                //iterated derivative here instead of just scale factor\n                dz = vec4(z.x*dz.x-z.y*dz.y-z.z*dz.z-z.w*dz.w,\n                          z.x*dz.y+z.y*dz.x+z.z*dz.w-z.w*dz.z,\n                          z.x*dz.z-z.y*dz.w+z.z*dz.x+z.w*dz.y,\n                          z.x*dz.w+z.y*dz.z-z.z*dz.y+z.w*dz.x);\n                \n                dzz = vec4(zz.x*dzz.x-zz.y*dzz.y-zz.z*dzz.z-zz.w*dzz.w,\n                           zz.x*dzz.y+zz.y*dzz.x+zz.z*dzz.w-zz.w*dzz.z,\n                           zz.x*dzz.z-zz.y*dzz.w+zz.z*dzz.x+zz.w*dzz.y,\n                           zz.x*dzz.w+zz.y*dzz.z-zz.z*dzz.y+zz.w*dzz.x);\n\n                dzz.x += 2.;\n                dz.x += 2.;\n                \n                \n                w = z + zz +.06*p;\n                        \n        }\n         \n        float ddz = clamp(dot(dz+dzz,dz+dzz),1e4,1e6);\n        float ddw = clamp(dot(w,w),0.,1e4);\n        \n        float dist = sqrt(sqrt(ddw/ddz)) * log(1.+ddw);\n\n        float stepsize =  10.;     \n        totdist += stepsize;\n   \n        vec3  cdz = clamp( dz.xyz, -1e6, 1e6);\n        //vec3  cdzz = clamp(dzz.yzw, -1e6, 1e6);\n \n        c +=\n             .4*\n             H( log( 10.+cdz*cdz ) ) * exp(-i*i*dist*dist*1e-2);\n    }\n    \n    c = 1. - exp(-c*c*c);\n    O = ( vec4(c,0) );\n               \n}","name":"Buffer A","description":"","type":"buffer"}]}