{"ver":"0.1","info":{"id":"Nsfyzr","date":"1641585079","viewed":281,"name":"fireworks in the fractal city","username":"4eckme","description":"enjoy!","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["2d","city","firework","salute"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// ====== V3.0 ======\n\nvec2 rotate(vec2 c, float a) {\n  return vec2(c.x*cos(a)-c.y*sin(a),c.x*sin(a)+c.y*cos(a));\n}\n\nbool firework(vec2 xy, float time){\n    float t=time;\n    float r=length(xy);\n    float rad=atan(xy.y,xy.x);\n    float deg=degrees(rad);\n    xy=rotate(xy,deg);\n    r=length(xy);\n    rad=atan(xy.y,xy.x);\n    deg=degrees(rad);\n    float X=xy.x+sin(deg+t)*(deg+mod(t,100.0));\n    float Y=xy.y+cos(deg+t)*(deg+mod(t,100.0));\n    return (sqrt(X*X+Y*Y)<30.0&&r<150.0*(sin(t)));\n}\n\nvoid mainImage( out vec4 rgba, in vec2 xy ){\n    \n    // fireworks\n    rgba=vec4(0.0);\n    if(xy.y>55.0){\n        float time=mod(iTime,3.1415);\n        if(firework(xy-iResolution.xy/vec2(1.75,3.0),time-0.25))\n            rgba+=vec4(0,1,0,1.0)*(sin((time-0.25)*2.0));//green\n        if(firework(xy-iResolution.xy/vec2(2.0,1.7),time-0.5))\n            rgba+=vec4(1,1,0,1.0)*(sin((time-0.5)*2.0));//yellow\n        if(firework(xy-iResolution.xy/vec2(2.25,3.5),time-0.75))\n            rgba+=vec4(1,0,1,1.0)*(sin((time-0.75)*2.0));//violet\n        if(firework(xy-iResolution.xy/vec2(3.0,3.0),time-1.0))\n            rgba+=vec4(1,0,0,1.0)*(sin((time-1.25)*2.0));//red\n        if(firework(xy-iResolution.xy/vec2(2.5,1.7),time-1.25))\n            rgba+=vec4(0,1,0.75,1.0)*(sin((time-1.25)*2.0));//turquoise\n        if(firework(xy-iResolution.xy/vec2(1.5,2.0),time-1.5))\n            rgba+=vec4(0,0.75,1,1.0)*(sin((time-1.5)*2.0));//blue\n    } rgba=clamp(rgba,0.0,1.0);\n    \n    // fractal city\n    float line=120.0;\n    vec2 oxy=vec2(xy.y,xy.x);\n    oxy=iResolution.y*2.5-oxy;\n    if(iResolution.y>1000.0) {\n        // fullscreen fix\n        xy/=2.0;oxy=vec2(xy.y,xy.x);\n        oxy=iResolution.y*2.5-oxy;\n        oxy/=2.0;oxy.x-=135.0;\n        oxy.x+=1000.0;line*=2.0;\n        if(iResolution.y>2000.0)\n            oxy.x+=212.0;\n    }if(xy.y<line){\n        // others resolutions\n        oxy.y+=400.0;oxy-=130.0/2.0;\n        if(iResolution.y==281.0)oxy-=82.0;\n        if(iResolution.y==236.0)oxy+=30.0;\n        if(iResolution.y==288.0)oxy+=40.0;\n        if(iResolution.y==360.0)oxy-=2.0;\n        if(iResolution.y==773.0)oxy+=78.0;\n        oxy*=49.91/2.50;//zoom\n        // fractal city lines \n        rgba+=vec4((int(oxy.x)&int(oxy.y))\n        >>(int(mod(floor(oxy.x),5.)*4.0))\n        +(4-int(mod(floor(oxy.y),5.)))&1);\n    }\n}","name":"Image","description":"","type":"image"}]}