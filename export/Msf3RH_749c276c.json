{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"vec2 Triangle(vec2 P, vec2 A, vec2 B, vec2 C)\r\n{\r\n\tvec2 v0 = C - A;\r\n\tvec2 v1 = B - A;\r\n\tvec2 v2 = P - A;\r\n\r\n\tfloat dot00 = dot(v0, v0);\r\n\tfloat dot01 = dot(v0, v1);\r\n\tfloat dot02 = dot(v0, v2);\r\n\tfloat dot11 = dot(v1, v1);\r\n\tfloat dot12 = dot(v1, v2);\r\n\t\t\r\n\t// Compute barycentric coordinates\r\n\tfloat invDenom = 1. / (dot00 * dot11 - dot01 * dot01);\r\n\tfloat u = (dot11 * dot02 - dot01 * dot12) * invDenom;\r\n\tfloat v = (dot00 * dot12 - dot01 * dot02) * invDenom;\r\n\r\n\treturn vec2(u,v);\r\n}\r\n\t\r\nvec2 Shape(float i, float t, float m) {\r\n\ti += t*.5;\r\n\ti *= 6.2832/m;\r\n\tfloat x = (cos(t*.01*i)*.5)*cos(i);\r\n\tfloat y = (cos(t*.01*i)*.5)*sin(i);\r\n\treturn (vec2(x, y));\r\n}\r\n\r\nfloat Segment(vec2 P, vec2 P0, vec2 P1)\r\n{\r\n\tvec2 v = P1 - P0;\r\n\tvec2 w = P - P0;\r\n\tfloat b = dot(w,v) / dot(v,v);\r\n\tv *= clamp(b, 0.0, 1.0);\r\n\treturn distance(w,v);\r\n}\r\n\r\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\r\n\r\n\tfloat aspect = iResolution.x / iResolution.y;\r\n\tvec2 p = fragCoord.xy / iResolution.xy - .5;\r\n\tp.x *= aspect;\r\n\tvec2 m =vec2(0.);\r\n\tvec3 c = vec3(0.);\r\n\t\r\n\tfor(float i=0.; i<12.; i++) {\r\n\t\t\r\n\t\tfloat v = mod(floor(iTime*.01), 15.)+3.;\r\n\t\t\r\n\t\tvec2 p0 = Shape(i, iTime, v); vec2 p1 = Shape(i+1., iTime, v);\r\n\t\tvec2 uv = Triangle(p, m, p0, p1);\r\n\r\n\t\t// Texture map triangle\r\n\t\tif((uv.x >= 0.)&&(uv.y >= 0.) && (uv.x+uv.y < 1.)) {\r\n\t\t\tc += vec3(texture(iChannel0, uv)*.5);\r\n\r\n\t\t\t\r\n\t\t}\r\n\t\t// Triangle outline\r\n\t\tc += vec3(1.)*max(0.,(1.-.5*Segment(p, m, p1)*iResolution.x));\r\n\t\tc += vec3(1.)*max(0.,(1.-.5*Segment(p, p0, p1)*iResolution.x));\r\n\t}\r\n\t\r\n\tfragColor = vec4(c, 1.);\r\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"Msf3RH","date":"1362310308","viewed":418,"name":"Triangle Fan","username":"Trisomie21","description":"Something to test barycentric coordinates","likes":13,"published":1,"flags":0,"usePreview":0,"tags":["triangle"],"hasliked":0,"parentid":"","parentname":""}}