{"ver":"0.1","info":{"id":"cly3Ry","date":"1684171830","viewed":84,"name":"Stupid hue shift","username":"rbasamoyai","description":"Test for \"\"\"better\"\"\" (question mark?) MC dyeable armor rendering\nDrag around to change hue","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["hueshift"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 toYIQ(vec3 rgb) {\n    return mat3(\n        0.299, 0.587, 0.114,\n        0.596, -0.275, -0.321,\n        0.212, -0.523, 0.311) * rgb;\n}\n\nvec3 toRGB(vec3 yiq) {\n    return mat3(\n        1, 0.956, 0.619,\n        1, -0.272, -0.647,\n        1, -1.106, 1.703) * yiq;\n}\n\nvec2 rotate(vec2 v, float th) {\n    float c = cos(th);\n    float s = sin(th);\n    return mat2(\n        c, -s,\n        s, c) * v;\n}\n\nconst float PI = 3.14159265358;\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 mouseUv = iMouse.xy/iResolution.xy * 2. - vec2(1.,1.);\n    \n    //float light = texture(iChannel0, uv).r; \n    float light = floor(uv.x * 16.) / 16.;\n    \n    //vec3 tint = vec3(255.,0.,255.)/255.;\n    float effect = light*-2.+1.;\n    effect = sqrt(abs(effect))*sign(effect);\n    \n    //vec3 yiq = toYIQ(tint);\n    float chroma = 0.25;\n    \n    vec3 yiq = vec3(light, clamp(mouseUv.x, -.5957, .5957), clamp(mouseUv.y, -.5226, .5226));\n    \n    float baseAngle = atan(yiq.y, yiq.z);\n    \n    float blueDiff = baseAngle > -PI*.25\n        ? baseAngle - PI*.75\n        : baseAngle + PI*1.25;\n        \n    float yellowDiff = baseAngle < PI*.75\n        ? -PI*.25 - baseAngle\n        : PI*1.75 - baseAngle;\n    \n    float angle = (effect<0.?blueDiff:yellowDiff)*effect*0.25*(1.-yiq.x);\n    \n    vec2 newIq = rotate(yiq.yz, angle);\n    yiq = vec3(yiq.x * 1.1, newIq.x, newIq.y);\n    \n    vec3 finalTint = toRGB(yiq);\n    finalTint *= light;\n\n    fragColor = vec4(finalTint,1.0);\n}","name":"Image","description":"","type":"image"}]}