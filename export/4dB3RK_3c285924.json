{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"\n// radius of the blur\nconst int bokehRad = 7;\n\n// tweak this to get bigger bokeh by dithering\n// this should be an integer\nconst float tapSpacing = 1.0;\n\n\nvec3 hsv(float h, float s, float v)\n{\n  return pow(mix(vec3(1.0),clamp((abs(fract(h+vec3(3.0, 2.0, 1.0)/3.0)*6.0-3.0)-1.0), 0.0, 1.0),s)*v,vec3(2.2));\n}\n\nfloat shape(vec2 p)\n{\n    return abs(p.x)+abs(p.y)-1.0;\n}\n\nvec3 weave( vec2 pos )\n{\n\tfloat a = .777+iTime*.0001*(1.0+.3*pow(length(pos.xy/iResolution.y),2.0));\n\tpos = pos*cos(a)+vec2(pos.y,-pos.x)*sin(a);\n    pos = mod(pos/87.0, 2.0)-1.0;\n    float h= abs(sin(0.3*iTime*shape(3.0*pos)));\n    float c= 0.05/h;\n    vec3 col = hsv(fract(0.1*iTime+h),1.0,1.0);\n\treturn col*c;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 pos = fragCoord.xy-iResolution.xy*.5-iMouse.xy;\n\t\n\t// I've written this so the compiler can, hopefully unroll all the integer maths to consts.\n\tvec3 col = vec3(0);\n\tint count = 0;\n\tconst int h = ((bokehRad+1)*15)/13; // compiler won't let me cast to floats and do *2/sqrt(3) in a const\n\tfor ( int i=-bokehRad; i <= bokehRad; i++ )\n\t{\n\t\tint ai = (i>0)?i:-i; // seriously? no int abs?\n\t\tfor ( int j=-h; j <= h; j++ )\n\t\t{\n\t\t\tint aj = (j>0)?j:-j;\n\t\t\tif ( (h-aj)*2 > ai )\n\t\t\t{\n\t\t\t\tcol += weave(pos+tapSpacing*vec2(i,j));\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcol /= float(count);\n\n\t\t\n\tfragColor = vec4(pow(col,vec3(1.0/2.2)),1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4dB3RK","date":"1390495101","viewed":1254,"name":"Pixel Weave 2","username":"TekF","description":"Apply a bokeh blur to the pixel weave.\n\nPlay with the 2 parameters at the top of the file to get some neat effects.","likes":42,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""}}