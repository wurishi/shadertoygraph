{"ver":"0.1","info":{"id":"4X23zt","date":"1708734260","viewed":144,"name":"RGB to OKLCH","username":"mehow_one","description":"Such a weird colorspace. \n\nA perceptual color picker\nhttps://bottosson.github.io/posts/colorpicker/","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["colorpicker","oklab","oklch"],"hasliked":0,"parentid":"ctSyRt","parentname":"OKLCH Color Picker"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.14159265358979323846;\n\n//see link in description for the source of those transfer function\nfloat transfer(float v) {\n    return v <= 0.0031308 ?12.92 * v : 1.055 *pow(v, 0.4166666666666667) - 0.055;\n}\n\nvec3 transfer(vec3 v) {\n    return vec3(transfer(v.x), transfer(v.y), transfer(v.z));\n}\n\n// slightly rearranged vector components so it matches with LCH\nvec3 lch2rgb(vec3 lch) {\n    lch.y *= 0.34;\n    \n    vec3 lab = vec3(\n        lch.x,\n        lch.y * cos(lch.z * PI*2.0),\n        lch.y * sin(lch.z * PI*2.0)\n    );\n    \n    vec3 lms = vec3(\n        lab.x + 0.3963377774f * lab.y + 0.2158037573f * lab.z,\n        lab.x - 0.1055613458f * lab.y - 0.0638541728f * lab.z,\n        lab.x - 0.0894841775f * lab.y - 1.2914855480f * lab.z\n    );\n    \n    lms = pow(max(lms, vec3(0.0)), vec3(3.0));\n    \n    vec3 rgb = vec3(\n        +4.0767416621f * lms.x - 3.3077115913f * lms.y + 0.2309699292f * lms.z,\n        -1.2684380046f * lms.x + 2.6097574011f * lms.y - 0.3413193965f * lms.z,\n        -0.0041960863f * lms.x - 0.7034186147f * lms.y + 1.7076147010f * lms.z\n    );\n     \n    rgb = transfer(rgb);\n    return rgb;\n}\n\n\n\nvoid mainImage(out vec4 fragColor, vec2 fragCoord) {\n    \n    vec2 uv = (fragCoord/iResolution.xy)*1.;\n    float l = uv.x; // 0 to 1\n    float c = uv.y; // 0 to 0.34\n    float h = (sin(iTime*0.5)*.5+.5)  * PI * 2.; // still not sure if it 0 to 1 or -.5 to -.5 due to radial lab conversion;\n    vec3 okcolor = vec3(l,c,h);\n    vec3 rgb = lch2rgb(okcolor);\n    fragColor = vec4(rgb,1.);\n}\n","name":"Image","description":"","type":"image"}]}