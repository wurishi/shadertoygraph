{"ver":"0.1","info":{"id":"Wt3Xzr","date":"1580260312","viewed":174,"name":"Je t'aime","username":"sbrown2","description":"My valentines day shader for my girlfriend to be sent that day. Tried to make something nice with limited knowledge. I want to shoutout iq's distance functions and bigwings tutorials.\n","likes":0,"published":1,"flags":64,"usePreview":0,"tags":["2d","voronoi","sdf","love","valentinesday"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4lB3zW","filepath":"https://soundcloud.com/jalnaf/jalen-santoy-foreplay-official-video","previewfilepath":"https://soundcloud.com/jalnaf/jalen-santoy-foreplay-official-video","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float N21(vec2 p){\n\tfloat d = fract(cos(605.43*fract(sin(p.x*p.y*6725.)))*9284.);\n    \n\treturn d;\n}\nvec2 N22(vec2 p){\n    float r = N21(p);\n\treturn vec2(r,N21(vec2(r)));\n}\nfloat heart(vec2 p) {\n    // Center it more, vertically:\n    p.y += .6;\n    // This offset reduces artifacts on the center vertical axis.\n    const float offset = .2;\n    // (x^2+(1.2*y-sqrt(abs(x)))^2−1)\n    float k = 1.2 * p.y - sqrt(abs(p.x) + offset);\n    return p.x * p.x + k * k - (7.*max(abs(sin(2.*iTime)),abs(cos(2.*iTime))));\n}\n\nfloat heart2(vec2 p) {\n    // Center it more, vertically:\n    float fft = texelFetch(iChannel0,ivec2(.7,0.), 0).x;\n    float wave = texelFetch(iChannel0,ivec2(10.,0.),0).x;\n\tfft*=(wave);\n    p.y += .3;\n    // This offset reduces artifacts on the center vertical axis.\n    const float offset = .3;\n    // (x^2+(1.2*y-sqrt(abs(x)))^2−1)\n    float k = 1.2 * p.y - sqrt(abs(p.x) + offset);\n    return p.x * p.x + k * k - 1.*(1.5*fft);\n}\n\nvec3 background(vec2 uv){\n    \n\tfloat wave = texelFetch(iChannel0,ivec2(10.,0.),0).x;\n\twave*=abs(uv.y*.2);\n    return vec3(wave)*vec3(2.,.8,.8)+vec3(.1,.1,.1); \n}\nvec3 voro(vec2 uv){\nfloat m = 0.;\n    float t = iTime;\n    float minD = 100.;\n    float closestcell = 0.;\n    \n    \tuv*=5.;\n        vec2 gv = fract(uv)-.5;\n        vec2 id = floor(uv);\n        \n        for(float x = -1.; x <=1.; x++){\n            for(float y=-1.; y<=1.; y++){\n            \tvec2 offset = vec2(x,y);\n            \tvec2 n = N22(vec2(id+offset));\n\n                vec2 p = .5*sin(n*t)+offset; //-1 to 1 \n                \n                float d = pow(heart2(gv-p),3.)*.6;\n                if(d<minD){\n                minD = d;\n                //closestcell = float(i);\n                }\n        \n           }\n        \n    }\n    vec3 voro = (vec3(.5,.0,.1)-minD)*pow(vec3(1.,.4,.4),vec3(.4)); \n\treturn voro;    \n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates -.5 to .5\n    vec2 uv = fragCoord/iResolution.xy;\n    uv-=.5;\n    uv.x*=iResolution.x/iResolution.y;\n    vec3 col = vec3(0.);\n    \n    //the inner voronoi pattern in the heart\n    vec3 voro = voro(uv);\n    col=voro;\n    \n    //create heart shape and background effect\n    uv*=5.;\n    float heart = heart(uv);\n    \n    //ad background\n    vec3 back_ground = background(uv);\n    if(heart>0.){\n    col = back_ground;\n    }\n    \n    //add border to heart uncomment 2nd color\n    //to have a PPG like effect\n    if(heart > 0. && heart < 1.){\n    col = mix(back_ground,vec3(1.),heart*heart);\n\t    \n    \n    }\n    \n    //assumes animation start from beginning\n\t//col = 1.-smoothstep(back_ground,vec3(1.),vec3(heart*heart));\n    if((iTime > 66. && iTime < 97.) ||\n       (iTime>129. && iTime < 160.) ){\n    \tcol *= 1.-smoothstep(back_ground,vec3(1.),vec3(heart*heart));\n    \tcol+=voro;\n    }\n     \n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}