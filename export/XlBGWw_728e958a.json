{"ver":"0.1","info":{"id":"XlBGWw","date":"1429273035","viewed":154,"name":"Voronoi Beat","username":"reuben364","description":"More voronoi","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"#define time (iTime*1000.)\n#define resolution (iResolution.xy)\n\nvec2 random(vec2 x)\n{\n\treturn fract(sin(vec2(dot(x,vec2(127.1,311.7)),dot(x,vec2(269.5,183.3))))*43758.5453);\n}\n\n\nvec2 randomCircle(vec2 x, float t) {\n    vec2 randCenter =  random(x+random(vec2(0)));\n    vec2 randRadii = min(randCenter, 1.-randCenter)*random(x+random(vec2(1)));\n    float randSpeed = 2.*length(random(x+random(vec2(2))))-1.;\n    t *= randSpeed;\n    return randCenter+randRadii*vec2(cos(t),sin(t));\n}\n\nvec2 gridClosest(vec2 pos, vec2 prev) {\n    vec2 center = floor(pos);\n    vec2 closest = vec2(2.);\n    for(int i=-1; i<=1; i++)\n        for(int j=-1; j<=1; j++){\n            vec2 point = center+vec2(i,j);\n            point += randomCircle(point, time/1000.);\n            if(prev==vec2(0) || point != prev && length(pos-prev) <= length(pos-point))\n                if(length(pos-point) <= length(pos-closest)) {\n                    closest = point;\n                }\n        }\n    return closest;\n}\n\nfloat voronoi(vec2 pos, vec2 first, vec2 second) {\n   \treturn abs(dot(normalize(first-second),pos-0.5*(first+second)));\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 pos = fragCoord/resolution;\n    float sTime = time/10000.;\n    pos-=10.+mix(random(vec2(3)),random(vec2(5)), clamp((sTime-2.)/10.,0.,1.))*sTime ;\n    pos*=5.;\n    vec2 first = gridClosest(pos, vec2(0));\n    vec2 second = gridClosest(pos, first);\n    float vor = voronoi(pos, first, second);\n    float clampDist = abs(min(length(pos-first),1.));\n    vec4 center = .2/clampDist*vec4(1,1,0,1);\n    float borderPulse = 1.-abs(.5-clamp(5.*(fract(sTime)-.8),0.,1.));\n    vec4 border = max(0., 1.-vor)*mix(vec4(1,0,1,1),vec4(1,0,0,1),borderPulse);\n    fragColor = mix(center, border, .5);\n}","name":"","description":"","type":"image"}]}