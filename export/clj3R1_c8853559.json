{"ver":"0.1","info":{"id":"clj3R1","date":"1672860431","viewed":90,"name":"CityMorningMoon","username":"Raistlin_fuego","description":"earningshaders","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["learningshaders"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float rectSDF(vec2 st, vec2 s){\n    st = st*2.-1.;\n    return max( abs(st.x/s.x),\n                abs(st.y/s.y) );\n}\n\nfloat fill(float x, float size){\n    return 1.-step(size, x);\n}\n\nfloat circleSDF(vec2 st){\n    return length(st);\n}\n\nfloat starSDF(vec2 st, int V, float s) {\n    st = st*4.-2.;\n    float a = atan(st.y, st.x)/6.28;\n    float seg = a * float(V);\n    a = ((floor(seg) + 0.5)/float(V) + \n        mix(s,-s,step(.5,fract(seg)))) \n        * 6.28;\n    return abs(dot(vec2(cos(a),sin(a)),\n                   st));\n}\n\nvec3 buildingCity(vec3 color, vec2 st){\n    float building1 = fill(rectSDF(st-vec2(-0.480,-0.400), vec2(0.580,2.000)), 0.408);\n    float building2 = fill( rectSDF(st-vec2(-0.250,-0.210), vec2(0.260,0.970)), 0.860);\n    float building3 = fill(rectSDF(st-vec2(-0.080,-0.240), vec2(0.290,1.510)), 0.4);\n    float building4 = fill( rectSDF(st-vec2(0.120,-0.610), vec2(0.34,0.710)), 0.860);\n    float building5 = fill(rectSDF(st-vec2(0.420,-0.070), vec2(0.290,0.810)), 1.072);\n    float building6 = fill(rectSDF(st-vec2(0.680,-0.270), vec2(0.190,0.510)), 1.072);\n    float building7 = fill(rectSDF(st-vec2(0.920,-0.170), vec2(0.290,0.710)), 1.072);\n    float building8 = fill(rectSDF(st-vec2(1.20,-0.370), vec2(0.24,0.310)), 1.072);\n\n    float antenna1 = fill(rectSDF(st-vec2(-0.030,0.090), vec2(0.005,0.060)), 1.072);\n    float antenna2 = fill(rectSDF(st-vec2(0.630,0.030), vec2(0.007,0.060)), 1.072);\n    float antenna3 = fill(rectSDF(st-vec2(0.830,0.240), vec2(0.01,0.060)), 1.072);\n    \n    color = mix(color, vec3(0.4), building1);\n    color = mix(color, vec3(0.2), building2);\n    color = mix(color, vec3(0.6), building3);\n    color = mix(color, vec3(0.4), building4);\n    color = mix(color, vec3(0.8), building5);\n    color = mix(color, vec3(0.8), building5);\n    color = mix(color, vec3(0.2), building6);\n    color = mix(color, vec3(0.4), building7);\n    color = mix(color, vec3(0.1), building8);\n    \n    color = mix(color, vec3(0.6), antenna1);\n    color = mix(color, vec3(0.2), antenna2);\n    color = mix(color, vec3(0.4), antenna3);\n    \n    return color;\n}\n\nvec3 moon(vec3 color, vec2 st, vec2 position){\n    vec2 positionMoon = st-position;\n    vec3 colorMoonDark = color;\n    \n    float moon = circleSDF(positionMoon);\n    float moonDark = circleSDF(positionMoon -vec2(0.050,0.010));\n    \n    moonDark = fill( moonDark, 0.07);\n    moon = fill( moon, 0.084);\n    \n    color = mix(color, vec3(1.), moon);\n    color = mix(color, colorMoonDark, moonDark);\n    return color;\n}\n\nvec3 stars(vec3 color, vec2 st){\n    float star1 = fill(starSDF(st-vec2(0.100,-0.230), 7, 0.328), 0.012);\n    float star2= fill(starSDF(st-vec2(0.650,0.140), 7, 0.328), 0.018);\n    float star3 = fill(starSDF(st-vec2(1.150,0.270), 7, 0.328), 0.022);\n    float star4 = fill(starSDF(st-vec2(0.200,0.230), 7, 0.328), 0.012);\n    \n    color = mix(color, vec3(0.995,0.980,abs(cos(iTime*10.))), star1);\n    color = mix(color, vec3(0.995,0.980,abs(cos(iTime*10.))), star2);\n    color = mix(color, vec3(0.995,0.980,abs(cos(iTime*10.))), star3);\n    color = mix(color, vec3(0.995,0.980,abs(cos(iTime*10.))), star4);\n    return color;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 st = fragCoord/iResolution.xy;\n    st.x *= iResolution.x/iResolution.y;\n    \n    vec3 colorA = vec3(0.797,0.860,0.995);\n    vec3 colorB = vec3(0.007,0.063,0.340);\n    vec3 sky = mix(colorA, colorB, st.y);\n    vec3 color = sky;\n    \n    color = buildingCity(color, st);\n    color = moon(color, st,  vec2(0.170,0.880));\n    color = stars(color, st);\n    \n    fragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}]}