{"ver":"0.1","info":{"id":"dd3SR7","date":"1679543047","viewed":91,"name":"(median of)^4","username":"remexre","description":"A blur via median of medians of medians of medians.","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["blur"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void load(out vec4 colors[9], vec2 uv) {\n  vec2 res = iResolution.xy;\n  colors[0] = texture(iChannel0, (uv + vec2(-1.0, +1.0)) / res);\n  colors[1] = texture(iChannel0, (uv + vec2(+0.0, +1.0)) / res);\n  colors[2] = texture(iChannel0, (uv + vec2(+1.0, +1.0)) / res);\n  colors[3] = texture(iChannel0, (uv + vec2(-1.0, +0.0)) / res);\n  colors[4] = texture(iChannel0, (uv + vec2(+0.0, +0.0)) / res);\n  colors[5] = texture(iChannel0, (uv + vec2(+1.0, +0.0)) / res);\n  colors[6] = texture(iChannel0, (uv + vec2(-1.0, -1.0)) / res);\n  colors[7] = texture(iChannel0, (uv + vec2(+0.0, -1.0)) / res);\n  colors[8] = texture(iChannel0, (uv + vec2(+1.0, -1.0)) / res);\n}\n\n// https://stackoverflow.com/a/19027761/1333945\n#define median(a, b, c) max(min((a), (b)), min(max((a), (b)), (c)))\n\nvec4 medianOfMedian(vec4 chunk[9]) {\n  vec4 a, b, c;\n\n  a = chunk[0];\n  b = chunk[1];\n  c = chunk[2];\n  vec4 m0 = median(a, b, c);\n\n  a = chunk[3];\n  b = chunk[4];\n  c = chunk[5];\n  vec4 m1 = median(a, b, c);\n\n  a = chunk[6];\n  b = chunk[7];\n  c = chunk[8];\n  vec4 m2 = median(a, b, c);\n\n  return median(m0, m1, m2);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n  vec4 image[9];\n  vec4 medians[9];\n\n  load(image, fragCoord + vec2(-3.0, +3.0));\n  medians[0] = medianOfMedian(image);\n\n  load(image, fragCoord + vec2(+0.0, +3.0));\n  medians[1] = medianOfMedian(image);\n\n  load(image, fragCoord + vec2(+3.0, +3.0));\n  medians[2] = medianOfMedian(image);\n\n  load(image, fragCoord + vec2(-3.0, +0.0));\n  medians[3] = medianOfMedian(image);\n\n  load(image, fragCoord + vec2(+0.0, +0.0));\n  medians[4] = medianOfMedian(image);\n\n  load(image, fragCoord + vec2(+3.0, +0.0));\n  medians[5] = medianOfMedian(image);\n\n  load(image, fragCoord + vec2(-3.0, -3.0));\n  medians[6] = medianOfMedian(image);\n\n  load(image, fragCoord + vec2(+0.0, -3.0));\n  medians[7] = medianOfMedian(image);\n\n  load(image, fragCoord + vec2(+3.0, -3.0));\n  medians[8] = medianOfMedian(image);\n\n  vec4 momomom = medianOfMedian(medians);\n  vec4 center = texture(iChannel0, fragCoord / iResolution.xy);\n  float time = (cos(iTime * 2.0) + 1.0) / 2.0;\n  fragColor = mix(center, momomom, time);\n}\n\n// vim: set ft=glsl ;\n","name":"Image","description":"","type":"image"}]}