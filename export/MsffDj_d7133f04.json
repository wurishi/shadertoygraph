{"ver":"0.1","info":{"id":"MsffDj","date":"1498086459","viewed":85,"name":"Worley Please Work","username":"themdubs","description":"Is bad","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["procedural"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 VoronoiHash(vec3 v, float s){\n \tv = mod(v,s);\n    v = vec3(dot(v, vec3(127.1,311.7,74.7)),\n             dot(v, vec3(269.5,183.3,246.1)),\n             dot(v, vec3(113.5,271.9,124.6)));\n    return fract(sin(v)*43758.5453123);\n}\n\nvec3 Voronoi(vec3 v, float s, bool inverted){\n \tv = v*s;\n    v = v+0.5;\n    vec3 p = floor(v);\n    vec3 f = fract(v);\n    \n    float id = 0.0;\n    vec2 res = vec2(1.0,1.0);\n    for(int k=-1;k<=1;k++){\n        for(int j=-1;j<=1;j++){\n            for(int i=-1;i<=1;i++){\n                vec3 b = vec3(i,j,k);\n                vec3 r = vec3(b)-f+VoronoiHash(p+b, s);\n                float d = dot(r,r);\n                if(d<res.x){\n                    id= dot(p+b, vec3(1.0,57.0,113.0));\n                    res = vec2(d,res.x);\n                }\n                else if(d<res.y){\n                    res.y = d;\n                }\n            }\n        }\n    }\n    vec2 result = res;\n    id = abs(id);\n    if(inverted)\n        return vec3(1.0-result, id);\n    else\n        return vec3(result, id);\n}\n\nfloat Worley3Octaves(vec3 p, float s){\n\tvec3 xyz = p;\n    \n    float worleyV1 = Voronoi(xyz, 1.0*s, true).r;\n    float worleyV2 = Voronoi(xyz, 2.0*s, false).r;\n    float worleyV3 = Voronoi(xyz, 4.0*s, false).r;\n    \n    worleyV1 = clamp(worleyV1, 0.0, 1.0);\n    worleyV2 = clamp(worleyV2, 0.0, 1.0);\n    worleyV3 = clamp(worleyV3, 0.0, 1.0);\n    \n    float worleyV = worleyV1;\n    worleyV = worleyV - worleyV2*0.3;\n    worleyV = worleyV - worleyV3*0.3;\n    return worleyV;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec3 pos = vec3(uv,sin(iTime/60.0));\n\tfragColor.r = Worley3Octaves(pos, 6.0);\n    fragColor.g = Worley3Octaves(pos, 6.0);\n    fragColor.b = Worley3Octaves(pos, 12.0);\n}","name":"Image","description":"","type":"image"}]}