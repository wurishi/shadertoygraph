{"ver":"0.1","info":{"id":"ldVfRm","date":"1528177500","viewed":561,"name":"Dupl.io","username":"rory618","description":"https://dupl.io/\nClick on squares to add to them and make them overflow, first click selects your color.\nAI's will probably cheat and may be too hard :/","likes":8,"published":1,"flags":32,"usePreview":0,"tags":["game","io","dupl"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat _max(vec2 x){\n    return max(x.x,x.y);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    fragColor = vec4(237)/256.;\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    vec4 c = texture(iChannel0,(floor(fragCoord/s)+.5)/iResolution.xy);\n\n    if(c.w==0.)\n        c.xyz = vec3(.86);\n    \n    vec2 cell_uv = mod(fragCoord, vec2(s))/s;\n    float d = length(max(vec2(0),abs(cell_uv.xy-.5-vec2(.08,-.08))-.3));\n    d = clamp(s/7.5-d*s,0.,1.);\n    fragColor = mix(fragColor, c*.923, d);\n    d = length(max(vec2(0),abs(cell_uv.xy-.5)-.3));\n    d = clamp(s/7.5-d*s,0.,1.);\n    fragColor = mix(fragColor, c, d);\n    c.w=floor(c.w)+max(0.,fract(c.w)*(1.+.008/1.1)-.008);\n    if(c.w==1.){\n        d = length(cell_uv.xy-.5)-.12;\n        d = clamp(-d*s,0.,1.);\n        fragColor = mix(fragColor, vec4(1), d);\n    } else if(c.w==2.){\n        d = length(vec2(abs(cell_uv.x-.5)+.32,cell_uv.y)-.5)-.12;\n        d = clamp(-d*s,0.,1.);\n        fragColor = mix(fragColor, vec4(1), d);\n    } else if(c.w==3.){\n        d = length(vec2(abs(cell_uv.x-.5)+.32,cell_uv.y-.14)-.5)-.12;\n        d = clamp(-d*s,0.,1.);\n        fragColor = mix(fragColor, vec4(1), d);\n        d = length(cell_uv.xy-.5+vec2(0,.2))-.12;\n        d = clamp(-d*s,0.,1.);\n        fragColor = mix(fragColor, vec4(1), d);\n    } else if(c.w==4.){\n        d = length((abs(cell_uv-.5)+.32)-.5)-.12;\n        d = clamp(-d*s,0.,1.);\n        fragColor = mix(fragColor, vec4(1), d);\n    } else if (c.w!=0.) {\n        float p = (fract(c.w)*10.-.5)*3.14159*2.;\n        float d = abs(length(cell_uv.xy-.5)-.26)-.065;\n        d = max(d,d*max(0.,p-atan(.5-cell_uv.x,.5-cell_uv.y)));\n        d = clamp(-d*s,0.,1.);\n        fragColor = mix(fragColor, vec4(1), d);\n    }\n    \n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":2,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec3 D = vec3(1./iResolution.xy,0);\n    if(iFrame<30){\n    \tfragColor = texture(iChannel0, fragCoord/iChannelResolution[0].xy);\n    \tfragColor.w = float(fragColor.w>.95);\n    } else {\n        fragColor = texture(iChannel1, uv);\n    }\n    vec4 T = texture(iChannel2,vec2(0));\n    if((T.xyz==vec3(0) || (T.w<=0. && T.xyz == fragColor.xyz)) &&\n       fragColor.w>0. && iMouse.z>0.&&floor(iMouse.xy/s)==floor(fragCoord) && \n       fragColor.w==floor(fragColor.w)){\n        fragColor.w+=1.1;\n    }\n    for(int i = 1; i < 40; i++){\n    \tvec4 zp = texture(iChannel2,(vec2(i,1)+.5)/iResolution.xy);\n    \tvec4 Tp = texture(iChannel2,(vec2(i,0)+.5)/iResolution.xy);\n        if(((Tp.w<=0. && Tp.xyz == fragColor.xyz)) &&\n           fragColor.w>0. && floor(zp.xy/s)==floor(fragCoord) && \n           fragColor.w==floor(fragColor.w)){\n            fragColor.w+=1.1;\n        }\n    }\n    if(fragColor.w==5. || fragColor.w > 6.){\n        fragColor.w = 0.;\n    }\n\n    vec4 a = texture(iChannel1,uv+D.xz);\n    vec4 b = texture(iChannel1,uv+D.zy);\n    vec4 c = texture(iChannel1,uv-D.xz);\n    vec4 d = texture(iChannel1,uv-D.zy);\n    float hit = 0.;\n    if(a.w==5.){\n        fragColor.xyz = a.xyz;\n        hit++;\n    }\n    if(b.w==5.){\n        fragColor.xyz = b.xyz;\n        hit++;\n    }\n    if(c.w==5.){\n        fragColor.xyz = c.xyz;\n        hit++;\n    }\n    if(d.w==5.){\n        fragColor.xyz = d.xyz;\n        hit++;\n    }\n    if(hit>0.){\n        fragColor.w += hit;\n        if(fragColor.w>=5.){\n            fragColor.w=5.;\n        } else {\n            fragColor.w+=.1;\n        }\n    }\n    \n    fragColor.w = max(floor(fragColor.w),fragColor.w-.0018);\n    \n    fragColor.w=min(fragColor.w,floor(fragColor.w)+.1);\n}","name":"Buf A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"float s = 30.;\nvec4 hash44(vec4 p4)\n{\n\tp4 = fract(p4  * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+19.19);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    if(iFrame<3){\n        fragColor = vec4(0);\n    } else {\n    \tfragColor = texture(iChannel0, uv);\n    }\n    \n    vec3 D = vec3(1./iResolution.xy,0);\n    vec4 m = texture(iChannel0,vec2(uv.x,D.x)+D.xy/2.);\n    vec4 z = texture(iChannel1,(floor(iMouse.xy/s)+.5)/iResolution.xy);\n    vec4 zp = texture(iChannel1,(floor(m.xy/s)+.5)/iResolution.xy);\n    if(floor(fragCoord.y)==0.){\n        if(z.w>0. && iMouse.z>0. && fragColor == vec4(0)){\n            if(floor(fragCoord)==vec2(0)){\n                fragColor.xyz=z.xyz;\n                fragColor.w=.1;\n            }\n        }\n        \n        \n        if(texture(iChannel0,vec2(0)).xyz!=vec3(0) && zp.w>0. && fragColor == vec4(0)){\n            bool used = false;\n            for(int i = 0; i < 40; i++){\n                vec4 cp = texture(iChannel0,(vec2(i,0)+.5)/iResolution.xy);\n                if(zp.xyz==cp.xyz){\n                    used = true;\n                }\n            }\n            if(!used && floor(fragCoord)!=vec2(0)){\n                fragColor.xyz=zp.xyz;\n                fragColor.w=.15;\n            }\n        }\n        if(floor(fragCoord)!=vec2(0) && zp.w>0. && fragColor.w<=0. && zp.xyz==fragColor.xyz){\n            fragColor.w+=.1 + fragCoord.x/300.;\n        }\n        \n        if(fragColor.w<0.){\n            fragColor.w = .1;\n        }\n        fragColor.w = max(floor(fragColor.w),fragColor.w-.0018);\n        if(floor(fragCoord)==vec2(0) && iMouse.z>0. && fragColor != vec4(0)){\n            vec4 c = texture(iChannel1,(floor(iMouse.xy/s)+.5)/iResolution.xy);\n            if(c.xyz==fragColor.xyz && fragColor.w == 0. && (fract(c.w)==0. || fract(c.w)>.08)){\n                fragColor.w=-.1;\n            }\n        }\n    } else {\n        for (int j = 0; j < 32; j++){\n            vec2 r= hash44(vec4(fragCoord,iFrame,j)).xy*iResolution.xy;\n            vec4 a = texture(iChannel0,vec2(uv.x,0));\n            vec4 l = texture(iChannel1,(floor(r.xy/s)+.5)/iResolution.xy);\n            vec4 h = texture(iChannel1,(floor(fragColor.xy/s)+.5)/iResolution.xy);\n            float v = 0.;\n            float hv = 0.;\n            if(l.xyz==a.xyz){\n                vec4 oa = texture(iChannel1,(floor(r.xy/s)+.5+vec2(0,1))/iResolution.xy);\n                vec4 ob = texture(iChannel1,(floor(r.xy/s)+.5+vec2(1,0))/iResolution.xy);\n                vec4 oc = texture(iChannel1,(floor(r.xy/s)+.5-vec2(0,1))/iResolution.xy);\n                vec4 od = texture(iChannel1,(floor(r.xy/s)+.5-vec2(1,0))/iResolution.xy);\n                v += floor(oa.w)*float(oa.xyz!=a.xyz);\n                v += floor(ob.w)*float(ob.xyz!=a.xyz);\n                v += floor(oc.w)*float(oc.xyz!=a.xyz);\n                v += floor(od.w)*float(od.xyz!=a.xyz);\n                v += floor(l.w);\n            }\n            if(h.xyz==a.xyz){\n                vec4 oa = texture(iChannel1,(floor(fragColor.xy/s)+.5+vec2(0,1))/iResolution.xy);\n                vec4 ob = texture(iChannel1,(floor(fragColor.xy/s)+.5+vec2(1,0))/iResolution.xy);\n                vec4 oc = texture(iChannel1,(floor(fragColor.xy/s)+.5-vec2(0,1))/iResolution.xy);\n                vec4 od = texture(iChannel1,(floor(fragColor.xy/s)+.5-vec2(1,0))/iResolution.xy);\n                hv += floor(oa.w)*float(oa.xyz!=a.xyz);\n                hv += floor(ob.w)*float(ob.xyz!=a.xyz);\n                hv += floor(oc.w)*float(oc.xyz!=a.xyz);\n                hv += floor(od.w)*float(od.xyz!=a.xyz);\n                hv += floor(h.w);\n            }\n            if(v>=hv){\n                fragColor = vec4(r,0,v);\n            }\n        }\n    }\n    \n}","name":"Buf B","description":"","type":"buffer"}]}