{"ver":"0.1","info":{"id":"mtBXRz","date":"1675568278","viewed":57,"name":"Pac Man","username":"zsrail","description":"Pac-Man being chased by a ghost","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["pacman"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float bump(float a, float b, float transition, float x);\nvec3 pac_man(vec2 pac_coords, float mouth_size);\nvec3 ghost(vec2 uv, vec3 color);\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = 2.0*(fragCoord-0.5*iResolution.xy)/iResolution.x;\n    uv.x -= 1.5*iTime;\n    uv.x = mod(uv.x,3.0)-1.5;\n\n    //vec3 col = pac_man(uv-vec2(mod(iTime,3.0)-1.5,0.0), 0.52*abs(cos(4.0*iTime)));\n    \n    vec3 pac_col = pac_man(uv+vec2(0.95,0.0),0.52*abs(cos(5.0*iTime)));\n    vec3 ghost_col = ghost(uv-vec2(1.0,0.0), vec3(1.0,0.0,0.0));\n    \n    vec3 col = pac_col + ghost_col;\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}\n\nfloat bump(float a, float b, float transition, float x)\n{\n    return smoothstep(a-transition,a,x)*smoothstep(b+transition,b,x);\n}\n\nvec3 pac_man(vec2 pac_coords, float mouth_size)\n{\n    float theta = atan(pac_coords.y,pac_coords.x);\n    \n    float circle_mask = smoothstep(0.5,0.49,length(pac_coords));\n    float wedge_mask = 1.0-bump(-mouth_size,mouth_size,0.01,theta);\n    \n    return circle_mask*wedge_mask*vec3(1.0,1.0,0.0);\n}\n\nvec4 eye(vec2 uv)\n{\n    float alpha = smoothstep(0.15,0.14,length(uv));\n    vec3 col = vec3(alpha*smoothstep(0.09,0.1,length(uv-vec2(0.05,0.0))));\n    return vec4(col,alpha);\n}\n\nvec3 ghost(vec2 uv, vec3 color)\n{\n    float theta = atan(uv.y,uv.x);\n    \n    float head_mask = smoothstep(0.5,0.49,length(uv));\n    float body_mask = min(smoothstep(0.0,-0.001,uv.y),bump(-0.49,0.49,0.01,uv.x));\n    float skirt_thresh = 0.02*cos(30.0*uv.x+6.0*iTime) - 0.5;\n    float skirt_mask = smoothstep(skirt_thresh-0.01,skirt_thresh,uv.y);\n    \n    vec3 base_col = max(head_mask,body_mask)*skirt_mask*color;\n    vec4 eye_col = eye(uv - vec2(0.3,0.1)) + eye(uv - vec2(-0.1,0.1));\n    \n    return mix(base_col,eye_col.rgb,eye_col.a);\n}","name":"Image","description":"","type":"image"}]}