{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"// returns the mouse coords in ([0-1], [0-1]), or (.5, .5) if the mouse is uninitialized\nvec2 mouse() \n{\n    return all(greaterThan(iMouse.xy, vec2(0,0))) ? (iMouse.xy / iResolution.x) : vec2(.5, .5);\n}\n\n// Hashes a vec2 and return a random point\nvec2 hash(vec2 p)\n{\n    vec2 q = vec2( dot(p,vec2(127.1,311.7)), \n\t\t\t\t   dot(p,vec2(269.5,183.3)) );\n\treturn fract(sin(q)*43758.5453);\n}\n\n// Position of the feature point (ie: random point) in the grid cell.\n// g is the coord of the lower left corner of the grid cell\nvec2 feature_pos(vec2 g)\n{\n    return g + hash(g);\n}\n\n// Calculates the norm of v using the mouse.y value to introduce some variation.\n// Note that if mouse.y = 1.0, we get the manhattan distance, and with \n// mouse.y = 2.0, we have the Euclidean norm.\n// As mouse.y grows larger, the formula tends to max(abs(v.x), abs(v.y))\nfloat norm(vec2 v)\n{\n    float n = mouse().y * 10.0;\n    return pow(pow(abs(v.x), n) + pow(abs(v.y), n), 1.0 / n);\n}\n\nfloat voronoi(vec2 uv, float cell_count)\n{\n    vec2 p = uv * cell_count;\n    vec2 g = floor(p);\n   \n    float dist = 2.0; // technically, sqrt(2.0) would be enough\n    for (float i = -1.0; i <= 1.0; i++) {\n        for (float j = -1.0; j <= 1.0; j++) {\n    \t\tvec2 feature = feature_pos(g + vec2(i,j));\n    \t\tfloat d = norm(feature - p);\n            dist = min(dist, d);\n        }\n    }\n\treturn dist;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{    \n    float m = mouse().x * 20.0; \n\tvec2 uv = fragCoord.xy / iResolution.xx;\n    float v1 = voronoi(uv, 10.0);\n    float v2 = voronoi(uv+vec2(v1,v1), m);\n\n    \n\tfragColor = vec4(v1, 0, v2, 1.0);\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4ls3RH","date":"1418625383","viewed":258,"name":"Vorolol","username":"gregschlom","description":"Fun with Voronoise. Use the mouse.","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["voronoise"],"hasliked":0,"parentid":"","parentname":""}}