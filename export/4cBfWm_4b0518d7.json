{"ver":"0.1","info":{"id":"4cBfWm","date":"1724983904","viewed":48,"name":"lightning_Fang","username":"yufang900809","description":"test","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["lightning"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float rand(float n){return fract(sin(n) * 43758.5453123);}\n\nfloat rand2D(vec2 n)\n{ \n\treturn fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n}\n\n\n\nvec3 lightning(vec2 uv, float x, float r, float width)\n{\n    float randValue = rand(iTime) * 0.1;\n    \n    float range01 = 0.1*width + randValue;\n    float range02 = 0.2*width + randValue;\n    float range03 = 0.2*width + randValue;\n    float range04 = 0.1*width + randValue;\n    float segment01 = 0.2;\n    float segment02 = 0.4;\n    float segment03 = 0.6;\n    float segment04 = 0.8;\n    float segment05 = 1.0;\n    \n    \n    vec2 A = vec2(0.0,0.0);\n    vec2 B = vec2(rand(iTime)*range01-range01*0.5,segment01);\n    vec2 C = vec2(rand(iTime+r*1.0)*range02-range02*0.5,segment02);\n    //vec2 B = vec2(0.1,segment01);\n    //vec2 C = vec2(0.05,segment02);\n    vec2 D = vec2(rand(iTime+r*2.0)*range03-range03*0.5,segment03);\n    vec2 E = vec2(rand(iTime+r*3.0)*range04-range04*0.5,segment04);\n    vec2 F = vec2(0.0,segment05);\n    \n    vec2 dirAB = B-A;\n    float sAB = dirAB.x/dirAB.y;\n    vec2 dirBC = C-B;\n    float sBC = dirBC.x/dirBC.y;\n    vec2 dirCD = D-C;\n    float sCD = dirCD.x/dirCD.y;\n    vec2 dirDE = E-D;\n    float sDE = dirDE.x/dirDE.y;\n    vec2 dirEF = F-E;\n    float sEF = dirEF.x/dirEF.y;\n    \n    vec2 line;\n    float offsetX = x;\n    \n    \n    if(uv.y < segment01){\n        line = (uv.xx-offsetX) - sAB*uv.yy;\n    }\n    if(uv.y > segment01){\n        float segmentOffset = segment01*sAB - segment01*sBC;\n        line = (uv.xx-offsetX) - sBC*uv.yy - segmentOffset;\n    }\n    if(uv.y > segment02){\n        float segmentOffset = segment01*sAB - segment01*sBC + segment02*sBC - segment02*sCD;\n        line = (uv.xx-offsetX) - sCD*uv.yy - segmentOffset;\n    }\n    if(uv.y > segment03){\n        float segmentOffset = segment01*sAB - segment01*sBC + segment02*sBC - segment02*sCD + segment03*sCD - segment03*sDE;\n        line = (uv.xx-offsetX) - sDE*uv.yy - segmentOffset;\n    }\n    if(uv.y > segment04){\n        float segmentOffset = segment01*sAB - segment01*sBC + segment02*sBC - segment02*sCD + segment03*sCD - segment03*sDE + segment04*sDE - segment04*sEF;\n        line = (uv.xx-offsetX) - sEF*uv.yy - segmentOffset;\n    }\n    \n    vec3 col = vec3(1,2,3);\n    \n    float dist = length(line);\n    dist = 0.002/dist;\n    col *= pow(dist,0.6);\n    \n    return col;\n}\n\n\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    //uv.x *= iResolution.x / iResolution.y;\n    \n    \n    \n    vec3 l01 = lightning(uv, 0.2, 1.0, 0.8);\n    vec3 l02 = lightning(uv, 0.6, 2.0, 0.15);\n    \n    \n    fragColor = vec4(l01+l02,1.0);\n}\n\n\n\n\n    // d = sin(d*8.0 + iTime)/8.0;\n    // d = abs(d);\n\n\n\n\n\n","name":"Image","description":"","type":"image"}]}