{"ver":"0.1","info":{"id":"3ssyD2","date":"1585614869","viewed":48,"name":"pulsing ball","username":"Xylenox","description":"asdasd","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["asdsa"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define BOX 10\n#define SIZE 5\n#define MAX_STEPS 360\n#define MIN_DIST 0.001\n#define MAG_D .05\n\n\nfloat sphere(vec3 p, float s);\nfloat distEstimate(vec3 p, float s, vec3 rep);\n\n\nfloat s = 0.001;\nvec3 rep = vec3(MAG_D, MAG_D, MAG_D);\n\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    uv -= vec2(0.5, 0.5);\n\tuv.x *= iResolution.x / iResolution.y;\n    \n \n\tvec3 pos = vec3(0.0*sin(iTime)+MAG_D/2.0, 0.0*cos(iTime)+MAG_D/2.0, -4.6);\n\tvec3 dir = normalize(vec3(rotate(uv, 0.0*iTime), 1.0));\n   \n    \n    float totDist = 0.0;\n    int steps;\n    for(steps = 0; steps  < MAX_STEPS; steps++) {\n    \tvec3 p = pos+totDist*dir;\n        float dist = distEstimate(p, s, vec3(MAG_D, MAG_D, MAG_D));\n        totDist += dist;\n        if(dist < MIN_DIST) {\n            break;\n        }\n    }\n    float color = 1.0-float(steps)/float(MAX_STEPS);\n    \n    \n    vec3 p = pos+totDist*dir;\n    if (distance(p, vec3(0., 0., 0.)) > 2.0) color = 0.0;\n    if (color != 0.0)\n    fragColor = vec4(tan(iTime+p), 1.0);\t\n}\n\nfloat manhattanDistance(vec3 p1, vec3 p2) {\n\tfloat d1 = abs(p1.x - p2.x);\n\tfloat d2 = abs(p1.y - p2.y);\n\tfloat d3 = abs(p1.z - p2.z);\n\treturn max(d1, max(d2, d3));\n}\n\nfloat sphere(vec3 p, float s, vec3 off) {\n    //return manhattanDistance(p, off)-s;\n\treturn distance(p, off)-s;\n}\n\nfloat distEstimate(vec3 p, float s, vec3 rep) {\n    vec3 mid = rep/2.0;\n    if (distance(p, vec3(0.0, 0., 0.)) > 2.0) return MAG_D;\n\treturn sphere(mod(p, rep), s, mid);\n}","name":"Image","description":"","type":"image"}]}