{"ver":"0.1","info":{"id":"MlSyzc","date":"1509508234","viewed":227,"name":"- Infinity - ","username":"FranciscoGarcia","description":"Funny checkerboard pattern.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["checkerboard","pattern"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define EPS 0.001\n#define MAX 20.0\n#define STEPS 135\n#define PI 3.14159\n\nvec3 lig = vec3(0.0, 1.7, 0.4);\nconst float angle = 120.0;\nconst float fov = angle * 0.5 * PI / 180.0;\n\nfloat plane( in vec3 p) {\n   return p.y + (sin(sin(p.z*0.123) - p.x*0.311)*0.71 + cos(p.z*5.53 + sin(p.x*2.127))*0.12)*1.2 + 0.4;\n}\n\nfloat map(in vec3 p) {\n  return plane(p);\n}\n\nvec3 normals(in vec3 p) {\n  vec2 e = vec2(EPS, 0.0);\n  vec3 gr = vec3( map(p + e.xyy) - map(p - e.xyy),\n                  map(p + e.yxy) - map(p - e.yxy),\n                  map(p + e.yyx) - map(p - e.yyx));\n  return normalize(gr);\n}\n\nfloat diffuse(in vec3 nor){\n  float diff;\n  \n  diff = max(0.0, dot(nor, lig));\n  return diff;\n}\n\nfloat trace(in vec3 ro, in vec3 rd) {\n  float d, t;\n  d=1.0;\n  for( int i = 0; i<STEPS; i++) {\n    if (d < EPS) break;\n    d = map(ro+t*rd);\n    t += d;\n  }\n  return t;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord.xy*2.0 - iResolution.xy) / min(iResolution.x, iResolution.y);\n \tvec3 ro = vec3(0.0, 1.3, -5.0*iTime);\n  \tvec3 rd =   normalize(vec3(sin(fov) * uv.x, sin(fov) * uv.y, -cos(fov)));\n  \tvec3 col = vec3(1.0);\n  \tfloat tr = trace(ro, rd);\n \n  \tif(tr < MAX){\n    vec3 pos = ro + tr*rd;\n    float u = 1.0 - floor(mod(pos.x, 2.0));\n    float v = 1.0 - floor(mod(pos.z, 2.0));\n        \n    vec3 halfLE = normalize(lig-rd);\n    vec3 nor = normals(pos);\n    float dif = diffuse(nor);\n   \t\n    if(u ==1.0 && v < 1.0 || v == 1.0 && u < 1.0){\n    \tdif *= 0.4;\n    }\n \tcol = vec3(0.3)*dif;\n    col *= exp(tr*0.11);\n  }\n    \n\tfragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}