{"ver":"0.1","info":{"id":"XtjGDw","date":"1429545696","viewed":114,"name":"SquirclePlasm","username":"float4","description":"Squircle","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["squircle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 q = fragCoord.xy / iResolution.xy;\n    vec2 uv = -1.0 + 2.0 * q;\n    uv.x *= iResolution.x/iResolution.y;\n    \n    vec2 rotUV = uv;\n    rotUV.x = uv.x*cos(iTime*0.33) - uv.y*sin(iTime);\n    rotUV.y = uv.x*sin(iTime) \t + uv.y*cos(iTime*2.0);\n\tuv = rotUV;\n \n\n    vec2 pos = vec2(0.0,0.0);\n    pos.x += sin(iTime*0.5);\n    pos.y += cos(iTime*2.0);\n    \n    // True squircle (http://en.m.wikipedia.org/wiki/Squircle)\n    // (x-a)^4 + (y-b)^4 = r^4\n    float power = 4.0;// 0.5 + 10.0*(1.0+sin(iTime));\n    float radius = 1.2 * abs(0.3*sin(iTime*10.0));\n    float dist = pow(abs(uv.x-pos.x),power) + pow(abs(uv.y - pos.y),power);\n   \n    vec2 backUV = q.xy*vec2(0.2,0.3);\n    backUV.x *= 3.33 / sin(iTime*0.777);\n    backUV.y *= 1.33 / cos(iTime*1.333);\n\tbackUV.xy += sin(cos(iTime));\n    vec3 color = texture(iChannel2, backUV).xyz;\n   \n    if( dist < pow(radius,power))\n    {\n        vec2 frontUV = q.yx * sin(iTime*0.2);\n\n        \n        vec3 colorMask = vec3(0,0,0);\n        colorMask.x = abs(sin(iTime*0.1));\n        colorMask.y = abs(cos(iTime*0.7));\n        colorMask.z = abs(sin(iTime+0.3333));\n        \n        color.xyz += texture(iChannel2, frontUV.xy).xyz*0.6;\n        \n        color.xyz *= colorMask;\n    }\n\n    fragColor = vec4(color,1.0); \n}\n","name":"","description":"","type":"image"}]}