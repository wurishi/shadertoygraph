{"ver":"0.1","info":{"id":"4c33W4","date":"1711661249","viewed":104,"name":"MicroplasticsV2","username":"berke","description":"A bunch of dancing colored dots.","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["periodic","bobs"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 r = fragCoord.xy;\n    do_it(fragColor,fragCoord,103U,iTime,iResolution.xy);\n    fragColor.rgb += texture(iChannel0,r/iResolution.xy).rgb;\n    fragColor.rgb += texture(iChannel1,r/iResolution.xy).rgb;\n    fragColor.rgb += texture(iChannel2,r/iResolution.xy).rgb;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    do_it(fragColor,fragCoord,100U,iTime,iResolution.xy);\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"#define NP_MAX 50\n#define NQ 5\n#define P 16\n\nuint rng_next(inout uint q) {\n\tq = (q*1664525U) % 1013904223U;\n\treturn q;\n}\n\nfloat unif(inout uint q) {\n\treturn float(rng_next(q)) / 1013904223.0;\n}\n\nvec2 rndv(inout uint q) {\n    return 2.0*vec2(unif(q),unif(q))-1.0;\n}\n\nvoid do_it( out vec4 fragColor, in vec2 fragCoord, uint q, float iTime, vec2 iResolution )\n{\n    vec2 r = fragCoord.xy;\n    vec3 s = vec3(0,0,0);\n    float t = 3.0*iTime;\n    int count = min(int(10.0*iTime),NP_MAX);\n\n    vec2 us[P];\n    vec2 vs[P];\n    float ws[P];\n    float sigmas[P];\n    vec3 ccs[P];\n    \n    for (int i = 0; i < P; i ++) {\n      us[i] = 10.0*rndv(q);\n      vs[i] = 10.0*rndv(q);\n      ws[i] = 0.2+5.0*unif(q);\n      sigmas[i] = 0.5+2.5*unif(q);\n      ccs[i] = 0.5+0.5*vec3(unif(q),unif(q),unif(q));\n    }\n    uint k = q;\n    for (int i = 0; i < count; i ++) {\n        vec2 p = vec2(unif(q),unif(q))*iResolution.xy;\n        for (int j = 0; j < NQ; j ++) {\n          vec2 u = us[k & 15U];\n          k >>= 4;\n          vec2 v = vs[k & 15U];\n          k >>= 4;\n          float w = ws[k & 15U];\n          p += cos(w*t)*u + sin(w*t)*v;\n          rng_next(k);\n        }\n        float sigma = sigmas[k & 15U];\n        k >>= 4;\n        float d = length(p - r)/sigma;\n        \n        vec3 cc = ccs[k & 15U];\n        k >>= 4;\n        s += exp(-d*d)*cc;\n    }\n\n    fragColor = vec4(s,1.0);\n}","name":"Common","description":"","type":"common"},{"inputs":[],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    do_it(fragColor,fragCoord,101U,iTime,iResolution.xy);\n}","name":"Buffer B","description":"","type":"buffer"},{"inputs":[],"outputs":[{"id":"4sXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    do_it(fragColor,fragCoord,102U,iTime,iResolution.xy);\n}","name":"Buffer C","description":"","type":"buffer"}]}