{"ver":"0.1","info":{"id":"wldGzf","date":"1577122480","viewed":308,"name":"Laser Behind Glass","username":"CJG","description":"Small rotating laser beams behind glass","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["abstract"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159\n#define NUM_ITER 10.0\n\nfloat snakePattern(vec2 uv, float t){\n    uv += vec2(-t, sin(uv.x / 5.0 + t));\n\treturn abs(sin(uv.x) * sin(uv.y)) / (uv.y * uv.y);\n}\n\n//from https://stackoverflow.com/a/17897228\nvec3 hsv2rgb(vec3 c) {\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid mainImage( out vec4 fragColor, vec2 uv ) {\n\tuv /= iResolution.xy;\n    uv.y -= 0.5;\n    uv.x *= iResolution.x / iResolution.y;\n    \n    fragColor = vec4(0.0);\n    \n    for(float i = 1.0; i <= NUM_ITER; ++i) {\n        float p = i / NUM_ITER;\n        vec3 color = hsv2rgb(vec3(sin(iTime * p / 10.0), p, 0.5));\n      \tvec2 pos = uv * 10.0 * (1.0 + texture(iChannel0, uv).x / 5.0);\n        float offset = iTime + p * 2.0 * PI;\n\t\tfragColor.xyz += snakePattern(pos, offset) * color / NUM_ITER;   \n    }\n}\n","name":"Image","description":"","type":"image"}]}