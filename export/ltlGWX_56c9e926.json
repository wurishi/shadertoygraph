{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"// figure out where a value lies in a new coordinate space \nfloat scaleTo(float value, float oldMax, float oldMin, float newMax, float newMin) {   \n    float oldRange = oldMax - oldMin;\n    float newRange = newMax - newMin;\n    \n    return (((value - oldMin) * newRange) / oldRange) + newMin;\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec3 rgb2hsv(vec3 c)\n{\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\n// Program\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    float zoom = iTime * iTime * iTime;\n    float zoomBase = 20.0;\n    float maxZoom = zoomBase * zoomBase * zoomBase;\n    \n    const int maxIterations = 700;\n    \n    if(zoom < 0.3){\n        zoom = 0.3;\n    }\n    \n    if(zoom > maxZoom){\n       zoom = maxZoom;\n    }\n    \n    zoom += 1.0;\n    \n    // Swap these comments out for other preset zooms \n    \n    // vec2 offset = vec2(-1.5019 * zoom, 0.0 * zoom); // babybrot set \n    // vec2 offset = vec2(-0.74986 * zoom, 0.021 * zoom); // into the seahorse valley\n   \t// vec2 offset = vec2(0.26031 * zoom, 0.00156 * zoom); // up the butt \n    vec2 offset = vec2(0.3137846 * zoom, 0.0356986 * zoom); // in the eye \n    // vec2 offset = vec2(0.33532 * zoom, 0.400623 * zoom);\n    // vec2 offset = vec2(0.4 * zoom, 0.0 * zoom);\n    \n    // the Colour of this pixel \n    vec3 colour = vec3(0);\n    \n    // the position of this pixel in it's new space \n    vec2 position = vec2(scaleTo(fragCoord.x, iResolution.x, 0.0, (1.0 + offset.x) / zoom, (-2.5 + offset.x) / zoom),\n                         scaleTo(fragCoord.y, iResolution.y, 0.0, (1.0 + offset.y) / zoom, (-1.0 + offset.y) / zoom));\n    \n    // plot the point\n    int iterations = 0;\n    \n    vec2 z = position;\n    bool escaped = false;\n    \n    float ca = -0.70176;\n    float cb = -0.3842;\n    \n    for(int i = 0; i < maxIterations; i++) {\n        \n        // if the point is > 4 then it escapes the set, so drop it\n        if((z.x * z.x) + (z.y * z.y) > (4.0)) {\n            escaped = true;\n            break;\n        }\n        \n        // z = z^2 + c\n        float newX = z.x * z.x - z.y * z.y + position.x;\n        // float newX = z.x * z.x - z.y * z.y + ca;\n        \n        z.y = 2.0 * z.x * z.y + position.y;\n        // z.y = 2.0 * z.x * z.y + cb;\n        z.x = newX;\n        \n        iterations ++;\n    }\n    \n    if(!escaped){\n        colour = vec3(0.0);\n    } else {\n        //colour.x = 0.2 - (float(iterations) / float(maxIterations));\n    \t//colour.y = 0.5 - (float(iterations) / float(maxIterations));\n   \t\t//colour.z = 0.6 - (float(iterations) / float(maxIterations));\n        float speed = 10.0;\n        float t = iTime; // for some reason the colours \"stack\" rather than cycle, not sure why\n        \n        float tval = speed - (t - ((t / speed) ));\n        \n        float startPos = scaleTo(tval, speed, 0.0, 1.0, 0.0);\n        \n        colour = hsv2rgb(vec3(scaleTo(float(iterations), float(maxIterations), 1.0, 1.0, startPos),\n                              scaleTo(float(iterations), float(maxIterations), 1.0, 1.0, 0.5), \n                              0.75));\n    }\n    \n\tfragColor = vec4(colour, 1.0); // set the pixel \n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"ltlGWX","date":"1425787513","viewed":136,"name":"Erik's Mandelbrot Set","username":"championchap","description":"Pretty new to writing shaders, so just trying to figure some stuff out. \nFigured making a Mandelbrot Set would be a good exercise. ","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["fractal","generative","pink"],"hasliked":0,"parentid":"","parentname":""}}