{"ver":"0.1","info":{"id":"MddGRr","date":"1447858984","viewed":1180,"name":"Visual Music Test","username":"anastadunbar","description":"Thanks for the Soundcloud feature.","likes":9,"published":1,"flags":64,"usePreview":1,"tags":["music","animation","loop","soundcloud"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":1,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sfGzr","filepath":"https://soundcloud.com/anastasia-dunbar-210160473/loop1","previewfilepath":"https://soundcloud.com/anastasia-dunbar-210160473/loop1","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"//Random\n#define PI 3.141592653589793238462\nfloat rand(vec2 uv)\n{\n    float dt = dot(uv, vec2(12.9898, 78.233));\n\treturn fract(sin(mod(dt, PI / 2.0)) * 43758.5453);\n}\nfloat rand(float uvx, float uvy)\n{\n    float dt = dot(vec2(uvx,uvy), vec2(12.9898, 78.233));\n\treturn fract(sin(mod(dt, PI / 2.0)) * 43758.5453);\n}\n\n\n//HSL\nvec3 hsl2rgb( in vec3 c )\n{\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n\n    return c.z + c.y * (rgb-0.5)*(1.0-abs(2.0*c.z-1.0));\n}\n\n#define clamps(x) clamp(x,0.,1.)\n\nvec3 HueShift (in vec3 Color, in float Shift)\n{\n    vec3 P = vec3(0.55735)*dot(vec3(0.55735),Color);\n    \n    vec3 U = Color-P;\n    \n    vec3 V = cross(vec3(0.55735),U);    \n\n    Color = U*cos(Shift*6.2832) + V*sin(Shift*6.2832) + P;\n    \n    return vec3(Color);\n}\n\n\n//SHAPES:\n#define SHARPNESS 200.\n//Circle\nfloat draw_circle(vec2 uv, float x, float y, float size) {\n    return clamps(1.-((length(uv-vec2(x,y))-size)*SHARPNESS));\n}\nfloat draw_circle(vec2 uv, float x, float y, float size, float sharp) {\n    return clamps(1.-((length(uv-vec2(x,y))-size)*sharp));\n}\n\n//RENDER:\nvec3 i_love_bokeh(vec2 uv, float time) {\n    time += 10.;\n    //Draw\n    vec3 draw = vec3(0.);\n    float time2 = time*0.3;\n    #define LOOPS 10.\n    for (float i = 0.; i < LOOPS; i++) {\n        float size = (rand(i,0.)*0.3)+0.1;\n        float trandomness = (time2*(1.+rand((i+2.)*8.,i+1.)))+rand(i+7.,0.);\n        float xrandomness = rand(51.,floor(trandomness));\n        float circle = draw_circle(uv,((xrandomness-0.5)*1.3)+0.5,((fract(trandomness)-0.5)/(size/2.))+0.5,size,20.);\n        draw += hsl2rgb(vec3(rand(floor(trandomness),4.),1.,circle*0.5));\n    }\n    return draw;\n}\nvec3 render1(vec2 uv, float time) {\n    time *= 7.;\n\tvec3 draw = vec3(0.);\n    \n    #define LOOPS2 3.\n    for (float i = 0.; i < LOOPS2; i++) {\n        draw += i_love_bokeh(uv,time-(i*0.014+(rand(uv)*0.009)));\n    }\n    draw /= LOOPS2/2.;\n    draw += i_love_bokeh(uv,time+40.)/3.;\n    \n    //Texture\n    #define LOOPS3 5.\n    for (float i = 0.; i < LOOPS3; i++) {\n        float time2 = time-(i*0.01+(rand(uv)*0.008));\n        draw += HueShift(pow(texture(iChannel1, fract((uv*vec2(1.,0.3))+vec2(0.,time2*3.))).rgb,vec3(8.)),(time/10.)+(uv.x/4.));\n    }\n    \n    \n\treturn draw;\n}\nvec3 sad_face(vec2 uv, float time) {\n    vec3 drawing = vec3(0.,0.,0.);\n    uv = ((uv-0.5)*(fract(time*4.)+1.))+0.5;\n    drawing += clamp((length(uv-0.5)-0.5)*200.,0.,1.);\n    if (uv.y > 0.2) {\n    drawing += clamp((1.-((length(vec2(uv.x-0.5,uv.y-0.))-0.4)*200.)),0.,1.);\n    drawing -= clamp((1.-((length(vec2(uv.x-0.5,uv.y-0.))-0.3)*200.)),0.,1.);\n    }\n    drawing += clamp(1.-((length(vec2(abs(uv.x-0.5)-0.2,uv.y-0.6))-0.1)*200.),0.,1.);\n    return clamp(drawing,0.,1.);\n}\nvec3 render2(vec2 uv, float time) {\n    vec3 drawing = vec3(0.,0.,0.);\n    for (float i = 0.; i < 10.; i++) {\n        float i2 = i/10.;\n        float shake = (fract(time*64.)+i2);\n        shake *= 0.2;\n        drawing += sad_face((((uv-0.5)*(shake+1.))+0.5),time);\n    }\n    drawing /= 10.;\n    drawing -= HueShift(vec3(1.,0.,0.),((atan(uv.x-0.5,uv.y-0.5)/PI)-(PI/2.))+(length(uv-0.5)+(time*20.)));\n    return clamp(pow(drawing,vec3(3.)),0.,1.);\n}\nfloat is_greater(float a,float b) {\n    if (a > b) {\n        return 1.;\n    } else {\n        return 0.;\n    }\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 pos = fragCoord.xy / iResolution.xy;\n    vec2 uv = vec2(((pos.x-0.5)*(iResolution.x / iResolution.y))+0.5,pos.y);\n    float mtime = min(iChannelTime[0]/8.99,1.);\n    vec3 drawing = vec3(0.,0.,0.);\n    if (is_greater(fract(mtime*4.),0.375)-is_greater(fract(mtime*4.),0.75) == 1.) {\n        drawing = render1(uv,mtime);\n    } else {\n        drawing = render2(uv,mtime);\n    }\n\tfragColor = vec4(drawing*(((1.-fract(mtime*16.))*2.)+1.),1.0);\n}","name":"","description":"","type":"image"}]}