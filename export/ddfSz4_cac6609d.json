{"ver":"0.1","info":{"id":"ddfSz4","date":"1670180046","viewed":82,"name":"vice city vibes","username":"ekicam2","description":"learning sdf and trying to be creative :)","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["sdf"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float sdf_sphere(vec3 p, float r) {\n    return length(p) - r;\n}\nfloat scene_dist(vec3 p) {\n    return sdf_sphere(p, 1.0);\n}\nvec3 scene_norm(vec3 p) {\n    vec2 e = vec2(0.001f, 0.0f);\n    return normalize(vec3(\n        scene_dist(p+e.xyy)-scene_dist(p-e.xyy),\n        scene_dist(p+e.yxy)-scene_dist(p-e.yxy),\n        scene_dist(p+e.yyx)-scene_dist(p-e.yyx)\n    ));\n}\n\n\n//todo: volumetric fog would be nice :)\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 uv = fragCoord/iResolution.xy;\n    uv = -1.0+2.0*uv;\n    uv *= vec2(iResolution.x/iResolution.y, 1.0);\n\n    // background\n    vec2 uv2 = uv + vec2(iTime * 0.5, 0.0f);\n    vec3 col = vec3(\n        mix(\n        vec3(0.869,0.255,0.735),\n        vec3(0.043,0.749,0.988),\n        step(0.5,fract(uv2.x + uv2.y))\n        ) \n    );\n    \n    // bouncing shadow\n    float shadow = sin(iTime * 4.0)*0.5+0.5;\n    col *= min(1.0, length(uv * mix(0.7, 0.85,shadow)));\n\n    // light\n    vec3 l = normalize(vec3(sin(iTime), 0.8, cos(iTime)));\n    float total_dist = 0.0f;\n\n    const vec3 o = vec3(0.0, 0.0, -1.5);\n    vec3 d = normalize(vec3(uv, 1.0));\n    for(float t = 0.0; t < 6.0;){\n        vec3 p = o + d*t;\n        float dist = scene_dist(p);\n\n        // we hit something => shade it\n        if(dist < 0.001f){\n            vec3 n = scene_norm(p);\n            \n            vec3 ambient = vec3(0.1, 0.2, 0.3) * 1.2;\n            float dir_i = max(dot(n, l), 0.0);\n            vec3 dir_c = vec3(0.5, 0.5, 0.1) * 1.6;\n            col = ambient + dir_i * dir_c;\n            break;\n        }\n\n        t += dist;\n        total_dist = t;\n    }\n\n    // why gamma seems so odd?!\n    //col = pow(col, vec3(1./2.2));\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}