{"ver":"0.1","info":{"id":"4ljSDK","date":"1446554090","viewed":281,"name":"Milk Spots","username":"MarkSkyzoid","description":"circle animation using distance fields","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["distancefield","metaballs"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"#define line_thickness 0.005\n#define distance_treshold (.5 / iResolution.y)\n\n//#define invert_color\n\nfloat line(vec2 p0, vec2 p1, float width, vec2 coord)\n{\n    vec2 dir0 = p1 - p0;\n    vec2 dir1 = coord - p0;\n    \n    float h = clamp(dot(dir0, dir1) / dot(dir0, dir0), 0.0, 1.0); // Projection of coord onto line segment.\n    \n    return (length(dir1 - dir0 * h) - width * 0.5);\n}\n\nfloat circle(vec2 center, float radius, vec2 coord)\n{\n    return length(coord - center) - radius;\n}\n\nfloat rectangle(vec2 center, vec2 extents, vec2 coord, float radius)\n{\n    vec2 d = max( abs(coord - center) - extents * 0.5, 0.0);\n    return length(d) - radius;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.x;\n    \n    float x0 = 0.5 + cos(iTime) * 0.5;\n    \n    vec2 center = vec2(0.5, 0.5 * iResolution.y/iResolution.x);\n    \n    vec2 radii;\n    radii.x = mix(-1.0, max(0.02 * x0, 0.01), smoothstep(7.0, 10.0, iTime));\n    radii.y = mix(0.0, 0.15, smoothstep(0.0, 10.0, iTime));\n    \n    vec2 offset;\n    offset.x = cos(iTime * 1.0) * 0.7;\n    offset.y = 0.5 + cos(iTime * 3.0) * 0.5;\n    \n    float d = circle(center + offset * 0.2, radii.x, uv);  \n    \n    float d1 = circle(center, radii.y, uv);\n    d = mix(d, d1, smoothstep(-0.1, 0.1, d - d1));\n    \n    offset.x = cos(iTime);\n    offset.y = 0.0;\n    d1 = circle(center + offset * 0.4, 0.02, uv);  \n    d = mix(d, d1, smoothstep(-0.08, 0.08, d - d1));\n\t\n    d = min(-d, rectangle(center, vec2(radii), uv, 0.004));\n    \n    fragColor = vec4(smoothstep(0.0, distance_treshold, d));\n    \n    #ifdef invert_color\n   \tfragColor = 1.0 - fragColor;\n    #endif\n    \n    // pp\n    fragColor = pow(fragColor * 0.85, vec4(0.45));\n}","name":"","description":"","type":"image"}]}