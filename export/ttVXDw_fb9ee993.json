{"ver":"0.1","info":{"id":"ttVXDw","date":"1582899418","viewed":451,"name":"Light and Darkness","username":"Kali","description":"For Meli - Music by me ","likes":24,"published":1,"flags":64,"usePreview":0,"tags":[],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"MtB3Rm","filepath":"https://soundcloud.com/pablo-andrioli/philemonic-espero-que-entiendas","previewfilepath":"https://soundcloud.com/pablo-andrioli/philemonic-espero-que-entiendas","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define t (iTime*.15)\n#define steps 50.\n#define scale 2.5\n\nvec2 sphere(vec3 p, vec3 rd, float r){\n\tfloat b = dot( -p, rd ),\n\tinner = b*b - dot(p,p) + r*r;\n\treturn inner < 0. ?  vec2(-1.) : vec2(b - sqrt(inner), b + sqrt(inner));\n}\n\n\n\nfloat formula(vec3 p) {\n    p*=scale;\n    float m=100.;\n    for (int i=0; i<7; i++) {\n    \tp=abs(p)/dot(p,p)-1.;\n        vec3 ap=abs(p);\n        m=min(min(ap.z,min(ap.x,ap.y)),m);\n    }\n    m=pow(max(0.,1.-m),250.);\n    return m*2.+dot(p,p)*.05+.1;\n}\n\nvoid mainImage( out vec4 o, vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy - .5;  \n\tuv.x*=iResolution.x/iResolution.y;\n    float distorig=1.3+sin(t*1.35435);    \n    vec3 ro = -vec3(0.,0., 2.),\n\t     rd =normalize(vec3(uv,1.)),\n\t     v = vec3(0), p;\n    vec2 tt;\n    vec2 m=iMouse.xy/iResolution.xy*3.14;\n    if (iMouse.z<.1) m=vec2(t*.3);\n    float c,s;\n    mat2 rot;\n    c=cos(-m.x),s=sin(-m.x);\n    rot = mat2(c,-s,s,c);    \n    ro.xz*=rot;\n    rd.xz*=rot;\n    ro.yz*=rot;\n    rd.yz*=rot;\n\n    float st=1.5/steps;\n\tfor (float i=5.; i<steps; i++) {\n\t\tfloat d=i*st;\n        tt = sphere(ro, rd, d);\n\t\tp = ro+rd*tt.x;\n\t\tv+=formula(p)*step(0.,tt.x)*smoothstep(0.,distorig,distorig-tt.x+.4);\n\t\tp = ro+rd*tt.y;\n\t\tv+=formula(p)*step(0.,tt.x)*smoothstep(0.,distorig,distorig-tt.y+.4);\n\t}\n\n\to.xyz = vec3(1.,.95,.9)*v*.1*smoothstep(0.,8.,iTime);\n}","name":"Image","description":"","type":"image"}]}