{"ver":"0.1","info":{"id":"ldtfDM","date":"1525509181","viewed":272,"name":"Bach Air on G string","username":"akhgary","description":"A masterpiece composed by Johann Sebastian Bach.","likes":5,"published":1,"flags":8,"usePreview":0,"tags":["sound","wave","music","snow","fantasy"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Bach Air on G string:\n//\n// I dont know the source for midi and i claim no credits from it.\n//\n// thanks to user Dave_Hoskins for helping to remove clicking noise.\n//\n// ==============================\n// tutorial\n// https://thebookofshaders.com\n//\n\nmat2 rotate(float angle)\n{\n    return mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n}\n\nvoid mainImage(out vec4 color, in vec2 coord)\n{\n    vec2 uv = (2.*coord.xy-iResolution.xy)/iResolution.y;\n    float ratio = iResolution.x/iResolution.y;\n    float scale = 16.;\n    float sharpness = scale*3./iResolution.y+1.;\n    float time = iTime/10.;\n    vec3 waves = vec3(0);\n    color.xzy += 0.6+0.6*cos(6.3*(uv.y-uv.x/5.)/12.+vec3(0,23,21)+time/9.+3.5);\n    \n    for(float i=1.;i<40.1;i++){\n        \n        float rand = (i+1.)*sqrt(2.)*333.;\n        \n        vec2 rep =  vec2(mod(time+rand,(ratio+.5)*2.)-(ratio+.5),\n                         mod(time+rand,     1.375*2.)-1.375);\n        \n        vec2 move = vec2(cos(time*3.+i*10.)/4.-rep.x, sin(time*5.+i)/8.+rep.y);\n        \n        vec2 p = (vec2(uv+move)*rand/140.)*rotate(-time);\n        \n        float r = length(p);\n        float a = atan(p.x,p.y);\n        float m = 1.-abs(cos(a*(3.+floor(i/10.))+i));\n        float d = 1.-smoothstep(m,m+sharpness, r);\n        \n    \tcolor += vec4(vec3(d)*vec3(0.6,.8,1.),1.0);\n        \n        vec3 hue = 0.6+0.6*cos(6.3*rand/233.+vec3(0,23,21)+time*4.+10.);\n        \n        float thickness = sin(uv.x+time+rand*i)/2.+5.;\n        float wave = abs(uv.x/ratio*1.2+uv.y-sin((uv.x)/2.+time*rand/813.)/(i*3.)+.4)*30.;\n        wave = (smoothstep(0.,(sharpness+thickness)/i,1./wave*i/4.));\n        waves += wave*hue/25.;\n    }\n    \n    color.xyz+=clamp(waves,0.,1.)-.2;\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float frequency(int note){\n    return pow(2., float(note-49)/12.)*440.;\n}\n\nbool between(float time, float start, float end){\n    return time>=start && time<=end;\n}\n\nfloat wave(float time, float start, float end, float amp, int note){\n    \n    if(!between(time, start, end+1.)) return 0.;\n    \n    float delta = time-start, remaining = end-time;\n    \n    float attack = smoothstep(0.0,.04, delta);\n    float decay = exp(-delta);\n    float release = smoothstep(-.2,.0, remaining);\n    float timbre = sin(6.28318*delta*frequency(note));\n    \n    return amp*timbre*attack*decay*release;\n}\n\nfloat page1(float time) {\n    float sound = 0.;\n\tsound += wave(time, 2.26, 3.02, 0.39, 50);\n\tsound += wave(time, 3.17, 3.86, 0.31, 62);\n\tsound += wave(time, 4.00, 4.74, 0.34, 61);\n\tsound += wave(time, 4.88, 5.64, 0.41, 49);\n\tsound += wave(time, 2.30, 5.89, 0.39, 69);\n\tsound += wave(time, 5.79, 6.49, 0.43, 47);\n\tsound += wave(time, 6.62, 7.30, 0.34, 59);\n\tsound += wave(time, 7.44, 8.15, 0.36, 57);\n\tsound += wave(time, 8.30, 9.05, 0.44, 45);\n\tsound += wave(time, 5.83, 9.31, 0.35, 71);\n\tsound += wave(time, 9.20, 9.94, 0.46, 43);\n\tsound += wave(time, 2.22, 10.05, 0.55, 78);\n\tsound += wave(time, 10.05, 10.58, 0.47, 83);\n\tsound += wave(time, 10.09, 10.84, 0.36, 55);\n\tsound += wave(time, 10.50, 11.03, 0.49, 79);\n\tsound += wave(time, 2.26, 11.07, 0.55, 74);\n\tsound += wave(time, 9.24, 11.10, 0.38, 59);\n\tsound += wave(time, 10.96, 11.18, 0.50, 78);\n\tsound += wave(time, 11.10, 11.47, 0.54, 76);\n\tsound += wave(time, 10.99, 11.73, 0.35, 56);\n\tsound += wave(time, 11.40, 11.92, 0.55, 74);\n\tsound += wave(time, 11.84, 12.39, 0.57, 73);\n\tsound += wave(time, 11.88, 12.66, 0.43, 44);\n\tsound += wave(time, 12.31, 12.85, 0.54, 74);\n\tsound += wave(time, 11.03, 12.85, 0.36, 64);\n\tsound += wave(time, 10.99, 12.89, 0.47, 71);\n\tsound += wave(time, 12.82, 13.57, 0.41, 45);\n\tsound += wave(time, 13.72, 14.46, 0.33, 57);\n\tsound += wave(time, 12.78, 14.64, 0.56, 73);\n\tsound += wave(time, 14.57, 15.10, 0.51, 71);\n\tsound += wave(time, 14.61, 15.36, 0.35, 55);\n\tsound += wave(time, 15.52, 16.38, 0.43, 43);\n\tsound += wave(time, 15.02, 16.51, 0.47, 69);\n\tsound += wave(time, 16.55, 17.31, 0.44, 42);\n\tsound += wave(time, 12.82, 17.46, 0.50, 69);\n\tsound += wave(time, 12.85, 17.57, 0.35, 64);\n\tsound += wave(time, 17.46, 17.97, 0.46, 72);\n\tsound += wave(time, 17.46, 18.19, 0.35, 54);\n\tsound += wave(time, 17.90, 18.41, 0.49, 71);\n\tsound += wave(time, 18.34, 19.03, 0.37, 52);\n\tsound += wave(time, 18.34, 19.25, 0.47, 72);\n\tsound += wave(time, 17.50, 19.29, 0.39, 63);\n\tsound += wave(time, 19.18, 19.71, 0.35, 81);\n\tsound += wave(time, 19.18, 19.93, 0.46, 40);\n\tsound += wave(time, 19.63, 20.17, 0.39, 72);\n\tsound += wave(time, 19.21, 20.21, 0.36, 64);\n\tsound += wave(time, 16.51, 20.61, 0.59, 81);\n\tsound += wave(time, 20.09, 20.89, 0.47, 39);\n\tsound += wave(time, 20.09, 21.05, 0.38, 71);\n\tsound += wave(time, 20.53, 21.09, 0.49, 78);\n\tsound += wave(time, 20.13, 21.09, 0.31, 66);\n\tsound += wave(time, 21.01, 21.54, 0.51, 72);\n\tsound += wave(time, 21.05, 21.81, 0.39, 51);\n\tsound += wave(time, 21.47, 22.00, 0.54, 71);\n\tsound += wave(time, 21.92, 22.44, 0.52, 76);\n\tsound += wave(time, 21.96, 22.70, 0.43, 47);\n\tsound += wave(time, 22.36, 22.88, 0.54, 75);\n\tsound += wave(time, 22.81, 23.35, 0.53, 81);\n\tsound += wave(time, 22.84, 23.63, 0.36, 59);\n\tsound += wave(time, 23.27, 23.74, 0.55, 79);\n\tsound += wave(time, 23.78, 24.54, 0.46, 40);\n\tsound += wave(time, 23.78, 24.76, 0.55, 71);\n\tsound += wave(time, 23.82, 24.80, 0.39, 64);\n\tsound += wave(time, 24.69, 25.20, 0.51, 76);\n\tsound += wave(time, 24.69, 25.42, 0.36, 52);\n\tsound += wave(time, 25.13, 25.64, 0.53, 74);\n\tsound += wave(time, 25.57, 26.06, 0.50, 76);\n\tsound += wave(time, 25.57, 26.26, 0.39, 50);\n\tsound += wave(time, 25.99, 26.48, 0.48, 78);\n\tsound += wave(time, 24.73, 26.52, 0.43, 59);\n\tsound += wave(time, 26.41, 26.94, 0.46, 79);\n\tsound += wave(time, 26.41, 27.16, 0.47, 38);\n\tsound += wave(time, 26.44, 27.36, 0.40, 64);\n\tsound += wave(time, 26.86, 27.40, 0.47, 76);\n\tsound += wave(time, 23.74, 27.84, 0.59, 79);\n\tsound += wave(time, 27.32, 28.12, 0.49, 37);\n\tsound += wave(time, 27.32, 28.28, 0.41, 69);\n\tsound += wave(time, 27.76, 28.32, 0.53, 76);\n\tsound += wave(time, 27.36, 28.32, 0.35, 64);\n\tsound += wave(time, 28.24, 28.78, 0.55, 71);\n\tsound += wave(time, 28.28, 29.04, 0.41, 49);\n\tsound += wave(time, 28.70, 29.23, 0.57, 69);\n\tsound += wave(time, 29.15, 29.67, 0.56, 74);\n\tsound += wave(time, 29.19, 29.93, 0.44, 45);\n\tsound += wave(time, 29.60, 30.11, 0.58, 73);\n\tsound += wave(time, 30.04, 30.58, 0.57, 79);\n\tsound += wave(time, 30.08, 30.86, 0.38, 57);\n\tsound += wave(time, 30.51, 30.97, 0.59, 78);\n\tsound += wave(time, 31.01, 31.70, 0.47, 50);\n\tsound += wave(time, 31.84, 32.58, 0.39, 62);\n\tsound += wave(time, 32.73, 33.54, 0.42, 61);\n\tsound += wave(time, 30.97, 33.73, 0.61, 78);\n\tsound += wave(time, 31.04, 33.81, 0.47, 62);\n\tsound += wave(time, 33.66, 34.19, 0.57, 80);\n\tsound += wave(time, 33.70, 34.45, 0.49, 49);\n\tsound += wave(time, 34.11, 34.64, 0.54, 81);\n\tsound += wave(time, 33.73, 34.71, 0.45, 64);\n\tsound += wave(time, 34.60, 35.30, 0.50, 47);\n\tsound += wave(time, 34.57, 35.40, 0.55, 74);\n\tsound += wave(time, 31.01, 35.51, 0.55, 69);\n\treturn sound;\n}\n\nfloat page2(float time) {\n    float sound = 0.;\n\tsound += wave(time, 34.64, 35.55, 0.41, 66);\n\tsound += wave(time, 35.40, 35.69, 0.60, 74);\n\tsound += wave(time, 35.62, 35.91, 0.58, 76);\n\tsound += wave(time, 35.44, 35.95, 0.51, 68);\n\tsound += wave(time, 35.44, 36.17, 0.42, 59);\n\tsound += wave(time, 35.88, 36.39, 0.50, 69);\n\tsound += wave(time, 35.47, 36.42, 0.43, 62);\n\tsound += wave(time, 35.84, 36.78, 0.57, 78);\n\tsound += wave(time, 36.32, 37.03, 0.44, 56);\n\tsound += wave(time, 36.71, 37.14, 0.54, 76);\n\tsound += wave(time, 36.32, 37.25, 0.48, 71);\n\tsound += wave(time, 36.35, 37.29, 0.44, 59);\n\tsound += wave(time, 37.14, 37.67, 0.55, 76);\n\tsound += wave(time, 37.18, 37.93, 0.46, 52);\n\tsound += wave(time, 37.59, 38.12, 0.52, 74);\n\tsound += wave(time, 37.18, 38.16, 0.50, 68);\n\tsound += wave(time, 38.05, 38.56, 0.54, 73);\n\tsound += wave(time, 38.09, 38.82, 0.41, 57);\n\tsound += wave(time, 38.49, 38.93, 0.55, 71);\n\tsound += wave(time, 38.09, 38.97, 0.49, 69);\n\tsound += wave(time, 37.21, 39.09, 0.42, 64);\n\tsound += wave(time, 38.93, 39.24, 0.61, 71);\n\tsound += wave(time, 39.17, 39.48, 0.59, 73);\n\tsound += wave(time, 38.97, 39.75, 0.46, 50);\n\tsound += wave(time, 39.01, 40.02, 0.39, 66);\n\tsound += wave(time, 39.91, 40.66, 0.43, 52);\n\tsound += wave(time, 39.40, 40.86, 0.57, 74);\n\tsound += wave(time, 38.97, 40.90, 0.46, 69);\n\tsound += wave(time, 39.94, 40.94, 0.41, 59);\n\tsound += wave(time, 40.78, 41.35, 0.58, 73);\n\tsound += wave(time, 40.82, 41.68, 0.38, 40);\n\tsound += wave(time, 41.26, 41.89, 0.54, 71);\n\tsound += wave(time, 40.82, 41.93, 0.47, 68);\n\tsound += wave(time, 40.86, 41.97, 0.38, 64);\n\tsound += wave(time, 41.86, 42.40, 0.41, 45);\n\tsound += wave(time, 42.32, 42.87, 0.43, 47);\n\tsound += wave(time, 42.79, 43.32, 0.44, 49);\n\tsound += wave(time, 43.25, 43.78, 0.46, 50);\n\tsound += wave(time, 43.70, 44.25, 0.47, 52);\n\tsound += wave(time, 44.17, 44.72, 0.31, 55);\n\tsound += wave(time, 44.64, 45.21, 0.34, 54);\n\tsound += wave(time, 41.82, 45.26, 0.47, 69);\n\tsound += wave(time, 41.86, 45.30, 0.41, 64);\n\tsound += wave(time, 41.89, 45.34, 0.33, 61);\n\tsound += wave(time, 45.13, 45.71, 0.36, 52);\n\tsound += wave(time, 45.64, 46.37, 0.39, 50);\n\tsound += wave(time, 46.52, 47.21, 0.31, 62);\n\tsound += wave(time, 47.35, 48.09, 0.34, 61);\n\tsound += wave(time, 48.24, 49.02, 0.41, 49);\n\tsound += wave(time, 45.68, 49.28, 0.39, 69);\n\tsound += wave(time, 49.17, 49.87, 0.43, 47);\n\tsound += wave(time, 50.00, 50.68, 0.34, 59);\n\tsound += wave(time, 50.82, 51.53, 0.36, 57);\n\tsound += wave(time, 51.68, 52.43, 0.44, 45);\n\tsound += wave(time, 49.21, 52.69, 0.35, 71);\n\tsound += wave(time, 52.58, 53.32, 0.46, 43);\n\tsound += wave(time, 45.60, 53.43, 0.55, 78);\n\tsound += wave(time, 53.43, 53.96, 0.47, 83);\n\tsound += wave(time, 53.47, 54.23, 0.36, 55);\n\tsound += wave(time, 53.88, 54.41, 0.49, 79);\n\tsound += wave(time, 45.64, 54.45, 0.55, 74);\n\tsound += wave(time, 52.62, 54.49, 0.38, 59);\n\tsound += wave(time, 54.34, 54.56, 0.50, 78);\n\tsound += wave(time, 54.49, 54.85, 0.54, 76);\n\tsound += wave(time, 54.38, 55.11, 0.35, 56);\n\tsound += wave(time, 54.78, 55.30, 0.55, 74);\n\tsound += wave(time, 55.22, 55.77, 0.57, 73);\n\tsound += wave(time, 55.26, 56.04, 0.43, 44);\n\tsound += wave(time, 55.69, 56.23, 0.54, 74);\n\tsound += wave(time, 54.41, 56.23, 0.36, 64);\n\tsound += wave(time, 54.38, 56.27, 0.47, 71);\n\tsound += wave(time, 56.20, 56.95, 0.41, 45);\n\tsound += wave(time, 57.10, 57.84, 0.33, 57);\n\tsound += wave(time, 56.16, 58.03, 0.56, 73);\n\tsound += wave(time, 57.95, 58.48, 0.51, 71);\n\tsound += wave(time, 57.99, 58.75, 0.35, 55);\n\tsound += wave(time, 58.90, 59.76, 0.43, 43);\n\tsound += wave(time, 58.41, 59.89, 0.47, 69);\n\tsound += wave(time, 59.93, 60.69, 0.44, 42);\n\tsound += wave(time, 56.20, 60.84, 0.50, 69);\n\tsound += wave(time, 56.23, 60.95, 0.35, 64);\n\tsound += wave(time, 60.84, 61.35, 0.46, 72);\n\tsound += wave(time, 60.84, 61.58, 0.35, 54);\n\tsound += wave(time, 61.28, 61.79, 0.49, 71);\n\tsound += wave(time, 61.72, 62.41, 0.37, 52);\n\tsound += wave(time, 61.72, 62.63, 0.47, 72);\n\tsound += wave(time, 60.88, 62.67, 0.39, 63);\n\tsound += wave(time, 62.56, 63.09, 0.35, 81);\n\tsound += wave(time, 62.56, 63.31, 0.46, 40);\n\tsound += wave(time, 63.01, 63.55, 0.39, 72);\n\tsound += wave(time, 62.59, 63.59, 0.36, 64);\n\tsound += wave(time, 59.89, 63.99, 0.59, 81);\n\tsound += wave(time, 63.47, 64.27, 0.47, 39);\n\tsound += wave(time, 63.47, 64.43, 0.38, 71);\n\tsound += wave(time, 63.91, 64.47, 0.49, 78);\n\tsound += wave(time, 63.51, 64.47, 0.31, 66);\n\tsound += wave(time, 64.40, 64.93, 0.51, 72);\n\tsound += wave(time, 64.43, 65.19, 0.39, 51);\n\tsound += wave(time, 64.85, 65.38, 0.54, 71);\n\tsound += wave(time, 65.30, 65.82, 0.52, 76);\n\treturn sound;\n}\n\nfloat page3(float time) {\n    float sound = 0.;\n\tsound += wave(time, 65.34, 66.08, 0.43, 47);\n\tsound += wave(time, 65.75, 66.27, 0.54, 75);\n\tsound += wave(time, 66.19, 66.73, 0.53, 81);\n\tsound += wave(time, 66.23, 67.01, 0.36, 59);\n\tsound += wave(time, 66.66, 67.12, 0.55, 79);\n\tsound += wave(time, 67.16, 67.92, 0.46, 40);\n\tsound += wave(time, 67.16, 68.14, 0.55, 71);\n\tsound += wave(time, 67.20, 68.18, 0.39, 64);\n\tsound += wave(time, 68.07, 68.59, 0.51, 76);\n\tsound += wave(time, 68.07, 68.81, 0.36, 52);\n\tsound += wave(time, 68.51, 69.02, 0.53, 74);\n\tsound += wave(time, 68.95, 69.44, 0.50, 76);\n\tsound += wave(time, 68.95, 69.65, 0.39, 50);\n\tsound += wave(time, 69.37, 69.86, 0.48, 78);\n\tsound += wave(time, 68.11, 69.90, 0.43, 59);\n\tsound += wave(time, 69.79, 70.32, 0.46, 79);\n\tsound += wave(time, 69.79, 70.54, 0.47, 38);\n\tsound += wave(time, 69.83, 70.74, 0.40, 64);\n\tsound += wave(time, 70.24, 70.78, 0.47, 76);\n\tsound += wave(time, 67.12, 71.22, 0.59, 79);\n\tsound += wave(time, 70.70, 71.51, 0.49, 37);\n\tsound += wave(time, 70.70, 71.66, 0.41, 69);\n\tsound += wave(time, 71.14, 71.70, 0.53, 76);\n\tsound += wave(time, 70.74, 71.70, 0.35, 64);\n\tsound += wave(time, 71.63, 72.16, 0.55, 71);\n\tsound += wave(time, 71.66, 72.42, 0.41, 49);\n\tsound += wave(time, 72.08, 72.61, 0.57, 69);\n\tsound += wave(time, 72.54, 73.05, 0.56, 74);\n\tsound += wave(time, 72.57, 73.31, 0.44, 45);\n\tsound += wave(time, 72.98, 73.50, 0.58, 73);\n\tsound += wave(time, 73.42, 73.96, 0.57, 79);\n\tsound += wave(time, 73.46, 74.24, 0.38, 57);\n\tsound += wave(time, 73.89, 74.36, 0.59, 78);\n\tsound += wave(time, 74.39, 75.08, 0.47, 50);\n\tsound += wave(time, 75.23, 75.96, 0.39, 62);\n\tsound += wave(time, 76.11, 76.92, 0.42, 61);\n\tsound += wave(time, 74.36, 77.11, 0.61, 78);\n\tsound += wave(time, 74.42, 77.19, 0.47, 62);\n\tsound += wave(time, 77.04, 77.57, 0.57, 80);\n\tsound += wave(time, 77.08, 77.83, 0.49, 49);\n\tsound += wave(time, 77.49, 78.02, 0.54, 81);\n\tsound += wave(time, 77.11, 78.09, 0.45, 64);\n\tsound += wave(time, 77.98, 78.68, 0.50, 47);\n\tsound += wave(time, 77.95, 78.78, 0.55, 74);\n\tsound += wave(time, 74.39, 78.89, 0.55, 69);\n\tsound += wave(time, 78.02, 78.93, 0.41, 66);\n\tsound += wave(time, 78.78, 79.08, 0.60, 74);\n\tsound += wave(time, 79.00, 79.30, 0.58, 76);\n\tsound += wave(time, 78.82, 79.33, 0.51, 68);\n\tsound += wave(time, 78.82, 79.55, 0.42, 59);\n\tsound += wave(time, 79.26, 79.77, 0.50, 69);\n\tsound += wave(time, 78.85, 79.81, 0.43, 62);\n\tsound += wave(time, 79.22, 80.16, 0.57, 78);\n\tsound += wave(time, 79.70, 80.41, 0.44, 56);\n\tsound += wave(time, 80.09, 80.52, 0.54, 76);\n\tsound += wave(time, 79.70, 80.63, 0.48, 71);\n\tsound += wave(time, 79.73, 80.67, 0.44, 59);\n\tsound += wave(time, 80.52, 81.05, 0.55, 76);\n\tsound += wave(time, 80.56, 81.32, 0.46, 52);\n\tsound += wave(time, 80.98, 81.50, 0.52, 74);\n\tsound += wave(time, 80.56, 81.54, 0.50, 68);\n\tsound += wave(time, 81.43, 81.94, 0.54, 73);\n\tsound += wave(time, 81.47, 82.20, 0.41, 57);\n\tsound += wave(time, 81.87, 82.31, 0.55, 71);\n\tsound += wave(time, 81.47, 82.35, 0.49, 69);\n\tsound += wave(time, 80.60, 82.47, 0.42, 64);\n\tsound += wave(time, 82.31, 82.62, 0.61, 71);\n\tsound += wave(time, 82.55, 82.86, 0.59, 73);\n\tsound += wave(time, 82.35, 83.13, 0.46, 50);\n\tsound += wave(time, 82.39, 83.42, 0.39, 66);\n\tsound += wave(time, 83.29, 84.12, 0.43, 52);\n\tsound += wave(time, 82.78, 84.33, 0.57, 74);\n\tsound += wave(time, 82.35, 84.37, 0.46, 69);\n\tsound += wave(time, 83.33, 84.41, 0.41, 59);\n\tsound += wave(time, 84.25, 84.82, 0.58, 73);\n\tsound += wave(time, 84.29, 85.14, 0.41, 40);\n\tsound += wave(time, 84.73, 85.35, 0.54, 71);\n\tsound += wave(time, 84.29, 85.39, 0.47, 68);\n\tsound += wave(time, 84.33, 85.43, 0.38, 64);\n\tsound += wave(time, 85.27, 88.53, 0.47, 69);\n\tsound += wave(time, 85.31, 88.65, 0.41, 64);\n\tsound += wave(time, 85.31, 88.65, 0.35, 45);\n\tsound += wave(time, 85.35, 88.76, 0.33, 61);\n\treturn sound;\n}\n\nvec2 mainSound( in int samp,float time)\n{\n    float sound = 0.;\n    \n    if(between(time, 2.26, 35.51)) sound += page1(time);\n\tif(between(time, 34.64, 65.82)) sound += page2(time);\n\tif(between(time, 65.34, 88.76)) sound += page3(time);\n\n    return vec2(sound)/5.;\n}","name":"Sound","description":"","type":"sound"}]}