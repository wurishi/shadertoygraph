{"ver":"0.1","info":{"id":"4sKfDz","date":"1528382576","viewed":339,"name":"Raining Columns","username":"ircss","description":"A shader to try to imitate this effect https://twitter.com/archillect/status/1004244037153542145","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["procedural","grids"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat rand(float Seed){\n    \n    return fract(sin(Seed*4124213.)*37523.);\n}\n\nfloat rand(vec2 Seed){\n    \n    return fract(sin(dot(Seed, vec2(241512.,5124.632))*5124.124));\n}\n\nfloat randInRange(float id, vec2 range){\n    \n    id = rand(id);\n    return range.x + id * (range.y-range.x);\n}\n\n\nvoid AddPannedGrid( inout vec4 FragCol, vec2 uv, vec4 GridColor,\n                   vec2 panningSpeedRange, float gridSize, float seedDiff){\n    \n\n    float verticalStretch = 1.;\n    vec2 st = uv;\n    \n    // This value tells you the index of the columns and rows. You might have \n    // to recalculate it if you pan something\n    vec2 gridID = floor ( vec2(uv.x * gridSize, uv.y *verticalStretch));\n    \n    \n    // Paning the texture\n    \n    uv.y+= rand(gridID.x+14. +seedDiff) +randInRange(gridID.x+seedDiff, panningSpeedRange)*iTime;\n    \n    // divide the uv so that it creates the grid\n    uv = fract ( vec2(uv.x * gridSize , uv.y *verticalStretch));\n   \n    \n    // Shading the grids\n    float diagonal = smoothstep(0.,0.05, uv.y - uv.x*.1*st.y);\n\n    vec3 temp = vec3((1.-uv.x)*pow((1.0-uv.y)*1.2,4.))*diagonal;\n    \n    \n    // Applying the alpha and the fin color addtiv on top\n    FragCol.xyz += GridColor.a * GridColor.xyz*temp;\n    \n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    // Compensating for aspect ration\n    uv.x *= iResolution.x/iResolution.y;\n    \n    vec4 finalColor = vec4(0.);\n    \n    // Adding the efect Additiv\n\tAddPannedGrid(finalColor, uv, vec4(0.4,0.7,1.,0.5), vec2(.4,.7), 13., 123.);\n    AddPannedGrid(finalColor, uv, vec4(0.4,0.7,1.,0.9), vec2(.4,.7), 10.,45.26);\n    AddPannedGrid(finalColor, uv, vec4(0.4,0.7,1.,0.2), vec2(.4,.9), 16.,53.1);\n    \n    // Output to screen\n    fragColor = finalColor;\n}","name":"Image","description":"","type":"image"}]}