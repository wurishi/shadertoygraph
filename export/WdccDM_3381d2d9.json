{"ver":"0.1","info":{"id":"WdccDM","date":"1601034908","viewed":84,"name":"RotateOrTranslateFirst","username":"samuelotherion","description":"2d, 3d, algebra, examples","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["2d","algebra","examples"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 o, vec2 i) {\n    \n    init(i, iResolution.xy, iTime);\n    \n    O = texture(iChannel0, I);\n    \n    plot_coords(Scale);\n    plot_coords(SRT);\n    plot_coords(STR);\n    \n    F = V4(.25, .5, 1, 0.);\n    line(Scale[2], (SRT)[2]);\n    line(Scale[2], (STR)[2]);\n    \n    \n    F = V4(.58, .55, .59, 0.);\n    line(Scale[2], Scale * p);\n    line(SRT[2],   SRT * p);\n    line(STR[2],   STR * p);       \n    \n    finish(o);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define VO void\n\n#define B1 bool\n\n#define I1 int\n#define I2 ivec2\n#define I3 ivec3\n#define I4 ivec4\n\n#define V1 float\n#define V2 vec2\n#define V3 vec3\n#define V4 vec4\n\n#define M2 mat2\n#define M23 mat2x3\n#define M32 mat3x2\n#define M3 mat3\n#define M34 mat3x4\n#define M43 mat4x3\n#define M4 mat4\n\n#define CO cos(alpha)\n#define SI sin(alpha)\n\n// Scale\n#define S3(v)    M3(v.x, 0, 0,  0, v.y, 0,  0, 0, 1)\n#define incS3(v) M3(1./v.x, 0, 0,  0, 1./v.y, 0,  0, 0, 1)\n\n// Translate\n#define T3(d)    M3(1, 0, 0,  0, 1, 0,  +d.x, +d.y, 1)\n#define invT3(d) M3(1, 0, 0,  0, 1, 0,  -d.x, -d.y, 1)\n\n// Rotate\n#define R3(a)    M3(cos(a),  sin(a), 0, -sin(a), cos(a), 0,  0, 0, 1)\n#define invR3(a) M3(cos(a), -sin(a), 0,  sin(a), cos(a), 0,  0, 0, 1)\n\n// Coords of Point p\nconst V3 p = V3(.3, .3, 1.);\n\n// Transformtation Matrices\nM3 Unit, Scale, Rotate, Translate, SRT, STR;\n\n// \nV2 I, N, R, A;\nV3 D;\nV4 O, F, B;\n\nV2 on_xy(V2 vec, V2 origin, V2 unit_x) {\n    \n    V2 v = vec - origin;\n    \n    V1 l = dot(v, unit_x) / dot(unit_x, unit_x);\n    \n    V2 p = l * unit_x;\n    \n    return V2(l, length(v - p)) ;\n}\n\nVO line(V3 from, V3 to) {\n    \n    V2 n = on_xy(N, from.xy, to.xy - from.xy);\n\n    if(0. < n.x && n.x < 1. && abs(n.y) < 2. * D.y) {\n\n        O = F;\n    }    \n}\n\nVO point(V3 r) {\n    \n    V2 s = r.xy - N;\n    \n    V1 d = 10000. * dot(s, s);\n    \n    O = d < 1. ? smoothstep(0., 1., 1. - d) * F : O;\n}\n\nVO plot_coords(M3 c) {\n    \n    F = V4(1., .25, .25, 0.);\n\tline(c[2], c[2] + c[0]);\n\tF = V4(.25, 1., .25, 0.);\n\tline(c[2], c[2]+ c[1]);\n\tF = V4(.5, .5, 1., 0.);\n    point(c[2]);\n}\n\nVO init(V2 i, V2 res, V1 time) {\n    \n    R = res;\n    D = V3(1. / R, 0.);\n    N = ((I = i * D.xy) - .5) * (A = V2(R.x * D.y, 1));\n    B = V4(0);\n    F = V4(1);\n    \n    Scale     = S3(V2(.5));\n    Translate = T3(V2(.6, -.2));\n    Rotate    = R3(2. * 3.1416 * sin(.2 * time));\n    SRT       = Scale * Rotate * Translate;\n    STR       = Scale * Translate * Rotate;\n}\n\nVO finish(out V4 o) {\n    \n    o = clamp(O, V4(0), V4(1));\n}\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage(out vec4 o, vec2 i) {\n    \n    init(i, iResolution.xy, iTime);\n    \n    point(Scale * p);\n    point(SRT * p);\n    point(STR * p);\n    \n    O = V4(.99 * texture(iChannel0, I).xyz + O.xyz, 1.);\n        \n    \n    finish(o);\n}\n","name":"Buffer A","description":"","type":"buffer"}]}