{"ver":"0.1","info":{"id":"tttczH","date":"1679352255","viewed":47,"name":"ghubs","username":"A_KouZ1","description":"thisgns","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["raymarching"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 rot(in vec3 a, in vec3 b){\n    vec2 m = vec2(normalize(vec2(b.x,b.z)));\n    vec2 n = vec2(normalize(vec2(1.,b.y)));\n    vec3 c = vec3(a.x*m.x-a.z*m.y,a.y,a.x*m.y+a.z*m.x);\n    return vec3(c.x,c.y*n.x-c.z*n.y,c.y*n.y+c.z*n.x);\n}\n\nfloat sdf(in vec3 p){\n    float aoc = dot(p.xz,p.xz);\n\treturn p.y-cos(aoc*4.124*sin(iTime*.3)+iTime*7.12313)/4./(.25+aoc);\n}\n\nfloat march(in vec3 p, in vec3 d){\n\tfloat mindist = 0.;\n\tvec3 curpos = p;\n\tfor(int i=0;i<128;i++){\n\t\tfloat dist = sdf(curpos);\n\t\tcurpos += d*dist/2.0;\n\t}\n\treturn distance(p,curpos);\n}\n\nfloat eps = 1.e-4;\n\nvoid mainImage(out vec4 color, in vec2 coord){\n\tfloat res = max(iResolution.x,iResolution.y);\n    vec2 cent = vec2(iResolution.x/res,iResolution.y/res)/2.;\n\tvec2 uv = coord/res-cent;\n\tvec3 rayp = vec3(0.,1,-5.);\n    vec2 mouse = iMouse.xy/res-cent;\n\tvec3 rayd = normalize(vec3(cos(mouse.x),mouse.y*2.0,sin(mouse.x)));\n    vec3 dir = normalize(rot(vec3(uv,1.),rayd));\n\tfloat dist = march(rayp,dir);\n\tcolor = vec4(2./dist,2./dist,2./dist,1.);\n}","name":"Image","description":"","type":"image"}]}