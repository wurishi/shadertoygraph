{"ver":"0.1","info":{"id":"WtKXDw","date":"1582897240","viewed":478,"name":"Business Card Raytracer","username":"mla","description":"Just so no one else has to do this...\n\nPort of Andrew Kensler's Business Card Shader, as dissected by Fabien Sanglard: [url]http://fabiensanglard.net/rayTracing_back_of_business_card/index.php[/url]\n\nJust 4 rays cast per pixel.\n","likes":14,"published":3,"flags":0,"usePreview":0,"tags":["businesscard"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"int[] G=int[](74895,74897,74897,74895,74881,74881,55438,128,128); int s;float R(\n){s*=2654289789; return float(s)/4294967296.0;} int T(vec3 o,vec3 d,out float t, \nout vec3 n){t=1e9;int m=0; float p=-o.z/d.z; if(0.01<p)t=p,n=vec3(0,0,1),m=1;for\n(int k=17;bool(k--);)for(int j=9;bool(j--);)if(bool(G[j]&1<<k)){vec3 p=o+vec3(-k\n,0,-j-4); float b=dot(p,d),c=dot(p,p)-1.0,q=b*b-c; if(q>0.0){ float s=-b-sqrt(q)\n; if(s<t&&s>.01) t=s,n=normalize(p+d*t),m=2;}} return m;} vec3 S(vec3 o,vec3 d){\nvec3 c=vec3(0);float a=1.;for(int k=0;k<3;k++){float t;vec3 n; int m=T(o,d,t,n);\nif(m==0) return vec3(0.7,0.6,1.0)*pow(1.0-d.z,4.); vec3 h=o+d*t,l=normalize(vec3\n(9.0+R(),9.0+R(),16.0)+-h),r=d+n*(dot(n,d)*-2.0); float b=dot(l,n); if(b<0.0||T(\nh,l,t,n)!=0)b=0.0; float p=pow(dot(l,r)*float(b>0.),99.); if(bool(m&1)){h=h*0.2;\nreturn((int(ceil(h.x)+ceil(h.y))&1)!=0?vec3(3,1,1):vec3(3))*(b*0.2+0.1);}c+=vec3\n(p)*a,a*=0.5,o=h,d=r;} return c;}void mainImage(out vec4 O,vec2 C) {vec3 o=15.0*\nvec3(sin(iTime),cos(iTime),0.8+.7*cos(.321*iTime)),g=normalize(vec3(9,0,5)-o),a=\nnormalize(cross(vec3(0,0,1),g))*.002,b=normalize(cross(g,a))*.002,c=(a+b)*-256.+\ng;s=int(1000.*C.x+C.y); vec2 q=vec2(0.6*iResolution.x-C.x,C.y)*512./iResolution.\ny;vec3 p=vec3(13); for(int r=4;bool(r--);){vec3 t=(a*(R()-.5)+b*(R()-.5))*50.0;p\n+=S(o+t,normalize(-t+(a*(R()+q.x)+b*(q.y+R())+c)*16.0))*56.0;}O=vec4(p/255.,0);}","name":"Image","description":"","type":"image"}]}