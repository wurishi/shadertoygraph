{"ver":"0.1","info":{"id":"WsXfDr","date":"1588001429","viewed":139,"name":"Ranged Hue Shift","username":"Valdex","description":"per-hue shifting shader","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["color","hue","colorcorrection","shift","sat","ranged","brig"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float hueThreshold = .5;\n\n#define rHue 0.\n#define rSat 1.\n#define rBrg 1.\n\n#define oHue 0.\n#define oSat 1.\n#define oBrg 1.\n\n#define yHue 0.\n#define ySat 1.\n#define yBrg 1.\n\n#define gHue 0.\n#define gSat 1.\n#define gBrg 1.\n\n#define cHue 0.\n#define cSat 1.\n#define cBrg 1.\n\n#define bHue 0.\n#define bSat 1.\n#define bBrg 1.\n\n#define pHue 0.\n#define pSat 1.\n#define pBrg 1.\n\n#define mHue 0.\n#define mSat 1.\n#define mBrg 1.\n\nvec3 rgb2hsv(vec3 c) {\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord / iResolution.xy;\n    \n    vec3 rgb = vec3(texture(iChannel0, uv));\n    vec3 hsv = rgb2hsv(rgb);\n    \n    //red\n    \n    float RhueDiff = abs(hsv.x - (0. / 360.0));\n    \n    if (RhueDiff < hueThreshold) {\n        vec3 RdestRGB = hsv2rgb(vec3((rHue / 360.0), hsv.y*rSat, hsv.z*rBrg));\n        rgb = mix(RdestRGB, rgb, RhueDiff / hueThreshold);\n    }\n    \n    //orange\n    \n    float OhueDiff = abs(hsv.x - (30. / 360.0));\n    if (OhueDiff < hueThreshold) {\n        vec3 OdestRGB = hsv2rgb(vec3((oHue / 360.0), hsv.y*oSat, hsv.z*oBrg));\n        rgb = mix(OdestRGB, rgb, OhueDiff / hueThreshold);\n    }\n    \n    //yellow\n    \n    float YhueDiff = abs(hsv.x - (60. / 360.0));\n    \n    if (YhueDiff < hueThreshold) {\n        vec3 YdestRGB = hsv2rgb(vec3((yHue / 360.0), hsv.y*ySat, hsv.z*yBrg));\n        rgb = mix(YdestRGB, rgb, YhueDiff / hueThreshold);\n    }\n    \n    //Green\n    \n    float GhueDiff = abs(hsv.x - (120. / 360.0));\n    \n    if (GhueDiff < hueThreshold) {\n        vec3 GdestRGB = hsv2rgb(vec3((gHue / 360.0), hsv.y*gSat, hsv.z*gBrg));\n        rgb = mix(GdestRGB, rgb, GhueDiff / hueThreshold);\n    }\n    \n    //Cyan\n    \n    float ChueDiff = abs(hsv.x - (180. / 360.0));\n    \n    if (ChueDiff < hueThreshold) {\n        vec3 CdestRGB = hsv2rgb(vec3((cHue / 360.0), hsv.y*cSat, hsv.z*cBrg));\n        rgb = mix(CdestRGB, rgb, ChueDiff / hueThreshold);\n    }\n    \n    //Blue\n    \n    float BhueDiff = abs(hsv.x - (240. / 360.0));\n    \n    if (BhueDiff < hueThreshold) {\n        vec3 BdestRGB = hsv2rgb(vec3((bHue / 360.0), hsv.y*bSat, hsv.z*bBrg));\n        rgb = mix(BdestRGB, rgb, BhueDiff / hueThreshold);\n    }\n    \n    //Purple\n    \n    float PhueDiff = abs(hsv.x - (270. / 360.0));\n    \n    if (PhueDiff < hueThreshold) {\n        vec3 PdestRGB = hsv2rgb(vec3((pHue / 360.0), hsv.y*pSat, hsv.z*pBrg));\n        rgb = mix(PdestRGB, rgb, PhueDiff / hueThreshold);\n    }\n    \n    //Magenta\n    \n    float MhueDiff = abs(hsv.x - (300. / 360.0));\n    \n    if (MhueDiff < hueThreshold) {\n        vec3 MdestRGB = hsv2rgb(vec3((mHue / 360.0), hsv.y*mSat, hsv.z*mBrg));\n        rgb = mix(MdestRGB, rgb, MhueDiff / hueThreshold);\n    }\n    \n    \n    fragColor = vec4(rgb, 1.);\n}","name":"Image","description":"","type":"image"}]}