{"ver":"0.1","info":{"id":"NltXzr","date":"1638628745","viewed":188,"name":"Voxel Cube","username":"akohdr","description":"Dropped out of recent extended round of golf: https://www.shadertoy.com/view/ftcXz  \nInteresting bit for me was building matrix transform from derivative components (sin, cos, -sin)\n","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["voxel"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Created by Andrew Wild - akohdr/2021\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\nvoid mainImage(out vec4 o, vec2 F) \n{\n     float d = 0., e, \n           t = iMouse.z>0. ? iMouse.y*.003 : 2.2*sin(iTime); // osc or mouse rotate\n     \n     vec3 p = iResolution, c,\n          g = vec3((F-vec2(.47,.5)*p.xy) / p.y , 1),    // center coord\n          u = vec3(-2.57,-1,.57),                       // phase offsets\n          s = cos(t+u)         //  effectively derivatives (sin, cos, -sin)\n              *u.zyz; \n       \n          u = s.yxz;\n          u -= (1.+s.y) / 3.;\n  \n    mat3  R = mat3(u.xzy, \n                   u.yxz,\n                   u.zyx)\n              +.02;             // fixes irritating disconnected corner voxel\n                   \n    p = (40./p)*R;              // ray cast starting point\n    \n    for(int i=8; i < 700; i+=8) {\n    \n//        u = floor(p) + vec3(bvec3(i&1,i&2,i&4));  // optimizes out with stride +=8\n        u = floor(p);\n        c = abs( u * R);\n\n        e = .5;\n//        if(all(lessThan(c,vec3(9))))\n        if(!any(greaterThan(c,vec3(9))))\n        {\n            c = abs( p - u);\n            e = max(max(c.x,c.y),c.z) - .8;\n        }\n        \n        d = min(d, e);\n\n//        if(i%8<1)                                 // again optimizes out stride +=8\n          p -= d++ * g * R;\n    }\n    \n    o = vec4(abs(R * p).z);\n    o *= vec4(6,8,4,0)/1e2;                         // add little colour\n}\n\n","name":"Image","description":"","type":"image"}]}