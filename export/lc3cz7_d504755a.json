{"ver":"0.1","info":{"id":"lc3cz7","date":"1730397737","viewed":141,"name":"Nebula Twister","username":"jakekinchen","description":"a cute little blackhole nebula twister, inspired by https://www.shadertoy.com/view/Mc3yRM","likes":7,"published":3,"flags":0,"usePreview":0,"tags":["space","psychedelic","trippy"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Customizable parameters\n#define TAU 6.28318530718\n#define TIME_SCALE 0.2\n#define SHAPE_DISTORTION 1.2\n#define COLOR_SHIFT 0.7\n#define ROTATION_SPEED 0.5\n#define INTENSITY 1.5\n#define SPIRAL_FACTOR 2.0\n#define MORPH_SPEED 0.3\n\nvec3 palette(float t) {\n    vec3 a = vec3(0.5, 0.5, 0.5);\n    vec3 b = vec3(0.5, 0.5, 0.5);\n    vec3 c = vec3(1.0, 1.0, 1.0);\n    vec3 d = vec3(0.263 + COLOR_SHIFT, 0.416 + COLOR_SHIFT * 0.5, 0.657 + sin(t * 0.2) * 0.3);\n    return a + b * cos(4.0 * (c * t + d));\n}\n\nmat2 rotation(float angle) {\n    float modified_angle = angle * ROTATION_SPEED;\n    return mat2(cos(modified_angle), -sin(modified_angle),\n                sin(modified_angle), cos(modified_angle));\n}\n\nfloat spiral_dist(vec2 p, float r) {\n    float theta = atan(p.y, p.x);\n    float spiral = length(p) - r - sin(theta * SPIRAL_FACTOR + iTime * TIME_SCALE) * 0.2;\n    return spiral;\n}\n\nfloat morph_shape(vec2 pos, float r, float time) {\n    vec2 p = pos * SHAPE_DISTORTION;\n    \n    // Create morphing between different shapes\n    float morph = sin(time * MORPH_SPEED) * 0.5 + 0.5;\n    \n    // Spiral distance\n    float spiral = spiral_dist(p, r);\n    \n    // Hexagonal distance\n    float angle = TAU / 6.0;\n    vec2 hex_p = vec2(\n        cos(floor(0.5 + atan(p.y, p.x) / angle) * angle),\n        sin(floor(0.5 + atan(p.y, p.x) / angle) * angle)\n    );\n    float hex = abs(dot(normalize(hex_p), p)) - r;\n    \n    // Smooth interpolation between spiral and hex\n    return mix(spiral, hex, morph);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = (fragCoord.xy * 2.0 - iResolution.xy) / iResolution.y;\n    vec2 uv0 = uv;\n    vec3 finalColor = vec3(0.0);\n\n    // Add spiral distortion to UV coordinates\n    float dist = length(uv);\n    float angle = atan(uv.y, uv.x);\n    float spiral_warp = sin(dist * 10.0 - iTime * TIME_SCALE) * 0.1;\n    uv *= (1.0 + spiral_warp);\n\n    for (float i = 0.0; i < 4.0; i += 1.0) {\n        vec3 col2 = vec3(0.0);\n        float t = fract(0.1 * iTime * TIME_SCALE * 0.51);\n        \n        // Add wave distortion\n        float wave = sin(uv.x * 5.0 + iTime * TIME_SCALE) * cos(uv.y * 5.0 + iTime * TIME_SCALE) * 0.1;\n        uv += vec2(wave);\n        \n        mat2 rot1 = rotation(3.0 * TAU * (0.3 - clamp(length(uv), 0.0, 0.3)));\n        uv = rot1 * uv;\n        \n        float s = -1.0;\n        for (float j = 0.0; j < 5.0; j += 1.0) {\n            float rad = 1.4 / pow(2.0, j) * (0.9 - 0.2 * j);\n            \n            mat2 rot2 = rotation(-2.0 * s * (j + 1.0) * TAU * t);\n            uv = rot2 * uv;\n            \n            // Use our morphing shape\n            float shape = morph_shape(uv, rad, iTime);\n            s *= -1.0;\n            col2 += 1.004 / abs(shape);\n        }\n\n        uv = fract(uv * 1.5) - 0.5;\n        float d = length(uv) * exp(-length(uv0));\n        \n        // Add time-varying color modulation\n        float time_factor = sin(iTime * TIME_SCALE * 0.5) * 0.5 + 0.5;\n        vec3 col = palette(length(uv0) + i * 0.4 + iTime * TIME_SCALE * 0.4 + time_factor);\n\n        d = sin(d * 8.0 + iTime * TIME_SCALE) / 8.0;\n        d = abs(d);\n        d = pow(0.01 / d, 1.2);\n        \n        // Add pulsing intensity\n        float pulse = sin(iTime * TIME_SCALE * 0.5) * 0.2 + 1.0;\n        finalColor += col * d * INTENSITY * pulse;\n    }\n\n    // Add subtle color cycling to the final output\n    float cycle = sin(iTime * TIME_SCALE * 0.2) * 0.1 + 1.0;\n    finalColor *= vec3(cycle, cycle * 0.9, cycle * 1.1);\n\n    fragColor = vec4(finalColor, 1.0);\n}","name":"Image","description":"","type":"image"}]}