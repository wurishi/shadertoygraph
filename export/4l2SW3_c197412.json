{"ver":"0.1","info":{"id":"4l2SW3","date":"1446914698","viewed":1712,"name":"SnowScreen","username":"jt","description":"A snow-effect created by multiple layers of \"blob-noise\" traveling at different speed\n(for the basic effect see [url]https://www.shadertoy.com/view/4ljSW3[/url]).","likes":41,"published":1,"flags":0,"usePreview":1,"tags":["particles","superposition","blobnoise"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// SnowScreen (superposition of blobs in displaced-grid voronoi-cells) by Jakob Thomsen\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n#define pi 3.1415926\n\nfloat T;\n\n// iq's hash function from https://www.shadertoy.com/view/MslGD8\nvec2 hash( vec2 p ) { p=vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))); return fract(sin(p)*18.5453); }\n\nfloat simplegridnoise(vec2 v)\n{\n    float s = 1. / 256.;\n    vec2 fl = floor(v), fr = fract(v);\n    float mindist = 1e9;\n    for(int y = -1; y <= 1; y++)\n        for(int x = -1; x <= 1; x++)\n        {\n            vec2 offset = vec2(x, y);\n            vec2 pos = .5 + .5 * cos(2. * pi * (T*.1 + hash(fl+offset)) + vec2(0,1.6));\n            mindist = min(mindist, length(pos+offset -fr));\n        }\n    \n    return mindist;\n}\n\nfloat blobnoise(vec2 v, float s)\n{\n    return pow(.5 + .5 * cos(pi * clamp(simplegridnoise(v)*2., 0., 1.)), s);\n}\n\nfloat fractalblobnoise(vec2 v, float s)\n{\n    float val = 0.;\n    const float n = 4.;\n    for(float i = 0.; i < n; i++)\n        //val += 1.0 / (i + 1.0) * blobnoise((i + 1.0) * v + vec2(0.0, iTime * 1.0), s);\n    \tval += pow(0.5, i+1.) * blobnoise(exp2(i) * v + vec2(0, T), s);\n\n    return val;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    T = iTime;\n\n    vec2 r = vec2(1.0, iResolution.y / iResolution.x);\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    float val = fractalblobnoise(r * uv * 20.0, 5.0);\n    //float val = fractalblobnoise(r * uv * 40.0, 1.25); // more snowflakes\n    //float val = blobnoise(r * uv * 10.0, 5.0);\n    //fragColor = vec4(vec3(val), 1.0);\n    fragColor = mix(texture(iChannel0, uv), vec4(1.0), vec4(val));\n}\n","name":"Image","description":"","type":"image"}]}