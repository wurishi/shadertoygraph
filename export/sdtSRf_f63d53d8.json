{"ver":"0.1","info":{"id":"sdtSRf","date":"1633656575","viewed":94,"name":"Arbitrary 9-patch scaler","username":"wow_thats_crazy","description":"Scales image based on a specified 9-patch region (set partRegion in image uv space)","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["9patch","9patch"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n    vec2 imageSize = vec2(640, 306); //Set to bitmap size\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 ratio = imageSize.xy / iResolution.xy;\n    \n    vec4 patchRegion = vec4(0.4,0.3, 0.7, 0.9);\n    float patchWidth =  (patchRegion.z - patchRegion.x);\n    float patchHeight = patchRegion.w - patchRegion.y;\n    float range = patchWidth * ratio.x;\n    \n    \n    float zpos = 1.0 - ((imageSize.x * (1.0 - patchRegion.z))/imageSize.x) * ratio.x;\n    float xpos = patchRegion.x * ratio.x;\n    float wpos = 1.0 - ((imageSize.y * (1.0 - patchRegion.w))/imageSize.y) * ratio.y;\n    float ypos = patchRegion.y * ratio.y;\n    \n    vec2 uv2 = uv / ratio;\n   \n    \n    if(uv.x > xpos && uv.x <= zpos){\n       float d = (uv.x - xpos) / (zpos-xpos);\n       uv2.x = (xpos/ratio.x + d * patchWidth);\n    }else\n    \n    if(uv.x > zpos){\n        uv2.x -= 1.0/ratio.x -1.0;\n    }\n    \n    \n     if(uv.y > ypos && uv.y <= wpos){\n       float d = (uv.y - ypos) / (wpos-ypos);\n       uv2.y = (ypos/ratio.y + d * patchHeight);\n    }else\n    \n    if(uv.y > wpos){\n        uv2.y -= 1.0/ratio.y -1.0;\n    }\n    \n    fragColor = texture(iChannel0, uv2);\n    \n}","name":"Image","description":"","type":"image"}]}