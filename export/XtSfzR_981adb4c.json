{"ver":"0.1","info":{"id":"XtSfzR","date":"1514222816","viewed":175,"name":"The china flag","username":"cailuming","description":"try square and triangle ,star ","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4df3Rn","filepath":"/media/a/3c33c415862bb7964d256f4749408247da6596f2167dca2c86cc38f83c244aa6.mp3","previewfilepath":"/media/ap/3c33c415862bb7964d256f4749408247da6596f2167dca2c86cc38f83c244aa6.mp3","type":"music","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define BIAS 1e-15\n#define PI 3.1415926\n\nmat2 rot2D(float a){\n   float c=cos(a);\n   float s=sin(a);\n    return mat2(\n        c,-s,\n        s,c\n   );\n}\nfloat drawSquare(vec2 uv,vec2 c){\n    uv-=c;\n    uv.x*=0.6;\n    float v =max(abs(uv.x),abs(uv.y));\n    v=0.4/v;\n    \n    v=pow(v,50.);\n    return v;\n}\n\nfloat drawCircle(vec2 uv,vec2 c,float r){\n    \n    float arc =atan(uv.y-c.y,uv.x-c.x+BIAS);\n    vec2 sq =vec2(r*cos(arc),r*sin(arc));\n    float v =0.01/length(uv-sq-c);\n    return v;\n} \n\nvec2 drawLine(vec2 uv,vec2 p1,vec2 p2){\n    vec2 pline = p2-p1;\n    vec2 pu = uv-p1;\n    vec2 v = pu -clamp(dot(pline,pu)/dot(pline,pline),0.,1.)*pline;\n    return v;\n}\n\nfloat drawTriangle(vec2 uv,vec2 ct,float r,float a){\n   \n    vec2 v1=drawLine(uv,vec2(ct.x,ct.y+r),vec2(ct.x-r,ct.y-r));\n    vec2 v2=drawLine(uv,vec2(ct.x,ct.y+r),vec2(ct.x+r,ct.y-r));\n    vec2 v3=drawLine(uv,vec2(ct.x-r,ct.y-r),vec2(ct.x+r,ct.y-r));\n    vec2 nv1=normalize(v1);\n    vec2 nv2=normalize(v2);\n    vec2 nv3=normalize(v3);\n    \n    float abias =0.099;\n    float v =min(length(v1)-a,min(length(v2)-a,length(v3)-a));\n    if(dot(nv1,nv2)<=0.&&dot(nv2,nv3)<=0.){\n       v=1.;\n    };\n    v=0.012/abs(v);\n    v=pow(v,2.);\n    return v;\n}\n\nfloat draw5Stars(vec2 uv,vec2 ct,float r,float a){\n    uv-=ct;\n    uv*=rot2D(a);\n    \n    vec2 p1 =vec2(r*cos(PI*0.1),r*sin(PI*0.1));\n    vec2 p2 =vec2(r*cos(PI*0.5),r*sin(PI*0.5));\n    vec2 p3 =vec2(r*cos(PI*0.9),r*sin(PI*0.9));\n    vec2 p4 =vec2(r*cos(PI*1.3),r*sin(PI*1.3));\n    vec2 p5 =vec2(r*cos(PI*1.7),r*sin(PI*1.7));\n   \n    \n    vec2 v1=drawLine(uv,p2,p4);\n    vec2 v2=drawLine(uv,p2,p5);\n    vec2 v3=drawLine(uv,p4,p1);\n    vec2 v4=drawLine(uv,p1,p3);\n    vec2 v5=drawLine(uv,p3,p5);\n    \n    vec2 nv1=normalize(v1);\n    vec2 nv2=normalize(v2);\n    vec2 nv3=normalize(v3);\n    vec2 nv4=normalize(v4);\n    vec2 nv5=normalize(v5);\n    \n    \n    float v =min(length(v1),min(length(v2),min(length(v3),min(length(v4),length(v5)))));\n    v=0.0019/v;\n    v=pow(v,4.);\n    \n    float ref= dot(nv1,nv2)*dot(nv2,nv3)*dot(nv3,nv4)*dot(nv4,nv5)*dot(nv5,nv1);\n       \n    if((dot(nv1,nv2)<=0.\n      &&dot(nv1,nv3)<=0.)\n      ||(dot(nv4,nv5)<=0.\n      &&dot(nv3,nv4)<=0.)\n       ||(dot(nv5,nv2)<=0.\n         &&dot(nv1,nv2)<=0.)\n        \n      ){\n       v=10.;\n    }\n    return v;    \n}  \n\nvec3 drawFlag(vec2 uv,vec2 ct){\n    uv-=ct;\n    uv.y+=0.02*sin(26.*(uv.x*uv.y)+iTime*3.); \n    uv.x+=0.19;\n    vec2 c=vec2(-0.44,0.16);\n    vec2 suv =uv-c+vec2(-0.08,0);\n    float r=0.2;\n    float arc =atan(suv.y,suv.x);\n    float s=0.031;\n    float o =PI*0.2;\n    float v = drawSquare(uv,vec2(0,0));   \n    vec3 col =vec3(v,0,0);\n    \n    \n    v= draw5Stars(uv,c,0.11,0.);\n    v+= draw5Stars(suv,vec2(r*cos(o*1.5),r*sin(o*1.5)),s,-o*1.5);\n    v+= draw5Stars(suv,vec2(r*cos(o*0.5),r*sin(o*0.5)),s,-o*0.9);\n    v+= draw5Stars(suv,vec2(r*cos(-o*0.5),r*sin(-o*0.5)),s,o*0.3);\n    v+= draw5Stars(suv,vec2(r*cos(-o*1.5),r*sin(-o*1.5)),s,o*1.);\n    \n    col+=vec3(v,v,0);\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy-vec2(0.5);\n    float as = iResolution.x/iResolution.y;\n    uv.x*=as;\n    float arc =atan(uv.y,uv.x);\n    float len = length(uv);\n     \n    float v=0.0;\n   \n    vec3 col =vec3(v)*vec3(0.4*cos(iTime)+0.5,0.3*sin(iTime)+0.6,0.7*cos(iTime)+0.8);\n\t\n    fragColor = vec4(mix(col,drawFlag(uv,vec2(0.15,0.0)),0.5),1.0);\n}","name":"Image","description":"","type":"image"}]}