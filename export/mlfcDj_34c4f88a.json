{"ver":"0.1","info":{"id":"mlfcDj","date":"1691175001","viewed":65,"name":"Looping Flower Pattern","username":"solarflare","description":"My attempt to animate moving points with a trail","likes":6,"published":1,"flags":0,"usePreview":0,"tags":["loop"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415926535\n#define MAX_DEPTH 60.\n#define NUM_LOOPS 13.\nfloat getCol(vec2 loc, float depth, float angle, float timeShift){\n    float col = 0.;\n    float time = iTime - iTimeDelta/2. * depth;\n    float radius =.4;\n    vec2 p = vec2(radius*cos((time+timeShift)*2.-(PI/2.)), radius*sin(time+timeShift));\n    p = vec2(p.x*cos(angle)-p.y*sin(angle), p.y*cos(angle)+p.x*sin(angle));\n    if(distance(loc, p) <(1./iResolution.y)*3.){\n        col = (1.-depth*(1./MAX_DEPTH))*smoothstep((1./iResolution.y)*4., 0., distance(loc, p));\n    }\n    return col;\n}\nvec3 fscaleColor(float x){\n    return vec3(.84, .04, .91)*smoothstep(0., 1., x) + vec3(0.)*smoothstep(1., 0., x);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy - vec2(.5, .5);\n    uv.x *= iResolution.x/iResolution.y;\n    float c = 0.;\n    for(float s = 0.; s < NUM_LOOPS; s++){\n        float shift = step(0.1, mod(s, 2.));\n        for(float depth = 0.; depth < MAX_DEPTH; depth++){\n            c += getCol(uv, depth, s*(PI/NUM_LOOPS)+PI*shift, 0.);\n        }\n    }\n    for(float s = 0.; s < NUM_LOOPS; s++){\n        float shift = step(0.1, mod(s, 2.));\n        for(float depth = 0.; depth < MAX_DEPTH; depth++){\n            c += getCol(uv, depth, s*(PI/NUM_LOOPS)+PI*shift, PI);\n        }\n    }\n    fragColor = vec4(fscaleColor(c),1.);\n}","name":"Image","description":"","type":"image"}]}