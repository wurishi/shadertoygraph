{"ver":"0.1","info":{"id":"3ldfWf","date":"1613601446","viewed":100,"name":"Failed lissajous experiment xdd","username":"pema99","description":"newton raphson is apparently pretty shit for this","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["lissajous"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 lissajous(float t, float a, float b, float omega, float delta)\n{\n    t = clamp(t, 0.0, 6.28);\n    return vec2(a*sin(omega*t+delta), b*sin(t));\n}\n\nfloat lissajousDist(vec2 p, float a, float b, float omega, float delta)\n{\n    float minSqrMag = 10.0;\n    \n    for (float j = 0.0; j < 6.28; j += 6.28/16.0)\n    {\n        float t = j;\n        \n        float sqrMag;\n        for (int i = 0; i < 8; i++)\n        {\n            vec2 curve = lissajous(t, a, b, omega, delta);\n            sqrMag = pow(curve.x - p.x, 2.0) + pow(curve.y - p.y, 2.0) - 0.01;\n            float deriv = 2.0*(a*sin(omega*t+delta)-p.x)*a*omega*cos(omega*t+delta)+2.0*(b*sin(t)-p.y)*b*cos(t);\n            t = t - (sqrMag / deriv); \n        }\n        \n        minSqrMag = min(sqrMag, minSqrMag);\n    }\n    \n    return sqrt(minSqrMag);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord/iResolution.xy - 0.5) * 2.0;\n    uv.x *= iResolution.x / iResolution.y;\n    vec2 m = iMouse.xy / iResolution.xy;\n    uv *= 1.33;\n    \n    float a = 1.0;\n    float b = 1.0;\n    float omega = (sin(iTime*0.3)*0.5+0.5)*3.14*2.0;//m.x*3.14*2.0;\n    float delta = (cos(iTime*0.3)*0.5+0.5)*3.14/2.0;//3.14/2.0*m.y;\n    \n    float c1 = 0.0;\n    for (float i = 0.0; i < 6.28; i += 0.01)\n    {\n        vec2 d = lissajous(i, a, b, omega, delta);\n        c1 = max(c1, smoothstep(0.02, 0.0, distance(d, uv)));\n    }\n    \n    float c2 = lissajousDist(uv, a, b, omega, delta);\n\n    fragColor = vec4(c1, c2, 0.0, 1.0);\n}","name":"Image","description":"","type":"image"}]}