{"ver":"0.1","info":{"id":"tt3fRn","date":"1612067937","viewed":115,"name":"Fractal 12_gaz","username":"gaz","description":"3d","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["fractal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI acos(-1.)\n#define A(p,n)length(p)*sin(vec2(0.,PI*.5)+mod(atan(p.y,p.x),PI*2./n)-PI/n)\n#define F(p,v)p-2.*min(0.,dot(p,v))*v;\n#define R(p,a,r)mix(a*dot(p,a),p,cos(r))+sin(r)*cross(p,a)\n#define Q(t, a)floor(t*a)/a\n#define H(n)fract(sin(n+1234.5)*55555.)\n\nvoid mainImage(out vec4 O, vec2 C)\n{\n    O=vec4(0);\n    vec3 r=iResolution,p;\n    vec2 U=(C-.5*r.xy)/r.y;\n    float i,g,e=1.,l,s,\n    q=Q(fract(U.y+iTime*.5),30.);\n    U.x+=.1*sin(iTime*8.+q*10.)*\n        step(H(floor(iTime*2.))*.4+.6,H(q))*\n        step(.9,sin(iTime*2.+3.*sin(iTime*5.)));\n    for(i=0.;\n        ++i<99.&&e>.0005;\n        g+=e=length(p)/s\n        )\n    {\n        p=g*vec3(U,1);\n        p.z-=-.6;\n        p=R(p,normalize(vec3(3,2,1)),iTime*.1);\n        s = 4.;\n        for(int i=0;i<15;i++)\n        {\n            p.y+=.15;\n            p.xz=abs(p.xz);\n            p.xy=A(p.xy,12.);\n            p.y-=.11;\n            p.xy=F(p.xy,normalize(vec2(1,-.85)));\n            p.y=.15-abs(p.y);\n            p.xz=abs(p.xz);\n            p.yz=F(p.yz,normalize(vec2(2,-1)));\n            p.x-=.53;\n            p.yz=F(p.yz,normalize(vec2(1,-1)));\n            p-=vec3(1.7,.38,.0);\n            l=2.3*clamp(1.3/dot(p,p),0.,1.);\n            p*=l;\n            p+=vec3(1.8,.7,.05);\n            s*=l;\n        }\n    }\n    O.xyz+=mix(vec3(1),cos(vec3(1,8,15)+p*8.+log(s*4.)),.4)*180./i/i;\n    O *= sin(U.y*250.-iTime*5.)*.2+.9;\n}\n","name":"Image","description":"","type":"image"}]}