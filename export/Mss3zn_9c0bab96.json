{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"// Dark Chocolate Cave Plasma by Optimus\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nfloat time;\nvec2 mouse;\nvec2 resolution;\n\nconst int iters = 256;\n\nconst float origin_z = 0.0;\nconst float plane_z = 4.0;\nconst float far_z = 64.0;\n\nconst float step = (far_z - plane_z) / float(iters) * 0.025;\n\nconst float color_bound = 0.0;\nconst float upper_bound = 1.0;\n\nconst float scale = 32.0;\n\nconst float disp = 0.25;\n\nfloat calc_this(vec3 p, float disx, float disy, float disz)\n{\n\tfloat c = sin(sin((p.x + disx) * sin(sin(p.z + disz)) + time) + sin((p.y + disy) * cos(p.z + disz) + 2.0 * time) + sin(3.0*p.z + disz + 3.5 * time) + sin((p.x + disx) + sin(p.y + disy + 2.5 * (p.z + disz - time) + 1.75 * time) - 0.5 * time));\n\treturn c;\n}\n\nvec3 get_intersection(vec2 fc)\n{\n\tvec2 position = (fc.xy / resolution.xy - 0.5) * scale;\n\n\tvec3 pos = vec3(position.x, position.y, plane_z);\n\tvec3 origin = vec3(0.0, 0.0, origin_z);\n\n\tvec3 dir = pos - origin;\n\tvec3 dirstep = normalize(dir) * step;\n\n\tdir = normalize(dir) * plane_z;\n\n\n\tfloat c;\n\n\tfor (int i=0; i<iters; i++)\n\t{\n\t\tc = calc_this(dir, 0.0, 0.0, 0.0);\n\n\t\tif (c > color_bound)\n\t\t{\n\t\t\tbreak;\n\t\t}\n\n\t\tdir = dir + dirstep;\n\t}\n\n\treturn dir;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\ttime = iTime;\n\tmouse = vec2(iMouse);\n\tresolution = vec2(iResolution);\n\t\n\tvec3 p = get_intersection(fragCoord);\n\tfloat dx = color_bound - calc_this(p, disp, 0.0, 0.0);\n\tfloat dy = color_bound - calc_this(p, 0.0, disp, 0.0);\n\n\tvec3 du = vec3(disp, 0.0, dx);\n\tvec3 dv = vec3(0.0, disp, dy);\n\tvec3 normal = normalize(cross(du, dv));\n\n\tvec3 light = normalize(vec3(0.0, 0.0, 1.0));\n\tfloat l = dot(normal, light);\n\n\tfloat cc = pow(l, 2.0);\n\tfragColor = vec4(cc*0.8, cc*0.5, cc*0.2, cc);\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"Mss3zn","date":"1361903948","viewed":463,"name":"Dark Chocolate Cave Plasma","username":"Optimus","description":"Simple steady step raymarching into implicit surface with 3d plasma calculations.","likes":7,"published":1,"flags":0,"usePreview":0,"tags":["3d","raymarching"],"hasliked":0,"parentid":"","parentname":""}}