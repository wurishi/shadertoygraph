{"ver":"0.1","info":{"id":"llscz4","date":"1503841764","viewed":227,"name":"Watery waves","username":"rkibria","description":"A moving wavy pattern composed of 2 sines.","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["procedural","2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define TWOPI 6.28318530718\n\nvec4 WATER_COLOR = vec4(0.0, 0.412, 0.58, 1.0); // sea blue\nvec4 CREST_COLOR = vec4(1.0, 1.0, 1.0, 1.0);\n\n// Goes 0 to 1 at period/2 and back to 0\nfloat trianglefunction(float t, float period) {\n    float ps = mod(t, period) / period; // 0 to 1 in period\n    if (ps > 0.5)\n        ps = 1.0 - ps;    \n    return ps * 2.0;\n}\n\n// Returns 1 where the crest is strongest, can go <0 too though\nfloat waterwave(vec2 uv,\n                float t,\n    \t\t\tfloat period, \n                float horzSpeed, \n                float vertSpeed,\n                float amplitude, \n                float crestWidth\n               ) {\n\t// canvas moves\n    float cx = uv.x;\n    float cy = uv.y + vertSpeed * sin(t);\n    \n    // map area to [0..TWOPI, -1..1]\n\tfloat sx = cx * TWOPI;\n    float sy = cy * 2.0 - 1.0;\n\n    float ss = trianglefunction(t, period);\n    ss = ss * 2.0 - 1.0;\n\n    float f = sin(t * horzSpeed + sx) * ss * amplitude;\n\n    float d = abs(sy - f) / crestWidth;\n    return 1.0 - d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    \n    float w1 = waterwave(vec2(uv.x, uv.y - 0.2),\n                        iTime,\n        \t\t\t    8.0, // period\n                        1.0, // horzSpeed\n                        0.2, // vertSpeed\n                        0.5, // amplitude\n                        1.5 // crestWidth\n                        );\n    \n    float w2 = waterwave(vec2(uv.x, uv.y + 0.3),\n                        iTime,\n        \t\t\t    5.0, // period\n                        2.5, // horzSpeed\n                        0.1, // vertSpeed\n                        0.15, // amplitude\n                        0.5 // crestWidth\n                        );\n    \n    float waves = w1 + w2 * 0.25;\n\n    fragColor = mix(WATER_COLOR, CREST_COLOR, waves);\n}\n","name":"Image","description":"","type":"image"}]}