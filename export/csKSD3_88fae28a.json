{"ver":"0.1","info":{"id":"csKSD3","date":"1681711757","viewed":903,"name":"Sinapsis","username":"Kali","description":"Based on the \"particle\" system as seen in the final part of the 4k intro Random Generation https://www.shadertoy.com/view/DdGSD1","likes":65,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","particles","volumetric"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float it=0.;\n\nmat2 rot(float a) {\n    float s=sin(a),c=cos(a);\n    return mat2(c,s,-s,c);\n}\n\nfloat hash(vec2 p)\n{\n    vec3 p3  = fract(vec3(p.xyx) * .1031);\n    p3 += dot(p3, p3.yzx + 33.33);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nfloat de(vec3 p) {\n    p.yz*=rot(-.5);\n    p.xz*=rot(iTime*.2);\n    float d=100.;\n    p*=.2;\n    for (float i=0.; i<12.; i++) {\n        p.xy=sin(p.xy*2.);\n        p.xy*=rot(1.);\n        p.xz*=rot(1.5);\n        float l=length(p.xy)+.01;\n        if (i>1.) d=min(d,l);\n        if (d==l) it=i;\n    }\n    return d*.3;\n}\n\nvec3 march(vec3 from, vec3 dir) {\n    float d, td=hash(gl_FragCoord.xy+iTime)*.2;\n    vec3 p, col=vec3(0.);\n    for (int i=0; i<200; i++){\n        p=from+dir*td;\n        d=max(.005,abs(de(p)));\n        td+=d;\n        if (td>10.) break;\n        vec3 c=vec3(1.,-.5,0.);\n        c.rb*=rot(-it*.15+iTime*.1);\n        c=normalize(1.+c);\n        c*=exp(-.15*td);\n        c*=exp(-.5*length(p));\n        c/=1.+d*1500.;\n        c*=.3+abs(pow(abs(fract(length(p)*.15-iTime*.2+it*.05)-.5)*2.,30.))*4.;\n        col+=c;\n        col+=exp(-5.*length(p))*.15;\n    }\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-iResolution.xy*.5)/iResolution.y;\n    vec3 from=vec3(0.,0.,-3.-cos(iTime*.5));\n    vec3 dir=normalize(vec3(uv,1.2));\n    vec3 col=march(from, dir);\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}