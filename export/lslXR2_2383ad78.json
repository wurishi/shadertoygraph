{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"video","id":"Xdf3Rn","filepath":"/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"bool isChromaKey(vec4 colour)\n{\n\treturn colour.g > colour.r && colour.g > colour.b && colour.g > 0.4;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tvec4 videoColour = texture(iChannel0, uv);\n\t\n\tbool chromaKey = isChromaKey(videoColour);\n\t\n\tif(chromaKey)\n\t{\t\t\n\t\t// Work out how many samples until we hit something\n\t\tint loopCount = 0;\n\t\tfloat dx = 0.0;\n\t\tfloat dy = 0.0;\n\t\tfor(int loop = 0; loop < 256; ++loop)\n\t\t{\n\t\t\tvec4 sample0 = texture(iChannel0, uv + vec2(+dx, 0.0));\n\t\t\tif(!isChromaKey(sample0))\n\t\t\t{\n\t\t\t\tloopCount = loop;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\t\t\t\t\t\t \n\t\t\tvec4 sample1 = texture(iChannel0, uv + vec2(-dx, 0.0));\n\t\t\tif(!isChromaKey(sample1))\n\t\t\t{\n\t\t\t\tloopCount = loop;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\t\t\t\t\t\t \n\t\t\tvec4 sample2 = texture(iChannel0, uv + vec2(0.0, +dy));\n\t\t\tif(!isChromaKey(sample2))\n\t\t\t{\n\t\t\t\tloopCount = loop;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\t\t\t\t\t\t \n\t\t\tvec4 sample3 = texture(iChannel0, uv + vec2(0.0, -dy));\n\t\t\tif(!isChromaKey(sample3))\n\t\t\t{\n\t\t\t\tloopCount = loop;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\t\t\t\t\t\t \n\t\t\tdx += 1.0 / float(iResolution.x);\n\t\t\tdy += 1.0 / float(iResolution.y);\n\t\t}\n\n\t\tfloat cycle = fract((float(loopCount) - iTime * 300.0) / 64.0);\n\t\tvec4 red = vec4(1.0, 0.0, 0.0, 0.0);\n\t\tvec4 blue = vec4(0.0, 0.0, 1.0, 0.0);\n\t\tvec4 effectColour = vec4(0.0, 0.0, 0.0, 0.0);\n\t\tif(cycle < 0.5)\n\t\t{\n\t\t\teffectColour = mix(red, blue, cycle * 2.0);\n\t\t}\n\t\telse\t\n\t\t{\n\t\t\teffectColour = mix(blue, red, (cycle - 0.5) * 2.0);\n\t\t}\n\n\t\tfragColor = effectColour;\n\t}\n\telse\n\t{\n\t\tfragColor = videoColour;\n\t}\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lslXR2","date":"1404592472","viewed":263,"name":"ChromaKeyBorder","username":"TomHammersley","description":"A first stab at doing something vaguely entertaining","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d","video"],"hasliked":0,"parentid":"","parentname":""}}