{"ver":"0.1","info":{"id":"tdsSzs","date":"1552382245","viewed":510,"name":"AFC Ajax","username":"skaplun","description":"My tribute to AFC Ajax recent performance.\nFingerprint algorithm humbly borrowed from @diviaki. Thanks, it really graceful.","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["fingerprint","ajax"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define BG_CLR vec3(35./255.)\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec2 uv = ((fragCoord * 2. - iResolution.xy)/iResolution.y);\n    \n    float finger = fingerprintPattern(45. * uv + vec2(37.5, 9.), .287);\n\tvec4 fngClr = mix(RED, WHITE, step(.35, abs(-.825 - uv.x)));\n    vec3 outClr = mix(BG_CLR, fngClr.rgb, finger);\n    \n    if(INSIDE(uv, mottoBox)){\n    \tvec4 text = mottoText(uv, iChannel0);\n    \toutClr = mix(outClr, text.rgb, text.a);\n    }\n    \n    if(INSIDE(uv, starBox)){\n    \tfloat star = smoothstep(.2, .1, sdfStar5(uv * 10. + vec2(8., -6.75)));\n        star = max(star, smoothstep(.2, .1, sdfStar5(uv * 14. + vec2(15., -8.5))));\n        star = max(star, smoothstep(.2, .1, sdfStar5(uv * 14. + vec2(7.75, -8.5))));\n        outClr = mix(outClr, GOLD.rgb, star);\n    }\n    \n    fragColor = vec4(outClr, 1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define RED vec4(1., 0., 0., 1.)\n#define WHITE vec4(1.)\n#define GOLD vec4(240./255., 190./255., 31./255., 1.)\n\nconst vec4 mottoBox = vec4(0., -.65, 1.3, .85);\nconst vec4 starBox = vec4(-1.2, .5, .75, .35);\n\nvec2 hash2(vec2 p){\n\tp = vec2( dot(p,vec2(63.31,127.63)), dot(p,vec2(395.467,213.799)) );\n\treturn -1.0 + 2.0*fract(sin(p)*43141.59265);\n}\n\nfloat fingerprintPattern(vec2 uv, float ceed){\n    float bounds = smoothstep(15., 16.,length(uv * vec2(.55 + (uv.y + 20.) * .004, .5)));\n\n    float a=0.;\n    vec2 h = vec2(ceed, 0.);\n    for(int i=0; i<100; i++){\n        float s=sign(h.x);\n        h = hash2(h) * vec2(15., 50.);\n    \ta += s*atan(uv.x-h.x, uv.y-h.y);\n    }\n    uv.y += 10.;\n    a+=atan(uv.y, uv.x);\n\n    float w = .5;\n    float p=(1.-bounds)*w;\n    float s = min(.5, p);\n    float l = length(uv)+0.319*a;\n    float m = mod(l, 2.);\n    return 1. - (1.-smoothstep(2.-s,2.,m))*smoothstep(p,p+s,m);\n}\n\n#define INSIDE(c, r) (c.x >= r.x && c.x <= r.x + r.z && c.y >= r.y && c.y <= r.y+r.w)\n#define REMAP(from, to) vec2((from.x - to.x)/to.z, (from.y - to.y)/to.w)\nfloat getChar(sampler2D Font, vec2 P, int L){\n   return texture(Font, (P + vec2(L%16, 15-L/16))/16.).a;\n}\n\nstruct Char{\n\tvec4 region;\n\tint letter;\n    vec4 clr;\n};\n\n#define MOTTO_LENGTH 14\nconst Char motto[MOTTO_LENGTH] = Char[MOTTO_LENGTH](\n    Char(vec4(0., 0., .15, .2), 73, WHITE),\n    Char(vec4(.15, 0., .15, .2), 84, WHITE),\n    Char(vec4(.35, 0., .15, .2), 83, WHITE),\n    \n    Char(vec4(.6, 0., .15, .2), 73, WHITE),\n    Char(vec4(.75, 0., .15, .2), 78, WHITE),\n    \n    Char(vec4(1., 0., .15, .2), 77, WHITE),\n    Char(vec4(1.15, 0., .15, .2), 89, WHITE),\n\n\tChar(vec4(.2, -.5, .325, .6), 68, WHITE),\n    Char(vec4(.5, -.5, .325, .6), 78, WHITE),\n    Char(vec4(.825, -.5, .325, .6), 65, WHITE),\n\n\tChar(vec4(.45, -.65, .075, .125), 49, GOLD),\n    Char(vec4(.55, -.65, .075, .125), 57, GOLD),\n    Char(vec4(.65, -.65, .075, .125), 48, GOLD),\n\tChar(vec4(.75, -.65, .075, .125), 48, GOLD));\nconst Char apostrophe = Char(vec4(.255, .025, .15, .2), 39, WHITE);\nvec4 mottoText(vec2 U, sampler2D Font){\n    float c = 0.;\n    vec4 clr = vec4(0.);\n    for(int i=0; i<MOTTO_LENGTH; i++){\n    \tif(INSIDE(U, motto[i].region)){\n            vec2 r = REMAP(U, motto[i].region);\n            r.x = .25 + r.x*.5;\n            float T = getChar(Font, r, motto[i].letter);\n            c = smoothstep(.52, .5, T);\n            clr = motto[i].clr;\n            break;\n\t    }\n    }\n    if(INSIDE(U, apostrophe.region)){\n        vec2 r = REMAP(U, apostrophe.region);\n        r.x = .25 + r.x*.5;\n        float T = getChar(Font, r, apostrophe.letter);\n        c = max(c, smoothstep(.52, .5, T));\n        clr = WHITE;\n    }\n\treturn c * clr;\n}\n\nfloat sdfStar5( in vec2 p ){\n    // repeat domain 5x\n    const vec2 k1 = vec2(0.809016994375, -0.587785252292); // pi/5\n    const vec2 k2 = vec2(-k1.x,k1.y);\n    p.x = abs(p.x);\n    p -= 2.0*max(dot(k1,p),0.0)*k1;\n    p -= 2.0*max(dot(k2,p),0.0)*k2;\n    \n    // draw triangle\n    const vec2 k3 = vec2(0.951056516295,  0.309016994375); // pi/10\n    return dot( vec2(abs(p.x)-0.3,p.y), k3);\n}","name":"Common","description":"","type":"common"}]}