{"ver":"0.1","info":{"id":"3slXD8","date":"1551185076","viewed":454,"name":"Parametric equation DE","username":"gaz","description":"2d","likes":14,"published":1,"flags":0,"usePreview":0,"tags":["2d","bezier","de"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 bezier(vec2 a, vec2 b, vec2 c, float t)\n{\n    t=clamp(t,0.0,1.0);\n\treturn mix(mix(a,b,t),mix(b,c,t),t);\n}\n\nvec2 bezier(vec2 a, vec2 b, vec2 c, vec2 d, float t)\n{\n\treturn mix(bezier(a,b,c,t),bezier(b,c,d,t),t);\n}\n\nvec2 func(float t) // parametric equation\n{\n    vec2 ret;\n    switch (int(mod(iTime/5.0,3.0)))\n    {\n        case 1:\n            vec2 a = vec2(1,0);\n            vec2 b = vec2(0.2,sin(iTime));\n            vec2 c = -b;\n            vec2 d = vec2(-1,0);\n            ret = bezier(a,b,c,d,t);\n            break;\n        case 2:\n            t *= 3.1415*6.0;\n            float x = t*0.1-1.0;\n            float y = 0.2*sin(t*0.3+2.0*sin(t*0.5)+iTime);\n            ret = vec2(x,y);\n            break;\n        default:\n            ret = 0.6*vec2(\n                cos(5.0*t*fract(iTime*0.3)),\n                sin(5.0*t*fract(iTime*0.3))\n                );\n            break;\n    }\n    return ret;\n}\n\nfloat de(vec2 p)\n{\n \tfloat ITR = 50.0, pitch = 1.0, t = 0.5, de = 1e10;   \n    for(int j=0; j<2; j++)\n    {\n        float t0 = t-pitch*0.5;\n        pitch /= ITR;\n        for(float i=0.0; i<=ITR; i++) \n        {\n            float de0=distance(p,func(t0));\n            if (de0<de)\n            {\n                de = de0;\n                t=t0;\n            }       \n            t0 += pitch;\n        }\n    }\n    return de;\n    \n    /*\n    float st = 1.0/500.0;\n    float de = 1e10;\n    for (float i=1.0; i>0.0; i-=st)\n        de=min(de,distance(p,func(i)));\n    return de;\n\t*/\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 p = (2.0*fragCoord.xy-iResolution.xy)/iResolution.y;\n    \n    float d = de(p)-0.1;\n    \n    //iq's color scheme\n\tvec3 col = vec3(1.0) - sign(d)*vec3(0.1,0.4,0.7);\n\tcol *= 1.0 - exp(-3.0*abs(d));\n\tcol *= 0.8 + 0.2*cos(150.0*d);\n\tcol = mix( col, vec3(1.0), 1.0-smoothstep(0.0,0.015,abs(d)) );\n\tfragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}