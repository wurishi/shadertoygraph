{"ver":"0.1","info":{"id":"DdVBW3","date":"1698714724","viewed":34,"name":"matrixmessing","username":"boytoy","description":"messing with matrices","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["pixel","matrix","framerate"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float pixelation = 4.;\n\nconst int levels = 9;\nconst int size   = 3;\nconst float bright[size*size*levels] = float[size*size*levels](\n    0.,0.,0.,// l0\n    0.,0.,0.,\n    0.,0.,0.,\n    0.,0.,0.,// l1\n    0.,1.,0.,\n    0.,0.,0.,\n    1.,0.,0.,// \n    0.,0.,0.,\n    0.,0.,1.,\n    1.,0.,1.,// \n    0.,0.,0.,\n    1.,0.,1.,\n    1.,0.,1.,// \n    0.,1.,0.,\n    1.,0.,1.,\n    0.,1.,1.,// \n    0.,1.,0.,\n    1.,1.,1.,\n    1.,1.,1.,// \n    1.,0.,1.,\n    1.,1.,0.,\n    1.,1.,1.,// \n    1.,0.,1.,\n    1.,1.,1.,\n    1.,1.,1.,// \n    1.,1.,1.,\n    1.,1.,1.\n);\n\nfloat eval_bright(int i,int j){\n    return bright[i*9 + j];\n}\n\nint loc(vec2 uv, vec2 pixels){\n    ivec2 uvi = ivec2(floor(pixels * uv));\n    return 3*(uvi.y%3) + uvi.x%3;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 pixels = iResolution.xy/pixelation;\n    \n    vec2 uv_channel = (floor(pixels * uv) + 0.5)/pixels;\n    //vec2 uv_channel = uv;\n\n    // Time varying pixel color\n    vec3  col  = texture(iChannel0,uv_channel).rgb;\n    float luma = dot(vec3(0.2126,0.7152,0.0722),col);\n    int luma_level = int(floor(luma * float(levels) + 0.5));\n    \n    \n    float lum = eval_bright(luma_level,loc(uv,pixels));\n    vec3 out_ = vec3(lum) * normalize(col);\n    \n    // Output to screen\n    fragColor = vec4(out_,1.0);\n}","name":"Image","description":"","type":"image"}]}