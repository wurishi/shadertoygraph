{"ver":"0.1","info":{"id":"ctdyRS","date":"1699369912","viewed":35,"name":"tryagain","username":"ZProphete","description":"again","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["try"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":3,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n#define shininess 32.0\n#define ambient 0.8\n#define specular 0.25\n#define posX iMouse.x\n#define posY iMouse.y\n#define lightColor vec3(1.0, 0.7, 0.3)\n#define maskMultiplier 1.\n\nbool useMousePosition = false;  // Boolean variable to toggle between iMouse.xy and floats for X and Y positions\nfloat customX = 0.5;           // Custom X position (normalized)\nfloat customY = 0.5;           // Custom Y position (normalized)\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    vec2 mousePos; // = vec2(posX, posY) / iResolution.xy;\n    \n    if (useMousePosition) {\n        // Use iMouse.xy\n        mousePos = vec2(iMouse.x, iMouse.y) / iResolution.xy;\n    } else {\n        // Use custom X and Y positions\n        mousePos = vec2(customX, customY);\n    }\n    \n    // Calculate direction from the current pixel to the mouse position\n    vec2 dirToMouse = mousePos - uv + vec2(0.5, 0.5);\n    \n    // Calculate distance from the current pixel to the mouse position\n    float distanceToMouse = length(dirToMouse);\n\n    \n    // Calculate falloff based on the distance and radius to create a smooth transition at the edges of the point light\n    float falloff = smoothstep(0.0, 1.0, 1.0 - (distanceToMouse));\n    \n    // Sample depth and normal values\n    float depthValue = texture(iChannel2, uv).r;\n    vec3 normalValue = texture(iChannel3, uv).rgb;\n    \n    // Calculate lighting intensity based on depth and normal values\n    float lightingIntensity = max(dot(normalize(normalValue), vec3(0.0, 0.0, -1.0)), 0.0) * (1.0 - depthValue);\n\n    // Calculate specular reflection\n    vec3 viewDir = normalize(vec3(dirToMouse, 1.0));\n    vec3 lightDir = normalize(vec3(dirToMouse, 1.0)); // Light direction is from the current pixel to the cursor position\n    vec3 halfwayDir = normalize(lightDir + viewDir);\n    float spec = pow(max(dot(normalize(normalValue), halfwayDir), 0.0), shininess) * specular;\n\n    // Calculate final color with ambient, diffuse, and specular components, and apply light color\n    vec3 color = texture(iChannel0, uv).rgb;\n    vec3 finalColor = (ambient * color + lightingIntensity * falloff + spec) * lightColor;\n\n    // Apply the mask to the final color\n    float maskValue = texture(iChannel1, uv).r * maskMultiplier;\n    fragColor = vec4(finalColor * maskValue, 1.0);\n}\n\n","name":"Image","description":"","type":"image"}]}