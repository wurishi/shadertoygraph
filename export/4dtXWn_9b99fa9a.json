{"ver":"0.1","info":{"id":"4dtXWn","date":"1458717128","viewed":272,"name":"Keyer Test","username":"redbean","description":"http://gamedevelopment.tutsplus.com/tutorials/a-beginners-guide-to-coding-graphics-shaders--cms-23313\nFinal question using basic theory from 2D composition.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["chromakeyer"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","previewfilepath":"/media/ap/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 xy = fragCoord.xy / iResolution.xy;\n    \n    vec4 texColor = texture(iChannel0,xy);\n    vec4 bgtexColor = texture(iChannel1,xy);\n    \n    \n    //Basic Keyer.(patches the holed area with alpha 1)\n    //this should damage the original plates' hue or etc.\n\tif(texColor.r + texColor.b < texColor.g)\n    {\n        if(1.0-texColor.g < 0.5)\n        {\n            texColor.a = 0.0;\n        }\n        else\n        {\n    \t\ttexColor.a = 1.0-texColor.g;\n        }\n        if(texColor.a != 0.0)\n        {\n            texColor.a = 1.0;\n        }\n            \n    }\n    \n    //premult\n    texColor.r *= texColor.a;\n    texColor.g *= texColor.a;\n    texColor.b *= texColor.a;\n    \n    \n    //Nuke Merge node over operation.\n    //Foreground + (BackGround * (1-Foreground alpha))\n    vec4 finResult = texColor+(bgtexColor*(1.0-texColor.a));\n    \n    fragColor = finResult;\n    \n    \n    \n    \n}","name":"Image","description":"","type":"image"}]}