{"ver":"0.1","info":{"id":"XtSczh","date":"1507300825","viewed":94,"name":"MandelBar","username":"themasmo","description":"Three effect in one","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["fractal","oldschool","mandel","coloredbar"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 rotate(vec2 p, float ang){\n    float c = cos(ang), s = sin(ang);\n    return vec2(p.y * c - p.x * s, p.y * s + p.x * c);\n}\n\nfloat hash( vec2 p ) {\n\tfloat h = dot(p,vec2(127.1,311.7));\t\n    return fract(sin(h)*4758.5453123);\n}\n\nfloat noise( in vec2 p ) {\n    vec2 i = floor( p );\n    vec2 f = fract( p );\t\n\tvec2 u = f*f*(3.0-2.0*f);\n    return -1.0+2.0*mix( mix( hash( i + vec2(0.0,0.0) ), \n                     hash( i + vec2(1.0,0.0) ), u.x),\n                mix( hash( i + vec2(0.0,1.0) ), \n                     hash( i + vec2(1.0,1.0) ), u.x), u.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 position = 4.0*( fragCoord.xy / iResolution.xy )-2.0 ;\n    \n\n    \n\tfloat v=0.0;\n\tfloat ii=0.0;\n\tfloat rg=1.0;\n\tint f=0;\n\n\t// White\t\n\tfor(int i=0;i<20;i++)\n\t{\n\t\tvec2 n1=rg*vec2(sin(iTime+ii),cos(iTime+ii));\n\t\tvec2 n2=rg*vec2(cos(iTime+ii),sin(iTime+ii));\n\t\tvec2 pos=vec2(noise(n1)*2.0,noise(n2)*2.0);\n\t\tfloat l1 = 0.1/length(pos - position);\n\t\tif( f==0 )\n\t\t{\n\t\t\tv+=l1;\n\t\t\tf=0;\n\t\t}\n\t\tii+=0.1;\n\t}\n\t\n\t\n\tvec2 r=rotate(position,iTime);\n\tr*=1.0+sin(iTime)/4.0;\t// black\n\tfloat zim=0.0;\n\tfloat zre=0.0;\n\tfloat cre=r.x;\n\tfloat cim=r.y;\n\tfloat ite=0.0;\n\tfor(int i=0;i<32;i++)\n\t{\n\t\tite++;\n\t\tfloat dam=zre*zre-zim*zim+cre;\n\t\tzim=(abs(3.0*sin(iTime/10.0)))*zre*zim+cim;\n\t\tzre=dam;\n\t\tif( (zre*zre+zim*zim)>4.0)\n\t\t\tbreak;\n\t}\n\tv=pow(v,2.0);\n\tif(ite>30.0)\n\t{\n\t\tfloat rcolor = 0.0;\n\t\tfloat gcolor = 0.0;\n\t\tfloat bcolor = 0.0;\n\t\tfloat rg=0.5;\n\t\tfloat an=iTime*48.0;\n\t\tfloat ck=16.0+16.0*iMouse.x;\n\t\n\t\tfor(float i=0.0;i<16.0;i++)\n\t\t{\n\t\t\tfloat di=0.08;\n\t\t\tfloat y=rg*sin( (an+i*10.0)*3.141/180.0);\n\t\t\n\t\t\tif( position.y>y-di && position.y<y+di )\n\t\t\t{\n\t\t\t\tfloat c=1.0-abs(position.y-y)*10.0;\n\t\t\t\t\n\t\t\t\trcolor=c;\n\t\t\t\tgcolor=rcolor*(i/ck);\n\t\t\t\tbcolor=rcolor*(i/ck);\n\t\t\t}\n\t\t\n\t\t}\t\n\t\t\n\t\tfragColor = vec4( vec3( rcolor, gcolor , bcolor  ), 1.0 );\n\t}\n\telse\n\t{\n\t\tv=(ite+v)/32.0;\n\t\tfragColor = vec4(vec3(v),1.0);\n\t}    \n \n}","name":"Image","description":"","type":"image"}]}