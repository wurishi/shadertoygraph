{"ver":"0.1","info":{"id":"fsKyzD","date":"1654545338","viewed":328,"name":"Fractal Pump","username":"snolot","description":"fractal","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["fractal"],"hasliked":0,"parentid":"ttsBzM","parentname":"Aerial corridor"},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float Scale;\nfloat textur(vec3 p) {\n    p=abs(1.-mod(p,2.));\n    vec3 c=vec3(3.,4.,2.);\n\tfloat es=1000., l=0.;\n\tfor (int i = 0; i < 12; i++) { \n\t\t\tp = abs(p + c) - abs(p - c) - p; \n\t\t\tp/= clamp(dot(p, p), .5, 1.);\n\t\t\tp = p* -1.3 + c;\n        \tes=min(min(abs(p.x),abs(p.y)),es);\n\t}\n\treturn es*es*3.;\n}\n\nfloat map(vec3 p){\n    p=mod(p,2.)-1.;\n    p=abs(p)-1.;\n   if(p.x<p.z)p.xz=p.zx;\n   // p.x<p.z?p=p.zyx:p;\n    if(p.y<p.z)p.yz=p.zy;\n    if(p.x<p.y)p.xy=p.yx;\n    if(p.x>p.y)p.xy=-p.yx;\n    float s=1.;\n    \n    for(int i=0;i<10;i++)\n    {\n      //p.y -= abs(sin(iTime *.1));   \n      float r2=2./clamp(dot(p,p),.2,1.);\n      p=abs(p)*r2-vec3(.45,.2,  clamp(abs(sin(iTime*.7) * 4.2),3.,5.2));\n      s*=r2;\n    }\n    Scale=log2(s);\n    return length(p)/s;\n}\n\nvec3 TrackPath (float t)\n{\n  return vec3 (0.75 * sin (t), 3.35 + 0.15 * sin (0.8 * t), 0.75 * cos (0.5 * t));\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv=(2.*fragCoord-iResolution.xy)/iResolution.y;\n\tvec3 p,\n  \t\tro=TrackPath(iTime * .5),//vec3(-.5,0.,0.),//(.5+.2*sin(iTime*.03),.05*cos(iTime*.03),-.1*iTime),\n  \t\tw=normalize(vec3(.2,sin(iTime*.1),sin(iTime*.2))),\n  \t\tu=normalize(cross(w,vec3(sin(iTime*.1),1,0))),\n  \t\trd=mat3(u,cross(u,w),w)*normalize(vec3(uv,2));\n       // rd.x = (.5+.2*sin(iTime*.03),.05*cos(iTime*.03),-.1*iTime);\n  \tfloat h=.4,d,i;\n \tfor(i=1.;i<100.;i++)\n    {\n    \tp=ro+rd*h;\n    \td=map(p);\n    \tif(d<.001||h>10.)break;\n    \th+=d;\n\t}\n    \n    vec3 col =mix(vec3(.7),vec3(sin(Scale*2.5+vec3(1.,.7,0.))*.5+.5),0.5)*8./i;\n    col *=texture(iChannel0,p.xz*7.).xyz; \n\tfragColor.xyz = col;\n    //if(i<5.)fragColor.xyz=vec3(.5,.2,.1)*(5.-i);\n}\n","name":"Image","description":"","type":"image"}]}