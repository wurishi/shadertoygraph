{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":1,"type":"texture","id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"texture","id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"}}],"code":"#define pi 3.14159265359\n\nmat2 get_rotation_matirx(float rot) {\n    return mat2(\n        cos(rot), -sin(rot), \n        sin(rot), cos(rot)\n    );\n}\n\nvec2 rotate_uv(vec2 uv, mat2 rotation) {\n    uv -= 0.5;\n    uv.x = uv.x * iResolution.x / iResolution.y;\n    uv = rotation * uv;    \n    uv.x = uv.x / iResolution.x * iResolution.y;\n    uv += 0.5;\n    uv = abs(uv);\n    uv = step(1., uv) * 2. + sign(1.-uv) * uv;\n    return uv;\n}\n\n\nfloat speed = 7.;\nfloat rotation_speed = 25.;\nfloat rotation = 2.5;\n\nconst float samples = 15.;\nconst float power = 0.6;\nconst float shift = 2.;\n\nconst float glitch_count = 0.5;\nconst float glitch_speed = 5.;\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float ratio = (sin(speed*iTime) * 0.5 + 0.5) * step(0., sin(0.5 * speed*iTime + pi/4.));\n    \n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 forground = texture(iChannel0, uv);\n    \n    float start = .5 * texture(iChannel2, vec2(0.3, mod(glitch_count * uv.y + glitch_speed * iTime, 1.))).r;\n    float width = texture(iChannel2, vec2(0.2, mod(glitch_count * uv.y + glitch_speed * iTime+0.1, 1.))).r;\n    if (ratio > 0. && uv.y > start && uv.y < start + width) {\n        forground.r = mix(forground.r, 1., ratio);\n        forground.gb *= 1. + ratio;\n    }\n    \n    \n    //////////////////////////\n    ///      Rotation      ///\n    //////////////////////////\n    float angle = ratio * rotation * (0.5*sqrt(2.) - length(uv-0.5)) * sin(rotation_speed * iTime);\n    mat2 rotation = get_rotation_matirx(angle);\n    uv = rotate_uv(uv, rotation);\n    \n    //////////////////////////\n    ///        Blur        ///\n    //////////////////////////\n    float blur = ratio;\n    vec4 background = vec4(vec3(0),1);\n\tfor(float i=0.; i<samples; i++) {\n        vec2 direction = vec2(0.5)-uv;\n        direction *= blur * pow(length(direction)*0.5, power);\n        direction *= i/samples;\n        \n        vec2 pos = uv + shift*direction*blur;\n        vec3 col = texture(iChannel1, pos).rgb;        \n        \n        background.rgb += col/samples;\n    }\n    //////////////////////////\n        \n    fragColor = mix(background, forground, forground.a);\n}\n\n\n\n\n\n\n\n\n\n","name":"Image","description":"","type":"image"},{"outputs":[{"channel":0,"id":"4dXGR8"}],"inputs":[{"channel":0,"type":"video","id":"XdfGRr","filepath":"/media/a/35c87bcb8d7af24c54d41122dadb619dd920646a0bd0e477e7bdc6d12876df17.webm","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"float th = 20.0; // threshold\nfloat a2 = 1.2;\n\nfloat getAlpha(vec4 c){\n\treturn 1.0 - th*(c.g-a2*(max(c.r,c.b)));\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tvec4 fg = texture(iChannel0,uv);\n    \n    float alpha = step(0.5, getAlpha(fg));\n    \n\tfragColor = vec4(fg.rgb, alpha);\n}","name":"Buffer A","description":"","type":"buffer"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":true,"mFlagMusicStream":false},"info":{"id":"wlKfRy","date":"1734012490","viewed":16,"name":"Beats.No.5","username":"avartation","description":"asdfg","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["asdfgh"],"hasliked":0,"parentid":"","parentname":""}}