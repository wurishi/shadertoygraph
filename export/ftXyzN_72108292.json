{"ver":"0.1","info":{"id":"ftXyzN","date":"1673963653","viewed":37,"name":"silentmimsy/Truchet","username":"silentmimsy","description":"beginner","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["beginner"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat Hash21(vec2 p) {\n\tp = fract(p*vec2(234.34, 435.345));\n    p += dot(p, p+34.23);\n    return fract(p.x*p.y);\n}\n\nfloat Circle(vec2 uv, vec2 p, float r, float thickness, float blur){\n\n    float d = length(uv-p);\n\n    float r1 = r + thickness;\n    \n    float r2 = r - thickness;\n\n    float c1 = smoothstep( r1 , r1 - blur, d);\n    \n    float c2 = smoothstep( r2 + blur , r2, d);\n    \n    return c1-c2;\n\n}\n\nfloat rand(vec2 coord){\n    return fract(sin(dot(coord, vec2(12.9898, 78.233)))* 43758.5453123);\n}\n\nfloat noise(vec2 coord){\n    vec2 i = floor(coord);\n    vec2 f = fract(coord);\n\n    float a = rand(i);\n    float b = rand(i + vec2(1.0, 0.0));\n    float c = rand(i + vec2(0.0, 1.0));\n    float d = rand(i + vec2(1.0, 1.0));\n\n    vec2 cubic = f * f * (3.0 - 2.0 * f);\n\n    return mix(a, b, cubic.x) + (c - a) * cubic.y * (1.0 - cubic.x) + (d - b) * cubic.x * cubic.y;\n}\n\n#define SHADES 4\n\nfloat layer(float f, float lower, float upper, float blur){\n    float x = smoothstep(lower-blur, lower, f);\n    \n    float y = smoothstep(upper, upper-blur, f);\n    \n    \n    return x*y;\n\n}\n\nvec3 col1 = vec3(78,44,8)/255.;\nvec3 col2 = vec3(62,104,44)/255.;\nvec3 col3 = vec3(39,39,39)/255.;\nvec3 truchetCol = vec3(39,39,39)/255.;\n\nfloat mod1(float a, float b){\n\n    return a - (b * floor(a/b));\n\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n\n    vec3 col = vec3(0);\n\n\n    uv += 0.5*(iTime-sin(iTime));\n    \n    \n    uv *= 5.;\n    vec2 gv = fract(uv)-.5;\n    vec2 id = floor(uv);\n\n    float f = noise(uv);\n    \n\n    float blur = 0.003;\n    \n    float lay1 = layer( f,  0.,  0.5,  blur);\n    \n    float lay2 = layer( f,  0.5,  1.,  blur);\n    \n    vec3 c1 = lay1*col1;\n    vec3 c2 = lay2*col2;\n\n    float n = Hash21(id); \n    \n    vec3 truchet = vec3(0);\n    \n    vec2 centre1;\n    vec2 centre2;\n    \n    if (n>0.5) {\n    \n        centre1 = vec2(0.5,0.5);\n        centre2 = vec2(-0.5,-0.5);\n    \n    }\n    else {\n    \n        centre1 = vec2(-0.5,0.5);\n        centre2 = vec2(0.5,-0.5);\n    \n    }\n    \n    float thickness = 0.15;\n    float truchetBlur = 0.01;\n    \n    truchet += Circle(gv, centre1, 0.5, thickness, truchetBlur);\n    truchet += Circle(gv, centre2, 0.5, thickness, truchetBlur);\n    \n    \n    \n    if ( truchet != vec3(0,0,0) ){\n    \n        col = vec3(39,39,39)/255.;\n    \n    }\n    else {\n    \n        col = vec3(c1+ c2 );  \n    \n    }\n    \n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}