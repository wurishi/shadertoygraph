{"ver":"0.1","info":{"id":"4tjyRz","date":"1507204111","viewed":351,"name":"Drawing pencil","username":"josemorval","description":"A simple pencil drawing a curve. Based on https://es.pinterest.com/pin/353603008234410610/","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["2d","simple","line","curve","draw","pencil","art","minimal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const mat2 rot180 = mat2(cos(3.14159),sin(3.14159),-sin(3.14159),cos(3.14159));\n\nvec3 rgbcol(float r, float g, float b){\n  return vec3(r,g,b)/256.;\n}\n\nfloat sineCurve(vec2 p){\n  return p.x-sin(3.*p.y-8.*iTime);\n}\n\nvec2 gradSineCurve(vec2 p){\n  vec2 h = vec2( 0.1, 0.0 );\n    return vec2( sineCurve(p+h.xy) - sineCurve(p-h.xy),\n                 sineCurve(p+h.yx) - sineCurve(p-h.yx) )/(2.0*h.x);\n}\n\nfloat boxRegion(vec2 p,float a, float b){\n  return min(1.-abs(a*p.x),1.-abs(b*p.y));\n}\n\nfloat pseudoCircle(vec2 p,float r, float alpha){\n  float f = pow(abs(p.x),alpha)+pow(abs(p.y),alpha);\n  return r-pow(abs(f),1./alpha);\n}\n\nfloat triangle(vec2 p,float a,float b){\n  return min(p.y,min(p.x-p.y+0.5,-p.x-p.y+0.5));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\n  float angle = sin(8.*iTime);\n  mat2 m = mat2(cos(angle),sin(angle),-sin(angle),cos(angle));\n\n  vec2 p = fragCoord.xy/iResolution.xy-0.5;\n  p.x*=iResolution.x/iResolution.y;\n  p*=0.5;\t\n  \n  //Curve\n  vec2 pcurve = 10.*p;\n  float lineCurve = abs(sineCurve(pcurve));\n  vec2 gradLineCurve = gradSineCurve(pcurve);\n  lineCurve = lineCurve/length(gradLineCurve);\n  lineCurve = smoothstep(0.025,0.04,lineCurve)+step(0.,-pcurve.y);\n  lineCurve = clamp(lineCurve,0.,1.);\n\n  //Base pencil\n  vec3 colBasePencil;\n\n  float height = cos(8.*iTime);\n  height*=height;\n\n  vec2 ppencil = (m*(p-vec2(0.0,0.05*height+0.07)));\n  float basePencil = boxRegion(ppencil,15.,5.);\n  basePencil = step(0.5,basePencil);\n  basePencil = max(step(0.,pseudoCircle(30.*ppencil+vec2(0.,-3.),1.,2.5)),basePencil);\n\n  float bandcircle = step(0.,length(ppencil)-0.05)*step(0.,0.07-length(ppencil));\n  colBasePencil = vec3(1.0)*basePencil;\n  colBasePencil = mix(colBasePencil,rgbcol(102.,204.,255.),bandcircle);\n  colBasePencil = mix(colBasePencil,0.85*colBasePencil,step(0.02,-ppencil.x)*basePencil);\n\n  //Corner pencil\n  vec3 colCornerPencil;\n  float cornerPencil = step(0.,triangle(vec2(15.,12.)*(rot180*ppencil+vec2(0.,-0.1)),1.,2.));\n\n  colCornerPencil = rgbcol(244.,240.,194.)*cornerPencil;\n  colCornerPencil = mix(colCornerPencil,rgbcol(102.,204.,255.),step(0.125,-ppencil.y)*cornerPencil);\n  colCornerPencil = mix(colCornerPencil,0.85*colCornerPencil,step(0.0,-ppencil.x-0.6*ppencil.y-0.08)*cornerPencil);\n\n  //Layer combination\n  vec3 col = rgbcol(45.,53.,89.);\n  col = mix(rgbcol(102.,204.,255.),col,lineCurve);\n  col = mix(col,colBasePencil,basePencil);\n  col = mix(col,colCornerPencil,cornerPencil);\n\n  fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}