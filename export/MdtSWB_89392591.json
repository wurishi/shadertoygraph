{"ver":"0.1","info":{"id":"MdtSWB","date":"1461342777","viewed":198,"name":"Spirale (Figure in report)","username":"imagicien","description":"Render I have done for a report for project 'Le Lounge' at Universite de Sherbrooke.\n\nClick on the figure, then move the cursor left/right to see how the spiral effect is acheived.","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["spiral"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// For a report regarding project \"Le Lounge\"\n// By Carl Lemaire, UniversitÃ© de Sherbrooke\n\n#define TWO_PI 6.28318530718\n#define X0 0.5\n#define Y0 0.5\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.y;\n    \n    float x = -(uv.x - X0) * 2.0;\n    float y = -(uv.y - Y0) * 2.0;\n\n    float rho = sqrt(x*x + y*y);\n    float phi = atan(y, x);\n\n    float normPhi = phi / TWO_PI + 0.5;\n    float spiralFactor = clamp(1.25 - 1.5 * (iMouse.x / iResolution.x), 0.0, 1.0);\n    float rhoSpir = rho * (spiralFactor * normPhi + 1.0);\n    float nbTurns = abs(ceil(log2(rhoSpir)));\n    float progOnBranch = fract(log2(rhoSpir));\n    \n    vec3 couleur = vec3(0.5);\n    float damRayRes = 4.0;\n    float damAngRes = damRayRes * 8.0;\n    \n    if (rhoSpir < 1.0)\n    {\n        if (nbTurns < 1.0)\n        {\n            if (progOnBranch > 0.95)\n            {\n                fragColor = vec4(0.0, 1.0, 1.0, 1.0);\n                return;\n            }\n            \n            couleur = vec3(1.0);\n        }\n        else if (nbTurns < 2.0)\n        {\n            if (progOnBranch > 0.95)\n            {\n                fragColor = vec4(1.0, 0.0, 0.0, 1.0);\n                return;\n            }\n            \n            couleur = vec3(1.0);\n        }\n        else\n        {\n        \tif (rho < 0.01)\n                fragColor = vec4(0.0);\n            else\n                fragColor = vec4(0.7);\n    \t\treturn;\n        }\n    }\n    else\n    {\n        if (rho < 1.0 && rho > 0.99)\n        \tfragColor = vec4(0.0);\n        else if(rho < 0.99)\n        \tfragColor = vec4(0.7);\n        else\n        \tfragColor = vec4(1.0);\n    \treturn;\n    }\n\t\n    float timeOffset = fract(iTime) * 2.0;\n    \n    float damierRayon = mod(floor(progOnBranch * damRayRes), 2.0) * 2.0 - 1.0;\n    float damierAngle = mod(floor(normPhi * damAngRes - timeOffset), 2.0) * 2.0 - 1.0;\n    float damier = clamp(damierRayon * damierAngle, 0.0, 1.0);\n    \n\tfragColor = vec4(couleur * damier, 1.0);\n}","name":"Image","description":"","type":"image"}]}