{"ver":"0.1","info":{"id":"slfGRS","date":"1643095332","viewed":125,"name":"twirl-2d effects(1)","username":"shicz86","description":"2d effects\nps: move mouse position and click on screen can change the result.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["2deffects"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define RANGE 0.2\n#define ANGLE 0.5\n#define SPEED 3.\n\nmat2 rotate(float a)\n{\n    float s = sin(a);\n    float c = cos(a);\n    return mat2(c,-s,s,c);\n}\n\nvec2 twirl(vec2 uv,vec2 center,float range,float angle)\n{\n    float d = distance(uv,center);\n    uv -= center;\n    //d = clamp(-angle/range*d+angle,0.,angle); // cause flashing\n    d = smoothstep(0.,range,range-d) * angle;\n    uv *= rotate(d);\n    uv += center;\n    return uv;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.y;\n    vec2 mouse = iMouse.xy/iResolution.y;\n    float time = sin(iTime*SPEED);\n    \n    if(iMouse.xy == vec2(0))\n    {\n        mouse = vec2(0.5);\n        mouse.x *= iResolution.x/iResolution.y;\n    }\n    uv = twirl(uv,mouse,RANGE,ANGLE*time);\n\n    vec4 color = texture(iChannel0,uv);\n    fragColor = color;\n}\n","name":"Image","description":"","type":"image"}]}