{"ver":"0.1","info":{"id":"dlyyzD","date":"1699984406","viewed":14,"name":"Spiral Plane","username":"Peace","description":"Spiral Plane","likes":0,"published":3,"flags":0,"usePreview":0,"tags":["spiral","plane"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float SDF(vec2 p)\n{\n    float l = length(p) * 8.0 - iTime;\n    vec2 p2 = vec2(sin(l), cos(l));\n    float d = pow(distance(p, p2), 0.5);\n    return d;\n}\n\nvec3 getNormal(vec2 uv) {\n    vec2 e = vec2(0.01, 0);\n    float nx = (SDF(uv - e.xy) - SDF(uv + e.xy)) / (4.0 * e.x);\n    float ny = (SDF(uv - e.yx) - SDF(uv + e.yx)) / (4.0 * e.x);\n    vec3 n = normalize(vec3(nx, ny, -2.));\n    return n;\n}\n\nvec3 gradient(float z, float d) {\n    return mix(\n\t\tvec3(0.4, 0.7, 1.0),\n\t\tmix(\n\t\t\tvec3(0.1, 0.0, 1.0),\n\t\t\tvec3(1),\n\t\t\tz * 0.34\n\t\t),\n\t\td * d * 0.5\n\t);\n}\n\nfloat diffuse(vec3 normal, vec3 light_dir)\n{\n    return max(0.0, dot(normal, light_dir));\n}\n    \nfloat specular(vec3 light_dir, vec3 ray_dir, vec3 normal)\n{\n    vec3 halfway = normalize(light_dir + ray_dir);\n    return max(0.0, dot(normal, halfway));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float mr = min(iResolution.x, iResolution.y);\n    vec2 uv = (fragCoord * 2. - iResolution.xy) / mr;\n    \n    vec3 ro = vec3(0, 0, -1);\n    float d = SDF(uv);\n    \n    vec3 p = vec3(uv, d);\n    vec3 n = getNormal(uv);\n    \n    vec3 lp = vec3(6, 8, -4);\n    vec3 ld = normalize(lp - p);\n    vec3 vd = normalize(ro - p);\n    \n    float s = specular(ld, vd, n);\n    float spec = pow(s, 8.0);\n    spec += pow(s, 32.0);\n    spec += pow(specular(normalize(vec3(5, -10, -2)), vd, n), 2.);\n    float diff = diffuse(n, vec3(0, 0, -1));\n    float light = spec + diff;\n    \n    vec3 col = gradient(light, d);\n    //col = vec3(s);\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}