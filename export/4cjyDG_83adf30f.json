{"ver":"0.1","info":{"id":"4cjyDG","date":"1722914572","viewed":51,"name":"waldo-canino","username":"jorge2017a2","description":"waldo-canino","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["waldocanino"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//por jorge2017a2\n//church-2d\n//waldo-canino\n//--5-ago-2024-\n//referencia\n//https://iquilezles.org/articles/distfunctions2d\n///\n#define antialiasing(n) n/min(iResolution.y,iResolution.x)\n#define S(d,b) smoothstep(antialiasing(1.5),0. , d - (b) )\n#define S2(d,b) smoothstep(8.0*antialiasing(1.5),0.,d - (b) )\n#define S3(d,b) smoothstep(0.125/antialiasing(0.5),0. , d - (b) )\n\n\n#define opU2(d1, d2) ( d1.x < d2.x ? d1 : d2 )\n\n\n#define PI     3.14159265\n#define TWO_PI 6.28318530\n\n\n//iq\nfloat dot2( in vec2 v ) { return dot(v,v); }\nfloat dot2( in vec3 v ) { return dot(v,v); }\nfloat ndot( in vec2 a, in vec2 b ) { return a.x*b.x - a.y*b.y; }\n\n\nvec3 c1=vec3(0.996,0.396,0.020);\nvec3 c2=vec3(0.631,0.890,0.976);\nvec3 c21= vec3(0.90937,0.27124,0.08577);\n\n\nfloat opRep1D( float p, float c )\n\t{ float q = mod(p+0.5*c,c)-0.5*c; return  q ;}    \n\n\nfloat Sdf_I(float distA, float distB)\n\t{ return max(distA, distB);}\nfloat Sdf_U(float distA, float distB)\n\t{ return min(distA, distB);}\nfloat Sdf_D(float distA, float distB)\n\t{ return max(distA, -distB);}\n\n\n\nvec3 DFB(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S3( distObj,0.0));\n  colOut = mix(colOut,vec3(0.0),S3(abs( distObj)-0.005,0.0));\n  return colOut;\n}\n\n\nvec3 DFS(vec3 pColObj, vec3 colOut, float distObj )\n{ colOut = mix(colOut,pColObj ,S( distObj,0.0)); return colOut;\n  return colOut;\n}\n\n///oneshade    \nvec2 Rotate(in vec2 p, in vec2 o, in float r) \n{   float c = cos(r), s = sin(r);\n    return (p - o) * mat2(c, -s, s, c) + o;\n}\n\nfloat sdBox( in vec2 p, in vec2 b )\n{ vec2 d = abs(p)-b;  return length(max(d,0.0)) + min(max(d.x,d.y),0.0);  }\n\n\n\nfloat sdCircle( vec2 p, float r )\n{ return length(p) - r;}\n\nfloat divf(float a, float b)\n{\n    //evita crash por 1/0.0 =Infinito=error, en compilar\n    if(b==0.0)\n    {b=0.00001;}\n    return a/b;\n}\n\n\nfloat sdSegment( in vec2 p, in vec2 a, in vec2 b )\n{  vec2 pa = p-a, ba = b-a;\n    float h = clamp( divf( dot(pa,ba),dot(ba,ba)), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\n\nfloat sdTrapezoid( in vec2 p, in float r1, float r2, float he )\n{\n    vec2 k1 = vec2(r2,he);\n    vec2 k2 = vec2(r2-r1,2.0*he);\n    p.x = abs(p.x);\n    vec2 ca = vec2(p.x-min(p.x,(p.y<0.0)?r1:r2), abs(p.y)-he);\n    vec2 cb = p - k1 + k2*clamp( dot(k1-p,k2)/dot2(k2), 0.0, 1.0 );\n    float s = (cb.x<0.0 && ca.y<0.0) ? -1.0 : 1.0;\n    return s*sqrt( min(dot2(ca),dot2(cb)) );\n}\n\nfloat sdTriangleIsosceles( in vec2 p, in vec2 q )\n{\n    p.x = abs(p.x);\n    vec2 a = p - q*clamp( dot(p,q)/dot(q,q), 0.0, 1.0 );\n    vec2 b = p - q*vec2( clamp( p.x/q.x, 0.0, 1.0 ), 1.0 );\n    float s = -sign( q.y );\n    vec2 d = min( vec2( dot(a,a), s*(p.x*q.y-p.y*q.x) ),\n                  vec2( dot(b,b), s*(p.y-q.y)  ));\n    return -sqrt(d.x)*sign(d.y);\n}\n\n\n\nvec3 waldo(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.5540984,0.5);\nmed=vec2(0.1459016,0.04754099);\nhe=4.098361E-02;\nfloat d1= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.547541,0.4360656);\nmed=vec2(0.1459016-0.01,0.0147541+0.02);\nfloat d2=sdBox(p-A,med);\n\nA=vec2(0.5245901,0.4081967);\nmed=vec2(0.08852459,0.1213115);\nhe=0.0147541;\nfloat d3= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.5737705,0.4081967);\nmed=vec2(0.08852459,0.1213115);\nhe=0.0147541+0.02;\nfloat d4= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.4721311,0.3606557);\nmed=vec2(0.03770492,0.1180328);\nfloat d5=sdBox(p-A,med);\n\nA=vec2(0.547541,0.3606557);\nmed=vec2(0.03770492,0.1180328);\nfloat d6=sdBox(p-A,med);\n\nA=vec2(0.4295082,0.252459);\nmed=vec2(0.0295082,0.0147541);\nfloat d7=sdBox(p-A,med);\n\nA=vec2(0.5868853,0.2557377);\nmed=vec2(0.0295082,0.0147541);\nfloat d8=sdBox(p-A,med);\n\nA=vec2(0.4327869-0.04,0.2688525-0.015);\nmed=vec2(0.05901639,0.0295082+0.025);\nang=180.000 *PI/180.0;\npr = Rotate(p-A, med/2.0, ang);\nfloat d9=sdTriangleIsosceles(pr,med);\n\nA=vec2(0.5868853,0.2688525);\nmed=vec2(0.05901639,0.0295082);\nang=180.000 *PI/180.0;\npr = Rotate(p-A, med/2.0, ang);\nfloat d10=sdTriangleIsosceles(pr,med);\n\nA=vec2(0.5836065,0.5065574);\nmed=vec2(0.1147541,0.03934426);\nhe=3.114754E-02;\nfloat d11= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.6983607,0.5377049);\nmed=vec2(0.02131147,0.06229508);\nang=20.0*PI/180.0;\npr=Rotate(p-A,med/2.0,ang);\nfloat d12=sdBox(pr,med);\n\nA=vec2(0.7114754,0.6+0.02);\nmed=vec2(0.02131147,0.03770492);\nfloat d13=sdBox(p-A,med);\n\nA=vec2(0.6688524-0.035,0.6786885+0.02);\nmed=vec2(0.02131147,0.08688524);\nang=-40.0*PI/180.0;\npr=Rotate(p-A,med/2.0,ang);\nfloat d14=sdBox(pr,med);\n\nA=vec2(0.5704918+0.01,0.747541+0.01);\nmed=vec2(0.02459016+0.01,0.0557377);\nhe=0.01311475+0.01;  //1.311475E-02;\nfloat d15= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.609836,0.7442623);\nmed=vec2(0.02131147,0.01311475);\nfloat d16=sdBox(p-A,med);\n\nA=vec2(0.6229508,0.3573771);\nmed=vec2(0.03770492,0.08688524);\nfloat d17=sdBox(p-A,med);\n\nA=vec2(0.6360656,0.2819672);\nmed=vec2(0.05245902,0.01639344);\nfloat d18=sdBox(p-A,med);\n\nA=vec2(0.6426229-0.15,0.3016393-0.011);\nmed=vec2(0.104918,0.03278688);\nang=180.0 *PI/180.0;\npr = Rotate(p-A, med/2.0, ang);\nfloat d19=sdTriangleIsosceles(pr,med);\n\nfloat d100=d1;\nd100=Sdf_U(d100,d2);\nd100=Sdf_U(d100,d3);\nd100=Sdf_U(d100,d4);\nd100=Sdf_U(d100,d5); //pata izq\nd100=Sdf_U(d100,d6); //pata der\nd100=Sdf_U(d100,d7); //pie izq\nd100=Sdf_U(d100,d8); //pie izq \nd100=Sdf_U(d100,d9); //pie izq\nd100=Sdf_U(d100,d10);\nd100=Sdf_U(d100,d11); //atas\nd100=Sdf_U(d100,d12); //cola\nd100=Sdf_U(d100,d13); //cola\nd100=Sdf_U(d100,d14); //cola\nd100=Sdf_U(d100,d15); //cola\nd100=Sdf_U(d100,d16); //\nd100=Sdf_U(d100,d17); //pata\nd100=Sdf_U(d100,d18);  //pie\nd100=Sdf_U(d100,d19);\ncolout= DFB( c1, colout, d100);\n    return colout;\n}\n\n\nvec3 cuello(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.4163934,0.4983607);\nmed=vec2(0.05245902,0.01967213);\nang=-41.0*PI/180.0;\npr=Rotate(p-A,med/2.0,ang);\nfloat d1=sdBox(pr,med);\ncolout= DFB(vec3(1.0,0.0,0.0), colout, d1);\n    return colout;\n}\n\n\nvec3 cabeza(vec2 p, vec3 colout)\n{\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.3409836,0.5016393);\nmed=vec2(0.02459016,0.05901639);\nhe=1.967213E-02;\nfloat d1= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.3573771,0.5901639);\nmed=vec2(0.07704918,0.07704918);\nfloat d2=sdBox(p-A,med);\n\nA=vec2(0.2459016+0.02,0.5967213);\nmed=vec2(0.06885246, 0.04590164);\nfloat d3=sdBox(p-A,med);\n\nA=vec2(0.4622951,0.704918);\nmed=vec2(0.01967213+0.009,0.0557377);\nfloat d4=sdBox(p-A,med);\n\nA=vec2(0.4393443-0.04,0.6754099);\nmed=vec2(0.1114754,0.07540984);\nang=-90.000 *PI/180.0;\npr = Rotate(p-A, med/2.0, ang);\nfloat d5=sdTriangleIsosceles(pr,med);\n\nA=vec2(0.4262295,0.7278689+0.02);\nmed=vec2(0.02459016,0.05409836);\nhe=0.0295082;\nfloat d6= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.4721311,0.7081967);\nmed=vec2(0.04590164,0.01967213);\nang=65.0*PI/180.0;\npr=Rotate(p-A,med/2.0,ang);\nfloat d7=sdBox(pr,med);\n\nA=vec2(0.2327869,0.7622951);\nmed=vec2(0.02131147+0.02,0.04918033);\nhe=2.786885E-02;\nfloat d8= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.2983606+0.02,0.7327869-0.03);\nmed=vec2(0.03114754,0.05737705+0.01);\nhe=2.786885E-02;\nang=50.000*PI/180.0;\npr = Rotate(p-A, med/2.0, ang);\nfloat d9=sdTrapezoid(pr,med.x, med.y, he);\n\nA=vec2(0.3114754,0.6803279-0.03);\nmed=vec2(0.05409836,0.02622951);\nhe=1.803279E-02;\nfloat d10= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.3344262-0.01,0.6754099);\nmed=vec2(0.02786885,0.03278688);\nfloat d11=sdBox(p-A,med);\n\nA=vec2(0.1934426+0.04,0.6540983);\nmed=vec2(0.05245902,0.02295082);\nhe=0.0147541+0.01;\nfloat d12= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.1606557,0.604918);\nmed=vec2(0.05245902,0.03442623);\nhe=0.0147541;\nang=-90.000*PI/180.0;\npr = Rotate(p-A, med/2.0, ang);\nfloat d13=sdTrapezoid(pr,med.x, med.y, he);\n\nA=vec2(0.1639344,0.652459-0.02);\nmed=vec2(0.0557377-0.015,0.0295082);\nang=-230.000 *PI/180.0;\npr = Rotate(p-A, med/2.0, ang);\nfloat d14=sdTriangleIsosceles(pr,med);\n\nA=vec2(0.2885246+0.01,0.6426229-0.01);\nr1=0.00655738;\nfloat d15=sdCircle(p-A,r1);\n\nA=vec2(0.2918033,0.5442623);\nmed=vec2(0.0557377,0.0295082);\nfloat d16=sdTriangleIsosceles(p-A,med);\n\nA=vec2(0.2459016,0.4590164);\nmed=vec2(0.06229508-0.035,0.0295082+0.015);\nang=180.0 *PI/180.0;\npr = Rotate(p-A, med/2.0, ang);\nfloat d17=sdTriangleIsosceles(pr,med);\n\nA=vec2(0.2852459-0.02,0.4852459-0.01);\nmed=vec2(0.0295082+0.03,0.01803279);\nang=135.0*PI/180.0;\npr=Rotate(p-A,med/2.0,ang);\nfloat d18=sdBox(pr,med);\n\nA=vec2(0.2852459+0.08,0.4918033-0.035);\nmed=vec2(0.04426229+0.01,0.00819672+0.03);\nang=135.0*PI/180.0;\npr=Rotate(p-A,med/2.0,ang);\nfloat d19=sdBox(pr,med);\n\n//color de cada objeto\n\nfloat d100=Sdf_U(d1,d2);\nd100=Sdf_U(d100,d3);\nd100=Sdf_U(d100,d4);\nd100=Sdf_U(d100,d5); //oreja 2\nd100=Sdf_U(d100,d6); //oreja 2\nd100=Sdf_U(d100,d7); //oreja 2\nd100=Sdf_U(d100,d8);  //oreja\nd100=Sdf_U(d100,d9); //oreja\nd100=Sdf_U(d100,d10); //oreja\nd100=Sdf_U(d100,d11); //oreja\nd100=Sdf_U(d100,d12);  //sup nariz\nd100=Sdf_U(d100,d13); //nariz frente\n//d100=Sdf_U(d100,d14); //nariz\n//d100=Sdf_U(d100,d15);   //ojo\nd100=Sdf_U(d100,d16);\nd100=Sdf_U(d100,d17); //boca\nd100=Sdf_U(d100,d18); //boca\nd100=Sdf_U(d100,d19); //cuello parte\n\n\ncolout= DFB( c1, colout, d100);\ncolout= DFB(vec3(0.0), colout, d15);\ncolout= DFB(vec3(0.0), colout, d14);\n    return colout;\n}\n\n\n\nvec3 plato(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.2098361,0.2967213);\nmed=vec2(0.1081967,0.04426229);\nhe=2.786885E-02;\nfloat d1= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.2098361,0.252459);\nmed=vec2(0.05901639,0.1081967);\nhe=1.967213E-02;\nfloat d2= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.2098361,0.2721311);\nmed=vec2(0.04426229,0.01967213);\nfloat d3=sdBox(p-A,med);\n\n\nvec3 c40= vec3(0.76339,0.16564,0.2921);\nvec3 c41= vec3(0.79862,0.17529,0.29915);\nvec3 c42= vec3(0.71856,0.93446,0.74832);\n\nfloat d100=Sdf_U(d1, d2);\nd100=Sdf_U(d100, d3);\ncolout= DFB( c42, colout, d100);\n    return colout;\n}\n\n\nvec3 plato2(vec2 p, vec3 colout)\n{\n\nvec2 A,B, med,pr;\nfloat dfin;\nfloat  r1,ang, he ;\n\nA=vec2(0.2131148,0.2852459);\nmed=vec2(0.1491803+0.01,0.0557377+0.03);\nhe=1.967213E-02;\nfloat d1= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.2098361,0.1967213);\nmed=vec2(0.1081967,0.152459);\nhe=1.639344E-02;\nfloat d2= sdTrapezoid(p-A, med.x, med.y, he);\n\nA=vec2(0.2131148,0.2393443);\nmed=vec2(0.1508197,0.02622951+0.01);\nfloat d3=sdBox(p-A,med);\n\nA=vec2(0.2163934,0.2360656);\nmed=vec2(0.1098361,0.04262295);\nfloat d4=sdBox(p-A,med);\n\nvec3 c43= vec3(0.42781,0.03154,0.4839);\nvec3 c44= vec3(0.95027,0.90038,0.21762);\nvec3 c45= vec3(0.9827,0.49004,0.1189);\nvec3 c46= vec3(0.54402,0.29862,0.61924);\n\nfloat d100=Sdf_U(d1, d2);\nd100=Sdf_U(d100, d3);\nd100=Sdf_U(d100, d4);\ncolout= DFB( c46, colout,d100);\n    \n    return colout;\n}\n\n\nvec3 waldoTdo(vec2 p, vec3 colout)\n{   colout=cabeza(p,colout);\n    colout=waldo(p, colout);\n    colout=cuello(p,colout);\n    colout=plato2(p,colout);\n    colout=plato(p,colout);   \n    return colout;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{   vec2 uv = ( 2. * fragCoord - iResolution.xy ) / iResolution.y;\n    uv-=vec2(-1.7,-1.0);\n    float esc=0.6;\n    uv*=esc;\n    vec2 uv0=uv;\n    \n    vec3 col=vec3(0.0,0.76,0.2)*0.65;\n    uv.x= mod(uv.x+iTime*0.125, 0.8 );\n    col=waldoTdo(uv,col);\n    \n    col=pow(col,  vec3(0.554545));\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}