{"ver":"0.1","info":{"id":"sstXz8","date":"1632670013","viewed":53,"name":"Reaction-diffusion test -kqnx","username":"meteotrix","description":"it's a test. based on https://www.karlsims.com/rd.html\nSometimes the huge timestep rips it apart, sometimes it doesn't :D\nOnly the first couple seconds count.","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["test","reactiondiffusion"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{    \n    vec2 uv = fragCoord/iResolution.xy;    \n    vec3 col = vec3(0.0);\n    \n    //render\n    col = texture(iChannel0, uv).rgb;\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec3 col = vec3(0.0);\n    float ts = 1.0 / iResolution.x; //approx texel_size\n    \n    if(iTime<0.1) //initial conditions\n    { \n        float a = -sin(distance(uv.xy, vec2(0.5,0.5))*50.0);\n        a = pow(a,4.0);\n        float b = (1.0-distance(uv.xy, vec2(0.25,0.25))) /*+ (1.0-distance(uv.xy, vec2(0.75,0.75)))*/;\n        b = pow(b,1.0); \n        col = vec3(a, 0.0, b); //a in the red channel, b in the blue channel\n    }\n    else //simulate\n    {\n        vec3 neighbor_avg = (texture(iChannel0, uv + vec2(-ts,-ts)).rgb *0.05 + texture(iChannel0, uv+ vec2(0,-ts)).rgb*0.2 + texture(iChannel0, uv+ vec2(+ts,-ts)).rgb*0.05\n                                + texture(iChannel0, uv+ vec2(-ts,0)).rgb*0.2 - texture(iChannel0, uv+ vec2(0,0)).rgb  + texture(iChannel0, uv+ vec2(+ts,0)).rgb *0.2\n                                +texture(iChannel0, uv+ vec2(-ts,+ts)).rgb*0.05 + texture(iChannel0, uv+ vec2(0,+ts)).rgb*0.2 + texture(iChannel0, uv+ vec2(+ts,+ts)).rgb*0.05);\n        float prev_a = texture(iChannel0, uv).r;\n        float prev_b = texture(iChannel0, uv).b;\n        float da = 0.1;\n        float db = 1.0;\n        float k = 0.1;\n        float f = 0.01;\n        float a = prev_a + (da * (neighbor_avg.r)*(neighbor_avg.r) - (prev_a*prev_b*prev_b) + f*(1.0-prev_a)) * iTimeDelta*50.0;\n        float b = prev_b + (db * (neighbor_avg.b)*(neighbor_avg.b) + (prev_a*prev_b*prev_b) - (k+f)*prev_b) * iTimeDelta*50.0;\n        col = vec3(a,0,b);\n    }\n    \n    \n    \n    fragColor = vec4(col,1.0);\n}","name":"Buffer A","description":"","type":"buffer"}]}