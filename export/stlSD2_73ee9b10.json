{"ver":"0.1","info":{"id":"stlSD2","date":"1626631567","viewed":108,"name":"Distortion CA thingy","username":"SnoopethDuckDuck","description":"Takes a few seconds to stop shaking, \nPress R to reset the shader","likes":3,"published":1,"flags":48,"usePreview":0,"tags":["water","cool","cellularautomata"],"hasliked":0,"parentid":"7dXSzB","parentname":"Fork Fork GameO SnoopethDu 201"},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float hash1( float n )\n{\n    return fract(sin(n)*138.5453123);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \nfloat v =  18. * texelFetch( iChannel0, ivec2(fragCoord), 0 ).x;\nvec4 col;\n vec2 uv = fragCoord/iResolution.xy;\n\nif (v < 0.25)\ncol = vec4(0., 0., 0., 1.);\nelse if (v < 0.5)\ncol = vec4(1., 0., 1., 1.);\nelse if (v < 0.75)\ncol = vec4(1., 1., 0., 1.);\nelse if (v < 1.)\ncol = vec4(0., 1., 1., 1.);\n\ncol -= 0.5;\nvec2 offset = 20. * (1. + hash1(v)) * col.b * vec2(col.r,col.g) / iResolution.xy;\nvec4 col2 = texture(iChannel1, uv + vec2(0., 0.04 * iTime) + offset);\n\nvec4 h = vec4(0.5, 0.5, 0.5, 1.);\nfloat tau = 2. * 3.14159;\ncol2 = h + h * vec4(cos(tau * col2.r), cos(tau *( col2.g + 0.333)),\ncos(tau * (col2.b + 0.666)),1);\n// These 2 are kinda trippy:\n// fragColor = 2. * col2 *(1.-col);\n// fragColor = col2 + 0.5 * (1. + cos(iTime)) * col.g;\nfragColor = col2 + 0.05;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGRr","filepath":"/presets/tex00.jpg","previewfilepath":"/presets/tex00.jpg","type":"keyboard","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define KEYBOARD iChannel1\n#define KEY_RESET 82\n\n\nfloat Cell( in ivec2 p )\n{\n    ivec2 r = ivec2(textureSize(iChannel0, 0));\n    p = (p+r) % r;\n    \n   return texelFetch(iChannel0, p, 0 ).x;\n}\n\nfloat hash1( float n )\n{\n    return fract(sin(n)*138.5453123);\n}\n\nbool key_down(int key) {\n    return int(texelFetch(KEYBOARD, ivec2(key, 0), 0).x) == 1;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    ivec2 px = ivec2( fragCoord );\n    \n    if (key_down(KEY_RESET) || iFrame==0 ) {\n      float f = 0.1 * hash1(fragCoord.x*13.0+ 10.131 * iTime + hash1(fragCoord.y*73.1));\n    fragColor = vec4( f, 0.0, 0.0, 0.0 );\n        return;\n    }\n    \n   float t = Cell(px + ivec2(0,-1));\n   float b = Cell(px + ivec2(0,1));\n   float l = Cell(px + ivec2(-1,0));\n   float r = Cell(px + ivec2(1,0));   \n   \n   float e = Cell(px);\n\n   float lt = 0.5 * (l + t);\n   float tr = 0.5 * (t + r);\n   float rb = 0.5 * (r + b);\n   float bl = 0.5 * (b +l);\n   float k = 0.5 * max(max(lt,tr),max(rb,bl)) + 0.5 * 0.25 * (t + b + l + r);\n   \n   float j = abs(e-k); \n\n   if (e>k)\n    e -= 0.06;//+ 0.5 * k;\n   else \n    e += 0.001;\n  \n   e += 0.9 * j;\n\n   float s = 0.25 * (b + l + t + r);\n\n   if (e <= 0.000)\n    e = k + 0.01 * s;\n\n   e = max(min(e,1.),0.);\n\n   fragColor = vec4( e, 0.0, 0.0, 0.0 );\n}","name":"Buffer A","description":"","type":"buffer"}]}