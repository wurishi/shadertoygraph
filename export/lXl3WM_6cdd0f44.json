{"ver":"0.1","info":{"id":"lXl3WM","date":"1707750985","viewed":91,"name":"quaternionic rational functions","username":"Boogaloo","description":"Julia sets for a family of rational functions over the quaternions. Mouse x/y controls the j/k axes of what 2D slice you're looking at.","likes":3,"published":1,"flags":32,"usePreview":0,"tags":["fractal","julia","quaternion"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"go{O=tex(C0,ivec2(I));}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define go void mainImage( out vec4 O, in vec2 I )\n#define R iResolution\n#define T iTime\n#define M iMouse\n#define C0 iChannel0\n#define C1 iChannel1\n#define tex(x,y) texelFetch(x,y,0)","name":"Common","description":"","type":"common"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec3 hsv( in vec3 c ){\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n\trgb = rgb*rgb*(3.0-2.0*rgb);\n\treturn c.z * mix( vec3(1.0), rgb, c.y);}\n//smooth hsv from iq https://www.shadertoy.com/view/MsS3Wc\n\nvec4 qmult(vec4 a,vec4 b){return vec4(a.x*b.x-a.y*b.y-a.z*b.z-a.w*b.w,a.x*b.y+a.y*b.x+a.z*b.w-a.w*b.z,a.x*b.z-a.y*b.w+a.z*b.x+a.w*b.y,a.x*b.w+a.y*b.z-a.z*b.y+a.w*b.x);}\n\nvec4 qinv(vec4 a){return (1./(a.x*a.x+a.y*a.y+a.z*a.z+a.w*a.w))*vec4(a.x,-a.y,-a.z,-a.w);}\n\nvec4 qpow(vec4 q,int n){\nvec4 p = q;\nfor(int i=1;i<n;i++){p=qmult(p,q);}\nreturn p;}\n\nvec4 iter(vec4 a){return qmult(qpow(a,7),qinv(qpow(a,3)-3.*qpow(a,2)))+vec4(.3*sin(T*.25),sin(T/6.),sin(T*.1),sin(T/14.));}\ngo{\n\nO=vec4(0.);\nvec2 N=M.xy==vec2(0.,0.)?R.xy*.5:M.xy;\nvec4 v = vec4(.006*(I.x-.5*R.x),.006*(I.y-.5*R.y),.006*(N.x-.5*R.x),.006*(N.y-.5*R.y));\nfor(float i=1.;i<=300.;i++){\nif(length(v)>1000.||isnan(length(v))){O=vec4(hsv(vec3(.02*(i+log(log(min(10e20,length(v)))))+.5,1.,min(.6,1.-1./log(i)))),0.);return;}\nv=iter(v);\n}\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"go{O=.4*tex(C0,ivec2(I))+.6*tex(C1,ivec2(I));}","name":"Buffer B","description":"","type":"buffer"}]}