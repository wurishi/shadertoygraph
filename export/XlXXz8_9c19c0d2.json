{"ver":"0.1","info":{"id":"XlXXz8","date":"1434291860","viewed":616,"name":"Playing with FBM","username":"Lallis","description":"Playing around with some linear value noise FBM.\nEDIT: Added some gradient color.","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["noise","fbm","linear","value"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[],"code":"#define time iTime\n\nfloat noise3D(vec3 p)\n{\n\treturn fract(sin(dot(p ,vec3(12.9898,78.233,126.7378))) * 43758.5453)*2.0-1.0;\n}\n\nfloat linear3D(vec3 p)\n{\n\tvec3 p0 = floor(p);\n\tvec3 p1x = vec3(p0.x+1.0, p0.y, p0.z);\n\tvec3 p1y = vec3(p0.x, p0.y+1.0, p0.z);\n\tvec3 p1z = vec3(p0.x, p0.y, p0.z+1.0);\n\tvec3 p1xy = vec3(p0.x+1.0, p0.y+1.0, p0.z);\n\tvec3 p1xz = vec3(p0.x+1.0, p0.y, p0.z+1.0);\n\tvec3 p1yz = vec3(p0.x, p0.y+1.0, p0.z+1.0);\n\tvec3 p1xyz = p0+1.0;\n\t\n\tfloat r0 = noise3D(p0);\n\tfloat r1x = noise3D(p1x);\n\tfloat r1y = noise3D(p1y);\n\tfloat r1z = noise3D(p1z);\n\tfloat r1xy = noise3D(p1xy);\n\tfloat r1xz = noise3D(p1xz);\n\tfloat r1yz = noise3D(p1yz);\n\tfloat r1xyz = noise3D(p1xyz);\n\t\n\tfloat a = mix(r0, r1x, p.x-p0.x);\n\tfloat b = mix(r1y, r1xy, p.x-p0.x);\n\tfloat ab = mix(a, b, p.y-p0.y);\n\tfloat c = mix(r1z, r1xz, p.x-p0.x);\n\tfloat d = mix(r1yz, r1xyz, p.x-p0.x);\n\tfloat cd = mix(c, d, p.y-p0.y);\n\t\n\t\n\tfloat res = mix(ab, cd, p.z-p0.z);\n\t\n\treturn res;\n}\n\nfloat fbm(vec3 p)\n{\n\tfloat f = 0.5000*linear3D(p*1.0); \n\t\t  f+= 0.2500*linear3D(p*2.01); \n\t\t  f+= 0.1250*linear3D(p*4.02); \n\t\t  f+= 0.0625*linear3D(p*8.03);\n\t\t  f/= 0.9375;\n\treturn f;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\n\tvec2 uv = fragCoord/iResolution.xy*2.0-1.0;\n\tuv.x*=1.78;\n\tfloat ang = time*0.1;\n    mat2 rot = mat2(cos(ang),-sin(ang),sin(ang),cos(ang));\n\tuv*=16.0*(sin(time*0.1)+1.5)*rot;\n\t\n\tfloat f = fbm(vec3(uv,time)+fbm(vec3(uv,time)+fbm(vec3(uv,time))))*0.5+0.5;\n    \n    vec3 col, col2;\n    col = vec3(fbm(vec3(uv*f*0.3,time*0.75)));\n    col2 = col;\n    \n\tcol *= vec3((sin(time*0.2)*0.5+1.5),1.0,0.6);\n    col +=  vec3(0.1,0.7,0.8)*f;\n    \n    col2 *= vec3(0.9,1.0,(sin(time*0.2)*0.5+1.5));\n    col2 += vec3(0.8,0.5,0.1)*f;\n    \n\tcol = mix(col, col2, smoothstep(-50.0,50.0,uv.x));\n    \n    col *= mix(0.5,sin(time*0.5)*0.25+1.0,length(col));\n\tfragColor = vec4(col,1.0);\n}","name":"","description":"","type":"image"}]}