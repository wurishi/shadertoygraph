{"ver":"0.1","info":{"id":"WldSRM","date":"1580645237","viewed":280,"name":"Trailz","username":"hanabi","description":"Leaving trail...","likes":0,"published":3,"flags":32,"usePreview":0,"tags":["trail"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"  \nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = fragCoord/iResolution.xy;\n    fragColor = texture(iChannel0, uv);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"struct Ball {\n\tvec2 pos;\n    vec2 speed;\n    float size;\n    vec4 color;\n};\n\nvoid move(inout Ball box, float fFrame) {\n    float xPos = box.pos.x + box.speed.x * fFrame;\n    box.pos.x = mod(xPos, iResolution.x);\n    float tx = floor(mod(xPos / iResolution.x, 2.0));\n    box.pos.x = ((1. - tx) * box.pos.x) + (tx * (iResolution.x - box.pos.x));\n    \n    float yPos = box.pos.y + box.speed.y * fFrame;\n    box.pos.y = mod(yPos, iResolution.y);\n    float ty = floor(mod(yPos / iResolution.y, 2.0));\n    box.pos.y = ((1. - ty) * box.pos.y) + (ty * (iResolution.y - box.pos.y));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    float fFrame = float(iFrame) / 1.;\n    \n    Ball[] balls = Ball[](\n        Ball(\n            iResolution.xy / 2.,\n            vec2(-2.9, 2.1),\n            8.,\n            vec4(1., 0., 0., 1.)\n        ),\n        Ball(\n            iResolution.xy / 3.,\n            vec2(-2.3, -1.3 * iResolution.x / iResolution.y),\n            8.,\n            vec4(0., 1., 0., 1.)\n        ),\n        Ball(\n            iResolution.xy / 4.,\n            vec2(2.3, -1.9 * iResolution.y / iResolution.x),\n            8.,\n            vec4(0., 0., 1., 1.)\n        )\n    );\n    \n    //fragColor = vec4(0., 0., 0., 1.0);\n    vec2 uv = fragCoord/iResolution.xy;\n    fragColor = 0.99 * texture(iChannel0, uv);\n    \n    for (int i = 0; i < balls.length(); i++) {\n        Ball ball = balls[i];\n    \tmove(ball, fFrame);\n        float d = distance(fragCoord, ball.pos);\n        if (d < ball.size) {\n            fragColor += ball.color;\n        }\n    }\n}","name":"Buf A","description":"","type":"buffer"}]}