{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"texture","id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"#define BLUR 0.25\n#define ZOOM 8.0\n\n// 2x upsample test\n// texp() is a point sample of a 'texture'; tex() then shows us what bilinear would do \n// then the bottom half of the screen is 4 bilinear taps averaged\n// note that on reasonably anti-aliased input - ie the white circles, I think the bottom \n// third looks considerably nicer.\n\n// now with 3 filters: point, bilinear, 4x bilinear (mini guassian)\n\n\nvec4 texp(vec2 uv) {\n\tuv=floor(uv);\t\n\t// contrasty procedural texture...\n\tfloat l=clamp( (length(mod(uv,64.0)-32.0))-16.0,0.0,1.0);\t\n\tvec2 cb=floor(uv/64.0);\t\n\t//return vec4(l,0,l,1);\n\t// look up texture\n\treturn mix(vec4(mod(cb.x+cb.y,2.0)),fract(2.0*texture(iChannel0, (uv+0.5)/iChannelResolution[0].xy)),l);\n}\n\nvec4 tex(vec2 uv) {\t\n\tvec2 f=fract(uv);\t\n\treturn mix(\n\t\tmix(texp(uv+vec2(0.0,0.0)),texp(uv+vec2(1.0,0.0)),f.x),\n\t\tmix(texp(uv+vec2(0.0,1.0)),texp(uv+vec2(1.0,1.0)),f.x),\n\t\tf.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tif (uv.x>0.5) uv/=ZOOM;\n\tuv*=iResolution.xy;\n\t\n\t\n\tuv-=iMouse.xy;\n\tuv=floor(uv);\n\t\n\nvec4 dd=vec4(1.0,1.0,-1.0,-1.0) * BLUR;\t\n\tvec4 t = tex(uv*0.5 );\n\tvec4 t0 = tex(uv*0.5+dd.xy );\t\n\tvec4 t1 = tex(uv*0.5+dd.zy );\n\tvec4 t2 = tex(uv*0.5+dd.xw );\n\tvec4 t3 = tex(uv*0.5+dd.zw );\n\tif (fragCoord.y > 2.0*iResolution.y / 3.0)\n\t\tt=texp(uv*0.5); // point sample\n\telse if (fragCoord.y < iResolution.y  / 3.0)\n\t\tt = (t0+t1+t2+t3)*0.25;\n\tif (mod(fragCoord.y,iResolution.y/3.0)==0.5)\n\t\tt=vec4(1.0);\t\n\tfragColor = t;\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XdX3Df","date":"1380281379","viewed":790,"name":"2x upsample filter test","username":"mmalex","description":"quick test trying to visualize a 4-tap upsample filter vs a single bilinear sample. WIP\n(ZOOM allows us to zoom in on the virtual screen pixels)\nclick to pan\n","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["test","filter"],"hasliked":0,"parentid":"","parentname":""}}