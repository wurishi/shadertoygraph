{"ver":"0.1","info":{"id":"Ndd3zM","date":"1629400506","viewed":119,"name":"the pursuit","username":"nexor","description":".","likes":8,"published":1,"flags":32,"usePreview":0,"tags":["2d","sdf","bezier","rgb"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  fragColor = texelFetch(iChannel0,ivec2(fragCoord),0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define resolution iResolution.xy\n#define time iTime\n#define frame iFrame\n\n#define pi 3.14159\n\nmat2 rot(float a){float c=cos(a),s=sin(a);return mat2(c,-s,s,c);}\n\nvec2 bezier(vec2 v[4],int i,float t,out vec2 tangent)\n{\n  vec2 a=mix(v[i%4],v[(i+1)%4],t);\n  vec2 b=mix(v[(i+1)%4],v[(i+2)%4],t);\n  vec2 c=mix(v[(i+2)%4],v[(i+3)%4],t);\n  vec2 d=mix(a,b,t);\n  vec2 e=mix(b,c,t);\n  tangent=normalize(e-d);\n  return mix(d,e,t);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n  vec2 coord=fragCoord.xy;\n  vec2 uv =(2.* coord- resolution.xy)/\n    max(resolution.x,resolution.y);\n    vec2 q = uv;\n  vec3 col=vec3(0);\n  vec3 buf=texelFetch(iChannel0,ivec2(coord),0).rgb;\n\n  vec2 v[]=vec2[](\n    vec2(-.25),\n    vec2(-.25,.25),\n    vec2(.25),\n    vec2(.25,-.25)\n    );\n  float fps = 60.;\n    \n  float ft=float(frame)/fps,\n  ft2=float(frame+35)/fps;\n  float t=fract(ft/3.),\n  t2=fract(ft2/3.);\n  int i=4-int(ft/3.)%4,\n  i2=4-int(ft2/3.)%4;\n  vec2 tan1=vec2(0),tan2=vec2(0);\n  vec2 bez=bezier(v,i,t,tan1),\n  bez2=bezier(v,i2,t2,tan2);\n  \n  //bez = vec2(cos(pi*1.*ft),sin(pi*2.*ft)*.35)*.2;\n  //bez2 = vec2(cos(pi*1.*ft2),sin(pi*2.*ft2)*.35)*.2;\n  \n  float d=1e3;\n\n\n  d=min(d,length(uv-bez)-.025/1.5);\n  d=smoothstep(0.,fwidth(uv.y),d);\n  float a=atan(uv.y,uv.x);\n  a+=atan(tan2.y,tan2.x);\n  col+=1.-d;\n  \n  for(int i=0;i<3;++i)\n  {\n    vec2 p=uv;\n    vec2 k=\n      vec2(tan2.y,-tan2.x)\n    *.025\n    *float(i-1);\n  float j1=\n    pow(sin(ft*pi/1.5-.45)*.5+.5,3.)*3.;\n    float j2=\n      pow(sin(ft*pi/1.5\n        +pi/1.5-.25)*.5+.5,9.);\n        \n        \n  vec2 sq=abs(q+k*rot(a)*j2*3.)-.275;\n  d=max(sq.x,sq.y)+length(max(sq,0.));\n  d=abs(d)-.0125*.25;\n  d=min(d,length(p+k*j1-bez2)-.0125);\n  d=smoothstep(0.,fwidth(uv.y),d);\n  col[i]+=1.-d;\n  }\n  col=pow(col,vec3(1./2.2));\n  col=col+buf*.9;\n\n  fragColor = vec4(col, 1.0);\n}\n","name":"Buffer A","description":"","type":"buffer"}]}