{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"texture","id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"code":"vec2 texel;\nvec2 pixel;\n\nfloat factor;\nfloat radius;\n\nvoid globalInit(){\n\ttexel = 1.0/iChannelResolution[0].xy;\n\tpixel = 1.0/iResolution.xy;\n\n\tfactor = iMouse.y/iResolution.y * 64.0;\t\n\tradius = iMouse.x/iResolution.x * 2.0;\n\t}\n\nvec4 tex(vec2 uv){\n\treturn pow(texture(iChannel0, uv), vec4(2.2));\n\t}\n\nvec4 accumCol = vec4(0.0);\nvec4 accumW = vec4(0.0);\n\nconst float mas = 3.0;\n\nvoid add(vec2 uv, float i, float j){\n    vec2 offset = pixel * vec2(i, j);\n\tvec4 col = tex(uv + offset * radius);\n\tvec4 bokeh = vec4(1.0) + pow(col, vec4(4.0)) * vec4(factor);\n\taccumCol += col * bokeh;\n\taccumW += bokeh;\n\t}\n\nvec4 blur(vec2 uv){\n\n\tfor (float j = -7.0 + mas; j <= 7.0 - mas; j += 1.0)\n\t\tfor (float i = -7.0 + mas; i <=7.0 - mas; i += 1.0){\n\t\t\tadd(uv, i, j);\n\t\t\t}\n    \n    for (float i = -5.0 + mas; i <=5.0 - mas; i+=1.0){\n        add(uv, i, -8.0 + mas);\n        add(uv, i, 8.0 - mas);\n    \t}\n    for (float j = -5.0 + mas; j <=5.0 - mas; j+=1.0){\n        add(uv, -8.0 + mas, j);\n        add(uv, 8.0 - mas, j);\n    \t}\n    \n    for (float i = -3.0 +mas; i <=3.0 -  mas; i+=1.0){\n        add(uv, i, -9.0 + mas);\n        add(uv, i, 9.0 - mas);\n    \t}\n    for (float j = -3.0 + mas; j <=3.0 - mas; j+=1.0){\n        add(uv, -9.0 + mas, j);\n        add(uv, 9.0 - mas, j);\n    \t}\n\n\treturn accumCol/accumW;\n\t}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    globalInit();\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\t\n\t\tfragColor = pow(blur(vec2(0.0, 1.0) + uv * vec2(1.0, -1.0)),1.0/vec4(2.2));\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"XsfSRr","date":"1395611281","viewed":2238,"name":"fake bokeh","username":"casty","description":"Cheap bokeh for brute force blurs. Use the mouse:\nY: bokeh\nX: blur","likes":36,"published":1,"flags":0,"usePreview":1,"tags":["bokeh"],"hasliked":0,"parentid":"","parentname":""}}