{"ver":"0.1","info":{"id":"ftGcWG","date":"1662061630","viewed":68,"name":"Draw Circle segment","username":"mororo250","description":"Very basic shader","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["primitives"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.14159265358979323846264338327950288;\nconst float toRad = PI / 180.0f;\nvec2  startPos = vec2(0.5f, 0.0f);\nvec2  dir = vec2(0.0f, 1.0f);\nconst float fov = 60.0f;\nconst vec2 center = vec2(0.5f, 0.5f);\n\n// Z = 0\n// return z axis component\nfloat Cross2(vec2 lhs, vec2 rhs)\n{\n    return lhs.x * rhs.y - lhs.y * rhs.x;\n}\n\nvec2 Rotate(vec2 result, float angle)\n{\n    float coss = cos(angle);\n    float sinn = sin(angle);\n\n    float px = result.x * coss - result.y * sinn;\n    result.y = result.x * sinn + result.y * coss;\n    result.x = px;\n    \n    return result;\n}\n\nfloat Noise(float x)\n{\n    return sin(2.0f * x) + sin(PI * x);\n}\n\nvoid update()\n{\n    float inX = iTime;\n    float inY = 10.0f + iTime;\n    vec2 noise = vec2(Noise(inX), Noise(inY));\n    \n    startPos = vec2(cos(iTime)/2.0f + 0.5f, sin(iTime)/2.0f + 0.5f);\n    dir = (center - startPos + noise/4.0f);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    update();\n    \n    float angle = fov * toRad / 2.0f;\n    vec2 pointDir = uv - startPos;\n    vec2 leftEdge = Rotate(dir, -angle);\n    vec2 rightEdge = Rotate(dir, angle);\n    \n    fragColor = vec4(0.7f, 0.35f, 0.0f, 1.0f);\n    \n    if (dot(dir, pointDir) <= 0.0f)\n        return;\n                \n    if (sign(Cross2(leftEdge, pointDir)) == sign(Cross2(pointDir, rightEdge)))\n    {\n        float blending =  1.0f - length(pointDir);\n        blending *= blending;\n        blending *= blending;\n\n        fragColor.rgb = mix(fragColor.rgb, vec3(1.0f), blending);\n        // Todo: Add anti-aliasing.\n    }\n}","name":"Image","description":"","type":"image"}]}