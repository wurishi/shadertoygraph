{"ver":"0.1","info":{"id":"WdVcRD","date":"1602349678","viewed":242,"name":"bad trip","username":"Cyberfined","description":"Bad trip illustration with kaleidoscope","likes":1,"published":3,"flags":64,"usePreview":0,"tags":["kaleidoscope","trip"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XlSGDc","filepath":"https://soundcloud.com/crocoloko/sex-drugs-goa-trance","previewfilepath":"https://soundcloud.com/crocoloko/sex-drugs-goa-trance","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"mat2 rotM(float a) { float c = cos(a), s = sin(a); return mat2(c, -s, s, c); }\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat noise(vec2 p){\n\tvec2 ip = floor(p);\n\tvec2 u = fract(p);\n\tu = u*u*(3.0-2.0*u);\n\t\n\tfloat res = mix(\n\t\tmix(rand(ip),rand(ip+vec2(1.0,0.0)),u.x),\n\t\tmix(rand(ip+vec2(0.0,1.0)),rand(ip+vec2(1.0,1.0)),u.x),u.y);\n\treturn res*res;\n}\n\nvec3 randColor(vec2 co) {\n\tfloat r = noise(co*vec2(97.777, 123.7973));\n    float g = noise(co * vec2(r, 89.7897) + vec2(11.8, 97.6767));\n    float b = noise(vec2(r, g)*vec2(11.1317, 77.3443));\n    return vec3(r, g, b);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n    vec2 mouse = iMouse.xy/iResolution.xy;\n\n    float a = (5./6.)*3.1415;\n    vec2 n = vec2(cos(a), sin(a));\n    float fft = cos(texture(iChannel0, vec2(-abs(uv.x), uv.y)).x);\n    \n    uv.x -= .5;\n    float scale = 1.;\n    for(int i = 0; i < 9; i++) {\n        uv.x += .5;\n        uv *= 3.;\n        scale *= 3.;\n        uv = abs(uv);\n        uv *= rotM(.1*iTime + .5*fft);\n        uv.x -= 1.5;\n        uv -= 2.*n*min(0., dot(uv, n));\n    }\n\n    vec3 col = randColor(uv/scale*0.5+.1*iTime + .2*fft);\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}