{"ver":"0.1","info":{"id":"WtlfW4","date":"1644027330","viewed":106,"name":"Rotating Gears","username":"gabrielfr2001","description":"rotating gears","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["gears"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define DEFAULT_SMOOTH 0.004\n#define PI 3.14159265358979323846\n\nfloat circle(vec2 c, vec2 p, float r, float s){\n\treturn 1.0 - smoothstep(0.0, s, distance(c, p) - r);\n}\nfloat noise(vec2 n){\n\treturn fract(dot(sin(n*1147.8976), vec2(9192.28, 1918.71))); \n}\nfloat trueNoise(vec2 n){\n\treturn noise(n * noise(n));\n}\nfloat angle(vec2 a, vec2 b){\n\treturn dot(a, b)/(length(a) * length(b)) * (a.y > b.y ? 1.0 : -1.0);\n}\nfloat smoothNoisePane(vec2 n, float q){\n    vec2 f = smoothstep(0.0, 1.0, fract(q * n));\n    vec2 z = floor(q * n);\n    float r1 = trueNoise(z + vec2(0.0, 0.0));\n    float r2 = trueNoise(z + vec2(1.0, 0.0));\n    float r3 = trueNoise(z + vec2(0.0, 1.0));\n    float r4 = trueNoise(z + vec2(1.0, 1.0));\n    float x = mix(mix(r1, r2, f.x), mix(r3, r4, f.x), f.y);\n    return x;\n}\nfloat cloudNoise(vec2 ns){\n\tfloat col = 0.0;\n    float q = 10.;\n    col += smoothNoisePane(ns + vec2(7.32, 1.12), q) * 0.5;\n    col += smoothNoisePane(ns + vec2(8.67, 2.03), q * 2.0) * 0.25;\n    col += smoothNoisePane(ns + vec2(9.83, 3.56), q * 4.0) * 0.125;\n    col += smoothNoisePane(ns + vec2(10.61, 4.83), q * 8.0) * 0.0625;\n    return clamp(col, 0.0, 1.0);\n}\n\nvec3 gear(vec2 c, vec2 p, float ic, float rad, float d, float s, float off){\n    float r = rad + 0.02 * pow(clamp(sin(off + iTime * s + d * PI * acos(angle(c - p,vec2(1.0, 0.0) ))), 0.0, 1.0), 0.2);\n    float innerCircle = 1.0 - circle(c, p, ic , DEFAULT_SMOOTH);\n    float dd = clamp(distance(c, p) * 2.5, 0.0, 1.0);\n    float z = circle(c, p, r, DEFAULT_SMOOTH) * innerCircle;\n    vec3 eng = vec3(1.0 - dd, 0.0, dd) * z * innerCircle;\n    vec3 light = (0.25 + 0.05 * sin(iTime )) * circle(c, p, rad, 0.07) * vec3(0.8, 0.1, 0.7);\n\treturn mix(vec3(1.0), vec3(dd, 0.0, 1.0 - dd) * z, cloudNoise(p)) * z + light;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 ns = (fragCoord - 0.5*iResolution.xy)/iResolution.x;\n    ns *= 1.0;\n    vec3 col = vec3(0.0);\n    \n    vec2 offset = vec2(sin(iTime * 10.), cos(iTime * 10.)) * 0.003;\n  \n    col += gear(vec2(0.225, 0.0) + offset, ns, 0.075, 0.1, 3.19, -20.0, 0.0);\n    col += gear(vec2(-0.225, 0.0) + offset, ns, 0.075, 0.1, 3.19, -20.0, 0.0);\n    col += gear(vec2(0.0, 0.0) + offset, ns, 0.075, 0.1, 3.19, 20.0, 0.0);\n    \n    col += gear(vec2(0.225, 0.225) + offset, ns, 0.075, 0.1, 3.19, 20.0, 0.0);\n    col += gear(vec2(-0.225, 0.225) + offset, ns, 0.075, 0.1, 3.19, 20.0, 0.0);\n    col += gear(vec2(0.0, 0.225) + offset, ns, 0.075, 0.1, 3.19, -20.0, 0.0);\n    \n    col += gear(vec2(0.225, -0.225) + offset, ns, 0.075, 0.1, 3.19, 20.0, 0.0);\n    col += gear(vec2(-0.225, -0.225) + offset, ns, 0.075, 0.1, 3.19, 20.0, 0.0);\n    col += gear(vec2(0.0, -0.225) + offset, ns, 0.075, 0.1, 3.19, -20.0, 0.0);\n    \n    col += gear(vec2(0.45, 0.225) + offset, ns, 0.075, 0.1, 3.19, -20.0, 0.0);\n    col += gear(vec2(0.45, 0.0) + offset, ns, 0.075, 0.1, 3.19, 20.0, 0.0);\n    col += gear(vec2(0.45, -0.225) + offset, ns, 0.075, 0.1, 3.19, -20.0, 0.0);\n    \n    col += gear(vec2(-0.45, 0.225) + offset, ns, 0.075, 0.1, 3.19, -20.0, 0.0);\n    col += gear(vec2(-0.45, 0.0) + offset, ns, 0.075, 0.1, 3.19, 20.0, 0.0);\n    col += gear(vec2(-0.45, -0.225) + offset, ns, 0.075, 0.1, 3.19, -20.0, 0.0);\n    \n    fragColor = vec4(col, 1.0);\n}","name":"Image","description":"","type":"image"}]}