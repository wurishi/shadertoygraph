{"ver":"0.1","info":{"id":"wlc3z8","date":"1575565413","viewed":544,"name":"Glowing tunnel","username":"ad_lucem","description":"Another glowing tunnel...","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","tunnel","glow"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define R iResolution\n#define T iTime\n#define PI 3.141593\n#define DtR 0.01745\n\nvec3 rgb2hsv(vec3 c)\n{\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\n// From iq - https://www.shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb_smooth( in vec3 c )\n{\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n\n\trgb = rgb*rgb*(3.0-2.0*rgb); // cubic smoothing\t\n\n\treturn c.z * mix( vec3(1.0), rgb, c.y);\n}\n\nfloat tunnel(vec3 p)\n{\n    p.z+=T;\n    p.xy+=sin(p.z)*.5+sin(p.xz*12.)*.05+sin(p.zy*20.)*.025; \n    return 1.-length(p.xy);\n}\n\nfloat map(vec3 p)\n{\n    return tunnel(p);\n}\n\nvoid mainImage( out vec4 O, in vec2 U )\n{\n    vec2 uv = (2.*U-R.xy)/R.y;\n    \n    vec3 cz = normalize(vec3(0,0,1));\n    vec3 cx = normalize(cross(cz,vec3(0,1,0)));\n    vec3 cy = normalize(cross(cx,cz));\n    \n    vec3 z = vec3(cx*uv.x + cy*uv.y + cz*.15);\n    vec3 pos = vec3(0);\n    \n    float d = 0.;\n    float att = 0.;\n    \n    for(int i = 0; i < 256; ++i)\n    {\n        d=map(pos);\n        if(d < .0001) break;\n        if(d > 10000.0)break;\n        pos+= z * d;\n        att+=0.2/(abs(d)+0.2);\n    }\n    \n    vec3 color = rgb2hsv(vec3(.75,.2,0.10));\n    color.r=pos.z*0.01+sin(-T*0.05);\n    color = hsv2rgb_smooth(color);\n    \n    if(d < 10000.0)\n    {\n        color *= 0.3 + att*0.006;\n    }\n    \n   \t//color=pow(color,vec3(0.4545));\n    color*=1.0-length(uv);\n    \n    O = vec4(color,1);\n}","name":"Image","description":"","type":"image"}]}