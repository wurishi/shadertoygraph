{"ver":"0.1","info":{"id":"XscXWH","date":"1458929273","viewed":199,"name":"Lab Reflection","username":"Yoshimaster96","description":"Better reflection due to an approximation of the Lab color model.","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["reflection","lab"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsX3zn","filepath":"/media/a/94284d43be78f00eb6b298e6d78656a1b34e2b91b34940d02f1ca8b22310e8a0.png","previewfilepath":"/media/ap/94284d43be78f00eb6b298e6d78656a1b34e2b91b34940d02f1ca8b22310e8a0.png","type":"cubemap","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 tolab(vec3 rgb)\n{\n    vec3 xyz = vec3(1.5*rgb.x+rgb.y+0.75*rgb.z,\n          0.5*rgb.x+2.5*rgb.y+0.25*rgb.z,\n                  3.25*rgb.z)/3.25;\n    return vec3(xyz.y,xyz.x-xyz.y,xyz.y-xyz.z);\n}\n\nvec3 torgb(vec3 lab)\n{\n    vec3 xyz = vec3(lab.x+lab.y,lab.x,lab.x-lab.z);\n    return vec3(2.5*xyz.x-xyz.y-0.5*xyz.z,\n                -0.5*xyz.x+1.5*xyz.y,\n                xyz.z);\n}\n\nvec3 multlab(vec3 a,vec3 b)\n{\n    vec3 laba = tolab(a);\n    vec3 labb = tolab(b);\n    return torgb(vec3(laba.x*labb.x,(laba.yz+labb.yz)/2.0));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = vec4(0.0);\n\tvec2 uv = fragCoord.xy/iResolution.xy;\n    uv = uv*2.0-vec2(1.0);\n    if(length(uv)<1.0)\n    {\n        vec3 nrm = vec3(uv,sqrt(1.0-pow(length(uv),2.0)));\n        vec3 col = texture(iChannel0,reflect(vec3(0.0,0.0,-1.0),nrm)).rgb;\n\t\tfragColor = vec4(multlab(col,vec3(1.0,0.9,0.5)),1.0);\n    }\n}","name":"Image","description":"","type":"image"}]}