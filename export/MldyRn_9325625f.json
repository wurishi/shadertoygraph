{"ver":"0.1","info":{"id":"MldyRn","date":"1531337170","viewed":118,"name":"WiP Ripple Effect","username":"Kealor","description":"ripple effect wip","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["ripple"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float speed = 3.0;\nconst float waves = 7.0;\n\nvec4 distortImage (in vec2 fragCoord)\n{\n \tvec2 uv = (fragCoord.xy) / iResolution.xy;\n\t\n    float dilation = texture(iChannel2, uv).r;\n\tfloat sinArg = dilation * waves + iTime * speed;\n\tfloat slope = cos(sinArg) ;\n\tvec4 color = texture(iChannel1, uv + vec2(dilation) * slope * 0.05);\n\t\n\treturn color;\n}\n\nvoid mainImage ( out vec4 fragColor, in vec2 fragCoord )\n{\n \tfragColor = distortImage(fragCoord);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"const int acc = 1;\nconst int radius = 30;\n\nvoid mainImage(out vec4 result, in vec2 fragCoord)\n{\n    float r = min(iResolution.x, iResolution.y);\n    \n\tvec2 uv = fragCoord / r;\n    uv.x /= 8.0;\n    uv.y = 1.0 - uv.y;\n    \n    vec3 c = texture(iChannel0, uv).rgb;\n    \n    float a = texture(iChannel0, uv).a;\n    bool i = bool(step(0.5, a) == 1.0);\n    \n    const int md = radius;\n    const int h_md = md;\n    \n    float d = float(md);\n    \n    for (int x = -h_md; x < h_md; x+=acc)\n    {\n        for (int y = -h_md; y < h_md; y+=acc)\n        {\n            vec2 o = vec2(float(x), float(y));\n            vec2 s = (fragCoord + o) / r;\n    \t\ts.x /= 8.0;\n    \t\ts.y = 1.0 - s.y;\n            \n            float o_a = texture(iChannel0, s).a;\n            bool o_i = bool(step(0.5, o_a) == 1.0);\n            \n            if (!i && o_i || i && !o_i)\n                d = min(d, length(o));\n        }\n    }\n    \n    d = clamp(d, 0.0, float(md)) / float(md);\n    \n    d = d * 0.5 + 0.5;\n    d = 1.0 - d;\n    \n    \n    float border_fade_outer = 0.1;\n    float border_fade_inner = 0.01;\n    float border_width = 0.25;\n    vec3 border_color = vec3(1.0, 0.0, 0.0);\n    \n    float outer = smoothstep(0.5 - (border_width + border_fade_outer), 0.5, d);\n    \n    vec3 temp = vec3(0.0, 0.0, 0.0);\n    vec4 border = mix(vec4(temp, 0.0), vec4(border_color, 1.0), outer);\n    \n    float inner = smoothstep(0.5, 0.5 + border_fade_inner, d);\n    \n    vec4 color = mix(border, vec4(c, 1.0), inner);\n    \n    result = color;\n}","name":"Buf A","description":"","type":"buffer"}]}