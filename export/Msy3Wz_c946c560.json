{"ver":"0.1","info":{"id":"Msy3Wz","date":"1453986368","viewed":275,"name":"Line Angle","username":"vamoss","description":"In development","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["line","angle"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//FabriceNeyret2 Solution more readable\n//*\nvoid mainImage( out vec4 fragColor,  vec2 fragCoord )\n{\n    vec2 uv=fragCoord/iResolution.xy;\n    \n    float radius = 0.005;\n    vec2 origin = vec2(0.5);\n    vec2 destiny = iMouse.xy/iResolution.xy-origin;\n    \n    float color = length( clamp( dot(uv-origin,destiny)/dot(destiny,destiny), 0.,1.) *destiny - uv+origin );\n    color = smoothstep(color-0.005,color+0.005, radius);\n    \n    fragColor = vec4(color, color, color, 1.0);   \n}\n/**/\n//FabriceNeyret2 Solution\n/*\nvoid mainImage( out vec4 O,  vec2 u )\n{\n    vec2 a = iResolution.xy/2.,v; \n    O += 1. / length( clamp( dot(u-a,v=iMouse.xy-a)/dot(v,v), 0.,1.) *v - u+a ) -O;   \n}\n/**/\n/*\n#define SMOOTH(r,R) (1.0-smoothstep(R-1.0,R+1.0, r))\n#define M_PI 3.1415926535897932384626433832795\n#define blue3 vec3(0.35,0.76,0.83)\n\nfloat line(vec2 origin, vec2 destiny, float radius, float angle, float lineWidth)\n{\n    vec2 d = origin - destiny;\n    float r = sqrt( dot( d, d ) );\n    if(r<radius)\n    {\n        vec2 p = radius*vec2(sin(angle+M_PI/2.0),\n                            -cos(angle+M_PI/2.0));\n        float l = length( d - p*clamp( dot(d,p)/dot(p,p), 0.0, 1.0) );\n    \treturn SMOOTH(l,lineWidth);\n    }\n    else return 0.0;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 origin = iResolution.xy/2.0;\n\tvec2 dest = iMouse.xy;\n    float lineWidth = 1.0;\n    \n\tvec2 uv = fragCoord.xy;\n    \n    float angle = atan((dest.y-origin.y),(dest.x-origin.x));\n    float lineLenght = distance(dest, origin);\n    \n\tvec3 color = vec3(0.0);\n    color += line(uv, origin, lineLenght, angle, lineWidth);\n    \n    fragColor = vec4(color, 1.0);\n}\n/**/","name":"Image","description":"","type":"image"}]}