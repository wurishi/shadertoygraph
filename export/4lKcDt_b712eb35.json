{"ver":"0.1","info":{"id":"4lKcDt","date":"1538165622","viewed":330,"name":"Lissajous Table","username":"halcy","description":"based on https://www.shadertoy.com/view/XdSGzh by simesgreen\n\ndrag mouse to zoom","likes":16,"published":1,"flags":0,"usePreview":0,"tags":["lissajouscurves"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float PI = 3.14159;\nconst int steps = 200;\n\n// from https://www.shadertoy.com/view/XdSGzh\nvec2 lissajous(float t, float a, float b, float d) {\n\treturn vec2(sin(a*t+d), sin(b*t));\n}\nfloat lissajous_dist(vec2 uv, float a, float b, float phase) {\n\tfloat d = phase;\n    \n\tfloat m = 1.0;\n\tfloat period = 3.141*2.0;\n    vec2 lp = lissajous(iTime, a, b, d)*0.8;\n    for(int i = 1; i <= steps; i++) \n    {\n        float t = float(i)*period / float(steps);\n\t\tt += iTime;\n        vec2 p = lissajous(t, a, b, d)*0.8;\n\t\t\n\t\t// distance to line\n        vec2 pa = uv - p;\n        vec2 ba = lp - p;\n        float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n        vec2 q = pa - ba*h;\n        m = min( m, dot( q, q ) );\n\t\t\n        lp = p;\n    }\n    m = sqrt( m );\n\tm = smoothstep(0.05, 0.0, m);\n    \n\treturn m;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    float x_steps = floor(iMouse.x * 0.02) + 8.0;\n\tfloat y_steps = floor(iMouse.y * 0.02) + 5.0;\n    \n    vec2 uv = (fragCoord.xy / iResolution.xy);\n    uv.x *= x_steps;\n    uv.y *= y_steps;\n    float aorig = floor(uv.x);\n    float borig = y_steps - 1.0 - floor(uv.y);\n    uv = mod(uv, 1.0);\n    uv = (uv - 0.5) * 2.0;\n    float m = 0.0;\n    float fixphase = iTime * 0.2;\n    float speedmult = 0.0;\n    float ljtime = iTime;\n    float a = aorig;\n    float b = borig;\n    if(a == 0.0 || b == 0.0) {\n        ljtime *= max(a, b);\n    \ta = 1.0;\n        b = 1.0;\n    }\n    m = lissajous_dist(uv, a, b, fixphase);\n    \n    vec2 ljpos = lissajous(ljtime, a, b, fixphase) * 0.8;\n    if(length(ljpos - uv) < 0.1) {\n    \tfragColor.rgb = vec3(1.0);\n    }\n    \n    if(aorig != 0.0 && abs(ljpos.x - uv.x) < 0.03) {\n    \tfragColor.rgb = vec3(0.4);\n    }\n    \n    if(borig != 0.0 && abs(ljpos.y - uv.y) < 0.03) {\n\t\tfragColor.rgb = vec3(0.4);\n    }\n    \n    vec4 curveColorA = mix(vec4(255.0, 127.0, 39.0, 0.0), vec4(128.0), aorig / (x_steps / 2.0));\n    vec4 curveColorB = mix(vec4(128.0, 128.0, 255.0, 0.0), vec4(128.0), borig / (y_steps / 2.0));\n    vec4 curveColor = (curveColorA + curveColorB) / (255.0 * 2.0);\n    fragColor = mix(fragColor, curveColor, m);\n    \n    if(aorig == 0.0 && borig == 0.0) {\n    \tfragColor.rgb = vec3(0.0);   \n    }    \n}\n","name":"Image","description":"","type":"image"}]}