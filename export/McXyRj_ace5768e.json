{"ver":"0.1","info":{"id":"McXyRj","date":"1721301807","viewed":66,"name":"Torus Galaxy","username":"B4K3D","description":"A Torus rotating in space changing gradients as its slowly moves thru the ever expanding hyperspace","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["glsl","geometry","creativecoding","b4k3d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265359 // created with love by B4K3D\nmat3 rotateY(float t){float c=cos(t);float s=sin(t);return mat3(vec3(c,0,s),vec3(0,1,0),vec3(-s,0,c));}\nmat3 rotateX(float t){float c=cos(t);float s=sin(t);return mat3(vec3(1,0,0),vec3(0,c,-s),vec3(0,s,c));}\nfloat torusDf(vec3 p,float r1,float r2){vec2 q=vec2(length(p.xz)-r1,p.y);return length(q)-r2;}\nvec3 palette(float t){vec3 a=vec3(0.5),b=vec3(0.5),c=vec3(1.0),d=vec3(0.263,0.416,0.557);return a+b*cos(6.28318*(c*t+d));}\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord){vec2 uv=(fragCoord-0.5*iResolution.xy)/iResolution.y;vec3 ro=vec3(0,0,-3);vec3 rd=normalize(vec3(uv,1));float time=iTime*0.5;mat3 rot=rotateY(time)*rotateX(time*0.7);float t=0.0,d=0.0;vec3 p;for(int i=0;i<100;i++){p=ro+rd*t;p=rot*p;d=torusDf(p,0.8,0.2);if(abs(d)<0.001||t>20.0)break;t+=d*0.5;}vec3 col=vec3(0.0);if(t<20.0){float thickness=0.02;vec3 normal=normalize(vec3(torusDf(p+vec3(0.001,0,0),0.8,0.2)-torusDf(p-vec3(0.001,0,0),0.8,0.2),torusDf(p+vec3(0,0.001,0),0.8,0.2)-torusDf(p-vec3(0,0.001,0),0.8,0.2),torusDf(p+vec3(0,0,0.001),0.8,0.2)-torusDf(p-vec3(0,0,0.001),0.8,0.2)));float angle=atan(p.z,p.x);float wire1=abs(fract(angle*15.0/PI+iTime*0.1)-0.5);float wire2=abs(fract(atan(length(p.xz)-0.8,p.y)*30.0/PI+iTime*0.2)-0.5);float wire=min(wire1,wire2);if(wire<thickness){float colorTime=iTime*0.1;vec3 baseColor=palette(length(p)*0.2+colorTime);float fresnel=pow(1.0-abs(dot(normal,rd)),3.0);col=mix(baseColor,vec3(1.0),fresnel);float sparkle=fract(sin(dot(p,vec3(12.9898,78.233,45.164)))*43758.5453);col+=vec3(3.0,1.0,0.8)*step(0.99,sparkle)*3.0;}else{float glow=exp(-wire*10.0);col=palette(length(p)*0.1+iTime*0.05)*glow*0.2;}}vec3 bgCol=vec3(0.02);float stars=step(0.998,fract(sin(dot(uv,vec2(12.9898,78.233)))*43758.5453));bgCol+=vec3(stars)*0.3;col=mix(bgCol,col,smoothstep(0.0,0.01,col));col+=pow(col,vec3(2.0))*0.4;fragColor=vec4(col,1.0);}\n","name":"Image","description":"","type":"image"}]}