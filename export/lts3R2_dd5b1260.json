{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[{"channel":0,"type":"cubemap","id":"XsX3zn","filepath":"/media/a/94284d43be78f00eb6b298e6d78656a1b34e2b91b34940d02f1ca8b22310e8a0.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"code":"float sinc(vec2 point, float timeScale, float freq)\n{\n    freq *= 0.75;\n    float d = distance(point, vec2(0.0));\n    float m = 0.0;\n    if (d < 1.0)\n        m = (d - 1.0) * (d - 1.0);\n    return sin(freq * d - iTime * timeScale * 4.0) * m;\n}\n\nfloat circle(vec2 point, float zoom)\n{\n    float warp = sinc(point, 1.25, 2.0) * 0.0125;\n    warp += sinc(point - vec2(-0.3, 0.5), 1.75, 20.0) * 0.025;\n    warp += sinc(point - vec2(0.4, -0.6), 2.3, 15.0) * 0.025;\n    warp += sinc(point - vec2(-0.5, -0.3), 0.6, 9.0) * 0.025;\n    warp += sinc(point - vec2(0.6, 0.4), 1.0, 7.0) * 0.025;\n    \n    return distance(point, vec2(warp * 3.0 / (0.5 + mix(zoom, 0.5, 0.75)))) - 0.5;\n}\n\nconst float PI = 3.1415926535;\n\nvec2 spherify(vec2 p, float strength, out bool outOfRange)\n{   \n \tfloat aperture = 180.0;\n    float apertureHalf = 0.5 * aperture * (PI / 180.0);\n    float maxFactor = sin(apertureHalf);\n\n    vec2 xy = p;\n    vec2 uv;\n    float d = length(xy);\n    if (d < (2.0-maxFactor))\n    {\n        d = length(xy * maxFactor);\n        float z = sqrt(1.0 - d * d);\n        float r = atan(d, z) / PI;\n        float phi = atan(xy.y, xy.x);\n        \n        r = pow(r, 1.25);\n\n        uv.x = r * cos(phi) + 0.5;\n        uv.y = r * sin(phi) + 0.5;\n        \n        outOfRange = false;\n    }\n    else\n        outOfRange = true;\n    \n    return uv * 2.0 - vec2(1.0);\n\n}\n\nvec3 fakeCube(vec3 pt)\n{\n    float dist = pt.x + pt.y + pt.z * 0.5;\n    //if (pt.y + pt.x + pt.z * 0.5 > 0.9) dist = 0.0;\n    \n\treturn clamp(vec3(dist > 0.0), 0.0, 1000.0);\n}\n\nvec3 fresnel(vec2 p)\n{  \n    vec3 p3d = vec3(p, sqrt(1.0 - dot(p, p)));\n    \n    p3d = reflect(vec3(0.0, 0.0, -1.0), p3d);\n    \n    float fr = 0.0;\n    \n\tfloat r = length(p);\n    float a = atan(p.y, p.x);\n    \n    if (r > 1.0) r = 0.0;\n    \n    fr = pow(r, 2.0);\n    \n    return fakeCube(p3d).rgb * fr;\n}\n\nfloat pulse(vec2 p)\n{\n    float fr = 0.0;\n    \n\tfloat r = length(p);\n    float a = atan(p.y, p.x);\n    \n    float t = mod(iTime * 0.4, 1.0);\n    \n    //fr = pow(r - (1.0 + sin(mod(iTime, PI))), 2.0);    \n    fr = (r - t) * 5.0;\n    if (fr > 1.0 || fr < 0.0) fr = 0.0;\n    //fr = pow(fr, 0.5);\n    fr *= pow(1.0 - t, 2.0);\n    \n    return clamp(fr, 0.0, 1.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec3 color = vec3(0);    \n    vec3 fC;\n\tvec2 uv = (fragCoord.xy - iResolution.xy * 0.5) / iResolution.yy * 2.0;\n   \n    bool outOfRange;\n    uv = spherify(uv, 1.0, outOfRange);\n    \n    vec2 mouseMod = (iMouse.xy / iResolution.xy - vec2(0.5)) * 2.0;\n    //vec2 mouseMod = vec2(0.0);\n    \n\tfC = pow(fresnel(uv - mouseMod * 0.05), vec3(1.5)) * 1.0;\n    \n    uv = uv - mouseMod;\n    \n    //float zoom = iMouse.x / iResolution.x;\n    float zoom = 0.5;\n    float border = (circle(uv / pow(zoom, 2.0), zoom) + mix(0.75, 0.0, zoom)) * (zoom * 15.0 + 0.0);\n    \n    color = mix(color, vec3(15.0, 46.0, 103.0) / 255.0, smoothstep(0.673, 0.7671, border));\n    color = mix(color, vec3(0.0, 30.0, 66.0) / 255.0, smoothstep(0.7671, 1.5, border));\n    \n    color = mix(color, vec3(0.0), smoothstep(0.707, 2.0, pow(border, 0.25)));\n    \n    //color = pow(color, vec3(0.8)); \n    \n    color *= 4.0;\n    \n    color = mix(color, color + fC + pulse(uv) * vec3(15.0, 46.0, 103.0) / 255.0, smoothstep(0.673, 0.7671, border));\n    \n    //color = vec3(uv, 0.0);\n    \n    fragColor = outOfRange ? vec4(0.0) : vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"lts3R2","date":"1423516242","viewed":143,"name":"New eye test","username":"renaudbedard","description":"Just testing stuff out","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""}}