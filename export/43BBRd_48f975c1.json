{"ver":"0.1","info":{"id":"43BBRd","date":"1729795247","viewed":112,"name":"cristalli","username":"sergioRAI","description":"reflect","likes":5,"published":3,"flags":0,"usePreview":0,"tags":["reflect"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float my_PI = 3.14159265;\n\nmat3 RZ(float a) { \n    float cosa = cos(a);\n    float sina = sin(a);\n    return mat3(cosa, sina, 0, -sina, cosa, 0, 0, 0, 1); \n}\n\nfloat rand(vec2 co) { \n    return fract(sin(dot(co.xy , vec2(12.9898, 78.233))) * 43758.5453); \n}\n\nfloat sat(float a) {\n    return clamp(a, 0.0, 1.0);\n}\n\nfloat diamondShape(vec2 uv, vec2 pos, float scale) {\n    uv -= pos;\n    uv = abs(uv);\n    return max(uv.x + uv.y, uv.y * 0.5 + uv.x);\n}\n\nvec3 drawDiamond(vec2 uv, vec2 pos, float rad, float brightness) {\n    float shape = diamondShape(uv, pos, rad);\n    float edge = smoothstep(0.02, 0.03, rad - shape);\n    vec3 col = vec3(edge * brightness);\n    return col;\n}\n\nvec3 rdrMain(vec2 uv) {\n    vec3 colGrad = vec3(0.45, 0.34, 0.78).yzx;\n    vec3 acc = mix(colGrad, vec3(0.3), 1.0 - length(uv));\n    acc *= min(pow(max(length(uv), 0.1), 3.5), 1.0);\n    return acc;\n}\n\nvec3 rdrDiamonds(vec2 uv) {\n    const int lines = 16;\n    vec3 acc = vec3(0.0);\n\n    for (int i = 0; i < lines; ++i) {\n        float fi = float(i);\n        vec2 pos = 1.0 * vec2(rand(vec2(fi * 12.0, 8.0 - fi)), rand(vec2(mod(fi, 0.5), fi)));\n        pos -= vec2(0.5);\n        float speed = 0.5;\n        pos -= max((fi / 16.0), 0.1) * vec2(sin(speed * (iTime + fi)), cos(speed * (fi + iTime * (mod(fi, 2.0) < 0.1 ? 1.0 : -1.0))));\n\n        acc += 0.5 * drawDiamond(uv, pos, 0.2 * max(1.0 - pos.x, 0.2), 0.8) * vec3(1.0, 0.8 + fi / 16.0, 1.5).zyx;\n    }\n\n    return acc;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord.xy / iResolution.xx;\n    vec2 center = vec2(0.5) * iResolution.xy / iResolution.xx;\n    uv = uv - center;\n    vec2 ouv = uv;\n    uv *= 4.0;\n\n    uv += mod((vec3(ouv, 0.0) * RZ(my_PI / 4.0)).xy * 5.0, vec2(0.1));\n\n    vec3 col = rdrMain(uv);\n    col *= 1.0 - pow(length(uv), 2.5);\n    col += rdrDiamonds(uv);\n    col += rdrDiamonds(uv.yx * vec2(-1.0, 1.0) * 0.5);\n\n    if (col.z > 2.1) {\n        col += vec3(0.5);\n    }\n\n    fragColor = vec4(col, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}