{"ver":"0.1","info":{"id":"tllXz2","date":"1563624164","viewed":323,"name":"Fuzzy Voronoi?","username":"anastadunbar","description":"I was thinking about smooth color conversion with color palettes.","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["metaballs","coloring","position","colorpalette","neighbours"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float usin(float x){return(sin(x)+1.)/2.;}\n#define time iTime\n#define SIZE 5\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord){\n\tvec2 points[]=vec2[](\n\t\tvec2(.5,-.75),\n\t\tvec2(1.,-1.),\n\t\tvec2(-1.,1.),\n\t\tvec2(sin(time),cos(time)),\n\t\tvec2(-sin(time),cos(time))\n\t);\n\tvec3 colors[]=vec3[](\n\t\tvec3(1.,.2,.2),\n\t\tvec3(1.,.9,.3),\n\t\tvec3(.1,.5,.7),\n\t\tvec3(.1,.7,.2),\n\t\tvec3(1.,1.,1.)\n\t);\n\tvec2 p=floor(fragCoord),\n\t     uv=(p/iResolution.xy)-.5;\n\tuv.x/=iResolution.y/iResolution.x;\n\tuv*=5.;\n\tbool fuzzy=(mod(p.x+p.y,16.)>=1.)&&(mod(p.x-p.y,16.)>=1.);\n\tif(fuzzy){\n\t\tvec3 col=vec3(0.);\n\t\tfloat sum=0.,\n\t\t      gamma=2.2;\n\t\tfor(int i=0;i<SIZE;i++){\n\t\t\tfloat dist=length(uv-points[i]);\n\t\t\tvec3 color=pow(colors[i],vec3(gamma));\n\t\t\tif(dist<1e-6){col=color;sum=1.;break;} //Avoid dividing by zero.\n\t\t\tdist=1./pow(dist,2.+(usin(time)*5.));\n\t\t\tcol+=color*dist;\n\t\t\tsum+=dist;\n\t\t}\n\t\t//float betweens=1./sum;\n\t\tcol/=sum;\n\t\tfragColor=vec4(pow(col,1./vec3(gamma)),1.);\n\t}else{\n\t\tfloat minV=length(uv-points[0]);\n\t\tint minI=0;\n\t\tfor(int i=1;i<SIZE;i++){\n\t\t\tfloat dist=length(uv-points[i]);\n\t\t\tvec3 color=colors[i];\n\t\t\tif(dist<minV){\n\t\t\t\tminI=i;\n\t\t\t\tminV=dist;\n\t\t\t}\n\t\t}\n\t\tfragColor=vec4(colors[minI],1.);\n\t}\n}","name":"Image","description":"","type":"image"}]}