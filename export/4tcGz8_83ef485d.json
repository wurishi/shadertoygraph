{"ver":"0.1","info":{"id":"4tcGz8","date":"1467813509","viewed":313,"name":"Melf's Workshop","username":"thallippoli","description":"Based off of https://www.shadertoy.com/view/Mtf3R7# by jozxyqk","likes":17,"published":1,"flags":0,"usePreview":0,"tags":["2d","perlin","fumes"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3Rn","filepath":"/media/a/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","previewfilepath":"/media/ap/0a40562379b63dfb89227e6d172f39fdce9022cba76623f1054a2c83d6c0ba5d.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 perlin(vec2 p)\n{\n    vec2 x = vec2(0.0);\n    // the more the iterations, the \"finer\" the perturbances\n    for (int i = 0; i <3; ++i)\n    {\n        float j = pow(2.0, float(i));\n        x += (texture(iChannel1, p * j * 0.001).xy-0.75) / j;\n    }\n    return x;\n}\n\nvec3 smoke( vec2 p, vec2 o, float t )\n{\n    const int steps = 5;\n    vec3 col = vec3(0.0);\n    for (int i = 1; i < steps; ++i)\n    {\n        //step along a random path that grows in size with time\n        p += perlin(p + o) * t * 0.01 / float(i);\n  \n        col += texture( iChannel0, p ).rgb;\n        \n        //fume colour\n        col += vec3( 0.02, 0.2, 0.1 ) * t;\n    }\n    return col.xyz / float( steps );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    // fade towards the top\n    float t = ( 2.0- uv.y ); \n    \n    // controls the relative shape of the fumes - more x, less y =>long vertical fumes\n    vec2 distribution = vec2( 300, 100 );\n        \n    float speed = -15.;\n    t *= perlin( uv * distribution + iTime * vec2( 0., speed ) ).r;\n\tt = pow( abs(t), 2.5 );\n    fragColor = vec4( smoke( uv, uv, t ), 1.0 );\n}","name":"Image","description":"","type":"image"}]}