{"ver":"0.1","info":{"id":"7tySzh","date":"1640153069","viewed":156,"name":"Function Plot with SmoothStep","username":"pdcxs","description":"A simple shader to show how to draw functions with smoothstep","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["2d","math","function","plot","smoothstep"],"hasliked":0,"parentid":"slGSzz","parentname":"Function Plot Illustrate"},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.141592653\n\nvec2 fixUV(in vec2 c) {\n    return 3. * (2. * c - iResolution.xy) /\n           min(iResolution.x, iResolution.y);\n}\n\nvec3 Grid(in vec2 uv) {\n    vec3 color = vec3(0.);\n    vec2 fraction = 1. - 2. * abs(fract(uv) - 0.5);\n    float l = 2. * fwidth(uv.x),\n          r = 1.9 * fwidth(uv.x);\n\n    color = vec3(smoothstep(2. * l, 2. * r, fraction.x));\n    color += vec3(smoothstep(2. * l, 2. * r, fraction.y));\n    color.rb *= smoothstep(r, l, abs(uv.x));\n    color.gb *= smoothstep(r, l, abs(uv.y));\n\n    return clamp(color, 0., 1.);\n}\n\nfloat segment(in vec2 p, in vec2 a, in vec2 b, in float w) {\n    float f = 0.;\n    vec2 ba = b - a;\n    vec2 pa = p - a;\n    float proj = clamp(dot(pa, ba) / dot(ba, ba), 0., 1.);\n    float d = length(proj * ba - pa);\n    f = smoothstep(w, .5 * w, d);\n    return f;\n}\n\nfloat func(in float x) {\n    float T = 4. + 2. * sin(iTime);\n    return sin(2. * PI / T * x);\n}\n\nfloat funcPlot(in vec2 uv) {\n    float f = 0.;\n    for(float x = 0.; x <= iResolution.x; x += 1.) {\n        float fx = fixUV(vec2(x, 0.)).x;\n        float nfx = fixUV(vec2(x + 1., 0.)).x;\n        f += segment(uv,\n                     vec2(fx, func(fx)),\n                     vec2(nfx, func(nfx)),\n                     2.*fwidth(uv.x));\n    }\n    return clamp(f, 0., 1.);\n}\n\nfloat smoothstepPlot(in vec2 uv) {\n    float f = 0.;\n    float left = 2. * sin(iTime);\n    float right = 2. * cos(-iTime);\n    for(float x = 0.; x <= iResolution.x; x += 1.) {\n        float fx = fixUV(vec2(x, 0.)).x;\n        float nfx = fixUV(vec2(x + 1., 0.)).x;\n        f += segment(uv,\n                     vec2(fx, smoothstep(left, right, fx)),\n                     vec2(nfx, smoothstep(left, right, nfx)),\n                     2.*fwidth(uv.x));\n    }\n    return clamp(f, 0., 1.);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fixUV(fragCoord);\n    vec3 color = Grid(uv);\n    color = mix(color, vec3(1., 1., 0.), funcPlot(uv));\n    color = mix(color, vec3(0., 0., 1.), smoothstepPlot(uv));\n    \n    fragColor = vec4(color, 1.);\n}","name":"Image","description":"","type":"image"}]}