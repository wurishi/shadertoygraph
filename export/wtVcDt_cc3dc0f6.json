{"ver":"0.1","info":{"id":"wtVcDt","date":"1612015707","viewed":90,"name":"Yet Another Julia Set","username":"lesleylai","description":"A simple visualization of Julia set","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["fractals","complexnumbers"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Configurations\nconst int max_iteration = 200;\nconst float r2 = 100.;\n\nvec2 get_c() {\n  return vec2(\n    -0.512511498387847167 + sin(iTime / 20.) * 0.005,\n     0.521295573094847167 + cos(iTime / 20.) * 0.005\n  );\n}\n\nvec2 get_scale() {\n vec2 s = vec2(2.0, 2.0);\n s *= cos(iTime / 10.) * 0.4 + 0.6;\n return s;\n}\n\nconst int AA = 2;\n\n// Complex number\nstruct Complex {\n  vec2 data;\n};\n\nComplex complex_mult(Complex lhs, Complex rhs) {\n  return Complex(mat2(lhs.data, -lhs.data.y, lhs.data.x) * rhs.data);\n}\n\nComplex complex_plus(Complex lhs, Complex rhs) {\n  return Complex(lhs.data + rhs.data);\n}\n\n\nfloat complex_norm(Complex c) {\n  return dot(c.data, c.data);\n}\n\n// Main\nvec3 color_at(in vec2 coord) {\n    vec3 col;\n\n    Complex z = Complex(coord);\n    Complex c = Complex(get_c());\n    \n    int i = 0;\n    while (i < max_iteration && complex_norm(z) < r2) {\n      z = complex_plus(complex_mult(z, z), c);\n      ++i;\n    }\n    \n    if (i == max_iteration) {\n      col = vec3(0.8, 1.0, 0.8);\n    } else {\n      float x = float(i) / float(max_iteration);\n      x = pow(x, 0.2);\n      col = vec3(x / 2.0, x, x / 2.0);\n   }\n   \n   return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 col;\n    for (int i = 0; i < AA; ++i) {\n        for (int j = 0; j < AA; ++j) {\n            vec2 offset = -0.5 + vec2(float(i), float(j)) / float(AA);\n            vec2 coord = (fragCoord + offset - 0.5 * iResolution.xy) / - iResolution.y;\n            coord *= get_scale();\n            col += color_at(coord);\n        }\n    }\n    col /= float(AA * AA);\n\n\n\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}