{"ver":"0.1","info":{"id":"wsKBRD","date":"1606739058","viewed":121,"name":"Universe collapse","username":"jne0xff","description":"This effect was used in the game to show the collapse of the universe into a single point. Might look like a space travel as well","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["space","collapse","singularity"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdfGRn","filepath":"/media/a/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","previewfilepath":"/media/ap/e6e5631ce1237ae4c05b3563eda686400a401df4548d0f9fad40ecac1659c46c.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float inverseLerp(float from, float to, float val)\n{\n\treturn (val - from) / (to - from);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 BACKGROUND_COLOR = vec4(0, 0, 0, 0);\n    float IDLE_DURATION = 1.0;\n    float COLLAPSE_DURATION = 2.0;\n    float COLLAPSE_MIN_POWER = 1.0;\n    float COLLAPSE_MAX_POWER = 20.0;\n    float SCALE_DURATION = 1.0;\n\n    float totalDuration = IDLE_DURATION + COLLAPSE_DURATION + SCALE_DURATION;\n    float time = mod(iTime, totalDuration);\n\n    float collapseProgress = clamp(inverseLerp(IDLE_DURATION, IDLE_DURATION + COLLAPSE_DURATION, time), 0.0, 1.0);\n    float scaleProgress = clamp(inverseLerp(IDLE_DURATION + COLLAPSE_DURATION, totalDuration, time), 0.0f, 1.0);\n\n    float collapsePower = mix(COLLAPSE_MIN_POWER, COLLAPSE_MAX_POWER, collapseProgress);\n    \n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    vec2 center = vec2(0.5, 0.5);\n    vec2 offset = uv - center;\n    float d = length(offset);\n    float newD = pow(d * 2.0, 1.0 / collapsePower) / 2.0;\n    vec2 newOffset = normalize(offset) * newD / (1.0 - scaleProgress);\n    vec2 newUv = center + newOffset;\n\n    vec4 collapsedColor = texture(iChannel0, newUv);\n\n    // Output to screen\n    fragColor = mix(collapsedColor, BACKGROUND_COLOR, scaleProgress);\n}","name":"Image","description":"","type":"image"}]}