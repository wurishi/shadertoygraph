{"ver":"0.1","info":{"id":"msf3Dn","date":"1667313817","viewed":158,"name":"Grid to polar","username":"ChunderFPV","description":"Just foolin around.  Mouse x to polar transform.","likes":12,"published":1,"flags":0,"usePreview":0,"tags":["grid","polar","transform"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SCALE 5.0\n#define PI 3.14159265358979\n#define TAU (PI*2.0)\n#define hue(v) (.6+.6*cos(6.3*(v)+vec4(0,23,21,0))) // https://www.shadertoy.com/view/ll2cDc\n\n// gradient map ( equation, time, hardness, shadow, reciprocals )\nfloat gm(float eq, float t, float h, float s, bool i)\n{\n    float sg = min(abs(eq), 1.0/abs(eq)); // smooth gradient\n    float og = abs(sin(eq*PI-t)); // oscillating gradient\n    if (i) og = min(og, abs(sin(PI/eq+t))); // reciprocals\n    return pow(1.0-og, h)*pow(sg, s);\n}\n\nvoid mainImage(out vec4 RGBA, in vec2 XY)\n{\n    float lw = 1.5; // line width\n    vec2 R = iResolution.xy;\n    vec4 m = iMouse; m.xy = (m.xy-0.5*R.xy)/R.y*2.0; // mouse to cartesian\n    float z = (m.z > 0.0) ? pow(1.0-abs(m.y), 2.0*sign(m.y)): 1.0; // zoom from mouse y\n    vec2 sc = (XY-0.5*R)/R.y*SCALE*z; // screen coords\n    float t = mod(iTime, TAU)-PI; // time (arc)\n    \n    if (abs(m.x) > 1.0) m.x = sign(m.x); // limit mouse x to +/-1\n    if (round(m.x*10.0)/10.0 == 0.0) m.x = 0.0; // snap mouse x to 0 when close\n    \n    float a = atan(sc.x, sc.y*sign(m.x)); // screen arc\n    float r = length(sc); // screen radius\n    \n    // cartesian to polar\n    float mxt = 1.0-abs(m.x); // mouse x transform\n    sc.x = (sc.x*mxt)+(a*m.x)*sign(m.x);\n    sc.y = (sc.y*mxt)+(r*m.x);\n    \n    vec3 c = vec3(0); // background\n    \n    vec3 c_grid = vec3(0.4, 0.5, 0.9);\n    c += gm(pow(abs(tan(sc.x)), 2.0), t, 3.0, 2.0, true)*c_grid;\n    c += gm(pow(abs(tan(sc.y*PI/4.0)), PI/2.0), t, 3.0, 2.0, true);\n    \n    RGBA = vec4(exp(log(c)/2.2), 1.0)*hue((sc.y/2.0)-0.25)*1.6;\n}","name":"Image","description":"","type":"image"}]}