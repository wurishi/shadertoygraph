{"ver":"0.1","info":{"id":"ctjSWm","date":"1676223758","viewed":121,"name":"coldnight","username":"tve","description":"2d rotating sun in the night sky. sun code taken from here: https://www.shadertoy.com/view/DtBSWw","likes":4,"published":1,"flags":32,"usePreview":0,"tags":["2d","sun","star"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//rotating sun ripped off from here: https://www.shadertoy.com/view/DtBSWw\n\nmat2 rot(float a) {\n    return mat2( cos(a),sin(a),-sin(a),cos(a));\n}\n\nfloat hash(vec2 p) {\n    p = fract(p * vec2(sin(123.124), sin(928.0123)));\n    p += dot(p,p+154.23);\n    return fract(p.x*p.y);\n}\n\nvec3 draw_star(vec2 uv, float intensity) {\n    \n    float d = length(uv);\n    vec3 col = vec3(0);\n    col += 0.3/pow(d,2.0);\n    col.b *= 4.0;\n    col *= intensity;\n    col *= smoothstep(0.5, 0.2, d);\n    \n        \n    return col;\n}\n\nvec3 star_field(vec2 uv, float intensity) {\n   uv = uv*rot(cos(iTime)*0.0001);\n   vec2 gv = fract(uv)-0.5;\n   vec2 id = floor(uv);\n   \n   vec3 col = vec3(0);\n   \n   for(int y=-1;y<=1;y++) {\n     for(int x=-1;x<=1;x++) {\n       vec2 offs = vec2(x,y);\n       float n = hash(id+offs);\n   \n       \n       col += draw_star(gv-offs-vec2(n-0.5,fract(n*34.0))+0.5, intensity);\n           \n     }\n   }\n   \n   \n   return col;\n}\n\nvoid mainImage( out vec4 O, in vec2 u )\n{\n    vec4 V; r = iResolution.xy; t = iTime+1000.0; \n    vec2 uv = (u-0.5*iResolution.xy)/iResolution.y;\n    \n    vec3 col = vec3( (uv.x+0.85)/(uv.y+0.5)*01.75 );     \n    \n    col.b *= 0.5;\n\n    if( abs(uv.x) > 0.35 ) {\n      col += star_field(uv*100.0, 0.0015 );\n      col += star_field(uv*3.0, 0.0015 );\n    }\n    \n    \n    float d = length( uv  );\n    float sval = (1.0-5.0/d*d*d)*16.0;\n    col.rg += sval;\n            \n    col *= 0.15;\n    //col *= 0.0;\n        \n    O = draw_sun( V, u, iChannel0 );//rotating sun ripped off from here: https://www.shadertoy.com/view/DtBSWw\n    O += V*3.2;\n    O = mix(O,vec4(col,1.0),0.30);\n    \n\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"//rotating sun ripped off from here: https://www.shadertoy.com/view/DtBSWw\n\nvec2 r; float t; \n\n#define R(a) mat2(cos(a+vec4(0,11,33,0)))\n\nvec4 draw_sun( out vec4 O, vec2 u , sampler2D ch )\n{\n    vec2  p = (u+u-r) / r.y, q, n = r-r;\n    float S = 6.,a=0.,i=a, d = dot(p,p), e = 275.0, s=a;\n    p = p/( .7-d ) + t/20.0;\n    for( O *= 0. ; i++ < e ; O += texture( ch, (u/r-.5)*i/e+.5 ) / e)\n        p *= R(5.), n *= R(5.),\n        a += dot( sin( q = p*S +i -abs(n)*R(t*.2) ) / S, r/r ),\n        n += cos(q), \n        S *= 1.1;\n    a = max( s, .9 -a*.2 -d );\n    return pow( a+ a*vec4(8,4,1,0)/e , O+10. ); \n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 O, vec2 u )\n{\n    vec4 V; r = iResolution.xy; t = iTime;\n    O = draw_sun( V, u, iChannel0 );\n    O = clamp(O, 0.,1.);\n  \n\n}","name":"Buffer A","description":"","type":"buffer"}]}