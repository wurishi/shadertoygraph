{"ver":"0.1","info":{"id":"DdX3WN","date":"1666117100","viewed":290,"name":"3 Tangent Circles","username":"SnoopethDuckDuck","description":"e","likes":15,"published":3,"flags":0,"usePreview":0,"tags":["e"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Maths and stuff:\n// http://jwilson.coe.uga.edu/EMAT6680Su06/Swanagan/Assignment7/BSAssignment7.html\n\n#define pi 3.14159\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 res = iResolution.xy;\n    vec2 uv = (fragCoord - 0.5 * res) / res.y;\n    \n    float k = 1. / res.y;\n    \n    // first 2 circles\n    vec2 p1 = vec2(0.1, 0.1 * cos(0.5 * iTime));\n    vec2 p2 = vec2(-0.3, 0.1 * sin(0.5 * iTime));\n    float l = length(p1 - p2);\n    float r1 = (0.3 + 0.2 * cos(iTime)) * l;\n    float r2 = (0.3 + 0.2 * sin(iTime)) * l;\n    \n    float d1 = length(uv - p1);\n    float d2 = length(uv - p2);\n    float s1 = exp(-40. * abs(d1-r1)); //smoothstep(-k, k, 2. * k - abs(d1 - r1));\n    float s2 = exp(-40. * abs(d2-r2)); //smoothstep(-k, k, 2. * k - abs(d2 - r2));\n     \n    // angle from p2 circle where p3 circle is tangent\n    float a = atan(p2.y - p1.y, p2.x - p1.x) + pi * cos(0.25 * iTime);\n    \n    // maths and stuff\n    vec2 e = p2 - r2 * vec2(cos(a), sin(a));\n    vec2 f = e  + r1 * vec2(cos(a), sin(a));\n    vec2 g = 0.5 * (f + p1);\n    \n    // intersect 2 lines to find 3rd point\n    float v1 = (f.y - p1.y) / (f.x - p1.x);\n    float v2 = (f.y - p2.y) / (f.x - p2.x);\n    vec2 p3;\n    p3.x = (g.x + v1 * v2 * f.x + v1 * (g.y - f.y)) / (v1 * v2 + 1.);\n    p3.y = v2 * (p3.x - f.x) + f.y;\n        \n    // 3rd circle\n    float r3 = length(p3 - e);\n    float d3 = length(uv - p3);\n    float s3 = exp(-40. * abs(d3-r3)); //smoothstep(-k, k, 2. * k - abs(d3 - r3));\n    \n    vec3 col = vec3(0.2,0.6,0.95) * vec3(s1 + s2 + s3);\n    col += 0.08;\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}