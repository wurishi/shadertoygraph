{"ver":"0.1","info":{"id":"MdSyWh","date":"1491857943","viewed":1749,"name":"fast bloom","username":"Jodie","description":"bloom","likes":21,"published":1,"flags":0,"usePreview":1,"tags":["bloom"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n// curve matched using turingbot\nvec3 srgbToLinear(const vec3 x){\n    return 0.315206*x*((2.10545+x)*(0.0231872+x));\n}\n// curve matched using turingbot\nvec3 linearToSrgb(const vec3 x){\n    return 1.14374*(-0.126893*x+sqrt(x));\n}\n\nvec3 t(vec2 p,float m){\n    return srgbToLinear(texture(iChannel0,p,m).rgb);\n}\n\nvec3 fastBloom (vec2 p,vec2 r){\n    float mip = 2.;\n    float scale = exp2(mip);\n    vec3 c =\n        t((p+vec2(-1.5,-0.5)*scale)/r,mip)*.1+\n        t((p+vec2( 0.5,-1.5)*scale)/r,mip)*.1+\n        t((p+vec2( 1.5, 0.5)*scale)/r,mip)*.1+\n        t((p+vec2(-0.5, 1.5)*scale)/r,mip)*.1+\n        t((p)/r,mip)*.7+\n        t(p/r,0.)*.7;\n    return c;\n}\n\n\nvec3 jodieRobo2(const vec3 d){\n    float c=dot(d,vec3(.2126,.7152,.0722));\n    vec4 e=vec4(d,c)*inversesqrt(c*c+1.);\n    vec3 a=e.rgb;\n    float b=e.a;\n    float f=max(max(max(e.r,e.g),e.b),1.);\n    return (b*a-a-(f*b-b))/(b-f);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragCoord.y=1.-fragCoord.y;\n    vec2 uv = fragCoord.xy/iResolution.xy;\n   \n    \n    vec3 color = fastBloom(fragCoord.xy,iResolution.xy);\n    \n    color = jodieRobo2(color);\n\n    fragColor.rgb = linearToSrgb(color);\n    \n}","name":"Image","description":"","type":"image"}]}