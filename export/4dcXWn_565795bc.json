{"ver":"0.1","info":{"id":"4dcXWn","date":"1458573920","viewed":425,"name":"vapor wand","username":"vladstorm","description":"magic lol","likes":9,"published":1,"flags":32,"usePreview":0,"tags":["magic","smoke","multipass","vapor"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265359\nvec3 bms(vec3 c1, vec3 c2){\n\treturn 1.- (1.-c1)*(1.-c2);\n}\n\nvec3 filmGrain(vec2 uv, float strength ){       \n    float x = (uv.x + 4.0 ) * (uv.y + 4.0 ) * (iTime * 10.0);\n\treturn  vec3(mod((mod(x, 13.0) + 1.0) * (mod(x, 123.0) + 1.0), 0.01)-0.005) * strength;\n\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec3 co = texture(iChannel0, uv).xyz;\n    vec3 ct = texture(iChannel1, uv).xyz;\n    vec3 c = bms(co, ct);\n    //\n\t\n    c.x = pow(c.x, 4.0);\n    c.y = pow(c.y, 4.0);\n    c.z = pow(c.z, 2.0);\n    //c = c.xxx;\n    //c.x = sin(c.x*PI );\n    //c.z += sin(iTime);\n    //c = co;\n    \n    \n    vec3 fg = filmGrain(uv,  20.0);\n    c = bms(c, fg);//1.- (1.-cl)*(1.-fg);     \n    \n    fragColor = vec4(c, 1.0);\n   // fragColor = vec4( ct, 1.0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define HASHSCALE1 443.8975\n//  1 out, 3 in...\nfloat hash13(vec3 p3)\n{\n\tp3  = fract(p3 * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\n#define PI 3.14159265359\n\nvec2 tx;// = 1./ iResolution.xy;\n\nvec3 bms(vec3 c1, vec3 c2){\n\treturn 1.- (1.-c1)*(1.-c2);\n}\n\n//vec3 dt(vec2 sh, float size, vec2 p){\n//    float l = length(p -sh);\n//    l += (sin(l-iTime*2.) +1. ) *2.*.25;\n//    return vec3(1./l)*size;\n//}\n\nvec3 dt(vec2 sh, float size, vec2 p){\n    vec3 l;\n    l.x = length(p + vec2(tx.x, 1)- sh);\n    l.y = length(p - sh);\n    l.z = length(p - vec2(tx.x, 1) - sh);\n        \n    l += (sin(l-iTime*2.) +1. ) *2.*.25;\n    return vec3(1./l)*size;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 po = fragCoord.xy / iResolution.xy;\n\tvec2 p = po;\n    tx = 1./ iResolution.xy;\n    \n    vec2 m = iMouse.xy/iResolution.xy;\n    \n    \n    \n    p = 2.0*(p - .5);\n    p+=m; //+vec2(.5\n    p *= vec2(1.0, iResolution.y/iResolution.x); \n    p *=100.;\n    float t = iTime*2.;\n    vec3 c = vec3(0.);\n    int cnt = 10;\n    for(int i=0; i<10; i++){\n       float sh = 2.*PI*float(i)/float(cnt);\n     \tc = bms(c, dt( mix(14., 15., sin(t*2. + sh )) * vec2(cos(t+sh) , sin(t+sh)), .5,  p));\n    }\n    \n    c = bms(c, dt(10.*vec2(0.), 8.,  p));\n    //c *= vec3(.5,.5,1.);\n    \n    //tail\n    //vec3 ct = texture(iChannel0, p+vec2(-tx.x, 0.)).xyz;\n    \n    //if(ct.x<0.3) ct = vec3(0.);\n    //c = bms(c, ct);\n\n    float r = hash13( vec3(p + vec2(0.0, 0.0), 0.0) ); //float(floor(float(iFrame)*2.0)/2.0 )\n    r = pow(r, 200.0);\n\n    c = bms(c, vec3(r)*1.0);\n    // c =  vec3(r)*4.0;\n    \n    \n\tfragColor = vec4(c,1.0);\n}","name":"Buf A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"float bms(float c1, float c2){\n\treturn 1.- (1.-c1)*(1.-c2);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    \n    \n    vec2 p = fragCoord.xy / iResolution.xy;\n    vec2 tx = 1./ iResolution.xy;\n    \n    vec3 c = vec3(0.);\n    vec3 co = texture(iChannel1, p+vec2(  -1.0*tx.x, sin(iTime)*tx.y)).xyz;\n    vec3 ct = texture(iChannel0, p).xyz;\n    if(ct.x<0.99) ct = vec3(0.);\n    //ct.x = pow(ct.x, 4.0);\n    ct = ct.xxx;\n    \n    c.x = bms(co.x*0.999, ct.x*0.1);\n    c.x = pow(c.x, 1.02);\n    c = c.xxx;\n    \n    //c = vec3(c.x);\n    fragColor = vec4(c,1.0);\n}","name":"Buf B","description":"","type":"buffer"}]}