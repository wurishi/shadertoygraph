{"ver":"0.1","info":{"id":"mlsfRn","date":"1692552112","viewed":28,"name":"xy + smoothstep","username":"zhy437488627","description":"xy + smoothstep","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["grid"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 Grid(vec2 uv) {\n    vec3 col = vec3(0.0);\n    vec2 cell = 1.0 - (2.0 * abs(fract(uv) - 0.5));\n    // if(cell.x < 2.0 * fwidth(uv.x)) {\n    //     col = vec3(1.0);\n    // }\n    // if(cell.y < 2.0 * fwidth(uv.y)) {\n    //     col = vec3(1.0);\n    // }\n    // if(abs(uv.x) <= fwidth(uv.x)) {\n    //     col = vec3(1.0,0,0);\n    // }\n    // if(abs(uv.y) <= fwidth(uv.y)) {\n    //     col = vec3(0,1.0,0);\n    // }\n    // return col;\n    col = vec3(smoothstep(2.0 * fwidth(uv.x), 1.9 * fwidth(uv.x), cell.x));\n    col += vec3(smoothstep(2.0 * fwidth(uv.y), 1.9 * fwidth(uv.y), cell.y));\n    col.rb *= smoothstep(1.9 * fwidth(uv.x), 2.0 * fwidth(uv.x), abs(uv.x));\n    col.gb *= smoothstep(1.9 * fwidth(uv.y), 2.0 * fwidth(uv.y), abs(uv.y));\n    return col;\n}\nfloat segment(in vec2 p, in vec2 start, in vec2 end, float w) {\n    float f = 0.;\n    vec2 ba = end - start;\n    vec2 pa = p - start;\n    float proj = clamp(dot(pa, ba) / dot(ba, ba), 0., 1.0);\n    float d = length(proj * ba - pa);\n    if(d <= w) {\n        f = 1.;\n    }\n    return f;\n}\nvec2 fixUV(in vec2 c) {\n    return 3.0 * (2.0 * c - iResolution.xy) / min(iResolution.x, iResolution.y);\n}\nvoid mainImage(out vec4 fragColor, in vec2 fragCrood) {\n    vec2 uv = fixUV(fragCrood);\n    vec3 color = Grid(uv);\n    color = mix(color, vec3(1., 1., 0), segment(uv, vec2(1., 1.), vec2(2., 2.), fwidth(uv.x)));\n    fragColor = vec4(color, 1.0);\n}","name":"Image","description":"","type":"image"}]}