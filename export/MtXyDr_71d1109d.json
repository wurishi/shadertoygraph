{"ver":"0.1","info":{"id":"MtXyDr","date":"1504475503","viewed":223,"name":"Waterworks","username":"nolibab","description":"Port 'Waterworks' by Fizzer","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","waves","water"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float n(vec3 v)\n{\nfloat s=.1*dot(v,v),r_,y_;\nv/=s;\nv.y+=(iTime/65.)*9.;\nvec3 m=fract(v)-.5,l=abs(m);\nr_=fract(dot(sin(floor(v)+step(l.yzx,l)*step(l.zxy,l)*sign(m)/2.)*43.5,vec3(.333)));\ny_=min(length(m)-.15,abs(length((r_<.333)?m.yz:(r_<.666)?m.zx:m.xy)-.1));\nreturn (((r_>.7)?max(y_,max(l.x,max(l.y,l.z))-.25):y_)-.01)*s/2.;\n}\n\nfloat s(vec3 l)\n{\nfloat v=n(l+vec3(0.,-.2,0.));\nreturn min(n(l),(l.y-cos(v*80.-(iTime/65.)*512.)*(.02-.02*smoothstep(0.,.1,v)))/2.8);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\n{\nfloat v=0.,l;\nvec3 m=normalize(vec3(-1.+fragCoord.xy/(iResolution.y/2.),-1.)),y;\nfor(int r=0;r<150;++r)\n  {\n  v+=l=s(y=vec3(-2.,.5,4.)+m*v);\n  if(l<.001) break;\n  }\nfragColor=vec4(v<20.?abs(s(y+.02)-l)/vec3(4.,3.,2.)*200.:vec3(0.), 1.);\n}\n","name":"Image","description":"","type":"image"}]}