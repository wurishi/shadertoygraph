{"ver":"0.1","info":{"id":"MdsBzn","date":"1494678283","viewed":259,"name":"smoke","username":"lovelyH","description":"I was trying to make fire. I end up with this. ","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["smoke"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/// rand\nfloat rand(vec2 n) { \n\treturn fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\t/// UV\n\tvec2 uv= 2.0 * fragCoord / iResolution.xy - vec2(1.0,1.0);\n\tuv.x *= iResolution.x / iResolution.y;\n\n\t/// result\n\tfloat r= 0.0;\n\n\t/// repat whole process few times\n\tfor(float b=0.0;b<6.0;b++){\n\t\tconst float w=8.0;\n\t\tfor( float a=-w;a<=w;a++){\n\t\t\tconst float div= 1.0 / 64.0;\n\t\t\tfloat x= floor( uv.x/div )*div + div/2.0 + a*div;\n\n\t\t\tfloat y= mod( iTime+4.0*rand(vec2(x,0.5+b/16.0)), 4.0 );\n\n\t\t\t/// radius of ball\n\t\t\tfloat rad= div*(w+0.5) * clamp( 0.5*y+0.5, 0.1, 1.0 );\n\n\t\t\t/// ball as light as close to center\n\t\t\tfloat power= clamp( (rad-length(uv-vec2(x,(0.5+0.5*rand(vec2(x,-0.1)))*y-1.0)))/rad, 0.0, 1.0);\n\n\t\t\t/// darker at bottom and top of scene\n\t\t\tfloat h= rand(vec2(x,-0.1*b))*y-1.0;\n\t\t\tpower *= clamp( 1.0-abs(h), 0.0, 1.0 );\n\n\t\t\t/// apply this ball\n\t\t\tr += power;\n\t\t}\n\t}\n\n\t/// get rid of artifacts, look much better than clamp\n\tr= 1.0 - 1.0 / (1.0+r);\n\n\t/// return\n\tfragColor = vec4(r,r,r, 1.0);\n}\n\n","name":"Image","description":"","type":"image"}]}