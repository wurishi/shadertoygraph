{"ver":"0.1","info":{"id":"XcBczy","date":"1722484687","viewed":35,"name":"Mipmap Showcase","username":"Microapple","description":"This shader shows the effect of mipmap and how mip level is calculated in fragment shader.","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["2d","mipmap"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"Xsf3zn","filepath":"/media/a/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"/media/ap/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    //////// Editable Args ////////\n    bool ENABLE_ANIMATION = true;\n    float ANIMATION_START = 0.55f;\n    float STATIC_MIP_LEVEL = 0.0f;\n    float MAX_MIP_LEVEL = 10.0f;\n    float TIME_RATIO = 0.1f;\n    float MAX_PIC_NUM = 10000.0f;\n    float PI = 3.1415926f;\n    \n    \n    float time = ANIMATION_START + (ENABLE_ANIMATION ? iTime * TIME_RATIO : 0.0f);\n    vec2 pos = fragCoord / iResolution.xy;\n    \n    vec2 uv = pos;\n    uv -= vec2(0.5);\n    uv *= 1.0f + cos((time - round(time)) * PI) * (sqrt(MAX_PIC_NUM) - 1.0f);\n    uv += vec2(0.5);\n    \n    vec3 texRes = iChannelResolution[0];\n    vec2 scaledUV = uv * texRes.xy;\n    vec2 uvdx = dFdx(scaledUV);\n    vec2 uvdy = dFdy(scaledUV);\n    \n    float level = max(dot(uvdx, uvdx),dot(uvdy, uvdy));\n    level = 0.5f * log2(level);\n    \n    vec3 color;\n    \n    if (pos.y < 0.1f)\n    {\n        color = vec3(1.0f) * (1.0f - level / MAX_MIP_LEVEL);\n    }\n    else if (pos.x < 1.0f / 3.0f)\n    {\n        color = texture(iChannel0, uv).xyz;\n    }\n    else if (pos.x < 2.0f / 3.0f)\n    {\n        color = textureLod(iChannel0, uv, level).xyz;\n    }\n    else\n    {\n        color = textureLod(iChannel0, uv, STATIC_MIP_LEVEL).xyz;\n    }\n    \n    fragColor = vec4(color,1.0);\n}","name":"Image","description":"","type":"image"}]}