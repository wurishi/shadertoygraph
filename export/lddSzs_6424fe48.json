{"ver":"0.1","info":{"id":"lddSzs","date":"1461119692","viewed":305,"name":"Audio visualizer thing","username":"tomator","description":"Likely riddled with poorly optimized code.","likes":5,"published":1,"flags":64,"usePreview":0,"tags":["music","newbie","visualizer","audiovis"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsX3zl","filepath":"https://soundcloud.com/arkoiz/crypt-of-the-necrodancer-zone-1-level-1","previewfilepath":"https://soundcloud.com/arkoiz/crypt-of-the-necrodancer-zone-1-level-1","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define STEPS 128.\n#define PI 3.14159265\n#define TAU 6.28318512\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.y;\n    uv = uv * 4. - 2.;\n    uv.x -= 1.6;\n    \n    vec2 polar = vec2(sqrt(dot(uv, uv)), atan(uv.y, uv.x));\n    float segment = floor((polar.y/TAU + .5)*STEPS) / STEPS;\n    float audio = texture(iChannel0, vec2(segment, 0.)).x;\n    float bass = texture(iChannel0, vec2(polar.x*.5, 1.)).x;\n    \n    float warp = polar.x - (2.*audio*audio - .5);\n    float aura = (1.- clamp(polar.x*.15, 0., 1.))-(1.-clamp(warp*.8, 0., 1.));\n    \n    float line = warp > .95 && warp < 1. ? 1. : 0.;    \n    float light = warp > .95 ? audio*aura : 0.;\n    \n    vec3 color = mix(vec3(light, light*(sin(segment*PI*10.)*.1+.3), 0.), vec3(0., audio*audio+.3, 1.), line);\n    \n    vec3 glow = mix(vec3(.4, 0., .6), vec3(0., .4, 1.), bass * polar.x * polar.x);\n    color = mix(color, glow * polar.x, warp <= .95 ? 1. : 0.);\n        \n\tfragColor = vec4(color,1.);\n}","name":"Image","description":"","type":"image"}]}