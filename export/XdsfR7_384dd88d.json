{"ver":"0.1","info":{"id":"XdsfR7","date":"1495405881","viewed":506,"name":"Boci Boci Tarka","username":"hadahector","description":"Hungarian kids song played on piano","likes":6,"published":1,"flags":8,"usePreview":0,"tags":["2d","music","piano"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nfloat notehit(vec2 uv, float offset, float note)\n{\n    offset *= 0.5;\n    if ( offset>iTime ) return 0.0;\n    \n    const float unit = 1.0 / 41.0;\n    \n    float p1 =  (uv.y>0.15 && uv.y<0.85 &&\n                 uv.x>unit+unit*note*5.0 && uv.x<unit*5.0+unit*note*5.0\n                ) ? 1.0 : 0.0;\n    \n    return p1 * exp(-3.0*(iTime-offset) );\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    float p1 =  (uv.y>0.15 && uv.y<0.85) ? \n        mod(floor(uv.x * 41.0),5.0) : 0.0;\n    \n    float p2 =\t(uv.y>0.5 && uv.y<0.85) ? \n        mod(floor(uv.x * 41.0 + 2.5),5.0) : 0.0;\n    \n    float kihagy = mod(floor(uv.x * 8.2 + 0.4 ),7.0);\n    kihagy *= mod(floor(uv.x * 8.2 + 5.4 ),8.0);\n    \n    \n    \n     float p3 =\t(uv.y>0.515 && uv.y<0.85) ? \n        mod(floor(uv.x * 41.0+3.0),5.0)-1.0 : 0.0;\n    \n    \n    float p = 0.3 + 0.7 * min(max(0.0,p1 - p2*kihagy),1.0) - 0.3 * min(max(0.0,p3*kihagy),1.0);\n    \n    float times[24] = float[24](\n        01.0, 02.0, 03.0, 04.0, 05.0, 07.0,\n        09.0, 10.0, 11.0, 12.0, 13.0, 15.0,\n        17.0, 18.0, 19.0, 20.0, 21.0, 23.0,\n    \t25.0, 26.0, 27.0, 28.0, 29.0, 31.0);\n    \n    float notes[24] = float[24](\n        0.0, 2.0, 0.0, 2.0, 4.0, 4.0,\n        0.0, 2.0, 0.0, 2.0, 4.0, 4.0,\n        7.0, 6.0, 5.0, 4.0, 3.0, 5.0,\n    \t4.0, 3.0, 2.0, 1.0, 0.0, 0.0);\n    \n    float off = 0.0;\n    float song = 0.0;\n    \n    for (int i=0; i<24; ++i)\n    {\n        song += notehit(uv,times[i],notes[i]);\n    }\n    \n    if (p==1.0) p -= 0.5 * song;\n        \n\tfragColor = vec4(p,p,p,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"vec2 note( float time, float offset, float note)\n{\n    offset *= 0.5;\n    note += -9.0;\n    if ( offset>time ) return vec2(0.0,0.0);\n    float herz = 440.0 * ( note==0.0 ? 1.0 : pow(1.0594630943592952645618252949463,note ));\n    return vec2( sin(6.2831*herz*time)*exp(-3.0*(time-offset)) );\n}\n\n\nvec2 mainSound( in int samp, float time )\n{   \n    vec2 song = vec2(0.0,0.0);\n    \n    float times[24] = float[24](\n        01.0, 02.0, 03.0, 04.0, 05.0, 07.0,\n        09.0, 10.0, 11.0, 12.0, 13.0, 15.0,\n        17.0, 18.0, 19.0, 20.0, 21.0, 23.0,\n    \t25.0, 26.0, 27.0, 28.0, 29.0, 31.0);\n    \n    float notes[24] = float[24](\n        0.0, 4.0, 0.0, 4.0, 7.0, 7.0,\n        0.0, 4.0, 0.0, 4.0, 7.0, 7.0,\n        12.0, 11.0, 9.0, 7.0, 5.0, 9.0,\n    \t7.0, 5.0, 4.0, 2.0, 0.0, 0.0);\n    \n    for (int i=0; i<24; ++i)\n    {\n        song += note(time,times[i],notes[i]);\n    }\n\n    return song;\n}","name":"Sound","description":"","type":"sound"}]}