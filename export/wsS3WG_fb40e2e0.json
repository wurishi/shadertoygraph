{"ver":"0.1","info":{"id":"wsS3WG","date":"1550089747","viewed":148,"name":"diffractoscope 4","username":"pde","description":"play with the mouse; try out the corners; also watch time evolution","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["moire","tentacles"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void coords(in vec2 coord, out float radius, out float angle, out vec2 xy)\n{\n    // transform input coord into our target space, both as cartesian xy\n    // and polar radius & angle\n    vec2 uv = coord/iResolution.xy;\n    uv.x = uv.x * iResolution.x / iResolution.y;    \n    xy = (uv - 0.5) * 2.0;\n    xy.x = xy.x -0.8;\n    radius = length(xy);\n    angle = (atan(xy.y/xy.x));\n    return;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 xy, mouse_xy;\n    float angle, radius, mouse_a, mouse_r;\n    float pi = 3.141592654;\n    // transform both the pixel and mouse coordinates\n    coords(fragCoord, radius, angle, xy);\n    coords(iMouse.xy, mouse_r, mouse_a, mouse_xy);\n    angle = angle+mouse_a;\n    \n    // we have a growing oscillation that winds back and forwards with log-increasing period\n    float oscTime = pow(iTime,1.0) * cos(log(iTime+1.0));\n    \n    // shimmy is the wiggle in the radial tentacle pattern\n    float shimmy = mouse_r*oscTime*cos(12.0*radius + iTime*2.0)*exp(-3.0*radius);\n    \n    // effective angle\n    float e_angle=angle+shimmy*0.2;\n       \n    // our red color is a swirling shiny pattern\n    float red=abs(sin(iTime+angle+radius+shimmy));\n    \n    // this defines the radius of the pattern\n    float radius_of_shape=0.7 + 0.4 * sin (24.0 * pi * e_angle * (10.0 *mouse_a)) * sin (4.0*pi*mouse_a*e_angle);\n    float blue = 0.4+ radius_of_shape - radius;\n    //blue = 1.0;\n    float green = 0.0;\n    if (radius > radius_of_shape) {\n        green = -blue; blue=0.0;red=0.0;\n    }\n    \n    \n    fragColor = vec4(red, green, blue, 0.0);\n\n}","name":"Image","description":"","type":"image"}]}