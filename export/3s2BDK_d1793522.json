{"ver":"0.1","info":{"id":"3s2BDK","date":"1590948020","viewed":106,"name":"1D Cellular Automata","username":"akohdr","description":"Draw path (slowly) to see application of 1D cellular automata.","likes":6,"published":1,"flags":32,"usePreview":0,"tags":["illusion","automata"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 k, in vec2 p) {\n    k = texture(iChannel0, p/iResolution.xy);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define RULE 30u\n\n//#define RULE rs[uint(mod(iTime,5.))]\n//uint rs[] = uint[](30u, 110u, 30u, 110u, 154u);\n\n//#define RULE uint(mod(float(iFrame>>5<<1),256.))\n\n#define iT iTime\n#define iF float(iFrame)\n#define iM iMouse.xy\n#define iR iResolution.xy\n#define TAU 6.28\n\n#define SC(a) vec2(sin(a), cos(a))\n\n#define isSet .r>.1\n#define tx(p) texture(iChannel0, p/iR)\n#define tdx(d) tx(vec2(mod(iR.x+p.x+d,iR.x),p.y))\n\nvoid mainImage( out vec4 k, in vec2 p )\n{\n\tp.x++;\t\t\t\t\t\t\t\t// scroll left\n   \n    uint init = uint(tdx(-1.)isSet)<<2\t// get prior 3-bit state\n\t\t      | uint(tdx( 0.)isSet)<<1\n              | uint(tdx( 1.)isSet);\n    \n    vec2 v = (iT<TAU) ? (1.+.8*SC(iT))*iR/2. : vec2(0);\t// circular path\n    \n    float cir = .1/(length(p-v)), \t\t// circle seed \n          mou = .1/(length(p-iM)), \t\t// mouse seed \n           ca = float(RULE>>init&1u);\t// automata\n    \n    k  = vec4(ca);\n    \n//\tk += vec4(cir);\n\tk += vec4(mou);\n    \n    k *= 2.*p.x/iR.x;\t\t\t\t\t// left fade (prevents wrap)\n}\n\n\n","name":"Buffer A","description":"","type":"buffer"}]}