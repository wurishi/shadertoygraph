{"ver":"0.1","info":{"id":"fsVGDK","date":"1665931447","viewed":296,"name":"Neon Light","username":"johnao","description":"Wrote a 2D light effect that looks kind of cool.","likes":15,"published":1,"flags":0,"usePreview":0,"tags":["2d","effect"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// sampling directions\n#define N_DIRECTION 32\n#define fN_DIRECTION 32.0\n\n// constants\n#define PI 3.1415926535\n#define TAU 6.2831853\n#define INF 2.0\n\n#define COLOR0 vec3(0.0, 0.0, 0.11764705882352941)\n#define COLOR1 vec3(0.615686274509804, 0.9607843137254902, 1.0)\n#define COLOR2 vec3(0.10980392156862745, 0.4588235294117647, 0.9215686274509803)\n#define COLOR3 vec3(0.4666666666666667, 0.6392156862745098, 0.8745098039215686)\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nfloat disSeg(vec2 o,vec2 d, vec2 a, vec2 b){\n    vec2 e=a-b;\n    vec2 f=a-o;\n    if(f.y*e.x<f.x*e.y)return INF;\n    float det=d.x*e.y-d.y*e.x;\n    if(det==0.)return INF;\n    float s=(f.x*e.y-f.y*e.x)/det;\n    float t=(d.x*f.y-d.y*f.x)/det;\n    if(t>=0.&&t<=1.&&s>0.)return s;\n    return INF;\n}\n\nvec3 sampling(vec2 o, vec2 d){\n    vec3 col=COLOR0;\n    float t,s;\n    if((t=disSeg(o,d,vec2(.5,.3),vec2(.5,.7)))<INF){\n        col=(COLOR1*exp(-3.*t)+COLOR2*1.3*exp(-.01*t))*1.1;\n    }else if((t=disSeg(o,d,vec2(.5,.7),vec2(.5,.3)))<INF){\n        col=COLOR3*2.7*exp(-3.*t);\n    }\n    s=t;\n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 s=vec3(0.);\n    vec2 uv=(fragCoord+.5*vec2(max(0.,iResolution.y-iResolution.x),max(0.,iResolution.x-iResolution.y)))/max(iResolution.x,iResolution.y);\n    float n=rand(uv+iTime)*3.;\n    for(int i=0;i<N_DIRECTION;++i){\n        s+=sampling(uv,vec2(sin(n+float(i)*TAU/fN_DIRECTION),cos(n+float(i)*TAU/fN_DIRECTION)));\n    }\n    s=s/fN_DIRECTION;\n    fragColor = vec4(s,1.);\n}\n","name":"Image","description":"","type":"image"}]}