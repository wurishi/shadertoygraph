{"ver":"0.1","info":{"id":"XlKXRy","date":"1484817881","viewed":214,"name":"Fleur-de-lis-like pattern","username":"nexor","description":"An alternating Fleur-de-lis-like pattern with vignetting and hole post-process effects.","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["distancefield","fleurdelis"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"precision highp float;\n\n#define sin1(x) (.5+sin(x)*.5)\n#define cos1(x) (.5+cos(x)*.5)\n#define saw1(x) abs(fract(x))\n#define saw(x) (abs(fract(x)-.5)*2.)\n#define ss smoothstep\n\nconst float pi = 3.14159265;\nconst float pi2 = pi*2.;\nconst float pi4 = pi*4.;\n#define resolution iResolution.xy\n#define time (iTime*.5)\n\nvec3 rgb2hsv(vec3 c)\n{\n\tvec4 X = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = mix(vec4(c.bg, X.wz), vec4(c.gb, X.xy), step(c.b, c.g));\n\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n\tvec4 k= vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + k.xyz) * 6.0 - k.www);\n\treturn c.z * mix(k.xxx, clamp(p - k.xxx, 0.0, 1.0), c.y);\n}\n\nvec2 mm(vec2 p)\n{\n\treturn vec2(min(p.x,p.y),max(p.x,p.y));\n}\nvec2 rc(vec2 p)\n{\n\tvec2 m=mm(p);\n\tfloat r=m.y/m.x;\n\tfloat s=step(p.y,p.x);\n\treturn vec2(mix(1.,r,s),mix(r,1.,s));\n}\n\nmat2 rot(float a)\n{\n\tfloat c=cos(a);\n\tfloat s=sin(a);\n\treturn mat2(-s,c,c,s);\n}\n\nfloat gr(float t,float d)\n{\n\treturn smoothstep(.0,clamp(.0,1.,d),fract(time*t))+floor(time*t);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy/resolution.xy;\n\tvec3 col=vec3(.0);\n\tvec2 p=-1.+2.*uv;\n\tp*=rc(resolution);\n\tfloat t=gr(.25,.5);\n\tfloat g=gr(.5,.5);\n\n\tvec2 q=p;\n    q*=3.;\n\tq=saw(q+.5)-.5;\n    q*=rot(t*pi/4.);\n\tfloat a=atan(q.y,q.x);\n\tfloat d=length(q);\n\tfloat m=max(abs(q.x),abs(q.y));\n\n\tcol=mix(vec3(1.,.8,.0),\n\t\tvec3(.1,.4,.8)\n\t\t,ss(.5,.495,saw1(a*4./pi4\n\t\t\t+sin((g*.5+t)*pi)*ss(.5,.0,d)\n\t\t\t)));\n    \n    vec3 hsv = rgb2hsv(col);\n    hsv.x += t*.1;\n    col = hsv2rgb(hsv);\n    vec2 r = saw(150.*p);\n\tcol*= r.x*r.y;\n\t\t\n\tcol*=1.3;\n    col*=ss(2.,1.,length(p));\n\n\tfragColor = vec4( col, 1.0 );\n}","name":"Image","description":"","type":"image"}]}