{"ver":"0.1","info":{"id":"lfjBDt","date":"1725669578","viewed":33,"name":"cellular automata artefox","username":"artefox","description":"pause the shader and press alt+enter to step the simulation\npress alt+down arrow to reset","likes":0,"published":1,"flags":32,"usePreview":0,"tags":["cellularautomata"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord / iResolution.xy;\n    float res = 4.0;\n    uv /= res;\n    \n    vec4 col = texture(iChannel0, uv); \n    \n    fragColor = vec4(col);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec4 getTexture(vec2 coord) {\n    if (((coord.x < 0.0) || (coord.y < 0.0)) || ((coord.x > iResolution.x) || (coord.y > iResolution.y))) {\n        return vec4(0.0, 0.0, 0.0, 1.0);\n    }\n    return texelFetch(iChannel0, ivec2(coord), 0);\n}\n\nint neighbourCount(vec2 coord) {\n    int count = 0;\n    if (getTexture(vec2(coord.x - 1.0, coord.y - 1.0)) == vec4(1.0, 1.0, 1.0, 1.0)) { count += 1; }\n    if (getTexture(vec2(coord.x      , coord.y - 1.0)) == vec4(1.0, 1.0, 1.0, 1.0)) { count += 1; }\n    if (getTexture(vec2(coord.x + 1.0, coord.y - 1.0)) == vec4(1.0, 1.0, 1.0, 1.0)) { count += 1; }\n    if (getTexture(vec2(coord.x - 1.0, coord.y      )) == vec4(1.0, 1.0, 1.0, 1.0)) { count += 1; }\n    \n    if (getTexture(vec2(coord.x + 1.0, coord.y      )) == vec4(1.0, 1.0, 1.0, 1.0)) { count += 1; }\n    if (getTexture(vec2(coord.x - 1.0, coord.y + 1.0)) == vec4(1.0, 1.0, 1.0, 1.0)) { count += 1; }\n    if (getTexture(vec2(coord.x      , coord.y + 1.0)) == vec4(1.0, 1.0, 1.0, 1.0)) { count += 1; }\n    if (getTexture(vec2(coord.x + 1.0, coord.y + 1.0)) == vec4(1.0, 1.0, 1.0, 1.0)) { count += 1; }\n    return count;\n}\n\nvoid plot(vec2 coord, out vec4 color, vec2 uv) {\n    if ((uv.x == floor(coord.x)) && (uv.y == floor(coord.y))) color = vec4(1.0, 1.0, 1.0, 1.0);\n}\n\nvoid summonGlider(vec2 coord, out vec4 col, vec2 uv) {\n    plot(vec2(coord.x      , coord.y      ), col, uv);\n    plot(vec2(coord.x + 1.0, coord.y      ), col, uv);\n    plot(vec2(coord.x + 2.0, coord.y      ), col, uv);\n    plot(vec2(coord.x + 2.0, coord.y + 1.0), col, uv);\n    plot(vec2(coord.x + 1.0, coord.y + 2.0), col, uv);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 realCoord = fragCoord - 0.5;\n    \n    bool isAlive = getTexture(realCoord) == vec4(1.0);\n    int neighbours = neighbourCount(realCoord);\n    \n    if (neighbours < 2) isAlive = false;\n    if (neighbours > 3) isAlive = false;\n    if (neighbours == 3) isAlive = true;\n    \n    vec4 state = isAlive ? vec4(1.0, 1.0, 1.0, 1.0) : vec4(0.0, 0.0, 0.0, 1.0);\n    vec4 col = vec4(0.0, 0.0, 0.0, 1.0);\n    if (iFrame == 0) {\n        summonGlider(vec2(25, 25), col, realCoord);\n        summonGlider(vec2(50, 50), col, realCoord);\n        summonGlider(vec2(75, 75), col, realCoord);\n        summonGlider(vec2(100, 100), col, realCoord);\n    } else {\n        col = state;\n    }\n    fragColor = col;\n}","name":"Buffer A","description":"","type":"buffer"}]}