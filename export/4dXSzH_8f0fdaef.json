{"ver":"0.1","renderpass":[{"outputs":[],"inputs":[],"code":"#define time iTime*.5\n#define resolution iResolution.xy\n\nvec3 ldir;\nfloat ot;\n\nfloat julia(vec2 p) {\n\tp=p*2.+vec2(0.,-0.12);\n\tot=1000.;\n\tfloat z = 0.0;\n\tint iter;\n\tfor (int i=0; i<18; i++) {\n\t\tfloat l=dot(p,p);\n\t\tot=min(ot,abs(l-.6));\n\t\titer = i;\n\t\tif(l>4.0)\n\t\t\tbreak;\n\t\tfloat x = p.x*p.x-p.y*p.y;\n\t\tfloat y = 2.*p.x*p.y;\n\t\tp = vec2(x,y)+vec2(0.285,0.01);  \n\t}\n\treturn dot(p,p)*.2;\n}\n\nfloat light(vec2 p) {\n\tvec2 d=vec2(0.,.003);\n\tfloat d1=julia(p-d.xy)-julia(p+d.xy);\n\tfloat d2=julia(p-d.yx)-julia(p+d.yx);\t\n  \tvec3 n1=vec3(0.,d.y,d1);\n  \tvec3 n2=vec3(d.y,0.,d2);\n  \tvec3 n=normalize(cross(n1,n2));\n  \tfloat diff=max(0.,dot(ldir,n))*.6;\n\tvec3 r=reflect(vec3(0.,0.,1.),ldir);\n\tfloat spec=pow(max(0.,dot(r,n)),25.)*.4;\n  \treturn (diff+spec+.15)*max(0.4,1.-julia(p));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 p = fragCoord.xy/resolution.xy-.5;\n\tvec2 aspect=vec2(resolution.x/resolution.y,1.);\n  \tp*=aspect;\n\tvec3 lightpos=vec3(sin(time*3.)*.8,cos(time)*.9,-1.);\n\tlightpos.xy*=aspect*.5;\n\tldir=normalize(vec3(p,-julia(p))+lightpos);\n  \tfloat l=light(p);\n  \tot=max(1.-ot*.7,0.);\n\tvec3 col=l*vec3(ot*ot*1.45,ot*.6,ot*ot*.75);\n\tcol+=pow(max(0.,.2-length(p+lightpos.xy))/.2,5.);\n\tcol*=pow(max(0.,1.-length(p+lightpos.xy)*.3),2.5);\n\tfragColor = vec4(col+.03, 1.0 );\n}\n","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"4dXSzH","date":"1396424387","viewed":242,"name":"Julia Set-rose","username":"thu_yumeng","description":"Thanks to the editor of the curved trees","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["fractal","normalmap","curvedtrees"],"hasliked":0,"parentid":"","parentname":""}}