{"ver":"0.1","info":{"id":"3stSW7","date":"1572181805","viewed":228,"name":"(The Flash) vs (Sonic) vs (Goku)","username":"rmmcal","description":"Total: 164 seconds \n=> (The Flash) vs (Sonic) vs (Goku) vs (Wheel Star) - Animation Stick","likes":16,"published":1,"flags":64,"usePreview":0,"tags":["2d","animation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4ts3DX","filepath":"https://soundcloud.com/lefathy/the-flash-theme-soundtrack","previewfilepath":"https://soundcloud.com/lefathy/the-flash-theme-soundtrack","type":"musicstream","channel":3,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/////////////////////////////////////////////////////////////\n/////   ... (The Flash) vs (Sonic) vs (Goku) ...    ///////// \n/////////////////////////////////////////////////////////////\n// Brasil/Amazonas/Manaus                                       \n// (The Flash) vs (Sonic) vs (Goku)                              \n// Created by Rodrigo Cal (twitter: @rmmcal) - 2019/10\n// - https://www.shadertoy.com/view/3stSW7\n/////////////////////////////////////////////////////////////\n// -------------------------------------------------------\n//\n//  Speed run....\n//\n// Inspiration:\n// => https://en.wikipedia.org/wiki/Xiao_Xiao\n// => https://en.wikipedia.org/wiki/The_Flash_(2014_TV_series)\n// => https://en.wikipedia.org/wiki/Sonic_the_Hedgehog\n// => https://en.wikipedia.org/wiki/Goku\n// -------------------------------------------------------\n/////////////////////////////////////////////////////////////\n\nconst float PI = 3.14159265359;\n\nmat2 rotate(float a)\n{\n    return mat2(cos(a), sin(a), -sin(a), cos(a));\n}\n\nvec2 getPath(vec2 p)\n{\n    p.xy = rotate(cos(p.x+cos(p.x*0.4))*.0005)*p.xy;\n    p.xy = rotate((-cos((p.x+.8)*.3)*.0004))*p.xy;\n    p.xy = rotate((+cos((p.x+.5)*3.)*.00005))*p.xy;\n\treturn p;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n//https://iquilezles.org/articles/distfunctions2d\nfloat sdLine( in vec2 p, in vec2 a, in vec2 b )\n{\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n////////////////////////////////////////////////////////////////////////////////\n\nvoid mapArm(inout float d, vec2 pf, float ti ) {\n    float tt1 = abs(fract(pow(ti+.5,2.)*0.05)*2.-1.);\n    float t1 = (tt1*2.-1.);\n\n    float tt2 = abs(fract(pow(ti+.4,2.)*0.05)*2.-1.);\n    float t2 = (tt2*2.-1.);\n\n    vec2 pl = pf + vec2(.0,+.03 );\n    d = min(d, 1.-smoothstep(0.,.2, .2-sdLine(pl,vec2(-.0,-0.0),vec2(0.025*t1,-.05))));  // arm up  \n    d = min(d, 1.-smoothstep(0.,.2, .2-sdLine(pl,vec2(-.0,-0.0),vec2(-0.025*t2,-.05)))); // arm up\n\n    vec2 pl1 = pl + vec2(-.025*t1,+.05);\n    vec2 pl2 = pl + vec2( .025*t2,+.05);\n    d = min(d, 1.-smoothstep(0.,.2, .2-sdLine(pl1,vec2(-.0,-0.0),vec2(0.025,-.02)))); // arm down \n    d = min(d, 1.-smoothstep(0.,.2, .2-sdLine(pl2,vec2(-.0,-0.0),vec2(0.025,-.02)))); // arm down\n}\n\nvoid mapLeg(inout float d, vec2 pf, float ti ){\n    float tt1 = abs(fract(pow(ti*2.,2.)*0.05)*2.-1.);\n    float t1 = (tt1*2.-1.);\n\n    float tt2 = abs(fract(pow(ti*2.+.01,2.)*0.05)*2.-1.);\n    float t2 = (tt2*2.-1.);\n\n    vec2 pl = pf + vec2(.0,+.1 );\n    d = min(d, 1.-smoothstep(0.,.2, .2-sdLine(pl,vec2(-.0,-0.0),vec2(0.025*t1,-.05))));  // leg up  \n    d = min(d, 1.-smoothstep(0.,.2, .2-sdLine(pl,vec2(-.0,-0.0),vec2(-0.025*t2,-.05)))); // leg up\n\n    vec2 pl1 = pl + vec2(-.025*t1,+.05);\n    vec2 pl2 = pl + vec2( .025*t2,+.05);\n    d = min(d, 1.-smoothstep(0.,.2, .2-sdLine(pl1,vec2(-.0,-0.0),vec2(-0.025+t1*.03,-.06)))); // leg down \n    d = min(d, 1.-smoothstep(0.,.2, .2-sdLine(pl2,vec2(-.0,-0.0),vec2(-0.025-t2*.03,-.06)))); // leg down\n}\n\nvoid mapBody(inout float d, vec2 pf){\n    d = min(d, 1.-smoothstep(0.,.2, .2-sdLine(pf,vec2(0.),vec2(.0,-.1)))); // body\n}\n\nvoid mapHead(inout float d, vec2 pf, float ti){\n\td = min(d, 1.-smoothstep(0.,.2, .22-length(pf-vec2(0.,cos(pow(ti*1.+.01,2.))*.003)))); // head\n}\n\nvoid mapTheFlash(inout float d, vec2 pf, float ti){\n    mapHead(d, pf, ti); // head\n \tmapBody(d, pf);     // body\n   \tmapArm(d, pf, ti);  // arm\n    mapLeg(d, pf, ti);  // leg\n}\n\nvoid drawWind(inout vec3 c, vec2 ph, vec2 pb , float ti){\n    float ty = min( 0.01,  floor((pb.y+.05)*20.)/20.-.025) ;\n    float tx =  -ti*ti*0.001;\n    float d = min(1., 1.-smoothstep(0.,.2, .2-sdLine(pb+cos(vec2(0.,ti*ti*1.+pb.x*50.))*.01*pb.x,vec2(-0.01+ty,ty),vec2(tx+ty,ty)))); // wind\n    c = mix(c,vec3(0), clamp(ti*.01,0.,.5)*clamp(clamp(pb.x*.15, -0.2, 0.) + .2-smoothstep(0.,.03,d), 0., 1.));\n}\n\nvoid drawWheelStar(inout vec3 c, vec2 pb, float ti){\n        float timeStar = clamp(ti-3., 0., 1.);\n        vec2 pf = pb-vec2(0.+cos(ti*.3)*1.+.8,-0.25);\n        pf -= vec2(.5,0.1 +abs(cos(ti*2.))*.2);\n        float aStar = cos(atan(pf.x,pf.y)*5.-ti*ti)*.1;\n        c = mix(c,vec3(0), clamp(smoothstep(0.,.01, aStar*timeStar-length(pf)), 0., 1.) );\n        c = mix(c,vec3(0), clamp(smoothstep(0.,.01, .01-abs(.1-length(pf))), 0., 1.) );\n}\n\nvoid drawSonic(inout vec3 c, vec2 pb, float ti) {\n    float t1 = clamp(ti-37., 0., 1.); \n    float t2 = clamp(ti-63., 0., 1.); \n    float t3 = clamp(ti-62.5, 0., 1.); \n    float t1inv = 1.-t1; \n    float t2inv = 1.-t2; \n    vec2 pf = pb-vec2(t3/3.+cos(ti*.3)*1.-1.8-.3*(((((t1inv*t1inv*t1inv))))),-0.25 + 1.5*t1inv*cos(ti*1.3));\n    pf -= vec2(.5,0.1 +abs(cos(ti*2.))*.12);\n    float aStar = mod(atan(pf.x,pf.y)*5.-ti*ti,PI*1.)*.1;\n    float ts = sin(t3*t3*PI*10.);\n    c = mix(c,vec3(0),  clamp(smoothstep(0.,.01,  (1.-ts)*t2inv*t2inv*t1*.1- (.7+aStar)*length(pf)), 0., 1.) );\n    c = mix(c,vec3(1), ts);\n}\n\nvoid drawGoku(inout vec3 c, vec2 p, float ti) {\n    float t1 = clamp((ti-80.)/10., 0., 1.); \n    float t2= clamp((ti-90.)/1., 0., 1.); \n    vec2 pf = p;\n    vec2 pg = vec2(4.*t1-2.,.4);\n    float ft = mod(atan(pf.x,pf.y)*200.,1.)+.1;\n    float d = ( smoothstep(0.,.25, .015-sdLine(pf,vec2(-2.,0.4),pg)));\n    c = mix(c,vec3(0), (1.-t2)*clamp(smoothstep(0.,.01, d), 0., 1.) );\n    c = mix(c,vec3(0), (1.-t2)*clamp(smoothstep(0.,.01, ft*.03-length((pf-pg)*vec2(.5,1.))), 0., 1.) );\n}\n\nvoid drawBoom(inout vec3 c, vec2 ph,  vec2 pb,  vec2 pt, float ti) {\n    float t1 = clamp((ti-121.8)*5., 0., 1.);\n    float t2 = clamp((ti-121.98)*5., 0., 1.); \n\n    float tx1 = pow(abs((122.)-1.)*.2,2.)/1.; \n    c = mix(c,vec3(0), clamp(smoothstep(0.,.01, .1-length(ph-vec2(tx1,1.-t1))), 0., 1.) );\n    c = mix(c,vec3(0), clamp(smoothstep(0.,.01, t2-length(ph-vec2(tx1,1.-t1))), 0., 1.) );\n\n    float d = 1.;\n    d = min(d, 1.-smoothstep(0.,.2, .2-sdLine(ph,vec2(tx1,10.),vec2(tx1, 1.-t1))));\n    c = mix(c,vec3(0), (1.-pow(t1,8.))*clamp( 1.-smoothstep(0.,.15,d), 0., 1.));\n}\nvoid mapGrass(inout float d, vec2 ph, vec2 pt, float ti) {\n    vec2 rep = vec2(+floor(pt.x*.2)/.2+2.3,0.0);\n\tfloat tb = 0.;\n    vec2 pbuild = vec2(mod(ph.x/10., .01)*10.-0.05, ph.y);\n    d = min(d, 1.-smoothstep(0.,.1, .1-sdLine(pbuild,vec2(tb,0.),vec2(tb, abs(cos(ph.x*1.)+.5)*0.03)))); // bar grass\n}\n\nvoid mapStartBar(inout float d, vec2 ph, float ti) {\n\td = min(d, 1.-smoothstep(0.,.2, .22-sdLine(ph,vec2(0.,0.0),vec2(0.,.2)))); // bar start\n}\n\nvoid mapCloudsBar(inout float d,  vec2 ph, vec2 pt, float ti) {\n    d = min(d, 1.-smoothstep(0.,.2, .22-sdLine(ph,vec2(+floor(pt.x*.2)/.2+2.1,0.5),vec2(+floor(pt.x*.2)/.2+2.3,.5)))); // bar clouds\n}\n\nvoid drawTheFlash(inout vec3 c, vec2 pf, vec2 ph, vec2 pb, float ti) {\n    float d = 1.;\n    mapTheFlash(d, pf, ti);\n    c = mix(c,vec3(0), 1.-smoothstep(0.,.01,d));\n}\nvoid drawBgScene(inout vec3 c, vec2 ph, vec2 pt, float ti) {\n    float d = 1.;\n    d = min(d, ph.y); \t\t\t\t\t// floor\n \tmapStartBar( d,  ph, ti);\t\t\t// start bar\n    mapCloudsBar( d, ph, pt, ti);\t\t// \"cloud\"\n    mapGrass(d, ph, pt, ti);\t\t\t// grass\n    c = mix(c,vec3(0), 1.-smoothstep(0.,.01,d));\n}\nvoid drawFadeOutEnd(inout vec3 c, float tEnd, float tDuration, float ti){\n    c = mix(c,vec3(0), clamp((ti-161.)/2., 0., 1.)); // fade out\n}\n\nfloat getTime(float totalTime) {\n    return 1.*(fract((iTime+ 0.)/totalTime))*totalTime;\n}\n\nvoid setSlowMotion(inout vec2 p, inout float ti, float tStart, float tsDuration, float tEnd, float tsEnd){\n    float tspeed = clamp((ti-tStart)/tsDuration, 0., 1.);\n    float tspeed2 = 1.-clamp((ti-tEnd)/tsEnd, 0., 1.); // tsEnd... speed time to normal...\n    float tsp = abs(tspeed*2.-1.);\n    float speed = (max(.0,(pow( tsp *1.1, 3.)))*.5+.5);\n    ti = ti - tspeed2*tspeed*6.7 ; \n    float timeBounce = clamp(ti*.3, 0., 1.);\n    p*=.0+abs(cos(timeBounce*10.))*(1.-timeBounce)+sqrt(sqrt(sqrt(ti*2.)))*(tsp*.5+.5);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n\tvec2 a = vec2(iResolution.x/iResolution.y, 1.);\n\tvec2 p = (uv-.5)*a; \n  \n\tfloat ti = getTime(164.);  \n    vec2 ps = p;\n \tsetSlowMotion( ps,   ti,  121.8, 7.,  127.8, 5.); // slow motion [121.8 ... 127.8] sec. \n    \n    float tx = pow(abs((ti)-1.)*.2,2.)/1.;      \n    vec2 pc = getPath(vec2(tx+.5,0.5));    // center\n    vec2 ph = getPath(ps+vec2(tx,0.));     // path (inclination / mountain) \n    vec2 pt = vec2(tx+.15,0.2); \n    vec2 pb = ph-pt;\n    vec2 pf = pb * rotate(-.5 + .5/((ti*ti)*.01+1.)); // the flash speed inclination\n \n    vec3 c = vec3(1.);\n    drawBgScene( c, ph, pt, ti);      // backgound\n    drawTheFlash(c, pf, ph, pb,  ti); // the flash\n \tdrawWind(c, ph, pb, ti);          // wind / flash / sparkle\n    drawWheelStar(c, pb, ti);         // just a wheel... (wheel of the time) / (wheel of the life) / (wheel of the knowledge)   \n    drawSonic(c, pb, ti);             // sonic\n    drawGoku(c, p,  ti);              // fly goku\n    drawBoom(c, ph, pb, pt, ti);      // boom on slow motion\n    drawFadeOutEnd(c, 161., 2., ti);  // the end...\n  \n    fragColor = vec4(c,1.0);\n}","name":"Image","description":"","type":"image"}]}