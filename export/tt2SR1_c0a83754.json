{"ver":"0.1","info":{"id":"tt2SR1","date":"1565101622","viewed":79,"name":"Shelf Depletion Check","username":"oemfoe","description":"A shader to check for shelf depletion\n\nClick to recalibrate image for changes!","likes":0,"published":3,"flags":34,"usePreview":0,"tags":["computervisionshelfdepletioncheck"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Buffer A compares an initial webcam image (Buffer B) with the current\n// webcam image.\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    float total = 0.;\n    for (int dx = -2; dx <= 2; dx++)\n        for (int dy = -2; dy <= 2; dy++)\n        {\n            vec2 uv2 = (fragCoord + vec2(dx, dy)) / iResolution.xy;\n            float s = texture(iChannel0, uv2.xy).x;\n            total += s;\n        }\n    \n    float pct = total / 24.;\n\n    if (pct > 0.9)\n        fragColor = vec4(1., 0., 0., 1.);\n    else\n        fragColor = vec4(texture(iChannel1, uv.xy).xyz * .5, 1.0);\n}\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n\n    vec3 orig = texture(iChannel0, uv.xy).xyz;\n    vec3 curr = texture(iChannel1, uv.xy).xyz;\n   \tvec3 diff = abs(orig - curr);\n    vec3 c = vec3(0.);\n    if (length(diff) > .16)\n        c = vec3(1.);\n    \n    fragColor = vec4(c, 1.0);\n}\n","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord/iResolution.xy;\n    if (iTime < 1.0 || iMouse.z > 0.)\n    {\n        fragColor = vec4(texture(iChannel0, uv).xyz, 1.);\n    }\n    else\n    {\n        fragColor = vec4(texture(iChannel1, uv).xyz, 1.);\n    }\n}","name":"Buffer B","description":"","type":"buffer"}]}