{"ver":"0.1","info":{"id":"tsScDV","date":"1587332504","viewed":420,"name":"[4k] String Theory","username":"LIA","description":"4kb intro released @ Revision Online 2020 by LIA\nCode: Kali - Music: Uctumi\nThanks to Fabrice Neyret for code minification","likes":24,"published":1,"flags":64,"usePreview":0,"tags":["intro","4k","demoscene","fractals"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4t23DW","filepath":"https://soundcloud.com/uctumi/string-theory-4kb-intro-music","previewfilepath":"https://soundcloud.com/uctumi/string-theory-4kb-intro-music","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// \"String Theory\" by LIA \n\n// 4kb intro released at Revision Online 2020\n// Code by Kali. Music by Uctumi.\n\n// In these hard times we must strengthen the strings \n// that keep us attached to each other.\n\n\n#define T        iChannelTime[0]\n#define s(a,b,c) smoothstep(a,b,c)\n#define R(a)     mat2( cos( a - vec4(0,33,11,0) ))\n#define L        length\n#define v        vec3\n\nvoid mainImage(out vec4 O, vec2 u )\n{\n    vec2  U = u / iResolution.xy,        \n          V = fract( (U+T) * vec2(23.342, 85.742) );     // uvh\n          V += dot(V,V+23.45);\n    float h = .5, H = fract(V.x * V.y),                  // hash*.5\n    \t  s = s(91., 1e2, T),                              // spl\n          x = 1. - U.x * s - U.y * (1. + s),                     // [INJECT]\n          f = s(115., 121., T),                            // fad\n          t = -1.13 + T * .1 * (1. + f * .13),\n          t2 = mod(T, 1.1968), g = 0., d = H * .3,                // td\n          c = 3.1416,                                    // ( c = temporary local variable )\n          r = 9.9 - 6.5 * s(.4,.9,sin(t+3.55+s*1.3));   // rad\n    t < .0  ? t *= h : t; \n    c = mod(t/c, 3.);                                    // tl \n    c = s(.7, .75, c) + s(1.93, 2., c) + s(2.9, 3., c);        // tr\n    c = mod( x + c, 3.) -h;                              // sel\n    v S = step(-h, -v( c, abs(c-vec2(1,2))) );           // st*\n    c = s(109.,112.,T),                                  // fin\n        \n    U.x += sin(U.y*5.+T*3.) *c*.1;\n    U -= h;\n    U.x *= 1.77; U *= 1. - (- s(48., 52., T) * 1.3 + s(52., 57., T) * 2. - s(57., 62., T) + s) * .4;\n    s > .01 ? t += t : t;\n    c > h   ? (S-=S, S.z++) : t;\n \n    c = 1. + cos(t+t);\n    v  C = v( 0, h - c * h + S.y * h, -6.5 +(2.7 - step(0.01,s) * h) *c -S.z * 1.5 ), p,        // ro\n       D = v( U * R( sin(t * 4.) * h ) , .45); D /= L(D);       // dir\n    mat2 r1 = R(t * (2.15 -s * .15) + .3),                         // rot*\n         r2 = R(1. + s * .1),\n         r4 = R(t * (1. - S.y * 2.));\n    \n    int i=0, j;\n    for (; i++ < 130; ) {\n    \tp = C +  d * D; \n\t\tc = L(p) - r;                                    // sph\n        p.xz *= r1;\n        p.xy *= r2;\n        p.yz *= R(s(47., 62., T) * -6.);\n        p.yz *= R(S.z * T* 1.5 * step(s,.01));\n        for ( j=0; j++ < 30; )\n          ( p.x *= 1. - (S.x + S.z) / h) < 0. ? p.xy = -p.xy : u,\n            p *= 1.17, p.x -=1.45 - S.z * .3,\n            p.xz *= r4,\n            p.yz *= R(1.);\n\n        v l = v( L(max(v(0),abs(p)-2.)), L(p)-2., L(p.xz)-2. );\n        c = max( c*S.y, dot(l, S) * .008 ); // pow(1.17, -30.) );\n        if ( c < .002 && S.x > -S.y || d > 8. ) break;\n        g +=   exp(-.04*d*d) * (S.x + S.z) * s(0., 1., d+S.z)\n\t\t     + sin( d * .3 - t2*2.125 ) * S.y;\n        d += max( .01, abs(c) )*.2; \n    }\n    \n\tc = sin( t2*5.25*(2.-step(T,20.))*S.z +2.5*S.z* clamp(t,0.,1.) )\n\t* (h+S.z) * step(T,110.5) * (S.x+S.z);\n\tO.rgb =  mat3( 1.7,.7,h, h,.7,1.7, .7,1.7,h ) * S \n           * g*g/1e4 * ++c;\n    \n    if (d > 8.) {\n        p = D + v( .3 , .4 , C.z*.1 +D.y );\n        for( i=0; i++ < 8; )\n        \tp = abs(p)/dot(p,p)-.75;\n \n        O.rgb += dot(p,p)/2e2 *normalize(1.+abs(p));\n    }\n    U = mod(u,4.);\n    O *= min(1.,T*.1) * (1.-s(120.,121.,T)) * (.7 + H * .3 ) *U.x*U.y/4.;\n}","name":"Image","description":"","type":"image"}]}