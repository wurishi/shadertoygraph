{"ver":"0.1","info":{"id":"Ns3fRB","date":"1656894733","viewed":107,"name":"小音乐家","username":"RosyFu","description":"全是抄的","likes":1,"published":1,"flags":8,"usePreview":0,"tags":["music"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    vec2 p = fragCoord/iResolution.xy;\n    vec2 q = p-vec2(0.5,0.5);\n    float time = mod(iTime,2.0);\n\n    float beat = fract(pow(time,1.5));\n    float width = beat*0.01;\n    float wave = melody(p.x+time);\n\n    vec3 col = vec3(0.0,0.0,0.0);\n    col = mix(vec3(1.0,1.0,1.0),col,smoothstep(width,width+0.1,abs(q.y+wave)));\n    col.r *= 2.0*p.y;\n    col.b += p.y*0.6;\n    col.r += exp(-p.y*4.0)*0.2+0.1;\n    col *= exp(0.1*col+cos(4.0*q.x-4.0*iTime)*wave);\n    \n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"float melody(float time);\nfloat bass(float time);\n\n//----------Sound Shader Entrypoint---------\nvec2 mainSound( int samp, float time ){\n    float volume = 0.5;\n    time = mod(time,5.0);//loop length\n    vec2 y; \n    y += vec2(0.5,0.5) * melody(time);//Vec2 for sound direction\n    y += vec2(0.3,0.7) * bass(time);\n    return vec2( y * volume );\n}\n\n\n","name":"Sound","description":"","type":"sound"},{"inputs":[],"outputs":[],"code":"#define TAU 3.1415926 * 2.0\n#define D(a) b += float(a); if(b<time) x=b;\n#define speed 0.141\n#define reset x = time; b = 0.0;\n\nfloat instrument(float freq,float t) {\n\treturn sin(freq * t * TAU)*exp(-6.0*t);\n}\n\nfloat melody(float time){\n    float x, y, b = 0.0;\n    time /= speed;\n   \n   // A1\n    reset\n    D(1)D(18)\n    y += instrument(110.0,speed*(time-x));\n    \n    // A2\n    reset\n    D(3)D(12)\n    y += instrument(220.0,speed*(time-x));\n    \n    // B2\n    reset\n    D(2)D(15)\n    y += instrument(246.0,speed*(time-x));\n   \n    // E3\n    reset\n    D(5)D(19)\n    y += instrument(329.0,speed*(time-x));\n    \n    // A3\n    reset\n    D(2)D(17)\n    y += instrument(440.0,speed*(time-x));\n    \n    // E4\n    reset\n    D(7)\n    y += instrument(659.0,speed*(time-x));\n     \n    \n    return y;\n}\n\nfloat bass(float time){\n    float x, y, b = 0.0;\n    time /= speed;\n   \n   // A1\n    reset\n    D(1)\n    y += instrument(110.0,speed*(time-x));\n    \n    // A2\n    reset\n    D(4)\n    y += instrument(220.0,speed*(time-x));\n\n    // E3\n    reset\n    D(8)\n    y += instrument(329.0,speed*(time-x));\n\n    \n    return y;\n}","name":"Common","description":"","type":"common"}]}