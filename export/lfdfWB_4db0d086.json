{"ver":"0.1","info":{"id":"lfdfWB","date":"1733479571","viewed":100,"name":"Single plant on the lawn corner","username":"chenxianming","description":"Single plant on the lawn corner side, which received sunrise light day by day.","likes":19,"published":1,"flags":32,"usePreview":1,"tags":["grass","sunrise","plants"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGR8","filepath":"/media/previz/buffer02.png","previewfilepath":"/media/previz/buffer02.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// #define aperture\n\nvoid mainImage( out vec4 U, in vec2 V )\n{\n    U = vec4(0);\n    \n    for( float i = -4.; i < 4.; i++ ){\n        for( float j = -4.; j < 4.; j++ ){\n            U += texture( iChannel0, (V + vec2(i, j) * .15 ) / I ) * .015625;\n        }\n    }\n    \n    #ifdef aperture\n    \n    \n    vec3 c;\n    \n    float r = 5., ls = 16., xx = -ls, yy;\n\n    while( xx++ < ls ){\n        yy = -ls;\n        while( yy++ < ls ){\n            if( xx==0. && yy == 0. ){\n                continue ;\n            }\n            c += ft( iChannel0,  V - vec2(xx, yy ) ).rgb * exp( -( pow( xx, 2. ) + pow( yy, 2. ) ) / ( 1.6 * r * r) ) / ( 6.28 * r * r );\n        }\n    }\n    \n    U.rgb = mix(\n        U.rgb,\n        c,\n        smoothstep( .7, .1, sqrt( .45 - length( (V+V-I) / I - vec2( 0, .5 ) ) ) ) * .7\n    );\n     \n    //U.rgb += vec3( smoothstep( .7, .1, sqrt( .45 - length( (V+V-I) / I - vec2( 0, .5 ) ) ) ) );\n    #endif\n    \n\n    U.rgb -= H( round( V * .5 ) - iTime ) * .02;\n\n\n}\n","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define R( r ) mat2( cos( r + vec4(0, 11, 33, 0) ) )\n#define v( a ) clamp( a, 0., 1. )\n#define H(a) fract(sin(dot(a, vec2(12.3456, 54.321))) * 9876.54321)\n#define I iResolution.xy\n#define S( u, a ) max( abs(u.x) - a.x, abs(u.y) - a.y )\n#define S_ smoothstep\n#define A min( I.x, I.y )\n#define m mat2(.1, .05, -.5, .6)\n#define x_ .56 * round( u.x / .56 )\n#define u_ vec2 u = ( V * 2. - I.xy ) / A; vec3 c = vec3(1), p, o = vec3( 0., 0., -1. ), r = vec3( u, 1. ); float t, d, i\n#define ft( t, p ) texture( t, (p+.5) / I ).rgb\n#define W c -= ( texture( iChannel1, ( r.yx / 2. + .5 ) * vec2( 1., 1.2 ) ).r )\n\n// webgl2 running on most x86 device but in your phone must grand than android10,\n// piped webgl1 static frame into framebuffer you need render all things at last channel then swap framebuffer can be supported.\n// #define WEBGL2\n\n\nfloat n(in vec2 x) {\n  x *= m;\n  return (cos(x.x + .123) * sin(x.y + .9876) + .1234);\n}\n\nfloat fbm(in vec2 x, in float H) {\n  float t, i = -1.;\n\n  while ( i++ < 13. )\n      t += pow(pow(2.0, i), -H) * n(pow(2.0, i) * vec2(x.x * .5, x.y));\n  \n  return t;\n}\n\nfloat rep(inout vec2 u, float rep){\n\n    float r = 6.28 / rep,\n          a = round( atan(u.y, u.x) / r ) * r;\n    \n    u = vec2(\n        dot( u, vec2( cos(a), sin(a) ) ),\n        dot( u, vec2( -sin(a), cos(a) ) )\n    );\n    \n    return floor( mod( ( round( a / r ) + rep * .5 ), rep ) ); \n}\n\nfloat T( vec2 u, int t ){\n   \n   vec2 v = vec2( .07, .1 );\n    \n   switch( t ){\n   \n       case 0 :\n        u.x += v.x;\n        u.y -= v.y;\n           \n           break ;\n   \n       case 1 :\n       \n        u.x -= v.x;\n        u.y += v.y;\n       \n        u *= -1.;\n           \n           break ;\n           \n        case 2 :\n        \n            u.x += v.y;\n            u.y += v.x;\n        \n            u *= R( 1.57 );\n        \n            break;\n           \n       case 3 :\n       \n            u.x -= v.y;\n            u.y -= v.x;\n        \n            u *= R( -1.57 );\n       \n           break ;\n   }\n   \n   return min( \n       S( (u + vec2( .025, -.08 )), vec2( .18, .02 ) ),\n       S( u, vec2( .02, .1 ) )\n   );\n}\n\nfloat Z_( vec2 u ){\n \n    float p = .1;\n    \n\n    p = min(\n        p,\n        T( u, 0 )\n    );\n    \n    p = min(\n        p,\n        T( u, 1 )\n    );\n    \n    p = min(\n        p,\n        T( u, 2 )\n    );\n    \n    p = min(\n        p,\n        T( u, 3 )\n    );\n \n    return p;\n}\n\nfloat tex( vec2 u ){\n    vec2 v = u;\n    \n    u.x -= x_;\n    \n    float p = Z_( u );\n    \n    u = v;\n    \n    u.x += .28;\n    u.x -= x_;\n    \n    p = min(\n        p,\n        S( u, vec2( .02, .2 ) )\n    );\n    \n    u = v;\n    \n    u.y = abs( u.y ) - .28;\n   \n    p = min(\n        p,\n        S( u, vec2( 5., .02 ) )\n    );\n    \n    return p;\n    \n}\n\n\nfloat f( vec3 p, float s ){\n    return max(\n        length( p.xy ) - s,\n        abs( p.z ) - 1e-4\n    ) * .4445;\n}\n\n\nfloat r( vec3 p ){\n    \n    p.x += cos( p.y * 11. ) / 20. - .15;\n    p.y += .3;\n    p.yx += fbm(vec2(fbm(p.yx * 5. + 9., 2.)), .5 ) * .04;\n    \n    return max(\n        length( p.xz ) - .07,\n        abs( p.y ) - .3\n    );\n}\n\nfloat e( vec3 p ){\n    p.y += .52;\n    p.z -= .53;\n    p.y += fbm( p.xz, .9 ) * .04;\n    \n    return max(\n        length( p.xz ) - .7,\n        abs( p.y ) - .02\n    );\n}\n\n\n\n","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"vec2 P_;\n\nfloat t( vec3 p, float c ){\n\n    p.yz *= R( 1.2 );\n    P_[0] = rep( p.xy, c * .5 );\n    p.x -= .3 + fract( P_[0] * 123.456 ) * .05;\n    P_[1] = rep( p.xz, c );\n    p.x -= .3;\n    \n    p.xz *= R( cos( H(vec2(P_[1], P_[0])) * .1 - sin( round(fract( iTime * P_[1] * .1 )) ) * 5. ) * 1e-2 );\n    \n    return f( p, H( vec2( P_[1], P_[0] ) ) * .1 ) * .55556;\n    \n}\n\nfloat l_( vec3 p ){\n    p.y -= .3;\n    return min(\n        t( p, 36. ),\n        t( vec3(\n            dot( p.xz, vec2( cos(1.5), sin(1.5) ) ),\n            p.y,\n            dot( p.xz, vec2( -sin(1.5), cos(1.5) ) )\n        ), 40. )\n    );\n}\n\n\nvoid mainImage( out vec4 U, in vec2 V )\n{\n\n    #ifdef WEBGL2\n    \n    if( iTime > 1. ){\n        U = texture( iChannel0, V / I );\n        return ;\n    }\n    \n    #endif\n\n    u_;\n    \n    while( i++ < 60. )\n        p = o + r * t,  \n        p.yz *= R( .35 ),\n        d = l_( p ),\n        t += d;\n\n    if( d < 1e-3 ){\n        c -= 1.;\n    }\n    \n    c *= S_( 0.55 , .45, length( u * vec2( .8, 1. ) - vec2( 0, .4 ) ) );\n    U = vec4(c,1.0);\n    \n\n    \n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"vec2 L2_;\n\n\nfloat l2_( vec3 p, float s ){\n\n    float py = p.y;\n    \n    py *= py > 0. ? 5. : 10.;\n    \n    p = abs( p ) ;\n    \n    return max(\n        p.x  - (.05 + .1 * s ) * clamp( abs( abs( pow( py, 2. ) ) - 1. ) - .5, -1. , 1. ),\n        p.z - .001\n    );\n}\n\nfloat bg( vec3 p ){\n    \n    p.z -= 1. * clamp( round( p.z / 1. ), -1., 2. );\n\n    float i = rep( p.xy, 25. ), y;\n    \n    if( i < 20. && i > 15. ){\n        return 1.;\n    }\n    \n    p.x -= .4;\n    p.xy *= R( 1.57 );\n    \n    y = round( p.y / .1 );\n    \n    p.x -= cos( y ) * .2;\n    p.y -= .1 * y;\n    \n    L2_ = vec2(\n        i,\n        y\n    );\n    \n    return min(\n        l2_( p - vec3( cos(iTime * y) * 5e-3, 0, 0 ), H( vec2(i, y) ) * 3. + 2.5 ),\n        l2_( p - vec3( cos(iTime * i) * .1, sin( iTime * y ) * 4e-3, -.7 ), 1.7 + H( abs( vec2(i, y) - 20. ) ) * 3. )\n    ) * .7778;\n}\n\nvoid mainImage( out vec4 U, in vec2 V )\n{\n\n    #ifdef WEBGL2\n    \n    if( iTime > 1. ){\n        U = texture( iChannel1, V / I );\n        return ;\n    }\n    \n    #endif\n\n    u_;\n    \n    c = vec3( .63, 1.37, .75 );\n    c *= c;\n\n    while( i++ < 24. )\n        p = o + r * t,  \n        p.yz *= R( .35 ),\n        d = bg( p ),\n        t += d;\n\n    if( d < 1e-3 ){\n        c -= 1.4;\n    }\n\n    c = mix(\n        c,\n        vec3(1),\n        S_( 2.8, .6, length( u - vec2( .3, .6 ) ) )\n    );\n\n\n    U = vec4( c, 1. );\n    \n}\n","name":"Buffer B","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4sXGR8","channel":0}],"code":"\nfloat L_, R_, B_, E_;\nvec2 P_, L2_;\n\nfloat t( vec3 p, float c ){\n\n    p.yz *= R( 1.2 );\n    \n    P_[0] = rep( p.xy, c * .5 );\n    \n    p.x -= .3 + fract( P_[0] * 123.456 ) * .05;\n    \n    P_[1] = rep( p.xz, c );\n    p.x -= .3;\n    \n    p.xz *= R( cos( H(vec2(P_[1], P_[0])) * .1 - sin( iTime * P_[1] * .3 ) ) * 1e-1 );\n    \n    return f( p, H( vec2( P_[1], P_[0] ) ) * .1 ) * .55556;\n}\n\nfloat l_( vec3 p ){\n    p.y -= .3;\n    return min(\n        t( p, 36. ),\n        t( vec3(\n            dot( p.xz, vec2( cos(1.5), sin(1.5) ) ),\n            p.y,\n            dot( p.xz, vec2( -sin(1.5), cos(1.5) ) )\n        ), 40. )\n    );\n}\n\nvec3 gr( vec2 V, vec2 cen, float n ){\n    vec3 c;\n    \n    vec2 u = V / I.xy;\n    \n    for( float i = 0.; i < 500.; i++ ){\n        if( i > n ){\n            break ;\n        }\n        c += texture( iChannel0, u + ( i / n * .7 ) * ( cen - u ) ).rgb * (1.- i / n ) * .3;\n    }\n    \n    return c;\n}\n\nfloat b( vec3 p ){\n    \n    p.y += .7;\n    p.z -= .3;\n    \n    float py = p.y;\n    \n    py = pow( abs( py + .3 ), 2. ) + .1;\n    \n    py *= (1.-( p.y / 2. + .1 )) / .1;\n    \n    return max(\n        max(\n            length( p.xz ) - .24 * py,\n            -( length( p.xz ) - .23 * py )\n        ),\n        abs( p.y ) - .19\n    );\n\n}\n\n\nfloat df( vec3 p ){\n    return min(\n        L_ = l_( p ) / .66667,\n        min(\n            R_ = r( p ),\n            min(\n                B_ = b( p ),\n                E_ = e( p )\n            )\n        )\n    );\n}\n\n\nvec3 l(in vec3 b) {\n  vec2 a = vec2(1, -1) * .5773;\n  return normalize(a.xyy * df(b + a.xyy * 5e-4) + a.yyx * df(b + a.yyx * 5e-4) +\n                   a.yxy * df(b + a.yxy * 5e-4) + a.xxx * df(b + a.xxx * 5e-4));\n}\n\nfloat L( vec3 p, vec3 ca, vec3 r, float q ){\n    return v( pow( dot( l( p ), normalize( normalize( ca ) - r ) ), q ) );\n}\n\nvoid mainImage( out vec4 U, in vec2 V )\n{\n\n    u_; c -= 1.;\n    \n    while( i++ < 64. )\n        p = o + r * t,  \n        p.yz *= R( .35 ),\n        d = df( p ),\n        t += d;\n    \n    if( d < 1e-3 ){\n        \n        vec3 lg;\n        float sg = df(p);\n        \n        if( sg == L_ ){\n            \n            lg = vec3( -.2, .2, -.7 );\n            \n            float dd = v( dot( l( p ), lg ) );\n            \n            c += - pow( dd, 5. ) + vec3( .58, .87, .69 ) * ( .25 + H(P_) * .2 );\n            \n            \n            if( abs( dot( lg, l( p ) ) ) < .9 ){\n                c -= .17;\n            }\n            \n            c = mix(\n                c,\n                vec3(.5),\n                S_( 1., 1.6, ( exp(l(p).y * 2. - .5)) ) * .3\n            ) ;\n            \n            c = mix(\n                c,\n                vec3(1.),\n                S_( .7, .8, ( exp( (p.y - .5) * 2. )) ) * .3\n            ) ;\n            \n        }\n        \n        if( sg == R_ ){\n            lg = vec3( -.2, .3, -.7 );\n            c += L( p, lg, r, 5. ) * .2 + vec3( .29, .26, .0 ) * .4;\n            \n            if(  abs( dot( lg, l( p ) ) ) > .68 ){\n                c *= .75;\n            }\n            \n            c = mix(\n                c,\n                vec3( .15, .14, .0 ),\n                S_( 1.4, 1.6, 1.-p.y ) * fbm( vec2( fbm( p.zx * 3., p.y * 5. ), .1 ), .1 )\n            );\n            \n            c = mix(\n                c,\n                vec3( .058, .087, .069 ),\n                S_( 1.2, 1.15, 1. - p.y ) * fbm( vec2( fbm( p.zx * 3., p.y * 5. ), .1 ), .1 ) * .5\n            );\n            \n        }\n        \n        if( sg == B_ ){\n            \n            c += L( p, vec3( .2, .4, -1 ), r, 1. ) * .5 + .7;\n            \n            c = mix(\n                c,\n                vec3(.5),\n                H( p.xy * 3. ) * .1\n            );\n            \n            if( max( -l(p).z, 0. ) > .3 ){\n                c = mix(\n                    c,\n                    vec3( .3, .23, .87 ),\n                    S_( 3. / A, -3. / A, tex( ( p.xy + vec2( 0., .65 ) ) * 5. ) ) * .7\n                );\n            }\n            \n            c = mix(\n                c,\n                vec3( 0, .35, 0 ),\n                ( exp(r.y * 3.5 + .7))\n            );\n            \n            W * .3 * r.x;\n            \n        }\n        \n        if( sg == E_ ){\n        \n            c = vec3( .39, .36, .0 );\n            \n            c -= .3;\n            \n            c = mix(\n                c,\n                vec3( .15, .14, .0 ),\n                fbm( vec2( fbm( p.zx * 5., p.y ), .1 ), .1 ) * .1\n            );\n            \n            c = mix(\n                c,\n                vec3( .23, .21, .0 ),\n                H( p.xz * 5. )\n            );\n            \n        }\n        \n        W * .05;\n        \n    }else if( d < 9e-2 ){\n        if( df(p) == L_ ){\n            c -= .1;\n        }\n    }else{\n        \n        float r = 5. + round( sin(iTime) ), ls = ceil( r * 3. ), xx = -ls, yy;\n\n        while( xx++ < ls ){\n            yy = -ls;\n            while( yy++ < ls ){\n                if( xx==0. && yy == 0. ){\n                    continue ;\n                }\n                c += ft( iChannel1,  V - vec2(xx, yy ) ).rgb * exp( -( pow( xx, 2. ) + pow( yy, 2. ) ) / ( 1.6 * r * r) ) / ( 6.28 * r * r );\n            }\n        }\n        \n        c += u.y * .6;\n    }\n    \n    vec3 G_ = gr( V, vec2( .54 + round( fract( iTime * 25. + 9. ) ) * 1e-3, .82 ), 60. );\n    \n    c += (G_ * vec3( 0.55, 0.5, 0.42 ) * .2) * (G_ * vec3( .3 ) );\n    \n    c += ( 1. - u.y + u.x) * .05;\n    \n\n    \n    U = vec4(c,1.0);\n}","name":"Buffer C","description":"","type":"buffer"}]}