{"ver":"0.1","info":{"id":"Dt3fDl","date":"1701704337","viewed":115,"name":">Inercia jam 2023","username":"louis_C","description":"Livecoded during the Inercia's jam.\nhttps://www.twitch.tv/videos/1992450757","likes":15,"published":1,"flags":32,"usePreview":0,"tags":["livecodingretroratmarching"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord ){\nfragColor = texture(iChannel0,fragCoord/iResolution.xy);}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float rd(float t){ return fract(sin(dot(floor(t),45.236))*7854.236);}\nfloat no(float t){ return mix(rd(t), rd(t+1.),smoothstep(0.,1.,fract(t)));}\nfloat hs(vec2 t){ return fract(sin(dot(t,vec2(45.236,98.26)))*7854.236)-0.5;}\n\n\nmat2 rot(float t){float s  = sin(t); float c = cos(t); return mat2(c,-s,s,c);}\n\nfloat map(vec3 p,vec4 v){ \n\n  vec3 pn = p;\n  p += 1.;\n  for(int i = 0 ; i < 7 ; i++){\n   p-= 0.5+v.z;\n    p.xz *= rot(v.y);\n    p.xy *= rot(v.y*0.9);\n    p = abs(p);\n  }\n  float d1 = max(length(p.xz)-1.5-v.x*10.,length(pn)-18.);\n  float d2 = length(p)-2.-v.x*10.;\n  return mix(d1,d2,smoothstep(0.3,0.7,v.w));}\n  vec3 nor (vec3 p, vec4 v){ vec2 e = vec2(0.01,0.); return normalize(map(p,v)-vec3(map(p-e.xyy,v),map(p-e.yxy,v),map(p-e.yyx,v)));}\n  float gl(vec2 uv){vec2 s = 6.28/iResolution.xy;float r= 0.;\n    for(int  i = 0 ; i < 25 ; i++){\n      float p = 6.28*(1./25.)*float(i);\n      r += texture(iChannel0,uv+vec2(cos(p),sin(p))*s).a;\n    }return r /=25.;}\n    float b (vec2 p, vec2 b){vec2 q =abs(p)-b;\n     return length(max(q,vec2(0.)))+min(0.,max(q.x,q.y));}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\nfloat time = iTime;\nfloat t1 = rd(rd(time));\nfloat t2 = iTime+no(time)+no(time*3.+98.9)*0.4;\nfloat n1 = no(t2*2.)+no(t2*4.)*0.5;\nfloat n2 =  no(t2*1.8);\nvec4 v = vec4(t1,t2,n1,n2);\nvec2 uv = fragCoord/iResolution.xy;\n uv.x  = uv.x+hs(uv)*no(t2*4.3+98.4)*0.05*pow(length((uv.y-0.5)*2.),2.);\n  vec2 uc  = uv;\n\tuv -= 0.5;\n  uv *= 2.;\n \n  vec2 fac = vec2(iResolution.y / iResolution.x, 1);\n\tuv /= fac;\n   uv.x = mix(uv.x,abs(uv.x),step(0.8,rd(no(t2*5.2+98.236))));\n  float ca = mix(10.,80.,no(t2*3.8+985.));\n  vec2 ul = fract(uv*ca);\n  vec2 ul2 = fract(uv*rot(3.14*0.25)*ca);\n  uv = floor(uv*ca)/ca;\n  vec3 p = vec3(0.,0.,-20.);\n  vec3 r = normalize(vec3(uv,1.));\n  float dd;\n  for(int  i = 0 ; i < 15 ; i++){\n    float d=  map(p,v);\n    if(d<0.01){break;}\n   \n    p += r*d;\n    dd += d;\n  }\n  float d1 = pow(t1*300.,2.)*0.5;\n  float r1 = floor(smoothstep(20.,0.,dd)*16.)/16.;\n  float m = step(dd,20.);\n   vec3 n = nor(p,v);\n  float ml= clamp(mix(n.x,n.y,step(0.5,rd(t2*5.)))*mix(-1.,1.,step(0.5,(t2*2.5+985.))),0.,1.);\n  float n3 = no(t2*3.5+453.)*0.5;\n  float ia = mix(0.5+n3,0.5-n3,ml);\n  float l1 = step(ia,ul.x);\n  float l2 = step(ia,ul.y);\n  float l3 = step(ia,ul2.x);\n  float l4 = step(ia,ul2.y);\n  float l5 = mix(mix(l3,l4,step(n.x,0.)), mix(l4,l3,step(n.x,0.)),step(0.,n.y));\n  float l6 = mix(l1,l5,step(0.35,abs(n.x)));\n  float l7 = mix(l2,l5,step(0.35,abs(n.y)));\n  float l8 = step(abs(n.z),0.9);\n  float lf= mix(step(0.1,ml),mix(l6,l7,step(0.35,abs(n.x))),mix(l8,1.-l8,step(0.75,rd(t2*4.6*6.3))));\n  \n  float li = sin(gl(uc)*no(t2*4.65+69.25)*8.)-0.5+(r1)*5.; \n  vec2 un =300.*fac.yx; \n  float li2 = texture(iChannel0,floor(uc*un)/(un)).a;\n  vec3 c2 =( 3.*abs(1.-2.*fract(li2*5.+r1*5.+t2*5.+vec3(0.,-1./3.,1./3.)))-1.)*li2;\n  vec3 c1 =( 3.*abs(1.-2.*fract(r1*5.+t2*5.+vec3(0.,-1./3.,1./3.)))-1.)*mix(lf,1.,step(0.95,rd(t2*7.+8.87)));\n  vec3 r2 = mix(step(0.4+no(t2*5.)*0.5,texture(iChannel0,uc+(floor(uv*4.)/4.)*-0.005).xyz),c1,m);\n  vec3 r3 = mix(r2,1.-r2,step(0.95,rd(t2*6.+89.58)));\n  vec3 r4 = mix(r2,c2,step(0.5,rd(t2*3.8+914.55)));\n  uv += n.xy*0.01;\n  uv.x +=1.4;\n  uv.y += sin(uv.x*4.+time*5.)*0.1;\n  float i1 = b(uv,vec2(0.05,0.2));\n   uv.x -=0.25;\n   i1 = min(i1,b(uv,vec2(0.05,0.2)));\n   i1 = min(i1,b((uv-vec2(0.1,0.))*rot(-0.5),vec2(0.05,0.2)));\n     uv.x -=0.25;\n   i1 = min(i1,b(uv,vec2(0.05,0.2)));\n    uv.x -=0.25;\n   i1 = min(i1,b(uv,vec2(0.05,0.2)));\n     uv.x -=0.15;\n   i1 = min(i1,b(uv+vec2(0.,0.15),vec2(0.1,0.05)));\n   i1 = min(i1,b(uv-vec2(0.,0.15),vec2(0.1,0.05)));\n   i1 = min(i1,b(uv,vec2(0.1,0.05)));\n      uv.x -=0.25;\n       i1 = min(i1,b(uv,vec2(0.05,0.2)));\n     uv.x -=0.15;\n   i1 = min(i1,b(uv-vec2(0.,0.15),vec2(0.1,0.05)));\n   i1 = min(i1,b(uv,vec2(0.1,0.05)));   \n     i1 = min(i1,b((uv+vec2(-0.05,0.1))*rot(-0.5),vec2(0.05,0.11)));\n       uv.x -=0.05;\n          uv.x -=0.25;\n   i1 = min(i1,b(uv,vec2(0.05,0.2)));\n     uv.x -=0.15;\n   i1 = min(i1,b(uv+vec2(0.,0.15),vec2(0.1,0.05)));\n   i1 = min(i1,b(uv-vec2(0.,0.15),vec2(0.1,0.05)));\n   i1 = min(i1,b(uv,vec2(0.1,0.05)));\n           uv.x -=0.25;\n   i1 = min(i1,b(uv,vec2(0.05,0.2)));\n     uv.x -=0.15;\n   i1 = min(i1,b(uv+vec2(0.,0.15),vec2(0.1,0.05)));\n   i1 = min(i1,b(uv-vec2(0.,0.15),vec2(0.1,0.05)));\n  // i1 = min(i1,b(uv,vec2(0.1,0.05)));\n  uv.x -=0.3;\n   i1 = min(i1,b(uv,vec2(0.05,0.2)));\n     uv.x -=0.25;\n       i1 = min(i1,b(uv,vec2(0.05,0.2)));\n     uv.x -=0.15;\n   i1 = min(i1,b(uv-vec2(0.,0.15),vec2(0.1,0.05)));\n   i1 = min(i1,b(uv,vec2(0.1,0.05)));   \n   uv.x -=0.1;\n     i1 = min(i1,b(uv,vec2(0.05,0.2)));\n  float il = max(step(0.,i1),step(0.5,no(t2*6.25+95.65)));\n  vec3 r5 = mix(1.-r4,r4,il);\n    fragColor = vec4(r5,li);\n}","name":"Buffer A","description":"","type":"buffer"}]}