{"ver":"0.1","info":{"id":"Wts3Dr","date":"1685816844","viewed":362,"name":"Voronoi Mosaic","username":"Confession","description":"A filter that uses voronoi noise to make a mosaic looking filter","likes":15,"published":1,"flags":0,"usePreview":0,"tags":["voronoi"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XdX3Rr","filepath":"/media/a/aea6b99da1d53055107966b59ac5444fc8bc7b3ce2d0bbb6a4a3cbae1d97f3aa.bin","previewfilepath":"/media/ap/aea6b99da1d53055107966b59ac5444fc8bc7b3ce2d0bbb6a4a3cbae1d97f3aa.bin","type":"volume","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SN 32.0\n#define AREA 3.0\n\nvec4 iC0(vec2 pos)\n{\nreturn texture(iChannel0, vec3(pos/2.0, iTime/100.0))*AREA;\n}\n\nvec4 iC1(vec2 pos)\n{\nreturn texture(iChannel1, pos);\n}\n\nvec2 moduv(vec2 uv)\n{\nreturn uv - fract(uv*SN)/SN;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    uv.x *= iResolution.x/iResolution.y;\n    vec2 s = vec2(1.0/SN, 0.0);\n    float m = 1000.0;\n    vec3 col = vec3(0.0);\n    vec2 colpos;\n    for(float i = -AREA; i <= AREA; i++)\n        for(float j = -AREA; j <= AREA; j++)\n            {\n                float d =length(uv-iC0(moduv(uv+vec2(i,j)*s.x)).xy/SN-moduv(uv+vec2(s.x*i, s.x*j))); \n\n\n                if(m > d)\n                  { col = vec3(iC0(moduv(uv+vec2(i,j)*s.x)).x);\n                  m=d;\n                   colpos = moduv(uv+vec2(s.x*i, s.x*j));\n                  }\n            } \n    \n    float md = 100.0;\n    \n    for(float i = -AREA; i <= AREA; i++)\n        for(float j = -AREA; j <= AREA; j++)\n            {\n                float d =length(uv-iC0(moduv(uv+vec2(i,j)*s.x)).xy/SN-moduv(uv+vec2(s.x*i, s.x*j))); \n                float diff = abs(abs(m)-abs(d));\n                if(d != m)\n                {\n                    if(diff < md)\n                    {\n                        md = diff;\n                    \t\n                    }\n                }\n                \n                \n            } \n    // Output to screen\n    fragColor = vec4((md*SN<0.1)?(vec3(md)*SN):vec3(1.0), 1.0)*iC1(colpos);\n}","name":"Image","description":"","type":"image"}]}