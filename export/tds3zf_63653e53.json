{"ver":"0.1","info":{"id":"tds3zf","date":"1547121079","viewed":128,"name":"CastingBall","username":"Sevapp","description":"CastingBall","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["castingball"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3  ballPos;\nfloat ballRadius;\nvec4  ballColor;\n\nfloat getDist(vec3 rayPos)\n{\n    return distance(ballPos, rayPos) - ballRadius;\n}\n\nvec3 getNormal(vec3 p)\n{\n    float d = getDist(p);\n    vec2  e = vec2(0.01, 0.0);\n    \n    vec3 n = d - vec3(\n        getDist(p - e.xyy),\n        getDist(p - e.yxy),\n        getDist(p - e.yyx)\n    );\n    \n    return normalize(n);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{   \n    vec4 outputPixel = vec4(0.0);\n    vec2 pixelPos    = fragCoord.xy;\n    \n    vec3 camPos = vec3(\n        iResolution.x / 2.0, \n        iResolution.y / 2.0, \n        -300.0\n    );\n    \n    vec3 rayPos = vec3(pixelPos, 0.0);\n    vec3 rayVec = normalize(rayPos - camPos);\n    \n    vec3 lightPos = vec3(\n        iResolution.x / 2.0 + sin(iTime) * 100.0, \n        iResolution.y / 2.0 + cos(iTime) * 100.0,\n        -100.0\n    );\n    \n    ballPos    = vec3(\n        iResolution.x / 2.0 + cos(iTime * 2.0) * 100.0, \n        iResolution.y / 2.0,\n        99.99 + sin(iTime * 2.0) * 20.0\n    );\n    \n    ballRadius = 100.0;\n    ballColor = vec4(1.0, 0.4, 1.0, 1.0);\n    \n    vec3  curRayPos = rayPos;\n    for (int i = 0; i < 40; i ++)\n    { \n    \tfloat distToBall = getDist(curRayPos);\n        if (distToBall < .1)\n        {\n            vec3  normal = getNormal(curRayPos);\n            float light  = dot(normalize(lightPos - curRayPos), normal);\n            light = clamp(light, 0.0, 1.0) + 0.02;\n            outputPixel = pow(light, 1.0 / 1.8) * ballColor;\n            break;\n            \n        } else\n        {\n        \tcurRayPos += rayVec * distToBall;\n        }\n    }\n    \n    fragColor = outputPixel;\n}","name":"Image","description":"","type":"image"}]}