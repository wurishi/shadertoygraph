{"ver":"0.1","info":{"id":"McByDV","date":"1723061680","viewed":34,"name":"B Diamond alt","username":"airtight","description":"based on https://x.com/ilithya_rocks/status/1820890922764398609\n\ntoo bad there is no way to animate this without discontinuities  at the axes...","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["bdiamondalt"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.1415926535897932384626433832795\nfloat stripCount = 55.;\nfloat boxSizeInStrips = 17.;\nfloat speed = 2.5;\n\nmat2 rotate2d(float _angle){\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle));\n}\n\n\n// return 1 if v inside the box, return 0 otherwise\nfloat insideBox(vec2 v, vec2 bottomLeft, vec2 topRight) {\n    vec2 s = step(bottomLeft, v) - step(topRight, v);\n    return s.x * s.y;   \n}\n\nfloat stripes(float x, float count ,float dir){\n    //offset half a strip width to center stripes\n    x += 0.5/count; \n    //animate stripes\n    x += iTime * 1./stripCount * dir * speed;\n    float b = floor(x * count);    \n    return mod(b , 2.);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    //centered square coords -1 <-> 1\n    vec2 uv = (-iResolution.xy + 2.0*fragCoord.xy) / iResolution.y;\n\n    float stripWidth = 1./stripCount;\n    //distance between opposite corners of a square    \n    float boxWidth = (stripWidth * boxSizeInStrips) * sqrt(2.0);\n\n    //get central diamond as a rotated box\n    vec2 uvRot = rotate2d( PI/4.  ) * uv;  \n    float inside = insideBox(uvRot, vec2(-boxWidth),vec2(boxWidth));\n    //get the correct motion direction\n    float dir = inside > 0.5 ? -sign(uv.y) : sign(uv.x) ;\n    vec2 uvFlip = rotate2d( inside * PI/2. ) * uv;  \n    float b = stripes(uvFlip.x,stripCount,dir);\n    vec3 col = vec3(b);\n    \n    //add black frame\n    float fh = 1.- stripWidth * 2.; //frame height\n    float frame = insideBox(uv, vec2(-fh),vec2(fh));\n    col *= frame;\n    \n    //add white edges top and bottom\n    float topEdge = insideBox(uv, vec2(-fh, fh - stripWidth),vec2(fh, fh ));    \n    topEdge *= stripes(uv.x ,stripCount /2.,sign(uv.x));    \n    col += topEdge;\n    \n    float bottomEdge = insideBox(uv, vec2(-fh, -fh),vec2(fh, -fh +  stripWidth));\n    bottomEdge *= stripes(uv.x ,stripCount /2.,sign(uv.x)); \n    col += bottomEdge; \n    \n    //add debug axes\n    //vec3 axesColor = vec3(1.0, 0.0, 0.0);\n    //float axesWidth = 0.005;\n    //col = mix(col,axesColor,line(uv.x, 0.,axesWidth));\n\t//col = mix(col,axesColor,line(uv.y, 0.,axesWidth));\n    //col.g = uvFlip.y;\n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}