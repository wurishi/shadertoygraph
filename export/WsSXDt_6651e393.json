{"ver":"0.1","info":{"id":"WsSXDt","date":"1556585986","viewed":94,"name":"Raggamuffin","username":"shau","description":"Getting to grips with the excellent tf-imfit by Mattz [url]https://github.com/mzucker/tf-imfit[/url]\nThis took about 4hrs to resolve with Tensor Flow running on the CPU. ","likes":5,"published":1,"flags":0,"usePreview":0,"tags":["image"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Adaptation of https://www.shadertoy.com/view/4ljSRR\n// to work with source code from https://github.com/mzucker/tf-imfit\n\nfloat gabor(vec2 p, vec4 uvrp, vec4 ltsh) {\n            \n    float cr = cos(uvrp.z);\n    float sr = sin(uvrp.z);\n\n    // Rotate and translate point\n    p = mat2(cr, -sr, sr, cr) * (p - uvrp.xy);\n        \t\n    // amplitude * gaussian * sinusoid\n    return ltsh.w * exp(dot(vec2(-0.5), p*p/(ltsh.zy*ltsh.zy))) * cos(p.x*6.283185307179586/ltsh.x+uvrp.w);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n        \n\tvec2 p = (fragCoord.xy - 0.5*iResolution.xy) * 1.2 / iResolution.y;\n    p.y = -p.y;\n    \n    float k = 0.0;\n\n    //*\n    k += gabor(p, vec4(-0.219548,1.108243,2.527723,-1.669111), vec4(3.385256,0.920133,0.838332,0.724782));\n    k += gabor(p, vec4(-0.528379,-0.21319,-1.809616,2.847884), vec4(0.597757,0.349404,0.109751,0.935347));\n    k += gabor(p, vec4(-0.497232,-0.594392,2.336756,2.867951), vec4(0.33564,0.895614,0.146154,0.836355));\n    k += gabor(p, vec4(0.539092,0.332945,1.443967,-1.783819), vec4(1.744748,0.366856,0.107882,2.0));\n    k += gabor(p, vec4(-0.66765,-0.747506,-3.115725,0.00474), vec4(1.694165,1.506144,0.633678,0.507098));\n    k += gabor(p, vec4(0.121025,-0.183615,2.253482,1.040545), vec4(0.322407,0.029955,0.027258,1.706303));\n    k += gabor(p, vec4(-0.028235,-0.624555,-1.308694,-0.385901), vec4(0.705905,0.497395,0.293298,0.977555));\n    k += gabor(p, vec4(-0.378736,-0.318669,1.025784,4.623904), vec4(0.112891,0.069818,0.050858,1.00757));\n    k += gabor(p, vec4(-0.065882,-0.034145,1.987954,3.077076), vec4(0.228471,0.199526,0.110152,1.791592));\n    k += gabor(p, vec4(-0.444584,0.240008,-0.929493,8.698193), vec4(0.709215,0.106753,0.022734,0.786713));\n    k += gabor(p, vec4(-0.374828,-0.036039,-0.111958,4.245399), vec4(0.328908,0.042498,0.042512,2.0));\n    k += gabor(p, vec4(-0.290075,0.61848,0.22658,-1.41704), vec4(0.187687,0.68726,0.090094,0.343673));\n    k += gabor(p, vec4(-0.432121,0.32914,-3.848238,-2.747508), vec4(0.220422,0.0913,0.061458,2.0));\n    k += gabor(p, vec4(0.034005,-0.173338,0.682356,-0.219729), vec4(0.090582,0.028675,0.016907,1.913917));\n    k += gabor(p, vec4(0.137499,-0.133281,1.140208,0.579878), vec4(0.149984,0.029537,0.029584,2.0));\n    k += gabor(p, vec4(-0.157518,0.252946,-2.352406,-0.398149), vec4(0.177678,0.105983,0.088718,1.078041));\n    k += gabor(p, vec4(0.262378,-0.898371,-3.159848,-0.617862), vec4(1.841074,1.187748,0.195378,0.440633));\n    k += gabor(p, vec4(0.791403,0.481989,2.579117,-3.965267), vec4(0.344494,0.083414,0.037998,2.0));\n    k += gabor(p, vec4(-0.432,0.320863,-0.31978,4.094501), vec4(0.280208,0.251435,0.054559,2.0));\n    k += gabor(p, vec4(-0.062294,0.621196,-0.838812,1.529375), vec4(0.204822,0.112255,0.102377,1.797265));\n    k += gabor(p, vec4(-0.361129,0.033464,-2.768565,-3.116299), vec4(0.109412,0.0584,0.054704,0.420309));\n    k += gabor(p, vec4(-0.199014,-0.302895,4.684103,0.028759), vec4(0.470111,0.091007,0.069796,2.0));\n    k += gabor(p, vec4(-0.184987,0.078094,-2.770378,2.463654), vec4(0.216914,0.224652,0.028291,2.0));\n    k += gabor(p, vec4(0.118958,-0.099268,1.109602,-0.103551), vec4(0.114673,0.023455,0.023075,2.0));\n    k += gabor(p, vec4(0.610161,-0.27636,1.583176,1.190808), vec4(0.144845,0.301635,0.03915,0.333904));\n    k += gabor(p, vec4(0.512675,0.498724,-0.411571,0.910714), vec4(0.33881,0.290397,0.084319,0.896444));\n    k += gabor(p, vec4(0.951853,0.507897,-1.011648,1.618631), vec4(0.327067,0.144838,0.019078,1.141161));\n    k += gabor(p, vec4(-0.176385,0.202336,1.160739,-8.113738), vec4(0.183372,0.172863,0.09168,0.545357));\n    k += gabor(p, vec4(0.260769,-0.172973,3.064544,-4.686034), vec4(0.474501,0.12322,0.023537,1.107544));\n    k += gabor(p, vec4(0.96272,-1.030859,-1.090912,4.302645), vec4(3.180934,4.0,0.791512,0.605995));\n    k += gabor(p, vec4(-0.455817,-0.210685,1.071178,2.411746), vec4(1.046598,0.666498,0.126631,0.500429));\n    k += gabor(p, vec4(-0.226222,-0.049737,0.733288,2.020009), vec4(0.164303,0.26177,0.048891,0.384865));\n    k += gabor(p, vec4(-0.514401,0.279552,-0.292445,-2.009852), vec4(0.840787,0.393814,0.053,0.944863));\n    k += gabor(p, vec4(0.424677,0.1403,1.423441,4.307448), vec4(0.578094,0.567006,0.076894,0.446201));\n    k += gabor(p, vec4(0.423618,0.76483,-0.376578,-0.112302), vec4(0.322914,0.524322,0.161126,0.77095));\n    k += gabor(p, vec4(-0.188491,0.023005,-2.44193,1.023652), vec4(0.375367,0.023069,0.013504,2.0));\n    k += gabor(p, vec4(-0.29261,0.018351,-0.088462,-1.852936), vec4(0.237198,0.016483,0.011538,2.0));\n    k += gabor(p, vec4(0.667653,0.59606,-4.224357,4.902703), vec4(0.70109,0.040782,0.04078,2.0));\n    k += gabor(p, vec4(0.784716,0.496621,-0.698978,-0.207567), vec4(0.659373,0.095808,0.027292,1.125581));\n    k += gabor(p, vec4(0.02418,-0.191299,2.279213,0.614462), vec4(0.13913,0.06895,0.017311,0.829571));\n    k += gabor(p, vec4(-1.551898,-0.396357,1.090867,0.512445), vec4(2.864724,2.53267,0.429016,0.841558));\n    k += gabor(p, vec4(0.356697,0.754099,-0.60932,-2.4324), vec4(0.091818,0.350547,0.04565,0.105012));\n    k += gabor(p, vec4(0.123194,0.875456,-2.641261,-1.338253), vec4(0.418122,0.312803,0.123254,1.121264));\n    k += gabor(p, vec4(0.059988,-0.17376,-0.333519,4.122564), vec4(0.127655,0.025386,0.025426,2.0));\n    k += gabor(p, vec4(-0.395367,-0.526258,2.555245,2.309204), vec4(0.115112,0.040238,0.017421,1.457304));\n    k += gabor(p, vec4(-1.24717,-1.21382,-1.598397,-1.562955), vec4(0.696092,2.777595,0.348026,2.0));\n    k += gabor(p, vec4(0.121123,0.774573,2.215531,2.046042), vec4(0.225586,0.341416,0.065611,2.0));\n    k += gabor(p, vec4(-0.585164,-0.202071,1.503248,0.563106), vec4(1.669638,0.098505,0.052247,0.994706));\n    k += gabor(p, vec4(-0.009704,-0.047721,1.965892,-1.123234), vec4(0.274596,0.19656,0.067975,1.91019));\n    k += gabor(p, vec4(-0.701409,-1.505539,0.049456,2.439884), vec4(2.132902,0.533346,0.070326,2.0));\n    k += gabor(p, vec4(-0.379408,0.169497,-3.388937,-4.466866), vec4(0.319558,0.204136,0.038884,1.23873));\n    k += gabor(p, vec4(-0.224901,-0.008772,3.431489,2.769467), vec4(3.017422,3.694347,0.534176,0.197074));\n    k += gabor(p, vec4(0.760787,-0.03732,-1.768762,1.918012), vec4(1.596591,0.634446,0.139237,1.263995));\n    k += gabor(p, vec4(-0.180821,0.196843,-0.713683,4.093729), vec4(0.156011,0.149393,0.077996,1.075973));\n    k += gabor(p, vec4(-0.05371,-0.590961,-0.900992,0.945352), vec4(1.073788,0.211961,0.17962,1.880627));\n    k += gabor(p, vec4(-0.262078,-0.035114,0.961312,0.954131), vec4(0.120842,0.159521,0.060434,0.847853));\n    k += gabor(p, vec4(-0.457462,-0.557874,1.94467,1.900336), vec4(0.140673,0.013263,0.013134,1.131422));\n    k += gabor(p, vec4(-0.13005,-0.12029,-1.577588,1.998521), vec4(0.119571,0.139164,0.059735,0.163756));\n    k += gabor(p, vec4(-0.455911,0.108598,-0.544227,3.269219), vec4(0.521049,1.365747,0.182423,0.218367));\n    k += gabor(p, vec4(-0.227245,0.117878,1.210441,-2.102024), vec4(0.665057,0.180992,0.039866,1.40736));\n    k += gabor(p, vec4(0.124327,0.348022,0.033784,1.330662), vec4(0.364345,0.095954,0.042202,2.0));\n    k += gabor(p, vec4(-0.272641,-0.463396,-1.185092,-1.604532), vec4(0.33831,0.060666,0.015346,1.358458));\n    k += gabor(p, vec4(-1.086542,-0.82254,-1.373642,-2.699084), vec4(0.400176,0.910392,0.199828,0.712753));\n    k += gabor(p, vec4(0.037689,0.098208,2.275507,3.037931), vec4(0.153623,0.612187,0.076571,0.435728));\n    k += gabor(p, vec4(-0.232298,0.011014,-1.031202,3.633513), vec4(0.142033,0.036705,0.036195,0.96364));\n    k += gabor(p, vec4(-0.199641,0.179293,0.23952,1.210242), vec4(0.263992,0.332548,0.050659,0.82166));\n    k += gabor(p, vec4(-0.196574,0.26635,2.732392,1.530336), vec4(0.41131,0.027392,0.0274,2.0));\n    k += gabor(p, vec4(-0.022124,-0.328547,-1.753713,-0.848102), vec4(0.13141,0.104419,0.065718,1.775821));\n    k += gabor(p, vec4(-0.352752,-0.285195,-2.286571,-12.222082), vec4(0.312289,0.180645,0.040817,0.64231));\n    k += gabor(p, vec4(0.06286,0.238088,2.102645,1.241845), vec4(1.344422,1.088828,0.148744,0.68233));\n    k += gabor(p, vec4(-0.195361,0.042601,2.022744,-0.553397), vec4(0.144398,0.293752,0.066126,0.810225));\n    k += gabor(p, vec4(-0.425323,-0.09807,1.96606,9.485444), vec4(0.045934,0.015645,0.015682,0.278051));\n    k += gabor(p, vec4(-0.461181,0.097213,9.066835,10.966313), vec4(0.30746,0.014207,0.014236,2.0));\n    k += gabor(p, vec4(-0.388867,-0.823744,-5.775518,2.09875), vec4(0.287058,0.918143,0.122877,0.030537));\n    k += gabor(p, vec4(-0.165205,0.086432,-1.12069,1.994085), vec4(0.264807,0.325157,0.040794,1.720685));\n    k += gabor(p, vec4(-0.408077,-0.127214,0.072641,-2.406266), vec4(0.199923,0.176467,0.022305,2.0));\n    k += gabor(p, vec4(-0.45679,0.117678,2.153677,1.024134), vec4(0.276779,0.07768,0.029793,0.751661));\n    k += gabor(p, vec4(0.499158,-0.293713,-0.73616,-3.148914), vec4(0.043511,0.048663,0.007812,0.930644));\n    k += gabor(p, vec4(-0.181993,0.301002,3.055181,-2.044688), vec4(0.081534,0.055403,0.029359,0.271002));\n    k += gabor(p, vec4(1.177887,0.922478,-1.998845,5.230097), vec4(1.055594,4.0,0.527726,1.738051));\n    k += gabor(p, vec4(0.173108,-0.888124,-1.849129,-0.527014), vec4(0.551609,0.516947,0.199077,0.545266));\n    k += gabor(p, vec4(0.34981,0.391756,0.535055,2.44051), vec4(0.586068,0.07225,0.043458,2.0));\n    k += gabor(p, vec4(-0.00599,-0.056211,2.6223,-3.157705), vec4(1.154225,2.920344,0.366601,0.507404));\n    k += gabor(p, vec4(0.145403,0.36109,0.026341,-0.778414), vec4(0.164184,0.076006,0.075998,0.846553));\n    k += gabor(p, vec4(-0.837113,-0.181843,1.595087,1.770136), vec4(0.104182,0.172542,0.022443,0.634823));\n    k += gabor(p, vec4(0.212065,0.525604,-1.758677,-0.287702), vec4(1.159111,0.501214,0.062723,1.146326));\n    k += gabor(p, vec4(0.043946,-0.161737,0.614572,-1.116814), vec4(0.077793,0.020579,0.020635,2.0));\n    k += gabor(p, vec4(-0.662577,-1.276966,1.430754,5.665525), vec4(0.903575,1.670627,0.451561,1.658962));\n    k += gabor(p, vec4(-0.435167,0.162202,-3.472267,-2.279833), vec4(0.463681,0.614389,0.102917,0.925359));\n    k += gabor(p, vec4(0.302238,0.395674,1.04846,-5.459702), vec4(1.094851,0.111932,0.034219,1.193161));\n    k += gabor(p, vec4(0.066089,0.186358,5.176962,-6.549005), vec4(0.525006,0.021284,0.016633,0.272453));\n    k += gabor(p, vec4(0.433915,0.368704,2.621105,-8.962455), vec4(0.102737,0.407893,0.051193,0.0406));\n    k += gabor(p, vec4(0.063313,0.500705,2.433384,2.225831), vec4(0.196771,0.185603,0.077165,1.662256));\n    k += gabor(p, vec4(-0.239483,0.258177,-1.855879,1.121516), vec4(0.317118,0.042966,0.016544,1.757299));\n    k += gabor(p, vec4(0.633446,0.390737,-0.620499,0.676774), vec4(0.699753,0.031382,0.021924,0.523139));\n    k += gabor(p, vec4(0.004001,-0.416061,-1.384582,-1.632852), vec4(0.294973,0.092225,0.016587,0.996885));\n    k += gabor(p, vec4(-0.224038,0.008609,-1.894555,-5.54172), vec4(0.116956,0.016382,0.015763,2.0));\n    k += gabor(p, vec4(-0.155906,0.644788,-0.690275,6.385848), vec4(0.188217,0.386944,0.067574,0.751047));\n    k += gabor(p, vec4(0.168311,-0.089395,-2.561373,3.83277), vec4(0.391834,0.057775,0.023958,2.0));\n    k += gabor(p, vec4(-0.478723,0.225668,2.793866,-0.490646), vec4(0.19975,0.099815,0.051861,2.0));\n    k += gabor(p, vec4(-0.166591,-0.126287,0.480842,-1.349817), vec4(2.581644,1.017512,0.128904,1.187949));\n    k += gabor(p, vec4(-1.243431,1.10138,-2.331943,0.429051), vec4(0.6685,1.339485,0.333649,0.251197));\n    k += gabor(p, vec4(-0.831302,-0.445594,1.621646,7.211202), vec4(0.077876,0.260596,0.035666,0.319245));\n    k += gabor(p, vec4(-0.766263,-0.027205,-1.55519,-5.75377), vec4(0.092757,0.124905,0.02827,0.567471));\n    k += gabor(p, vec4(0.201216,-0.327053,-0.978353,-1.757462), vec4(0.742866,0.037645,0.037648,2.0));\n    k += gabor(p, vec4(-0.183806,-0.088469,-2.155636,2.261027), vec4(0.129985,0.157697,0.047269,2.0));\n    k += gabor(p, vec4(-0.354975,-0.332057,1.019833,1.436386), vec4(0.189184,0.083321,0.032665,2.0));\n    k += gabor(p, vec4(-0.622903,-0.694748,2.309487,0.067806), vec4(0.601193,0.645567,0.09213,1.504976));\n    k += gabor(p, vec4(-0.168987,0.256076,0.858273,-3.023592), vec4(0.200316,0.085441,0.072298,2.0));\n    k += gabor(p, vec4(0.515358,0.455452,1.728937,-2.176341), vec4(0.089685,0.043826,0.04384,0.160172));\n    k += gabor(p, vec4(-0.42776,0.093611,-0.03145,-0.183072), vec4(0.332901,0.211537,0.049119,2.0));\n    k += gabor(p, vec4(-0.40113,0.089627,0.73005,-8.021703), vec4(0.247828,0.025099,0.018371,1.559595));\n    k += gabor(p, vec4(-0.400688,-0.446737,0.064098,-10.436528), vec4(0.096824,0.079591,0.034934,0.45017));\n    k += gabor(p, vec4(0.427384,0.554661,1.347263,-1.51928), vec4(0.343874,0.454541,0.171911,1.602134));\n    k += gabor(p, vec4(-0.02215,-0.340655,-1.746565,3.04745), vec4(0.144369,0.126381,0.053588,1.967236));\n    k += gabor(p, vec4(0.155944,-0.109163,0.649516,-1.593377), vec4(0.127592,0.051005,0.043414,2.0));\n    k += gabor(p, vec4(-0.123816,-0.138666,0.972959,0.168602), vec4(0.143982,0.074389,0.04207,1.924414));\n    k += gabor(p, vec4(-0.310946,0.383742,1.173198,1.531887), vec4(1.220753,4.0,0.609466,0.231483));\n    k += gabor(p, vec4(-0.405521,-0.50625,-0.471106,5.367675), vec4(0.072504,0.066222,0.035446,0.587936));\n    k += gabor(p, vec4(0.414658,0.60379,-1.860296,-1.94146), vec4(0.528198,1.111783,0.145575,1.356122));\n    k += gabor(p, vec4(-0.069091,0.330613,-0.691841,7.343638), vec4(0.165728,0.343698,0.082089,1.220366));\n    k += gabor(p, vec4(-1.14194,-1.121542,-5.574655,-5.809675), vec4(1.20104,1.431498,0.479559,0.727445));\n    k += gabor(p, vec4(0.594561,0.391228,2.660375,-1.491018), vec4(0.826453,0.097252,0.055854,1.826513));\n    k += gabor(p, vec4(-0.195691,0.094661,-2.756049,5.903936), vec4(0.124629,0.252904,0.038393,0.967491));\n    k += gabor(p, vec4(0.312667,0.39502,-2.623991,2.03556), vec4(0.277395,0.050786,0.050614,2.0));\n    k += gabor(p, vec4(0.108964,-0.064478,0.994227,0.817407), vec4(0.181991,0.014409,0.014403,2.0));\n    k += gabor(p, vec4(-0.049783,0.047406,2.274763,0.907087), vec4(0.148403,0.523372,0.070122,0.506112));\n    k += gabor(p, vec4(-0.408478,-0.209095,0.07956,0.162016), vec4(0.113849,0.24264,0.030567,1.017655));\n    //*/\n    \n    fragColor.xyz = vec3(0.5*k + 0.5);\n}","name":"Image","description":"","type":"image"}]}