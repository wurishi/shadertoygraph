{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[],"code":"// Nonagon From Fast Complex Ops.\n// Made by Rik Riesmeijer - CC0, No Rights Reserved.\n\nvec2 complex(float real, float imaginary) {\n    return vec2(real, imaginary);\n}\n\nfloat re(vec2 z) {\n    return z.x;\n}\n\nfloat im(vec2 z) {\n    return z.y;\n}\n\nfloat arg(vec2 z) {\n    return atan(im(z), re(z));\n}\n\nvec2 ccbrt(vec2 z) {\n    float arg = arg(z) / 3.0;\n    float len = pow(length(z), 1.0 / 3.0);\n    return len * vec2(cos(arg), sin(arg));\n}\n\nvec2 cqirt(vec2 z) {\n    float arg = arg(z) / 5.0;\n    float len = pow(length(z), 1.0 / 5.0);\n    return len * vec2(cos(arg), sin(arg));\n}\n\nvec2 csqrt(vec2 z) {\n    float m = dot(z, z), c = re(z), d = im(z);\n    z = vec2(sqrt(m + c) * sign(d), sqrt(m - c));\n    return z * inversesqrt(2.0);\n}\n\nvec2 cqart(vec2 z) {\n    return csqrt(csqrt(z));\n}\n\nvec2 cmul(vec2 z, vec2 q) {\n    float a = q.x * (z.x + z.y);\n    return vec2(-z.y * (q.x + q.y), z.x * (q.y - q.x)) + a;\n}\n\nvec2 csqr(vec2 z) {\n    return cmul(z, z);\n}\n\nvec2 ccon(vec2 z) {\n    z.y = -im(z);\n    return z;\n}\n\nvec2 cinv(vec2 z) {\n    return ccon(z) / dot(z, z);\n}\n\nvec2 cdiv(vec2 z, vec2 q) {\n    return cmul(z, cinv(q));\n}\n\nvec2 clinear(vec2 a, vec2 b) {\n    return cdiv(b, a);\n}\n\nvec2 xrefl(vec2 z) {\n    return vec2(-z.x, z.y);\n}\n\nfloat dist(vec2 z, vec2 p) {\n    return length(z - p);\n}\n\nvoid mainImage(out vec4 y, in vec2 z) {\n    z = 3.0 * (z - 0.5 * iResolution.xy) / iResolution.y;\n    \n    vec2 r0 = vec2(1.0, 0.0);\n    vec2 r1 = ccbrt(vec2(-0.5, sqrt(0.75)));\n    vec2 r2 = csqr(r1);\n    vec2 r3 = vec2(-0.5, sqrt(0.75));\n    vec2 r4 = csqr(r2);\n    vec2 r5 = ccon(r4);\n    vec2 r6 = ccon(r3);\n    vec2 r7 = ccon(r2);\n    vec2 r8 = ccon(r1);\n    \n    float d = dist(r0, z);\n    \n    d = min(d, dist(z, r1));\n    d = min(d, dist(z, r2));\n    d = min(d, dist(z, r3));\n    d = min(d, dist(z, r4));\n    d = min(d, dist(z, r5));\n    d = min(d, dist(z, r6));\n    d = min(d, dist(z, r7));\n    d = min(d, dist(z, r8));\n    \n    y = vec4(d < 0.2);\n}","name":"Image","description":"","type":"image"},{"outputs":[],"inputs":[],"code":"\n\n/* Start of @Spalmer's cubic root solver. */\nvec3 CubicSpalmerInlined(vec4 k)\n{\n    float NaN = uintBitsToFloat(0x7f800001u);\n    float d = k.x, c = k.y, b = k.z, a = k.w;\n    if (a == 0.) { // quadratic inlined\n        if (b == 0.)\n            return vec3(-d/c, NaN, NaN); // handle malformed eqn, let divide handle c == 0 case\n        float n = c * c - 4. * b * d; // discriminant\n        return vec3(n < 0. ? vec2(NaN) :\n            .5 / b * (sign(b) * sqrt(n) * vec2(-1, 1) - c) // two solutions, lesser first (may be identical)\n            , NaN);\n    }\n    d /= a; c /= a; b /= a;\n    float x = b/-3.; // inflection point\n    d += (c - 2.*x*x)*x; c += b*x; // depress cubic\n    float l = c / 3.,\n        s = l*l*l,\n        m = d*d + 4.*s;\n    if (m > 0.) { // 1 real root\n        vec2 w = sqrt(m) * vec2(1,-1) - d;\n        float v = abs(w.x) < abs(w.y) ? w.y : w.x;\n        v = sign(v) * pow(.5*abs(v), 1./3.);\n        return vec3(v - l / v, NaN, NaN) + x; // Blinn single cbrt idea\n    }\n    // 2 or 3 distinct roots\n    return 2. * sign(c)*sqrt(abs(l)) * cos((atan(sqrt(-m), -sign(c)*d) - acos(-1.) * vec3(0,2,4))/3.) + x;\n}\n/* End of @Spalmer's cubic root solver. */\n","name":"Common","description":"","type":"common"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"433yzn","date":"1734608810","viewed":75,"name":"Nonagon From Fast Complex Ops","username":"rikr","description":"Working my way up to the 11-gon, so I needed these complex functions along the way and I was missing the nonagon construction on my page. Made by Rik Riesmeijer - CC0, No Rights Reserved.","likes":1,"published":3,"flags":0,"usePreview":0,"tags":["complex","of","roots","unity","regular","nine","nonagon","contruct","9gon"],"hasliked":0,"parentid":"","parentname":""}}