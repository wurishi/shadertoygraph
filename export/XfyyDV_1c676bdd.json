{"ver":"0.1","info":{"id":"XfyyDV","date":"1732372804","viewed":215,"name":" The Light","username":"wyatt","description":"light","likes":14,"published":3,"flags":32,"usePreview":1,"tags":["light"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XsfGRn","filepath":"/media/a/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","previewfilepath":"/media/ap/1f7dca9c22f324751f2a5a59c9b181dfe3b5564a04b724c657732d0bf09c99db.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"Main {\n\n    vec2 s = vec2(length(A(U).xy),length(A(U).zw))/float(iFrame);\n\n    Q = .7*sin(-length(U-vec2(.5,.6)*R)/R.y+1.5-.2*vec4(1,2,3,4))*(.5+.5*fbm(.01*U).x);\n    \n    vec2 V = U;\n        \n    \n    U += 10.*noise(.1*U).xy;\n    vec2 a = vec2(1e8);\n    vec2 b = vec2(1e9);\n    for (float x = -2.; x <= 2.; x++) \n    for (float y = -2.; y <= 2.; y++) {\n    \n        vec2 u = (vec2(x,y)+round(U/50.))*50.;\n        vec2 h = hash(vec4(u,0,1)).xy;\n        vec2 v = u+(h-.5)*50.;\n        if (length(U-v)<length(U-a)) {\n            b = a;\n            a = v;\n        } else if (length(U-v)<length(U-b)) {\n            b = v;\n        }\n        \n    }\n    Q *= .9+.1*vec4(1)*smoothstep(0.,2.,abs(dot(U-.5*(a+b),normalize(b-a))));\n    \n    {\n        \n        vec2 a = vec2(1e8);\n    vec2 b = vec2(1e9);\n    for (float x = -2.; x <= 2.; x++) \n    for (float y = -2.; y <= 2.; y++) {\n    \n        vec2 u = (vec2(x,y)+round(U/20.))*20.;\n        vec2 h = hash(vec4(u,0,1)).xy;\n        vec2 v = u+(h-.5)*20.;\n        if (length(U-v)<length(U-a)) {\n            b = a;\n            a = v;\n        } else if (length(U-v)<length(U-b)) {\n            b = v;\n        }\n        \n    }\n    Q *= .95+.05*vec4(1)*smoothstep(0.,2.,abs(dot(U-.5*(a+b),normalize(b-a))));\n    \n    }\n    vec4 q0 = 30.*s.x*(1.-.2*vec4(1,2,3,4));\n    \n    Q += q0;\n    \n    U = V;\n    \n    \n    Q *= 1.-.5*exp(-.05*(-.2*R.x+U.x-.05*R.y));\n    Q *= 1.-.5*exp(-.05*(.8*R.x-U.x-.05*R.y));\n    Q *= 1.-.5*exp(-.05*(U.y-.05*R.y));\n    Q *= 1.-.5*exp(-.05*(R.y-U.y-.05*R.y));\n    \n    \n    U = V;\n    if (U.y>.5*R.y)U.y = R.y-U.y;\n    if (R.y-U.y>.95*R.y&&-.25*R.x+U.x>U.y&&.75*R.x-U.x>U.y) {\n        Q = B(U);\n        Q *= 1.-2.*fwidth(Q.x);\n    }\n    \n    U = V;\n    if (U.x>.5*R.x)U.x = .75*R.x-U.x;\n    else U.x -= .25*R.x;\n    if (R.x-U.x>R.x-.05*R.y&&U.y>U.x&&R.y-U.y>U.x){\n        Q = B(U.yx);\n        Q *= 1.-2.*fwidth(Q.x);\n    }\n    U = V;\n    if (U.x>.76*R.x||U.x<.24*R.x) Q *= 0.;\n\n    if (U.x>.75*R.x-.05*R.y||U.x<.25*R.x+.05*R.y||U.y>.95*R.y||U.y<.05*R.y)Q += .5*q0;\n\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"#define R iResolution.xy\n#define Main void mainImage(out vec4 Q, in vec2 U)\n#define A(U) texture(iChannel0,(U)/R)\n#define B(U) texture(iChannel1,(U)/R)\n#define ei(a) mat2(cos(a),sin(a),-sin(a),cos(a))\nvec4 hash(vec4 p4)\n{\n\tp4 = fract(p4  * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}\n\n\nvec4 noise (vec2 U) {\n    vec2 f = floor(U);\n    vec2 c = ceil(U);\n    vec4 _00 = hash(vec4(f,f));\n    vec4 _01 = hash(vec4(f.x,c.y,f.x,c.y));\n    vec4 _10 = hash(vec4(c.x,f.y,c.x,f.y));\n    vec4 _11 = hash(vec4(c,c));\n    vec4 _0 = mix(_00,_01,fract(U.y));\n    vec4 _1 = mix(_10,_11,fract(U.y));\n    return mix(_0,_1,fract(U.x));\n}\nvec4 fbm (vec2 U) {\n    mat2 m = ei(.5);\n    vec4 o = vec4(0);\n    for (float i = 0.; i < 10.; i++) {\n        U *= 1.5*m;\n        o += noise(U)/5.*exp2(-.3*i);\n    }\n    return o;\n}","name":"Common","description":"","type":"common"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"Main {\n    Q = A(U);\n    vec4 b = hash(vec4(iFrame, iTime,0,1));\n    for (float x = 0.; x < 15.; x++)\n    for (float y = 0.; y < 15.; y++)\n    {\n        vec3 u = vec3(2.*(b.zw+U-vec2(.5,.6)*R)/R.y,0);\n        u.z += .5*length(u);\n        vec3 v = vec3(.02*((vec2(x,y))/10.*2.-1.),0);\n        \n        float l = length(u-v);\n        float a = 1e4*3.1415926*2.*l;\n    \n        Q.xy += vec2(cos(a),sin(a))/l/10./10.;\n        //Q.zw += vec2(cos(.99*a),sin(.99*a))/l/10./10.;\n    }\n\n\n}","name":"Buffer A","description":"","type":"buffer"}]}