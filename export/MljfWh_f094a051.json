{"ver":"0.1","info":{"id":"MljfWh","date":"1543820716","viewed":165,"name":"ray X plane","username":"jasonaugur","description":"rusty vector math","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["ray","intersection","plane"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define T iTime * .25\n#define M mat2( cos(T), sin(T), -sin(T), cos(T) )\n#define L(a,b) d = min(d, seg( p, a, b ) )\n#define thick 0.005\n#define R(c) Out = mix( Out, c, smoothstep(thick,0.,d) ); d = 999.\n\nvec2 V(vec3 a ) { a.xz = a.xz * M; return a.xy/(a.z+1.); }\nvec2 V(float x,float y,float z) { return V(vec3(x,y,z)); }\n\nfloat seg( vec2 p, vec2 a, vec2 b ) {\n    vec2 v = b - a;\n    \t p = p - a;\n    float t = dot(v,p) / dot(v,v);\n    t = max( 0., t);\n    t = min( 1., t);\n    return distance( p, v * t );\n}\n\nvec3 linePlainIntersect( vec3 e, vec3 f, vec3 a, vec3 b, vec3 c ) {\n    vec3 n = cross(b-a,c-a);\n    float t = dot(n,a-e)/dot(n,f-e);\n    return e + (f-e) * t;\n}\n\nvoid mainImage( out vec4 Out, in vec2 Frag )\n{\n\tvec2 uv = Frag.xy / iResolution.xy;\n    vec2 p = (Frag+Frag-iResolution.xy)/iResolution.y;\n\tfloat d =  999.;\n    \n    vec3 a = vec3(-.5,.0,.5);\n    vec3 b = vec3(.5,.3,.5);\n    vec3 c = vec3(.0,-.5,.5);\n    \n    vec3 e = vec3(-.2,-.3,-.7);\n    vec3 f = vec3(.1,.0,.7);\n    \n    vec3 X = linePlainIntersect( e, f, a, b, c );\n    \n    vec3 n = cross(b-a,c-a); vec3 blu = .1 * normalize(n);\n    vec3 s = b-a; \t\t\t vec3 red = .1 * normalize(s);\n    vec3 t = cross(n, s);\t vec3 grn = .1 * normalize(t); \n    \n    Out = vec4(uv,0.5+0.5*sin(iTime),1.0);\n    \n    L( V( a ), V( b ) );\n    L( V( b ), V( c ) );\n\tL( V( c ), V( a ) ); \t R( vec4(1.) );\n    \n\tL( V( e ), V(   f   ) ); R( vec4(.75,1.,1.,0.) );\n    L( V( X ), V( X+red ) ); R( vec4(1.,0.,0.,0.) );\n    L( V( X ), V( X+grn ) ); R( vec4(0.,1.,0.,0.) );\n    L( V( X ), V( X+blu ) ); R( vec4(0.,0.,1.,0.) );\n}","name":"Image","description":"","type":"image"}]}