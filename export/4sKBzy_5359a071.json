{"ver":"0.1","info":{"id":"4sKBzy","date":"1529345249","viewed":468,"name":"Edge detection in the camera","username":"Veggiebob","description":"Finds edges in the camera! Yay!","likes":1,"published":1,"flags":2,"usePreview":0,"tags":["detection","camera","edge"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4sXGRn","filepath":"/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","previewfilepath":"/media/ap/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float total (vec4 col){\n    return col.r+col.g+col.b;\n}\nfloat change (vec4 col1, vec4 col2){\n    return length(col1-col2);//abs(col1.r-col2.r)+abs(col1.g-col2.g)+abs(col1.b-col2.b);\n}\nvec4 contrast (vec4 col, float n){\n    return 0.5+(col-0.5)*n;\n}\nbool foundEdge (vec2 uv){\n    vec4 camCol = texture(iChannel0, uv);\n    float d = 0.002;\n    vec4 top = texture(iChannel0, vec2(uv.x, uv.y+d));\n    vec4 bottom = texture(iChannel0, vec2(uv.x, uv.y-d));\n    vec4 right = texture(iChannel0, vec2(uv.x+d, uv.y));\n    vec4 left = texture(iChannel0, vec2(uv.x-d, uv.y));\n    \n    float c = 1.2;\n    camCol = contrast(camCol, c);\n    top = contrast(top, c);\n    bottom = contrast(bottom, c);\n    right = contrast(right, c);\n    left = contrast(left, c);\n    \n    \n    float check = 0.08;\n    if(change(top, camCol)>check||change(bottom, camCol)>check||change(left, camCol)>check||change(right, camCol)>check){\n        return true;\n    } else {\n        return false;\n    }\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\tvec4 col = vec4(.8);\n    if(foundEdge(uv)){\n        col = contrast(texture(iChannel1, uv), 5.);\n        float edgesHit = 0.;\n        float dist = 0.002;\n        for(float i = 0.; i<360.; i+=10.){\n            if(foundEdge(vec2(uv.x+cos(i)*dist, uv.y+sin(i)*dist))){\n                edgesHit += 1.;\n            }\n        }\n        if(edgesHit<360./10.*0.3){\n            col = vec4(0.);\n        }\n    } \n    // Output to screen\n    fragColor = col;\n}","name":"Image","description":"","type":"image"}]}