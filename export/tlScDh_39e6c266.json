{"ver":"0.1","info":{"id":"tlScDh","date":"1594218589","viewed":80,"name":"马赛克噪声图","username":"gggab","description":"马赛克形状的噪声图","likes":3,"published":1,"flags":0,"usePreview":0,"tags":[],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float PI=3.1415926;\nfloat Hash21(vec2 p){\n    p = fract(p*vec2(234.34,435.345));\n    p+=dot(p,p+34.23);\n    return fract(p.x*p.y);\n}\nvec2 N22(vec2 p){\n\tvec3 a = fract(p.xyx*vec3(123.34,234.34,345.65));\n    a+=dot(a,a+34.45);\n    return fract(vec2(a.x*a.y,a.y*a.z));\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = (fragCoord-.5*iResolution.xy)/iResolution.y;\n\t\n    vec3 col = vec3(0);\n    \n    vec2 oUv=2.*uv-vec2(1,1);\n    uv *= 10.;\n    //uv+=(iTime);\n   \tvec2 c = fract(uv);\n    vec2 id = floor(uv);\n    \n    float n=Hash21(id);\n    \n    float width=.1;\n    //vec2 edge =1.-step(sin(c*PI*.5),1.-width);\n    vec2 edge =vec2(smoothstep(vec2(.4),-vec2(.4),sin(c*PI)-width));\n    \n    col=vec3(edge.x+edge.y)*.5;\n    \n    col=vec3(n);\n    \n    float minDist = 100.;\n    oUv *=1.;\n    \tvec2 gv = fract(oUv);\n        vec2 id2 = floor(oUv);\n        \n    float t = iTime*2. ;\n        for(float y=-1.;y<=1.;y++){\n        \tfor(float x=-1.;x<=1.;x++){\n                vec2 offs=vec2(x,y);\n                \n                vec2 n = N22(id2+offs);\n                vec2 p =offs+sin(n*t)*.5;\n                \n                float d = length(gv-p);\n                if(d<minDist){\n                \t//minDist=smoothstep(0.,1.,d);\n                    //minDist=step(0.5,d);\n                    minDist=d;\n                }\n            }\n        }\n        //col=vec3(0.,0.8,1.);\n        col=mix(col,vec3(minDist),minDist);\n    \t//col+=vec3(minDist);\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}