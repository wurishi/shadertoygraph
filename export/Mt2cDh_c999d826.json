{"ver":"0.1","info":{"id":"Mt2cDh","date":"1508442761","viewed":108,"name":"STExos 1) Line Affine Equation","username":"ttoinou","description":"First Shadertoy exercise : compute the distance to a line with two sides using affine equations","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["stexos"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(\n    out vec4 color, // in [0,1]^4\n    in vec2 coord   // in [0,iResolution.xy[\n) {\n    float zoom = (cos(iTime*3.)+2.)*10.;// > 0\n    float signedDistLinePixels; // > 0, unit is pixels\n    // algebraic distance, we keep the side info by not using abs()\n    \n    // Exo 1 ax+by+c=0\n    \n    // Method a\n    float a = iMouse.x-40.;\n    float b = -iMouse.y+120.;\n    float c = 140.;\n    \n    // distance to the line defined by (ax+by+c=0)\n    // unit is pixel\n    signedDistLinePixels = (a*coord.x + b*coord.y + c)/sqrt(a*a + b*b);\n    \n    // Method b :\n    // could also be written like this in homogeneous coordinates\n    // + using GLSL special instructions\n    vec3 xy1 = vec3(coord,1.);\n    vec3 abc = vec3(a,b,c);\n    signedDistLinePixels =\n         dot(xy1,abc) // vector dot product\n       / length( // vector Euclidean norm\n           abc.xy  // or vec2(a,b)\n    );\n    \n\tcolor.rgb = mix( // 1-linear interpolation in 3D\n          vec3(1.) // white\n        , signedDistLinePixels < 0. ? vec3(1.,.0,.0) : vec3(.0,.0,1.) // red or blue\n        , clamp( // here the coeff for the interpolation\n            pow(\n                abs( // removing the side info\n                    signedDistLinePixels/iResolution.x // removing the pixels units\n                   *zoom) // make the line thinner or bigger\n              , iMouse.z > .5 ? 1.5 : 1. // smoother gradient when mouse pressed\n            )\n          ,0.,1.) // minimax to put the value in [0,1]\n                  // and not have values others than mix of red white blue\n                  // not mandatory, just a protection\n    );\n}","name":"Image","description":"","type":"image"}]}