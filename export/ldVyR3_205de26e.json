{"ver":"0.1","info":{"id":"ldVyR3","date":"1522808162","viewed":207,"name":"Twisty Box","username":"Michael_Manning","description":"Some twisty boxes for my first shader","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["rotation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define speed 0.9\n#define scaleCo 0.35\n#define rotation 1.4\n#define angleOffset 0.1\n#define intensity 3.1\n#define outerOffset 0.9\n#define tiles 3.0\n\n#define PI 3.14159265359\nfloat rectangle(vec2 r, vec2 topLeft, vec2 bottomRight, float blur) {\n\tfloat ret;\n\tret = smoothstep(topLeft.x-blur, topLeft.x+blur, r.x);\n\tret *= smoothstep(topLeft.y-blur, topLeft.y+blur, r.y);\n\tret *= 1.0 - smoothstep(bottomRight.y-blur, bottomRight.y+blur, r.y);\n\tret *= 1.0 - smoothstep(bottomRight.x-blur, bottomRight.x+blur, r.x);\n\treturn ret;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 r =  2.0*vec2(fragCoord.xy - 0.5*iResolution.xy)/iResolution.y;\t\n\n    \n\tvec3 bgCol = vec3(0.85,0.85,1.0);\n\tvec3 ret = bgCol;\n    vec2 q;\n\t\n    for(float i = 20.0; i > 0.0; i--)\n    {    \n        float angle;\n\t\tangle = PI * rotation * sin(speed * iTime) + length(r) * -cos(speed * (iTime - outerOffset)) * intensity;\n    \tangle += angleOffset * i;\n        vec3 changingColor = 0.5 + 0.5*cos(iTime+  i*0.4 +vec3(0,2,4));\n        \n\t\t// q is the rotated coordinate system\n\t\tq.x =   cos(angle)*r.x + sin(angle)*r.y;\n\t\tq.y = - sin(angle)*r.x + cos(angle)*r.y;\n\t//q=r;\n        float scale = (i * scaleCo);\n      \n        \n        ret = mix(ret, (vec3(0.03 * i, 0.03 * i, 0.15 * i) + changingColor)/2.0 , rectangle(q, vec2(-0.3, -0.5) * scale, vec2(0.3, 0.5) * scale, 0.0002));\n        ret = mix(ret, (vec3(0.06 * i, 0.06 * i, 0.15 * i) + changingColor)/2.0 , rectangle(q, vec2(-0.28, -0.48) * scale, vec2(0.28, 0.48) * scale, 0.04));\n    }  \n\tvec3 pixel = ret;\n\tfragColor = vec4(pixel, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}