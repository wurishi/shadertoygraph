{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":1,"type":"buffer","id":"XsXGR8","filepath":"/media/previz/buffer01.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"channel":2,"type":"buffer","id":"4dXGR8","filepath":"/media/previz/buffer00.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"// inspired by PZ's https://www.shadertoy.com/view/Ms3yzS\n// reference: https://www.gamedev.net/articles/programming/graphics/advanced-terrain-texture-splatting-r3287/\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    U /= iResolution.xy;\n\n    vec4 T0  = texture(iChannel0,U*4.).rrrr, // boulders - mushrooms\n         T0z = T0, \n         T1  = texture(iChannel1,U),         // wood - ground\n         T1z = textureLod(iChannel1,U,6.),\n         T2 = texture(iChannel2,U);          // noise - moss\n \n    float v0 = length(T0z.rgb)/3. *2.-1.,    // centered pseudo Z-values\n          v1 = length(T1z.rgb)/3. *2.-1.,\n          x =  2.*U.x - 1.;\n    \n    v1 = 6.*v1+1.0;                          // amplify and uplift ground\n    \n    float strength1 = 1.,\n              mask1 = .5 + strength1* ( v1-v0 - 1.2*x ), // mushrooms/ground\n          strength2 = 2.,\n              mask2 = .5 + strength2 * ( v0 - (-.7));    // mushrooms/moss\n    \n    T0 = mix( T2.x*vec4(0.224,0.000,0.502,0),           // mushrooms over moss\n              T0*vec4(1 ,.9,1 ,0),\n              clamp( mask2, 0., 1. )\n             );\n    O = mix( T0*vec4(1 ,.9,1 ,0),            // mushroom on ground valleys\n             T1*vec4(0.341,0.682,1.000,0), \n             clamp( mask1, 0., 1. )\n           );\n}","name":"Image","description":"","type":"image"},{"outputs":[{"channel":0,"id":"XsXGR8"}],"inputs":[{"channel":0,"type":"music","id":"4dfGzn","filepath":"/media/a/ec8a6ea755d34600547a5353f21f0a453f9f55ff95514383b2d80b8d71283eda.mp3","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"// Created by inigo quilez - iq/2013\n// I share this piece (art and code) here in Shadertoy and through its Public API, only for educational purposes. \n// You cannot use, sell, share or host this piece or modifications of it as part of your own commercial or non-commercial product, website or project.\n// You can share a link to it or an unmodified screenshot of it provided you attribute \"by Inigo Quilez, @iquilezles and iquilezles.org\". \n// If you are a techer, lecturer, educator or similar and these conditions are too restrictive for your needs, please contact me and we'll work it out.\n\n\nvec3 hash3( float n )\n{\n    return fract(sin(vec3(n,n+1.0,n+2.0))*vec3(43758.5453123,22578.1459123,19642.3490423));\n}\n\nvec3 snoise3( in float x )\n{\n    float p = floor(x);\n    float f = fract(x);\n\n    f = f*f*(3.0-2.0*f);\n\n    return -1.0 + 4.0*mix( hash3(p+0.0), hash3(p+1.0), f );\n}\n\nfloat freqs[16];\n\nfloat dot2(in vec3 v ) { return dot(v,v); }\nvec2 usqdLineSegment( vec3 o, vec3 d, vec3 a, vec3 b )\n{\n\tvec3 oa = o - a;\n    vec3 ob = o - b;\n\tvec3 va = d*dot(oa,d)-oa;\n    vec3 vb = d*dot(ob,d)-ob;\n    \n    vec3 v1 = va;\n    vec3 v2 = vb-v1;\n    float h = clamp( -dot(v1,v2)/dot(v2,v2), 0.0, 1.0 );\n\n    float di = dot2(v1+v2*h);\n    \n    return vec2(di,h);\n}\n\nvec3 castRay( vec3 ro, vec3 rd, float linesSpeed )\n{\n\tvec3 col = vec3(0.0);\n\t\n\t\t\n\tfloat mindist = 10000.0;\n\tvec3 p = vec3(0.02);\n\tfloat h = 0.0;\n\tfloat rad = 2.4 + 0.15*freqs[0];\n\tfloat mint = 0.0;\n    for( int i=0; i<128; i++ )\n\t{\n\t\tvec3 op = p;\n\t\t\n\t\top = p;\n\t\tp  = 1.25*1.0*normalize(snoise3( 64.0*h + linesSpeed*0.015*iTime ));\n\t\t\n\t\tvec2 dis = usqdLineSegment( ro, rd, op, p );\n\t\t\n\t\tvec3 lcol = 0.6 + 0.4*sin( 10.0*6.2831*h + vec3(0.0,0.6,0.9) );\n\t\t\n\t\tfloat m = pow( texture( iChannel0, vec2(h*0.5,0.25) ).x, 2.0 )*(1.0+2.0*h);\n\t\t\n\t\tfloat f = 1.0 - 4.0*dis.y*(1.0-dis.y);\n\t\tfloat width = 1240.0 - 1000.0*f;\n\t\twidth *= 1.25;\n\t\tfloat ff = 1.0*exp(-0.06*dis.y*dis.y*dis.y);\n\t\tff *= m;\n\t\tcol += 0.3*lcol*exp( -0.3*width*dis.x )*ff;\n\t\tcol += 0.5*lcol*exp( -8.0*width*dis.x )*ff;\n\t\th += 1.0/128.0;\n\t}\n\n\n    return col;\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 q = fragCoord.xy/iResolution.xy;\n    vec2 p = -1.0+2.0*q;\n\tp.x *= iResolution.x/iResolution.y;\n    vec2 mo = iMouse.xy/iResolution.xy;\n\t\t \n\tfloat time = iTime;\n\n\n\tfor( int i=0; i<16; i++ )\n\t    freqs[i] = clamp( 1.9*pow( texture( iChannel0, vec2( 0.05 + 0.5*float(i)/16.0, 0.25 ) ).x, 3.0 ), 0.0, 1.0 );\n\t\n\t// camera\t\n\tvec3 ta = vec3( 0.0, 0.0, 0.0 );\n\nfloat isFast = smoothstep( 35.8, 35.81, iChannelTime[0] );\n\tisFast  -= smoothstep( 61.8, 61.81, iChannelTime[0] );\n\tisFast  += smoothstep( 78.0, 78.01, iChannelTime[0] );\n\tisFast  -= smoothstep(103.0,103.01, iChannelTime[0] );\n\tisFast  += smoothstep(140.0,140.01, iChannelTime[0] );\n\tisFast  -= smoothstep(204.0,204.01, iChannelTime[0] );\n\t\n    float camSpeed = 1.0 + 4.0*isFast;\t\n\n\n\tfloat beat = floor( max((iChannelTime[0]-35.7+0.4)/0.81,0.0) );\n\ttime += beat*10.0*isFast;\n\tcamSpeed *= mix( 1.0, sign(sin( beat*1.0 )), isFast );\n\n\t\nfloat linesSpeed =  smoothstep( 22.7, 22.71, iChannelTime[0] );\t\n\t  linesSpeed -= smoothstep( 61.8, 61.81, iChannelTime[0] );\n\t  linesSpeed += smoothstep( 78.0, 78.01, iChannelTime[0] );\n\t  linesSpeed -= smoothstep(140.0,140.01, iChannelTime[0] );\n\n\t\n\tta  = 0.2*vec3( cos(0.1*time), 0.0*sin(0.1*time), sin(0.07*time) );\n\n\tvec3 ro = vec3( 1.0*cos(camSpeed*0.05*time+6.28*mo.x), 0.0, 1.0*sin(camSpeed*0.05*time+6.2831*mo.x) );\n\tfloat roll = 0.25*sin(camSpeed*0.01*time);\n\t\n\t// camera tx\n\tvec3 cw = normalize( ta-ro );\n\tvec3 cp = vec3( sin(roll), cos(roll),0.0 );\n\tvec3 cu = normalize( cross(cw,cp) );\n\tvec3 cv = normalize( cross(cu,cw) );\n\tvec3 rd = normalize( p.x*cu + p.y*cv + 1.2*cw );\n\n\tfloat curve  = smoothstep( 61.8, 71.0, iChannelTime[0] );\n\t      curve -= smoothstep(10.0,113.0, iChannelTime[0] );\n    rd.xy += curve*0.25*vec2( sin(34.0*q.y), cos(34.0*q.x) );\n\trd = normalize(rd);\n\t\n\t\n\tro *= 1.0 - linesSpeed*0.5*freqs[1];\n    vec3 col = castRay( ro, rd, 1.0 + 20.0*linesSpeed );\n    col = col*col*2.4;\n\t\n\n\n\t// fade to black\n    col *= 1.0 - smoothstep(218.0,228.00, iChannelTime[0] );\n    col *=       smoothstep(  0.0,  2.00, iChannelTime[0] );\n\tif( iChannelTime[0]>61.8 && iChannelTime[0]<65.0 )\n\tcol *= vec3(1.0)*clamp( (iChannelTime[0]-61.8)/(65.0-61.8), 0.0, 1.0 );\n   \n\n    col *= 0.1+0.85*pow( 16.0*q.x*q.y*(1.0-q.x)*(1.0-q.y), 0.15 );\n\n    fragColor=vec4( col, 1.0 );\n}","name":"Buffer B","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"4dXGR8"}],"inputs":[{"channel":0,"type":"music","id":"4dfGzn","filepath":"/media/a/ec8a6ea755d34600547a5353f21f0a453f9f55ff95514383b2d80b8d71283eda.mp3","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"// Fork of \"Fork Fork Polar firebreath 967\" by firebreathz. https://shadertoy.com/view/NdBXRG\n// 2021-06-13 18:25:29\n\n#define time iTime\n#define PI 3.14159265359\n\n#define NUM_BANDS 40\n\n//#define REVERSED\n\nfloat noise3D(vec3 p)\n{\n\treturn fract(sin(dot(p ,vec3(12.9898,78.233,12.7378))) * 43758.5453)*2.0-1.0;\n}\n\nvec3 mixc(vec3 col1, vec3 col2, float v)\n{\n    v = clamp(v,0.0,1.0);\n    return col1+v*(col2-col1);\n}\n\nvec3 drawBands(vec2 uv)\n{\n  \tuv = 2.0*uv-1.0;\n    uv.x*=iResolution.x/iResolution.y;\n    uv = vec2(length(uv), atan(uv.y,uv.x));\n    \n    //uv.x-=0.25;\n    //uv.x = max(0.0,uv.x);\n    \n    uv.y -= PI*0.5;\n    vec2 uv2 = vec2(uv.x, uv.y*-1.0);\n    uv.y = mod(uv.y,PI*2.0);\n    uv2.y = mod(uv2.y,PI*2.0);\n    \n    vec3 col = vec3(0.0);\n    vec3 col2 = vec3(0.0);\n    \n    float nBands = float(NUM_BANDS);\n    float i = floor(uv.x*nBands);\n    float f = fract(uv.x*nBands);\n    float band = i/nBands;\n   \tfloat s;\n   \t\n    #ifdef REVERSED\n    band = 5.0-band;\n    #endif \n    \n    //cubic easing\n    band *= band*band; \n    \n    band = band*0.99;\n    band += 0.01;\n    \n    s = texture( iChannel0, vec2(band,0.08) ).x;  \n    \n    if(band<0.0||band>=1.0){\n        s = 0.0;\n    }\n    \n    /* Gradient colors and amount here */\n    const int nColors = 6;\n    vec3 colors[nColors];  \n    colors[0] = vec3(1.05,1.05,1.0);\n    colors[1] = vec3(1.205,1.00,1.00);\n    colors[2] = vec3(1.50,1.00,1.25);\n    colors[3] = vec3(1.90,0.75,3.25);\n \n    vec3 gradCol = colors[0];\n    float n = float(nColors)-1.0;\n    for(int i = 1; i < nColors; i++)\n    {\n\t\tgradCol = mixc(gradCol,colors[i],(s-float(i-1)/n)*n);\n    }\n    \n    float h = PI*1.5;\n    \n    col += vec3(1.0-smoothstep(-2.0,1.5,uv.y-s*h));\n    col *= gradCol;\n\n    col2 += vec3(1.0-smoothstep(-2.0,1.5,uv2.y-s*h));\n    col2*= gradCol;\n    \n    col = mix(col,col2,step(0.0,uv.y-PI));\n\n    col *= smoothstep(0.025,0.875,f);\n    col *= smoothstep(0.875,0.625,f); \n    \n    col = clamp(col,0.0,1.0);\n    \n    return col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n    vec2 p = vec2(uv.x, uv.y+0.1);\n\tvec3 col = vec3(0.0);\n    col += drawBands(p);//*smoothstep(1.0,0.5,uv.y);;\n    \n    vec3 ref = vec3(0.0);\n    vec2 eps = vec2(0.0025,-0.025);\n\n    ref += drawBands(vec2(p.x,1.0-p.y)+eps.xx);\n    ref += drawBands(vec2(p.x,1.0-p.y)+eps.xy);\n    ref += drawBands(vec2(p.x,1.0-p.y)+eps.yy);\n    ref += drawBands(vec2(p.x,1.0-p.y)+eps.yx);\n    \n    ref += drawBands(vec2(p.x+eps.x,1.0-p.y));\n    ref += drawBands(vec2(p.x+eps.y,1.0-p.y));\n    ref += drawBands(vec2(p.x,1.0-p.y+eps.x));\n    ref += drawBands(vec2(p.x,1.0-p.y+eps.y));\n\n    ref /= 8.0;\n     \n    float colStep = length(smoothstep(1.0,0.1,col));\n    \n    vec3 cs1 = drawBands(vec2(3.5,0.51));\n    vec3 cs2 = drawBands(vec2(0.5,0.93));\n        \n    vec3 plCol = mix(cs1,cs2,length(p*1.0-1.0))*0.5*smoothstep(1.75,-0.5,length(p*0.0-1.0));\n    vec3 plColBg = vec3(0.02)*smoothstep(1.0,0.0,length(p*8.0-1.0));\n    vec3 pl = (plCol+plColBg)*smoothstep(0.5,0.65,5.0-uv.y);\n    \n    col += clamp(pl*(1.0-colStep),0.0,1.0);\n    \n    col += ref*smoothstep(0.125,1.6125,p.y); \n    \n    col = clamp(col, 0.0, 1.0);\n\n    float dither = noise3D(vec3(uv,time))*9.0/2226.0;\n    col += dither;\n    \n\tfragColor = vec4(col,1.0);\n}","name":"Buffer A","description":"","type":"buffer"},{"outputs":[{"channel":0,"id":"4sXGR8"}],"inputs":[],"code":"// Created by inigo quilez - iq/2013\n// I share this piece (art and code) here in Shadertoy and through its Public API, only for educational purposes. \n// You cannot use, sell, share or host this piece or modifications of it as part of your own commercial or non-commercial product, website or project.\n// You can share a link to it or an unmodified screenshot of it provided you attribute \"by Inigo Quilez, @iquilezles and iquilezles.org\". \n// If you are a techer, lecturer, educator or similar and these conditions are too restrictive for your needs, please contact me and we'll work it out.\n\n\nvec3 hash3( float n )\n{\n    return fract(sin(vec3(n,n+1.0,n+2.0))*vec3(43758.5453123,22578.1459123,19642.3490423));\n}\n\nvec3 snoise3( in float x )\n{\n    float p = floor(x);\n    float f = fract(x);\n\n    f = f*f*(3.0-2.0*f);\n\n    return -1.0 + 4.0*mix( hash3(p+0.0), hash3(p+1.0), f );\n}\n\nfloat freqs[16];\n\nfloat dot2(in vec3 v ) { return dot(v,v); }\nvec2 usqdLineSegment( vec3 o, vec3 d, vec3 a, vec3 b )\n{\n\tvec3 oa = o - a;\n    vec3 ob = o - b;\n\tvec3 va = d*dot(oa,d)-oa;\n    vec3 vb = d*dot(ob,d)-ob;\n    \n    vec3 v1 = va;\n    vec3 v2 = vb-v1;\n    float h = clamp( -dot(v1,v2)/dot(v2,v2), 0.0, 1.0 );\n\n    float di = dot2(v1+v2*h);\n    \n    return vec2(di,h);\n}\n\nvec3 castRay( vec3 ro, vec3 rd, float linesSpeed )\n{\n\tvec3 col = vec3(0.0);\n\t\n\t\t\n\tfloat mindist = 10000.0;\n\tvec3 p = vec3(0.02);\n\tfloat h = 0.0;\n\tfloat rad = 2.4 + 0.15*freqs[0];\n\tfloat mint = 0.0;\n    for( int i=0; i<128; i++ )\n\t{\n\t\tvec3 op = p;\n\t\t\n\t\top = p;\n\t\tp  = 1.25*1.0*normalize(snoise3( 64.0*h + linesSpeed*0.015*iTime ));\n\t\t\n\t\tvec2 dis = usqdLineSegment( ro, rd, op, p );\n\t\t\n\t\tvec3 lcol = 0.6 + 0.4*sin( 10.0*6.2831*h + vec3(0.0,0.6,0.9) );\n\t\t\n\t\tfloat m = pow( texture( iChannel0, vec2(h*0.5,0.25) ).x, 2.0 )*(1.0+2.0*h);\n\t\t\n\t\tfloat f = 1.0 - 4.0*dis.y*(1.0-dis.y);\n\t\tfloat width = 1240.0 - 1000.0*f;\n\t\twidth *= 1.25;\n\t\tfloat ff = 1.0*exp(-0.06*dis.y*dis.y*dis.y);\n\t\tff *= m;\n\t\tcol += 0.3*lcol*exp( -0.3*width*dis.x )*ff;\n\t\tcol += 0.5*lcol*exp( -8.0*width*dis.x )*ff;\n\t\th += 1.0/128.0;\n\t}\n\n\n    return col;\n}\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 q = fragCoord.xy/iResolution.xy;\n    vec2 p = -1.0+2.0*q;\n\tp.x *= iResolution.x/iResolution.y;\n    vec2 mo = iMouse.xy/iResolution.xy;\n\t\t \n\tfloat time = iTime;\n\n\n\tfor( int i=0; i<16; i++ )\n\t    freqs[i] = clamp( 1.9*pow( texture( iChannel0, vec2( 0.05 + 0.5*float(i)/16.0, 0.25 ) ).x, 3.0 ), 0.0, 1.0 );\n\t\n\t// camera\t\n\tvec3 ta = vec3( 0.0, 0.0, 0.0 );\n\nfloat isFast = smoothstep( 35.8, 35.81, iChannelTime[0] );\n\tisFast  -= smoothstep( 61.8, 61.81, iChannelTime[0] );\n\tisFast  += smoothstep( 78.0, 78.01, iChannelTime[0] );\n\tisFast  -= smoothstep(103.0,103.01, iChannelTime[0] );\n\tisFast  += smoothstep(140.0,140.01, iChannelTime[0] );\n\tisFast  -= smoothstep(204.0,204.01, iChannelTime[0] );\n\t\n    float camSpeed = 1.0 + 4.0*isFast;\t\n\n\n\tfloat beat = floor( max((iChannelTime[0]-35.7+0.4)/0.81,0.0) );\n\ttime += beat*10.0*isFast;\n\tcamSpeed *= mix( 1.0, sign(sin( beat*1.0 )), isFast );\n\n\t\nfloat linesSpeed =  smoothstep( 22.7, 22.71, iChannelTime[0] );\t\n\t  linesSpeed -= smoothstep( 61.8, 61.81, iChannelTime[0] );\n\t  linesSpeed += smoothstep( 78.0, 78.01, iChannelTime[0] );\n\t  linesSpeed -= smoothstep(140.0,140.01, iChannelTime[0] );\n\n\t\n\tta  = 0.2*vec3( cos(0.1*time), 0.0*sin(0.1*time), sin(0.07*time) );\n\n\tvec3 ro = vec3( 1.0*cos(camSpeed*0.05*time+6.28*mo.x), 0.0, 1.0*sin(camSpeed*0.05*time+6.2831*mo.x) );\n\tfloat roll = 0.25*sin(camSpeed*0.01*time);\n\t\n\t// camera tx\n\tvec3 cw = normalize( ta-ro );\n\tvec3 cp = vec3( sin(roll), cos(roll),0.0 );\n\tvec3 cu = normalize( cross(cw,cp) );\n\tvec3 cv = normalize( cross(cu,cw) );\n\tvec3 rd = normalize( p.x*cu + p.y*cv + 1.2*cw );\n\n\tfloat curve  = smoothstep( 61.8, 71.0, iChannelTime[0] );\n\t      curve -= smoothstep(10.0,113.0, iChannelTime[0] );\n    rd.xy += curve*0.25*vec2( sin(34.0*q.y), cos(34.0*q.x) );\n\trd = normalize(rd);\n\t\n\t\n\tro *= 1.0 - linesSpeed*0.5*freqs[1];\n    vec3 col = castRay( ro, rd, 1.0 + 20.0*linesSpeed );\n    col = col*col*2.4;\n\t\n\n\n\t// fade to black\n    col *= 1.0 - smoothstep(218.0,228.00, iChannelTime[0] );\n    col *=       smoothstep(  0.0,  2.00, iChannelTime[0] );\n\tif( iChannelTime[0]>61.8 && iChannelTime[0]<65.0 )\n\tcol *= vec3(1.0)*clamp( (iChannelTime[0]-61.8)/(65.0-61.8), 0.0, 1.0 );\n   \n\n    col *= 0.1+0.85*pow( 16.0*q.x*q.y*(1.0-q.x)*(1.0-q.y), 0.15 );\n\n    fragColor=vec4( col, 1.0 );\n}","name":"Buffer C","description":"","type":"buffer"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":false,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":true,"mFlagMusicStream":false},"info":{"id":"M3dyWN","date":"1735124644","viewed":71,"name":"blend rough 3","username":"firebreathzz","description":"blend","likes":3,"published":3,"flags":32,"usePreview":0,"tags":["brough"],"hasliked":0,"parentid":"","parentname":""}}