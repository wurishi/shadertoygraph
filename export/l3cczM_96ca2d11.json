{"ver":"0.1","renderpass":[{"outputs":[{"channel":0,"id":"4dfGRr"}],"inputs":[{"channel":0,"type":"mic","id":"XdXGRr","filepath":"/presets/mic.png","sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"code":"///////////////////////////////////////////////////////////////////////////////////////////\n// CARTOON VARIATION 2 - \"Boxy Bubbles\"\n//    - Repeated box-like shapes that inflate with audio\n//    - Toon/cell-shading aesthetic\n// iChannel0: Audio texture for reactivity\n///////////////////////////////////////////////////////////////////////////////////////////\n#define STEPS 80\n#define FAR_CLIP 50.0\n#define EPSILON 0.002\n\n// Pastel palette, but different range\nvec3 pastelPaletteB(float t) {\n    // shift from purple to pink\n    return mix(vec3(0.75, 0.6, 0.95), vec3(1.0, 0.7, 0.8), t);\n}\n\n// Box SDF with round corners\nfloat sdBox(vec3 p, vec3 b, float r) {\n    vec3 q = abs(p) - b;\n    return length(max(q, 0.0)) - r;\n}\n\n// Repetition in 3D\nvec3 tileRepeatB(vec3 p, vec3 c) {\n    return mod(p, c) - 0.5*c;\n}\n\n// Map repeated \"boxy bubble\" structure\nfloat mapBoxes(vec3 p, float time, float audio) {\n    // repeated tiling\n    vec3 cell = tileRepeatB(p, vec3(2.0,2.0,2.0));\n    // radius changes with time + audio\n    float r = 0.15 + 0.1*sin(time + floor(p.x+p.y+p.z)) + 0.15*audio;\n    // \"box\" dims and rounding\n    return sdBox(cell, vec3(0.4), r);\n}\n\n// Basic raymarch\nvec3 raymarchB(vec3 ro, vec3 rd, float time, float audio){\n    float t = 0.0;\n    vec3 col = vec3(0.95, 0.95, 1.0); // background\n    for(int i=0; i<STEPS; i++){\n        if(t > FAR_CLIP) break;\n        vec3 p = ro + rd*t;\n        float d = mapBoxes(p, time, audio);\n        if(d < EPSILON) {\n            // color by distance\n            float c = clamp(length(p)*0.07, 0.0, 1.0);\n            vec3 base = pastelPaletteB(c);\n            \n            // Toon outline\n            float outline = smoothstep(0.008, 0.0, abs(d));\n            col = mix(base, vec3(0.0), outline*0.4);\n            break;\n        }\n        t += d*0.5;\n    }\n    return col;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec2 uv = (fragCoord - 0.5*iResolution.xy)/ iResolution.y;\n\n    // camera\n    vec3 ro = vec3(0.0, 0.0, -5.0);\n    vec3 rd = normalize(vec3(uv,1.5));\n\n    float time = iTime;\n    // Audio from iChannel0\n    float audio = texture(iChannel0, vec2(0.02, 0.0)).r;\n    \n    // slow rotation\n    float a = 0.2*sin(time*0.25);\n    mat2 m  = mat2(cos(a), -sin(a), sin(a), cos(a));\n    rd.xy = m * rd.xy;\n\n    vec3 col = raymarchB(ro, rd, time, audio);\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}],"flags":{"mFlagVR":false,"mFlagWebcam":false,"mFlagSoundInput":true,"mFlagSoundOutput":false,"mFlagKeyboard":false,"mFlagMultipass":false,"mFlagMusicStream":false},"info":{"id":"l3cczM","date":"1734968744","viewed":77,"name":"CellBlockTesseract_Audio","username":"profmitchell","description":"// CARTOON VARIATION 2 - \"Boxy Bubbles\"\n//    - Repeated box-like shapes that inflate with audio\n//    - Toon/cell-shading aesthetic\n// iChannel0: Audio texture for reactivity","likes":0,"published":3,"flags":4,"usePreview":0,"tags":["audio"],"hasliked":0,"parentid":"","parentname":""}}