{"ver":"0.1","info":{"id":"ldlBWH","date":"1496088489","viewed":279,"name":"Audio Viz Wave- Psy Trance","username":"DonKarlssonSan","description":"Music: \nhttps://soundcloud.com/phanatic/ritmo-adventures-phanatic-remix","likes":3,"published":1,"flags":64,"usePreview":0,"tags":["audio","soundcloud"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"MsfXDr","filepath":"https://soundcloud.com/phanatic/ritmo-adventures-phanatic-remix","previewfilepath":"https://soundcloud.com/phanatic/ritmo-adventures-phanatic-remix","type":"musicstream","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// From Stackoveflow\n// http://stackoverflow.com/questions/15095909/from-rgb-to-hsv-in-opengl-glsl\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\n\n#define rotate(a)  mat2(cos(a), -sin(a), sin(a), cos(a))\n\n\nconst float lineWidth = 0.08;\nfloat plot(vec2 st, float pct){\n  return smoothstep(pct - lineWidth, pct, st.y) - smoothstep(pct, pct + lineWidth, st.y);\n}\n\nvec3 getColor(vec2 fragCoord, float wave, float rotationRate, float colorCycleRate, float zoom, float colorDiff) { \n    mat2 rot = rotate(iTime / rotationRate);\n    vec2 uv = (fragCoord.xy -0.5 * iResolution.xy) / iResolution.x * zoom;\n    uv *= rot;\n    uv.y += 0.5; \n\n    float c = plot(uv, wave);\n    vec3 hsv = vec3(colorDiff + iTime / colorCycleRate, 0.8, 1.0 * c);\n    vec3 rgb = hsv2rgb(hsv);\n    return rgb;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord.xy -0.5 * iResolution.xy) / iResolution.x;\n    int x = int((uv.x + 0.5) * 512.0);\n    ivec2 tx = ivec2(x, 1);\n    \n    // Time domain\n    float wave = texelFetch(iChannel0, tx, 0).x;\n \n    vec3 rgb = getColor(fragCoord, wave, 3.0, 12.0, 1.0, 0.0);\n    \n    vec3 rgb2 = getColor(fragCoord, wave, 4.0, 10.0, 0.7, 0.9);\n\n    vec3 rgb3 = getColor(fragCoord, wave, 20.0, 30.0, 1.9, 1.5) * 0.4;\n        \n    fragColor = vec4(rgb + rgb2 + rgb3, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}