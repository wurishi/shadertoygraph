{"ver":"0.1","info":{"id":"4d2yRd","date":"1550917912","viewed":453,"name":"[ Shape ] - 2D combinator","username":"Friend","description":"Current state of infinitely extendable 2d shape spiral","likes":5,"published":3,"flags":0,"usePreview":0,"tags":["2d","spiral","shapes"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define res_        iResolution\n#define time_       iTime\n#define pi_         3.14159265\n#define tau_        2.*pi_\n\n#define crot(a)     mat2(cos(a),-sin(a),sin(a),cos(a))\n#define ccrot(a)    mat2(cos(a),sin(a),-sin(a),cos(a))\n\n#define cartg(p)    min((abs(fract(p-.49)-.5) / fwidth(p)).x, (abs(fract(p-.49)-.5) / fwidth(p)).y)   \n#define dom(uv, s)  (2. * uv.xy - res_.xy) / res_.y * s\n\n#define l(p,r,k)    abs(p.x>-r&&p.x<r ? abs(k*p.x - p.y) : 1.)\n#define or(i, j)\tvec2(i-.5,j-.5)\n\n\nvoid mainImage(out vec4 o, vec2 f) {\n\tvec2  p = dom(f, 2.5);\n    float t = sin(time_);\n    float g = cartg(p);\n    \n    vec2 spiral[9] = vec2[](\n        p - or(0., 1.),\n        p - or(1., 1.),\n        p - or(1., 0.),\n        p - or(0., 0.),\n        p - or(-1., 0.),\n        p - or(-1., 1.),\n        p - or(-1., 2.),\n        p - or(0., 2.),\n        p - or(1., 2.)\n    );\n    \n    // Epsilon point\n    float cell01 = length(spiral[0]) - .01;         \n    // x\n    float cell11 = spiral[1].y>-.3 && spiral[1].y<.3 ?\n        abs(spiral[1].x) : 1.;\n    // x-y\n  \tfloat cell10 = l(spiral[2], .3, 1.);\n    // y\n    float cell00 = spiral[3].x>-.3 && spiral[3].x<.3 ?\n        abs(spiral[3].y) : 1.;\n    // c0*x^2 - c1*y\n    float cellm10 = spiral[4].y < .2 ?\n        abs(3.*spiral[4].x*spiral[4].x-.8*spiral[4].y-.2) : 1.;\n    // c0*y^2 - c1*x\n    float cellm11 = spiral[5].x < .2 ?\n        abs(3.*spiral[5].y*spiral[5].y-.8*spiral[5].x-.2) : 1.;\n   \t// x^2+y^2\n    float cellm12 =\n        abs(spiral[6].x*spiral[6].x+spiral[6].y*spiral[6].y - .06);\n    // x^2-y^2\n    float cell02 = p.y > 1. && p.y < 2. ?\n        abs(4.3*spiral[7].x*spiral[7].x-4.*spiral[7].y*spiral[7].y - .06) : 1.;\n  \t// c0*x^2 * c1*y^2 - c2\n    float cell12 = p.x > -.01  && p.y > 1. && p.x < 1. && p.y < 2.?\n        abs(8.3*spiral[8].x*spiral[8].x * 4.*spiral[8].y*spiral[8].y - .1) : 1.;\n    \n    vec2  q22 = p - or(2., 2.); // c0*x^3 * c1*y^2 - c2\n    float cell22 = p.y > 1. && p.y < 2. ?\n        abs(5.*q22.x*q22.x*q22.x - q22.y) : 1.;\n    \n    vec2  q21 = p - or(2., 1.); // max(|x|, |y|)\n    float cell21 = abs(max(abs(q21.x), abs(q21.y)) - .25);\n    \n    vec2  q20 = p - or(2., 0.); // min(|x|, |y|)\n    float cell20 = p.x > 1. && p.x < 2. && p.y > -1. && p.y < 0.?\n        abs(min(abs(q20.x), abs(q20.y)) - .25) : 1.;\n    \n    vec2 q2m1 = p - or(2., -1.);\n    float cellq2m1 = abs(max(abs(4.*q2m1.x*q2m1.x+q2m1.y), abs(q2m1.y)) - .3);\n          \n    vec2 q1m1 = p - or(1., -1.);\n    float cellq1m1 = abs(max(abs(4.*q1m1.x*q1m1.x+q1m1.y -.09), abs(q1m1.y*q1m1.x - q1m1.x)) - .3);;\n        \n    vec3 col = vec3(.0, .0, .6);\n    \n    col = mix(col, vec3(1.), 1.-g);\n    col = mix(col, vec3(1.), smoothstep(0.2, 0.001, cell01));\n    col = mix(col, vec3(1.), smoothstep(0.2, 0.001, cell11));\n    col = mix(col, vec3(1.), smoothstep(0.2, 0.001, cell10));\n    col = mix(col, vec3(1.), smoothstep(0.2, 0.001, cell00));\n    col = mix(col, vec3(1.), smoothstep(0.2, 0.001, cellm10));\n    col = mix(col, vec3(1.), smoothstep(0.2, 0.001, cellm11));\n    col = mix(col, vec3(1.), smoothstep(0.1, 0.001, cellm12));\n    col = mix(col, vec3(1.), smoothstep(0.2, 0.001, cell02));\n    col = mix(col, vec3(1.), smoothstep(0.1, 0.001, cell12));\n    col = mix(col, vec3(1.), smoothstep(0.1, 0.001, cell22));\n    col = mix(col, vec3(1.), smoothstep(0.1, 0.001, cell21));\n    col = mix(col, vec3(1.), smoothstep(0.1, 0.001, cell20));\n    col = mix(col, vec3(1.), smoothstep(0.2, 0.001, cellq2m1));\n    col = mix(col, vec3(1.), smoothstep(0.2, 0.001, cellq1m1));\n    \n    int id = int(mod(time_, 9.));\n    float s = max(abs(spiral[id].x), abs(spiral[id].y)) - .4;\n    col = mix(col, vec3(1., 0., 0.), 1.1-s);\n                  \n    o = vec4(col, 1.);\n}\n","name":"Image","description":"","type":"image"}]}