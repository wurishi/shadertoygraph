{"ver":"0.1","info":{"id":"mdGyD3","date":"1696682029","viewed":65,"name":"SurfaceBlur1-test","username":"nomkcode","description":"对r，g，b三通道分别计算，复杂度高，可以发现单击鼠标在移动过程中有延时","likes":0,"published":3,"flags":0,"usePreview":0,"tags":["surfaceblur"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float R = 5.0;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 offset = vec2(1.0) / iResolution.xy;\n    \n    vec3 final_c = surfaceBlur(iChannel0, uv, R, offset);\n    // 通过鼠标点击设定模糊边界\n    vec3 col = texture(iChannel0, uv).rgb;\n    if(uv.x > iMouse.x / iResolution.x){\n        col = final_c.rgb;\n    }\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[],"code":"const float Y = 78.0;\n\nvec3 surfaceBlur(in sampler2D tex, in vec2 uv, float r, in vec2 offset){\n    vec3 center_c = texture(tex, uv).rgb;\n    vec3 sum_color = vec3(0.0);\n    for(int i = 0; i < 3; i++){\n        float sum_i = 0.0;\n        float norm = 0.0;\n        for(float x = -r; x <= r; x++){\n            for(float y = -r; y <= r; y++){\n                vec2 uv2 = uv + vec2(x * offset.x, y * offset.y);\n                vec3 cur_c = texture(tex, uv2).rgb;\n                \n                float para = 1.0 - abs(center_c[i] - cur_c[i]) * 255.0 / (2.5 * Y);\n                sum_i += para * cur_c[i] * 255.0;\n                norm += para;\n            }\n        }\n        sum_color[i] = sum_i / norm;\n    }\n    return sum_color/255.0;\n}","name":"Common","description":"","type":"common"}]}