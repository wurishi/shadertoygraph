{"ver":"0.1","info":{"id":"mtByzD","date":"1691519088","viewed":52,"name":"Badgrid2d","username":"notdesby","description":"Grid 2d deform","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["distancefield","grid","deform","transition"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n\n [1] https://iquilezles.org/articles/distfunctions2d/\n [2] @iq https://www.shadertoy.com/view/XtSGDK/\n    \n*/\n\nfloat sdcircle(vec2 uv, float r){\n\n    return length(uv)-r;\n}\n\n\n//[1]\nfloat sdbox( in vec2 p, in vec2 b ){\n\n    vec2 d = abs(p)-b;\n    float c = length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n    return c;\n}\n\n//[1]\nfloat sdhexagram( in vec2 p, in float r ){\n\n    const vec4 k = vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n    p = abs(p);\n    p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n    p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n    p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n    \n    return length(p)*sign(p.y);\n}\n\n//inspired by [2]\nvec2 deform( in vec2 p, out float sca ){\n    \n    float t = iTime + 9.0;\n    float s = sqrt(dot(p*p,p*p));\n    \n    s = mix(s,dot(p,p),0.5*tanh(4.0*sin(0.7*t))+0.5);\n    s = mix(0.002,0.0075, 0.5*tanh(4.0*sin(0.8*t))+0.5)*s;\n    s = mix(s,1.0, 0.5*tanh(4.0*sin(0.45*t))+0.5);\n    \n    p = mix(p/s,p*s, 0.5*tanh(4.0*sin(0.25*t))+0.5);\n    p.xy += 5.0*cos(0.5*vec2(1.0,1.1)*t + vec2(2.0,4.0));\n    sca = s;\n    \n\treturn p;\n}\n\nfloat shape(vec2 uv){\n    \n    vec2 q = mod(uv+1.0,2.0)-1.0;\n    \n    //grid\n    float d = min(sdbox(q,vec2(0.04,1.0)), sdbox(q,vec2(1.0,0.04)) );\n    \n    //rotation hexagram shape\n    float t = iTime;\n    q *= mat2(cos(t), -sin(t), sin(t), cos(t)); \n    \n    float s0 = sdcircle(q,0.25);\n    float s1 = sdhexagram(1.5*q,0.5);\n    \n    \n    d = min(d,mix(s0,s1,0.5*tanh(5.0*sin(0.6*t))+0.5));\n    \n    \n    \n    d = smoothstep(0.0,0.085,d);\n    \n    return d;\n}\n\n//inspired by [2]\nfloat deformshape(vec2 p){\n\n    float s = 1.0;\n    p = deform(p, s);\n    \n    return smoothstep(0.0,1.16,shape(p)*s); \n    //float v = shape(p)*s;\n    //return smoothstep(0.,2.5,v/fwidth(v));\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\n    \n    vec2 uv = 12.0*(fragCoord - 0.5*iResolution.xy )/iResolution.y;\n    \n    float t = iTime/4.0;\n    uv *= mat2(cos(t), -sin(t), sin(t), cos(t)); \n    \n    float s = deformshape(uv);\n    \n    vec3 col = vec3(pow(s,1.0/3.5));\n    \n    //output\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}