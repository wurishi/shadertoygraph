{"ver":"0.1","info":{"id":"Ddf3Rr","date":"1665522320","viewed":71,"name":"truchet #92862","username":"imadr","description":"awesome tutorial by the art of code\nhttps://www.youtube.com/watch?v=pmS-F6RJhAk","likes":9,"published":1,"flags":0,"usePreview":0,"tags":["truchet"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float hash(vec2 p){\n    p = fract(p*vec2(0.514, 0.12));\n    p += dot(p, p+6.135);\n    return fract(p.x*p.y);\n}\n\nfloat minkowski_dist(vec2 p, float order){\n    p = abs(p);\n    return pow(pow(p.x, order)+pow(p.y, order), 1./order);\n}\n\nvec4 truchet(vec2 p, vec3 col, float dist_order, float thickness, float pattern){\n    vec2 cell_id = floor(p);\n    p = fract(p)-.5;\n\n    p.x *= hash(cell_id) > .5 ? 1. : -1.;\n    float s = p.x > -p.y ? 1. : -1.;\n\n    vec2 circle_coords = p-vec2(.5)*s;\n    float angle = atan(circle_coords.y, circle_coords.x);\n    float dist_center = minkowski_dist(circle_coords, dist_order);\n    \n    float blur = .02;\n    float radius = .5;\n    float dist_to_edge = abs(dist_center-radius)-thickness;\n    float contour = smoothstep(blur, -blur, dist_to_edge);\n       \n    float d = cos(angle*2.)*0.5+0.5;\n    col *= mix(0.4,1., d);\n    \n    float check = mod(cell_id.x+cell_id.y, 2.)*2.-1.;\n    col *= 1.+pattern*sin(check*angle*20.+dist_to_edge*40.-iTime*10.);\n    return vec4(col, d)*contour;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord){\n    vec2 uv = (fragCoord-iResolution.xy*.5)/iResolution.y;\n    uv += iTime/(iResolution.y*0.1);\n    uv *= iResolution.y/100.;\n    vec3 col = vec3(0);\n\n    vec4 t1 = truchet(uv, vec3(0, 1, 0), 1., 0.14, 0.);\n    vec4 t2 = truchet(uv+vec2(.5, .5), vec3(0, 0, 1), 2.0+sin(mod(iTime, 5.)*5.)/2.+.5, 0.1, 0.3);\n    col += t1.a > t2.a ? t1.rgb : vec3(0.);\n    col += t2.a > t1.a ? t2.rgb : vec3(0.);\n\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}