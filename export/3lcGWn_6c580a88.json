{"ver":"0.1","info":{"id":"3lcGWn","date":"1575992173","viewed":326,"name":"pyramid and barycenter","username":"Rai","description":"first project in glsl. would like some tips","likes":10,"published":1,"flags":0,"usePreview":0,"tags":["3d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159265\nconst float str = 0.5;\nstruct object {\n    float x;\n    float y;\n};\n\nvec3 bary(vec3 a, vec3 b, vec3 c, vec2 p) {\n    vec2 v0 = b.xy - a.xy, v1 = c.xy - a.xy, v2 = p - a.xy;\n    float inv_denom = 1.0 / (v0.x * v1.y - v1.x * v0.y);\n    float v = (v2.x * v1.y - v1.x * v2.y) * inv_denom;\n    float w = (v0.x * v2.y - v2.x * v0.y) * inv_denom;\n    float u = 1.0 - v - w;\n    vec3 bc = abs(vec3(u,v,w));\n    return bc * clamp(1.0 - floor(bc.x + bc.y + bc.z - 0.0001), 0.0, 1.0);\n}\n\nfloat drawLine (vec3 p1, vec3 p2, vec2 uv, float a) {\n    float one_px = 1.0 / iResolution.x;\n    float d = distance(p1.xy, p2.xy);\n    float d_uv = distance(p1.xy, uv);\n    return 1.0-floor(1.0-(a*one_px)+ distance(mix(p1.xy, p2.xy, clamp(d_uv/d, 0.0, 1.0)), uv));\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    object obj;\n    obj.x = iTime - iResolution.x;\n    \n    vec3 p1 = vec3(0.5 + sin(obj.x)       *0.2, 0.25 + cos(obj.x+PI)    *0.1, 0.5 + sin(obj.x));\n    vec3 p3 = vec3(0.5 + sin(obj.x+PI)    *0.2, 0.25 + cos(obj.x)       *0.1, 0.5 + sin(obj.x+PI));\n    vec3 p2 = vec3(0.5 + sin(obj.x+PI/2.0)*0.2, 0.25 + cos(obj.x-0.5*PI)*0.1, 0.5 + sin(obj.x+PI/2.0)*0.2);\n    vec3 p4 = vec3(0.5 + sin(obj.x-PI/2.0)*0.2, 0.25 + cos(obj.x+0.5*PI)*0.1, 0.5 + sin(obj.x-PI/2.0)*0.2);\n    vec3 p5 = vec3(0.5 , 0.75, 0.0);\n\n    float lines = drawLine(p1, p2, uv, str)\n        \t\t+ drawLine(p2, p3, uv, str)\n        \t    + drawLine(p3, p4, uv, str)\n        \t    + drawLine(p4, p1, uv, str)\n        \t    + drawLine(p5, p1, uv, str)\n        \t    + drawLine(p5, p2, uv, str)\n        \t    + drawLine(p5, p3, uv, str)\n        \t    + drawLine(p5, p4, uv, str);\n    \n    vec3 bc1 = bary(p1, p2, p5, uv);\n    vec3 bc2 = bary(p2, p3, p5, uv);\n    vec3 bc3 = bary(p3, p4, p5, uv);\n    vec3 bc4 = bary(p4, p1, p5, uv);\n    vec3 bc5 = bary(p1, p2, p3, uv);\n    vec3 bc6 = bary(p1, p4, p3, uv);\n    \n\tfragColor = vec4(bc1 + bc2 + bc3 + bc4 + bc5 + bc6 + lines, 1.0);\n}","name":"Image","description":"","type":"image"}]}