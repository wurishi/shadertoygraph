{"ver":"0.1","info":{"id":"WdfcWr","date":"1584518018","viewed":299,"name":"polar smooth fold","username":"gaz","description":"2D polar smooth fold","likes":8,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 hsv(float h,float s,float v)\n{\n    return ((clamp(abs(fract(h+vec3(0,2,1)/3.0)*6.0-3.0)-1.0,0.0,1.0)-1.0)*s+1.0)*v;\n}\n\n// polar smooth fold\nvec2 pSFold(vec2 p,float n)\n{\n    float e = 5e-3;\n    float h = floor(log2(n));\n    float a = 6.2831*exp2(h)/n;\n    for(float i=0.0; i<h+2.0; i++)\n    {\n\t \tvec2 v = vec2(-cos(a),sin(a));\n\t\tfloat g = dot(p,v);\n \t\tp -= (g-sqrt(g*g+e))*v; // https://iquilezles.org/articles/functions\n \t\ta *= 0.5;\n    }\n    return p;\n}\n\n/*\nvec2 polarFold(vec2 p,float n)\n{\n    float h=floor(log2(n));\n    float a =PI2*exp2(h)/n;\n    for(int i=0;i<int(h)+2;i++)\n    {\n        vec2 v = vec2(-cos(a),sin(a));  \n        p-=2.0*min(0.0,dot(p,v))*v;\n        a*=0.5;\n    }\n    return p;\n}\n*/\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord*2.0-iResolution.xy)/iResolution.y;\n\tuv = pSFold(uv,6.0);\n    uv.y-=0.8;\n    float time = iTime*0.5;\n    vec2 v=vec2(cos(time),sin(time));\n    vec3 col = vec3(hsv(dot(uv*5.0,v),0.8,0.5));\n    // thanks spalmer\n    col=pow(col,vec3(1.0/2.2));\n    fragColor = vec4(col,1.0);\n}\n","name":"Image","description":"","type":"image"}]}