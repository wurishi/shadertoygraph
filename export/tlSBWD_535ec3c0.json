{"ver":"0.1","info":{"id":"tlSBWD","date":"1598932378","viewed":108,"name":"SL2 Light Intensity","username":"stevejtrettel","description":"Draws the Light Intensity in SL2 Geometry in a plane through the fiber direction in the Tangent Space to the Origin.","likes":3,"published":1,"flags":0,"usePreview":0,"tags":["2d"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"//from https://www.shadertoy.com/view/ll2GD3\nvec3 pal( in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d )\n{\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    float rng=10.+50.*(1.+cos(iTime/3.));//sets the size of the display\n  \n    float L=rng*(uv.x-0.5);\n    float z=rng*(uv.y-0.5);\n    z=360./640.*z;\n    \n    //Stuff Needed to compute the intensity\n    \n    //first; the components of the cylindrical coordinate polynomials\n    float L2, L4, L6,z2,z4,z6;\n    L2=L*L;\n    L4=L2*L2;\n    L6=L2*L4;\n    z2=z*z;\n    z4=z2*z2;\n    z6=z2*z4;\n    \n    //the hyperbola you lie on\n    float k=sqrt(abs(L2-z2));\n    \n    //the polynomials coefficients of the area density\n    float f1=(L2+z2)/pow(abs(L2-z2),6.);\n    float f2=17.*L6+7.*L4*z2+16.*L2*z4+32.*z6;\n    float f3=48.*L2*z2*(L2+z2);\n    float f4=3.*L4*(5.*L2+3.*z2);\n    float f5=L6-2.*L2*z2-z4-L4*(1.+z2);\n    float f6=(L6+2.*L2*z2+z4-L4*(z2-1.));\n    float f7=2.*L2*(L2+z2)*k;\n    \n    \n    //Trigonometric Components\n    float c1=cos(k);\n    float c2=cos(2.*k);\n    float s1=sin(k);\n    float s2=sin(k/2.);\n    s2*=s2;//now sin(k/2)^2;\n    \n    float C1=cosh(k);\n    float C2=cosh(2.*k);\n    float S1=sinh(k);\n    \n    float S2=sinh(k/2.);\n    S2*=S2;//now it's sinh(k/2)^2\n    \n    //the signs that change depending on formula type:\n    float sgn=1.;\n    float Sgn=-1.;\n    \n    //the area density function, depending on if you are in or out of the lightcone\n    float areaDensity;\n    \n    \n  if(abs(z)>abs(L)){\n            areaDensity=sqrt(abs(f1*s2*(f2 - f3*c1 + f4*c2)*(f5 + f6*c1 + sgn* f7*s1)))/2.;\n        }\n        else if(abs(z)<abs(L)){\n            areaDensity=sqrt(abs(f1*S2*(f2 - f3*C1 + f4*C2)*(f5 + f6*C1 + Sgn*f7*S1)))/2.;\n        }   \n   \n   \n    float intensity=1./areaDensity;\n    \n    float cappedIntensity=min(0.25*intensity,1.);\n\n    \n    // Time varying pixel color\n   // vec3 blue=1.5*vec3(0.1,0.2,0.35);\n   // vec3 orange=vec3(1.,177./255.,64./255.);\n   // vec3 yellow=vec3(0.75,0.75,0.35);\n   // vec3 mix=(1.-cappedIntensity)*blue+cappedIntensity*orange;\n    \n   // vec3 col = (0.75+intensity/5.)*mix;\n        //intensity*vec3(1.,1.,0.5);\n       \n\n   vec3 col = pal(0.5*cappedIntensity-0.55, vec3(0.5,0.5,0.5),vec3(0.5,0.5,0.5),vec3(1.0,1.0,1.0),vec3(0.0,0.10,0.20) );\n    \n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}