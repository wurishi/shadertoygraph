{"ver":"0.1","info":{"id":"ltSfWm","date":"1515999840","viewed":153,"name":"Shaded Landscape","username":"TechEpic","description":"Inspired by https://www.shadertoy.com/view/XdlGz8\n\nCould use some optimization.","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["texture","lighting","shaded"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = fragCoord.xy / iResolution.xy;\n    float light = texture(iChannel0, uv).x;\n    vec2 loop = vec2(0);\n    for(loop.y = -2.; loop.y <= 2.; loop.y += 1.) {\n    \tfor(loop.x = -2.; loop.x <= 2.; loop.x += 1.) {\n    \t\tlight += texture(iChannel0, uv + loop/iResolution.x).x;\n    \t}\n    }\n    light /= 25.;\n\tfragColor = texture(iChannel1, fragCoord.xy / iResolution.x)*light;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"float height(vec2 pos) {\n\treturn texture(iChannel0, pos).x + texture(iChannel0, pos).y + texture(iChannel0, pos).z;\n}\n\nbool hit(vec3 ray) {\n   \treturn height(ray.xz) > ray.y;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\tvec2 uv = fragCoord.xy / iResolution.x;\n    float light = 1.;\n    vec3 ray = vec3(uv.x, height(uv), uv.y);\n    float dist = 0.;\n    vec2 lightXZ;\n    if(iMouse.z > 0.) {\n   \t\tlightXZ = vec2(iMouse.x/iResolution.x - 0.5, iMouse.y/iResolution.x - iResolution.y/iResolution.x/2.);\n    } else {\n    \tlightXZ = vec2(sin(iTime/2.)/4., cos(iTime/2.)/4.);\n    }\n    vec3 dir = normalize(vec3(lightXZ.x, 5., lightXZ.y));\n    if(abs(dir.x) > abs(dir.z)) {\n    \tdir /= iResolution.x*abs(ray.x);\n    } else {\n    \tdir /= iResolution.x*abs(ray.z);\n    }\n    ray += dir;\n    float maxDist = (3.-ray.y)/dir.y;\n    while(!hit(ray) && dist < maxDist) {\n    \tray += dir;\n        dist++;\n    }\n    if(dist < maxDist) {\n        light = 0.3;\n    }\n\tfragColor = vec4(light);\n}","name":"Buf A","description":"","type":"buffer"}]}