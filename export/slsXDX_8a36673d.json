{"ver":"0.1","info":{"id":"slsXDX","date":"1626726617","viewed":212,"name":"AntiPod - Reizen","username":"Flopine","description":"A shader made as a loop for a track from ThronoCrigger, check out his album!!! \nhttps://thronocrigger.bandcamp.com/album/simulacra","likes":11,"published":1,"flags":96,"usePreview":0,"tags":["3d","raymarching","noise","animation"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4llXDB","filepath":"https://soundcloud.com/thronocrigger/reizen-cyanide-dansen-thronocrigger-cover","previewfilepath":"https://soundcloud.com/thronocrigger/reizen-cyanide-dansen-thronocrigger-cover","type":"musicstream","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":0}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Code by Flopine\n\n// Thanks to wsmind, leon, XT95, lsdlive, lamogui, \n// Coyhot, Alkama,YX, NuSan, slerpy, wwrighter \n// BigWings and FabriceNeyret for teaching me\n\n// Thanks LJ for giving me the spark :3\n\n// Thanks to the Cookie Collective, which build a cozy and safe environment for me \n// and other to sprout :)  \n// https://twitter.com/CookieDemoparty\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    fragColor = texture(iChannel0,uv);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define PI acos(-1.)\n#define TAU 6.283185\n#define rot(a) mat2(cos(a),sin(a),-sin(a),cos(a))\n\n#define BPM (105./60.)\n#define dt(sp,off) fract((iTime+off)*sp)\n#define sw(sp,off,num) (floor(sin(dt(sp,off)*PI)*num))\n\n#define cyl(p,r,h) max(length(p.xy)-r,abs(p.z)-h)\n#define hash21(x) fract(sin(dot(x,vec2(13.4,24.4)))*164.4)\n\nfloat moda (inout vec2 p, float rep)\n{\n    float per = TAU/rep;\n    float a = atan(p.y,p.x);\n    float id = floor(a/per);\n    a = mod(a,per)-per*0.5;\n    p = vec2(cos(a),sin(a))*length(p);\n    return id;\n}\n\nfloat g1=0.,g2=0.,g3=0.,aid;\nfloat SDF (vec3 p)\n{\n    float anim = iTime*10.;\n    float swanim = sw(BPM/8.,0.,2.1);\n    if(swanim <= 0.) p.yz *= rot(PI/2.);\n    else if (swanim >= 1. && swanim < 2.)\n    {\n        p.yz *= rot(-atan(1./sqrt(2.)));\n    }\n    else if (swanim >= 2.)\n    {\n        p.yz *= rot(-atan(1./sqrt(2.)));\n        p.yz *= rot(PI/2.);\n    }\n    \n    p.y += -2.+anim;\n    vec3 pp =p;\n    float d = cyl(p.xzy,0.2,1e10);\n    g1 += 0.01/(0.01+d*d);\n    p.xz *= rot(p.y*0.5);\n    p.x -= 2.;\n    float e = cyl(p.xzy,0.9+texture(iChannel0,p.xz*0.05+iTime).x,anim);\n    g2 += 0.01/(0.01+e*e);\n    d = min(d,e);\n\n    p = pp;\n    p.xz *= rot(p.y*0.5);\n    p.x += 2.;\n    float f = cyl(p.xzy,0.9+texture(iChannel0,p.xz*0.05+iTime).x,anim);\n    g3 += 0.01/(0.01+f*f);\n    d = min(d,f);\n\n    return d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \n    vec2 uv = (2.*fragCoord-iResolution.xy)/iResolution.y;\n    vec3 ro=vec3(uv*5.,-30.),rd=normalize(vec3(0.,0.,1.)),p=ro, col=vec3(0.);\n    \n    float dither = hash21(uv);\n    bool hit=false;\n    \n    for (float i=0.; i<64.; i++)\n    {\n        float d = SDF(p);\n        if (d<0.01)\n        {\n            hit = true;\n            break;\n        }\n        d *= 0.5+dither*0.1;\n        p += d*rd;\n    }\n    \n    col += g1*vec3(0.1,0.01,.5);\n    col += g2*vec3(0.8,0.,0.6);\n    col += g3*vec3(0.,0.1,0.5);\n\n    fragColor = vec4(sqrt(col),1.0);\n}\n","name":"Buffer A","description":"","type":"buffer"}]}