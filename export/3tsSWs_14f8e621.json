{"ver":"0.1","info":{"id":"3tsSWs","date":"1564651801","viewed":106,"name":"IndexColor with BilinearFilter","username":"hatomune","description":"Render index color while applying bilinear filter.","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["clut","indexcolor"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    //vec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 uv = fragCoord.xy / 100.;\n    ivec2 itexSize = textureSize(iChannel0,0);\n    vec2 texSize = vec2(itexSize.x,itexSize.y);\n    vec2 uvFrac = fract(uv*texSize+0.5);\n    vec2 nb = vec2(1./texSize.x,1./texSize.y);\n    \n    // down scale check\n    //*\n    vec2 ruv = vec2( abs(dFdx(uv.x)), abs(dFdy(uv.y)) );\n    if ( ruv.x > nb.x ) {\n        nb.x = ruv.x;\n    }\n    if ( ruv.y > nb.y ) {\n        nb.y = ruv.y;\n    }\n\t/**/\n    // LMB press check\n    if ( iMouse.z > 0.0 ){\n        // nearest\n        nb = vec2(0,0);\n    }\n    \n    vec2 lt = vec2(uv.x-nb.x*.5,uv.y-nb.y*.5);\n    vec2 lb = vec2(uv.x-nb.x*.5,uv.y+nb.y*.5);\n    vec2 rt = vec2(uv.x+nb.x*.5,uv.y-nb.y*.5);\n    vec2 rb = vec2(uv.x+nb.x*.5,uv.y+nb.y*.5);\n    \n    vec4 ltc =  texture(iChannel0, lt);   \n    vec4 lbc =  texture(iChannel0, lb);\n    vec4 rtc =  texture(iChannel0, rt);\n    vec4 rbc =  texture(iChannel0, rb);\n    \n    // look up pallet\n    //*\n    ltc = texture(iChannel1, vec2(ltc.r,0));\n    lbc = texture(iChannel1, vec2(lbc.r,0));\n    rtc = texture(iChannel1, vec2(rtc.r,0));\n    rbc = texture(iChannel1, vec2(rbc.r,0));\n\t/**/    \n\n    vec4 lrtc = mix(ltc,rtc,uvFrac.x);\n    vec4 lrbc = mix(lbc,rbc,uvFrac.x);\n    vec4 color = mix(lrtc,lrbc,uvFrac.y);\n    //color = texture(iChannel0, uv);\n    \n    fragColor = vec4(color.r,color.g,color.b,1.0);\n}","name":"Image","description":"","type":"image"},{"inputs":[],"outputs":[{"id":"4dXGR8","channel":0}],"code":"// gen palette\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n   vec2 uv = fragCoord/iResolution.xy;\n\n    // pixel color\n    vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));\n\n    // Output to screen\n    fragColor = vec4(col,1.0);\n}","name":"Buffer A","description":"","type":"buffer"}]}