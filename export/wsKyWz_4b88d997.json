{"ver":"0.1","info":{"id":"wsKyWz","date":"1602627208","viewed":191,"name":"Barrel Distortion Animation","username":"Spacefish","description":"Just a play arround with a barrel distortion i once wrote for transforming an webcam image to an HMD","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["distortion","barrel","animation","vr"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dfGRn","filepath":"/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","previewfilepath":"/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // koordinaten im Ausgabebild\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n\tvec2 LensCenter = vec2(0.5,0.5);\n\tvec4 distortionParameters = vec4(1.0, -0.5, -0.5, 0.0);\n\tvec2 Scale = vec2(1.0);\n    \n    // animation party (auf false setzen um die distortionParameter von oben zu verwenden)\n    if(true) {\n        int slice = int(iTime / 3.1416) % 3;\n        float currentSine = sin(iTime);\n    \tdistortionParameters = vec4(\n            1.0,\n            slice == 0 ? currentSine : 0.0,\n            slice == 1 ? currentSine : 0.0,\n            slice == 2 ? currentSine : 0.0);\n    }\n    \n\tvec2 theta  = (uv - LensCenter); // skaliert auf [-0.5 ; 0.5]\n    \n\tfloat  rSq = theta.x * theta.x + theta.y * theta.y; // Abstand von der mitteÂ²\n    \n\tvec2 rvector = theta * (distortionParameters.x + distortionParameters.y * rSq + distortionParameters.z * rSq * rSq + distortionParameters.w * rSq * rSq * rSq);\n\t\t\t\t   \n\tvec2 xy = LensCenter + Scale * rvector;\n\t\n\t\n    if(xy.x >= 0.0 && xy.x <= 1.0 && xy.y >= 0.0 && xy.y <= 1.0)\n    \tfragColor = texture(iChannel0, vec2(xy.x, xy.y));\n}","name":"Image","description":"","type":"image"}]}