{"ver":"0.1","info":{"id":"ftXGDs","date":"1623075950","viewed":38,"name":"Ray Marching - Distance","username":"ChaosOfZen","description":"A basic ray marching shader.\nAdapted from: https://timcoster.com/2020/02/11/raymarching-shader-pt1-glsl/","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["raymarching","sphere"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":" \n// Constants\n#define PI 3.1415925359\n#define TWO_PI 6.2831852\n#define MAX_STEPS 100\n#define MAX_DIST 100.\n#define SURFACE_DIST .001\n \nfloat GetDist(vec3 p)\n{\n    vec4 s = vec4(0,1,6. + sin(iTime)*3.,1); //Sphere. xyz is position w is radius\n    float sphereDist = length(p-s.xyz) - s.w;\n    float planeDist = p.y;\n    float d = min(sphereDist,planeDist);\n \n    return d;\n}\n \n/*\n\nAdapted from: https://timcoster.com/2020/02/11/raymarching-shader-pt1-glsl/\n\nDistance field\nThe ray march loop marches from the origin/camera into the direction of the scene. \nAfter each iteration it checks if the distance to the scene is smaller than the minimum distance(SURACE_DIST). \nIf so, it returns the distance to the object. If the distance is greater than the max distance, \nmeaning the ray hasnâ€™t hit an object it also breaks out of the loop.\n*/\n \nfloat RayMarch(vec3 ro, vec3 rd) \n{\n    float dO = 0.; //Distane Origin\n    for(int i=0;i<MAX_STEPS;i++)\n    {\n        vec3 p = ro + rd * dO;\n        float ds = GetDist(p); // ds is Distance Scene\n        dO += ds;\n        if(dO > MAX_DIST || ds < SURFACE_DIST) break;\n    }\n    return dO;\n}\n \n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord.xy-.5*iResolution.xy)/iResolution.y;\n    vec3 ro = vec3(0,1,0); // Ray Origin/ Camera\n    vec3 rd = normalize(vec3(uv.x,uv.y,1));\n    float d = RayMarch(ro,rd); // Distance\n    d/= 10.;\n    vec3 color = vec3(d);\n     \n    // Set the output color\n    fragColor = vec4(color,1.0);\n}\n","name":"Image","description":"","type":"image"}]}