{"ver":"0.1","info":{"id":"MtyXWV","date":"1485924988","viewed":96,"name":"Reveal shader","username":"kevpegan","description":"Kernel on base with a revealing functionality","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["reveal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGRn","filepath":"/media/a/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","previewfilepath":"/media/ap/10eb4fe0ac8a7dc348a2cc282ca5df1759ab8bf680117e4047728100969e7b43.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":1,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec3 sample1(const int x, const int y, in vec2 fragCoord)\n{\n vec2 uv = fragCoord.xy / iResolution.xy * iChannelResolution[0].xy;\n uv = (uv + vec2(x, y)) / iChannelResolution[0].xy ;\n return texture(iChannel0, uv).xyz;\n}\n\nvec3 filter1(in vec2 fragCoord, mat3 kernel)\n{\n vec3 sum = sample1(-1, -1, fragCoord) * kernel[0][0]\n + sample1(-1, 0, fragCoord) * kernel[0][1]\n + sample1(-1, 1, fragCoord) * kernel[0][2]\n + sample1( 0, -1, fragCoord) * kernel[1][0]\n + sample1( 0, 0, fragCoord) * kernel[1][1]\n + sample1( 0, 1, fragCoord) * kernel[1][2]\n + sample1( 1, -1, fragCoord) * kernel[2][0]\n + sample1( 1, 0, fragCoord) * kernel[2][1]\n + sample1( 1, 1, fragCoord) * kernel[2][2];\n \n return sum;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    //modifiable variables\n    float revealRadius = .1;\n    int curKernelToUse = 1; //1 for Blur,\n\t\t\t\t\t\t\t//2 for Sharpen,\n    \t\t\t\t\t\t//3 for \n    \n    //predefined kernels\n    mat3 blur = mat3(\n \t\t\t\t\t  0.111, 0.111, 0.111, // first column (not row!)\n \t\t\t\t\t  0.111, 0.111, 0.111, // second column\n \t\t\t\t\t  0.111, 0.111, 0.111 // third column\n \t\t\t\t\t\t\t\t\t\t  );\n    \n    mat3 edge = mat3(\n \t\t\t\t\t  1, 0, -1, // first column (not row!)\n \t\t\t\t\t  0, 0, 0, // second column\n \t\t\t\t\t  -1, 0, 1 // third column\n \t\t\t\t\t\t\t\t\t\t  );\n    \n    mat3 sharpen = mat3(\n                         0., -1, 0.0, // first column (not row!)\n                         -1,  5,  -1, // second column\n                         0., -1, 0.0 // third column\n\t\t\t\t\t\t\t\t\t );\n    \n    \n    //uv and mouse location\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 mouseLoc = iMouse.xy / iResolution.xy;;\n    \n    vec4 Texture1, Texture2;\n    \n    //initialize texture1\n    Texture1 = texture(iChannel0, uv);\n    \n    if(length(mouseLoc - uv) <= revealRadius)\n    {\n        Texture2 = texture(iChannel1, uv);\n        fragColor = Texture2;\n    }\n    else\n    {\n        vec3 cf = filter1(fragCoord.xy, blur);\n        fragColor = vec4(cf, 1);\n    }\n}","name":"Image","description":"","type":"image"}]}