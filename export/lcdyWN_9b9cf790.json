{"ver":"0.1","info":{"id":"lcdyWN","date":"1730689840","viewed":36,"name":"[arrow] mandelbrot set","username":"ArrowSlashArrow","description":"renders mandelbrot set with optimized escape time algorithm at different misiurewicz points","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["fractal"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"int escape_time_optimized(vec2 coords, int max_iter) {\n    float x0 = coords.x;\n    float y0 = coords.y;\n    \n    float x2 = 0.0;\n    float y2 = 0.0;\n    \n    float x = 0.0;\n    float y = 0.0;\n    \n    int iter = 0;\n    while (x2 + y2 <= 4.0 && iter < max_iter) {\n        y = 2.0 * x * y + y0;\n        x = x2 - y2 + x0;\n        x2 = x * x;\n        y2 = y * y;\n        \n        iter++;\n    }\n    \n    return iter;\n}\n\n\nvec2 normalize_coords(vec2 fragCoord, float offset_x, float offset_y, float DIV_FACTOR) {\n    // TODO: output correct coords\n    float x = 400.0 * (fragCoord.x - iResolution.x * 0.5) / DIV_FACTOR;\n    float y = 400.0 * (fragCoord.y - iResolution.y * 0.5) / DIV_FACTOR;\n    \n    return vec2(x + offset_x, y + offset_y);\n}\n\nvec3 escape_time_colour(int iter, int max_iter, int speed) {\n    float shade = float(iter % speed) / float(speed); // float(iter) / float(max_iter);\n    return vec3(shade, shade, shade);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {    \n    float DIV_FACTOR = min(iResolution.x, iResolution.y);\n    int max_iter = 2500;  \n    float zoom_speed = 0.1;\n    int offset_index = 0; //int(iTime) / int(18.0 / zoom_speed);\n    float zoom = exp((iTime - 18.0 * float(offset_index) / zoom_speed) * zoom_speed + 2.0);\n    int mod_length = 50;\n    \n    const int offset_count = 6; \n    vec2[offset_count] offsets = vec2[](vec2(-0.77568377, 0.13646737), vec2(-1.401155, 0), vec2(-1.543689012692076, 0), vec2(-0.745429, 0.113008), vec2(-1.75, 0.0), vec2(-0.7269, 0.1889));\n    \n    vec2 offset = offsets[0]; // offsets[offset_index % offset_count];\n\n    fragColor = vec4(escape_time_colour(escape_time_optimized(normalize_coords(fragCoord, offset.x, offset.y, DIV_FACTOR * zoom), max_iter), max_iter, mod_length), 1.0);\n}","name":"Image","description":"","type":"image"}]}