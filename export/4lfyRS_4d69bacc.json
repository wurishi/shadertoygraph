{"ver":"0.1","info":{"id":"4lfyRS","date":"1505168381","viewed":217,"name":"Hat 3D","username":"rubelson","description":"Rotation 3D hat-surface","likes":11,"published":1,"flags":0,"usePreview":0,"tags":["3d","rotation","surface","hat"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\nfloat time = iTime/2.;\nfloat xf = .03272492438555;\nfloat ymin = 10000.;\nfloat ymax = -10000.;\nfloat mas = iResolution.x/400.;\nfloat x1=fragCoord.x/mas;\nvec3 col = vec3(0.);\nfor(float zi=-64.; zi<=64.; zi++)\n   {\n   float zs = 5.0625 * zi * zi;\n   float xi = x1 - zi - 200.;\n   if(xi * xi < 144.*144. - zs) \n  \t{\t   \n      float xt = sqrt(xi * xi + zs) * xf;\n      float yy = (sin(xt)+sin(xt*3.)*.4)*56.;\n      float y1 = mas*(120. + yy - zi * cos(time) - xi * sin(time) / 2.);\n      if(y1 < ymin)\n         {\n\t   if(abs(y1-fragCoord.y)<1.5)\n\t      col+=vec3(0.,0.,1.)*smoothstep(-1.5, 1.5, 1.5-abs(y1-fragCoord.y));\n         ymin = y1 - 1.;\n         }\n\tif(y1 > ymax)\n\t   {\n\t   if(abs(y1-fragCoord.y)<1.5)\n\t     \tcol+=vec3(1.,0.,0.)*smoothstep(-1.5, 1.5, 1.5-abs(y1-fragCoord.y));\n\t   ymax = y1 + 1.;\n         }\n      }\n   }\nfragColor = vec4(col,1.);\n}\n","name":"Image","description":"","type":"image"}]}