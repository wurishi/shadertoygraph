{"ver":"0.1","info":{"id":"fslXRj","date":"1618866770","viewed":224,"name":"Amiga Copper Bars","username":"Hellcat","description":"Recreation of the Amiga copper bars effect, one of my favourites - now as a selfmade shader :-)","likes":4,"published":1,"flags":0,"usePreview":0,"tags":["simple","retro","amiga","first"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n * Amiga Copper Bars\n * by HELLCAT\n * ===================\n *\n * My very fist attempt at creating a shader.\n * It's not too much, but I never stopped loving those copper bars :-)\n *\n * Cheers.\n */\n\n#define M_PI 3.1415926535897932384626433832795\n\n// calc the current position of a bar\nfloat calcBarPos( float movementSpeed, float offset )\n{\n    return (sin( mod( (iTime * movementSpeed) + offset, M_PI * 2.0 ) ) + 1.0) / 2.0;\n}\n\n// calc compression modifier for a bar\nfloat calcBarCompression( float pulseFrom, float pulseTo, float pulseSpeed )\n{\n    return ( pulseTo - pulseFrom ) * ((sin( mod( iTime * pulseSpeed, M_PI * 2.0 ) ) + 1.0) / 2.0 );\n}\n\n// draw a bar\nvec4 drawBar( vec2 uv, vec4 inColor, vec4 barColor, float barRadius, float barMoveSpeed, float barOffset, float barCompression, float barCompressionPulseTo, float barCompressionPulseSpeed )\n{\n    vec4 outColor = inColor;\n    float barPos;\n    float posNormaled;\n    \n    barPos = calcBarPos( barMoveSpeed, barOffset );\n    barCompression += calcBarCompression( barCompression, barCompressionPulseTo, barCompressionPulseSpeed );\n    \n    if( (uv.y > (barPos - barRadius)) && uv.y < (barPos) )\n    {\n        posNormaled = pow((uv.y - barPos + barRadius) / barRadius, barCompression);\n        outColor += barColor * posNormaled;\n    }\n\n    if( (uv.y < (barPos + barRadius)) && uv.y > (barPos) )\n    {\n        posNormaled = pow(1.0 - (uv.y - barPos) / barRadius, barCompression);\n        outColor += barColor * posNormaled;\n    }\n    \n    return outColor;\n}\n\n// le main\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // configs\n    float bar1Offset = -0.5;\n    float bar1Radius = 0.1;\n    float bar1Compression = 3.0;\n    float bar1MoveSpeed = 1.0;\n    float bar1CompressionPulseTo = 3.0;\n    float bar1CompressionPulseSpeed = 0.0;\n    vec4 bar1Color = vec4(1.0, 0.0, 0.0, 1.0);\n\n    float bar2Offset = 0.5;\n    float bar2Radius = 0.1;\n    float bar2Compression = 3.0;\n    float bar2MoveSpeed = 1.0;\n    float bar2CompressionPulseTo = 3.0;\n    float bar2CompressionPulseSpeed = 0.0;\n    vec4 bar2Color = vec4(0.0, 1.0, 0.0, 1.0);\n\n    float bar3Offset = 0.0;\n    float bar3Radius = 0.1;\n    float bar3Compression = 3.0;\n    float bar3MoveSpeed = 1.0;\n    float bar3CompressionPulseTo = 3.0;\n    float bar3CompressionPulseSpeed = 0.0;\n    vec4 bar3Color = vec4(0.0, 0.0, 1.0, 1.0);\n\n    float bar4Offset = -M_PI/2.0;\n    float bar4Radius = 0.33;\n    float bar4Compression = 1.0;\n    float bar4MoveSpeed = 0.0;\n    float bar4CompressionPulseTo = 4.0;\n    float bar4CompressionPulseSpeed = 0.0;\n    vec4 bar4Color = vec4(0.0, 0.33, 0.33, 1.0);\n\n    float bar5Offset = 0.0;\n    float bar5Radius = 0.15;\n    float bar5Compression = 2.0;\n    float bar5MoveSpeed = 1.5;\n    float bar5CompressionPulseTo = 2.0;\n    float bar5CompressionPulseSpeed = 0.0;\n    vec4 bar5Color = vec4(1.0, 1.0, 0.0, 1.0);\n\n    fragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Normalized pixel coordinates\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    // draw the bars\n    fragColor += drawBar( uv, vec4(0.0), bar1Color, bar1Radius, bar1MoveSpeed, bar1Offset, bar1Compression, bar1CompressionPulseTo, bar1CompressionPulseSpeed );\n    fragColor += drawBar( uv, vec4(0.0), bar2Color, bar2Radius, bar2MoveSpeed, bar2Offset, bar2Compression, bar2CompressionPulseTo, bar2CompressionPulseSpeed );\n    fragColor += drawBar( uv, vec4(0.0), bar3Color, bar3Radius, bar3MoveSpeed, bar3Offset, bar3Compression, bar3CompressionPulseTo, bar3CompressionPulseSpeed );\n    fragColor += drawBar( uv, vec4(0.0), bar4Color, bar4Radius, bar4MoveSpeed, bar4Offset, bar4Compression, bar4CompressionPulseTo, bar4CompressionPulseSpeed );\n    fragColor += drawBar( uv, vec4(0.0), bar5Color, bar5Radius, bar5MoveSpeed, bar5Offset, bar5Compression, bar5CompressionPulseTo, bar5CompressionPulseSpeed );\n}\n","name":"Image","description":"","type":"image"}]}