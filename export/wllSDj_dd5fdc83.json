{"ver":"0.1","info":{"id":"wllSDj","date":"1564392690","viewed":95,"name":"Curlies","username":"thesage1014","description":"trying to make endless spirals","likes":1,"published":1,"flags":32,"usePreview":0,"tags":["blur"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 buffa = texture(iChannel0,uv);\n    \n    vec4 col = buffa;\n    \n    \n    \n\t\n    fragColor = col;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4sf3Rr","filepath":"/media/a/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","previewfilepath":"/media/ap/ad56fba948dfba9ae698198c109e71f118a54d209c0ea50d77ea546abad89c57.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define scount 30\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\nfloat rand(vec2 fragCoord) {\n    \n    return fract((sin(iTime*1777.555+fragCoord.x+fragCoord.y*iResolution.y)*10000.0));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec4 oldCol = texture(iChannel0,uv);\n    //vec4 rand =  //texture(iChannel0,uv)*10000.)\n    \n    float ssize = .01*oldCol.z;\n    vec3 scan[scount];\n    int hi = 0;\n    for(int i=0; i<scount; i++) {\n        \n        float scanAng = 1.0/float(scount)*float(i)*6.2831;\n        vec2 offset = rotate(vec2(.0,ssize),scanAng);\n        vec2 uvo = clamp(offset+uv,vec2(0,0),vec2(1,1));\n        scan[i] = vec3(texture(iChannel0,uvo));\n        if(scan[i].z > scan[hi].z) {\n         \thi = i;\n        }\n    }\n    int cz = int(oldCol.z*float(scount));\n    hi = hi+int(cz)%scount;\n\n    vec4 noisy = vec4(rand(fragCoord),rand(fragCoord*1.00003),rand(fragCoord*1.00002),rand(fragCoord*1.00001))*texture(iChannel1,uv).xxxx+.1;\n    if(iFrame < 6 || oldCol.x <= .1) {\n        fragColor = noisy*.8;\n    } else {\n\t\t//fragColor = mix(oldCol*.99,vec4(scan[(iFrame/50)%scount],1),vec4(.05));\n        fragColor = mix(oldCol*.995,vec4(scan[hi],1),vec4(.4,.4,.7,.4));\n    }\n    \n}\n\n","name":"Buffer A","description":"","type":"buffer"}]}