{"ver":"0.1","info":{"id":"tlySzh","date":"1582156421","viewed":79,"name":"Wobbly cubes","username":"6502","description":"Second experiment","likes":1,"published":1,"flags":0,"usePreview":0,"tags":["3dcube"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float r = iResolution.y, ksq = 2. / r, sz = r*0.06, sp = sz*(2.6 + 0.5*cos(iTime*10.));\n    float h = r*0.6, dist = r*1.5, n = r*0.025;\n\tvec3 p = vec3(r*cos(iTime*0.23), h, r*sin(iTime*0.2));\n    vec3 w = normalize(-p);\n    vec3 u = normalize(cross(w, vec3(0., 1., 0.)));\n    vec3 v = cross(u, w);\n    vec3 d = w*dist + (fragCoord.x - iResolution.x*0.5)*u + (fragCoord.y - iResolution.y*0.25)*v;\n    d.x += cos(2.*fragCoord.x/h+iTime*2.)*n;\n    d.y += cos(3.*fragCoord.y/h+iTime*2.1)*n;\n    d.z += cos(5.*fragCoord.y/h+iTime*2.7)*n;\n    vec4 col = vec4(0., 0., 0., 1.);\n    vec3 pp;\n    float t = 1000000., tt;\n    for (int ix=-1; ix<=1; ix++) {\n        float xx = float(ix)*sp;\n        for (int iy=-1; iy<=1; iy++) {\n            float yy = (1.5 + float(iy))*sp;\n            for (int iz=-1; iz<=1; iz++) {\n                float zz = float(iz)*sp;\n                tt = (xx + sz - p.x) / d.x;\n                if (tt > 0. && tt < t) {\n                    pp = p + tt*d;\n                    if (pp.y >= yy-sz && pp.y <= yy+sz && pp.z >= zz-sz && pp.z <= zz+sz) {\n                        t = tt; col = vec4(1., 0., 0., 1.);\n                    }\n                }\n\n                tt = (xx - sz - p.x) / d.x;\n                if (tt > 0. && tt < t) {\n                    pp = p + tt*d;\n                    if (pp.y >= yy-sz && pp.y <= yy+sz && pp.z >= zz-sz && pp.z <= zz+sz) {\n                        t = tt; col = vec4(1., 0.5, 0., 1.);\n                    }\n                }\n\n                tt = (zz+sz - p.z) / d.z;\n                if (tt > 0. && tt < t) {\n                    pp = p + tt*d;\n                    if (pp.y >= yy-sz && pp.y <= yy+sz && pp.x >= xx-sz && pp.x <= xx+sz) {\n                        t = tt; col = vec4(0., 0., 1., 1.);\n                    }\n                }\n\n                tt = (zz-sz - p.z) / d.z;\n                if (tt > 0. && tt < t) {\n                    pp = p + tt*d;\n                    if (pp.y >= yy-sz && pp.y <= yy+sz && pp.x >= xx-sz && pp.x <= xx+sz) {\n                        t = tt; col = vec4(0., 1., 0., 1.);\n                    }\n                }\n\n                tt = (yy + sz - p.y) / d.y;\n                if (tt > 0. && tt < t) {\n                    pp = p + tt*d;\n                    if (pp.x >= xx-sz && pp.x < xx+sz && pp.z >= zz-sz && pp.z < zz+sz) {\n                        t = tt; col = vec4(1., 1., 0., 1.);\n                    }\n\t\t        }\n            }\n        }\n    }\n\n    tt = (p.y / -d.y);\n    if (tt > 0. && tt < t) {\n        pp = p + tt*d;\n        int ix = int(floor(pp.x * ksq));\n        int iz = int(floor(pp.z * ksq));\n        float L = 0.7 * 900000.0 / (900000.0 + pp.x*pp.x + pp.z*pp.z);\n        if (((ix + iz) & 1) == 0) L *= 0.6;\n        col = vec4(1., 1., 1., 1.) * L;\n    }\n    fragColor = col;\n}","name":"Image","description":"","type":"image"}]}