{"ver":"0.1","info":{"id":"XtccRf","date":"1533370321","viewed":579,"name":"Lorenz Attractor X","username":"archibate","description":"Lorentz Attractor","likes":14,"published":1,"flags":32,"usePreview":0,"tags":["2d","fractal","sdf","attractor","chaos","pattern"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\nvoid mainImage(out vec4 O, in vec2 U)\n{\n    O = vec4(1);\n    if (int(U.x) != 0) {\n    \tO.rgb = vec3(1.-texture(iChannel0, U/iResolution.xy).r);\n    }\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\n#define cross2d(u,v) (u.x*v.y-u.y*v.x)\n\nfloat ud2Line(vec2 u, vec2 q, vec2 p)\n{\n    u-=q; p-=q;\n    float l = length(p);\n    vec2 d = p/l;\n    float c = cross2d(d,u);\n    float s = dot(d,u);\n    l/=2.; s = max(0.,abs(s-l)-l);\n    return c*c+s*s;\n}\n\nconst float s=10.,r=28.,b=8./3.;\nvec3 lorenz(vec3 p)\n{\n    return vec3(\n        s*(p.y-p.x),\n        p.x*(r-p.z)-p.y,\n        p.x*p.y-b*p.z);\n}\n\n#define DT .01\n#define VIEW xz\n#define WIDTH .3\n\nvoid mainImage(out vec4 O, in vec2 U)\n{\n    O = iFrame < 5 ? vec4(0) : texture(iChannel0, U/iResolution.xy);\n    \n#define T(y) texture(iChannel0, vec2(0,y))\n    \n    if (int(U.x) == 0) {\n        if (iFrame < 6) {\n            O.xyz = vec3(-8,8,r-1.);\n        \treturn;\n        }\n        \n        if (int(U.y) == 0) {\n            O.xyz += lorenz(O.xyz) * DT;\n        } else {\n            O.xyz = T(0).xyz;\n        }\n        return;\n    }\n    \n    U.x -= iResolution.x*.5;\n    U /= iResolution.y;\n    U *= 60.;\n    \n    vec2 p = T(0).VIEW, q = T(1).VIEW;\n    float s = smoothstep(WIDTH*WIDTH,.0,ud2Line(U,q,p));\n    O.r = max(O.r,s);//O.r += .1*s;\n}\n\n","name":"Buffer A","description":"","type":"buffer"}]}