{"ver":"0.1","info":{"id":"McGSRw","date":"1714935179","viewed":32,"name":"first shader ever","username":"jovianzm","description":"I do know that is is messy.","likes":2,"published":1,"flags":0,"usePreview":0,"tags":["raytrace","rasterize"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 projectToCamera(vec3 pos, vec3 cameraPos, float fov)\n{\n    vec3 posUntransformed = pos - cameraPos;\n    return fov * (posUntransformed.xy / posUntransformed.z);\n}\n\nfloat intersectSphere(vec4 sphere, vec3 origin, vec3 direction)\n{\n    vec3 oc = origin - sphere.xyz;\n    float a = dot(direction, direction);\n    float b = 2.0 * dot(oc, direction);\n    float c = dot(oc, oc) - sphere.z * sphere.z;\n    float discriminant = b * b - 4.0 * a * c;\n    if(discriminant < 0.0)\n    {\n        return 321435423435.0;\n    }\n    else\n    {\n        return (-b - sqrt(discriminant)) / (2.0 * a);\n    };\n}\n\nvec4 sphere1;\nvec4 sphere2;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = 2.0 * fragCoord.xy / iResolution.xy - 1.0;\n    vec3 cameraPos = vec3(0.0, 0.0, -1.0);\n    vec3 dir = normalize(vec3(iResolution.x/iResolution.y * uv.x, uv.y, -1.5));\n    sphere1 = vec4(sin(iTime), cos(iTime), 0.5, 2.5);\n    sphere2 = vec4(0.0, 1.0, 1.0, 2.5);\n    float t = 12345678.0;\n    vec3 normal = normalize(vec3(1.0));\n    float newT = intersectSphere(sphere1, cameraPos, dir);\n    if(newT < t)\n    {\n        t = newT;\n        normal = normalize(sphere1.xyz - (cameraPos + dir * t));\n    };\n    \n    newT = intersectSphere(sphere2, cameraPos, dir);\n    if(newT < t)\n    {\n        t = newT;\n        normal = normalize(sphere2.xyz - (cameraPos + dir * t));\n    };\n    \n    if(t > 12345677.0) return;\n    \n    vec3 lightPos = vec3(2.0);\n    vec3 lightEmissive = vec3(2.0);\n    \n    fragColor = vec4(1.0 / distance(lightPos, cameraPos + dir * t) * lightEmissive * dot(normal, normalize((cameraPos + dir * t) - lightPos)), t);\n}","name":"Image","description":"","type":"image"}]}