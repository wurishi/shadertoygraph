{"ver":"0.1","info":{"id":"M3scRM","date":"1725992185","viewed":8,"name":"psyph func drawer 1.8","username":"Psyph","description":"attempt to draw function. maybe going to try to get it to rotate... i think it is rotatign now?","likes":0,"published":1,"flags":0,"usePreview":0,"tags":["function"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.141592654\nvec3 palette(float t)\n\n{\n    vec3 a=vec3(0.500,0.500,0.400);\n    vec3 b=vec3(0.620,0.620,0.620);\n    vec3 c=vec3(.8,.8,.5);\n    vec3 d=vec3(0.000,0.2,0.5);\n\treturn a+b*cos(2.*PI*(c*t+d));\n}\n\nvec3 rot(vec3 p, vec3 axis, float ang)\n{\n    axis=normalize(axis);\n    return mix(dot(axis,p)*axis,p,cos(ang))+cross(axis,p)*sin(ang);\n}\n\nvec3 getm()\n{\n    vec3 m = vec3((iMouse.y-abs(iMouse.w))/50.,-(iMouse.x-abs(iMouse.z))/50.,0.);\n    m.z=length(m.xy);\n    if(m.z==0.)\n    {\n        m=vec3(cos(iTime/PI),sin(iTime/2.),iTime);\n    }\n    return m;\n}\n\nfloat func(vec2 p)\n{\n    //return (p.x*p.x+p.y*p.y);\n    //return cos(p.x*p.y)*sin(p.y)*p.x;\n    //return p.x*sin(p.y);\n    //return cos(p.x)*sin(p.y);\n    //return p.x+p.y;\n    return cos(p.x)*sin(.2*p.y)*3.;\n}\n\nfloat funcB(vec3 p, vec3 b)\n{\n    float err=.05;\n    float dep=3.;\n    //float c=0.;\n    float c=-dep;\n    //while(c<0.)\n    while(c<dep)\n    {\n        vec3 p2=p-c*b;\n        float z=func(p2.xy);\n        if(abs(z-sin(p2.z))<=err)\n        {\n            return p2.z/dep;\n        }\n        //c+=20.;\n        c+=.02;\n    }\n    return dep+20.;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec3 m=getm();\n    vec2 uv = fragCoord.xy/iResolution.xy;\n    float scale=7.;\n    uv=scale*2.*uv-scale;\n    //uv.y+=1.;\n    \n    vec3 back=vec3(0.,0.,1.);\n    back=rot(back,vec3(m.xy,0.),m.z);\n    \n    vec3 uv2=rot(vec3(uv,0.),vec3(m.xy,0.),m.z);\n    float ans=funcB(uv2,back);\n    \n    //vec3 col = vec3(ans);\n    vec3 col = vec3(0.);\n    col=palette(ans);\n    \n    if(ans>3.)\n    {\n        col=vec3(0.);\n    }\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}