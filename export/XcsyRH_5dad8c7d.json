{"ver":"0.1","info":{"id":"XcsyRH","date":"1720793307","viewed":244,"name":"Mecharganic","username":"leon","description":"started as a breaking glass effect, ending up weird.","likes":26,"published":3,"flags":32,"usePreview":0,"tags":["abstract","organic"],"hasliked":0,"parentid":"","parentname":""},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"mipmap","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsBSR3","filepath":"/media/a/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","previewfilepath":"/media/ap/cb49c003b454385aa9975733aff4571c62182ccdda480aaba9a8d250014f00ec.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n// Mecharganic\n// 2024/07/12 Leon Denise\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    // coordinates distance\n    #define T(u) texture(iChannel0, uv+u/iResolution.xy).z\n    float z = T(0.);\n    \n    float edge = 0.;\n    float ao = 0.;\n    \n    const float count = 9.;\n    for (float a = 0.; a < count; ++a)\n    {\n        // blue noise scroll https://www.shadertoy.com/view/tlySzR\n        ivec2 pp = ivec2(fragCoord);\n        pp = (pp+(int(a))*ivec2(113,127)) & 1023;\n        vec3 blu = texelFetch(iChannel1,pp,0).xyz;\n        \n        // edge detection\n        float f = a/count;\n        float aa = 6.283*f;\n        vec2 xy = vec2(cos(aa),sin(aa));\n        edge += abs(z-T(xy));\n        \n        // sort of ambient occlusion\n        float r = (1.+blu.z) * 4.;\n        xy = normalize(vec2(blu.xy-.5))*r;\n        ao += abs(z-T(xy))/r;\n    }\n    \n    vec3 color = vec3((1.-edge) * (1.-ao));\n\n    fragColor = vec4(color, 1.);\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    vec2 aspect = vec2(iResolution.x/iResolution.y,1);\n    vec4 frame = texture(iChannel0, uv);\n    \n    // timeline\n    float tick = mod(float(iFrame), 200.);\n    \n    // init\n    if (tick < 1.)\n    {\n        vec2 p = (2.*fragCoord-iResolution.xy)/iResolution.y;\n        frame = vec4(p, length(p), 0);\n        \n        // extra shape\n        //frame += step(frame.z, .9);\n    }\n    // iterate\n    else if (tick < 30.)\n    {\n        // previous coordinates\n        vec2 p = frame.xy;\n        \n        // seed\n        vec4 rng = hash41(tick+iDate.w+iDate.z+iDate.y+iDate.x);\n        \n        // rotate\n        p.xy *= rot(rng.z*6.283);\n        \n        // translate\n        p.xy += (rng.xy-.5)*2.;\n        \n        // curl\n        vec2 e = vec2(.001,0);\n        vec3 pos = vec3(p/2., length(p)/2.);\n        float x = (noise(pos+e.yxy)-noise(pos-e.yxy))/(2.*e.x);\n        float y = (noise(pos+e.xyy)-noise(pos-e.xyy))/(2.*e.x);\n        vec2 curl = vec2(y, -x);\n        p.xy += curl * .5 / tick; // comment this for sharp breaks\n        \n        // keep result if closer\n        float dist = length(p);\n        if (dist < frame.z)\n        {\n            frame.xy = p.xy;\n            frame.z = dist;\n            frame.w = tick;\n        }\n    }\n    \n    fragColor = frame;\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[],"outputs":[],"code":"\nmat2 rot (float a) { float c=cos(a),s=sin(a);return mat2(c,-s,s,c); }\n\nfloat gyroid (vec3 seed) { return dot(sin(seed),cos(seed.yzx)); }\nfloat noise (vec3 p)\n{\n    float result = 0., a = .5;\n    for (int i = 0; i < 3; ++i, a/=2.)\n    {\n        result += gyroid(p/a)*a;\n    }\n    return result;\n}\n\n// Dave Hoskins https://www.shadertoy.com/view/4djSRW\nvec4 hash41(float p)\n{\n\tvec4 p4 = fract(vec4(p) * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}","name":"Common","description":"","type":"common"}]}